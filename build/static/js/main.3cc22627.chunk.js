(this["webpackJsonpbilling-app2"]=this["webpackJsonpbilling-app2"]||[]).push([[0],{326:function(e,t){},342:function(e,t,a){},344:function(e,t,a){},414:function(e,t){},435:function(e,t){},509:function(e,t,a){},537:function(e,t){},539:function(e,t){},549:function(e,t){},551:function(e,t){},578:function(e,t){},580:function(e,t){},581:function(e,t){},586:function(e,t){},588:function(e,t){},594:function(e,t){},596:function(e,t){},615:function(e,t){},627:function(e,t){},630:function(e,t){},636:function(e,t){},637:function(e,t){},644:function(e,t,a){},645:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(41),r=a.n(c),i=(a(342),a(343),a(344),a(345),a(10)),o=a(2),l=a(28),d=a(36),j=a(4),u=a.n(j),b=a(5),h=a(3),p=a(658),m=a(661),x=a(6),O=a(647),f=a(31),g=a.n(f),v=a(0),_=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"70",height:"70",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"QUOTATION / \u0627\u0642\u062a\u0628\u0627\u0633"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Quotation: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Quotation Date: "})," ",e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATETIME>"," "]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"N/A"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"N/A"]})]})}),Object(v.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:e.model.QRImageData?Object(v.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"70px",height:"72px"},alt:"Invoice QR Code"}):""}),Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:" :\u0627\u0642\u062a\u0628\u0627\u0633 "})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0642\u062a\u0628\u0627\u0633:  "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(v.jsx)("thead",{style:{fontSize:"3mm"},children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(v.jsx)("li",{children:"Part Number"})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"20%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})}),Object(v.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(v.jsx)("li",{children:"Unit Price"})]})}),Object(v.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(v.jsx)("li",{children:"Total Amount"})]})})]})}),Object(v.jsx)("tbody",{style:{fontSize:"2.7mm"},children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{style:{padding:"1px",height:"16px"},children:t.part_number?s+1+a*e.model.pageSize:""}),Object(v.jsx)("td",{style:{padding:"1px"},children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{style:{padding:"1px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{style:{padding:"1px"},children:[t.quantity?t.quantity.toFixed(2):"","  ",t.unit?t.unit:""]}),Object(v.jsx)("td",{className:"text-end",style:{padding:"1px"},children:t.unit_price?Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}}):""}),Object(v.jsx)("td",{style:{padding:"1px"},className:"text-end",children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(v.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",style:{padding:"2px"}}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Total \u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Shipping / Handling Fees   \u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Discount \u062e\u0635\u0645:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"2px"},children:"VAT \u0636\u0631\u064a\u0628\u0629:"}),Object(v.jsxs)("th",{className:"text-end",colSpan:"1",style:{padding:"2px"},children:[e.model.vat_percent.toFixed(2),"%"]}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"2px"},children:"Net Total \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"In Words \u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(v.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:[Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Delivered By \u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(v.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Received By \u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("th",{style:{width:"30%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("th",{style:{width:"30%",height:"30px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[e.model.signature_date_str?e.model.signature_date_str:"","  ",e.model.signature_date_str?n(e.model.signature_date_str):""]}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(v.jsx)("div",{className:"col-md-2 text-start"}),Object(v.jsx)("div",{className:"col-md-8 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),y=a(7),N=a(34),C=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=17;var t=r.products.length,s=0,n=parseInt(t/17),c=n;parseFloat(t/17)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),17!==r.pages[l].products.length);d++);s+=1057,o+=17,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Quotation #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),C=g[0],S=g[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Quotation Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(_,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),S=C,w=a(655),k=a(654),T=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Store #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Name(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.name_in_arabic]}),Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Title:"}),Object(v.jsxs)("td",{children:[" ",c.title]}),Object(v.jsx)("th",{children:"Title(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.title_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Registration Number(C.R NO.):"}),Object(v.jsxs)("td",{children:[" ",c.registration_number]}),Object(v.jsx)("th",{children:"Registration Number(C.R NO.)(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.registration_number_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Address:"}),Object(v.jsxs)("td",{children:[" ",c.address]}),Object(v.jsx)("th",{children:"Address in Arabic:"}),Object(v.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ZIP/PIN Code:"}),Object(v.jsxs)("td",{children:[" ",c.zipcode]}),Object(v.jsx)("th",{children:"ZIP/PIN Code in Arabic:"}),Object(v.jsxs)("td",{children:[" ",c.zipcode_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Phone:"}),Object(v.jsxs)("td",{children:[" ",c.phone]}),Object(v.jsx)("th",{children:"Phone in Arabic:"}),Object(v.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"VAT No:"}),Object(v.jsxs)("td",{children:[" ",c.vat_no]}),Object(v.jsx)("th",{children:"VAT No(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"E-mail:"}),Object(v.jsxs)("td",{children:[" ",c.email]}),Object(v.jsx)("th",{children:"VAT %:"}),Object(v.jsxs)("td",{children:[" ",c.vat_percent+"%"]})]})]})}),Object(v.jsxs)("div",{children:["Logo:",Object(v.jsx)("img",{alt:"Logo",src:"https://startpos-api.startuptech.uk"+c.logo+"?"+Date.now(),style:{width:100,height:100}},c.logo)]}),c.national_address&&Object(v.jsxs)("span",{children:[Object(v.jsx)("h2",{children:" National Address"}),Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Application Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.application_no]}),Object(v.jsx)("th",{children:"Application Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.application_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Service Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.service_no]}),Object(v.jsx)("th",{children:"Service Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.service_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Customer Account Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.customer_account_no]}),Object(v.jsx)("th",{children:"Customer Account Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.customer_account_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Building Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.building_no]}),Object(v.jsx)("th",{children:"Building Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.building_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Street Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.street_name]}),Object(v.jsx)("th",{children:"Street Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.street_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"District Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.district_name]}),Object(v.jsx)("th",{children:"District Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.district_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"City Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.city_name]}),Object(v.jsx)("th",{children:"City Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.city_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ZipCode: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.zipcode]}),Object(v.jsx)("th",{children:"ZipCode(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.zipcode_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Additional Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.additional_no]}),Object(v.jsx)("th",{children:"Additional Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.additional_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Unit Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.unit_no]}),Object(v.jsx)("th",{children:"Unit Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.unit_no_arabic]})]})]})})]})]})]})})})),R=T,D=a(42),A=a.n(D),F=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){g={national_address:{}},_({national_address:{}}),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(i=n.result).logo="",_(Object(h.a)({},i));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new y.a,O=Object(s.useState)({national_address:{}}),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){k(!1)}function R(t){t.preventDefault(),console.log("Inside handle Create"),g.vat_percent?g.vat_percent=parseFloat(g.vat_percent):g.vat_percent=null,g.phone&&(g.phone_in_arabic=F(g.phone.toString())),g.vat_no&&(g.vat_no_in_arabic=F(g.vat_no.toString())),g.zipcode&&(g.zipcode_in_arabic=F(g.zipcode.toString())),g.registration_number&&(g.registration_number_in_arabic=F(g.registration_number.toString())),g.national_address.application_no&&(g.national_address.application_no_arabic=F(g.national_address.application_no.toString())),g.national_address.service_no&&(g.national_address.service_no_arabic=F(g.national_address.service_no.toString())),g.national_address.customer_account_no&&(g.national_address.customer_account_no_arabic=F(g.national_address.customer_account_no.toString())),g.national_address.building_no&&(g.national_address.building_no_arabic=F(g.national_address.building_no.toString())),g.national_address.zipcode&&(g.national_address.zipcode_arabic=F(g.national_address.zipcode.toString())),g.national_address.additional_no&&(g.national_address.additional_no_arabic=F(g.national_address.additional_no.toString())),g.national_address.unit_no&&(g.national_address.unit_no_arabic=F(g.national_address.unit_no.toString())),console.log("formData.logo:",g.logo);var a="/v1/store",s="POST";g.id&&(a="/v1/store/"+g.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(g)};console.log("formData:",g),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Store Created Successfully!","success"),e.refreshList&&e.refreshList(),x.get("store_id")&&x.get("store_id")===c.result.id&&x.set("vat_percent",c.result.vat_percent,{path:"/",expires:new Date(Date.now()+31536e6)}),T(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Store!","danger")}))}Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")}));var D="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function F(e){return e.replace(/\d/g,(function(e){return D[parseInt(e)]}))}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:S,size:"lg",onHide:T,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:g.id?"Update Store #"+g.name:"Create New Store"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[g.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openDetailsView(g.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:R,children:[d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",g.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:R,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name?g.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),g.name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),g.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name In Arabic*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name_in_arabic?g.name_in_arabic:"",type:"string",onChange:function(e){c.v="",r(Object(h.a)({},c)),g.name_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),g.name_in_arabic&&!c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Code*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.code?g.code:"",type:"string",onChange:function(e){c.code="",r(Object(h.a)({},c)),g.code=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"code",placeholder:"Code"}),c.code&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.code]}),g.code&&!c.code&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Title(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.title?g.title:"",type:"string",onChange:function(e){c.title="",r(Object(h.a)({},c)),g.title=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"title",placeholder:"Title"}),c.title&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title]}),g.title&&!c.title&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Title In Arabic(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.title_in_arabic?g.title_in_arabic:"",type:"string",onChange:function(e){c.title_in_arabic="",r(Object(h.a)({},c)),g.title_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"title_in_arabic",placeholder:"Title In Arabic"}),c.title_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title_in_arabic]}),g.title_in_arabic&&!c.title_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address,type:"string",onChange:function(e){c.address="",r(Object(h.a)({},c)),g.address=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),g.address&&!c.address&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address In Arabic*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(h.a)({},c)),g.address_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),g.address_in_arabic&&!c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Registration Number(C.R NO.)*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.registration_number?g.registration_number:"",type:"number",onChange:function(e){c.registration_number="",r(Object(h.a)({},c)),g.registration_number=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"registration_number",placeholder:"Registration Number(C.R NO.)"}),c.registration_number&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.registration_number]}),g.registration_number&&!c.registration_number&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Zipcode*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.zipcode?g.zipcode:"",type:"number",onChange:function(e){c.zipcode="",r(Object(h.a)({},c)),g.zipcode=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"zipcode",placeholder:"Zipcode"}),c.zipcode&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.zipcode]}),g.zipcode&&!c.zipcode&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Phone*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.phone?g.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(h.a)({},c)),g.phone=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),g.phone&&!c.phone&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT NO.*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.vat_no?g.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(h.a)({},c)),g.vat_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),g.vat_no&&!c.vat_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT %*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.vat_percent?g.vat_percent:"",type:"number",onChange:function(e){if(c.vat_percent="",r(Object(h.a)({},c)),isNaN(e.target.value))return c.vat_percent="Invalid Discount",void r(Object(h.a)({},c));g.vat_percent=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"vat_percent",placeholder:"Vat %"}),c.vat_percent&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_percent]}),g.vat_percent&&!c.vat_percent&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Email*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.email?g.email:"",type:"string",onChange:function(e){c.email="",g.email=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),g.email&&!c.email&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Logo*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.logo?g.logo:"",type:"file",onChange:function(e){if(c.logo_content="",r(Object(h.a)({},c)),!e.target.value)return c.logo_content="Invalid Logo File",void r(Object(h.a)({},c));g.logo=e.target.value;var t=document.querySelector("#logo").files[0],a=100,s=100,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){g.logo_content=e,_(Object(h.a)({},g)),console.log("formData.logo_content:",g.logo_content)}))},i.src=n},className:"form-control",id:"logo",placeholder:"Logo"}),c.logo_content&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.logo_content]}),g.logo_content&&!c.logo_content&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsx)("h2",{children:"National Address:"}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Application Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.application_no?g.national_address.application_no:"",type:"string",onChange:function(e){c.national_address_application_no="",g.national_address.application_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.application_no",placeholder:"Application Number"}),c.national_address_application_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_application_no]}),g.national_address&&g.national_address.application_no&&!c.national_address_application_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Service Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.service_no?g.national_address.service_no:"",type:"string",onChange:function(e){c.national_address_service_no="",g.national_address.service_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.service_no",placeholder:"Service Number"}),c.national_address_service_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_service_no]}),g.national_address&&g.national_address.service_no&&!c.national_address_service_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer Account Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.customer_account_no?g.national_address.customer_account_no:"",type:"string",onChange:function(e){c.national_address_customer_account_no="",g.national_address.customer_account_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.customer_account_no",placeholder:"Customer Account Number"}),c.national_address_customer_account_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_customer_account_no]}),g.national_address&&g.national_address.customer_account_no&&!c.national_address_customer_account_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Building Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.building_no?g.national_address.building_no:"",type:"string",onChange:function(e){c.national_address_building_no="",g.national_address.building_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.building_no",placeholder:"Building Number"}),c.national_address_building_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_building_no]}),g.national_address&&g.national_address.building_no&&!c.national_address_building_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Street Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.street_name?g.national_address.street_name:"",type:"string",onChange:function(e){c.national_address_street_name="",g.national_address.street_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.street_name",placeholder:"Street Name"}),c.national_address_street_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name]}),g.national_address&&g.national_address.street_name&&!c.national_address_street_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Street Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.street_name_arabic?g.national_address.street_name_arabic:"",type:"string",onChange:function(e){c.national_address_street_name_arabic="",g.national_address.street_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.street_name_arabic",placeholder:"Street Name(Arabic)"}),c.national_address_street_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name_arabic]}),g.national_address&&g.national_address.street_name_arabic&&!c.national_address_street_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"District Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.district_name?g.national_address.district_name:"",type:"string",onChange:function(e){c.national_address_district_name="",g.national_address.district_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.district_name",placeholder:"District Name"}),c.national_address_district_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name]}),g.national_address&&g.national_address.district_name&&!c.national_address_district_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"District Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.district_name_arabic?g.national_address.district_name_arabic:"",type:"string",onChange:function(e){c.national_address_district_name_arabic="",g.national_address.district_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.district_name_arabic",placeholder:"District Name(Arabic)"}),c.national_address_district_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name_arabic]}),g.national_address&&g.national_address.district_name_arabic&&!c.national_address_district_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"City Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.city_name?g.national_address.city_name:"",type:"string",onChange:function(e){c.national_address_city_name="",g.national_address.city_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.city_name",placeholder:"City Name"}),c.national_address_city_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name]}),g.national_address&&g.national_address.city_name&&!c.national_address_city_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"City Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.city_name_arabic?g.national_address.city_name_arabic:"",type:"string",onChange:function(e){c.national_address_city_name_arabic="",g.national_address.city_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.city_name_arabic",placeholder:"City Name(Arabic)"}),c.national_address_city_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name_arabic]}),g.national_address&&g.national_address.city_name_arabic&&!c.national_address_city_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Zipcode"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.zipcode?g.national_address.zipcode:"",type:"string",onChange:function(e){c.national_address_zipcode="",g.national_address.zipcode=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.zipcode",placeholder:"Zipcode"}),c.national_address_zipcode&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_zipcode]}),g.national_address&&g.national_address.zipcode&&!c.national_address_zipcode&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Additional Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.additional_no?g.national_address.additional_no:"",type:"string",onChange:function(e){c.national_address_additional_no="",g.national_address.additional_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.additional_no",placeholder:"Additional Number"}),c.national_address_additional_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_additional_no]}),g.national_address&&g.national_address.additional_no&&!c.national_address_additional_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Unit Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.unit_no?g.national_address.unit_no:"",type:"string",onChange:function(e){c.national_address_unit_no="",g.national_address.unit_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.unit_no",placeholder:"Unit Number"}),c.national_address_unit_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_unit_no]}),g.national_address&&g.national_address.unit_no&&!c.national_address_unit_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:T,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:R,children:d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":g.id?"Update":"Create"})]})]})})]})})})),P=F,M=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Customer #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Name(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Phone:"}),Object(v.jsxs)("td",{children:[" ",c.phone]}),Object(v.jsx)("th",{children:"Phone in Arabic:"}),Object(v.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Address:"}),Object(v.jsxs)("td",{children:[" ",c.address]}),Object(v.jsx)("th",{children:"Address in Arabic:"}),Object(v.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"VAT No:"}),Object(v.jsxs)("td",{children:[" ",c.vat_no]}),Object(v.jsx)("th",{children:"VAT No(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"E-mail:"}),Object(v.jsxs)("td",{children:[" ",c.email]})]})]})})})]})})})),I=M,L=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){g={},_(Object(h.a)({},g)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(i=n.result).logo="",_(Object(h.a)({},i));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customer.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new y.a,O=Object(s.useState)({}),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){k(!1)}function R(t){t.preventDefault(),console.log("Inside handle Create"),g.vat_percent?g.vat_percent=parseFloat(g.vat_percent):g.vat_percent=null,g.phone_in_arabic=A(g.phone),g.vat_no_in_arabic=A(g.vat_no);var a="/v1/customer",s="POST";g.id&&(a="/v1/customer/"+g.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(g)};console.log("formData:",g),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Customer Created Successfully!","success"),e.refreshList&&e.refreshList(),T(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Customer!","danger")}))}Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")}));var D="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function A(e){return e?e.replace(/\d/g,(function(e){return D[parseInt(e)]})):""}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:S,size:"lg",onHide:T,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:g.id?"Update Customer #"+g.name:"Create New Customer"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[g.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openDetailsView(g.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:R,children:[d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",g.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:R,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name?g.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),g.name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),g.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name In Arabic (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name_in_arabic?g.name_in_arabic:"",type:"string",onChange:function(e){c.name_in_arabic="",r(Object(h.a)({},c)),g.name_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),g.name_in_arabic&&!c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Phone*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.phone?g.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(h.a)({},c)),g.phone=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),g.phone&&!c.phone&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address,type:"string",onChange:function(e){c.address="",r(Object(h.a)({},c)),g.address=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),g.address&&!c.address&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address In Arabic(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(h.a)({},c)),g.address_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),g.address_in_arabic&&!c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT NO.(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.vat_no?g.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(h.a)({},c)),g.vat_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),g.vat_no&&!c.vat_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Email (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.email?g.email:"",type:"string",onChange:function(e){c.email="",g.email=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),g.email&&!c.email&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:T,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:R,children:d?Object(v.jsx)(w.a,{as:"span",animation:"bcustomer",size:"sm",role:"status","aria-hidden":!0})+" Processing...":g.id?"Update":"Create"})]})]})})]})})})),z=L,E=a(23),U=(a(86),a(60)),B=a.n(U),V=(a(81),a(89)),H=a.n(V),q=a(12),G=a(8),Q=a.n(G),W=(a(29),a(656)),Z=a(15),K=a.n(Z),X=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"70",height:"70",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"TAX INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Order: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Order Date: "})," ",e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATETIME>"," "]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"N/A"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"N/A"]})]})}),Object(v.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:e.model.QRImageData?Object(v.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"70px",height:"72px"},alt:"Invoice QR Code"}):""}),Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:" :\u0637\u0644\u0628 "})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628:  "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(v.jsx)("thead",{style:{fontSize:"3mm"},children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(v.jsx)("li",{children:"Part Number"})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"20%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})}),Object(v.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(v.jsx)("li",{children:"Unit Price"})]})}),Object(v.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(v.jsx)("li",{children:"Total Amount"})]})})]})}),Object(v.jsx)("tbody",{style:{fontSize:"2.7mm"},children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{style:{padding:"1px",height:"16px"},children:t.part_number?s+1+a*e.model.pageSize:""}),Object(v.jsx)("td",{style:{padding:"1px"},children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{style:{padding:"1px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{style:{padding:"1px"},children:[t.quantity?t.quantity.toFixed(2):"","  ",t.unit?t.unit:""]}),Object(v.jsx)("td",{className:"text-end",style:{padding:"1px"},children:t.unit_price?Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}}):""}),Object(v.jsx)("td",{style:{padding:"1px"},className:"text-end",children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(v.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",style:{padding:"2px"}}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Total \u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Shipping / Handling Fees   \u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Discount \u062e\u0635\u0645:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"2px"},children:"VAT \u0636\u0631\u064a\u0628\u0629:"}),Object(v.jsxs)("th",{className:"text-end",colSpan:"1",style:{padding:"2px"},children:[e.model.vat_percent.toFixed(2),"%"]}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"2px"},children:"Net Total \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"In Words \u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(v.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:[Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Delivered By \u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(v.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Received By \u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("th",{style:{width:"30%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("th",{style:{width:"30%",height:"30px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[e.model.signature_date_str?e.model.signature_date_str:"","  ",e.model.signature_date_str?n(e.model.signature_date_str):""]}),Object(v.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(v.jsx)("div",{className:"col-md-2 text-start"}),Object(v.jsx)("div",{className:"col-md-8 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),J=a(48),Y=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:r.date,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=17,l.render();case 17:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);var t=20;r.pageSize=t;var s=r.products.length,n=0,c=parseInt(s/t),o=c;parseFloat(s/t)-c>0&&o++,r.total_pages=o,r.pages=[];for(var l=0,d=0;d<o;d++){r.pages.push({top:n,products:[],lastPage:!1,firstPage:!1});for(var j=l;j<s&&(r.pages[d].products.push(r.products[j]),r.pages[d].products.length!==t);j++);if(r.pages[d].products.length<t)for(var p=r.pages[d].products.length;p<t;p++)r.pages[d].products.push({});n+=1057,l+=t,0===d&&(r.pages[d].firstPage=!0),d+1===o&&(r.pages[d].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){_="",r.code&&(_+="Invoice #: "+r.code+"<br />");r.store&&(_+="Store: "+r.store.name+"<br />");r.customer&&(_+="Customer: "+r.customer.name+"<br />");r.net_total&&(_+="Net Total: "+r.net_total+"<br />");C(_+="Store: Test <br />"),r.qr_content=_,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),_=g[0],C=g[1];var S=Object(s.useRef)();var w=Object(N.useReactToPrint)({content:function(){return S.current},documentTitle:function(){var e="Sales_";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Invoice Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:S,children:Object(v.jsx)(X,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),$=Y,ee=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(v.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"TAX INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"2.2mm"},children:t.part_number?t.part_number:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"2.4mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"2.4mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:533+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:533+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)+" SAR"}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""}),t.lastPage?Object(v.jsx)("div",{style:{position:"absolute",left:"600px",top:640+t.top+"px"},children:e.model.QRImageData&&Object(v.jsx)("img",{style:{width:"142px",height:"134px"},src:e.model.QRImageData,alt:"Invoice QR Code"})}):""]},a)}))})})),te=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.date),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1066,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Sales Invoice #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Sales_Invoice";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Invoice Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(ee,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),ae=te,se=Object(s.forwardRef)((function(e,t){var a,n;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:d.get("access_token")}};fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),i=n.result,l(Object(h.a)({},i));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:d.get("access_token")}},a="select=id,amount,store_name,order_code,order_id,created_by_name,created_at";d.get("store_id")&&(D.store_id=d.get("store_id"));D.order_id=e,A(D);var s=ne(D);""!==s&&(s="&"+s);fetch("/v1/sales-cash-discount?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:I(n.result),E=n.meta.total_cash_discount,U(E);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:d.get("access_token")}},a="select=id,amount,method,store_name,order_code,order_id,created_by_name,created_at";d.get("store_id")&&(D.store_id=d.get("store_id"));D.order_id=e,A(D);var s=ne(D);""!==s&&(s="&"+s);fetch("/v1/sales-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:q(n.result),W=n.meta.total_cash_discount,Z(W);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),Y(!0))}}}));var c=Object(s.useState)({}),r=Object(o.a)(c,2),i=r[0],l=r[1],d=new y.a,j=Object(s.useState)(0),f=Object(o.a)(j,2),g=(f[0],f[1],Object(s.useState)(0)),_=Object(o.a)(g,2),N=(_[0],_[1],Object(s.useState)(0)),C=Object(o.a)(N,2),S=(C[0],C[1],Object(s.useState)(0)),w=Object(o.a)(S,2),T=(w[0],w[1],Object(s.useState)({})),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)([]),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1];var B=Object(s.useState)([]),V=Object(o.a)(B,2),H=V[0],q=V[1],G=Object(s.useState)(0),Q=Object(o.a)(G,2),W=Q[0],Z=Q[1];var K=Object(s.useState)(!1),X=Object(o.a)(K,2),J=X[0],Y=X[1];function ee(){Y(!1)}var te=Object(s.useRef)();var se=Object(s.useRef)();function ne(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)($,{ref:te}),Object(v.jsx)(ae,{ref:se}),Object(v.jsxs)(p.a,{show:J,size:"xl",onHide:ee,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Sales Order #",i.code]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ee(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){se.current.open(i)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){te.current.open(i)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," E-Invoice"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",i.store_name]}),Object(v.jsx)("th",{children:"Customer:"}),Object(v.jsxs)("td",{children:[" ",i.customer_name]}),Object(v.jsx)("th",{children:"Delivered by:"}),Object(v.jsxs)("td",{children:[" ",i.delivered_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",i.date_str]}),Object(v.jsx)("th",{children:"VAT %:"}),Object(v.jsxs)("td",{children:[" ",i.vat_percent,"%"]}),Object(v.jsx)("th",{children:"Discount :"}),Object(v.jsxs)("td",{children:[" ",i.discount," SAR"]}),Object(v.jsx)("th",{children:"Discount %:"}),Object(v.jsxs)("td",{children:[" ",i.discount_percent]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Status:"}),Object(v.jsxs)("td",{children:[" ",i.status]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",i.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",i.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Payment Status:"}),Object(v.jsxs)("td",{children:[" ",i.payment_status]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",i.payment_method]}),Object(v.jsx)("th",{children:"Partial Payment Amount:"}),Object(v.jsxs)("td",{children:[" ",i.partial_payment_amount]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",i.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",i.updated_by_name]}),"true"===d.get("admin")?Object(v.jsx)("th",{children:"Profit:"}):"","true"===d.get("admin")?Object(v.jsxs)("td",{children:[" ",i.profit," SAR"]}):"","true"===d.get("admin")?Object(v.jsx)("th",{children:"Loss:"}):"","true"===d.get("admin")?Object(v.jsxs)("td",{children:[" ",i.loss," SAR"]}):""]}),Object(v.jsxs)("tr",{children:[M.length>0?Object(v.jsx)("th",{children:"Cash Discounts"}):"",M.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:M&&M.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):"",H.length>0?Object(v.jsx)("th",{children:"Payments"}):"",H.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Payment Method"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:H&&H.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Unit Price"}),Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("th",{children:"Qty Returned"}),"true"===d.get("admin")?Object(v.jsx)("th",{children:"Purchase Unit Price"}):"","true"===d.get("admin")?Object(v.jsx)("th",{children:"Purchase Price"}):"","true"===d.get("admin")?Object(v.jsx)("th",{children:"Profit"}):"","true"===d.get("admin")?Object(v.jsx)("th",{children:"Loss"}):""]})}),Object(v.jsxs)("tbody",{children:[i.products&&i.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsxs)("td",{children:[e.quantity_returned,"  ",e.unit?e.unit:""," "]}),"true"===d.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]},e.item_code)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-end",children:i.total?Object(v.jsx)(x.a,{value:i.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):"0.00 SAR"}),Object(v.jsx)("td",{colSpan:"3"}),"true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(a=i.profit)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(n=i.loss)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(v.jsx)("td",{className:"text-end",children:i.shipping_handling_fees?Object(v.jsx)(x.a,{value:i.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):"0.00 SAR"}),Object(v.jsx)("td",{colSpan:"3"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(v.jsx)("td",{className:"text-end",children:i.discount?Object(v.jsx)(x.a,{value:i.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):"0.00 SAR"}),Object(v.jsx)("td",{colSpan:"3"}),"true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:(i.discount-i.return_discount).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end"}),Object(v.jsxs)("th",{className:"text-end",children:["VAT ",i.vat_percent+"%"]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:i.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"3"}),"true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:"0.00 SAR"}):"","true"===d.get("admin")?Object(v.jsx)("td",{className:"text-center",children:"0.00 SAR"}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-end",children:Object(v.jsx)(x.a,{value:i.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===d.get("admin")?Object(v.jsx)("th",{colSpan:"3",className:"text-end",children:"Net Profit / Loss"}):"","true"===d.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:i.net_profit,displayType:"text",suffix:" SAR",thousandSeparator:!0,renderText:function(e,t){return e}})}):"","true"===d.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:i.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]})]})]})})]})]})]})})),ne=se,ce=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Le(),He(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],q=V[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(!1),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(""),se=Object(o.a)(ae,2),ce=se[0],re=se[1],ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e,t){Ce[e]=t,D(R=1),Le()}function Ie(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(re(t),de(""),he(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(de(t),re(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(he(t),re(""),Ce.created_at="",Ce[e]=t),D(R=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ce.store_id=i.get("store_id")),Ce.product_id=c.id,Se(Ce);var t,a=(t=Ce,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),Oe(!0),fetch("/v1/sales/history?"+a+"&sort="+Fe+Te+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Oe(!1),_e(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),U(n.total_count),J((R-1)*C),q(n.result.length),We=n.meta.total_sales,Ze(We),Je=n.meta.total_profit,Ye(Je),ct=n.meta.total_loss,rt(ct),tt=n.meta.total_vat,at(tt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Oe(!1),_e(!1),console.log(e)}))}function ze(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Le()}function Ee(e){R=parseInt(e),D(R),Le()}var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){He(!1)}var Ge=Object(s.useState)(0),Qe=Object(o.a)(Ge,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useState)(0),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useRef)();var ot=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne,{ref:it}),Object(v.jsx)(I,{ref:ot}),Object(v.jsxs)(p.a,{show:Ve,size:"xl",onHide:qe,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Sales History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Sales: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ct,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"",Object(v.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:tt.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===E&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Sales History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){_e(!0),Le()},variant:"primary",disabled:ve,children:[ve?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:xe&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Le()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",X+1,"-",X+H," of"," ",E]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("store_name")},children:["Store","store_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("order_code")},children:["Order ID","order_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("customer_name")},children:["Customer","customer_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quantity")},children:["Quantity","quantity"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("unit_price")},children:["Unit Price","unit_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("price")},children:["Price","price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vat_price")},children:["VAT","vat_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("net_price")},children:["Net Price","net_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("profit")},children:["Profit","profit"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"profit"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("loss")},children:["Loss","loss"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"loss"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:ce,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return te(!ee)},children:ee?"Less..":"More.."}),Object(v.jsx)("br",{}),ee?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:le,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:be,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Me("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return Me("order_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return Me("customer_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Me("quantity",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return Me("unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"price",onChange:function(e){return Me("price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Me("vat_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return Me("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"profit",onChange:function(e){return Me("profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"loss",onChange:function(e){return Me("loss",e.target.value)},className:"form-control"})}):""]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.order_id,it.current.open(t)},children:e.order_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,ot.current.open(t)},children:e.customer_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(v.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(v.jsx)("td",{children:e.price.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.vat_price.toFixed(2)+" SAR  ("+e.vat_percent.toFixed(2)+"%)"}),Object(v.jsx)("td",{children:e.net_price.toFixed(2)+" SAR"}),"true"===i.get("admin")?Object(v.jsx)("td",{children:e.profit.toFixed(2)+" SAR"}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:e.loss.toFixed(2)+" SAR"}):""]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),re=ce,ie=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Le(),He(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],q=V[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(!1),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(""),se=Object(o.a)(ae,2),ce=se[0],re=se[1],ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e,t){Ce[e]=t,D(R=1),Le()}function Ie(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(re(t),de(""),he(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(de(t),re(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(he(t),re(""),Ce.created_at="",Ce[e]=t),D(R=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ce.store_id=i.get("store_id")),Ce.product_id=c.id,Se(Ce);var t,a=(t=Ce,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),Oe(!0),fetch("/v1/sales-return/history?"+a+"&sort="+Fe+Te+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Oe(!1),_e(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),U(n.total_count),J((R-1)*C),q(n.result.length),We=n.meta.total_sales_return,Ze(We),Je=n.meta.total_vat_return,Ye(Je);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Oe(!1),_e(!1),console.log(e)}))}function ze(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Le()}function Ee(e){R=parseInt(e),D(R),Le()}var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){He(!1)}var Ge=Object(s.useState)(0),Qe=Object(o.a)(Ge,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useRef)();var et=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne,{ref:$e}),Object(v.jsx)(I,{ref:et}),Object(v.jsxs)(p.a,{show:Ve,size:"xl",onHide:qe,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Sales Return History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Sales Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT Returned: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Je.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===E&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No SalesReturn History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){_e(!0),Le()},variant:"primary",disabled:ve,children:[ve?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:xe&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Le()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",X+1,"-",X+H," of"," ",E]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("store_name")},children:["Store","store_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("order_code")},children:["Order ID","order_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("customer_name")},children:["Customer","customer_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quantity")},children:["Quantity","quantity"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("unit_price")},children:["Unit Price","unit_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("price")},children:["Price","price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vat_price")},children:["VAT","vat_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("net_price")},children:["Net Price","net_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:ce,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return te(!ee)},children:ee?"Less..":"More.."}),Object(v.jsx)("br",{}),ee?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:le,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:be,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Me("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return Me("order_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return Me("customer_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Me("quantity",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return Me("unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"price",onChange:function(e){return Me("price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Me("vat_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return Me("net_price",e.target.value)},className:"form-control"})})]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.order_id,$e.current.open(t)},children:e.order_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,et.current.open(t)},children:e.customer_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(v.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(v.jsx)("td",{children:e.price.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.vat_price.toFixed(2)+" SAR  ("+e.vat_percent.toFixed(2)+"%)"}),Object(v.jsx)("td",{children:e.net_price.toFixed(2)+" SAR"})]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),oe=ie,le=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"100",height:"100",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644"]}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a"]})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"PURCHASE ORDER / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Purchase: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Purchase Date: "}),e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATETIME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Vendor: "}),e.model.vendor?e.model.vendor.name:"<VENDOR_NAME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.vendor?e.model.vendor.vat_no:"<VENDOR_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:"# :\u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0634\u0631\u0627\u0621 "})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:" :\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0626\u0639"}),e.model.vendor?e.model.vendor.name_in_arabic:"<VENDOR_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:" :\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621"}),e.model.vendor?e.model.vendor.vat_no_in_arabic:"<VENDOR_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",borderRadius:"6px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(v.jsx)("li",{children:"Part No."})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})}),Object(v.jsx)("th",{className:"per10 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(v.jsx)("li",{children:"Unit Price"})]})}),Object(v.jsx)("th",{className:"per20 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(v.jsx)("li",{children:"Price"})]})})]})}),Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:s+1+a*e.model.pageSize}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.quantity.toFixed(2),"  ",t.unit?t.unit:""]}),Object(v.jsx)("td",{className:"text-end",style:{paddingBottom:"0px",marginTop:"0px"},children:Object(v.jsx)(x.a,{value:t.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},className:"text-end",children:Object(v.jsx)(x.a,{value:(t.purchase_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},s)}))}),Object(v.jsxs)("tfoot",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(v.jsx)("li",{children:"Total:"})]})}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(v.jsx)("li",{children:"Shipping / Handling Fees:"})]})}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062e\u0635\u0645:"}),Object(v.jsx)("li",{children:"Discount:"})]})}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0636\u0631\u064a\u0628\u0629:"}),Object(v.jsx)("li",{children:"VAT:"})]})}),Object(v.jsxs)("th",{className:"text-center",colSpan:"1",children:[e.model.vat_percent.toFixed(2),"%"]}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(v.jsx)("li",{children:"Net Total:"})]})}),Object(v.jsx)("th",{className:"text-end",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(v.jsx)("li",{children:"In Words:"})]})}),Object(v.jsx)("th",{colSpan:"5",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0636\u0639 \u0627\u0644\u0637\u0644\u0628 \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Order Placed By:"})]})}),Object(v.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.order_placed_by_user?e.model.order_placed_by_user.name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Received By:"})]})}),Object(v.jsx)("th",{style:{width:"37%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{style:{width:"37%",height:"40px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(v.jsx)("li",{children:e.model.signature_date_str?e.model.signature_date_str:""})]})}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(v.jsx)("div",{className:"col-md-2 text-start"}),Object(v.jsx)("div",{className:"col-md-8 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),de=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.vendor_id&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.vendor=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.vendor_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=8;var t=r.products.length,s=0,n=parseInt(t/8),c=n;parseFloat(t/8)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),8!==r.pages[l].products.length);d++);s+=1057,o+=8,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){_="",r.code&&(_+="Quotation #: "+r.code+"<br />");r.store&&(_+="Store: "+r.store.name+"<br />");r.customer&&(_+="Customer: "+r.customer.name+"<br />");r.net_total&&(_+="Net Total: "+r.net_total+"<br />");C(_+="Store: Test <br />"),r.qr_content=_,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),_=g[0],C=g[1];var S=Object(s.useRef)();var w=Object(N.useReactToPrint)({content:function(){return S.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Quotation Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:S,children:Object(v.jsx)(le,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),je=de,ue=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(v.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"300px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"PURCHASE ORDER / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:t.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:(t.purchase_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:533+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:533+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)+" SAR"}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.order_placed_by_user?e.model.order_placed_by_user.name:""})]},a)}))})})),be=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Quotation #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"PurchaseReturn Order Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(ue,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),he=be,pe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at";i.get("store_id")&&(M.store_id=i.get("store_id"));M.purchase_id=e,I(M);var s=_(M);""!==s&&(s="&"+s);fetch("/v1/purchase-cash-discount?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:U(n.result),H=n.meta.total_cash_discount,q(H);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="select=id,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at";i.get("store_id")&&(M.store_id=i.get("store_id"));M.purchase_id=e,I(M);var s=_(M);""!==s&&(s="&"+s);fetch("/v1/purchase-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Z(n.result),J=n.meta.total_payment,Y(J);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),f(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1];function g(){f(!1)}function _(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}var N=Object(s.useState)(0),C=Object(o.a)(N,2),S=(C[0],C[1],Object(s.useState)(0)),w=Object(o.a)(S,2),T=(w[0],w[1],Object(s.useState)(0)),R=Object(o.a)(T,2),D=(R[0],R[1],Object(s.useState)(0)),A=Object(o.a)(D,2),F=(A[0],A[1],Object(s.useState)({})),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)([]),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],q=V[1];var G=Object(s.useState)([]),Q=Object(o.a)(G,2),W=Q[0],Z=Q[1],K=Object(s.useState)(0),X=Object(o.a)(K,2),J=X[0],Y=X[1];var $=Object(s.useRef)();var ee=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(je,{ref:$}),Object(v.jsx)(he,{ref:ee}),Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:g,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Purchase #",c.code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ee.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){$.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," E-Purchase Invoice"]}),"\xa0\xa0\xa0\xa0\xa0\xa0",e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){g(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){g(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:g,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]}),Object(v.jsx)("th",{children:"Vendor:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_name]}),Object(v.jsx)("th",{children:"Vendor Invoice No.:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_invoice_no]}),Object(v.jsx)("th",{children:"Order Placed by:"}),Object(v.jsxs)("td",{children:[" ",c.order_placed_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date?Object(O.default)(new Date(c.date),"MMMM d, yyyy h:mm aa"):""]}),Object(v.jsx)("th",{children:"VAT %:"}),Object(v.jsxs)("td",{children:[" ",c.vat_percent,"%"]}),Object(v.jsx)("th",{children:"Discount :"}),Object(v.jsxs)("td",{children:[" ",c.discount," SAR"]}),Object(v.jsx)("th",{children:"Discount %:"}),Object(v.jsxs)("td",{children:[" ",c.discount_percent," SAR"]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Payment Status:"}),Object(v.jsxs)("td",{children:[" ",c.payment_status]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]}),Object(v.jsx)("th",{children:"Partial Payment Amount:"}),Object(v.jsxs)("td",{children:[" ",c.partial_payment_amount]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Status:"}),Object(v.jsxs)("td",{children:[" ",c.status]}),Object(v.jsx)("th",{children:"Signature Date:"}),Object(v.jsxs)("td",{children:[" ",c.signature_date_str]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[E.length>0?Object(v.jsx)("th",{children:"Cash Discounts"}):"",E.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:E&&E.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):"",W.length>0?Object(v.jsx)("th",{children:"Payments"}):"",W.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Payment Method"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:W&&W.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Purchase Unit Price"}),Object(v.jsx)("th",{children:"Purchase Price"}),Object(v.jsx)("th",{children:"Qty Returned"}),Object(v.jsx)("th",{children:"Wholesale Unit Price"}),Object(v.jsx)("th",{children:"Retail Unit Price"}),"true"===i.get("admin")?Object(v.jsx)("th",{children:"Wholesale Profit"}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:"Retail Profit"}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:"Wholesale Loss"}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:"Retail Loss"}):""]})}),Object(v.jsxs)("tbody",{children:[c.products&&c.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsxs)("td",{children:[e.quantity_returned,"  ",e.unit?e.unit:""]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.wholesale_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.retail_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===i.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.wholesale_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.retail_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.wholesale_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.retail_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]},t)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===i.get("admin")?Object(v.jsx)("th",{colSpan:"3",className:"text-end",children:"Total Profit/Loss"}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.wholesale_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.retail_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.wholesale_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.retail_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(v.jsx)("td",{className:"text-end",children:c.shipping_handling_fees?Object(v.jsx)(x.a,{value:c.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):"0.00 SAR"}),Object(v.jsx)("td",{colSpan:"3"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("th",{colSpan:"3",className:"text-end"}),"true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.discount-c.return_discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.discount-c.return_discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:c.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("th",{colSpan:"3",className:"text-end"}),"true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===i.get("admin")?Object(v.jsx)("th",{colSpan:"3",className:"text-end",children:"Net Profit/Loss"}):"","true"===i.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.net_wholesale_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.net_retail_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.wholesale_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===i.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.retail_loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]})]})]})})]})]})]})})),me=pe,xe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Vendor");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Vendor #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name: "}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Name(in Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Title: "}),Object(v.jsxs)("td",{children:[" ",c.title]}),Object(v.jsx)("th",{children:"Title(in Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.title_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Address: "}),Object(v.jsxs)("td",{children:[" ",c.address]}),Object(v.jsx)("th",{children:"Address in Arabic: "}),Object(v.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Phone: "}),Object(v.jsxs)("td",{children:[" ",c.phone]}),Object(v.jsx)("th",{children:"Phone in Arabic: "}),Object(v.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Registration Number(C.R NO.): "}),Object(v.jsxs)("td",{children:[" ",c.registration_number]}),Object(v.jsx)("th",{children:"Registration Number(C.R NO.)(in Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.registration_number_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"VAT No: "}),Object(v.jsxs)("td",{children:[" ",c.vat_no]}),Object(v.jsx)("th",{children:"VAT No(in Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At: "}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At: "}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By: "}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By: "}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"E-mail: "}),Object(v.jsxs)("td",{children:[" ",c.email]}),Object(v.jsx)("th",{children:"VAT %: "}),Object(v.jsxs)("td",{children:[" ",c.vat_percent+"%"]})]})]})}),c.national_address&&Object(v.jsxs)("span",{children:[Object(v.jsx)("h2",{children:" National Address"}),Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Application Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.application_no]}),Object(v.jsx)("th",{children:"Application Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.application_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Service Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.service_no]}),Object(v.jsx)("th",{children:"Service Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.service_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Customer Account Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.customer_account_no]}),Object(v.jsx)("th",{children:"Customer Account Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.customer_account_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Building Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.building_no]}),Object(v.jsx)("th",{children:"Building Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.building_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Street Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.street_name]}),Object(v.jsx)("th",{children:"Street Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.street_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"District Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.district_name]}),Object(v.jsx)("th",{children:"District Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.district_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"City Name: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.city_name]}),Object(v.jsx)("th",{children:"City Name(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.city_name_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ZipCode: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.zipcode]}),Object(v.jsx)("th",{children:"ZipCode(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.zipcode_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Additional Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.additional_no]}),Object(v.jsx)("th",{children:"Additional Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.additional_no_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Unit Number: "}),Object(v.jsxs)("td",{children:[" ",c.national_address.unit_no]}),Object(v.jsx)("th",{children:"Unit Number(Arabic): "}),Object(v.jsxs)("td",{children:[" ",c.national_address.unit_no_arabic]})]})]})})]})]})]})})})),Oe=xe,fe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Le(),He(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(1),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),V=B[0],H=B[1],q=Object(s.useState)(0),G=Object(o.a)(q,2),Z=G[0],X=G[1],J=Object(s.useState)(!1),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(""),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(""),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(!1),he=Object(o.a)(be,2),pe=he[0],xe=he[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e,t){Ce[e]=t,D(R=1),Le()}function Ie(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(ne(t),oe(""),ue(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(oe(t),ne(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(ue(t),ne(""),Ce.created_at="",Ce[e]=t),D(R=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ce.store_id=i.get("store_id")),Ce.product_id=c.id,Se(Ce);var t,a=(t=Ce,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),xe(!0),fetch("/v1/purchase/history?"+a+"&sort="+Fe+Te+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:xe(!1),_e(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),E(n.total_count),X((R-1)*C),H(n.result.length),We=n.meta.total_purchase,Ze(We),Je=n.meta.total_retail_profit,Ye(Je),tt=n.meta.total_wholesale_profit,at(tt),lt=n.meta.total_retail_loss,dt(lt),bt=n.meta.total_wholesale_loss,ht(bt),ct=n.meta.total_vat,rt(ct);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){xe(!1),_e(!1),console.log(e)}))}function ze(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Le()}function Ee(e){R=parseInt(e),D(R),Le()}var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){He(!1)}var Ge=Object(s.useState)(0),Qe=Object(o.a)(Ge,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useState)(0),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useState)(0),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(0),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1],pt=Object(s.useRef)();var mt=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(me,{ref:pt}),Object(v.jsx)(Oe,{ref:mt}),Object(v.jsxs)(p.a,{show:Ve,size:"xl",onHide:qe,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Purchase History of ",c.name,"  ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Purchase: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Retail Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Wholesale Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:tt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Retail Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:lt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Wholesale Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:bt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"",Object(v.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ct.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===z&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Purchase History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){_e(!0),Le()},variant:"primary",disabled:ve,children:[ve?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:pe&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:z>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Le()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:z>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",Z+1,"-",Z+V," of"," ",z]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("store_name")},children:["Store","store_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("purchase_code")},children:["Purchase ID","purchase_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vendor_name")},children:["Vendor","vendor_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quantity")},children:["Quantity","quantity"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("unit_price")},children:["Unit Price","unit_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("price")},children:["Price","price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vat_price")},children:["VAT","vat_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("net_price")},children:["Net Price","net_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("retain_profit")},children:["Retail Profit","retail_profit"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"retail_profit"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("profit")},children:["Wholesale Profit","wholesale_profit"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"wholesale_profit"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("retail_loss")},children:["Retail Loss","retail_loss"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"retail_loss"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("wholesale_loss")},children:["Wholesale Loss","wholesale_loss"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"wholesale_loss"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:se,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ee(!$)},children:$?"Less..":"More.."}),Object(v.jsx)("br",{}),$?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:ie,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:je,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Me("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return Me("purchase_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vendor_name",onChange:function(e){return Me("vendor_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Me("quantity",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return Me("unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"price",onChange:function(e){return Me("price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Me("vat_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return Me("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"retail_profit",onChange:function(e){return Me("retail_profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"wholesale_profit",onChange:function(e){return Me("wholesale_profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"retail_loss",onChange:function(e){return Me("retail_loss",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"wholesale_loss",onChange:function(e){return Me("wholesale_loss",e.target.value)},className:"form-control"})}):""]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.purchase_id,pt.current.open(t)},children:e.purchase_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.vendor_id,mt.current.open(t)},children:e.vendor_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(v.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(v.jsx)("td",{children:e.price.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.vat_price.toFixed(2)+" SAR  ("+e.vat_percent.toFixed(2)+"%)"}),Object(v.jsx)("td",{children:e.net_price.toFixed(2)+" SAR"}),"true"===i.get("admin")?Object(v.jsx)("td",{children:e.retail_profit.toFixed(2)+" SAR"}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:e.wholesale_profit.toFixed(2)+" SAR"}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:e.retail_loss.toFixed(2)+" SAR"}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:e.wholesale_loss.toFixed(2)+" SAR"}):""]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),ge=fe,ve=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"100",height:"100",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644"]}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a"]})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"PURCHASE RETURN / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Purchase Return: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Purchase Return Date: "}),e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Vendor: "}),e.model.vendor?e.model.vendor.name:"<VENDOR_NAME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.vendor?e.model.vendor.vat_no:"<VENDOR_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>","#",Object(v.jsx)("strong",{children:": \u0631\u0642\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0634\u0631\u0627\u0621 "})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:":\u0628\u0627\u0626\u0639"}),e.model.vendor?e.model.vendor.name_in_arabic:"<VENDOR_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:":\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621"}),e.model.vendor?e.model.vendor.vat_no_in_arabic:"<VENDOR_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",borderRadius:"6px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(v.jsx)("li",{children:"Part No."})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})}),Object(v.jsx)("th",{className:"per10 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(v.jsx)("li",{children:"Purchase Return Unit Price"})]})}),Object(v.jsx)("th",{className:"per20 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(v.jsx)("li",{children:"Total Amount"})]})})]})}),Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return t.quantity>0?Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:s+1+a*e.model.pageSize}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.quantity.toFixed(2),"  ",t.unit?t.unit:""]}),Object(v.jsx)("td",{className:"text-end",style:{paddingBottom:"0px",marginTop:"0px"},children:Object(v.jsx)(x.a,{value:t.purchasereturn_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},className:"text-end",children:Object(v.jsx)(x.a,{value:(t.purchasereturn_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},s):""})).filter((function(e,t){return e}))}),Object(v.jsxs)("tfoot",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(v.jsx)("li",{children:"Total:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0636\u0631\u064a\u0628\u0629:"}),Object(v.jsx)("li",{children:"VAT:"})]})}),Object(v.jsxs)("th",{className:"text-center",colSpan:"1",children:[e.model.vat_percent,"%"]}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062e\u0635\u0645:"}),Object(v.jsx)("li",{children:"Discount:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(v.jsx)("li",{children:"Net Total:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(v.jsx)("li",{children:"In Words:"})]})}),Object(v.jsx)("th",{colSpan:"5",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0636\u0639 \u0627\u0644\u0637\u0644\u0628 \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Purchase Returned By:"})]})}),Object(v.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.purchase_returned_by_name?e.model.purchase_returned_by_name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Received By:"})]})}),Object(v.jsx)("th",{style:{width:"37%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{style:{width:"37%",height:"40px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(v.jsx)("li",{children:e.model.signature_date_str?e.model.signature_date_str:""})]})}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col-md-2 text-start",children:e.model.store&&e.model.customer?Object(v.jsx)(B.a,{value:"Quotation #: "+e.model.code+"<br/> Store: "+e.model.store.name+"<br/> Net Total: "+e.model.net_total+"<br/> Customer: "+e.model.customer.name,size:128}):null}),Object(v.jsx)("div",{className:"col-md-8 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),_e=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.vendor_id&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.vendor=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.vendor_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length);d++);s+=1057,o+=12,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){_="",r.code&&(_+="PurchaseReturn #: "+r.code+"<br />");r.store&&(_+="Store: "+r.store.name+"<br />");r.customer&&(_+="Customer: "+r.customer.name+"<br />");r.net_total&&(_+="Net Total: "+r.net_total+"<br />");C(_+="Store: Test <br />"),r.qr_content=_,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),_=g[0],C=g[1];var S=Object(s.useRef)();var w=Object(N.useReactToPrint)({content:function(){return S.current},documentTitle:function(){var e="PurchaseReturn";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Purchase Return Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:S,children:Object(v.jsx)(ve,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),ye=_e,Ne=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px"},children:[Object(v.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"300px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"PURCHASE RETURN / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return t.quantity>0?Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:t.purchasereturn_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:(t.purchasereturn_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code):""}))})}),t.lastPage?Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.purchase_returned_by_name?e.model.purchase_returned_by_name:""})]},a)}))})})),Ce=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Quotation #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Purchase Order Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(Ne,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),Se=Ce,we=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="select=id,amount,method,store_name,purchase_return_code,purchase_return_id,created_by_name,created_at";i.get("store_id")&&(V.store_id=i.get("store_id"));V.purchase_return_id=e,H(V);var s=(n=V,Object.keys(n).map((function(e){return"search[".concat(e,"]=").concat(n[e])})).join("&"));var n;""!==s&&(s="&"+s);fetch("/v1/purchase-return-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:M(n.result),z=n.meta.total_cash_discount,E(z);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),f(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1];function g(){f(!1)}var _=Object(s.useState)(0),N=Object(o.a)(_,2),C=(N[0],N[1],Object(s.useState)(0)),S=Object(o.a)(C,2),w=(S[0],S[1],Object(s.useState)(0)),T=Object(o.a)(w,2),R=(T[0],T[1],Object(s.useState)(0)),D=Object(o.a)(R,2),A=(D[0],D[1],Object(s.useState)([])),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)({}),B=Object(o.a)(U,2),V=B[0],H=B[1];var q=Object(s.useRef)();var G=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ye,{ref:q}),Object(v.jsx)(Se,{ref:G}),Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:g,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Purchase Return #",c.code," "]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){G.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]})}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){q.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," E-Purchase Return Invoice"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:g,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Purchase Code:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_code]}),Object(v.jsx)("th",{children:"Purchase ID:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_id]}),Object(v.jsx)("th",{children:"Vendor:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_name]}),Object(v.jsx)("th",{children:"Vendor Invoice No.:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_invoice_no]}),Object(v.jsx)("th",{children:"Purchase Returned by:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_returned_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]}),Object(v.jsx)("th",{children:"Vendor:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_name]}),Object(v.jsx)("th",{children:"Vendor Invoice No.:"}),Object(v.jsxs)("td",{children:[" ",c.vendor_invoice_no]}),Object(v.jsx)("th",{children:"Purchase Returned by:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_returned_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"VAT %:"}),Object(v.jsxs)("td",{children:[" ",c.vat_percent,"%"]}),Object(v.jsx)("th",{children:"Discount :"}),Object(v.jsxs)("td",{children:[" ",c.discount," SAR"]}),Object(v.jsx)("th",{children:"Discount %:"}),Object(v.jsxs)("td",{children:[" ",c.discount_percent," SAR"]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Status:"}),Object(v.jsxs)("td",{children:[" ",c.status]}),Object(v.jsx)("th",{children:"Signature Date:"}),Object(v.jsxs)("td",{children:[" ",c.signature_date_str]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Payment Status:"}),Object(v.jsxs)("td",{children:[" ",c.payment_status]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]}),Object(v.jsx)("th",{children:"Partial Payment Amount:"}),Object(v.jsxs)("td",{children:[" ",c.partial_payment_amount]})]}),Object(v.jsxs)("tr",{children:[P.length>0?Object(v.jsx)("th",{children:"Payments"}):"",P.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Payment Method"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Purchase Return Unit Price"}),Object(v.jsx)("th",{children:"Purchase Return Price"})]})}),Object(v.jsxs)("tbody",{children:[c.products&&c.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchasereturn_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchasereturn_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:c.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})]})})]})]})]})})),ke=we,Te=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Le(),He(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(1),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),V=B[0],H=B[1],q=Object(s.useState)(0),G=Object(o.a)(q,2),Z=G[0],X=G[1],J=Object(s.useState)(!1),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(""),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(""),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(!1),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)(!1),fe=Object(o.a)(xe,2),ge=fe[0],ve=fe[1],_e=Object(s.useState)({}),ye=Object(o.a)(_e,2),Ne=ye[0],Ce=ye[1],Se=Object(s.useState)("created_at"),we=Object(o.a)(Se,2),Te=we[0],Re=we[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e,t){Ne[e]=t,D(R=1),Le()}function Ie(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(ne(t),oe(""),ue(""),Ne.created_at_from="",Ne.created_at_to="",Ne[e]=t),"created_at_from"===e?(oe(t),ne(""),Ne.created_at="",Ne[e]=t):"created_at_to"===e&&(ue(t),ne(""),Ne.created_at="",Ne[e]=t),D(R=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ne.store_id=i.get("store_id")),Ne.product_id=c.id,Ce(Ne);var t,a=(t=Ne,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),me(!0),fetch("/v1/purchase-return/history?"+a+"&sort="+Fe+Te+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:me(!1),ve(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),E(n.total_count),X((R-1)*C),H(n.result.length),We=n.meta.total_purchase_return,Ze(We),Je=n.meta.total_vat_return,Ye(Je);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){me(!1),ve(!1),console.log(e)}))}function ze(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Le()}function Ee(e){R=parseInt(e),D(R),Le()}var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){He(!1)}var Ge=Object(s.useState)(0),Qe=Object(o.a)(Ge,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useRef)();var et=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ke,{ref:$e}),Object(v.jsx)(Oe,{ref:et}),Object(v.jsxs)(p.a,{show:Ve,size:"xl",onHide:qe,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Purchase Return History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Purchase Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT Returned: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Je.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===z&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No PurchaseReturn History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ve(!0),Le()},variant:"primary",disabled:ge,children:[ge?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:pe&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:z>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Le()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:z>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",Z+1,"-",Z+V," of"," ",z]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("store_name")},children:["Store","store_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("purchase_return_code")},children:["Purchase Return ID","purchase_return_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_return_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vendor_name")},children:["Vendor","vendor_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quantity")},children:["Quantity","quantity"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("unit_price")},children:["Unit Price","unit_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("price")},children:["Price","price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vat_price")},children:["VAT","vat_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("net_price")},children:["Net Price","net_price"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:se,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ee(!$)},children:$?"Less..":"More.."}),Object(v.jsx)("br",{}),$?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:ie,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:je,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Me("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_return_code",onChange:function(e){return Me("purchase_return_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vendor_name",onChange:function(e){return Me("vendor_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Me("quantity",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return Me("unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"price",onChange:function(e){return Me("price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Me("vat_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return Me("net_price",e.target.value)},className:"form-control"})})]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.purchase_return_id,$e.current.open(t)},children:e.purchase_return_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.vendor_id,et.current.open(t)},children:e.vendor_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(v.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(v.jsx)("td",{children:e.price.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.vat_price.toFixed(2)+" SAR  ("+e.vat_percent.toFixed(2)+"%)"}),Object(v.jsx)("td",{children:e.net_price.toFixed(2)+" SAR"})]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),Re=Te,De=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(v.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"QUOTATION / \u0627\u0642\u062a\u0628\u0627\u0633"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:533+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:533+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)+" SAR"}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""})]},a)}))})})),Ae=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.date),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Quotation #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Quotation Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(De,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),Fe=Ae,Pe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Quotation");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/quotation/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),R(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(0),d=Object(o.a)(l,2),j=(d[0],d[1],Object(s.useState)(0)),O=Object(o.a)(j,2),f=(O[0],O[1],Object(s.useState)(0)),g=Object(o.a)(f,2),_=(g[0],g[1],Object(s.useState)(0)),N=Object(o.a)(_,2);N[0],N[1];var C=Object(s.useState)(!1),w=Object(o.a)(C,2),T=w[0],R=w[1];function D(){R(!1)}var A=Object(s.useRef)();var F=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{ref:A}),Object(v.jsx)(Fe,{ref:F}),Object(v.jsxs)(p.a,{show:T,size:"xl",onHide:D,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Sales Quotation #",c.code]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){F.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0  \xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){A.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," E-Invoice"]}),"\xa0  \xa0\xa0 \xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){D(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){D(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:D,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]}),Object(v.jsx)("th",{children:"Customer:"}),Object(v.jsxs)("td",{children:[" ",c.customer_name]}),Object(v.jsx)("th",{children:"Delivered by:"}),Object(v.jsxs)("td",{children:[" ",c.delivered_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date_str]}),Object(v.jsx)("th",{children:"VAT %:"}),Object(v.jsxs)("td",{children:[" ",c.vat_percent,"%"]}),Object(v.jsx)("th",{children:"Discount :"}),Object(v.jsxs)("td",{children:[" ",c.discount," SAR"]}),Object(v.jsx)("th",{children:"Discount %:"}),Object(v.jsxs)("td",{children:[" ",c.discount_percent," SAR"]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Status:"}),Object(v.jsxs)("td",{children:[" ",c.status]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]}),Object(v.jsx)("th",{children:"Profit :"}),Object(v.jsxs)("td",{children:[" ",c.profit," SAR"]}),Object(v.jsx)("th",{children:"Loss:"}),Object(v.jsxs)("td",{children:[" ",c.loss," SAR"]})]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Unit Price"}),Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("th",{children:"Purchase Unit Price"}),Object(v.jsx)("th",{children:"Purchase Price"}),Object(v.jsx)("th",{children:"Profit"}),Object(v.jsx)("th",{children:"Loss"})]})}),Object(v.jsxs)("tbody",{children:[c.products&&c.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:c.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:c.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(v.jsx)("td",{className:"text-end",children:c.shipping_handling_fees?Object(v.jsx)(x.a,{value:c.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):"0.00 SAR"}),Object(v.jsx)("td",{colSpan:"3"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:c.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:0-c.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:c.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:c.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),Object(v.jsx)("td",{className:"text-center",children:"0 SAR"}),Object(v.jsx)("td",{className:"text-center",children:"0 SAR"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-end",children:Object(v.jsx)(x.a,{value:c.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("th",{colSpan:"2",className:"text-end",children:"Net Profit"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.net_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:c.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})]})})]})]})]})})),Me=Pe,Ie=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Le(),He(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],q=V[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(!1),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(""),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(""),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(""),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),me=pe[0],xe=pe[1],Oe=Object(s.useState)(!1),fe=Object(o.a)(Oe,2),ge=fe[0],ve=fe[1],_e=Object(s.useState)({}),ye=Object(o.a)(_e,2),Ne=ye[0],Ce=ye[1],Se=Object(s.useState)("created_at"),we=Object(o.a)(Se,2),ke=we[0],Te=we[1],Re=Object(s.useState)("-"),De=Object(o.a)(Re,2),Ae=De[0],Fe=De[1];function Pe(e,t){Ne[e]=t,D(R=1),Le()}function Ie(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(ce(t),le(""),be(""),Ne.created_at_from="",Ne.created_at_to="",Ne[e]=t),"created_at_from"===e?(le(t),ce(""),Ne.created_at="",Ne[e]=t):"created_at_to"===e&&(be(t),ce(""),Ne.created_at="",Ne[e]=t),D(R=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ne.store_id=i.get("store_id")),Ne.product_id=c.id,Ce(Ne);var t,a=(t=Ne,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),xe(!0),fetch("/v1/quotation/history?"+a+"&sort="+Ae+ke+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:xe(!1),ve(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),U(n.total_count),J((R-1)*C),q(n.result.length),We=n.meta.total_quotation,Ze(We),Je=n.meta.total_profit,Ye(Je),ct=n.meta.total_loss,rt(ct),tt=n.meta.total_vat,at(tt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){xe(!1),ve(!1),console.log(e)}))}function ze(e){Te(ke=e),Fe(Ae="-"===Ae?"":"-"),Le()}function Ee(e){R=parseInt(e),D(R),Le()}var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){He(!1)}var Ge=Object(s.useState)(0),Qe=Object(o.a)(Ge,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useState)(0),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useRef)();var ot=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Me,{ref:it}),Object(v.jsx)(I,{ref:ot}),Object(v.jsxs)(p.a,{show:Ve,size:"xl",onHide:qe,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Quotation History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Quotation: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ct,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"",Object(v.jsxs)("h1",{className:"text-end",children:["VAT: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:tt.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===E&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Quotation History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ve(!0),Le()},variant:"primary",disabled:ge,children:[ge?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:me&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Le()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",X+1,"-",X+H," of"," ",E]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("store_name")},children:["Store","store_name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quotation_code")},children:["Quotation ID","quotation_code"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quotation_code"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("customer_name")},children:["Customer","customer_name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("quantity")},children:["Quantity","quantity"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("unit_price")},children:["Unit Price","unit_price"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("price")},children:["Price","price"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("vat_price")},children:["VAT","vat_price"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("net_price")},children:["Net Price","net_price"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("profit")},children:["Profit","profit"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"profit"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("loss")},children:["Loss","loss"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"loss"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:ne,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return te(!ee)},children:ee?"Less..":"More.."}),Object(v.jsx)("br",{}),ee?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:oe,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ue,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ie("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Pe("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quotation_code",onChange:function(e){return Pe("quotation_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return Pe("customer_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Pe("quantity",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return Pe("unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"price",onChange:function(e){return Pe("price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Pe("vat_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return Pe("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"profit",onChange:function(e){return Pe("profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"loss",onChange:function(e){return Pe("loss",e.target.value)},className:"form-control"})}):""]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.quotation_id,it.current.open(t)},children:e.quotation_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,ot.current.open(t)},children:e.customer_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(v.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(v.jsx)("td",{children:e.price.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.vat_price.toFixed(2)+" SAR  ("+e.vat_percent.toFixed(2)+"%)"}),Object(v.jsx)("td",{children:e.net_price.toFixed(2)+" SAR"}),"true"===i.get("admin")?Object(v.jsx)("td",{children:e.profit.toFixed(2)+" SAR"}):"","true"===i.get("admin")?Object(v.jsx)("td",{children:e.loss.toFixed(2)+" SAR"}):""]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),Le=Ie,ze=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function s(e){return e?e.replace(/\d/g,(function(e){return a[parseInt(e)]})):""}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"30px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"100",height:"100",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsx)("li",{children:e.model.store?"\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644: "+e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"}),Object(v.jsx)("li",{children:e.model.store?"\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621: "+e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"DELIVERY NOTE / \u0645\u0630\u0643\u0631\u0629 \u062a\u0633\u0644\u064a\u0645"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Delivery Note: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Delivert Note Date: "}),e.model.created_at?Object(O.default)(new Date(e.model.created_at),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"<CUSTOMER_NAME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"<CUSTOMER_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?s(e.model.code)+"#":"<ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:" :\u0631\u0642\u0645 \u0645\u0630\u0643\u0631\u0629 \u0627\u0644\u062a\u0633\u0644\u064a\u0645 "})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:" \u062a\u0627\u0631\u064a\u062e \u0645\u0630\u0643\u0631\u0629 \u0627\u0644\u062a\u0633\u0644\u064a\u0645: "}),e.model.created_at?n(e.model.created_at):"<DATE_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",borderRadius:"6px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(v.jsx)("li",{children:"Part No."})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})})]})}),Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{className:"text-center",style:{height:"20px"},children:[Object(v.jsx)("td",{children:s+1+a*e.model.pageSize}),Object(v.jsx)("td",{children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[t.quantity,"  ",t.unit?t.unit:""," "]})]},s)}))})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(v.jsx)("li",{children:"Delivered By:"})]})}),Object(v.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Received By:"})]})}),Object(v.jsx)("th",{style:{width:"37%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{style:{width:"37%",height:"80px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(v.jsxs)("li",{children:[" ",e.model.signature_date_str?e.model.signature_date_str:""]})]})}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsx)("div",{className:"row",style:{fontSize:"3mm"},children:Object(v.jsx)("div",{className:"col-md-12 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})})]})}))})})),Ee=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length);d++);s+=1057,o+=12,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){_="",r.code&&(_+="DeliveryNote #: "+r.code+"<br />");r.store&&(_+="Store: "+r.store.name+"<br />");r.customer&&(_+="Customer: "+r.customer.name+"<br />");r.net_total&&(_+="Net Total: "+r.net_total+"<br />");C(_+="Store: Test <br />"),r.qr_content=_,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),_=g[0],C=g[1];var S=Object(s.useRef)();var w=Object(N.useReactToPrint)({content:function(){return S.current},documentTitle:function(){var e="DeliveryNote";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"DeliveryNote Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:S,children:Object(v.jsx)(ze,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),Ue=Ee,Be=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(v.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"DELIVERY NOTE / \u0645\u0630\u0643\u0631\u0629 \u062a\u0633\u0644\u064a\u0645"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.created_at?Object(O.default)(new Date(e.model.created_at),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})})]},t.item_code)}))})}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""})]},a)}))})})),Ve=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="DeliveryNote #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="DeliveryNote";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"DeliveryNote Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(Be,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),He=Ve,qe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get DeliveryNote");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/delivery-note/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),w(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(0),d=Object(o.a)(l,2),j=(d[0],d[1],Object(s.useState)(0)),x=Object(o.a)(j,2),O=(x[0],x[1],Object(s.useState)(0)),f=Object(o.a)(O,2),g=(f[0],f[1],Object(s.useState)(0)),_=Object(o.a)(g,2);_[0],_[1];var N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],w=C[1];function T(){w(!1)}var R=Object(s.useRef)();var D=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ue,{ref:R}),Object(v.jsx)(He,{ref:D}),Object(v.jsxs)(p.a,{show:S,size:"xl",onHide:T,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of  Delivery Note #",c.code]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){D.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0  \xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){R.current.open(c)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," Print A4"]}),"\xa0  \xa0\xa0 \xa0\xa0",e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]}),Object(v.jsx)("th",{children:"Customer:"}),Object(v.jsxs)("td",{children:[" ",c.customer_name]}),Object(v.jsx)("th",{children:"Delivered by:"}),Object(v.jsxs)("td",{children:[" ",c.delivered_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date_str]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"})]})}),Object(v.jsx)("tbody",{children:c.products&&c.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]})]},t)}))})]})})]})]})]})})),Ge=qe,Qe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(h.a)({},c)),Ie(),Ve(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=new Date,d=Object(s.useState)([]),j=Object(o.a)(d,2),f=j[0],g=j[1],_=Object(s.useState)(5),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],q=V[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(!1),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(""),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(""),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(""),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),me=pe[0],xe=pe[1],Oe=Object(s.useState)(!1),fe=Object(o.a)(Oe,2),ge=fe[0],ve=fe[1],_e=Object(s.useState)({}),ye=Object(o.a)(_e,2),Ne=ye[0],Ce=ye[1],Se=Object(s.useState)("created_at"),we=Object(o.a)(Se,2),ke=we[0],Te=we[1],Re=Object(s.useState)("-"),De=Object(o.a)(Re,2),Ae=De[0],Fe=De[1];function Pe(e,t){Ne[e]=t,D(R=1),Ie()}function Me(e,t){var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(ce(t),le(""),be(""),Ne.created_at_from="",Ne.created_at_to="",Ne[e]=t),"created_at_from"===e?(le(t),ce(""),Ne.created_at="",Ne[e]=t):"created_at_to"===e&&(be(t),ce(""),Ne.created_at="",Ne[e]=t),D(R=1),Ie()}function Ie(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Ne.store_id=i.get("store_id")),Ne.product_id=c.id,Ce(Ne);var t,a=(t=Ne,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a),xe(!0),fetch("/v1/delivery-note/history?"+a+"&sort="+Ae+ke+"&page="+R+"&limit="+C,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:xe(!1),ve(!1),g(n.result),r=parseInt((n.total_count+C-1)/C),M(r),U(n.total_count),J((R-1)*C),q(n.result.length),We=n.meta.total_quantity,Ze(We);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){xe(!1),ve(!1),console.log(e)}))}function Le(e){Te(ke=e),Fe(Ae="-"===Ae?"":"-"),Ie()}function ze(e){R=parseInt(e),D(R),Ie()}var Ee=Object(s.useState)(!1),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1];function He(){Ve(!1)}var qe=Object(s.useState)(0),Qe=Object(o.a)(qe,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Je=(Xe[0],Xe[1],Object(s.useState)(0)),Ye=Object(o.a)(Je,2),$e=(Ye[0],Ye[1],Object(s.useState)(0)),et=Object(o.a)($e,2),tt=(et[0],et[1],Object(s.useRef)());var at=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ge,{ref:tt}),Object(v.jsx)(I,{ref:at}),Object(v.jsxs)(p.a,{show:Be,size:"xl",onHide:He,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["DeliveryNote History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:He,"aria-label":"Close"})})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Quantity: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:We,displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===E&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No DeliveryNote History to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ve(!0),Ie()},variant:"primary",disabled:ge,children:[ge?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:me&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),S(C),Ie()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""})}),Object(v.jsx)("div",{className:"row",children:E>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",X+1,"-",X+H," of"," ",E]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",R," of ",P]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("created_at")},children:["Created At","created_at"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("store_name")},children:["Store","store_name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("delivery_note_code")},children:["DeliveryNote ID","delivery_note_code"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"delivery_note_code"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("customer_name")},children:["Customer","customer_name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("quantity")},children:["Quantity","quantity"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:ne,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){e&&Me("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return te(!ee)},children:ee?"Less..":"More.."}),Object(v.jsx)("br",{}),ee?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:oe,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Me("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ue,selected:l,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Me("created_at_to",e)}})]}):null]}),i.get("store_id")?"":Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return Pe("store_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"delivery_note_code",onChange:function(e){return Pe("delivery_note_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return Pe("customer_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return Pe("quantity",e.target.value)},className:"form-control"})})]})}),Object(v.jsx)("tbody",{className:"text-center",children:f&&f.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.delivery_note_id,tt.current.open(t)},children:e.delivery_note_code}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,at.current.open(t)},children:e.customer_name}),Object(v.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]})]},e.id)}))})]})}),P?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:R-1}):""]})})})})]})})]})]})})),We=Qe,Ze=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Product");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/product/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),O(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],O=d[1];function f(){O(!1)}Object(s.useRef)(),Object(s.useRef)();var g=Object(s.useRef)();var _=Object(s.useRef)();var N=Object(s.useRef)();var C=Object(s.useRef)();var S=Object(s.useRef)();var w=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(re,{ref:g,showToastMessage:e.showToastMessage}),Object(v.jsx)(oe,{ref:_,showToastMessage:e.showToastMessage}),Object(v.jsx)(ge,{ref:N,showToastMessage:e.showToastMessage}),Object(v.jsx)(Re,{ref:C,showToastMessage:e.showToastMessage}),Object(v.jsx)(Le,{ref:S,showToastMessage:e.showToastMessage}),Object(v.jsx)(We,{ref:w,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:f,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Product #",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)("div",{class:"btn-group",children:[Object(v.jsx)("button",{type:"button",class:"btn btn-success dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:"History"}),Object(v.jsxs)("ul",{class:"dropdown-menu",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){g.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Sales History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){N.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Purchase History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){_.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Sales Return History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){C.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Purchase Return History"]})}),Object(v.jsxs)("li",{children:[" ",Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){S.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Quotation History"]})]}),Object(v.jsxs)("li",{children:[" ",Object(v.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){w.current.open(e)}(c)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"})," Delivery Note History"]})]})]})]}),"\xa0\xa0",e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){f(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){f(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Barcode (Note:Save & Print):"}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"Barcode",src:c.barcode_base64,style:{width:"400px",height:"300px"},onClick:function(e){console.log("Clicked:"),console.log(e.target.getAttribute("src"));var t=new H.a({language:"esc-pos"}),a=new Image;a.src=e.target.getAttribute("src"),a.onload=function(){console.log("Inside onload");var e=t.image(a,320,320,"atkinson").encode();console.log("result:",e)}}})}),Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Name(in Arabic):"}),Object(v.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Store:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]}),Object(v.jsx)("th",{children:"Store Code:"}),Object(v.jsxs)("td",{children:[" ",c.store_code]}),Object(v.jsx)("th",{children:"Item Code:"}),Object(v.jsxs)("td",{children:[" ",c.item_code]}),Object(v.jsx)("th",{children:"Bar Code:"}),Object(v.jsxs)("td",{children:[" ",c.bar_code]}),Object(v.jsx)("th",{children:"EAN 12:"}),Object(v.jsxs)("td",{children:[" ",c.ean_12]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Part Number:"}),Object(v.jsxs)("td",{children:[" ",c.part_number]}),Object(v.jsx)("th",{children:"Rack / Location:"}),Object(v.jsxs)("td",{children:[" ",c.rack]}),Object(v.jsx)("th",{children:"Categories:"}),Object(v.jsx)("td",{children:Object(v.jsx)("ul",{children:c.category_name&&c.category_name.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Unit:"}),Object(v.jsxs)("td",{children:[" ",c.unit?c.unit:"Unit(s)"]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Unit Prices & Stock"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[i.get("store_id")?"":Object(v.jsx)("th",{children:"Store Name"}),Object(v.jsx)("th",{children:"Purchase Unit Price"}),Object(v.jsx)("th",{children:"Wholesale Unit Price"}),Object(v.jsx)("th",{children:"Retail Unit Price"}),Object(v.jsx)("th",{children:"Stock"})]})}),Object(v.jsx)("tbody",{children:c.stores&&c.stores.map((function(e,t){return i.get("store_id")&&e.store_id!=i.get("store_id")?"":Object(v.jsxs)("tr",{className:"text-center",children:[i.get("store_id")?"":Object(v.jsx)("td",{children:e.store_name}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" SAR"})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.wholesale_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" SAR"})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.retail_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" SAR"})}),Object(v.jsx)("td",{children:e.stock})]},t)}))})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"Product",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})]})})),Ke=Ze,Xe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get ProductCategory");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/product-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Product Category #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Parent Category Name:"}),Object(v.jsxs)("td",{children:[" ",c.parent_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Je=Xe,Ye=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){L(I={}),T(k=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}};I={},L(Object(h.a)({},I)),k=[],T(Object(i.a)(k)),fetch("/v1/product-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),I=n.result,console.log("formData:",I),I.parent_id&&(k=[{id:I.parent_id,name:I.parent_name}],T(Object(i.a)(k))),L(Object(h.a)({},I)),console.log("formData:",I);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(!1),r(e)}))}(e),B(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1],O=new y.a,f=Object(s.useState)([]),g=Object(o.a)(f,2),_=g[0],N=g[1],C=Object(s.useState)([]),S=Object(o.a)(C,2),k=S[0],T=S[1],R=Object(s.useState)(!1),D=Object(o.a)(R,2),A=D[0],F=D[1],P=Object(s.useState)({}),M=Object(o.a)(P,2),I=M[0],L=M[1],z=Object(s.useState)(!1),E=Object(o.a)(z,2),U=E[0],B=E[1];function V(){B(!1)}function H(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function G(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",I.logo),F(!0);var a="/v1/product-category",s="POST";I.id&&(a="/v1/product-category/"+I.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:O.get("access_token")},body:JSON.stringify(I)};console.log("formData:",I),x(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),x(!1),F(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),V(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){x(!1),F(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating ProductCategory!","danger")}))}function Q(){return(Q=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),N([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=H({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,name",F(!0),e.next=13,fetch("/v1/product-category?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,N(c.result),F(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){O.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:U,size:"lg",onHide:V,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:I.id?"Update Product Category #"+I.name:"Create New Product Category"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[I.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){V(),e.openDetailsView(I.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:G,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",I.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:V,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:G,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:I.name?I.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),I.name=e.target.value,L(Object(h.a)({},I)),console.log(I)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),I.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Parent(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"parent_id",labelKey:"name",isLoading:A,isInvalid:!!c.parent_id,onChange:function(e){if(c.parent__id="",r({errors:c}),0===e.length)return c.parent_id="Invalid Parent Category Selected",r(c),I.parent_id="",I.parent_name="",L(Object(h.a)({},I)),void T([]);I.parent_id=e[0].id,L(Object(h.a)({},I)),T(Object(i.a)(e))},options:_,placeholder:"Select Parent Category",selected:k,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Q.apply(this,arguments)}(e)}}),c.parent_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.parent_id]}),I.parent_id&&!c.parent_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:V,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:G,children:j?Object(v.jsx)(w.a,{as:"span",animation:"bproductcategory",size:"sm",role:"status","aria-hidden":!0})+" Processing...":I.id?"Update":"Create"})]})]})})]})})})),$e=Ye,et=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){C(N=[]),W({formData:Q={images_content:[],unit:"",item_code:""}}),function(){ne.apply(this,arguments)}(),e&&function(e){console.log("inside get Product");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}};fetch("/v1/product/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,b,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(I({}),console.log("Response:"),console.log(n),r=n.result.category_id,o=n.result.category_name,N=[],r&&o)for(l=0;l<r.length;l++)N.push({id:r[l],name:o[l]});if(C(N),n.result.stores){console.log("data.result.stores:",n.result.stores),d=0,b=Object(E.a)(n.result.stores);try{for(b.s();!(p=b.n()).done;)m=p.value,j[d].store_id==m.store_id&&(j[d].purchase_unit_price=m.purchase_unit_price,j[d].wholesale_unit_price=m.wholesale_unit_price,j[d].retail_unit_price=m.retail_unit_price,j[d].stock=m.stock,d++)}catch(u){b.e(u)}finally{b.f()}x(Object(i.a)(j)),console.log("productStores:",j)}(Q=n.result).name=n.result.name,Q.unit||(Q.unit=""),Q.images_content=[],Q.useLaserScanner=!1,W(Object(h.a)({},Q));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(!1),I(e)}))}(e),J(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)(""),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)([]),f=Object(o.a)(O,2),g=(f[0],f[1],Object(s.useState)([])),_=Object(o.a)(g,2),N=_[0],C=_[1],S=Object(s.useState)([]),k=Object(o.a)(S,2),T=k[0],R=k[1],D=Object(s.useState)({}),F=Object(o.a)(D,2),M=F[0],I=F[1],L=Object(s.useState)(!1),z=Object(o.a)(L,2),U=z[0],B=z[1],V=new y.a,H=Object(s.useState)({images_content:[],unit:"",item_code:""}),G=Object(o.a)(H,2),Q=G[0],W=G[1],Z=Object(s.useState)(!1),K=Object(o.a)(Z,2),X=K[0],J=K[1];function Y(){J(!1)}function $(){return($=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ce({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/product-category?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,R(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=Object(s.useState)([]),te=Object(o.a)(ee,2),ae=te[0],se=te[1];function ne(){return(ne=Object(b.a)(u.a.mark((function e(){var t,a,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching all stores"),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",e.next=5,fetch("/v1/store?select=id,name",t);case 5:return a=e.sent,e.next=8,a.json();case 8:for(s=e.sent,ae=s.result,se(s.result),j=[],n=0;n<ae.length;n++)j.push({store_id:ae[n].id,store_name:ae[n].name,purchase_unit_price:"",retail_unit_price:"",wholesale_unit_price:"",stock:""});x(Object(i.a)(j)),console.log("productStores:",j);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function re(t){t.preventDefault(),console.log("Inside handle Create"),Q.category_id=[];for(var a=0;a<N.length;a++)Q.category_id.push(N[a].id);console.log("productStores:",j);for(var s=[],n=0;n<j.length;n++)s.push({store_id:j[n].store_id,store_name:j[n].store_name,retail_unit_price:j[n].retail_unit_price?j[n].retail_unit_price:0,wholesale_unit_price:j[n].wholesale_unit_price?j[n].wholesale_unit_price:0,purchase_unit_price:j[n].purchase_unit_price?j[n].purchase_unit_price:0,stock:j[n].stock?j[n].stock:0});Q.stores=s,V.get("store_id")&&(Q.store_id=V.get("store_id")),console.log("Formdata:",Q);var c="/v1/product",r="POST";Q.id&&(c="/v1/product/"+Q.id,r="PUT");var i={method:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:V.get("access_token")},body:JSON.stringify(Q)};B(!0),fetch(c,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:I({}),B(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Created Successfully!","success"),e.refreshList&&e.refreshList(),Y(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){B(!1),console.log("Inside catch"),console.log(t),I(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Product!","danger")}))}Object(s.useEffect)((function(){V.get("access_token")||(window.location="/")}));var ie=Object(s.useRef)();var oe=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:ie,showToastMessage:e.showToastMessage}),Object(v.jsx)($e,{ref:oe,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:X,size:"xl",onHide:Y,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:Q.id?"Update Product #"+Q.name:"Create New Product"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Q.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){Y(),e.openDetailsView(Q.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:re,children:[U?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Q.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:re,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Q.name?Q.name:"",type:"string",onChange:function(e){M.name="",I(Object(h.a)({},M)),Q.name=e.target.value,W(Object(h.a)({},Q)),console.log(Q)},className:"form-control",id:"name",placeholder:"Name"}),M.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.name]}),Q.name&&!M.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name In Arabic (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Q.name_in_arabic?Q.name_in_arabic:"",type:"string",onChange:function(e){M.v="",I(Object(h.a)({},M)),Q.name_in_arabic=e.target.value,W(Object(h.a)({},Q)),console.log(Q)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),M.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.name_in_arabic]}),Q.name_in_arabic&&!M.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Part Number(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Q.part_number?Q.part_number:"",type:"string",onChange:function(e){M.part_number="",I(Object(h.a)({},M)),Q.part_number=e.target.value,W(Object(h.a)({},Q)),console.log(Q)},className:"form-control",id:"part_number",placeholder:"Part Number"}),M.part_number&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.part_number]}),Q.part_number&&!M.part_number&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Rack / Location (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Q.rack?Q.rack:"",type:"string",onChange:function(e){M.rack="",I(Object(h.a)({},M)),Q.rack=e.target.value,W(Object(h.a)({},Q)),console.log(Q)},className:"form-control",id:"rack",placeholder:"Rack/Location"}),M.rack&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.rack]}),Q.rack&&!M.rack&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Categories*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"category_id",labelKey:"name",isInvalid:!!M.category_id,onChange:function(e){if(M.category_id="",I(M),0===e.length)return M.category_id="Invalid Category selected",I(M),W(Object(h.a)({},Q)),void C([]);W(Object(h.a)({},Q)),C(e)},options:T,placeholder:"Select Categories",selected:N,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){$.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){oe.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),M.category_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.category_id]}),Q.category_id&&!M.category_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Unit"}),Object(v.jsxs)("select",{className:"form-control",value:Q.unit,onChange:function(e){Q.unit=e.target.value,console.log("Inside onchange price type:",Q.unit),W(Object(h.a)({},Q))},children:[Object(v.jsx)("option",{value:"",children:"PC"}),Object(v.jsx)("option",{value:"drum",children:"Drum"}),Object(v.jsx)("option",{value:"set",children:"Set"}),Object(v.jsx)("option",{value:"Kg",children:"Kg"}),Object(v.jsx)("option",{value:"Meter(s)",children:"Meter(s)"}),Object(v.jsx)("option",{value:"Gm",children:"Gm"}),Object(v.jsx)("option",{value:"L",children:"Liter (L)"}),Object(v.jsx)("option",{value:"Gm",children:"Gm"}),Object(v.jsx)("option",{value:"Mg",children:"Mg"})]})]}),Object(v.jsx)("h4",{children:"Unit Price & Stock"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[V.get("store_id")?"":Object(v.jsx)("th",{children:"Store Name"}),Object(v.jsx)("th",{children:"Purchase Unit Price"}),Object(v.jsx)("th",{children:"Wholesale Unit Price"}),Object(v.jsx)("th",{children:"Retail Unit Price"}),Object(v.jsx)("th",{children:"Stock"})]})}),Object(v.jsx)("tbody",{children:ae.map((function(e,t){var a,s,n,c,r,o,l,d,u,b,p,m,O,f,g,_,y,N,C;return V.get("store_id")&&e.id!=V.get("store_id")?"":Object(v.jsxs)("tr",{className:"text-center",children:[V.get("store_id")?"":Object(v.jsx)("td",{style:{width:"150px"},children:e.name}),Object(v.jsxs)("td",{style:{width:"150px"},children:[Object(v.jsx)("input",{type:"number",value:(null===(a=j[t])||void 0===a?void 0:a.purchase_unit_price)||0==(null===(s=j[t])||void 0===s?void 0:s.purchase_unit_price)?null===(n=j[t])||void 0===n?void 0:n.purchase_unit_price:"",className:"form-control",placeholder:"Purchase Unit Price",onChange:function(e){return M["purchase_unit_price_"+t]="",I(Object(h.a)({},M)),e.target.value?parseFloat(e.target.value)<0?(j[t].purchase_unit_price="",x(Object(i.a)(j)),M["purchase_unit_price_"+t]="Purchase Unit Price should not be < 0",void I(Object(h.a)({},M))):(j[t].purchase_unit_price=parseFloat(e.target.value),void x(Object(i.a)(j))):(j[t].purchase_unit_price="",x(Object(i.a)(j)),void console.log("errors:",M))}})," ",M["purchase_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M["purchase_unit_price_"+t]]}),!(null===(c=j[t])||void 0===c?void 0:c.purchase_unit_price)&&0!==(null===(r=j[t])||void 0===r?void 0:r.purchase_unit_price)||M["purchase_unit_price_"+t]?null:Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("td",{style:{width:"150px"},children:[Object(v.jsx)("input",{type:"number",value:(null===(o=j[t])||void 0===o?void 0:o.wholesale_unit_price)||0===(null===(l=j[t])||void 0===l?void 0:l.wholesale_unit_price)?null===(d=j[t])||void 0===d?void 0:d.wholesale_unit_price:"",className:"form-control",placeholder:"Wholesale Unit Price",onChange:function(e){return M["wholesale_unit_price_"+t]="",I(Object(h.a)({},M)),e.target.value?parseFloat(e.target.value)<0?(j[t].wholesale_unit_price="",x(Object(i.a)(j)),M["wholesale_unit_price_"+t]="Wholesale unit price should not be < 0",void I(Object(h.a)({},M))):(j[t].wholesale_unit_price=parseFloat(e.target.value),void x(Object(i.a)(j))):(j[t].wholesale_unit_price="",void x(Object(i.a)(j)))}}),M["wholesale_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M["wholesale_unit_price_"+t]]}),!(null===(u=j[t])||void 0===u?void 0:u.wholesale_unit_price)&&0!==(null===(b=j[t])||void 0===b?void 0:b.wholesale_unit_price)||M["wholesale_unit_price_"+t]?null:Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("td",{style:{width:"150px"},children:[Object(v.jsx)("input",{type:"number",value:(null===(p=j[t])||void 0===p?void 0:p.retail_unit_price)||0===(null===(m=j[t])||void 0===m?void 0:m.retail_unit_price)?null===(O=j[t])||void 0===O?void 0:O.retail_unit_price:"",className:"form-control",placeholder:"Retail Unit Price",onChange:function(e){return M["retail_unit_price_"+t]="",I(Object(h.a)({},M)),e.target.value?parseFloat(e.target.value)<0?(M["retail_unit_price_"+t]="Retail Unit Price should not be < 0",j[t].retail_unit_price="",x(Object(i.a)(j)),I(Object(h.a)({},M)),void console.log("errors:",M)):(console.log("e.target.value:",e.target.value),j[t].retail_unit_price=parseFloat(e.target.value),console.log("productStores[index].retail_unit_price:",j[t].retail_unit_price),void x(Object(i.a)(j))):(j[t].retail_unit_price="",void x(Object(i.a)(j)))}})," ",M["retail_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M["retail_unit_price_"+t]]}),!(null===(f=j[t])||void 0===f?void 0:f.retail_unit_price)&&0!==(null===(g=j[t])||void 0===g?void 0:g.retail_unit_price)||M["retail_unit_price_"+t]?null:Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("td",{style:{width:"150px"},children:[Object(v.jsx)("input",{value:(null===(_=j[t])||void 0===_?void 0:_.stock)||0===(null===(y=j[t])||void 0===y?void 0:y.stock)?j[t].stock:"",type:"number",onChange:function(e){if(M["stock_"+t]="",I(Object(h.a)({},M)),!e.target.value)return j[t].stock="",void x(Object(i.a)(j));j[t].stock=parseFloat(e.target.value)},className:"form-control",id:"stock",placeholder:"Stock"}),M["stock_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M["stock_"+t]]}),!(null===(N=j[t])||void 0===N?void 0:N.stock)&&0!==(null===(C=j[t])||void 0===C?void 0:C.stock)||M["stock_"+t]?null:Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]},t)}))})]})}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:c||"",type:"file",onChange:function(e){if(M.image="",I(Object(h.a)({},M)),!e.target.value)return M.image="Invalid Image File",void I(Object(h.a)({},M));c=e.target.value,r(c);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Q.images_content[0]=e,W(Object(h.a)({},Q)),console.log("formData.images_content[0]:",Q.images_content[0])}))},i.src=n},className:"form-control",id:"image"}),M.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),M.image]}),Q.image&&!M.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:Y,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:re,children:U?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Q.id?"Update":"Create"})]})]})})]})]})})),tt=et,at=a(660),st=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get User");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of User #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Admin:"}),Object(v.jsxs)("td",{children:[" ",c.admin]}),Object(v.jsx)("th",{children:"E-mail:"}),Object(v.jsxs)("td",{children:[" ",c.email]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Mob:"}),Object(v.jsxs)("td",{children:[" ",c.mob]}),Object(v.jsx)("th",{children:"Password:"}),Object(v.jsx)("td",{children:" ***********"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),nt=st,ct=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){g={},_({}),e&&function(e){console.log("inside get User");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),i=n.result,console.log("Response:"),console.log(i),g={id:i.id,name:i.name,email:i.email,mob:i.mob,log:""},!0===i.admin?g.admin=!0:g.admin=!1,console.log("From Server:",g),_(Object(h.a)({},g));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new y.a,O=Object(s.useState)({admin:!1}),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){k(!1)}function R(t){t.preventDefault(),console.log("Inside handle Create");var a="/v1/user",s="POST";g.id&&(a="/v1/user/"+g.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(g)};console.log("sending formData:",g),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("User Created Successfully!","success"),e.refreshList&&e.refreshList(),T(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating User!","danger")}))}return Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:S,size:"lg",onHide:T,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:g.id?"Update User #"+g.name:"Create New User"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[g.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openDetailsView(g.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:R,children:[d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",g.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:R,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name?g.name:"",type:"text",onChange:function(e){c.name="",r(Object(h.a)({},c)),g.name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name1",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),g.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsx)(at.a.Check,{type:"switch",as:"input",id:"admin",label:"Admin",value:g.admin,checked:!0===g.admin?"checked":"",onChange:function(e){g.admin=!g.admin,console.log("formData.admin:",g.admin),_(Object(h.a)({},g))}})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Email*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.email?g.email:"",type:"text",onChange:function(e){c.email="",g.email=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"email1",placeholder:"Email"}),c.email&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),g.email&&!c.email&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Password*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.password?g.password:"",type:"password",onChange:function(e){c.password="",g.password=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"password1",placeholder:"Password"}),c.password&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.password]}),g.password&&!c.password&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Mob*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.mob?g.mob:"",type:"text",onChange:function(e){c.mob="",r(Object(h.a)({},c)),g.mob=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"mob1",placeholder:"Mob"}),c.mob&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.mob]}),g.mob&&!c.mob&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:T,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",type:"submit",children:d?Object(v.jsx)(w.a,{as:"span",animation:"buser",size:"sm",role:"status","aria-hidden":!0})+" Creating...":g.id?"Update":"Create"})]})]})})]})})})),rt=ct,it=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Signature #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsxs)("div",{children:["Signature:",Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+c.signature+"?"+Date.now(),style:{width:100,height:80}},"https://startpos-api.startuptech.uk"+c.signature)]})]})]})})})),ot=it,lt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){g={},_(Object(h.a)({},g)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(i=n.result).signature="",_(Object(h.a)({},i));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new y.a,O=Object(s.useState)({}),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){k(!1)}function R(t){t.preventDefault(),console.log("Inside handle Create"),g.vat_percent?g.vat_percent=parseFloat(g.vat_percent):g.vat_percent=null,console.log("formData.logo:",g.logo);var a="/v1/signature",s="POST";g.id&&(a="/v1/signature/"+g.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(g)};console.log("formData:",g),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Signature Created Successfully!","success"),e.refreshList&&e.refreshList(),T(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Signature!","danger")}))}return Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:S,size:"lg",onHide:T,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:g.id?"Update Signature #"+g.name:"Create New Signature"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[g.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openDetailsView(g.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:R,children:[d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",g.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:R,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name?g.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),g.name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),g.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Signature*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.signature?g.signature:"",type:"file",onChange:function(e){if(c.signature_content="",r(Object(h.a)({},c)),!e.target.value)return c.signature_content="Invalid Signature File",void r(Object(h.a)({},c));g.signature=e.target.value;var t=document.querySelector("#signature").files[0],a=100,s=80,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){g.signature_content=e,_(Object(h.a)({},g)),console.log("formData.logo_content:",g.logo_content)}))},i.src=n},className:"form-control",id:"signature"}),c.signature_content&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.signature_content]}),g.signature_content&&!c.signature_content&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:T,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:R,children:d?Object(v.jsx)(w.a,{as:"span",animation:"bsignature",size:"sm",role:"status","aria-hidden":!0})+" Processing...":g.id?"Update":"Create"})]})]})})]})})})),dt=lt,jt=a(102),ut=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){C={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,is_discount_percent:!1,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"delivered",price_type:"retail"},ue=[],be([]),I=[],L([]),J=[],Y([]),_e=[],ye([]),[],Re([]),mt(),g.get("user_id")&&(_e=[{id:g.get("user_id"),name:g.get("user_name")}],C.delivered_by=g.get("user_id"),k(Object(h.a)({},C)),ye(Object(i.a)(_e))),g.get("store_id")&&(C.store_id=g.get("store_id"),C.store_name=g.get("store_name")),k(Object(h.a)({},C)),e&&function(e){console.log("inside get Quotation");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/quotation/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),o=n.result,(C={id:o.id,code:o.code,store_id:o.store_id,customer_id:o.customer_id,date:o.date,vat_percent:o.vat_percent,discount:o.discount,discount_percent:o.discount_percent,status:o.status,delivered_by:o.delivered_by,delivered_by_signature_id:o.delivered_by_signature_id,is_discount_percent:o.is_discount_percent,shipping_handling_fees:o.shipping_handling_fees}).date_str=n.result.date,C.is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,ue=o.products,be(Object(i.a)(ue)),l=[{id:o.store_id,name:o.store_name}],d=[{id:o.customer_id,name:o.customer_name,search_label:o.customer_name}],j=[{id:o.delivered_by,name:o.delivered_by_name}],o.delivered_by_signature_id&&(b=[{id:o.delivered_by_signature_id,name:o.delivered_by_signature_name}],Re([].concat(b))),ye([].concat(j)),L([].concat(l)),Y([].concat(d)),k(Object(h.a)({},C)),mt();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(e),Ie(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-order.123");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1],g=new y.a,_=Object(s.useState)({vat_percent:15,discount:0,discountValue:0,discount_percent:0,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"created",price_type:"retail",is_discount_percent:!1}),N=Object(o.a)(_,2),C=N[0],k=N[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),I=M[0],L=M[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1],H=Object(s.useState)([]),G=Object(o.a)(H,2),W=G[0],Z=G[1],K=Object(s.useState)([]),X=Object(o.a)(K,2),J=X[0],Y=X[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=(oe[1],Object(s.useState)([])),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),me=pe[0],xe=pe[1],Oe=Object(s.useState)([]),fe=Object(o.a)(Oe,2),ge=(fe[0],fe[1],Object(s.useState)([])),ve=Object(o.a)(ge,2),_e=ve[0],ye=ve[1],Ne=Object(s.useState)(!1),Ce=Object(o.a)(Ne,2),Se=(Ce[0],Ce[1],Object(s.useState)([])),we=Object(o.a)(Se,2),ke=(we[0],we[1],Object(s.useState)([])),Te=Object(o.a)(ke,2),Re=(Te[0],Te[1]),De=Object(s.useState)(!1),Ae=Object(o.a)(De,2),Fe=(Ae[0],Ae[1],Object(s.useState)(!1)),Pe=Object(o.a)(Fe,2),Me=Pe[0],Ie=Pe[1];function Le(){Ie(!1)}function ze(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function Ee(){return(Ee=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),A([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ze({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name",V(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,A(c.result),V(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return(Ue=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),Z([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ze({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",ae(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,Z(c.result),ae(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){g.get("access_token")||(window.location="/")}));var Be=Object(s.useState)(!1),Ve=Object(o.a)(Be,2),He=Ve[0],qe=Ve[1];function Ge(){return(Ge=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),re([]),console.log("searchTerm:"+t),t){e.next=8;break}return He=!1,qe(!1),xe(!1),e.abrupt("return");case 8:return a={name:t},g.get("store_id")&&(a.store_id=g.get("store_id")),""!==(s=ze(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic",xe(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return He=!1,qe(!1),xe(!1),e.abrupt("return");case 27:He=!0,qe(!0),re(i),xe(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.barcode=t,k(Object(h.a)({},C)),console.log("Inside getProductByBarCode"),c.bar_code="",r(Object(h.a)({},c)),console.log("barcode:"+C.barcode),C.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===C.barcode.length&&(C.barcode=C.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+C.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(i=n.result)?Ze(i):(c.bar_code="Invalid Barcode:"+C.barcode,r(Object(h.a)({},c))),C.barcode="",k(Object(h.a)({},C));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",ue),C.products=[];for(var a=0;a<ue.length;a++)C.products.push({product_id:ue[a].product_id,name:ue[a].name,name_in_arabic:ue[a].name_in_arabic,quantity:parseFloat(ue[a].quantity),unit_price:parseFloat(ue[a].unit_price),purchase_unit_price:parseFloat(ue[a].purchase_unit_price),unit:ue[a].unit,part_number:ue[a].part_number});C.discount=parseFloat(C.discount),C.discount_percent=parseFloat(C.discount_percent),C.vat_percent=parseFloat(C.vat_percent),g.get("store_id")&&(C.store_id=g.get("store_id")),console.log("formData.discount:",C.discount);var s="/v1/quotation",n="POST";C.id&&(s="/v1/quotation/"+C.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.get("access_token")},body:JSON.stringify(C)};console.log("formData:",C),f(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),f(!1),console.log("Response:"),console.log(c),e.showToastMessage("Quotation Created Successfully!","success"),e.refreshList&&e.refreshList(),Le(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){f(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Quotation!","danger")}))}function Ze(e){if(console.log("Inside Add product"),!C.store_id)return c.product_id="Please Select a Store and try again",void r(Object(h.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(h.a)({},c));var t=function(e,t){if(!t)return"";for(var a=0;a<t.length;a++)if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("productStores[i].retail_unit_price:",t[a].retail_unit_price),t[a];return console.log("not matched"),""}(C.store_id,e.stores);e.unit_price=t.retail_unit_price,e.purchase_unit_price=t.purchase_unit_price;var a=!1,s=-1,n=0;if(e.quantity=1,!function(e){for(var t=0;t<ue.length;t++)if(ue[t].product_id===e)return!0;return!1}(e.id)?n=parseFloat(e.quantity):(a=!0,s=function(e){for(var t=0;t<ue.length;t++)if(ue[t].product_id===e)return t;return!1}(e.id),n=parseFloat(ue[s].quantity+e.quantity)),console.log("quantity:",n),c.quantity="",a&&(ue[s].quantity=parseFloat(n)),!a){var o={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,stores:e.stores,unit:e.unit};e.unit_price&&(o.unit_price=parseFloat(e.unit_price),console.log("item.unit_price:",o.unit_price)),e.purchase_unit_price&&(o.purchase_unit_price=parseFloat(e.purchase_unit_price),console.log("item.purchase_unit_price",o.purchase_unit_price)),ue.push(o)}console.log("selectedProducts:",ue),be(Object(i.a)(ue)),mt()}var Xe=Object(s.useState)(0),Je=Object(o.a)(Xe,2),Ye=Je[0],$e=Je[1];var et=Object(s.useState)(0),at=Object(o.a)(et,2),st=at[0],nt=at[1];var ct=Object(s.useState)(0),it=Object(o.a)(ct,2),ot=it[0],lt=it[1];var ut=Object(s.useState)(0),bt=Object(o.a)(ut,2),ht=bt[0],pt=bt[1];function mt(){!function(){Ye=0;for(var e=0;e<ue.length;e++)Ye+=parseFloat(ue[e].unit_price)*parseFloat(ue[e].quantity);Ye=Ye.toFixed(2),$e(Ye)}(),C.is_discount_percent?C.discount_percent>=0&&Ye>0&&(C.discount=parseFloat(Ye*parseFloat(C.discount_percent/100)).toFixed(2),k(Object(h.a)({},C))):C.discount>=0&&Ye>0&&(ht=parseFloat(100*parseFloat(C.discount/Ye)).toFixed(2),pt(ht),C.discount_percent=ht,k(Object(h.a)({},C))),st=0,Ye>0&&(st=(parseFloat(parseFloat(C.vat_percent)/100)*(parseFloat(Ye)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount))).toFixed(2),console.log("vatPrice:",st)),nt(st),ot=0,Ye>0&&(ot=(parseFloat(Ye)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount)+parseFloat(st)).toFixed(2)),lt(ot)}var xt=Object(s.useRef)();var Ot=Object(s.useRef)();var ft=Object(s.useRef)();function gt(){ft.current.open()}var vt=Object(s.useRef)();var _t=Object(s.useRef)();var yt=Object(s.useRef)();function Nt(e){yt.current.open(e)}var Ct=Object(s.useRef)();function St(){var e={};(e=JSON.parse(JSON.stringify(C))).products=ue,e.net_total=ot,e.vat_price=st,e.total=Ye,Ct.current.open(e)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ke,{ref:yt,openUpdateForm:function(e){ft.current.open(e)},openCreateForm:gt}),Object(v.jsx)(tt,{ref:ft,showToastMessage:e.showToastMessage,openDetailsView:Nt}),Object(v.jsx)(S,{ref:Ct}),Object(v.jsx)(P,{ref:xt,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:Ot,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:vt,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:_t,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Me,size:"xl",fullscreen:!0,onHide:Le,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:C.id?"Update Quotation #"+C.code:"Create New Quotation"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:St,children:[Object(v.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:St,children:[Object(v.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0 \xa0\xa0 \xa0\xa0",C.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){Le(),e.openDetailsView(C.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:We,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",C.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:Le,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:We,children:[g.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:B,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),C.store_id="",k(Object(h.a)({},C)),void L([]);C.store_id=e[0].id,k(Object(h.a)({},C)),L(e)},options:D,placeholder:"Select Store",selected:I,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ee.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){xt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]}),C.store_id&&!c.store_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",isLoading:te,isInvalid:!!c.customer_id,onChange:function(e){if(c.customer_id="",r(c),0===e.length)return c.customer_id="Invalid Customer selected",r(c),C.customer_id="",k(Object(h.a)({},C)),void Y([]);C.customer_id=e[0].id,k(Object(h.a)({},C)),Y(e)},options:W,placeholder:"Type name or mob",selected:J,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ue.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){Ot.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.customer_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.customer_id]}),C.customer_id&&!c.customer_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(jt.DebounceInput,{minLength:3,debounceTimeout:500,placeholder:"Scan Barcode",className:"form-control barcode",value:C.barcode,onChange:function(e){return function(e){return Qe.apply(this,arguments)}(e.target.value)}}),c.bar_code&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.bar_code]}),C.bar_code&&!c.bar_code&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("label",{className:"form-label",children:"Product*"}),Object(v.jsx)(q.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:He,isLoading:me,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(h.a)({},c)),C.store_id&&Ze(e[0]),qe(!1)},options:ce,selected:le,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ge.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:gt,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):null,le[0]&&le[0].id&&!c.product_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(v.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(v.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(v.jsx)("th",{style:{width:"34%"},className:"text-start",children:"Name"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Qty"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Purchase Unit Price"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Unit Price"}),Object(v.jsx)("th",{style:{width:"15%"},children:"Price"})]})}),Object(v.jsx)("tbody",{children:ue.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=ue.indexOf(e);t>-1&&ue.splice(t,1),be(Object(i.a)(ue)),mt()}(e)},children:Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){Nt(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(v.jsxs)("td",{style:{width:"155px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(h.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be > 0",ue[t].quantity=a.target.value,be(Object(i.a)(ue)),r(Object(h.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),mt(),ue[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",ue[t].quantity),be(Object(i.a)(ue)),void mt()):(c["quantity_"+t]="Invalid Quantity",ue[t].quantity=a.target.value,be(Object(i.a)(ue)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsxs)("span",{className:"input-group-text",id:"basic-addon2",children:[" ",ue[t].unit?ue[t].unit:"Units"]})]}),c["quantity_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]}),Object(v.jsx)("td",{style:{width:"150px"},children:e.purchase_unit_price?Object(v.jsx)(x.a,{value:e.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}}):""}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.unit_price,className:"form-control",placeholder:"Unit Price",onChange:function(e){return c["unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===parseFloat(e.target.value)?(c["unit_price_"+t]="Unit Price shoudl be > 0",ue[t].unit_price=parseFloat(e.target.value),be(Object(i.a)(ue)),r(Object(h.a)({},c)),void console.log("errors:",c)):(ue[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",ue[t].unit_price),be(Object(i.a)(ue)),void mt()):(c["unit_price_"+t]="Invalid Unit Price",ue[t].unit_price=parseFloat(e.target.value),be(Object(i.a)(ue)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["unit_price_"+t]]})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(v.jsx)("div",{className:"table-responsive",children:Object(v.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-end",style:{width:"200px"},children:Object(v.jsx)(x.a,{value:Ye,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(C.shipping_handling_fees=parseFloat(e.target.value),k(Object(h.a)({},C)),c.shipping_handling_fees="",r(Object(h.a)({},c)),void mt()):parseFloat(e.target.value)<0?(C.shipping_handling_fees=parseFloat(e.target.value),k(Object(h.a)({},C)),c.shipping_handling_fees="Shipping / Handling Fees should be > 0",r(Object(h.a)({},c)),void mt()):e.target.value?(c.shipping_handling_fees="",r(Object(h.a)({},c)),C.shipping_handling_fees=parseFloat(e.target.value),k(Object(h.a)({},C)),void mt()):(C.shipping_handling_fees="",c.shipping_handling_fees="Invalid Shipping / Handling Fees",k(Object(h.a)({},C)),void r(Object(h.a)({},c)))}})," SAR",c.shipping_handling_fees&&Object(v.jsx)("div",{style:{color:"red"},children:c.shipping_handling_fees})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount  ",Object(v.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:C.discount_percent,onChange:function(e){return C.is_discount_percent=!0,0===parseFloat(e.target.value)?(C.discount_percent=parseFloat(e.target.value),k(Object(h.a)({},C)),c.discount_percent="",r(Object(h.a)({},c)),void mt()):parseFloat(e.target.value)<0?(C.discount_percent=parseFloat(e.target.value),C.discount=0,k(Object(h.a)({},C)),c.discount_percent="Discount percent should be >= 0",r(Object(h.a)({},c)),void mt()):e.target.value?(c.discount_percent="",c.discount="",r(Object(h.a)({},c)),C.discount_percent=parseFloat(e.target.value),k(Object(h.a)({},C)),void mt()):(C.discount_percent="",C.discount=0,c.discount_percent="Invalid Discount Percent",k(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.discount_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount_percent})]}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.discount,onChange:function(e){return C.is_discount_percent=!1,0===parseFloat(e.target.value)?(C.discount=parseFloat(e.target.value),k(Object(h.a)({},C)),c.discount="",r(Object(h.a)({},c)),void mt()):parseFloat(e.target.value)<0?(C.discount=parseFloat(e.target.value),C.discount_percent=0,k(Object(h.a)({},C)),c.discount="Discount should be >= 0",r(Object(h.a)({},c)),void mt()):e.target.value?(c.discount="",c.discount_percent="",r(Object(h.a)({},c)),C.discount=parseFloat(e.target.value),k(Object(h.a)({},C)),void mt()):(C.discount="",C.discount_percent=0,c.discount="Invalid Discount",k(Object(h.a)({},C)),mt(),void r(Object(h.a)({},c)))}})," SAR",c.discount&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:[" VAT  ",Object(v.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:C.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(C.vat_percent=parseFloat(e.target.value),k(Object(h.a)({},C)),c.vat_percent="",r(Object(h.a)({},c)),void mt()):parseFloat(e.target.value)<0?(C.vat_percent=parseFloat(e.target.value),nt(st=0),k(Object(h.a)({},C)),c.vat_percent="Vat percent should be >= 0",r(Object(h.a)({},c)),void mt()):e.target.value?(c.vat_percent="",r(Object(h.a)({},c)),C.vat_percent=e.target.value,mt(),k(Object(h.a)({},C)),void console.log(C)):(C.vat_percent="",nt(st=0),c.vat_percent="Invalid vat percent",k(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.vat_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.vat_percent})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:st,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-end",children:Object(v.jsx)(x.a,{value:ot,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})})}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.status,onChange:function(e){if(console.log("Inside onchange status"),!e.target.value)return C.status="",k(Object(h.a)({},C)),c.status="Invalid Status",void r(Object(h.a)({},c));c.status="",r(Object(h.a)({},c)),C.status=e.target.value,k(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"created",children:"Created"}),Object(v.jsx)("option",{value:"delivered",children:"Delivered"}),Object(v.jsx)("option",{value:"pending",children:"Pending"}),Object(v.jsx)("option",{value:"accepted",children:"Accepted"}),Object(v.jsx)("option",{value:"rejected",children:"Rejected"}),Object(v.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),c.status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.status]}),C.status&&!c.status&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:C.date_str?new Date(C.date_str):null,value:C.date_str?Object(O.default)(new Date(C.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),C.date_str=e,k(Object(h.a)({},C))}}),c.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:Le,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:We,children:j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Processing...":C.id?"Update":"Create"})]})]})})]})]})})),bt=ut;var ht=function(e){var t=new y.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(s.useState)(0),p=Object(o.a)(h,2),f=p[0],g=p[1],_=Object(s.useState)([]),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(5),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(1),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(0),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=new Date,ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(""),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(""),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)(""),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Ie=Object(s.useState)(!1),Le=Object(o.a)(Ie,2),ze=Le[0],Ee=Le[1],Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)([]),Ge=Object(o.a)(qe,2),Qe=Ge[0],We=Ge[1],Ze=Object(s.useState)([]),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Je=Ke[1],Ye=Object(s.useState)([]),$e=Object(o.a)(Ye,2),et=$e[0],tt=$e[1],at=Object(s.useState)([]),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)([]),it=Object(o.a)(rt,2),ot=it[0],lt=it[1];Object(s.useEffect)((function(){Tt()}),[]);var dt=Object(s.useState)({}),jt=Object(o.a)(dt,2),ut=jt[0],ht=jt[1],pt=Object(s.useState)("created_at"),mt=Object(o.a)(pt,2),xt=mt[0],Ot=mt[1],ft=Object(s.useState)("-"),gt=Object(o.a)(ft,2),vt=gt[0],_t=gt[1];function yt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Nt(){return(Nt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=yt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,We(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){return(Ct=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),We([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=yt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,tt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t){ut[e]=t,M(P=1),Tt()}function wt(e,t){if(!t)return P=1,ut[e]="",M(P),void Tt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(de(t),he(""),Oe(""),ut.from_date="",ut.to_date="",ut[e]=t,console.log("Value:",t)):"from_date"===e?(he(t),de(""),ut.date="",ut[e]=t):"to_date"===e?(Oe(t),de(""),ut.date="",ut[e]=t):"created_at"===e&&(Se(t),Re(""),Pe(""),ut.created_at_from="",ut.created_at_to="",ut[e]=t),"created_at_from"===e?(Re(t),Se(""),ut.created_at="",ut[e]=t):"created_at_to"===e&&(Pe(t),Se(""),ut.created_at="",ut[e]=t),M(P=1),Tt()}function kt(e,t){"created_by"===e?ct(t):"customer_id"===e?Je(t):"status"===e&&lt(t),ut[e]=Object.values(t).map((function(e){return e.id})).join(","),M(P=1),Tt()}function Tt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(ut.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();ut.timezone_offset=parseFloat(a/60),ht(ut);var s=yt(ut);""!==s&&(s="&"+s),Ee(!0),fetch("/v1/quotation?select=id,code,date,net_total,created_by_name,customer_name,status,created_at,profit,loss"+s+"&sort="+vt+xt+"&page="+P+"&limit="+R,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:Ee(!1),He(!1),S(n.result),o=parseInt((n.total_count+R-1)/R),E(o),H(n.total_count),te((P-1)*R),J(n.result.length),c=n.meta.total_quotation,r(c),d=n.meta.profit,j(d),f=n.meta.loss,g(f);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ee(!1),He(!1),console.log(e)}))}function Rt(e){Ot(xt=e),_t(vt="-"===vt?"":"-"),Tt()}function Dt(e){P=parseInt(e),M(P),Tt()}function At(e){Mt.current.open(e)}var Ft=Object(s.useRef)();function Pt(e){Ft.current.open(e)}var Mt=Object(s.useRef)();function It(){Mt.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(bt,{ref:Mt,refreshList:Tt,showToastMessage:e.showToastMessage,openDetailsView:Pt}),Object(v.jsx)(Me,{ref:Ft,openUpdateForm:At,openCreateForm:It}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Quotation: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Expected Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:d,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Expected Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:f,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Quotations"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:It,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===V&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Quotations to display"})})}),Object(v.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){He(!0),Tt()},variant:"primary",disabled:Ve,children:[Ve?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ze&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:R,onChange:function(e){var t;t=e.target.value,R=parseInt(t),D(R),Tt()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{border:"solid 0px"},children:z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Dt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""})}),Object(v.jsx)("div",{className:"row",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ee+1,"-",ee+X," of"," ",V]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",P," of ",z]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("code")},children:["ID","code"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("date")},children:["Date","date"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("net_total")},children:["Net Total","net_total"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("profit")},children:["Expected Profit","profit"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"profit"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("loss")},children:["Expected Loss","loss"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"loss"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("created_by")},children:["Created By","created_by"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("customer_name")},children:["Customer","customer_name"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("status")},children:["Status","status"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"status"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Rt("created_at")},children:["Created At","created_at"===xt&&"-"===vt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===xt&&""===vt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return St("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:le,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return de(""),void wt("date_str","");wt("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ce(!ne)},children:ne?"Less..":"More.."}),Object(v.jsx)("br",{}),ne?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:be,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void wt("from_date","");wt("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:xe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void wt("to_date","");wt("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return St("net_total",e.target.value)},className:"form-control"})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"profit",onChange:function(e){return St("profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"loss",onChange:function(e){return St("loss",e.target.value)},className:"form-control"})}):"",Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){kt("created_by",e)},options:et,placeholder:"Select Users",selected:nt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ct.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){kt("customer_id",e)},options:Qe,placeholder:"name or mob",selected:Xe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Nt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"status",labelKey:"name",onChange:function(e){kt("status",e)},options:[{id:"sent",name:"Sent"},{id:"pending",name:"Pending"},{id:"accepted",name:"Accepted"},{id:"rejected",name:"Rejected"},{id:"cancelled",name:"Cancelled"},{id:"deleted",name:"Deleted"}],placeholder:"Select Status",selected:ot,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Ce,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Se(""),void wt("created_at","");wt("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return _e(!ve)},children:ve?"Less..":"More.."}),Object(v.jsx)("br",{}),ve?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:Te,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Re(""),void wt("created_at_from","");wt("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Fe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Pe(""),void wt("created_at_to","");wt("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:C&&C.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.net_total," SAR"]}),"true"===t.get("admin")?Object(v.jsxs)("td",{children:[e.profit?e.profit:0," SAR"]}):"","true"===t.get("admin")?Object(v.jsxs)("td",{children:[e.loss?e.loss:0," SAR"]}):"",Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsx)("td",{children:Object(v.jsx)("span",{className:"badge bg-success",children:e.status})}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){At(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Pt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsx)("button",{className:"btn btn-default btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Download",children:Object(v.jsx)("i",{className:"bi bi-download"})}),Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsx)("ul",{className:"dropdown-menu",children:Object(v.jsx)("li",{children:Object(v.jsxs)("a",{href:"/",className:"dropdown-item",children:[Object(v.jsx)("i",{className:"bi bi-download"}),"Download"]})})})]})]},e.code)}))})]})}),z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Dt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""]})})})})]})]})},pt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){N={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,is_discount_percent:!1,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"delivered",price_type:"retail"},le=[],de([]),F=[],M([]),Z=[],K([]),fe=[],ge([]),[],we([]),ht(),f.get("user_id")&&(fe=[{id:f.get("user_id"),name:f.get("user_name")}],N.delivered_by=f.get("user_id"),C(Object(h.a)({},N)),ge(Object(i.a)(fe))),f.get("store_id")&&(N.store_id=f.get("store_id"),N.store_name=f.get("store_name")),C(Object(h.a)({},N)),e&&function(e){console.log("inside get DeliveryNote");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}};fetch("/v1/delivery-note/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),o=n.result,(N={id:o.id,code:o.code,store_id:o.store_id,customer_id:o.customer_id,date_str:o.date_str,date:o.date,vat_percent:o.vat_percent,discount:o.discount,discount_percent:o.discount_percent,status:o.status,delivered_by:o.delivered_by,delivered_by_signature_id:o.delivered_by_signature_id,is_discount_percent:o.is_discount_percent,shipping_handling_fees:o.shipping_handling_fees}).is_discount_percent?N.discountValue=N.discount_percent:N.discountValue=N.discount,le=o.products,de(Object(i.a)(le)),l=[{id:o.store_id,name:o.store_name}],d=[{id:o.customer_id,name:o.customer_name,search_label:o.customer_name}],j=[{id:o.delivered_by,name:o.delivered_by_name}],o.delivered_by_signature_id&&(b=[{id:o.delivered_by_signature_id,name:o.delivered_by_signature_name}],we([].concat(b))),ge([].concat(j)),M([].concat(l)),K([].concat(d)),C(Object(h.a)({},N)),ht();case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(!1),r(e)}))}(e),Fe(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1],f=new y.a,g=Object(s.useState)({vat_percent:15,discount:0,discountValue:0,discount_percent:0,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"created",price_type:"retail",is_discount_percent:!1}),_=Object(o.a)(g,2),N=_[0],C=_[1],S=Object(s.useState)([]),k=Object(o.a)(S,2),T=k[0],R=k[1],D=Object(s.useState)([]),A=Object(o.a)(D,2),F=A[0],M=A[1],I=Object(s.useState)(!1),L=Object(o.a)(I,2),E=L[0],U=L[1],B=Object(s.useState)([]),V=Object(o.a)(B,2),H=V[0],G=V[1],Q=Object(s.useState)([]),W=Object(o.a)(Q,2),Z=W[0],K=W[1],X=Object(s.useState)(!1),J=Object(o.a)(X,2),Y=J[0],$=J[1],ee=Object(s.useState)([]),te=Object(o.a)(ee,2),ae=te[0],se=te[1],ne=Object(s.useState)([]),ce=Object(o.a)(ne,2),re=ce[0],ie=(ce[1],Object(s.useState)([])),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=(me[0],me[1],Object(s.useState)([])),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1],ve=Object(s.useState)(!1),_e=Object(o.a)(ve,2),ye=(_e[0],_e[1],Object(s.useState)([])),Ne=Object(o.a)(ye,2),Ce=(Ne[0],Ne[1],Object(s.useState)([])),Se=Object(o.a)(Ce,2),we=(Se[0],Se[1]),ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),Re=(Te[0],Te[1],Object(s.useState)(!1)),De=Object(o.a)(Re,2),Ae=De[0],Fe=De[1];function Pe(){Fe(!1)}function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),R([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Me({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}},"select=id,name",U(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,R(c.result),U(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){return(Le=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),G([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Me({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",$(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,G(c.result),$(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){f.get("access_token")||(window.location="/")}));var ze=Object(s.useState)(!1),Ee=Object(o.a)(ze,2),Be=Ee[0],Ve=Ee[1];function He(){return(He=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),se([]),console.log("searchTerm:"+t),t){e.next=8;break}return Be=!1,Ve(!1),he(!1),e.abrupt("return");case 8:return a={name:t},f.get("store_id")&&(a.store_id=f.get("store_id")),""!==(s=Me(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}},"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic",he(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return Be=!1,Ve(!1),he(!1),e.abrupt("return");case 27:Be=!0,Ve(!0),se(i),he(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.barcode=t,C(Object(h.a)({},N)),console.log("Inside getProductByBarCode"),c.bar_code="",r(Object(h.a)({},c)),console.log("barcode:"+N.barcode),N.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===N.barcode.length&&(N.barcode=N.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+N.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(i=n.result)?Qe(i):(c.bar_code="Invalid Barcode:"+N.barcode,r(Object(h.a)({},c))),N.barcode="",C(Object(h.a)({},N));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",le),N.products=[];for(var a=0;a<le.length;a++)N.products.push({product_id:le[a].product_id,name:le[a].name,name_in_arabic:le[a].name_in_arabic,quantity:parseFloat(le[a].quantity),unit_price:parseFloat(le[a].unit_price),purchase_unit_price:parseFloat(le[a].purchase_unit_price),unit:le[a].unit,part_number:le[a].part_number});N.discount=parseFloat(N.discount),N.discount_percent=parseFloat(N.discount_percent),N.vat_percent=parseFloat(N.vat_percent),f.get("store_id")&&(N.store_id=f.get("store_id")),console.log("formData.discount:",N.discount);var s="/v1/delivery-note",n="POST";N.id&&(s="/v1/delivery-note/"+N.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:f.get("access_token")},body:JSON.stringify(N)};console.log("formData:",N),x(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),x(!1),console.log("Response:"),console.log(c),e.showToastMessage("DeliveryNote Created Successfully!","success"),e.refreshList&&e.refreshList(),Pe(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){x(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating DeliveryNote!","danger")}))}function Qe(e){if(console.log("Inside Add product"),!N.store_id)return c.product_id="Please Select a Store and try again",void r(Object(h.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(h.a)({},c));var t=function(e,t){if(!t)return"";for(var a=0;a<t.length;a++)if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("productStores[i].retail_unit_price:",t[a].retail_unit_price),t[a];return console.log("not matched"),""}(N.store_id,e.stores);e.unit_price=t.retail_unit_price,e.purchase_unit_price=t.purchase_unit_price;var a=!1,s=-1,n=0;if(e.quantity=1,!function(e){for(var t=0;t<le.length;t++)if(le[t].product_id===e)return!0;return!1}(e.id)?n=parseFloat(e.quantity):(a=!0,s=function(e){for(var t=0;t<le.length;t++)if(le[t].product_id===e)return t;return!1}(e.id),n=parseFloat(le[s].quantity+e.quantity)),console.log("quantity:",n),c.quantity="",a&&(le[s].quantity=parseFloat(n)),!a){var o={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,stores:e.stores,unit:e.unit};e.unit_price&&(o.unit_price=parseFloat(e.unit_price),console.log("item.unit_price:",o.unit_price)),e.purchase_unit_price&&(o.purchase_unit_price=parseFloat(e.purchase_unit_price),console.log("item.purchase_unit_price",o.purchase_unit_price)),le.push(o)}console.log("selectedProducts:",le),de(Object(i.a)(le)),ht()}var We=Object(s.useState)(0),Ze=Object(o.a)(We,2),Xe=Ze[0],Je=Ze[1];var Ye=Object(s.useState)(0),$e=Object(o.a)(Ye,2),et=$e[0],at=$e[1];var st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],it=nt[1];var ot=Object(s.useState)(0),lt=Object(o.a)(ot,2),ut=lt[0],bt=lt[1];function ht(){!function(){Xe=0;for(var e=0;e<le.length;e++)Xe+=parseFloat(le[e].unit_price)*parseFloat(le[e].quantity);Xe=Xe.toFixed(2),Je(Xe)}(),N.is_discount_percent?N.discount_percent>=0&&Xe>0&&(N.discount=parseFloat(Xe*parseFloat(N.discount_percent/100)).toFixed(2),C(Object(h.a)({},N))):N.discount>=0&&Xe>0&&(ut=parseFloat(100*parseFloat(N.discount/Xe)).toFixed(2),bt(ut),N.discount_percent=ut,C(Object(h.a)({},N))),et=0,Xe>0&&(et=(parseFloat(parseFloat(N.vat_percent)/100)*(parseFloat(Xe)+parseFloat(N.shipping_handling_fees)-parseFloat(N.discount))).toFixed(2),console.log("vatPrice:",et)),at(et),ct=0,Xe>0&&(ct=(parseFloat(Xe)+parseFloat(N.shipping_handling_fees)-parseFloat(N.discount)+parseFloat(et)).toFixed(2)),it(ct)}var pt=Object(s.useRef)();var mt=Object(s.useRef)();var xt=Object(s.useRef)();function Ot(){xt.current.open()}var ft=Object(s.useRef)();var gt=Object(s.useRef)();var vt=Object(s.useRef)();function _t(e){vt.current.open(e)}var yt=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ke,{ref:vt,openUpdateForm:function(e){xt.current.open(e)},openCreateForm:Ot}),Object(v.jsx)(tt,{ref:xt,showToastMessage:e.showToastMessage,openDetailsView:_t}),Object(v.jsx)(Ue,{ref:yt}),Object(v.jsx)(P,{ref:pt,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:mt,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:ft,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:gt,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Ae,size:"xl",fullscreen:!0,onHide:Pe,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:N.id?"Update DeliveryNote #"+N.code:"Create New DeliveryNote"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){var e={};(e=JSON.parse(JSON.stringify(N))).products=le,e.net_total=ct,e.vat_price=et,e.total=Xe,yt.current.open(e)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0 \xa0\xa0 \xa0\xa0",N.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){Pe(),e.openDetailsView(N.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:Ge,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",N.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:Pe,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:Ge,children:[f.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:E,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),N.store_id="",C(Object(h.a)({},N)),void M([]);N.store_id=e[0].id,C(Object(h.a)({},N)),M(e)},options:T,placeholder:"Select Store",selected:F,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){pt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]}),N.store_id&&!c.store_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",isLoading:Y,isInvalid:!!c.customer_id,onChange:function(e){if(c.customer_id="",r(c),0===e.length)return c.customer_id="Invalid Customer selected",r(c),N.customer_id="",C(Object(h.a)({},N)),void K([]);N.customer_id=e[0].id,C(Object(h.a)({},N)),K(e)},options:H,placeholder:"Type name or mob",selected:Z,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){mt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.customer_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.customer_id]}),N.customer_id&&!c.customer_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(jt.DebounceInput,{minLength:3,debounceTimeout:500,placeholder:"Scan Barcode",className:"form-control",value:N.barcode,onChange:function(e){return function(e){return qe.apply(this,arguments)}(e.target.value)}}),c.bar_code&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.bar_code]}),N.bar_code&&!c.bar_code&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("label",{className:"form-label",children:"Product*"}),Object(v.jsx)(q.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Be,isLoading:be,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(h.a)({},c)),N.store_id&&Qe(e[0]),Ve(!1)},options:ae,selected:re,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){He.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:Ot,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):null,re[0]&&re[0].id&&!c.product_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(v.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(v.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(v.jsx)("th",{style:{width:"34%"},className:"text-start",children:"Name"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Qty"})]})}),Object(v.jsx)("tbody",{children:le.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=le.indexOf(e);t>-1&&le.splice(t,1),de(Object(i.a)(le)),ht()}(e)},children:Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){_t(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(v.jsxs)("td",{style:{width:"155px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(h.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be > 0",le[t].quantity=a.target.value,de(Object(i.a)(le)),r(Object(h.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),ht(),le[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",le[t].quantity),de(Object(i.a)(le)),void ht()):(c["quantity_"+t]="Invalid Quantity",le[t].quantity=a.target.value,de(Object(i.a)(le)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsxs)("span",{className:"input-group-text",id:"basic-addon2",children:[" ",le[t].unit?le[t].unit:"Units"]})]}),c["quantity_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]})]},t)})).reverse()})]})}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:Pe,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:Ge,children:j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Processing...":N.id?"Update":"Create"})]})]})})]})]})})),mt=pt;var xt=function(e){var t=new y.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(s.useState)(0),p=Object(o.a)(h,2),x=p[0],f=p[1],g=Object(s.useState)([]),_=Object(o.a)(g,2),N=_[0],C=_[1],S=Object(s.useState)(5),k=Object(o.a)(S,2),T=k[0],R=k[1],D=Object(s.useState)(1),A=Object(o.a)(D,2),F=A[0],P=A[1],M=Object(s.useState)(0),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(0),U=Object(o.a)(E,2),B=U[0],V=U[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Z=G[1],X=Object(s.useState)(0),J=Object(o.a)(X,2),Y=J[0],$=J[1],ee=Object(s.useState)(!1),te=Object(o.a)(ee,2),ae=(te[0],te[1],new Date),se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=(ne[0],ne[1]),re=Object(s.useState)(""),ie=Object(o.a)(re,2),oe=(ie[0],ie[1]),le=Object(s.useState)(""),de=Object(o.a)(le,2),je=(de[0],de[1]),ue=Object(s.useState)(!1),be=Object(o.a)(ue,2),he=be[0],pe=be[1],me=Object(s.useState)(""),xe=Object(o.a)(me,2),Oe=xe[0],fe=xe[1],ge=Object(s.useState)(""),ve=Object(o.a)(ge,2),_e=ve[0],ye=ve[1],Ne=Object(s.useState)(""),Ce=Object(o.a)(Ne,2),Se=Ce[0],we=Ce[1],ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),Re=Te[0],De=Te[1],Ae=Object(s.useState)(!1),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Me=Fe[1],Ie=Object(s.useState)([]),Le=Object(o.a)(Ie,2),ze=Le[0],Ee=Le[1],Ue=Object(s.useState)([]),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)([]),Qe=Object(o.a)(qe,2),We=Qe[0],Ze=Qe[1],Ke=Object(s.useState)([]),Xe=Object(o.a)(Ke,2),Je=Xe[0],Ye=Xe[1],$e=Object(s.useState)([]),et=Object(o.a)($e,2),tt=(et[0],et[1]);Object(s.useEffect)((function(){gt()}),[]);var at=Object(s.useState)({}),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)("created_at"),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)("-"),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1];function ht(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function pt(){return(pt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=ht({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ee(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return(xt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),Ee([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=ht({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,Ze(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){if(!t)return F=1,nt[e]="",P(F),void gt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(ce(t),oe(""),je(""),nt.from_date="",nt.to_date="",nt[e]=t,console.log("Value:",t)):"from_date"===e?(oe(t),ce(""),nt.date="",nt[e]=t):"to_date"===e?(je(t),ce(""),nt.date="",nt[e]=t):"created_at"===e&&(fe(t),ye(""),we(""),nt.created_at_from="",nt.created_at_to="",nt[e]=t),"created_at_from"===e?(ye(t),fe(""),nt.created_at="",nt[e]=t):"created_at_to"===e&&(we(t),fe(""),nt.created_at="",nt[e]=t),P(F=1),gt()}function ft(e,t){"created_by"===e?Ye(t):"customer_id"===e?He(t):"status"===e&&tt(t),nt[e]=Object.values(t).map((function(e){return e.id})).join(","),P(F=1),gt()}function gt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(nt.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();nt.timezone_offset=parseFloat(a/60),ct(nt);var s=ht(nt);""!==s&&(s="&"+s),De(!0),fetch("/v1/delivery-note?select=id,code,created_by_name,customer_name,created_at"+s+"&sort="+ut+ot+"&page="+F+"&limit="+T,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:De(!1),Me(!1),C(n.result),o=parseInt((n.total_count+T-1)/T),z(o),B=n.total_count,V(B),$((F-1)*T),Z(n.result.length),c=n.meta.total_deliverynote,r(c),d=n.meta.profit,j(d),x=n.meta.loss,f(x);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){De(!1),Me(!1),console.log(e)}))}function vt(e){lt(ot=e),bt(ut="-"===ut?"":"-"),gt()}function _t(e){F=parseInt(e),P(F),gt()}function yt(e){St.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var St=Object(s.useRef)();function wt(){St.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(mt,{ref:St,refreshList:gt,showToastMessage:e.showToastMessage,openDetailsView:Ct}),Object(v.jsx)(Ge,{ref:Nt,openUpdateForm:yt,openCreateForm:wt}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col"})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Delivery Notes"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:wt,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===B&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Delivery Notes to display"})})}),Object(v.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Me(!0),gt()},variant:"primary",disabled:Pe,children:[Pe?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Re&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:B>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:T,onChange:function(e){var t;t=e.target.value,T=parseInt(t),R(T),gt()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{border:"solid 0px"},children:L?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){_t(e.selected+1)},pageRangeDisplayed:5,pageCount:L,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:F-1}):""})}),Object(v.jsx)("div",{className:"row",children:B>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",Y+1,"-",Y+W," of"," ",B]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",F," of ",L]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("code")},children:["ID","code"===ot&&"-"===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ot&&""===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("customer_name")},children:["Customer","customer_name"===ot&&"-"===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===ot&&""===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_by")},children:["Created By","created_by"===ot&&"-"===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===ot&&""===ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_at")},children:["Created At","created_at"===ot&&"-"===ut?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ot&&""===ut?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return t="code",a=e.target.value,nt[t]=a,P(F=1),void gt();var t,a},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){ft("customer_id",e)},options:ze,placeholder:"name or mob",selected:Ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){ft("created_by",e)},options:We,placeholder:"Select Users",selected:Je,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Oe,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ot("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return pe(!he)},children:he?"Less..":"More.."}),Object(v.jsx)("br",{}),he?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:_e,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ot("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Se,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ot("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:N&&N.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsx)("ul",{className:"dropdown-menu"})]})]},e.code)}))})]})}),L?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){_t(e.selected+1)},pageRangeDisplayed:5,pageCount:L,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:F-1}):""]})})})})]})]})},Ot=(a(509),Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){be=[],he([]),F=[],M([]),K=[],X([]),g.get("user_id")&&(ye=[{id:g.get("user_id"),name:g.get("user_name")}],C.delivered_by=g.get("user_id"),S(Object(h.a)({},C)),Ne(Object(i.a)(ye))),g.get("store_id")&&(C.store_id=g.get("store_id"),C.store_name=g.get("store_name"),C.vat_percent=parseFloat(g.get("vat_percent")),console.log("formData.store_id:",C.store_id)),C.id=void 0,C.discount=0,C.discount_percent=0,C.shipping_handling_fees=0,C.partial_payment_amount=0,C.status="delivered",C.payment_method="",C.payment_status="",C.date_str=new Date,e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(C=n.result).date_str=n.result.date,C.is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,be=C.products,he(Object(i.a)(be)),o=[{id:C.store_id,name:C.store_name}],l=C.customer_name,d=[{id:C.customer_id,name:C.customer_name,search_label:l}],M([].concat(o)),X([].concat(d)),Ot(),S(Object(h.a)({},C));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(e),S(Object(h.a)({},C)),Ot(),Ie(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-order.123");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1],g=new y.a,_=Object(s.useState)({vat_percent:15,discountValue:0,discount:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"delivered",payment_status:"",payment_method:"",price_type:"retail",useLaserScanner:!1,store_id:""}),N=Object(o.a)(_,2),C=N[0],S=N[1],w=Object(s.useState)([]),k=Object(o.a)(w,2),T=k[0],R=k[1],D=Object(s.useState)([]),A=Object(o.a)(D,2),F=A[0],M=A[1],I=Object(s.useState)(!1),L=Object(o.a)(I,2),E=L[0],U=L[1],B=Object(s.useState)([]),V=Object(o.a)(B,2),H=V[0],G=V[1],W=Object(s.useState)([]),Z=Object(o.a)(W,2),K=Z[0],X=Z[1],J=Object(s.useState)(!1),Y=Object(o.a)(J,2),ee=Y[0],te=Y[1],ae=Object(s.useState)([]),se=Object(o.a)(ae,2),ce=se[0],re=se[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)([]),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=(ge[0],ge[1],Object(s.useState)([])),_e=Object(o.a)(ve,2),ye=_e[0],Ne=_e[1],Ce=Object(s.useState)(!1),Se=Object(o.a)(Ce,2),we=(Se[0],Se[1],Object(s.useState)([])),ke=Object(o.a)(we,2),Te=(ke[0],ke[1],Object(s.useState)([])),Re=Object(o.a)(Te,2),De=(Re[0],Re[1],Object(s.useState)(!1)),Ae=Object(o.a)(De,2),Fe=(Ae[0],Ae[1],Object(s.useState)(!1)),Pe=Object(o.a)(Fe,2),Me=Pe[0],Ie=Pe[1];function Le(){Ie(!1)}function ze(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function Ee(){return(Ee=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),R([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ze({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name",U(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,R(c.result),U(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return(Ue=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),G([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ze({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",te(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,G(c.result),te(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){if(!t)return"";for(var a=0;a<t.length;a++){if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("productStores[i].retail_unit_price:",t[a].retail_unit_price),t[a];console.log("not matched")}return""}Object(s.useEffect)((function(){g.get("access_token")||(window.location="/")}));var Ve=Object(s.useState)(!1),He=Object(o.a)(Ve,2),qe=He[0],Ge=He[1];function Qe(){return(Qe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),re([]),console.log("searchTerm:"+t),t){e.next=7;break}return qe=!1,Ge(!1),e.abrupt("return");case 7:return a={name:t},g.get("store_id")&&(a.store_id=g.get("store_id")),""!==(s=ze(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,item_code,bar_code,part_number,name,stores,unit,part_number,name_in_arabic",Oe(!0),e.next=16,fetch("/v1/product?select=id,item_code,bar_code,part_number,name,stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 16:return c=e.sent,e.next=19,c.json();case 19:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=26;break}return qe=!1,Ge(!1),Oe(!1),e.abrupt("return");case 26:qe=!0,Ge(!0),re(i),Oe(!1);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.barcode=t,S(Object(h.a)({},C)),console.log("Inside getProductByBarCode"),c.bar_code="",r(Object(h.a)({},c)),console.log("barcode:"+C.barcode),C.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===C.barcode.length&&(C.barcode=C.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+C.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(i=n.result)?Je(i):(c.bar_code="Invalid Barcode:"+C.barcode,r(Object(h.a)({},c))),C.barcode="",S(Object(h.a)({},C));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(t){t.preventDefault(),C.products=[];for(var a=0;a<be.length;a++)C.products.push({product_id:be[a].product_id,quantity:parseFloat(be[a].quantity),unit_price:parseFloat(be[a].unit_price),unit:be[a].unit});if(!C.shipping_handling_fees&&0!==C.shipping_handling_fees)return c.shipping_handling_fees="Invalid shipping / handling fees",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&!C.partial_payment_amount&&0!==C.partial_payment_amount)return c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount<=0)return c.partial_payment_amount="Partial payment should be > 0 ",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount>=ut)return c.partial_payment_amount="Partial payment cannot be >= "+ut,void r(Object(h.a)({},c));if(!C.discount&&0!==C.discount)return c.discount="Invalid discount",void r(Object(h.a)({},c));if(!C.discount_percent&&0!==C.discount_percent)return c.discount_percent="Invalid discount percent",void r(Object(h.a)({},c));if(parseFloat(C.discount_percent)>100)return c.discount_percent="Discount percent cannot be > 100",void r(Object(h.a)({},c));if(!C.vat_percent&&0!==C.vat_percent)return c.vat_percent="Invalid vat percent",void r(Object(h.a)({},c));C.discount=parseFloat(C.discount),C.discount_percent=parseFloat(C.discount_percent),C.vat_percent=parseFloat(C.vat_percent),C.partial_payment_amount=parseFloat(C.partial_payment_amount),g.get("store_id")&&(C.store_id=g.get("store_id"));var s="/v1/order",n="POST";C.id&&(s="/v1/order/"+C.id,n="PUT");var i={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.get("access_token")},body:JSON.stringify(C)};console.log("formData:",C),f(!0),fetch(s,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),f(!1),console.log("Response:"),console.log(c),e.showToastMessage("Order Created Successfully!","success"),e.refreshList&&e.refreshList(),Le(),C.products=[],be=[],he([]),C.customer_id="",X([]),S(Object(h.a)({},C)),Ot(),o=c.result.id,ft.current.open(o);case 25:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){f(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Order!","danger")}))}function Xe(e,t){if(!t)return 0;for(var a=0;a<t.length;a++)if(t[a].store_id===e)return t[a].stock;return 0}function Je(e){if(console.log("Inside Add product"),!C.store_id)return c.product_id="Please Select a Store and try again",void r(Object(h.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(h.a)({},c));var t=Be(C.store_id,e.stores);if(e.unit_price=t.retail_unit_price,c.unit_price="",!e.unit_price)return c.unit_price="Invalid Unit Price",void r(Object(h.a)({},c));var a=!1,s=!1,n=0;e.quantity=1,!function(e){for(var t=0;t<be.length;t++)if(be[t].product_id===e)return!0;return!1}(e.id)?n=parseFloat(e.quantity):(a=!0,s=function(e){for(var t=0;t<be.length;t++)if(be[t].product_id===e)return t;return!1}(e.id),n=parseFloat(be[s].quantity+e.quantity)),console.log("quantity:",n),c.quantity="";var o=Xe(C.store_id,e.stores);o<n&&(!1===s&&(s=be.length),c["quantity_"+s]="Warning: Available stock is "+o,console.log("errors:",c),r(Object(h.a)({},c))),a&&(be[s].quantity=parseFloat(n)),a||be.push({product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,stores:e.stores,unit_price:parseFloat(e.unit_price).toFixed(2),unit:e.unit}),he(Object(i.a)(be)),Ot()}var Ye=Object(s.useState)(0),$e=Object(o.a)(Ye,2),et=$e[0],at=$e[1];var st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],it=nt[1];var ot=Object(s.useState)(0),lt=Object(o.a)(ot,2),ut=lt[0],bt=lt[1];var ht=Object(s.useState)(0),pt=Object(o.a)(ht,2),mt=pt[0],xt=pt[1];function Ot(){!function(){et=0;for(var e=0;e<be.length;e++)et+=parseFloat(be[e].unit_price)*parseFloat(be[e].quantity);et=et.toFixed(2),at(et)}(),C.is_discount_percent?C.discount_percent>=0&&et>0&&(C.discount=parseFloat(et*parseFloat(C.discount_percent/100)).toFixed(2),S(Object(h.a)({},C))):C.discount>=0&&et>0&&(mt=parseFloat(100*parseFloat(C.discount/et)).toFixed(2),xt(mt),C.discount_percent=mt,S(Object(h.a)({},C))),ct=0,et>0&&(ct=(parseFloat(parseFloat(C.vat_percent)/100)*(parseFloat(et)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount))).toFixed(2),console.log("vatPrice:",ct)),it(ct),ut=0,et>0&&(ut=(parseFloat(et)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount)+parseFloat(ct)).toFixed(2)),bt(ut)}var ft=Object(s.useRef)();var gt=Object(s.useRef)();var vt=Object(s.useRef)();var _t=Object(s.useRef)();var yt=Object(s.useRef)();var Nt=Object(s.useRef)();var Ct=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne,{ref:ft,openCreateForm:e.openCreateForm}),Object(v.jsx)(Ke,{ref:Ct}),Object(v.jsx)(P,{ref:gt,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:vt,showToastMessage:e.showToastMessage}),Object(v.jsx)(tt,{ref:_t,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:yt,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:Nt,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Me,size:"xl",fullscreen:!0,onHide:Le,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:C.id?"Update Sales Order #"+C.code:"Create New Sales Order"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsx)($,{}),Object(v.jsx)(m.a,{variant:"primary",onClick:Ze,children:j?C.id?"Updating....":"Creating..":C.id?"Update":"Create"}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:Le,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:function(e){e.preventDefault(),Ze(e)},children:[g.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:E,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",c.product_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),S(Object(h.a)({},C)),void M([]);if(C.store_id=e[0].id,S(Object(h.a)({},C)),console.log("formData.store_id:",C.store_id),F=e,M(Object(i.a)(e)),C.store_id){if(le[0]&&le[0].stores&&le[0].quantity){var t=0;le[0].stores&&(t=Xe(C.store_id,le[0].stores)),t<parseFloat(le[0].quantity)&&(F[0]?c.product_id="Stock is only "+t+" in Store: "+F[0].name+" for this product":c.product_id="Stock is only "+t+" in Selected Store for this product",r(Object(h.a)({},c)))}else if(le[0]&&le[0].stores){0===Xe(C.store_id,le[0].stores)&&(F[0]?c.product_id="This product is not available in store: "+F[0].name:c.product_id="This product is not available in selected store.",r(Object(h.a)({},c)))}le[0]&&(le[0].unit_price=Be(C.store_id,le[0].stores),le[0].quantity||(le[0].quantity=1),de(Object(i.a)(le)))}},options:T,placeholder:"Select Store",selected:F,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ee.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){gt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",isLoading:ee,isInvalid:!!c.customer_id,onChange:function(e){if(c.customer_id="",r(c),0===e.length)return c.customer_id="Invalid Customer selected",r(c),C.customer_id="",S(Object(h.a)({},C)),void X([]);C.customer_id=e[0].id,S(Object(h.a)({},C)),X(e)},options:H,placeholder:"Type name or mob",selected:K,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ue.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){vt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.customer_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.customer_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(jt.DebounceInput,{minLength:3,debounceTimeout:100,placeholder:"Scan Barcode",className:"form-control barcode",value:C.barcode,onChange:function(e){return function(e){return We.apply(this,arguments)}(e.target.value)}}),c.bar_code&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.bar_code]})]})]}),Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("label",{className:"form-label",children:"Product Search*"}),Object(v.jsx)(q.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:qe,isLoading:xe,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(h.a)({},c)),C.store_id&&Je(e[0]),Ge(!1)},options:ce,selected:le,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Qe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){_t.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):""]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(v.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(v.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(v.jsx)("th",{style:{width:"30%"},className:"text-start",children:"Name"}),Object(v.jsx)("th",{style:{width:"15%"},children:"Qty"}),Object(v.jsx)("th",{style:{width:"18%"},children:"Unit Price"}),Object(v.jsx)("th",{style:{width:"32%"},children:"Price"})]})}),Object(v.jsx)("tbody",{children:be.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=be.indexOf(e);t>-1&&be.splice(t,1),he(Object(i.a)(be)),Ot()}(e)},children:Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){var t;t=e.product_id,Ct.current.open(t)},children:e.name}),Object(v.jsxs)("td",{children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control text-end",placeholder:"Quantity",onChange:function(a){if(c["quantity_"+t]="",r(Object(h.a)({},c)),!a.target.value)return c["quantity_"+t]="Invalid Quantity",be[t].quantity=a.target.value,he(Object(i.a)(be)),r(Object(h.a)({},c)),void console.log("errors:",c);if(0===a.target.value)return c["quantity_"+t]="Quantity should be > 0",be[t].quantity=a.target.value,he(Object(i.a)(be)),r(Object(h.a)({},c)),void console.log("errors:",c);e.quantity=parseFloat(a.target.value),be[t].quantity=parseFloat(a.target.value),Ot();var s=0;if(be[t].stores&&(s=Xe(C.store_id,be[t].stores)),s<parseFloat(a.target.value)&&be[t].stores)return c["quantity_"+t]=" Warning: Available stock is "+s,void r(Object(h.a)({},c));be[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",be[t].quantity),he(Object(i.a)(be)),Ot()}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:be[t].unit?be[t].unit:"Units"})]}),c["quantity_"+t]&&Object(v.jsx)("div",{style:{color:"red"},children:c["quantity_"+t]})]}),Object(v.jsxs)("td",{children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.unit_price,className:"form-control text-end",placeholder:"Unit Price",onChange:function(e){return c["unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["unit_price_"+t]="Unit Price should be > 0",be[t].unit_price=parseFloat(e.target.value),he(Object(i.a)(be)),r(Object(h.a)({},c)),void console.log("errors:",c)):(be[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",be[t].unit_price),he(Object(i.a)(be)),void Ot()):(c["unit_price_"+t]="Invalid Unit Price",be[t].unit_price=parseFloat(e.target.value),he(Object(i.a)(be)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["unit_price_"+t]]})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(v.jsx)("div",{className:"table-responsive",children:Object(v.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-end",style:{width:"200px"},children:Object(v.jsx)(x.a,{value:et,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),c.shipping_handling_fees="",r(Object(h.a)({},c)),void Ot()):parseFloat(e.target.value)<0?(C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),c.shipping_handling_fees="Shipping / Handling Fees should be > 0",r(Object(h.a)({},c)),void Ot()):e.target.value?(c.shipping_handling_fees="",r(Object(h.a)({},c)),C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),void Ot()):(C.shipping_handling_fees="",c.shipping_handling_fees="Invalid Shipping / Handling Fees",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}})," SAR",c.shipping_handling_fees&&Object(v.jsx)("div",{style:{color:"red"},children:c.shipping_handling_fees})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount  ",Object(v.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:C.discount_percent,onChange:function(e){return C.is_discount_percent=!0,0===parseFloat(e.target.value)?(C.discount_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),c.discount_percent="",r(Object(h.a)({},c)),void Ot()):parseFloat(e.target.value)<0?(C.discount_percent=parseFloat(e.target.value),C.discount=0,S(Object(h.a)({},C)),c.discount_percent="Discount percent should be >= 0",r(Object(h.a)({},c)),void Ot()):e.target.value?(c.discount_percent="",c.discount="",r(Object(h.a)({},c)),C.discount_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),void Ot()):(C.discount_percent="",C.discount=0,c.discount_percent="Invalid Discount Percent",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.discount_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount_percent})]}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.discount,onChange:function(e){return C.is_discount_percent=!1,0===parseFloat(e.target.value)?(C.discount=parseFloat(e.target.value),S(Object(h.a)({},C)),c.discount="",r(Object(h.a)({},c)),void Ot()):parseFloat(e.target.value)<0?(C.discount=parseFloat(e.target.value),C.discount_percent=0,S(Object(h.a)({},C)),c.discount="Discount should be >= 0",r(Object(h.a)({},c)),void Ot()):e.target.value?(c.discount="",c.discount_percent="",r(Object(h.a)({},c)),C.discount=parseFloat(e.target.value),S(Object(h.a)({},C)),void Ot()):(C.discount="",C.discount_percent=0,c.discount="Invalid Discount",S(Object(h.a)({},C)),Ot(),void r(Object(h.a)({},c)))}})," SAR",c.discount&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:[" VAT  ",Object(v.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:C.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(C.vat_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),c.vat_percent="",r(Object(h.a)({},c)),void Ot()):parseFloat(e.target.value)<0?(C.vat_percent=parseFloat(e.target.value),it(ct=0),S(Object(h.a)({},C)),c.vat_percent="Vat percent should be >= 0",r(Object(h.a)({},c)),void Ot()):e.target.value?(c.vat_percent="",r(Object(h.a)({},c)),C.vat_percent=e.target.value,Ot(),S(Object(h.a)({},C)),void console.log(C)):(C.vat_percent="",it(ct=0),c.vat_percent="Invalid vat percent",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.vat_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.vat_percent})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:ct,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-end",children:Object(v.jsx)(x.a,{value:ut,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})})}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.status,onChange:function(e){if(console.log("Inside onchange status"),!e.target.value)return c.status="Invalid Status",void r(Object(h.a)({},c));c.status="",r(Object(h.a)({},c)),C.status=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"order_placed",children:"Order Placed"}),Object(v.jsx)("option",{value:"delivered",children:"Delivered"}),Object(v.jsx)("option",{value:"pending",children:"Pending"}),Object(v.jsx)("option",{value:"cancelled",children:"Cancelled"}),Object(v.jsx)("option",{value:"dispatched",children:"Dispatched"})]}),c.status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.status]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return c.status="Invalid Payment Method",void r(Object(h.a)({},c));c.payment_method="",r(Object(h.a)({},c)),C.payment_method=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"",children:"Select"}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),c.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_method]})]})]}),C.id?"":Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_status,onChange:function(e){if(console.log("Inside onchange payment Status"),!e.target.value)return c.payment_status="Invalid Payment Status",C.payment_status="",S(Object(h.a)({},C)),void r(Object(h.a)({},c));c.payment_status="",r(Object(h.a)({},c)),C.payment_status=e.target.value,"paid_partially"!==C.payment_status&&(C.partial_payment_amount=0),S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"",children:"Select"}),Object(v.jsx)("option",{value:"paid",children:"Paid"}),Object(v.jsx)("option",{value:"not_paid",children:"Not Paid"}),Object(v.jsx)("option",{value:"paid_partially",children:"Paid Partially"})]}),c.payment_status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_status]})]})]}),C.id||"paid_partially"!==C.payment_status?"":Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Patial Payment Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:C.partial_payment_amount,onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?(C.partial_payment_amount=parseFloat(e.target.value),c.partial_payment_amount="",C.partial_payment_amount>=ut?(c.partial_payment_amount="Partial payment cannot be >= "+ut,void r(Object(h.a)({},c))):(r(Object(h.a)({},c)),S(Object(h.a)({},C)),void console.log(C))):(C.partial_payment_amount=e.target.value,c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Amount"}),c.partial_payment_amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.partial_payment_amount]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:C.date_str?new Date(C.date_str):null,value:C.date_str?Object(O.default)(new Date(C.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),C.date_str=e,S(Object(h.a)({},C))}}),c.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:Le,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:Ze,children:j?C.id?"Updating....":"Creating..":C.id?"Update":"Create"})]})]})})]})]})}))),ft=Ot,gt=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},children:[Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(v.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(v.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(v.jsx)("img",{width:"100",height:"100",src:"https://startpos-api.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h4",{style:{fontSize:"4mm"},children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(v.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(v.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("u",{children:Object(v.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"SALES RETURN INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"})})})}),Object(v.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Sales Return: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Sales Return Date: "}),e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Order: "}),"#",e.model.order_code?e.model.order_code:"<ORDER_ID_NUMBER>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"<CUSTOMER_NAME>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"<CUSTOMER_VAT_NO>"]})]})}),Object(v.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:t.firstPage&&e.model.QRImageData?Object(v.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"100px",height:"92px"},alt:"Invoice QR Code"}):""}),Object(v.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(v.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:" :\u0639\u0627\u0626\u062f \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0639\u0648\u062f\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a: "}),e.model.date?n(e.model.date):"<DATE_ARABIC>"]}),Object(v.jsxs)("li",{children:[e.model.order_code?e.model.order_code:"<ORDER_ID_NUMBER_ARABIC>",Object(v.jsx)("strong",{children:" :\u0637\u0644\u0628"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(v.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",bsalesreturnRadius:"6px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(v.jsx)("li",{children:"SI No."})]})}),Object(v.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(v.jsx)("li",{children:"Part Number"})]})}),Object(v.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"15%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(v.jsx)("li",{children:"Description"})]})}),Object(v.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(v.jsx)("li",{children:"Qty"})]})}),Object(v.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"10%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(v.jsx)("li",{children:"Unit Price"})]})}),Object(v.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(v.jsx)("li",{children:"Total Amount"})]})})]})}),Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:s+1+a*e.model.pageSize}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:t.part_number?t.part_number:""}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(v.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.quantity.toFixed(2),"  ",t.unit?t.unit:""]}),Object(v.jsx)("td",{className:"text-end",style:{paddingBottom:"0px",marginTop:"0px"},children:Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},className:"text-end",children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(v.jsxs)("tfoot",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(v.jsx)("li",{children:"Total:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0636\u0631\u064a\u0628\u0629:"}),Object(v.jsx)("li",{children:"VAT:"})]})}),Object(v.jsxs)("th",{className:"text-center",colSpan:"1",children:[e.model.vat_percent,"%"]}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062e\u0635\u0645:"}),Object(v.jsx)("li",{children:"Discount:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(v.jsx)("li",{children:"Net Total:"})]})}),Object(v.jsx)("th",{className:"text-center",colSpan:"2",children:Object(v.jsx)(x.a,{value:e.model.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(v.jsx)("li",{children:"In Words:"})]})}),Object(v.jsx)("th",{colSpan:"5",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(v.jsx)("li",{children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(v.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(v.jsxs)("thead",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(v.jsx)("li",{children:"Received By:"})]})}),Object(v.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.received_by_user?e.model.received_by_user.name:null]}),Object(v.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(v.jsx)("li",{children:"Returned By:"})]})}),Object(v.jsx)("th",{style:{width:"37%"}})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{style:{width:"37%",height:"40px"},children:e.model.delivered_by_signature?Object(v.jsx)("img",{alt:"Signature",src:"https://startpos-api.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(v.jsx)("li",{children:"Signature:"})]})}),Object(v.jsx)("th",{})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(v.jsx)("li",{children:e.model.signature_date_str?e.model.signature_date_str:""})]})}),Object(v.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(v.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(v.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(v.jsx)("li",{children:"Date:"})]})}),Object(v.jsx)("th",{})]})]})})]})})}),Object(v.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(v.jsx)("div",{className:"col-md-2 text-start"}),Object(v.jsx)("div",{className:"col-md-8 text-center",children:Object(v.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(v.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(v.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(v.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(v.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),vt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:r.created_at,invoiceTotal:r.total,invoiceVatTotal:r.vat_price}),e.next=17,l.render();case 17:r.QRImageData=e.sent,i(Object(h.a)({},r));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.received_by&&function(e){console.log("inside get User(Received by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.received_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by),r.received_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.received_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length);d++);s+=1057,o+=12,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){_="",r.code&&(_+="Quotation #: "+r.code+"<br />");r.store&&(_+="Store: "+r.store.name+"<br />");r.customer&&(_+="Customer: "+r.customer.name+"<br />");r.net_total&&(_+="Net Total: "+r.net_total+"<br />");C(_+="Store: Test <br />"),r.qr_content=_,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}var f=Object(s.useState)(""),g=Object(o.a)(f,2),_=g[0],C=g[1];var S=Object(s.useRef)();var w=Object(N.useReactToPrint)({content:function(){return S.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:O,animation:!1,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Sales Return Invoice Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:S,children:Object(v.jsx)(gt,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),_t=vt,yt=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(v.jsx)(v.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(v.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px"},children:[Object(v.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"270px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"RETURN INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(O.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(v.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(v.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_no?t.part_no:""})}),Object(v.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(v.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(v.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(v.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(v.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm"},children:Object(v.jsx)(x.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(v.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(v.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(v.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(v.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(v.jsx)(x.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:g()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:g()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(v.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.received_by_user?e.model.received_by_user.name:""}),t.lastPage?Object(v.jsx)("div",{style:{position:"absolute",left:"575px",top:622+t.top+"px"},children:e.model.QRImageData&&Object(v.jsx)("img",{style:{width:"182px",height:"174px"},src:e.model.QRImageData,alt:"Invoice QR Code"})}):""]},a)}))})})),Nt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(h.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(O.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new J.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(h.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.received_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by),r.received_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(h.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){C="",r.code&&(C+="Quotation #: "+r.code+"<br />");r.store&&(C+="Store: "+r.store.name+"<br />");r.customer&&(C+="Customer: "+r.customer.name+"<br />");r.net_total&&(C+="Net Total: "+r.net_total+"<br />");S(C+="Store: Test <br />"),r.qr_content=C,i(Object(h.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),x(!0),console.log("model:",r)}}}}));var a=new y.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],x=d[1];function f(){x(!1)}var g=Object(s.useState)(""),_=Object(o.a)(g,2),C=_[0],S=_[1];var w=Object(s.useRef)();var k=Object(N.useReactToPrint)({content:function(){return w.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,scrollable:!0,size:"xl",onHide:f,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Sales Return Invoice Preview"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:k,children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{ref:w,children:Object(v.jsx)(yt,{model:r})})}),Object(v.jsx)(p.a.Footer,{})]})})})),Ct=Nt,St=Object(s.forwardRef)((function(e,t){var a,n,c,r;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}};fetch("/v1/sales-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),d=n.result,j(Object(h.a)({},d));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:f.get("access_token")}},a="select=id,amount,method,store_name,sales_return_code,sales_return_id,created_by_name,created_at";f.get("store_id")&&(B.store_id=f.get("store_id"));B.sales_return_id=e,V(B);var s=(n=B,Object.keys(n).map((function(e){return"search[".concat(e,"]=").concat(n[e])})).join("&"));var n;""!==s&&(s="&"+s);fetch("/v1/sales-return-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:P(n.result),L=n.meta.total_payment,z(L);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),Q(!0))}}}));var i=Object(s.useState)({}),l=Object(o.a)(i,2),d=l[0],j=l[1],f=new y.a,g=Object(s.useState)(0),_=Object(o.a)(g,2),N=(_[0],_[1],Object(s.useState)(0)),C=Object(o.a)(N,2),S=(C[0],C[1],Object(s.useState)(0)),w=Object(o.a)(S,2),T=(w[0],w[1],Object(s.useState)(0)),R=Object(o.a)(T,2),D=(R[0],R[1],Object(s.useState)([])),A=Object(o.a)(D,2),F=A[0],P=A[1],M=Object(s.useState)(0),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)({}),U=Object(o.a)(E,2),B=U[0],V=U[1];var H=Object(s.useState)(!1),q=Object(o.a)(H,2),G=q[0],Q=q[1];function W(){Q(!1)}var Z=Object(s.useRef)();var K=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_t,{ref:Z}),Object(v.jsx)(Ct,{ref:K}),Object(v.jsxs)(p.a,{show:G,size:"xl",onHide:W,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of SalesReturn #",d.code]}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){K.current.open(d)},children:[Object(v.jsx)("i",{className:"bi bi-printer"})," Print"]})}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){Z.current.open(d)},children:[Object(v.jsx)("i",{className:"bi bi-display"})," E-Return Invoice"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:W,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Order ID: "}),Object(v.jsxs)("td",{children:[" ",d.order_code]}),Object(v.jsx)("th",{children:"Store: "}),Object(v.jsxs)("td",{children:[" ",d.store_name]}),Object(v.jsx)("th",{children:"Customer: "}),Object(v.jsxs)("td",{children:[" ",d.customer_name]}),Object(v.jsx)("th",{children:"Received by: "}),Object(v.jsxs)("td",{children:[" ",d.received_by_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date: "}),Object(v.jsxs)("td",{children:[" ",d.date]}),Object(v.jsx)("th",{children:"VAT %: "}),Object(v.jsxs)("td",{children:[" ",d.vat_percent,"%"]}),Object(v.jsx)("th",{children:"Discount: "}),Object(v.jsxs)("td",{children:[" ",d.discount," SAR"]}),Object(v.jsx)("th",{children:"Discount %: "}),Object(v.jsxs)("td",{children:[" ",d.discount_percent]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Status: "}),Object(v.jsxs)("td",{children:[" ",d.status]}),Object(v.jsx)("th",{children:"Created At: "}),Object(v.jsxs)("td",{children:[" ",d.created_at]}),Object(v.jsx)("th",{children:"Updated At: "}),Object(v.jsxs)("td",{children:[" ",d.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By: "}),Object(v.jsxs)("td",{children:[" ",d.created_by_name]}),Object(v.jsx)("th",{children:"Updated By: "}),Object(v.jsxs)("td",{children:[" ",d.updated_by_name]})]}),Object(v.jsxs)("tr",{children:[F.length>0?Object(v.jsx)("th",{children:"Payments"}):"",F.length>0?Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Payment Method"}),Object(v.jsx)("th",{children:"Created By"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{className:"text-center",children:F&&F.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Unit Price"}),Object(v.jsx)("th",{children:"Price"}),"true"===f.get("admin")?Object(v.jsx)("th",{children:"Purchase Unit Price"}):"","true"===f.get("admin")?Object(v.jsx)("th",{children:"Purchase Price"}):"","true"===f.get("admin")?Object(v.jsx)("th",{children:"Profit"}):"","true"===f.get("admin")?Object(v.jsx)("th",{children:"Loss"}):""]})}),Object(v.jsxs)("tbody",{children:[d.products&&d.products.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(v.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===f.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.loss,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]},t)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"3"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)("b",{})}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:d.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),"true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(a=d.profit)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(n=d.loss)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:d.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),"true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:d.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:d.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:d.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{colSpan:"2"}),"true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:"0.00 SAR"}):"","true"===f.get("admin")?Object(v.jsx)("td",{className:"text-center",children:"0.00 SAR"}):""]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:d.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===f.get("admin")?Object(v.jsx)("th",{colSpan:"2",className:"text-end",children:"Net Profit / Loss"}):"","true"===f.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(c=d.net_profit)||void 0===c?void 0:c.toFixed(2),displayType:"text",suffix:" SAR",thousandSeparator:!0,renderText:function(e,t){return e}})}):"","true"===f.get("admin")?Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:null===(r=d.loss)||void 0===r?void 0:r.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):""]})]})]})})]})]})]})})),wt=St,kt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){C={order_id:e,vat_percent:15,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"received",payment_status:"paid",payment_method:"cash",price_type:"retail"},g.get("user_id")&&(V=[{id:g.get("user_id"),name:g.get("user_name")}],C.received_by=g.get("user_id"),S(Object(h.a)({},C)),H(Object(i.a)(V))),S(Object(h.a)({},C)),e&&(ve(),function(e){console.log("inside get SalesReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:for(r({}),console.log("Response:"),console.log(n),o=n.result,l=o.products,M=[],d=0;d<l.length;d++)l[d].selected=!1,j=l[d].quantity-l[d].quantity_returned,l[d].quantity=j,j>0&&M.push(l[d]);console.log("selectedProducts:",M),I(Object(i.a)(M)),console.log("order.id:",o.id),C.id="",C.products=o.products,C.order_code=o.code,C.store_id=o.store_id,C.customer_id=o.customer_id,C.is_discount_percent=o.is_discount_percent,C.discount=o.discount-o.return_discount,C.is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,console.log("formData:",C),R=[{id:o.store_id,name:o.store_name}],D(R),console.log("selectedStores:",R),S(Object(h.a)({},C)),ve(),S(Object(h.a)({},C));case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(e)),ae(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1],g=new y.a,_=Object(s.useState)({order_id:"",vat_percent:15,discount:0,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"received",payment_status:"paid",payment_method:"cash",price_type:"retail"}),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)([]),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)([]),F=Object(o.a)(A,2),M=F[0],I=F[1],L=Object(s.useState)([]),E=Object(o.a)(L,2),U=(E[0],E[1],Object(s.useState)([])),B=Object(o.a)(U,2),V=B[0],H=B[1],q=Object(s.useState)(!1),G=Object(o.a)(q,2),W=(G[0],G[1],Object(s.useState)([])),Z=Object(o.a)(W,2),K=(Z[0],Z[1],Object(s.useState)([])),X=Object(o.a)(K,2),J=(X[0],X[1],Object(s.useState)(!1)),Y=Object(o.a)(J,2),$=(Y[0],Y[1],Object(s.useState)(!1)),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){ae(!1)}function ne(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",M),console.log("formData.order_id:",C.order_id),C.products=[];for(var a=0;a<M.length;a++)M[a].selected&&C.products.push({product_id:M[a].product_id,quantity:parseFloat(M[a].quantity),unit_price:parseFloat(M[a].unit_price),unit:M[a].unit});if(C.discount=parseFloat(C.discount),C.discount_percent=parseFloat(C.discount_percent),C.vat_percent=parseFloat(C.vat_percent),C.partial_payment_amount=parseFloat(C.partial_payment_amount),console.log("formData.discount:",C.discount),"paid_partially"===C.payment_status&&!C.partial_payment_amount&&0!==C.partial_payment_amount)return c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount<=0)return c.partial_payment_amount="Partial payment should be > 0 ",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount>=pe)return c.partial_payment_amount="Partial payment cannot be >= "+pe,void r(Object(h.a)({},c));if(!C.discountValue&&0!==C.discountValue)return c.discount="Invalid Discount",void r(Object(h.a)({},c));var s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.get("access_token")},body:JSON.stringify(C)};console.log("formData:",C),f(!0),fetch("/v1/sales-return",s).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),f(!1),console.log("Response:"),console.log(c),e.showToastMessage("SalesReturn Created Successfully!","success"),e.refreshList&&e.refreshList(),se(),o=c.result.id,_e.current.open(o);case 18:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){f(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesReturn!","danger")}))}Object(s.useEffect)((function(){g.get("access_token")||(window.location="/")}));var ce=Object(s.useState)(0),re=Object(o.a)(ce,2),ie=re[0],oe=re[1];var le=Object(s.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1];var be=Object(s.useState)(0),he=Object(o.a)(be,2),pe=he[0],me=he[1];var xe=Object(s.useState)(0),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1];function ve(){!function(){ie=0;for(var e=0;e<M.length;e++)M[e].selected&&(ie+=parseFloat(M[e].unit_price)*parseFloat(M[e].quantity));ie=ie.toFixed(2),oe(ie)}(),C.is_discount_percent?function(){if(!C.discountValue)return C.discount=0,C.discount_percent=0,void S(Object(h.a)({},C));C.discount_percent=C.discountValue,C.discount_percent>0&&ie>0&&(C.discount=parseFloat(ie*parseFloat(C.discount_percent/100)).toFixed(2)),S(Object(h.a)({},C))}():function(){if(!C.discountValue)return C.discount=0,C.discount_percent=0,void S(Object(h.a)({},C));C.discount=C.discountValue,C.discount>0&&ie>0&&(fe=parseFloat(100*parseFloat(C.discount/ie)).toFixed(2),ge(fe),C.discount_percent=fe,S(Object(h.a)({},C)))}(),je=(parseFloat(C.vat_percent)/100*parseFloat(ie-C.discount)).toFixed(2),console.log("vatPrice:",je),ue(je),ie>0&&(pe=(parseFloat(ie)-parseFloat(C.discount)+parseFloat(je)).toFixed(2),me(pe))}var _e=Object(s.useRef)();var ye=Object(s.useRef)(),Ne=Object(s.useRef)(),Ce=Object(s.useRef)(),Se=Object(s.useRef)();var we=Object(s.useRef)();var ke=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(wt,{ref:_e}),Object(v.jsx)(Ke,{ref:ke}),Object(v.jsx)(P,{ref:ye,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:Ne,showToastMessage:e.showToastMessage}),Object(v.jsx)(tt,{ref:Ce,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Se,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:we,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:te,size:"xl",onHide:se,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Create Sales Return for Sales Order #"+C.order_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsx)(_t,{}),Object(v.jsxs)(m.a,{variant:"primary",onClick:ne,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",C.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[0===M.length&&"Already Returned All sold products",M.length>0&&Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:ne,children:[Object(v.jsx)("h2",{children:"Select Products"}),c.product_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",height:"400px",overflowY:"scroll"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Select"}),Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Unit Price"}),Object(v.jsx)("th",{children:"Price"})]})}),Object(v.jsx)("tbody",{children:M.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"checkbox",checked:M[t].selected,onChange:function(e){console.log("e.target.value:",e.target.value),M[t].selected=!M[t].selected,I(Object(i.a)(M)),ve()}})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.product_id,ke.current.open(t)},children:e.name}),Object(v.jsxs)("td",{style:{width:"155px"},children:[Object(v.jsxs)("div",{class:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(h.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be >0",M[t].quantity=parseFloat(a.target.value),I(Object(i.a)(M)),r(Object(h.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),M[t].quantity=parseFloat(a.target.value),I(Object(i.a)(M)),void ve()):(c["quantity_"+t]="Invalid Quantity",M[t].quantity=a.target.value,I(Object(i.a)(M)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{class:"input-group-text",id:"basic-addon2",children:M[t].unit?M[t].unit:"Units"})]}),c["quantity_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{class:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.unit_price,className:"form-control",placeholder:"Unit Price",onChange:function(e){return c["unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["unit_price_"+t]="Invalid Unit Price should be > 0",M[t].unit_price=parseFloat(e.target.value),I(Object(i.a)(M)),r(Object(h.a)({},c)),void console.log("errors:",c)):(M[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",M[t].unit_price),I(Object(i.a)(M)),void ve()):(c["unit_price_"+t]="Invalid Unit Price",M[t].unit_price=e.target.value,I(Object(i.a)(M)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{class:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["unit_price_"+t]]})]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)}))})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"4"}),Object(v.jsx)("td",{className:"text-center"}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:ie,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"6",className:"text-end",children:["Discount(  ",C.discount_percent+"%",")"]}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:C.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:C.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"5"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:pe,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})})}),Object(v.jsxs)("div",{className:"col-md-4",children:[Object(v.jsx)("label",{className:"form-label",children:"Date*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:C.date_str?new Date(C.date_str):null,value:C.date_str?Object(O.default)(new Date(C.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),C.date_str=e,S(Object(h.a)({},C))}}),c.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]}),C.date_str&&!c.date_str&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-4",children:[Object(v.jsx)("label",{className:"form-label",children:"Discount*"}),Object(v.jsx)(at.a.Check,{type:"switch",id:"custom-switch",label:"%",value:C.is_discount_percent,checked:C.is_discount_percent?"checked":null,onChange:function(e){C.is_discount_percent=!C.is_discount_percent,console.log("e.target.value:",C.is_discount_percent),S(Object(h.a)({},C)),ve()}}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:C.discountValue,type:"number",onChange:function(e){return 0===parseFloat(e.target.value)?(C.discountValue=parseFloat(e.target.value),S(Object(h.a)({},C)),c.discount="",r(Object(h.a)({},c)),void ve()):e.target.value?(c.discount="",r(Object(h.a)({},c)),C.discountValue=e.target.value,S(Object(h.a)({},C)),void ve()):(C.discountValue="",c.discount="Invalid Discount",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Discount"}),c.discount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.discount]}),!c.discount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-4",children:[Object(v.jsx)("label",{className:"form-label",children:"Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.status,onChange:function(e){if(console.log("Inside onchange status"),!e.target.value)return c.status="Invalid Status",void r(Object(h.a)({},c));c.status="",r(Object(h.a)({},c)),C.status=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"received",children:"Received"}),Object(v.jsx)("option",{value:"salesreturn_placed",children:"Sales Return Placed"}),Object(v.jsx)("option",{value:"pending",children:"Pending"}),Object(v.jsx)("option",{value:"cancelled",children:"Cancelled"}),Object(v.jsx)("option",{value:"dispatched",children:"Dispatched"})]}),c.status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.status]}),C.status&&!c.status&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return c.status="Invalid Payment Method",void r(Object(h.a)({},c));c.payment_method="",r(Object(h.a)({},c)),C.payment_method=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),c.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_status,onChange:function(e){if(console.log("Inside onchange payment Status"),!e.target.value)return c.status="Invalid Payment Status",void r(Object(h.a)({},c));c.payment_status="",r(Object(h.a)({},c)),C.payment_status=e.target.value,"paid_partially"!==C.payment_status&&(C.partial_payment_amount=0),S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"paid",children:"Paid"}),Object(v.jsx)("option",{value:"not_paid",children:"Not Paid"}),Object(v.jsx)("option",{value:"paid_partially",children:"Paid Partially"})]}),c.payment_status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_status]})]})]}),"paid_partially"===C.payment_status?Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Patial Payment Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:C.partial_payment_amount,onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?(C.partial_payment_amount=parseFloat(e.target.value),c.partial_payment_amount="",C.partial_payment_amount>=pe?(c.partial_payment_amount="Partial payment cannot be >= "+pe,void r(Object(h.a)({},c))):(r(Object(h.a)({},c)),S(Object(h.a)({},C)),void console.log(C))):(C.partial_payment_amount=e.target.value,c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Amount"}),c.partial_payment_amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.partial_payment_amount]})]})]}):"",Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:se,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:ne,children:j?Object(v.jsx)(w.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":C.id?"Update":"Create"})]})]})]})]})]})})),Tt=kt,Rt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesCashDiscount");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Sales Cash Discount of Order #",c.order_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(e.order)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Order ID:"}),Object(v.jsxs)("td",{children:[" ",c.order_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Dt=Rt,At=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={},t&&(L.order_id=t.id,L.order_code=t.code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/sales-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),L.parent_id&&(R=[{id:L.parent_id,name:L.parent_name}],D(Object(i.a)(R))),z(Object(h.a)({},L)),console.log("formData:",L);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/sales-cash-discount",s="POST";if(L.id&&(a="/v1/sales-cash-discount/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0:",void x(Object(h.a)({},j));if(L.amount>=c.total)return j.amount="Amount should be less than total amount:"+c.total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesCashDiscount!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Cash Discount for sales order#"+L.order_code:"Add Cash Discount for sales order #"+L.order_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",console.log("order.total:",c.total),L.amount>=c.total?(j.amount="Amount should be less than total amount:"+c.total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Name"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bsalescashdiscount",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),Ft=At,Pt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Sales Payment  of Order #",c.order_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(e.order)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Order ID:"}),Object(v.jsxs)("td",{children:[" ",c.order_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.method]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Mt=Pt,It=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={method:"cash"},t&&(L.order_id=t.id,L.order_code=t.code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/sales-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),L.parent_id&&(R=[{id:L.parent_id,name:L.parent_name}],D(Object(i.a)(R))),z(Object(h.a)({},L)),console.log("formData:",L);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),j={},x(Object(h.a)({},j)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/sales-payment",s="POST";if(L.id&&(a="/v1/sales-payment/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0:",void x(Object(h.a)({},j));if(L.amount>c.net_total)return j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.refreshSalesList&&e.refreshSalesList(),e.openDetailsView(c.result.id);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesPayment!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Payment  for sales order#"+L.order_code:"Add Payment  for sales order #"+L.order_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",L.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:L.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",void x(Object(h.a)({},j));j.method="",x(Object(h.a)({},j)),L.method=e.target.value,z(Object(h.a)({},L)),console.log(L)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),j.method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.method]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bsalespayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),Lt=It,zt=a(63),Et=a.n(zt),Ut=Et.a.ExcelFile,Bt=Et.a.ExcelFile.ExcelSheet,Vt=Object(s.forwardRef)((function(e,t){var a=new y.a,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)("Sales Report"),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<r.length;t++){var a=Object(O.default)(new Date(r[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(r[t])}console.log("groupedByDate:",e),j=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:180}},{title:"Net Amount",width:{wpx:90}}],data:[],filename:g}];var s=0,n=0,c=0,i=0;for(var o in e){console.log("orderDate:",o),j[0].data.push([{value:"Inv Date: "+o}]);var l=0,d=0,u=0;for(t=0;t<e[o].length>0;t++){i++;var b=e[o][t];if(j[0].data.push([{value:"Inv No ("+b.code+") - "+i}]),j[0].data.push([{value:"Customer: "+b.customer_name}]),b.customer&&b.customer.vat_no?j[0].data.push([{value:"Customer VAT NO.: "+b.customer.vat_no}]):j[0].data.push([{value:"Customer VAT NO.: N/A"}]),b.products){for(var p=0;p<b.products.length;p++){var m=b.products[p];j[0].data.push([{value:m.name},{value:m.quantity.toFixed(2)},{value:m.unit?m.unit:"PCs"},{value:m.unit_price?m.unit_price.toFixed(2):0},{value:(m.unit_price*m.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(m.unit_price*m.quantity).toFixed(2)).toFixed(2)},{value:(m.unit_price*m.quantity).toFixed(2)}])}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Shipping/Handling Fees"},{value:b.shipping_handling_fees.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount Before VAT"},{value:(b.total+b.shipping_handling_fees).toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:b.discount.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After Discount"},{value:(b.total+b.shipping_handling_fees-b.discount).toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"VAT Amount"},{value:b.vat_price.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After VAT"},{value:(b.total+b.shipping_handling_fees-b.discount+b.vat_price).toFixed(2)}]),u+=b.vat_price,l+=b.total+b.shipping_handling_fees-b.discount,d+=b.total+b.shipping_handling_fees-b.discount+b.vat_price,b.discount,b.shipping_handling_fees}}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total Before VAT"},{value:l.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day VAT"},{value:u.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total After VAT"},{value:d.toFixed(2)}]),s+=l,n+=d,c+=u}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount Before VAT"},{value:s.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total VAT"},{value:c.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After VAT"},{value:n.toFixed(2)}]),h(j),console.log("excelData:",j)}function R(){g="Sales Report",kt.created_at_from&&kt.created_at_to?g+=" - From "+kt.created_at_from+" to "+kt.created_at_to:kt.created_at_from?g+=" - From "+kt.created_at_from+" to "+Object(O.default)(new Date,"dd-MMM-yyyy"):kt.created_at_to?g+=" - Upto "+kt.created_at_to:kt.created_at&&(g+=" of "+kt.created_at),_(g)}function D(){return D=Object(b.a)(u.a.mark((function e(){var t,s,n,c,o,l,d,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},s="select=id,code,date,total,net_total,shipping_handling_fees,discount_percent,discount,products,customer_name,created_at,vat_price,customer_id,customer.id,customer.vat_no",a.get("store_id")&&(kt.store_id=a.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),kt.timezone_offset=parseFloat(c/60),Rt(kt),""!==(o=pa(kt))&&(o="&"+o),l=500,d=[],j=1,R();case 14:return S=!0,k(!0),e.next=19,fetch("/v1/order?"+s+o+"&sort="+Ht+It+"&page="+j+"&limit="+l,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(We(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 19:if(0!==(h=e.sent).length){e.next=22;break}return e.abrupt("break",26);case 22:d=d.concat(h),j++;case 24:e.next=14;break;case 26:r=d,i(d),console.log("allOrders:",r),T(),S=!1,k(!1);case 32:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var A=Object(s.useState)([]),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(5),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(1),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(0),se=Object(o.a)(ae,2),ce=se[0],re=se[1],ie=Object(s.useState)(0),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=new Date,me=Object(s.useState)(""),xe=Object(o.a)(me,2),Oe=xe[0],fe=xe[1],ge=Object(s.useState)(""),ve=Object(o.a)(ge,2),_e=ve[0],ye=ve[1],Ne=Object(s.useState)(""),Ce=Object(o.a)(Ne,2),Se=Ce[0],we=Ce[1],ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),Re=Te[0],De=Te[1],Ae=Object(s.useState)(""),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Me=Fe[1],Ie=Object(s.useState)(""),Le=Object(o.a)(Ie,2),ze=Le[0],Ee=Le[1],Ue=Object(s.useState)(""),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)(!1),Ge=Object(o.a)(qe,2),Qe=Ge[0],We=Ge[1],Ze=Object(s.useState)(!1),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Je=Ke[1],Ye=Object(s.useState)([]),$e=Object(o.a)(Ye,2),et=$e[0],tt=$e[1],at=Object(s.useState)([]),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)([]),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)([]),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)([]),pt=Object(o.a)(ht,2),mt=(pt[0],pt[1]),xt=Object(s.useState)([]),Ot=Object(o.a)(xt,2),gt=Ot[0],vt=Ot[1],_t=Object(s.useState)([]),yt=Object(o.a)(_t,2),Nt=yt[0],Ct=yt[1];Object(s.useEffect)((function(){va()}),[]);var St=Object(s.useState)({}),wt=Object(o.a)(St,2),kt=wt[0],Rt=wt[1],At=Object(s.useState)("created_at"),Pt=Object(o.a)(At,2),It=Pt[0],zt=Pt[1],Et=Object(s.useState)("-"),Vt=Object(o.a)(Et,2),Ht=Vt[0],qt=Vt[1],Gt=Object(s.useState)(0),Qt=Object(o.a)(Gt,2),Wt=Qt[0],Zt=Qt[1],Kt=Object(s.useState)(0),Xt=Object(o.a)(Kt,2),Jt=Xt[0],Yt=Xt[1],$t=Object(s.useState)(0),ea=Object(o.a)($t,2),ta=ea[0],aa=ea[1],sa=Object(s.useState)(0),na=Object(o.a)(sa,2),ca=na[0],ra=na[1],ia=Object(s.useState)(0),oa=Object(o.a)(ia,2),la=oa[0],da=oa[1],ja=Object(s.useState)(0),ua=Object(o.a)(ja,2),ba=ua[0],ha=ua[1];function pa(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function ma(){return(ma=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=pa({name:t}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,tt(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(){return(xa=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),tt([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=pa({name:t}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,lt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){kt[e]=t,H(V=1),va()}function fa(e,t){if(!t)return kt[e]="",H(V=1),void va();if(t){var a=new Date(t);t=Object(O.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(fe(t),ye(""),we(""),kt.from_date="",kt.to_date="",kt[e]=t):"from_date"===e?(ye(t),fe(""),kt.date="",kt[e]=t):"to_date"===e?(we(t),fe(""),kt.date="",kt[e]=t):"created_at"===e&&(Me(t),Ee(""),He(""),kt.created_at_from="",kt.created_at_to="",kt[e]=t,console.log("searchParams[field]:",kt[e])),"created_at_from"===e?(Ee(t),Me(""),kt.created_at="",kt[e]=t):"created_at_to"===e&&(He(t),Me(""),kt.created_at="",kt[e]=t),H(V=1),va()}function ga(e,t){"created_by"===e?bt(t):"customer_id"===e?ct(t):"status"===e?mt(t):"payment_status"===e?vt(t):"payment_method"===e&&Ct(t),kt[e]=Object.values(t).map((function(e){return e.id})).join(","),H(V=1),va()}function va(){h(j=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};a.get("store_id")&&(kt.store_id=a.get("store_id"));var t=(new Date).getTimezoneOffset();console.log("Timezone:",parseFloat(t/60)),kt.timezone_offset=parseFloat(t/60),Rt(kt);var s=pa(kt);""!==s&&(s="&"+s),We(!0),fetch("/v1/order?select=id,code,date,net_total,total_payment_received,payments_count,payment_methods,balance_amount,discount_percent,discount,created_by_name,customer_name,status,payment_status,payment_method,created_at,loss,net_profit,store_id,total"+s+"&sort="+Ht+It+"&page="+V+"&limit="+z,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:We(!1),Je(!1),M(n.result),r=parseInt((n.total_count+z-1)/z),J(r),te(n.total_count),de((V-1)*z),re(n.result.length),Wt=n.meta.total_sales,Zt(Wt),Jt=n.meta.net_profit,Yt(Jt),ba=n.meta.loss,ha(ba),ta=n.meta.vat_price,aa(ta),ca=n.meta.shipping_handling_fees,ra(ca),la=n.meta.discount,da(la);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){We(!1),Je(!1),console.log(e)}))}function _a(e){zt(It=e),qt(Ht="-"===Ht?"":"-"),va()}function ya(e){V=parseInt(e),H(V),va()}var Na=Object(s.useRef)();var Ca=Object(s.useRef)();var Sa=Object(s.useRef)();function wa(){Sa.current.open()}var ka=Object(s.useRef)();var Ta=Object(s.useRef)();var Ra=Object(s.useRef)();var Da=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ft,{ref:Sa,refreshList:va,showToastMessage:e.showToastMessage,openCreateForm:wa}),Object(v.jsx)(ne,{ref:Na,openCreateForm:wa}),Object(v.jsx)(Tt,{ref:Ca,showToastMessage:e.showToastMessage}),Object(v.jsx)(Ft,{ref:ka,showToastMessage:e.showToastMessage,openDetailsView:function(e){Ta.current.open(e)}}),Object(v.jsx)(Dt,{ref:Ta,openUpdateForm:function(e){ka.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsx)(Lt,{ref:Ra,showToastMessage:e.showToastMessage,openDetailsView:function(e){Da.current.open(e)},refreshSalesList:va}),Object(v.jsx)(Mt,{ref:Da,openUpdateForm:function(e){Ra.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Sales: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Wt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Discounts: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:la.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Shipping/Handling fees: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ca.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ta.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===a.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Jt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===a.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ba,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Sales Orders"})}),Object(v.jsxs)("div",{className:"col text-end",children:[Object(v.jsx)(Ut,{filename:g,element:j.length>0?Object(v.jsx)(m.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Sales Report"}):"",children:Object(v.jsx)(Bt,{dataSet:j,name:g})}),0==j.length?Object(v.jsx)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return D.apply(this,arguments)},children:S?"Preparing..":"Sales Report"}):"","\xa0\xa0",Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:wa,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===ee&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Orders to display"})})}),Object(v.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Je(!0),va()},variant:"primary",disabled:Xe,children:[Xe?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Qe&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:ee>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:z,onChange:function(e){var t;t=e.target.value,z=parseInt(t),E(z),va()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{border:"solid 0px",width:"100%"},children:X?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ya(e.selected+1)},pageRangeDisplayed:5,pageCount:X,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:V-1}):""})}),Object(v.jsx)("div",{className:"row",children:ee>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",le+1,"-",le+ce," of"," ",ee]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",V," of ",X]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("code")},children:["ID","code"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("date")},children:["Date","date"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("net_total")},children:["Net Total","net_total"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("total_payment_received")},children:["Payment Received","total_payment_received"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"total_payment_received"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("balance_amount")},children:["Balance","balance_amount"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"balance_amount"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("payments_count")},children:["No.of Payments","payments_count"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"payments_count"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("discount")},children:["Discount","discount"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("discount_percent")},children:["Discount %","discount_percent"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount_percent"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===a.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("net_profit")},children:["Net Profit","net_profit"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_profit"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===a.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("loss")},children:["Loss","loss"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"loss"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("created_by")},children:["Created By","created_by"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("customer_name")},children:["Customer","customer_name"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("payment_status")},children:["Payment Status","payment_status"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_status"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("payment_method")},children:["Payment Method","payment_method"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_a("created_at")},children:["Created At","created_at"===It&&"-"===Ht?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===It&&""===Ht?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return Oa("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:Oe,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return fe(""),void fa("date_str","");fa("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return he(!be)},children:be?"Less..":"More.."}),Object(v.jsx)("br",{}),be?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:_e,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ye(""),void fa("from_date","");fa("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:Se,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return we(""),void fa("to_date","");fa("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return Oa("net_total",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"total_payment_received",onChange:function(e){return Oa("total_payment_received",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"balance_amount",onChange:function(e){return Oa("balance_amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"payments_count",onChange:function(e){return Oa("payments_count",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"discount",onChange:function(e){return Oa("discount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"discount_percent",onChange:function(e){return Oa("discount_percent",e.target.value)},className:"form-control"})}),"true"===a.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_profit",onChange:function(e){return Oa("net_profit",e.target.value)},className:"form-control"})}):"","true"===a.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"loss",onChange:function(e){return Oa("loss",e.target.value)},className:"form-control"})}):"",Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){ga("created_by",e)},options:ot,placeholder:"Select Users",selected:ut,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xa.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){ga("customer_id",e)},options:et,placeholder:"name or mob",selected:nt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ma.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"payment_status",labelKey:"name",onChange:function(e){ga("payment_status",e)},options:[{id:"paid",name:"Paid"},{id:"not_paid",name:"Not Paid"},{id:"paid_partially",name:"Paid partially"}],placeholder:"Select Payment Status",selected:gt,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"payment_method",labelKey:"name",onChange:function(e){ga("payment_method",e)},options:[{id:"cash",name:"cash"},{id:"bank_account",name:"Bank Account / Debit / Credit card"}],placeholder:"Select payment methods",selected:Nt,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Pe,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Me(""),void fa("created_at","");fa("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return De(!Re)},children:Re?"Less..":"More.."}),Object(v.jsx)("br",{}),Re?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:ze,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Ee(""),void fa("created_at_from","");fa("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Ve,selected:pe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return He(""),void fa("created_at_to","");fa("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{style:{width:"150px"}})]})}),Object(v.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){var t,s,n;return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsx)("td",{children:null===(t=e.net_total)||void 0===t?void 0:t.toFixed(2)}),Object(v.jsx)("td",{children:null===(s=e.total_payment_received)||void 0===s?void 0:s.toFixed(2)}),Object(v.jsx)("td",{children:null===(n=e.balance_amount)||void 0===n?void 0:n.toFixed(2)}),Object(v.jsx)("td",{children:e.payments_count}),Object(v.jsxs)("td",{children:[e.discount.toFixed(2)," SAR"]}),Object(v.jsxs)("td",{children:[e.discount_percent.toFixed(2)," %"]}),"true"===a.get("admin")?Object(v.jsxs)("td",{children:[e.net_profit.toFixed(2)," SAR"]}):"","true"===a.get("admin")?Object(v.jsxs)("td",{children:[e.loss?e.loss.toFixed(2):0," SAR"]}):"",Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsxs)("td",{children:["paid"==e.payment_status?Object(v.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==e.payment_status?Object(v.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==e.payment_status?Object(v.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]}),Object(v.jsx)("td",{children:e.payment_method}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){var t;t=e.id,Sa.current.open(t)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Na.current.open(t)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsxs)("button",{className:"btn btn-dark btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Create Sales Return",onClick:function(){var t;t=e.id,Ca.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-arrow-left"})," Return"]}),Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsxs)("ul",{className:"dropdown-menu",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){!function(e){ka.current.open(void 0,e)}(e)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Cash Discount"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){!function(e){Ra.current.open(void 0,e)}(e)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Payment"]})})]})]})]},e.code)}))})]})}),X?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ya(e.selected+1)},pageRangeDisplayed:5,pageCount:X,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:V-1}):""]})})})})]})]})})),Ht=Vt;var qt=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/sales-cash-discount?select=id,amount,store_name,order_code,order_id,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_cash_discount,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ft,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(Dt,{ref:He,openUpdateForm:Ve,openCreateForm:function(){Ge.current.open()}}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Sales Cash Discounts"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No sales cash discounts to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bsalescashdiscount:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bsalescashdiscount:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bsalescashdiscount",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bsalescashdiscount:"solid 1px",bsalescashdiscountColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bsalescashdiscount:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("order_code")},children:["Order ID","order_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return Le("order_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.order_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})},Gt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseCashDiscount");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Purchase Cash Discount of Purchase #",c.purchase_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(e.purchase)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Purchase ID:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Qt=Gt,Wt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={},t&&(L.purchase_id=t.id,L.purchase_code=t.code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/purchase-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),z(Object(h.a)({},L)),console.log("formData:",L);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),j={},x(Object(h.a)({},j)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/purchase-cash-discount",s="POST";if(L.id&&(a="/v1/purchase-cash-discount/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0",void x(Object(h.a)({},j));if(L.amount>=c.total)return j.amount="Amount should be less than total amount:"+c.total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseCashDiscount!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Cash Discount for purchase#"+L.purchase_code:"Add Cash Discount for purchase#"+L.purchase_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchase",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",console.log("purchase.total:",c.total),L.amount>=c.total?(j.amount="Amount should be less than total amount:"+c.total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Name"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasecashdiscount",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),Zt=Wt;var Kt=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(0),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/purchase-cash-discount?select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_cash_discount,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Zt,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(Qt,{ref:He,openUpdateForm:Ve,openCreateForm:function(){Ge.current.open()}}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Purchase Cash Discounts"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No purchase cash discounts to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bpurchasecashdiscount:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bpurchasecashdiscount:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasecashdiscount",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bpurchasecashdiscount:"solid 1px",bpurchasecashdiscountColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bpurchasecashdiscount:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("purchase_code")},children:["Purchase ID","purchase_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return Le("purchase_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.purchase_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})};var Xt=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id")),console.log("searchParams.store_id:",Ce.store_id);var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/sales-payment?select=id,amount,method,store_name,order_code,order_id,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_payment,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Lt,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(Mt,{ref:He,openUpdateForm:Ve,openCreateForm:function(){Ge.current.open()}}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Sales Payments"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No sales payment s to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bsalespayment:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bsalespayment:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bsalespayment",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bsalespayment:"solid 1px",bsalespaymentColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bsalespayment:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("order_code")},children:["Order ID","order_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return Le("order_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"method",onChange:function(e){return Le("method",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.order_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})},Jt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchasePayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Purchase Payment  of Order #",c.order_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(e.order)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Order ID:"}),Object(v.jsxs)("td",{children:[" ",c.order_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.method]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Yt=Jt,$t=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={method:"cash"},t&&(L.purchase_id=t.id,L.purchase_code=t.code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/purchase-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),z(Object(h.a)({},L)),console.log("formData:",L);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),j={},x(Object(h.a)({},j)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/purchase-payment",s="POST";if(L.id&&(a="/v1/purchase-payment/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0:",void x(Object(h.a)({},j));if(L.amount>c.net_total)return j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchasePayment!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Payment  for purchase purchase#"+L.purchase_code:"Add Payment  for purchase purchase #"+L.purchase_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchase",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",L.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:L.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",void x(Object(h.a)({},j));j.method="",x(Object(h.a)({},j)),L.method=e.target.value,z(Object(h.a)({},L)),console.log(L)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),j.method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.method]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasepayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),ea=$t;var ta=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/purchase-payment?select=id,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_payment,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ea,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(Yt,{ref:He,openUpdateForm:Ve}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Purchase Payments"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Purchase payments to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bpurchase:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bpurchase:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bpurchasepayment:"solid 1px",bpurchasepaymentColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bpurchasepayment:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("purchase_code")},children:["Purchase ID","purchase_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return Le("purchase_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"method",onChange:function(e){return Le("method",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.purchase_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})},aa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesReturnPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Sales Return Payment  of Sales return #",c.sales_return_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(e.sales_return)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Sales Return ID:"}),Object(v.jsxs)("td",{children:[" ",c.sales_return_code]}),Object(v.jsx)("th",{children:"Sales Order ID:"}),Object(v.jsxs)("td",{children:[" ",c.order_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.method]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),sa=aa,na=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={method:"cash"},t&&(L.sales_return_id=t.id,L.sales_return_code=t.code,L.order_id=t.order_id,L.order_code=t.order_code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/sales-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),z(Object(h.a)({},L)),console.log("formData:",L);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),j={},x(Object(h.a)({},j)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/sales-return-payment",s="POST";if(L.id&&(a="/v1/sales-return-payment/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0:",void x(Object(h.a)({},j));if(L.amount>c.net_total)return j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesReturnPayment!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Payment of sales return #"+L.sales_return_code:"Add Payment of sales return  #"+L.sales_return_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",L.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:L.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",void x(Object(h.a)({},j));j.method="",x(Object(h.a)({},j)),L.method=e.target.value,z(Object(h.a)({},L)),console.log(L)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),j.method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.method]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bsalesreturnpayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),ca=na;var ra=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/sales-return-payment?select=id,amount,method,store_name,sales_return_code,sales_return_id,order_id,order_code,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_payment,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ca,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(sa,{ref:He,openUpdateForm:Ve}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Sales Return Payments"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No sales return payments to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bsalesreturnpayment:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bsalesreturnpayment:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bsalesreturnpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bsalesreturnpayment:"solid 1px",bsalesreturnpaymentColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bsalesreturnpayment:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("sales_return_code")},children:["Sales Return ID","sales_return_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"sales_return_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"sales_return_code",onChange:function(e){return Le("sales_return_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"method",onChange:function(e){return Le("method",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.sales_return_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})},ia=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseReturnPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Purchase Return Payment  of Purchase return #",c.purchase_return_code," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm(c)},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Purchase Return ID:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_return_code]}),Object(v.jsx)("th",{children:"Purchase Purchase ID:"}),Object(v.jsxs)("td",{children:[" ",c.purchase_code]}),Object(v.jsx)("th",{children:"Amount:"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.method]}),Object(v.jsx)("th",{children:"Store Name:"}),Object(v.jsxs)("td",{children:[" ",c.store_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),oa=ia,la=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(h.a)({},t)),L={method:"cash"},t&&(L.purchase_return_id=t.id,L.purchase_return_code=t.code,L.purchase_id=t.purchase_id,L.purchase_code=t.purchase_code,L.store_id=t.store_id),z(L),D(R=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};L={},z(Object(h.a)({},L)),R=[],D(Object(i.a)(R)),fetch("/v1/purchase-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:x({}),console.log("Response:"),console.log(n),L=n.result,console.log("formData:",L),L.parent_id&&(R=[{id:L.parent_id,name:L.parent_name}],D(Object(i.a)(R))),z(Object(h.a)({},L)),console.log("formData:",L);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_(!1),x(e)}))}(e),j={},x(Object(h.a)({},j)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],x=d[1],O=Object(s.useState)(!1),f=Object(o.a)(O,2),g=f[0],_=f[1],N=new y.a,C=Object(s.useState)([]),S=Object(o.a)(C,2),k=(S[0],S[1],Object(s.useState)([])),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),P=(F[0],F[1]),M=Object(s.useState)({}),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1];function H(){V(!1)}function q(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",L.logo),P(!0);var a="/v1/purchase-return-payment",s="POST";if(L.id&&(a="/v1/purchase-return-payment/"+L.id,s="PUT"),L.amount<=0)return j.amount="Amount should be > 0:",void x(Object(h.a)({},j));if(L.amount>c.net_total)return j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(L)};console.log("formData:",L),_(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:x({}),_(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){_(!1),P(!1),console.log("Inside catch"),console.log(t),x(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseReturnPayment!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:B,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:L.id?"Update Payment  of purchase return #"+L.purchase_return_code:"Add Payment of purchase return  #"+L.purchase_return_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[L.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(L.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:q,children:[g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasereturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",L.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:q,children:[Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("input",{value:L.amount?L.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(L.amount=e.target.value,j.amount="Amount should be > 0",void x(Object(h.a)({},j))):(L.amount=parseFloat(e.target.value),j.amount="",L.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void x(Object(h.a)({},j))):(x(Object(h.a)({},j)),z(Object(h.a)({},L)),void console.log(L))):(L.amount=e.target.value,j.amount="Invalid amount",void x(Object(h.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(v.jsx)("div",{style:{color:"red"},children:j.amount}),L.amount&&!j.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:L.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",void x(Object(h.a)({},j));j.method="",x(Object(h.a)({},j)),L.method=e.target.value,z(Object(h.a)({},L)),console.log(L)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),j.method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.method]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:H,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:q,children:g?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasereturnpayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":L.id?"Update":"Create"})]})]})})]})})})),da=la;var ja=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,_(g=1),Ee()}function ze(e,t){if(!t)return g=1,Ce[e]="",_(g),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),_(g=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/purchase-return-payment?select=id,amount,method,store_name,purchase_return_code,purchase_return_id,purchase_id,purchase_code,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),Ze=n.meta.total_payment,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){g=parseInt(e),_(g),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)(),Qe=Object(s.useState)(0),We=Object(o.a)(Qe,2),Ze=We[0],Ke=We[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(da,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(oa,{ref:He,openUpdateForm:Ve}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Purchase Return Payments"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No purchase return payments to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bpurchasereturnpayment:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bpurchasereturnpayment:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bpurchasereturnpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bpurchasereturnpayment:"solid 1px",bpurchasereturnpaymentColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bpurchasereturnpayment:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("purchase_return_code")},children:["Purchase Return ID","purchase_return_code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_return_code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_return_code",onChange:function(e){return Le("purchase_return_code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Le("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"method",onChange:function(e){return Le("method",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),_(g=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.purchase_return_code}),Object(v.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(v.jsx)("td",{children:e.method}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})},ua=Et.a.ExcelFile,ba=Et.a.ExcelFile.ExcelSheet;var ha=function(e){var t=new y.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(s.useState)(0),p=Object(o.a)(h,2),f=p[0],g=p[1],_=Object(s.useState)([]),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(5),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(1),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(0),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=new Date,ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(""),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(""),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)(""),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)(!1),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)(!1),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=Ze[0],Xe=Ze[1],Je=Object(s.useState)([]),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)([]),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)([]),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];Object(s.useEffect)((function(){Zt()}),[]);var lt=Object(s.useState)([]),dt=Object(o.a)(lt,2),jt=dt[0],ut=dt[1],bt=Object(s.useState)([]),ht=Object(o.a)(bt,2),pt=ht[0],mt=ht[1],xt=Object(s.useState)("Sales Return Report"),Ot=Object(o.a)(xt,2),ft=Ot[0],gt=Ot[1],vt=Object(s.useState)(!1),_t=Object(o.a)(vt,2),yt=_t[0],Nt=_t[1];function Ct(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<jt.length;t++){var a=Object(O.default)(new Date(jt[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(jt[t])}console.log("groupedByDate:",e),pt=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:90}},{title:"Net Amount",width:{wpx:90}}],data:[]}];var s=0,n=0,c=0;for(var r in e){console.log("returnDate:",r),pt[0].data.push([{value:"Inv Date: "+r}]);var i=0,o=0;for(t=0;t<e[r].length>0;t++){c++;var l=e[r][t];if(pt[0].data.push([{value:"Inv No ("+l.code+") - "+c+" ["+l.customer_name+"]"}]),l.products){for(var d=0;d<l.products.length;d++){var j=l.products[d];pt[0].data.push([{value:j.name},{value:j.quantity.toFixed(2)},{value:j.unit?j.unit:"PCs"},{value:j.unit_price?j.unit_price.toFixed(2):0},{value:(j.unit_price*j.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(j.unit_price*j.quantity).toFixed(2)).toFixed(2)},{value:(j.unit_price*j.quantity).toFixed(2)}])}pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:l.discount.toFixed(2)}]),pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Tax"},{value:l.vat_price.toFixed(2)}]),pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total"},{value:(l.total-l.discount).toFixed(2)}]),i+=l.total-l.discount,o+=l.vat_price}}pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Tax"},{value:o.toFixed(2)}]),pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total"},{value:i.toFixed(2)}]),s+=i,n+=o}pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Tax"},{value:n.toFixed(2)}]),pt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount"},{value:s.toFixed(2)}]),mt(pt),console.log("excelData:",pt)}function St(){ft="Sales Return Report",At.from_date&&At.to_date?ft+=" - From "+At.from_date+" to "+At.to_date:At.from_date?ft+=" - From "+At.from_date+" to "+Object(O.default)(new Date,"dd-MMM-yyyy"):At.to_date?ft+=" - Upto "+At.to_date:At.date_str&&(ft+=" of "+At.date_str),gt(ft)}function kt(){return kt=Object(b.a)(u.a.mark((function e(){var a,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},s="select=id,code,date,total,net_total,discount_percent,discount,products,customer_name,created_at,vat_price,loss,net_profit",t.get("store_id")&&(At.store_id=t.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),At.timezone_offset=parseFloat(c/60),Ft(At),""!==(r=Vt(At))&&(r="&"+r),i=500,o=[],l=1,St();case 14:return yt=!0,Nt(!0),e.next=19,fetch("/v1/sales-return?"+s+r+"&sort="+Ut+It+"&page="+l+"&limit="+i,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(ze(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 19:if(0!==(d=e.sent).length){e.next=22;break}return e.abrupt("break",26);case 22:o=o.concat(d),l++;case 24:e.next=14;break;case 26:jt=o,ut(o),console.log("allSalesReturns:",jt),Ct(),yt=!1,Nt(!1);case 32:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}var Rt=Object(s.useState)({}),Dt=Object(o.a)(Rt,2),At=Dt[0],Ft=Dt[1],Pt=Object(s.useState)("created_at"),Mt=Object(o.a)(Pt,2),It=Mt[0],Lt=Mt[1],zt=Object(s.useState)("-"),Et=Object(o.a)(zt,2),Ut=Et[0],Bt=Et[1];function Vt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ht(){return(Ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=Vt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(){return(qt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),Qe([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=Vt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,et(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e,t){At[e]=t,M(P=1),Zt()}function Qt(e,t){if(!t)return P=1,At[e]="",M(P),void Zt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(de(t),he(""),Oe(""),At.from_date="",At.to_date="",At[e]=t):"from_date"===e?(he(t),de(""),At.date="",At[e]=t):"to_date"===e?(Oe(t),de(""),At.date="",At[e]=t):"created_at"===e&&(Se(t),Re(""),Pe(""),At.created_at_from="",At.created_at_to="",At[e]=t),"created_at_from"===e?(Re(t),Se(""),At.created_at="",At[e]=t):"created_at_to"===e&&(Pe(t),Se(""),At.created_at="",At[e]=t),M(P=1),Zt()}function Wt(e,t){"created_by"===e?nt(t):"customer_id"===e?Xe(t):"status"===e&&ot(t),At[e]=Object.values(t).map((function(e){return e.id})).join(","),M(P=1),Zt()}function Zt(){mt(pt=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(At.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();At.timezone_offset=parseFloat(a/60),Ft(At);var s=Vt(At);""!==s&&(s="&"+s),ze(!0),fetch("/v1/sales-return?select=id,code,date,net_total,created_by_name,customer_name,status,created_at,net_profit,loss,order_code"+s+"&sort="+Ut+It+"&page="+P+"&limit="+R,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:ze(!1),Ve(!1),S(n.result),o=parseInt((n.total_count+R-1)/R),E(o),H(n.total_count),te((P-1)*R),J(n.result.length),c=n.meta.total_sales_return,r(c),na=n.meta.net_profit,ra(na),la=n.meta.loss,da(la),d=n.meta.vat_price,j(d),f=n.meta.discount,g(f);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ze(!1),Ve(!1),console.log(e)}))}function Kt(e){Lt(It=e),Bt(Ut="-"===Ut?"":"-"),Zt()}function Xt(e){P=parseInt(e),M(P),Zt()}var Jt=Object(s.useRef)(),Yt=Object(s.useRef)(),$t=Object(s.useRef)(),ea=Object(s.useRef)(),ta=Object(s.useState)(0),aa=Object(o.a)(ta,2),na=aa[0],ra=aa[1],ia=Object(s.useState)(0),oa=Object(o.a)(ia,2),la=oa[0],da=oa[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Tt,{ref:Yt,refreshList:Zt,showToastMessage:e.showToastMessage}),Object(v.jsx)(wt,{ref:Jt}),Object(v.jsx)(ca,{ref:$t,showToastMessage:e.showToastMessage,openDetailsView:function(e){ea.current.open(e)}}),Object(v.jsx)(sa,{ref:ea,openUpdateForm:function(e){$t.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Sales Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Net Profit Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:na,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Loss Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:la,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"",Object(v.jsxs)("h1",{className:"text-end",children:["Discount Retun: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:f.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Sales Returns"})}),Object(v.jsxs)("div",{className:"col text-end",children:[Object(v.jsx)(ua,{filename:ft,element:pt.length>0?Object(v.jsx)(m.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Sales Return Report"}):"",children:Object(v.jsx)(ba,{dataSet:pt,name:ft})}),0==pt.length?Object(v.jsx)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return kt.apply(this,arguments)},children:yt?"Preparing..":"Sales Return Report"}):"","\xa0\xa0"]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===V&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No SalesReturns to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bsalesreturn:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bsalesreturn:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Ve(!0),Zt()},variant:"primary",disabled:Be,children:[Be?Object(v.jsx)(w.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:R,onChange:function(e){var t;t=e.target.value,R=parseInt(t),D(R),Zt()},className:"form-control pull-right",style:{bsalesreturn:"solid 1px",bsalesreturnColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bsalesreturn:"solid 0px"},children:z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Xt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""})}),Object(v.jsx)("div",{className:"row",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ee+1,"-",ee+X," of"," ",V]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",P," of ",z]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("code")},children:["ID","code"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("order_code")},children:["Order ID","order_code"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("date")},children:["Date","date"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("net_total")},children:["Net Total","net_total"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("net_profit")},children:["Net Profit","net_profit"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_profit"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("loss")},children:["Loss","loss"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"loss"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("created_by")},children:["Created By","created_by"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("customer_name")},children:["Customer","customer_name"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("status")},children:["Status","status"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"status"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Kt("created_at")},children:["Created At","created_at"===It&&"-"===Ut?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===It&&""===Ut?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return Gt("code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return Gt("order_code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:le,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return de(""),void Qt("date_str","");Qt("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ce(!ne)},children:ne?"Less..":"More.."}),Object(v.jsx)("br",{}),ne?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:be,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void Qt("from_date","");Qt("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:xe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void Qt("to_date","");Qt("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return Gt("net_total",e.target.value)},className:"form-control"})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_profit",onChange:function(e){return Gt("net_profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"loss",onChange:function(e){return Gt("loss",e.target.value)},className:"form-control"})}):"",Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){Wt("created_by",e)},options:$e,placeholder:"Select Users",selected:st,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){qt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){Wt("customer_id",e)},options:Ge,placeholder:"name or mob",selected:Ke,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ht.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"status",labelKey:"name",onChange:function(e){Wt("status",e)},options:[{id:"sent",name:"Sent"},{id:"pending",name:"Pending"},{id:"accepted",name:"Accepted"},{id:"rejected",name:"Rejected"},{id:"cancelled",name:"Cancelled"},{id:"deleted",name:"Deleted"}],placeholder:"Select Status",selected:it,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Ce,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Se(""),void Qt("created_at","");Qt("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return _e(!ve)},children:ve?"Less..":"More.."}),Object(v.jsx)("br",{}),ve?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:Te,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Re(""),void Qt("created_at_from","");Qt("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Fe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Pe(""),void Qt("created_at_to","");Qt("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:C&&C.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:e.order_code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.net_total," SAR"]}),"true"===t.get("admin")?Object(v.jsxs)("td",{children:[e.net_profit.toFixed(2)," SAR"]}):"","true"===t.get("admin")?Object(v.jsxs)("td",{children:[e.loss?e.loss.toFixed(2):0," SAR"]}):"",Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsx)("td",{children:Object(v.jsx)("span",{className:"badge bg-success",children:e.status})}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Jt.current.open(t)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsx)("ul",{className:"dropdown-menu",children:Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,$t.current.open(void 0,t)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Payment"]})})})]})]},e.code)}))})]})}),z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Xt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""]})})})})]})]})},pa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){g={national_address:{},vat_percent:15},_(Object(h.a)({},g)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),i=n.result,(g=i).national_address||(g.national_address={}),g.vat_percent||(g.vat_percent=15),_(Object(h.a)({},g));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new y.a,O=Object(s.useState)({national_address:{},vat_percent:15}),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1];function T(){k(!1)}function R(t){t.preventDefault(),console.log("Inside handle Create"),g.vat_percent=parseFloat(g.vat_percent),g.phone&&(g.phone_in_arabic=A(g.phone.toString())),g.vat_no&&(g.vat_no_in_arabic=A(g.vat_no.toString())),g.registration_number&&(g.registration_number_in_arabic=A(g.registration_number.toString())),g.national_address.application_no&&(g.national_address.application_no_arabic=A(g.national_address.application_no.toString())),g.national_address.service_no&&(g.national_address.service_no_arabic=A(g.national_address.service_no.toString())),g.national_address.customer_account_no&&(g.national_address.customer_account_no_arabic=A(g.national_address.customer_account_no.toString())),g.national_address.building_no&&(g.national_address.building_no_arabic=A(g.national_address.building_no.toString())),g.national_address.zipcode&&(g.national_address.zipcode_arabic=A(g.national_address.zipcode.toString())),g.national_address.additional_no&&(g.national_address.additional_no_arabic=A(g.national_address.additional_no.toString())),g.national_address.unit_no&&(g.national_address.unit_no_arabic=A(g.national_address.unit_no.toString()));var a="/v1/vendor",s="POST";g.id&&(a="/v1/vendor/"+g.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(g)};console.log("formData:",g),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Vendor Created Successfully!","success"),e.refreshList&&e.refreshList(),T(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Vendor!","danger")}))}Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")}));var D="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function A(e){return e.replace(/\d/g,(function(e){return D[parseInt(e)]}))}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:S,size:"lg",onHide:T,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:g.id?"Update Vendor #"+g.name:"Create New Vendor"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[g.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){T(),e.openDetailsView(g.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:R,children:[d?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",g.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:T,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:R,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name?g.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),g.name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),g.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name In Arabic"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.name_in_arabic?g.name_in_arabic:"",type:"string",onChange:function(e){c.name_in_arabic="",r(Object(h.a)({},c)),g.name_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),g.name_in_arabic&&!c.name_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Phone*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.phone?g.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(h.a)({},c)),g.phone=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),g.phone&&!c.phone&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Email"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.email?g.email:"",type:"string",onChange:function(e){c.email="",g.email=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),g.email&&!c.email&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Title(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.title?g.title:"",type:"string",onChange:function(e){c.title="",r(Object(h.a)({},c)),g.title=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"title",placeholder:"Title"}),c.title&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title]}),g.title&&!c.title&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Title In Arabic(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.title_in_arabic?g.title_in_arabic:"",type:"string",onChange:function(e){c.title_in_arabic="",r(Object(h.a)({},c)),g.title_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"title_in_arabic",placeholder:"Title In Arabic"}),c.title_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title_in_arabic]}),g.title_in_arabic&&!c.title_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address,type:"string",onChange:function(e){c.address="",r(Object(h.a)({},c)),g.address=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),g.address&&!c.address&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Address In Arabic"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:g.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(h.a)({},c)),g.address_in_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),g.address_in_arabic&&!c.address_in_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Registration Number(C.R NO.)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.registration_number?g.registration_number:"",type:"number",onChange:function(e){c.registration_number="",r(Object(h.a)({},c)),g.registration_number=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"registration_number",placeholder:"Registration Number(C.R NO.)"}),c.registration_number&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.registration_number]}),g.registration_number&&!c.registration_number&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT NO."}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.vat_no?g.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(h.a)({},c)),g.vat_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),g.vat_no&&!c.vat_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT %"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.vat_percent?g.vat_percent:"",type:"string",onChange:function(e){c.vat_percent="",r(Object(h.a)({},c)),g.vat_percent=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"vat_percent",placeholder:"Vat %"}),c.vat_percent&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_percent]}),g.vat_percent&&!c.vat_percent&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsx)("h2",{children:"National Address:"}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Application Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.application_no?g.national_address.application_no:"",type:"string",onChange:function(e){c.national_address_application_no="",g.national_address.application_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.application_no",placeholder:"Application Number"}),c.national_address_application_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_application_no]}),g.national_address&&g.national_address.application_no&&!c.national_address_application_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Service Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.service_no?g.national_address.service_no:"",type:"string",onChange:function(e){c.national_address_service_no="",g.national_address.service_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.service_no",placeholder:"Service Number"}),c.national_address_service_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_service_no]}),g.national_address&&g.national_address.service_no&&!c.national_address_service_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer Account Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.customer_account_no?g.national_address.customer_account_no:"",type:"string",onChange:function(e){c.national_address_customer_account_no="",g.national_address.customer_account_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.customer_account_no",placeholder:"Customer Account Number"}),c.national_address_customer_account_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_customer_account_no]}),g.national_address&&g.national_address.customer_account_no&&!c.national_address_customer_account_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Building Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.building_no?g.national_address.building_no:"",type:"string",onChange:function(e){c.national_address_building_no="",g.national_address.building_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.building_no",placeholder:"Building Number"}),c.national_address_building_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_building_no]}),g.national_address&&g.national_address.building_no&&!c.national_address_building_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Street Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.street_name?g.national_address.street_name:"",type:"string",onChange:function(e){c.national_address_street_name="",g.national_address.street_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.street_name",placeholder:"Street Name"}),c.national_address_street_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name]}),g.national_address&&g.national_address.street_name&&!c.national_address_street_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Street Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.street_name_arabic?g.national_address.street_name_arabic:"",type:"string",onChange:function(e){c.national_address_street_name_arabic="",g.national_address.street_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.street_name_arabic",placeholder:"Street Name(Arabic)"}),c.national_address_street_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name_arabic]}),g.national_address&&g.national_address.street_name_arabic&&!c.national_address_street_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"District Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.district_name?g.national_address.district_name:"",type:"string",onChange:function(e){c.national_address_district_name="",g.national_address.district_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.district_name",placeholder:"District Name"}),c.national_address_district_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name]}),g.national_address&&g.national_address.district_name&&!c.national_address_district_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"District Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.district_name_arabic?g.national_address.district_name_arabic:"",type:"string",onChange:function(e){c.national_address_district_name_arabic="",g.national_address.district_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.district_name_arabic",placeholder:"District Name(Arabic)"}),c.national_address_district_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name_arabic]}),g.national_address&&g.national_address.district_name_arabic&&!c.national_address_district_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"City Name"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.city_name?g.national_address.city_name:"",type:"string",onChange:function(e){c.national_address_city_name="",g.national_address.city_name=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.city_name",placeholder:"City Name"}),c.national_address_city_name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name]}),g.national_address&&g.national_address.city_name&&!c.national_address_city_name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"City Name(Arabic)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.city_name_arabic?g.national_address.city_name_arabic:"",type:"string",onChange:function(e){c.national_address_city_name_arabic="",g.national_address.city_name_arabic=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.city_name_arabic",placeholder:"City Name(Arabic)"}),c.national_address_city_name_arabic&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name_arabic]}),g.national_address&&g.national_address.city_name_arabic&&!c.national_address_city_name_arabic&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Zipcode"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.zipcode?g.national_address.zipcode:"",type:"string",onChange:function(e){c.national_address_zipcode="",g.national_address.zipcode=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.zipcode",placeholder:"Zipcode"}),c.national_address_zipcode&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_zipcode]}),g.national_address&&g.national_address.zipcode&&!c.national_address_zipcode&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Additional Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.additional_no?g.national_address.additional_no:"",type:"string",onChange:function(e){c.national_address_additional_no="",g.national_address.additional_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.additional_no",placeholder:"Additional Number"}),c.national_address_additional_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_additional_no]}),g.national_address&&g.national_address.additional_no&&!c.national_address_additional_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Unit Number"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g.national_address.unit_no?g.national_address.unit_no:"",type:"string",onChange:function(e){c.national_address_unit_no="",g.national_address.unit_no=e.target.value,_(Object(h.a)({},g)),console.log(g)},className:"form-control",id:"national_address.unit_no",placeholder:"Unit Number"}),c.national_address_unit_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_unit_no]}),g.national_address&&g.national_address.unit_no&&!c.national_address_unit_no&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:T,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:R,children:d?Object(v.jsx)(w.a,{as:"span",animation:"bvendor",size:"sm",role:"status","aria-hidden":!0})+" Creating...":g.id?"Update":"Create"})]})]})})]})})})),ma=pa,xa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){de=[],ue([]),M=[],I([]),K=[],X([]),ve=[],_e([]),[],Te([]),C={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,partial_payment_amount:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"delivered",payment_method:"cash",payment_status:"paid"},g.get("store_id")&&(C.store_id=g.get("store_id"),C.store_name=g.get("store_name")),g.get("user_id")&&(ve=[{id:g.get("user_id"),name:g.get("user_name")}],C.order_placed_by=g.get("user_id"),C.vat_percent=parseFloat(g.get("vat_percent")),S(Object(h.a)({},C)),_e(Object(i.a)(ve))),S(Object(h.a)({},C)),e&&function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),o=n.result,(C={id:o.id,code:o.code,store_id:o.store_id,vendor_id:o.vendor_id,date_str:o.date,vat_percent:o.vat_percent,discount:o.discount,discount_percent:o.discount_percent,status:o.status,order_placed_by:o.order_placed_by,order_placed_by_signature_id:o.order_placed_by_signature_id,is_discount_percent:o.is_discount_percent,partial_payment_amount:o.partial_payment_amount,payment_method:o.payment_method,payment_status:o.payment_status,shipping_handling_fees:o.shipping_handling_fees}).is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,de=o.products,ue(Object(i.a)(de)),l=[{id:o.store_id,name:o.store_name}],d=[{id:o.vendor_id,name:o.vendor_name,search_label:o.vendor_name}],j=[{id:o.order_placed_by,name:o.order_placed_by_name}],o.order_placed_by_signature_id&&(b=[{id:o.order_placed_by_signature_id,name:o.order_placed_by_signature_name}],Te([].concat(b))),_e([].concat(j)),I([].concat(l)),X([].concat(d)),bt(),S(Object(h.a)({},C));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(e),bt(),Me(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-purchase.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(s.useEffect)((function(){console.log("inside change on formData:",C)}));new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1],g=new y.a,_=Object(s.useState)({vat_percent:10,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:Object(O.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"created"}),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)([]),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)([]),F=Object(o.a)(A,2),M=F[0],I=F[1],L=Object(s.useState)(!1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)([]),V=Object(o.a)(B,2),H=V[0],G=V[1],W=Object(s.useState)([]),Z=Object(o.a)(W,2),K=Z[0],X=Z[1],J=Object(s.useState)(!1),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)([]),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)([]),re=Object(o.a)(ce,2),ie=re[0],oe=(re[1],Object(s.useState)([])),le=Object(o.a)(oe,2),de=le[0],ue=le[1],be=Object(s.useState)(!1),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=(Oe[0],Oe[1],Object(s.useState)([])),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=(Ne[0],Ne[1],Object(s.useState)([])),Se=Object(o.a)(Ce,2),we=(Se[0],Se[1],Object(s.useState)([])),ke=Object(o.a)(we,2),Te=(ke[0],ke[1]),Re=Object(s.useState)(!1),De=Object(o.a)(Re,2),Ae=(De[0],De[1],Object(s.useState)(!1)),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Me=Fe[1];function Ie(){Me(!1)}function Le(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function ze(){return(ze=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),D([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Le({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name",U(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,D(c.result),U(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestVendors"),G([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Le({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",ee(!0),e.next=13,fetch("/v1/vendor?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,G(c.result),ee(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){g.get("access_token")||(window.location="/")}));var Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1];function qe(){return(qe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),ne([]),console.log("searchTerm:"+t),t){e.next=8;break}return Ve=!1,He(!1),me(!1),e.abrupt("return");case 8:return a={name:t},g.get("store_id")&&(a.store_id=g.get("store_id")),""!==(s=Le(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}},"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic",me(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return Ve=!1,He(!1),me(!1),e.abrupt("return");case 27:Ve=!0,He(!0),ne(i),me(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",de),C.products=[];for(var a=0;a<de.length;a++)C.products.push({product_id:de[a].product_id,quantity:parseFloat(de[a].quantity),unit:de[a].unit,purchase_unit_price:parseFloat(de[a].purchase_unit_price),retail_unit_price:parseFloat(de[a].retail_unit_price),wholesale_unit_price:parseFloat(de[a].wholesale_unit_price)});if(C.discount=parseFloat(C.discount),C.discount_percent=parseFloat(C.discount_percent),C.vat_percent=parseFloat(C.vat_percent),console.log("formData.discount:",C.discount),console.log("formData.discount_percent:",C.discount_percent),!C.shipping_handling_fees&&0!==C.shipping_handling_fees)return c.shipping_handling_fees="Invalid shipping / handling fees",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&!C.partial_payment_amount&&0!==C.partial_payment_amount)return c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount<=0)return c.partial_payment_amount="Partial payment should be > 0 ",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount>=ct)return c.partial_payment_amount="Partial payment cannot be >= "+ct,void r(Object(h.a)({},c));if(!C.discount&&0!==C.discount)return c.discount="Invalid discount",void r(Object(h.a)({},c));if(!C.discount_percent&&0!==C.discount_percent)return c.discount_percent="Invalid discount percent",void r(Object(h.a)({},c));if(parseFloat(C.discount_percent)>100)return c.discount_percent="Discount percent cannot be > 100",void r(Object(h.a)({},c));if(!C.vat_percent&&0!==C.vat_percent)return c.vat_percent="Invalid vat percent",void r(Object(h.a)({},c));g.get("store_id")&&(C.store_id=g.get("store_id"));var s="/v1/purchase",n="POST";C.id&&(s="/v1/purchase/"+C.id,n="PUT");var i={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.get("access_token")},body:JSON.stringify(C)};console.log("formData:",C),f(!0),fetch(s,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),f(!1),console.log("Response:"),console.log(c),e.showToastMessage("Purchase Created Successfully!","success"),e.refreshList&&e.refreshList(),Ie(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){f(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Purchase!","danger")}))}function Qe(e){if(console.log("Inside Add product"),!C.store_id)return c.product_id="Please Select a Store and try again",void r(Object(h.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(h.a)({},c));var t={};e.stores&&(t=function(e,t){if(console.log("Inside GetProductUnitPriceInStore"),!t)return"";console.log("Cool");for(var a=0;a<t.length;a++)if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("unitPrice.retail_unit_price:",t[a].purchase_unit_price),t[a];return console.log("not matched"),""}(C.store_id,e.stores),t&&t.retail_unit_price&&(e.retail_unit_price=t.retail_unit_price),t&&t.purchase_unit_price&&(e.purchase_unit_price=t.purchase_unit_price),t&&t.wholesale_unit_price&&(e.wholesale_unit_price=t.wholesale_unit_price));var a=!1,s=-1,n=0;if(e.quantity=1,!function(e){for(var t=0;t<de.length;t++)if(de[t].product_id===e)return!0;return!1}(e.id)?n=parseFloat(e.quantity):(a=!0,s=function(e){for(var t=0;t<de.length;t++)if(de[t].product_id===e)return t;return!1}(e.id),n=parseFloat(de[s].quantity+e.quantity)),console.log("quantity:",n),c.quantity="",a&&(de[s].quantity=parseFloat(n)),!a){var o={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,stores:e.stores,unit:e.unit};e.purchase_unit_price&&(o.purchase_unit_price=parseFloat(e.purchase_unit_price).toFixed(2)),e.retail_unit_price&&(o.retail_unit_price=parseFloat(e.retail_unit_price).toFixed(2)),e.wholesale_unit_price&&(o.wholesale_unit_price=parseFloat(e.wholesale_unit_price).toFixed(2)),de.push(o)}ue(Object(i.a)(de)),bt(),C.products=[];for(var l=0;l<de.length;l++)C.products.push({product_id:de[l].product_id,quantity:parseFloat(de[l].quantity),unit:de[l].unit,purchase_unit_price:parseFloat(de[l].purchase_unit_price),retail_unit_price:parseFloat(de[l].retail_unit_price),wholesale_unit_price:parseFloat(de[l].wholesale_unit_price)});S(Object(h.a)({},C))}var We=Object(s.useState)(0),Ze=Object(o.a)(We,2),Xe=Ze[0],Je=Ze[1];var Ye=Object(s.useState)(0),$e=Object(o.a)(Ye,2),et=$e[0],at=$e[1];var st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],it=nt[1];var ot=Object(s.useState)(0),lt=Object(o.a)(ot,2),jt=lt[0],ut=lt[1];function bt(){!function(){Xe=0;for(var e=0;e<de.length;e++)Xe+=parseFloat(de[e].purchase_unit_price)*parseFloat(de[e].quantity);Xe=Xe.toFixed(2),Je(Xe)}(),C.is_discount_percent?C.discount_percent>=0&&Xe>0&&(C.discount=parseFloat(Xe*parseFloat(C.discount_percent/100)).toFixed(2),S(Object(h.a)({},C))):C.discount>=0&&Xe>0&&(jt=parseFloat(100*parseFloat(C.discount/Xe)).toFixed(2),ut(jt),C.discount_percent=jt,S(Object(h.a)({},C))),et=0,Xe>0&&(et=(parseFloat(parseFloat(C.vat_percent)/100)*(parseFloat(Xe)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount))).toFixed(2),console.log("vatPrice:",et)),at(et),ct=0,Xe>0&&(ct=(parseFloat(Xe)+parseFloat(C.shipping_handling_fees)-parseFloat(C.discount)+parseFloat(et)).toFixed(2)),it(ct)}var ht=Object(s.useRef)();var pt=Object(s.useRef)();function mt(){pt.current.open()}var xt=Object(s.useRef)();var Ot=Object(s.useRef)();var ft=Object(s.useRef)();var gt=Object(s.useRef)();function vt(e){gt.current.open(e)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ke,{ref:gt,openUpdateForm:function(e){pt.current.open(e)},openCreateForm:mt}),Object(v.jsx)(tt,{ref:pt,showToastMessage:e.showToastMessage,openDetailsView:vt}),Object(v.jsx)(P,{ref:ht,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Ot,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:ft,showToastMessage:e.showToastMessage}),Object(v.jsx)(ma,{ref:xt,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Pe,size:"xl",fullscreen:!0,onHide:Ie,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:C.id?"Update Purchase #"+C.code:"Create New Purchase"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsx)(je,{}),C.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){Ie(),e.openDetailsView(C.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:Ge,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",C.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:Ie,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:Ge,children:[g.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Purchase to Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:E,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),S(Object(h.a)({},C)),void I([]);C.store_id=e[0].id,S(Object(h.a)({},C)),I(e)},options:R,placeholder:"Select Store",selected:M,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ze.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){ht.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]}),C.store_id&&!c.store_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Purchase From Vendor*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"vendor_id",labelKey:"search_label",isLoading:$,isInvalid:!!c.vendor_id,onChange:function(e){if(c.vendor_id="",r(c),0===e.length)return c.vendor_id="Invalid Vendor selected",r(c),C.vendor_id="",S(Object(h.a)({},C)),void X([]);C.vendor_id=e[0].id,S(Object(h.a)({},C)),X(e)},options:H,placeholder:"Type name or mob",selected:K,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ee.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){xt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.vendor_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vendor_id]}),C.vendor_id&&!c.vendor_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Vendor Invoice No. (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:C.vendor_invoice_no?C.vendor_invoice_no:"",type:"string",onChange:function(e){c.vendor_invoice_no="",r(Object(h.a)({},c)),C.vendor_invoice_no=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",id:"vendor_invoice_no",placeholder:"Vendor Invoice No."}),c.vendor_invoice_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vendor_invoice_no]}),C.vendor_invoice_no&&!c.rack&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsx)("label",{className:"form-label",children:"Product*"}),Object(v.jsx)(q.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Ve,isLoading:pe,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(h.a)({},c)),C.store_id&&Qe(e[0]),He(!1)},options:se,selected:ie,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){qe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:mt,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):"",ie[0]&&ie[0].id&&!c.product_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{style:{width:"2%"},children:"Remove"}),Object(v.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(v.jsx)("th",{style:{width:"8%"},children:"Part No."}),Object(v.jsx)("th",{style:{width:"26%"},className:"text-start",children:"Name"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Qty"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Purchase Unit Price"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Wholesale Unit Price"}),Object(v.jsx)("th",{style:{width:"11%"},children:"Retail Unit Price"}),Object(v.jsx)("th",{style:{width:"15%"},children:"Purchase Price"})]})}),Object(v.jsx)("tbody",{children:de.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=de.indexOf(e);t>-1&&de.splice(t,1),ue(Object(i.a)(de)),bt()}(e)},children:Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){vt(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(v.jsxs)("td",{style:{width:"155px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(h.a)({},c)),a.target.value?0===a.target.value?(c["quantity_"+t]="Invalid Quantity should be > 0",de[t].quantity=parseFloat(a.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),bt(),de[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",de[t].quantity),ue(Object(i.a)(de)),void bt()):(c["quantity_"+t]="Invalid Quantity",de[t].quantity=a.target.value,ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:de[t].unit?de[t].unit:"Units"})]}),c["quantity_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.purchase_unit_price,className:"form-control",placeholder:"Purchase Unit Price",onChange:function(e){return c["purchase_unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["purchase_unit_price_"+t]="Purchase Unit Price should be > 0",de[t].purchase_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c)):(de[t].purchase_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].purchase_unit_price:",de[t].purchase_unit_price),ue(Object(i.a)(de)),void bt()):(c["purchase_unit_price_"+t]="Invalid Purchase Unit Price",de[t].purchase_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["purchase_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["purchase_unit_price_"+t]]})]}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.wholesale_unit_price,className:"form-control",placeholder:"Wholesale Unit Price",onChange:function(e){return c["wholesale_unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["wholesale_unit_price_"+t]="Wholesale Unit Price should be > 0",de[t].wholesale_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c)):(de[t].wholesale_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].wholesale_unit_price:",de[t].wholesale_unit_price),ue(Object(i.a)(de)),void bt()):(c["wholesale_unit_price_"+t]="Invalid Wholesale Unit Price",de[t].wholesale_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["wholesale_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["wholesale_unit_price_"+t]]})]}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.retail_unit_price,className:"form-control",placeholder:"Retail Unit Price",onChange:function(e){return c["retail_unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["retail_unit_price_"+t]="Retail Unit Price should be > 0",de[t].retail_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c)):(de[t].retail_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].retail_unit_price:",de[t].retail_unit_price),ue(Object(i.a)(de)),void bt()):(c["retail_unit_price_"+t]="Invalid Retail Unit Price",de[t].retail_unit_price=parseFloat(e.target.value),ue(Object(i.a)(de)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["retail_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["retail_unit_price_"+t]]})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{style:{width:"90%"},colSpan:"8",className:"text-end",children:"Total"}),Object(v.jsx)("td",{style:{width:"10%"},className:"text-end",children:Object(v.jsx)(x.a,{value:Xe,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),c.shipping_handling_fees="",r(Object(h.a)({},c)),void bt()):parseFloat(e.target.value)<0?(C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),c.shipping_handling_fees="Shipping / Handling Fees should be > 0",r(Object(h.a)({},c)),void bt()):e.target.value?(c.shipping_handling_fees="",r(Object(h.a)({},c)),C.shipping_handling_fees=parseFloat(e.target.value),S(Object(h.a)({},C)),void bt()):(C.shipping_handling_fees="",c.shipping_handling_fees="Invalid Shipping / Handling Fees",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}})," SAR",c.shipping_handling_fees&&Object(v.jsx)("div",{style:{color:"red"},children:c.shipping_handling_fees})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount  ",Object(v.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:C.discount_percent,onChange:function(e){return C.is_discount_percent=!0,0===parseFloat(e.target.value)?(C.discount_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),c.discount_percent="",r(Object(h.a)({},c)),void bt()):parseFloat(e.target.value)<0?(C.discount_percent=parseFloat(e.target.value),C.discount=0,S(Object(h.a)({},C)),c.discount_percent="Discount percent should be >= 0",r(Object(h.a)({},c)),void bt()):e.target.value?(c.discount_percent="",c.discount="",r(Object(h.a)({},c)),C.discount_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),void bt()):(C.discount_percent="",C.discount=0,c.discount_percent="Invalid Discount Percent",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.discount_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount_percent})]}),Object(v.jsxs)("td",{className:"text-end",children:[Object(v.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:C.discount,onChange:function(e){return C.is_discount_percent=!1,0===parseFloat(e.target.value)?(C.discount=parseFloat(e.target.value),S(Object(h.a)({},C)),c.discount="",r(Object(h.a)({},c)),void bt()):parseFloat(e.target.value)<0?(C.discount=parseFloat(e.target.value),C.discount_percent=0,S(Object(h.a)({},C)),c.discount="Discount should be >= 0",r(Object(h.a)({},c)),void bt()):e.target.value?(c.discount="",c.discount_percent="",r(Object(h.a)({},c)),C.discount=parseFloat(e.target.value),S(Object(h.a)({},C)),void bt()):(C.discount="",C.discount_percent=0,c.discount="Invalid Discount",S(Object(h.a)({},C)),bt(),void r(Object(h.a)({},c)))}})," SAR",c.discount&&Object(v.jsx)("div",{style:{color:"red"},children:c.discount})]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"8",className:"text-end",children:[" VAT  ",Object(v.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:C.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(C.vat_percent=parseFloat(e.target.value),S(Object(h.a)({},C)),c.vat_percent="",r(Object(h.a)({},c)),void bt()):parseFloat(e.target.value)<0?(C.vat_percent=parseFloat(e.target.value),at(et=0),S(Object(h.a)({},C)),c.vat_percent="Vat percent should be >= 0",r(Object(h.a)({},c)),void bt()):e.target.value?(c.vat_percent="",r(Object(h.a)({},c)),C.vat_percent=e.target.value,bt(),S(Object(h.a)({},C)),void console.log(C)):(C.vat_percent="",at(et=0),c.vat_percent="Invalid vat percent",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))}}),"%",c.vat_percent&&Object(v.jsx)("div",{style:{color:"red"},children:c.vat_percent})]}),Object(v.jsx)("td",{className:"text-end",children:Object(v.jsx)(x.a,{value:et,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-end",children:Object(v.jsx)(x.a,{value:ct,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})})}),C.id?"":Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return c.status="Invalid Payment Method",void r(Object(h.a)({},c));c.payment_method="",r(Object(h.a)({},c)),C.payment_method=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account  / Debit / Credit Card"})]}),c.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_method]})]})]}),C.id?"":Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_status,onChange:function(e){if(console.log("Inside onchange payment Status"),!e.target.value)return c.status="Invalid Payment Status",void r(Object(h.a)({},c));c.payment_status="",r(Object(h.a)({},c)),C.payment_status=e.target.value,"paid_partially"!==C.payment_status&&(C.partial_payment_amount=0),S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"paid",children:"Paid"}),Object(v.jsx)("option",{value:"not_paid",children:"Not Paid"}),Object(v.jsx)("option",{value:"paid_partially",children:"Paid Partially"})]}),c.payment_status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_status]})]})]}),C.id||"paid_partially"!==C.payment_status?"":Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Patial Payment Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:C.partial_payment_amount,onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?(C.partial_payment_amount=parseFloat(e.target.value),c.partial_payment_amount="",C.partial_payment_amount>=ct?(c.partial_payment_amount="Partial payment cannot be >= "+ct,void r(Object(h.a)({},c))):(r(Object(h.a)({},c)),S(Object(h.a)({},C)),void console.log(C))):(C.partial_payment_amount=e.target.value,c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Amount"}),c.partial_payment_amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.partial_payment_amount]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:C.date_str?new Date(C.date_str):null,value:C.date_str?Object(O.default)(new Date(C.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),C.date_str=e,S(Object(h.a)({},C))}}),c.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:Ie,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:Ge,children:j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":C.id?"Update":"Create"})]})]})})]})]})})),Oa=xa,fa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){R=[],D([]),L=[],z([]),[],G([]),C={vat_percent:15,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"purchase_returned",payment_status:"paid",payment_method:"cash"},g.get("user_id")&&(L=[{id:g.get("user_id"),name:g.get("user_name")}],C.purchase_returned_by=g.get("user_id"),S(Object(h.a)({},C)),z(Object(i.a)(L))),S(Object(h.a)({},C)),e&&function(e){console.log("inside get PurchaseReturned id:",e);var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/purchase-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:for(r({}),console.log("Response:"),console.log(n),o=n.result,(C=o).is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,C.status="purchase_returned",S(Object(h.a)({},C)),console.log("formData1.status:",C.status),console.log("purchaseReturn.products:",o.products),l=o.products,R=[],d=0;d<l.length;d++)l[d].quantity>0?l[d].selected=!0:l[d].selected=!1,R.push(l[d]),l[d].purchase_unit_price=l[d].purchasereturn_unit_price;D(Object(i.a)(R)),S(Object(h.a)({},C)),Oe(),S(Object(h.a)({},C));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(e),t&&function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:g.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:for(r({}),console.log("Response:"),console.log(n),o=n.result,(C={date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),purchase_id:o.id,purchase_code:o.code,store_id:o.store_id,vendor_id:o.vendor_id,vat_percent:o.vat_percent,status:o.status,purchase_returned_by:o.order_placed_by,purchase_returned_by_signature_id:o.order_placed_by_signature_id,is_discount_percent:o.is_discount_percent,discount_percent:o.discount_percent}).discount=0,C.is_discount_percent?C.discountValue=C.discount_percent:C.discountValue=C.discount,C.discountValue=0,C.status="purchase_returned",S(Object(h.a)({},C)),console.log("formData1.status:",C.status),l=o.products,R=[],d=0;d<l.length;d++)l[d].selected=!1,j=l[d].quantity-l[d].quantity_returned,l[d].quantity=j,j>0&&R.push(l[d]);D(Object(i.a)(R)),S(Object(h.a)({},C)),Oe(),S(Object(h.a)({},C));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f(!1),r(e)}))}(t),Y(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-purchase return.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],f=d[1],g=new y.a,_=Object(s.useState)({vat_percent:10,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(O.default)(new Date,"MMM dd yyyy"),status:"purchase_returned"}),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)([]),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)([]),F=Object(o.a)(A,2),M=(F[0],F[1],Object(s.useState)([])),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=(U[0],U[1],Object(s.useState)([])),V=Object(o.a)(B,2),H=(V[0],V[1],Object(s.useState)([])),q=Object(o.a)(H,2),G=(q[0],q[1]),W=Object(s.useState)(!1),Z=Object(o.a)(W,2),K=(Z[0],Z[1],Object(s.useState)(!1)),X=Object(o.a)(K,2),J=X[0],Y=X[1];function $(){Y(!1)}function ee(t){console.log("formData.status:"+C.status),t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",R),C.products=[];for(var a=0;a<R.length;a++)R[a].selected&&C.products.push({product_id:R[a].product_id,quantity:parseFloat(R[a].quantity),unit:R[a].unit,purchasereturn_unit_price:parseFloat(R[a].purchase_unit_price)});if(C.discount=parseFloat(C.discount),C.discount_percent=parseFloat(C.discount_percent),C.vat_percent=parseFloat(C.vat_percent),console.log("formData.discount:",C.discount),"paid_partially"===C.payment_status&&!C.partial_payment_amount&&0!==C.partial_payment_amount)return c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount<=0)return c.partial_payment_amount="Partial payment should be > 0 ",void r(Object(h.a)({},c));if("paid_partially"===C.payment_status&&C.partial_payment_amount>=je)return c.partial_payment_amount="Partial payment cannot be >= "+je,void r(Object(h.a)({},c));if(!C.discountValue&&0!==C.discountValue)return c.discount="Invalid Discount",void r(Object(h.a)({},c));var s="/v1/purchase-return",n="POST";C.id&&(s="/v1/purchase-return/"+C.id,n="PUT");var i={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.get("access_token")},body:JSON.stringify(C)};f(!0),fetch(s,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),f(!1),console.log("Response:"),console.log(c),e.showToastMessage("Purchase Return Created Successfully!","success"),e.refreshList&&e.refreshList(),$(),o=c.result.id,fe.current.open(o);case 18:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){f(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseReturned!","danger")}))}Object(s.useEffect)((function(){g.get("access_token")||(window.location="/")}));var te=Object(s.useState)(0),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1];var ce=Object(s.useState)(0),re=Object(o.a)(ce,2),ie=re[0],oe=re[1];var le=Object(s.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1];var be=Object(s.useState)(0),he=Object(o.a)(be,2),pe=he[0],xe=he[1];function Oe(){!function(){se=0;for(var e=0;e<R.length;e++)R[e].selected&&(se+=parseFloat(R[e].purchase_unit_price)*parseFloat(R[e].quantity));se=se.toFixed(2),ne(se)}(),C.is_discount_percent?function(){if(!C.discountValue)return C.discount=0,C.discount_percent=0,void S(Object(h.a)({},C));C.discount_percent=C.discountValue,C.discount_percent>0&&se>0&&(C.discount=parseFloat(se*parseFloat(C.discount_percent/100)).toFixed(2)),S(Object(h.a)({},C))}():function(){if(!C.discountValue)return C.discount=0,C.discount_percent=0,void S(Object(h.a)({},C));C.discount=C.discountValue,C.discount>0&&se>0&&(pe=parseFloat(100*parseFloat(C.discount/se)).toFixed(2),xe(pe),C.discount_percent=pe,S(Object(h.a)({},C)))}(),se>0&&(ie=(parseFloat(C.vat_percent)/100*parseFloat(se-C.discount)).toFixed(2),console.log("vatPrice:",ie),oe(ie)),se>0&&(je=(parseFloat(se)-parseFloat(C.discount)+parseFloat(ie)).toFixed(2),ue(je))}var fe=Object(s.useRef)();var ge=Object(s.useRef)(),ve=Object(s.useRef)();var _e=Object(s.useRef)(),Ne=Object(s.useRef)();var Ce=Object(s.useRef)();var Se=Object(s.useRef)();function we(e){Se.current.open(e)}var Te=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ke,{ref:Se,openUpdateForm:function(e){ve.current.open(e)},openCreateForm:function(){ve.current.open()}}),Object(v.jsx)(tt,{ref:ve,showToastMessage:e.showToastMessage,openDetailsView:we}),Object(v.jsx)(ke,{ref:fe}),Object(v.jsx)(P,{ref:ge,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Ne,showToastMessage:e.showToastMessage}),Object(v.jsx)(dt,{ref:Ce,showToastMessage:e.showToastMessage}),Object(v.jsx)(ma,{ref:_e,showToastMessage:e.showToastMessage}),Object(v.jsx)(me,{ref:Te}),Object(v.jsxs)(p.a,{show:J,size:"xl",onHide:$,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:C.id?"Update Purchase Return #"+C.code+" for purchase #"+C.purchase_code:"Create Purchase Return for purchase #"+C.purchase_code}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsx)(ye,{}),Object(v.jsxs)(m.a,{variant:"primary",className:"mb-3",onClick:ee,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",C.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:$,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[0===R.length&&"Already Returned All purchased products",R.length>0&&Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:ee,children:[Object(v.jsx)("h2",{children:"Select Products"}),c.product_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",height:"400px",overflowY:"scroll"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"Select"}),Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Part No."}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Purchase Return Unit Price"}),Object(v.jsx)("th",{children:"Purchase Return Price"})]})}),Object(v.jsx)("tbody",{children:R.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"checkbox",checked:R[t].selected,onChange:function(e){console.log("e.target.value:",e.target.value),R[t].selected=!R[t].selected,!0===R[t].selected?0===R[t].quantity&&(R[t].quantity=1):R[t].quantity=0,D(Object(i.a)(R)),Oe()}})}),Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){we(e.product_id)},children:e.name}),Object(v.jsxs)("td",{style:{width:"155px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(h.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be >0",R[t].quantity=parseFloat(a.target.value),D(Object(i.a)(R)),r(Object(h.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),Oe(),R[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",R[t].quantity),D(Object(i.a)(R)),void Oe()):(c["quantity_"+t]="Invalid Quantity",R[t].quantity=a.target.value,D(Object(i.a)(R)),r(Object(h.a)({},c)),void console.log("errors:",c))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:R[t].unit?R[t].unit:"Units"})]}),c["quantity_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]}),Object(v.jsxs)("td",{style:{width:"180px"},children:[Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:e.purchase_unit_price,className:"form-control",placeholder:"Purchase Return Unit Price",onChange:function(e){return c["purchasereturned_unit_price_"+t]="",r(Object(h.a)({},c)),e.target.value?0===e.target.value?(c["purchasereturned_unit_price_"+t]="Purchase Return Unit Price should be >0",R[t].purchase_unit_price=parseFloat(e.target.value),D(Object(i.a)(R)),void r(Object(h.a)({},c))):(R[t].purchase_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].purchase_unit_price:",R[t].purchase_unit_price),D(Object(i.a)(R)),void Oe()):(c["purchasereturned_unit_price_"+t]="Invalid Purchase Return Unit Price",R[t].purchase_unit_price=parseFloat(e.target.value),D(Object(i.a)(R)),void r(Object(h.a)({},c)))}}),Object(v.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"SAR"})]}),c["purchasereturned_unit_price_"+t]&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["purchasereturned_unit_price_"+t]]})]}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})}))})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"5"}),Object(v.jsx)("th",{className:"text-end",children:"Total"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:se,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsxs)("th",{colSpan:"6",className:"text-end",children:["Discount(  ",C.discount_percent+"%",")"]}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:C.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{colSpan:"5",className:"text-end",children:"VAT"}),Object(v.jsx)("td",{className:"text-center",children:C.vat_percent+"%"}),Object(v.jsx)("td",{className:"text-center",children:Object(v.jsx)(x.a,{value:ie,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{colSpan:"5"}),Object(v.jsx)("th",{className:"text-end",children:"Net Total"}),Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)(x.a,{value:je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})})}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:C.date_str?new Date(C.date_str):null,value:C.date_str?Object(O.default)(new Date(C.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),C.date_str=e,S(Object(h.a)({},C))}}),c.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]}),C.date_str&&!c.date_str&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Vendor Invoice No. (Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:C.vendor_invoice_no?C.vendor_invoice_no:"",type:"string",onChange:function(e){c.vendor_invoice_no="",r(Object(h.a)({},c)),C.vendor_invoice_no=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",id:"vendor_invoice_no",placeholder:"Vendor Invoice No."}),c.vendor_invoice_no&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vendor_invoice_no]}),C.vendor_invoice_no&&!c.rack&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"VAT %*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:C.vat_percent,type:"number",onChange:function(e){if(console.log("Inside onchange vat percent"),isNaN(e.target.value))return c.vat_percent="Invalid Quantity",void r(Object(h.a)({},c));c.vat_percent="",r(Object(h.a)({},c)),C.vat_percent=e.target.value,S(Object(h.a)({},C)),Oe(),console.log(C)},className:"form-control",id:"validationCustom01",placeholder:"VAT %","aria-label":"Select Store","aria-describedby":"button-addon1"}),c.vat_percent&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_percent]}),C.vat_percent&&!c.vat_percent&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Discount*"}),Object(v.jsx)(at.a.Check,{type:"switch",id:"custom-switch",label:"%",value:C.is_discount_percent,checked:C.is_discount_percent?"checked":null,onChange:function(e){C.is_discount_percent=!C.is_discount_percent,console.log("e.target.value:",C.is_discount_percent),S(Object(h.a)({},C)),Oe()}}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:C.discountValue,type:"number",onChange:function(e){return 0===parseFloat(e.target.value)?(C.discountValue=parseFloat(e.target.value),Oe(),S(Object(h.a)({},C)),c.discount="",void r(Object(h.a)({},c))):e.target.value?(c.discount="",r(Object(h.a)({},c)),console.log("e.target.value:",e.target.value),C.discountValue=e.target.value,Oe(),void S(Object(h.a)({},C))):(console.log("inside invalid"),C.discountValue="",c.discount="Invalid Discount",S(Object(h.a)({},C)),void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Discount","aria-label":"Select Customer","aria-describedby":"button-addon2"}),c.discount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.discount]}),!c.discount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{onChange:function(e){if(console.log("Inside onchange status"),!e.target.value)return c.status="Invalid Status",void r(Object(h.a)({},c));c.status="",r(Object(h.a)({},c)),C.status=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"purchase_returned",children:"Purchase Returned"}),Object(v.jsx)("option",{value:"pending",children:"Pending"}),Object(v.jsx)("option",{value:"cancelled",children:"Cancelled"}),Object(v.jsx)("option",{value:"dispatched",children:"Dispatched"})]}),c.status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.status]}),C.status&&!c.status&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return c.status="Invalid Payment Method",void r(Object(h.a)({},c));c.payment_method="",r(Object(h.a)({},c)),C.payment_method=e.target.value,S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),c.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment Status*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:C.payment_status,onChange:function(e){if(console.log("Inside onchange payment Status"),!e.target.value)return c.status="Invalid Payment Status",void r(Object(h.a)({},c));c.payment_status="",r(Object(h.a)({},c)),C.payment_status=e.target.value,"paid_partially"!==C.payment_status&&(C.partial_payment_amount=0),S(Object(h.a)({},C)),console.log(C)},className:"form-control",children:[Object(v.jsx)("option",{value:"paid",children:"Paid"}),Object(v.jsx)("option",{value:"not_paid",children:"Not Paid"}),Object(v.jsx)("option",{value:"paid_partially",children:"Paid Partially"})]}),c.payment_status&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.payment_status]})]})]}),"paid_partially"===C.payment_status?Object(v.jsxs)("div",{className:"col-md-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Patial Payment Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"number",value:C.partial_payment_amount,onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?(C.partial_payment_amount=parseFloat(e.target.value),c.partial_payment_amount="",C.partial_payment_amount>=je?(c.partial_payment_amount="Partial payment cannot be >= "+je,void r(Object(h.a)({},c))):(r(Object(h.a)({},c)),S(Object(h.a)({},C)),void console.log(C))):(C.partial_payment_amount=e.target.value,c.partial_payment_amount="Invalid partial payment amount",void r(Object(h.a)({},c)))},className:"form-control",id:"validationCustom02",placeholder:"Amount"}),c.partial_payment_amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.partial_payment_amount]})]})]}):"",Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:$,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:ee,children:j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":C.id?"Update":"Create"})]})]})]})]})]})})),ga=fa,va=Et.a.ExcelFile,_a=Et.a.ExcelFile.ExcelSheet;var ya=function(e){var t=new y.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(s.useState)(0),p=Object(o.a)(h,2),f=p[0],g=p[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(0),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)([]),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(5),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(1),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(0),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(0),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(0),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),xe=pe[0],Oe=pe[1],fe=new Date,ge=Object(s.useState)(""),ve=Object(o.a)(ge,2),_e=ve[0],ye=ve[1],Ne=Object(s.useState)(""),Ce=Object(o.a)(Ne,2),Se=Ce[0],we=Ce[1],ke=Object(s.useState)(""),Te=Object(o.a)(ke,2),Re=Te[0],De=Te[1],Ae=Object(s.useState)(!1),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Me=Fe[1],Ie=Object(s.useState)(""),Le=Object(o.a)(Ie,2),ze=Le[0],Ee=Le[1],Ue=Object(s.useState)(""),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)(""),Ge=Object(o.a)(qe,2),Qe=Ge[0],We=Ge[1],Ze=Object(s.useState)(!1),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Je=Ke[1],Ye=Object(s.useState)(""),$e=Object(o.a)(Ye,2),et=$e[0],tt=$e[1],at=Object(s.useState)(""),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)(""),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)(!1),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)(!1),pt=Object(o.a)(ht,2),mt=pt[0],xt=pt[1],Ot=Object(s.useState)([]),ft=Object(o.a)(Ot,2),gt=ft[0],vt=ft[1],_t=Object(s.useState)([]),yt=Object(o.a)(_t,2),Nt=yt[0],Ct=yt[1],St=Object(s.useState)([]),wt=Object(o.a)(St,2),kt=wt[0],Tt=wt[1],Rt=Object(s.useState)([]),Dt=Object(o.a)(Rt,2),At=Dt[0],Ft=Dt[1],Pt=Object(s.useState)([]),Mt=Object(o.a)(Pt,2),It=Mt[0],Lt=Mt[1];Object(s.useEffect)((function(){Ta()}),[]);var zt=Object(s.useState)([]),Et=Object(o.a)(zt,2),Ut=Et[0],Bt=Et[1],Vt=Object(s.useState)([]),Ht=Object(o.a)(Vt,2),qt=Ht[0],Gt=Ht[1],Wt=Object(s.useState)("Purchase Report"),Kt=Object(o.a)(Wt,2),Xt=Kt[0],Jt=Kt[1],$t=Object(s.useState)(!1),ta=Object(o.a)($t,2),aa=ta[0],sa=ta[1];function na(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<Ut.length;t++){var a=Object(O.default)(new Date(Ut[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(Ut[t])}console.log("groupedByDate:",e),qt=[{columns:[{title:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a - S/L No.",width:{wch:18},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 - Date of Invoice",width:{wch:25},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 - Invoice Number",width:{wch:25},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 - Supplier Name",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0631\u0642\u0645\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u0644\u0644\u0645\u0648\u0631\u062f - Supplier VAT No",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0645\u0628\u0644\u063a \u0642\u0628\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 - Amount Before VAT",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u062a\u062e\u0641\u064a\u0636 - Discount",width:{wch:15},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0645\u0628\u0644\u063a \u0628\u0639\u062f \u0627\u0644\u062e\u0635\u0645 - Amount After Discount",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 -  VAT Amount",width:{wch:20},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0634\u0627\u0645\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 - Total Amount after VAT",width:{wch:35},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}}],data:[]}];var s=0,n=0,c=0,r=0,i=0,o=0;for(var l in e){console.log("purchaseDate:",l),0,0,0;for(t=0;t<e[l].length>0;t++){o++;var d=e[l][t],j=d.vendor_invoice_no?d.vendor_invoice_no+" / "+d.code:d.code,u="N/A";d.vendor&&d.vendor.vat_no&&(u=d.vendor.vat_no);var b=d.total+d.shipping_handling_fees,h=d.total+d.shipping_handling_fees-d.discount,p=d.total+d.shipping_handling_fees-d.discount+d.vat_price;s+=b,i+=d.discount,c+=h,r+=d.vat_price,n+=p,qt[0].data.push([{value:o,style:{alignment:{horizontal:"center"}}},{value:l,style:{alignment:{horizontal:"center"}}},{value:j,style:{alignment:{horizontal:"center"}}},{value:d.vendor_name},{value:u,style:{alignment:{horizontal:"center"}}},{value:b.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:d.discount.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:h.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:d.vat_price.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:p.toFixed(2),style:{alignment:{horizontal:"right"}}}])}}qt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),qt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:"TOTAL",style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:s.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:i.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:c.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:r.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:n.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}}]),Gt(qt),console.log("excelData:",qt)}function ca(){Xt="Purchase Report",la.from_date&&la.to_date?Xt+=" - From "+la.from_date+" to "+la.to_date:la.from_date?Xt+=" - From "+la.from_date+" to "+Object(O.default)(new Date,"dd-MMM-yyyy"):la.to_date?Xt+=" - Upto "+la.to_date:la.date_str&&(Xt+=" of "+la.date_str),Jt(Xt)}function ra(){return ra=Object(b.a)(u.a.mark((function e(){var a,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},s="select=id,code,vendor_id,vendor.id,vendor.vat_no,vendor_invoice_no,date,total,net_total,shipping_handling_fees,discount_percent,discount,products,vendor_name,created_at,updated_at,vat_price",t.get("store_id")&&(la.store_id=t.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),la.timezone_offset=parseFloat(c/60),da(la),""!==(r=ya(la))&&(r="&"+r),i=500,o=[],l=1,ca();case 14:return aa=!0,sa(!0),e.next=19,fetch("/v1/purchase?"+s+r+"&sort="+xa+ba+"&page="+l+"&limit="+i,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(bt(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 19:if(0!==(d=e.sent).length){e.next=22;break}return e.abrupt("break",26);case 22:o=o.concat(d),l++;case 24:e.next=14;break;case 26:Ut=o,Bt(o),console.log("allPurchases:",Ut),na(),aa=!1,sa(!1);case 32:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}var ia=Object(s.useState)({}),oa=Object(o.a)(ia,2),la=oa[0],da=oa[1],ja=Object(s.useState)("created_at"),ua=Object(o.a)(ja,2),ba=ua[0],ha=ua[1],pa=Object(s.useState)("-"),ma=Object(o.a)(pa,2),xa=ma[0],fa=ma[1];function ya(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Na(){return(Na=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestVendors"),""!==(s=ya({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/vendor?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,vt(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(){return(Ca=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),vt([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=ya({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,Tt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){la[e]=t,J(X=1),Ta()}function wa(e,t){if(!t)return X=1,la[e]="",J(X),void Ta();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(ye(t),we(""),De(""),la.from_date="",la.to_date="",la[e]=t):"from_date"===e?(we(t),ye(""),la.date="",la[e]=t):"to_date"===e?(De(t),ye(""),la.date="",la[e]=t):"created_at"===e?(Ee(t),He(""),We(""),la.created_at_from="",la.created_at_to="",la[e]=t):"updated_at"===e&&(tt(t),ct(""),lt(""),la.updated_at_from="",la.updated_at_to="",la[e]=t),"created_at_from"===e?(He(t),Ee(""),la.created_at="",la[e]=t):"created_at_to"===e&&(We(t),Ee(""),la.created_at="",la[e]=t),"updated_at_from"===e?(ct(t),tt(""),la.updated_at="",la[e]=t):"updated_at_to"===e&&(lt(t),tt(""),la.updated_at="",la[e]=t),J(X=1),Ta()}function ka(e,t){"created_by"===e?Ft(t):"vendor_id"===e?Ct(t):"status"===e&&Lt(t),la[e]=Object.values(t).map((function(e){return e.id})).join(","),J(X=1),Ta()}function Ta(){Gt(qt=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(la.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();la.timezone_offset=parseFloat(a/60),da(la);var s=ya(la);""!==s&&(s="&"+s),bt(!0),fetch("/v1/purchase?select=id,code,date,net_total,discount,vat_price,total,store_id,created_by_name,vendor_name,vendor_invoice_no,status,created_at,updated_at,net_retail_profit,net_wholesale_profit"+s+"&sort="+xa+ba+"&page="+X+"&limit="+V,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:bt(!1),xt(!1),E(n.result),o=parseInt((n.total_count+V-1)/V),te(o),ce(n.total_count),be((X-1)*V),le(n.result.length),c=n.meta.total_purchase,r(c),d=n.meta.vat_price,j(d),f=n.meta.shipping_handling_fees,g(f),C=n.meta.discount,S(C),R=n.meta.net_retail_profit,D(R),P=n.meta.net_wholesale_profit,M(P);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){bt(!1),xt(!1),console.log(e)}))}function Ra(e){ha(ba=e),fa(xa="-"===xa?"":"-"),Ta()}function Da(e){X=parseInt(e),J(X),Ta()}function Aa(e){Ma.current.open(e)}var Fa=Object(s.useRef)();function Pa(e){Fa.current.open(e)}var Ma=Object(s.useRef)();function Ia(){Ma.current.open()}var La=Object(s.useRef)(),za=Object(s.useRef)(),Ea=Object(s.useRef)(),Ua=Object(s.useRef)(),Ba=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Oa,{ref:Ma,refreshList:Ta,showToastMessage:e.showToastMessage,openDetailsView:Pa}),Object(v.jsx)(me,{ref:Fa,openUpdateForm:Aa,openCreateForm:Ia}),Object(v.jsx)(ga,{ref:La,showToastMessage:e.showToastMessage}),Object(v.jsx)(Zt,{ref:za,showToastMessage:e.showToastMessage,openDetailsView:function(e){Ea.current.open(e)}}),Object(v.jsx)(Qt,{ref:Ea,openUpdateForm:function(e){za.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsx)(ea,{ref:Ua,showToastMessage:e.showToastMessage,openDetailsView:function(e){Ba.current.open(e)}}),Object(v.jsx)(Yt,{ref:Ba,openUpdateForm:function(e){Ua.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Purchases: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Discounts: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:C.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Shipping/Handling fees: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:f.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT paid: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Expected Net Retail Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:R,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(v.jsxs)("h1",{className:"text-end",children:["Expected Net Wholesale Profit: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:P,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Purchases"})}),Object(v.jsxs)("div",{className:"col text-end",children:[Object(v.jsx)(va,{filename:Xt,element:qt.length>0?Object(v.jsx)(m.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Purchase Report"}):"",children:Object(v.jsx)(_a,{dataSet:qt,name:Xt})}),0==qt.length?Object(v.jsx)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return ra.apply(this,arguments)},children:aa?"Preparing..":"Purchase Report"}):"","\xa0\xa0",Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Ia,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===ne&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Purchases to display"})})}),Object(v.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){xt(!0),Ta()},variant:"primary",disabled:mt,children:[mt?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ut&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:ne>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:V,onChange:function(e){var t;t=e.target.value,V=parseInt(t),H(V),Ta()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{border:"solid 0px"},children:ee?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Da(e.selected+1)},pageRangeDisplayed:5,pageCount:ee,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:X-1}):""})}),Object(v.jsx)("div",{className:"row",children:ne>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ue+1,"-",ue+oe," of"," ",ne]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",X," of ",ee]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("code")},children:["ID","code"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("vendor_invoice_no")},children:["Vendor Invoice No.","vendor_invoice_no"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_invoice_no"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("vendor_name")},children:["Vendor","vendor_name"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("date")},children:["Date","date"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("net_total")},children:["Net Total","net_total"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("discount")},children:["Discount","discount"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("vat_price")},children:["VAT","vat_price"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"vat_price"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("retail_profit")},children:["Expected Net Retail Profit","net_retail_profit"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_retail_profit"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("wholesale_profit")},children:["Expected Net Wholesale Profit","net_wholesale_profit"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_wholesale_profit"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("created_by")},children:["Created By","created_by"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("status")},children:["Status","status"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"status"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("created_at")},children:["Created At","created_at"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ra("updated_at")},children:["Updated At","updated_at"===ba&&"-"===xa?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"updated_at"===ba&&""===xa?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return Sa("code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vendor_invoice_no",onChange:function(e){return Sa("vendor_invoice_no",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"vendor_id",labelKey:"search_label",onChange:function(e){ka("vendor_id",e)},options:gt,placeholder:"name or mob",selected:Nt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Na.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:_e,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ye(""),void wa("date_str","");wa("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Oe(!xe)},children:xe?"Less..":"More.."}),Object(v.jsx)("br",{}),xe?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:Se,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return we(""),void wa("from_date","");wa("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:Re,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return De(""),void wa("to_date","");wa("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return Sa("net_total",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"discount",onChange:function(e){return Sa("discount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return Sa("vat_price",e.target.value)},className:"form-control"})}),"true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_retail_profit",onChange:function(e){return Sa("net_retail_profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_wholesale_profit",onChange:function(e){return Sa("net_wholesale_profit",e.target.value)},className:"form-control"})}):"",Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){ka("created_by",e)},options:kt,placeholder:"Select Users",selected:At,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ca.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"status",labelKey:"name",onChange:function(e){ka("status",e)},options:[{id:"sent",name:"Sent"},{id:"pending",name:"Pending"},{id:"accepted",name:"Accepted"},{id:"rejected",name:"Rejected"},{id:"cancelled",name:"Cancelled"},{id:"deleted",name:"Deleted"}],placeholder:"Select Status",selected:It,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:ze,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Ee(""),void wa("created_at","");wa("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Me(!Pe)},children:Pe?"Less..":"More.."}),Object(v.jsx)("br",{}),Pe?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:Ve,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return He(""),void wa("created_at_from","");wa("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Qe,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return We(""),void wa("created_at_to","");wa("created_at_to",e)}})]}):null]}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"updated_at",value:et,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return tt(""),void wa("updated_at","");wa("updated_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Je(!Xe)},children:Xe?"Less..":"More.."}),Object(v.jsx)("br",{}),Xe?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"updated_at_from",value:nt,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ct(""),void wa("updated_at_from","");wa("updated_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"updated_at_to",value:ot,selected:fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return lt(""),void wa("updated_at_to","");wa("updated_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:z&&z.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:e.vendor_invoice_no}),Object(v.jsx)("td",{children:e.vendor_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),"true"===t.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.net_retail_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"","true"===t.get("admin")?Object(v.jsx)("td",{children:Object(v.jsx)(x.a,{value:e.net_wholesale_profit,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}):"",Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(v.jsx)("span",{className:"badge bg-success",children:e.status})}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsx)("td",{children:e.updated_at?Object(O.default)(new Date(e.updated_at),"MMM dd yyyy h:mma"):""}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Aa(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Pa(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsxs)("button",{className:"btn btn-dark btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Create Purchase Return",onClick:function(){var t;t=e.id,La.current.open(void 0,t)},children:[Object(v.jsx)("i",{className:"bi bi-arrow-left"})," Return"]}),Object(v.jsx)("button",{className:"btn btn-default btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Download",children:Object(v.jsx)("i",{className:"bi bi-download"})}),Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsxs)("ul",{className:"dropdown-menu",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,za.current.open(void 0,t)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Cash Discount"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){!function(e){Ua.current.open(void 0,e)}(e)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Payment"]})})]})]})]},e.code)}))})]})}),ee?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Da(e.selected+1)},pageRangeDisplayed:5,pageCount:ee,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:X-1}):""]})})})})]})]})},Na=Et.a.ExcelFile,Ca=Et.a.ExcelFile.ExcelSheet;var Sa=function(e){var t=new y.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],h=Object(s.useState)(0),p=Object(o.a)(h,2),f=p[0],g=p[1],_=Object(s.useState)([]),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(5),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(1),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(0),Z=Object(o.a)(G,2),X=Z[0],J=Z[1],Y=Object(s.useState)(0),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=new Date,ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(!1),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(""),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(""),Te=Object(o.a)(we,2),Re=Te[0],De=Te[1],Ae=Object(s.useState)(""),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Me=Fe[1],Ie=Object(s.useState)(!1),Le=Object(o.a)(Ie,2),ze=Le[0],Ee=Le[1],Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)([]),Ge=Object(o.a)(qe,2),Qe=Ge[0],We=Ge[1],Ze=Object(s.useState)([]),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Je=Ke[1],Ye=Object(s.useState)([]),$e=Object(o.a)(Ye,2),et=$e[0],tt=$e[1],at=Object(s.useState)([]),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)([]),it=Object(o.a)(rt,2),ot=it[0],lt=it[1];Object(s.useEffect)((function(){Wt()}),[]);var dt=Object(s.useState)([]),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)([]),pt=Object(o.a)(ht,2),mt=pt[0],xt=pt[1],Ot=Object(s.useState)("Purchase Return Report"),ft=Object(o.a)(Ot,2),gt=ft[0],vt=ft[1],_t=Object(s.useState)(!1),yt=Object(o.a)(_t,2),Nt=yt[0],Ct=yt[1];function St(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<ut.length;t++){var a=Object(O.default)(new Date(ut[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(ut[t])}console.log("groupedByDate:",e),mt=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:90}},{title:"Net Amount",width:{wpx:90}}],data:[]}];var s=0,n=0,c=0;for(var r in e){console.log("purchaseReturnDate:",r),mt[0].data.push([{value:"Inv Date: "+r}]);var i=0,o=0;for(t=0;t<e[r].length>0;t++){c++;var l=e[r][t],d=l.vendor_invoice_no?l.vendor_invoice_no+" / "+l.code:l.code;if(mt[0].data.push([{value:"Inv No ("+d+") - "+c+" ["+l.vendor_name+"]"}]),l.products){for(var j=0;j<l.products.length;j++){var u=l.products[j];mt[0].data.push([{value:u.name},{value:u.quantity.toFixed(2)},{value:u.unit?u.unit:"PCs"},{value:u.purchasereturn_unit_price?u.purchasereturn_unit_price.toFixed(2):0},{value:(u.purchasereturn_unit_price*u.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(u.purchasereturn_unit_price*u.quantity).toFixed(2)).toFixed(2)},{value:(u.purchasereturn_unit_price*u.quantity).toFixed(2)}])}mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:l.discount.toFixed(2)}]),mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Tax"},{value:l.vat_price.toFixed(2)}]),mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total"},{value:(l.total-l.discount).toFixed(2)}]),i+=l.total-l.discount,o+=l.vat_price}}mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Tax"},{value:o.toFixed(2)}]),mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total"},{value:i.toFixed(2)}]),s+=i,n+=o}mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Tax"},{value:n.toFixed(2)}]),mt[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount"},{value:s.toFixed(2)}]),xt(mt),console.log("excelData:",mt)}function wt(){gt="Purchase Return Report",Dt.from_date&&Dt.to_date?gt+=" - From "+Dt.from_date+" to "+Dt.to_date:Dt.from_date?gt+=" - From "+Dt.from_date+" to "+Object(O.default)(new Date,"dd-MMM-yyyy"):Dt.to_date?gt+=" - Upto "+Dt.to_date:Dt.date_str&&(gt+=" of "+Dt.date_str),vt(gt)}function kt(){return kt=Object(b.a)(u.a.mark((function e(){var a,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},s="select=id,code,vendor_invoice_no,date,total,net_total,discount_percent,discount,products,vendor_name,created_at,vat_price",t.get("store_id")&&(Dt.store_id=t.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),Dt.timezone_offset=parseFloat(c/60),At(Dt),""!==(r=Bt(Dt))&&(r="&"+r),i=500,o=[],l=1,wt();case 14:return Nt=!0,Ct(!0),e.next=19,fetch("/v1/purchase-return?"+s+r+"&sort="+Et+Mt+"&page="+l+"&limit="+i,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(Ee(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 19:if(0!==(d=e.sent).length){e.next=22;break}return e.abrupt("break",26);case 22:o=o.concat(d),l++;case 24:e.next=14;break;case 26:ut=o,bt(o),console.log("allPurchaseReturns:",ut),St(),Nt=!1,Ct(!1);case 32:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}var Tt=Object(s.useState)({}),Rt=Object(o.a)(Tt,2),Dt=Rt[0],At=Rt[1],Ft=Object(s.useState)("created_at"),Pt=Object(o.a)(Ft,2),Mt=Pt[0],It=Pt[1],Lt=Object(s.useState)("-"),zt=Object(o.a)(Lt,2),Et=zt[0],Ut=zt[1];function Bt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Vt(){return(Vt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestVendors"),""!==(s=Bt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/vendor?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,We(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(){return(Ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),We([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=Bt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,tt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t){Dt[e]=t,M(P=1),Wt()}function Gt(e,t){if(!t)return P=1,Dt[e]="",M(P),void Wt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(de(t),he(""),Oe(""),Dt.from_date="",Dt.to_date="",Dt[e]=t):"from_date"===e?(he(t),de(""),Dt.date="",Dt[e]=t):"to_date"===e?(Oe(t),de(""),Dt.date="",Dt[e]=t):"created_at"===e&&(Se(t),De(""),Me(""),Dt.created_at_from="",Dt.created_at_to="",Dt[e]=t),"created_at_from"===e?(De(t),Se(""),Dt.created_at="",Dt[e]=t):"created_at_to"===e&&(Me(t),Se(""),Dt.created_at="",Dt[e]=t),M(P=1),Wt()}function Qt(e,t){"created_by"===e?ct(t):"vendor_id"===e?Je(t):"status"===e&&lt(t),Dt[e]=Object.values(t).map((function(e){return e.id})).join(","),M(P=1),Wt()}function Wt(){xt(mt=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Dt.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Dt.timezone_offset=parseFloat(a/60),At(Dt);var s=Bt(Dt);""!==s&&(s="&"+s),Ee(!0),fetch("/v1/purchase-return?select=id,code,purchase_code,purchase_id,date,net_total,created_by_name,vendor_name,vendor_invoice_no,status,created_at"+s+"&sort="+Et+Mt+"&page="+P+"&limit="+R,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:Ee(!1),He(!1),S(n.result),o=parseInt((n.total_count+R-1)/R),E(o),H(n.total_count),te((P-1)*R),J(n.result.length),c=n.meta.total_purchase_return,r(c),d=n.meta.vat_price,j(d),f=n.meta.discount,g(f);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ee(!1),He(!1),console.log(e)}))}function Zt(e){It(Mt=e),Ut(Et="-"===Et?"":"-"),Wt()}function Kt(e){P=parseInt(e),M(P),Wt()}var Xt=Object(s.useRef)(),Jt=Object(s.useRef)(),Yt=Object(s.useRef)(),$t=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ga,{ref:Jt,refreshList:Wt,showToastMessage:e.showToastMessage}),Object(v.jsx)(ke,{ref:Xt}),Object(v.jsx)(da,{ref:Yt,showToastMessage:e.showToastMessage,openDetailsView:function(e){$t.current.open(e)}}),Object(v.jsx)(oa,{ref:$t,openUpdateForm:function(e){Yt.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Purchase Return: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Discounts: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:f.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Purchase Returns"})}),Object(v.jsxs)("div",{className:"col text-end",children:[Object(v.jsx)(Na,{filename:gt,element:mt.length>0?Object(v.jsx)(m.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Purchase Return Report"}):"",children:Object(v.jsx)(Ca,{dataSet:mt,name:gt})}),0==mt.length?Object(v.jsx)(m.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return kt.apply(this,arguments)},children:Nt?"Preparing..":"Purchase Return Report"}):"","\xa0\xa0"]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===V&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Purchase Returns to display"})})}),Object(v.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){He(!0),Wt()},variant:"primary",disabled:Ve,children:[Ve?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ze&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:R,onChange:function(e){var t;t=e.target.value,R=parseInt(t),D(R),Wt()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{border:"solid 0px"},children:z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Kt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""})}),Object(v.jsx)("div",{className:"row",children:V>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ee+1,"-",ee+X," of"," ",V]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",P," of ",z]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("code")},children:["ID","code"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("vendor_invoice_no")},children:["Vendor Invoice No.","vendor_invoice_no"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_invoice_no"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("vendor_name")},children:["Vendor","vendor_name"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("purchase_code")},children:["Purchase ID","code"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("date")},children:["Date","date"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("net_total")},children:["Net Total","net_total"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("created_by")},children:["Created By","created_by"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("status")},children:["Status","status"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"status"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Zt("created_at")},children:["Created At","created_at"===Mt&&"-"===Et?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Mt&&""===Et?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return qt("code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"vendor_invoice_no",onChange:function(e){return qt("vendor_invoice_no",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"vendor_id",labelKey:"search_label",onChange:function(e){Qt("vendor_id",e)},options:Qe,placeholder:"name or mob",selected:Xe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Vt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return qt("purchase_code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:le,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return de(""),void Gt("date_str","");Gt("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ce(!ne)},children:ne?"Less..":"More.."}),Object(v.jsx)("br",{}),ne?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:be,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void Gt("from_date","");Gt("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:xe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void Gt("to_date","");Gt("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return qt("net_total",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){Qt("created_by",e)},options:et,placeholder:"Select Users",selected:nt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ht.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"status",labelKey:"name",onChange:function(e){Qt("status",e)},options:[{id:"sent",name:"Sent"},{id:"pending",name:"Pending"},{id:"accepted",name:"Accepted"},{id:"rejected",name:"Rejected"},{id:"cancelled",name:"Cancelled"},{id:"deleted",name:"Deleted"}],placeholder:"Select Status",selected:ot,highlightOnlyResult:!0,multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Ce,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Se(""),void Gt("created_at","");Gt("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return _e(!ve)},children:ve?"Less..":"More.."}),Object(v.jsx)("br",{}),ve?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:Re,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return De(""),void Gt("created_at_from","");Gt("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:Pe,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Me(""),void Gt("created_at_to","");Gt("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:C&&C.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:e.vendor_invoice_no}),Object(v.jsx)("td",{children:e.vendor_name}),Object(v.jsx)("td",{children:e.purchase_code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.net_total," SAR"]}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(v.jsx)("span",{className:"badge bg-success",children:e.status})}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){var t;t=e.id,Jt.current.open(t)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Xt.current.open(t)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsx)("ul",{className:"dropdown-menu",children:Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Yt.current.open(void 0,t)},children:[Object(v.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Payment"]})})})]})]},e.code)}))})]})}),z?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Kt(e.selected+1)},pageRangeDisplayed:5,pageCount:z,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:P-1}):""]})})})})]})]})};var wa=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Z=W[0],X=W[1],J=Object(s.useState)(""),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),fe=Object(o.a)(xe,2),ge=fe[0],ve=fe[1];Object(s.useEffect)((function(){Le()}),[]);var _e=Object(s.useState)({}),ye=Object(o.a)(_e,2),Ne=ye[0],Ce=ye[1],Se=Object(s.useState)("created_at"),we=Object(o.a)(Se,2),ke=we[0],Te=we[1],Re=Object(s.useState)("-"),De=Object(o.a)(Re,2),Ae=De[0],Fe=De[1];function Pe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Me(){return(Me=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Pe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,me(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){if(!t)return f=1,Ne[e]="",g(f),void Le();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),Ne.created_at_from="",Ne.created_at_to="",Ne[e]=t),"created_at_from"===e?(ee(t),X(""),Ne.created_at="",Ne[e]=t):"created_at_to"===e&&(ne(t),X(""),Ne.created_at="",Ne[e]=t),g(f=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();Ne.timezone_offset=parseFloat(a/60),Ce(Ne);var s=Pe(Ne);""!==s&&(s="&"+s),oe(!0),fetch("/v1/vendor?select=id,name,created_by_name,created_at"+s+"&sort="+Ae+ke+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),E((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function ze(e){Te(ke=e),Fe(Ae="-"===Ae?"":"-"),Le()}function Ee(e){f=parseInt(e),g(f),Le()}function Ue(e){He.current.open(e)}var Be=Object(s.useRef)();function Ve(e){console.log("id:",e),Be.current.open(e)}var He=Object(s.useRef)();function qe(){He.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ma,{ref:He,refreshList:Le,showToastMessage:e.showToastMessage,openDetailsView:Ve}),Object(v.jsx)(Oe,{ref:Be,openUpdateForm:Ue,openCreateForm:qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Vendors"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Vendors to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bvendor:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bvendor:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ue(!0),Le()},variant:"primary",disabled:je,children:[je?Object(v.jsx)(w.a,{as:"span",animation:"bvendor",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ie&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Le()},className:"form-control pull-right",style:{bvendor:"solid 1px",bvendorColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bvendor:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",z+1,"-",z+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("name")},children:["Name","name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_by_name")},children:["Created By","created_by_name"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===ke&&"-"===Ae?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ke&&""===Ae?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return t="name",a=e.target.value,Ne[t]=a,g(f=1),void Le();var t,a},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ne[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Le()},options:pe,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Me.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Z,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ie("created_at","");Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return H(!V)},children:V?"Less..":"More.."}),Object(v.jsx)("br",{}),V?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ie("created_at_from","");Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ie("created_at_to","");Ie("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})};var ka=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),D=T[0],A=T[1],F=Object(s.useState)(0),M=Object(o.a)(F,2),I=M[0],L=M[1],z=Object(s.useState)(0),E=Object(o.a)(z,2),U=E[0],B=E[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,g(f=1),Ee()}function ze(e,t){if(!t)return f=1,Ce[e]="",g(f),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),g(f=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/store?select=id,name,code,created_by_name,created_at,vat_percent"+s+"&sort="+Fe+Te+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),A(n.total_count),B((f-1)*j),L(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){f=parseInt(e),g(f),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)();function Qe(){Ge.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(R,{ref:He,openUpdateForm:Ve,openCreateForm:Qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Stores"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){t.remove("store_name",{path:"/"}),t.remove("store_id",{path:"/"}),t.remove("vat_percent",{path:"/"}),window.location="/dashboard/stores"},children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Select All Stores"]})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Stores to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bstore:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bstore:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bstore",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bstore:"solid 1px",bstoreColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bstore:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",U+1,"-",U+I," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("name")},children:["Name","name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("code")},children:["Code","code"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return Le("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return Le("code",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ze("created_at","");ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(v.jsx)("br",{}),G?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void ze("created_at_from","");ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void ze("created_at_to","");ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[t.get("store_id")!==e.id?Object(v.jsxs)(m.a,{className:"btn btn-danger btn-sm",onClick:function(){!function(e){t.set("store_name",e.name,{path:"/",expires:new Date(Date.now()+31536e6)}),t.set("store_id",e.id,{path:"/",expires:new Date(Date.now()+31536e6)}),t.set("vat_percent",e.vat_percent,{path:"/",expires:new Date(Date.now()+31536e6)}),window.location="/dashboard/stores"}(e)},children:[Object(v.jsx)("i",{className:"bi bi-select"}),"SELECT"]}):"SELECTED",Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})};var Ta=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],L=Object(s.useState)(0),E=Object(o.a)(L,2),U=E[0],B=E[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)([]),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1];Object(s.useEffect)((function(){Ee()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)("created_at"),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)("-"),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];function Me(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Me({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ce[e]=t,g(f=1),Ee()}function ze(e,t){if(!t)return f=1,Ce[e]="",g(f),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),g(f=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),Se(Ce);var s=Me(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/customer?select=id,name,email,phone,created_by_name,created_at"+s+"&sort="+Fe+Te+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),B((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){Re(Te=e),Pe(Fe="-"===Fe?"":"-"),Ee()}function Be(e){f=parseInt(e),g(f),Ee()}function Ve(e){Ge.current.open(e)}var He=Object(s.useRef)();function qe(e){He.current.open(e)}var Ge=Object(s.useRef)();function Qe(){Ge.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z,{ref:Ge,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(v.jsx)(I,{ref:He,openUpdateForm:Ve,openCreateForm:Qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Customers"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Customers to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bcustomer:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bcustomer:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){he(!0),Ee()},variant:"primary",disabled:be,children:[be?Object(v.jsx)(w.a,{as:"span",animation:"bcustomer",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:le&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ee()},className:"form-control pull-right",style:{bcustomer:"solid 1px",bcustomerColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bcustomer:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",U+1,"-",U+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("mob")},children:["Phone","phone"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"phone"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("name")},children:["Name","name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("email")},children:["Email","email"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"email"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Fe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Fe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"phone",onChange:function(e){return Le("phone",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return Le("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"email",onChange:function(e){return Le("email",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Ee()},options:xe,placeholder:"Select Users",selected:ve,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){ze("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(v.jsx)("br",{}),G?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){ze("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){ze("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.phone}),Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.email}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})},Ra=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){r(c=e),b(!0)}}}));var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)({}),l=Object(o.a)(i,2),d=(l[0],l[1],new y.a,Object(s.useState)(!1)),j=Object(o.a)(d,2),u=j[0],b=j[1];function h(){b(!1)}var x=Object(s.useState)(!1),O=Object(o.a)(x,2),f=O[0],g=O[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:u,size:"xl",onHide:h,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:"Json "}),Object(v.jsx)("div",{className:"col align-self-end text-end",children:Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:h,"aria-label":"Close"})})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-md-12 align-self-end text-end",children:Object(v.jsx)(m.a,{variant:"primary",onClick:function(){var e=document.getElementById("data");navigator.clipboard.writeText(e.innerText),f=!0,g(!0)},children:f?"Copied":"Copy"})})}),Object(v.jsx)("code",{children:Object(v.jsx)("pre",{id:"data",children:JSON.stringify(c,null,2)})})]})]})})})),Da=a(659),Aa=a(657);var Fa=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(0),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)(1),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(0),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(0),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(!1),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(""),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],ie=ne[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(!1),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=Oe[0],ve=Oe[1],_e=Object(s.useState)([]),ye=Object(o.a)(_e,2),Ne=ye[0],Ce=ye[1],Se=Object(s.useState)([]),we=Object(o.a)(Se,2),ke=we[0],Te=we[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1];Object(s.useEffect)((function(){ft()}),[]);var Me=Object(s.useState)({}),Ie=Object(o.a)(Me,2),ze=Ie[0],Ee=Ie[1],Ue=Object(s.useState)("created_at"),Be=Object(o.a)(Ue,2),Ve=Be[0],He=Be[1],qe=Object(s.useState)("-"),Ge=Object(o.a)(qe,2),Qe=Ge[0],Ze=Ge[1];function Xe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function Je(){return(Je=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Xe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/product-category?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Te(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Xe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,ve(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t){ze[e]=t,_(g=1),ft()}function et(e,t){if(!t)return g=1,ze[e]="",_(g),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),ie(""),ze.created_at_from="",ze.created_at_to="",ze[e]=t),"created_at_from"===e?(ae(t),Y(""),ze.created_at="",ze[e]=t):"created_at_to"===e&&(ie(t),Y(""),ze.created_at="",ze[e]=t),_(g=1),ft()}function at(e,t){"created_by"===e?Ce(t):"category_id"===e&&Pe(t),ze[e]=Object.values(t).map((function(e){return e.id})).join(","),_(g=1),ft()}var st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useState)(0),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(0),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1],pt=Object(s.useState)(0),mt=Object(o.a)(pt,2),xt=mt[0],Ot=mt[1];function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(ze.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();ze.timezone_offset=parseFloat(a/60),Ee(ze);var s=Xe(ze);""!==s&&(s="&"+s),ue(!0),fetch("/v1/product?select=id,item_code,ean_12,bar_code,part_number,name,name_in_arabic,category_name,created_by_name,created_at,rack,stores"+s+"&sort="+Qe+Ve+"&page="+g+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:ue(!1),me(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),k(r),A(n.total_count),U((g-1)*j),I(n.result.length),ct=n.meta.stock,rt(ct),lt=n.meta.retail_stock_value,dt(lt),bt=n.meta.wholesale_stock_value,ht(bt),xt=n.meta.purchase_stock_value,Ot(xt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ue(!1),me(!1),console.log(e)}))}function gt(e){He(Ve=e),Ze(Qe="-"===Qe?"":"-"),ft()}function vt(e){g=parseInt(e),_(g),ft()}var _t=Object(s.useRef)();function yt(e){_t.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}function St(){_t.current.open()}var wt=Object(s.useRef)();function kt(e){var a=t.get("store_id"),s=.15;if(t.get("vat_percent")&&(s=parseFloat(t.get("vat_percent")/100).toFixed(2)),!a||!e.stores)return{retail_unit_price:"0.00",purchase_unit_price_secret:""};for(var n=0;n<e.stores.length;n++)if(e.stores[n].store_id===a){var c={retail_unit_price:"0.00",purchase_unit_price_secret:""};return e.stores[n].retail_unit_price&&(c.retail_unit_price=parseFloat(e.stores[n].retail_unit_price+parseFloat(e.stores[n].retail_unit_price*s)).toFixed(2)),e.stores[n].purchase_unit_price_secret&&(c.purchase_unit_price_secret=e.stores[n].purchase_unit_price_secret),c}return{retail_unit_price:"0.00",purchase_unit_price_secret:""}}var Tt=Object(s.useRef)(),Rt=Object(s.useRef)(),Dt=Object(s.useRef)(),At=Object(s.useRef)(),Ft=Object(s.useRef)(),Pt=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(re,{ref:Tt,showToastMessage:e.showToastMessage}),Object(v.jsx)(oe,{ref:Rt,showToastMessage:e.showToastMessage}),Object(v.jsx)(ge,{ref:Dt,showToastMessage:e.showToastMessage}),Object(v.jsx)(Re,{ref:At,showToastMessage:e.showToastMessage}),Object(v.jsx)(Le,{ref:Ft,showToastMessage:e.showToastMessage}),Object(v.jsx)(We,{ref:Pt,showToastMessage:e.showToastMessage}),Object(v.jsx)(tt,{ref:_t,refreshList:ft,openDetailsView:Ct,showToastMessage:e.showToastMessage}),Object(v.jsx)(Ke,{ref:Nt,openUpdateForm:yt,openCreateForm:St,showToastMessage:e.showToastMessage}),Object(v.jsx)(Ra,{ref:wt}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("h1",{className:"text-end",children:["Stock: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ct,displayType:"text",thousandSeparator:!0,suffix:" Units",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Retail Stock value: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:lt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Wholesale Stock value: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:bt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(v.jsxs)("h1",{className:"text-end",children:["Purchase Stock value: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:xt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})]})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Products"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:St,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsx)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){var e=function(){for(var e=[],a=0;a<r.length;a++){var s=kt(r[a]);e.push({storename:t.get("store_name"),productname:r[a].name,ean_12:r[a].ean_12,rack:r[a].rack,price:s.retail_unit_price,purchase_unit_price_secret:s.purchase_unit_price_secret})}return console.log("jsonContent:",e),e}();wt.current.open(e)},children:"Get JSON for Bar Tender"})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===D&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Product Categories to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bproduct:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){me(!0),ft()},variant:"primary",disabled:pe,children:[pe?Object(v.jsx)(w.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:je&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),ft()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""})}),Object(v.jsx)("div",{className:"row",children:D>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",E+1,"-",E+M," of"," ",D]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",g," of ",S]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("part_number")},children:["Part Number","part_number"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"part_number"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("name")},children:["Name","name"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("ean_12")},children:["Bar Code","ean_12"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"ean_12"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("rack")},children:["Rack","rack"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"rack"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.purchase_unit_price")},children:["Purchase Unit Price","stores.purchase_unit_price"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_unit_price"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.wholesale_unit_price")},children:["Wholesale Unit Price","stores.wholesale_unit_price"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_price"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.retail_unit_price")},children:["Retail Unit Price","stores.retail_unit_price"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_price"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.wholesale_unit_profit")},children:["Wholesale Unit Profit","stores.wholesale_unit_profit"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_profit"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.wholesale_unit_profit_perc")},children:["Wholesale Unit Profit %","stores.wholesale_unit_profit_perc"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_profit_perc"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.retail_unit_profit")},children:["Retail Unit Profit","stores.retail_unit_profit"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_profit"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.retail_unit_profit_perc")},children:["Retail Unit Profit %","stores.retail_unit_profit_perc"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_profit_perc"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("stores.stock")},children:["Stock","stores.stock"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.stock"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("category_name")},children:["Categories","category_name"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"category_name"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_by_name")},children:["Created By","created_by_name"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_at")},children:["Created At","created_at"===Ve&&"-"===Qe?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Ve&&""===Qe?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"part_number",onChange:function(e){return $e("part_number",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return $e("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"ean_12",onChange:function(e){13===e.target.value.length&&(e.target.value=e.target.value.slice(0,-1)),$e("ean_12",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"rack",onChange:function(e){return $e("rack",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"purchase_unit_price",onChange:function(e){return $e("purchase_unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"wholesale_unit_price",onChange:function(e){return $e("wholesale_unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"retail_unit_price",onChange:function(e){return $e("retail_unit_price",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"wholesale_unit_profit",onChange:function(e){return $e("wholesale_unit_profit",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"wholesale_unit_profit_perc",onChange:function(e){return $e("wholesale_unit_profit_perc",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"retail_unit_profit",onChange:function(e){return $e("retail_unit_profit",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"retail_unit_profit_perc",onChange:function(e){return $e("retail_unit_profit_perc",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"stock",onChange:function(e){return $e("stock",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"category_id",labelKey:"name",onChange:function(e){at("category_id",e)},options:ke,placeholder:"Select Categories",selected:Fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Je.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){at("created_by",e)},options:fe,placeholder:"Select Users",selected:Ne,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ye.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:J,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void et("created_at","");et("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return G(!H)},children:H?"Less..":"More.."}),Object(v.jsx)("br",{}),H?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void et("created_at_from","");et("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void et("created_at_to","");et("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.part_number}),Object(v.jsx)("td",{children:e.name+" / "+e.name_in_arabic}),Object(v.jsx)("td",{children:e.ean_12}),Object(v.jsx)("td",{children:e.rack}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s;return t.get("store_id")&&e.store_id==t.get("store_id")?Object(v.jsx)("b",{children:null===(a=e.purchase_unit_price)||void 0===a?void 0:a.toFixed(2)}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:null===(s=e.purchase_unit_price)||void 0===s?void 0:s.toFixed(2)})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s;return t.get("store_id")&&e.store_id==t.get("store_id")?Object(v.jsx)("b",{children:null===(a=e.wholesale_unit_price)||void 0===a?void 0:a.toFixed(2)}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:null===(s=e.wholesale_unit_price)||void 0===s?void 0:s.toFixed(2)})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s;return t.get("store_id")&&e.store_id==t.get("store_id")?Object(v.jsx)("b",{children:null===(a=e.retail_unit_price)||void 0===a?void 0:a.toFixed(2)}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:null===(s=e.retail_unit_price)||void 0===s?void 0:s.toFixed(2)})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s,n;return t.get("store_id")&&e.store_id==t.get("store_id")?e.wholesale_unit_profit<=0?Object(v.jsx)(Da.a,{placement:"right",overlay:Object(v.jsx)(Aa.a,{id:"tooltip-right",children:"Wholesale unit profit should be greater than zero."}),children:Object(v.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(v.jsxs)("b",{children:[" ",null===(a=e.wholesale_unit_profit)||void 0===a?void 0:a.toFixed(2)]})})},"right"):Object(v.jsx)("b",{children:null===(s=e.wholesale_unit_profit)||void 0===s?void 0:s.toFixed(2)}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:null===(n=e.wholesale_unit_profit)||void 0===n?void 0:n.toFixed(2)})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s,n;return t.get("store_id")&&e.store_id==t.get("store_id")?e.wholesale_unit_profit_perc<=0?Object(v.jsx)(Da.a,{placement:"right",overlay:Object(v.jsx)(Aa.a,{id:"tooltip-right",children:"Wholesale unit profit % should be greater than zero."}),children:Object(v.jsx)("span",{className:"badge bg-danger",children:Object(v.jsxs)("b",{children:[" ",(null===(a=e.wholesale_unit_profit_perc)||void 0===a?void 0:a.toFixed(2))+"%"]})})},"right"):Object(v.jsx)("b",{children:(null===(s=e.wholesale_unit_profit_perc)||void 0===s?void 0:s.toFixed(2))+"%"}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:(null===(n=e.wholesale_unit_profit_perc)||void 0===n?void 0:n.toFixed(2))+"%"})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s;return t.get("store_id")&&e.store_id==t.get("store_id")?e.retail_unit_profit<=0?Object(v.jsx)(Da.a,{placement:"right",overlay:Object(v.jsx)(Aa.a,{id:"tooltip-right",children:"Reatail unit profit should be greater than zero."}),children:Object(v.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(v.jsxs)("b",{children:[" ",null===(a=e.retail_unit_profit)||void 0===a?void 0:a.toFixed(2)]})})},"right"):Object(v.jsx)("b",{children:null===(s=e.retail_unit_profit)||void 0===s?void 0:s.toFixed(2)}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:e.retail_unit_profit.toFixed(2)})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){var a,s,n;return t.get("store_id")&&e.store_id==t.get("store_id")?e.retail_unit_profit_perc<=0?Object(v.jsx)(Da.a,{placement:"right",overlay:Object(v.jsx)(Aa.a,{id:"tooltip-right",children:"Retail unit profit % should be greater than zero."}),children:Object(v.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(v.jsxs)("b",{children:[" ",(null===(a=e.retail_unit_profit_perc)||void 0===a?void 0:a.toFixed(2))+"%"]})})},"right"):Object(v.jsx)("b",{children:(null===(s=e.retail_unit_profit_perc)||void 0===s?void 0:s.toFixed(2))+"%"}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:(null===(n=e.retail_unit_profit_perc)||void 0===n?void 0:n.toFixed(2))+"%"})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:e.stores&&e.stores.map((function(e){return t.get("store_id")&&e.store_id==t.get("store_id")?Object(v.jsx)("b",{children:e.stock}):t.get("store_id")?void 0:Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:e.stock})," ","@"+e.store_name]})}))}),Object(v.jsx)("td",{children:Object(v.jsx)("ul",{children:e.category_name&&e.category_name.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})}),"\xa0  \xa0",Object(v.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(v.jsxs)("ul",{className:"dropdown-menu",children:[Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Tt.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Dt.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Rt.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales Return History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,At.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase Return History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Ft.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Quotation History"]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Pt.current.open(t)},children:[Object(v.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Delivert Note History"]})})]})]})]},e.id)}))})]})}),S?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:S,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:g-1}):""]})})})})]})]})};var Pa=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Z=W[0],X=W[1],J=Object(s.useState)(""),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1];Object(s.useEffect)((function(){Le()}),[]);var ve=Object(s.useState)({}),_e=Object(o.a)(ve,2),ye=_e[0],Ne=_e[1],Ce=Object(s.useState)("created_at"),Se=Object(o.a)(Ce,2),we=Se[0],ke=Se[1],Te=Object(s.useState)("-"),Re=Object(o.a)(Te,2),De=Re[0],Ae=Re[1];function Fe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Fe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,me(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){ye[e]=t,g(f=1),Le()}function Ie(e,t){if(!t)return f=1,ye[e]="",g(f),void Le();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),g(f=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Fe(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/product-category?select=id,name,parent_name,parent_id,created_by_name,created_at"+s+"&sort="+De+we+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),E((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function ze(e){ke(we=e),Ae(De="-"===De?"":"-"),Le()}function Ee(e){f=parseInt(e),g(f),Le()}function Ue(e){He.current.open(e)}var Be=Object(s.useRef)();function Ve(e){Be.current.open(e)}var He=Object(s.useRef)();function qe(){He.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)($e,{ref:He,refreshList:Le,showToastMessage:e.showToastMessage,openDetailsView:Ve}),Object(v.jsx)(Je,{ref:Be,openUpdateForm:Ue,openCreateForm:qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Product Categories"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Product Categories to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bproductcategory:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bproductcategory:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ue(!0),Le()},variant:"primary",disabled:je,children:[je?Object(v.jsx)(w.a,{as:"span",animation:"bproductcategory",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ie&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Le()},className:"form-control pull-right",style:{bproductcategory:"solid 1px",bproductcategoryColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bproductcategory:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",z+1,"-",z+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("name")},children:["Name","name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("parent_name")},children:["Parent","parent_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"parent_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_by_name")},children:["Created By","created_by_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return Me("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"parent_name",onChange:function(e){return Me("parent_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ge(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Le()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Z,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ie("created_at","");Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return H(!V)},children:V?"Less..":"More.."}),Object(v.jsx)("br",{}),V?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ie("created_at_from","");Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ie("created_to","");Ie("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.parent_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})},Ma=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get ExpenseCategory");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/expense-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"lg",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Expense Category #",c.name," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Name:"}),Object(v.jsxs)("td",{children:[" ",c.name]}),Object(v.jsx)("th",{children:"Parent Category Name:"}),Object(v.jsxs)("td",{children:[" ",c.parent_name]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),Ia=Ma,La=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){L(I={}),T(k=[]),e&&function(e){console.log("inside get Expense Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}};I={},L(Object(h.a)({},I)),k=[],T(Object(i.a)(k)),fetch("/v1/expense-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),I=n.result,console.log("formData:",I),I.parent_id&&(k=[{id:I.parent_id,name:I.parent_name}],T(Object(i.a)(k))),L(Object(h.a)({},I)),console.log("formData:",I);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(!1),r(e)}))}(e),B(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-expense category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1],O=new y.a,f=Object(s.useState)([]),g=Object(o.a)(f,2),_=g[0],N=g[1],C=Object(s.useState)([]),S=Object(o.a)(C,2),k=S[0],T=S[1],R=Object(s.useState)(!1),D=Object(o.a)(R,2),A=D[0],F=D[1],P=Object(s.useState)({}),M=Object(o.a)(P,2),I=M[0],L=M[1],z=Object(s.useState)(!1),E=Object(o.a)(z,2),U=E[0],B=E[1];function V(){B(!1)}function H(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function G(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",I.logo),F(!0);var a="/v1/expense-category",s="POST";I.id&&(a="/v1/expense-category/"+I.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:O.get("access_token")},body:JSON.stringify(I)};console.log("formData:",I),x(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),x(!1),F(!1),console.log("Response:"),console.log(c),e.showToastMessage("Expense Category Created Successfully!","success"),e.refreshList&&e.refreshList(),V(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){x(!1),F(!1),console.log("Inside catch"),console.log(t),r(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating ExpenseCategory!","danger")}))}function Q(){return(Q=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),N([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=H({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,name",F(!0),e.next=13,fetch("/v1/expense-category?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,N(c.result),F(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){O.get("access_token")||(window.location="/")})),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:U,size:"lg",onHide:V,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:I.id?"Update Expense Category #"+I.name:"Create New Expense Category"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[I.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){V(),e.openDetailsView(I.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:G,children:[j?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",I.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:V,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:G,children:[Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Name*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:I.name?I.name:"",type:"string",onChange:function(e){c.name="",r(Object(h.a)({},c)),I.name=e.target.value,L(Object(h.a)({},I)),console.log(I)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),I.name&&!c.name&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Parent(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"parent_id",labelKey:"name",isLoading:A,isInvalid:!!c.parent_id,onChange:function(e){if(c.parent__id="",r({errors:c}),0===e.length)return c.parent_id="Invalid Parent Category Selected",r(c),I.parent_id="",I.parent_name="",L(Object(h.a)({},I)),void T([]);I.parent_id=e[0].id,L(Object(h.a)({},I)),T(Object(i.a)(e))},options:_,placeholder:"Select Parent Category",selected:k,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Q.apply(this,arguments)}(e)}}),c.parent_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.parent_id]}),I.parent_id&&!c.parent_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:V,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:G,children:j?Object(v.jsx)(w.a,{as:"span",animation:"bexpensecategory",size:"sm",role:"status","aria-hidden":!0})+" Processing...":I.id?"Update":"Create"})]})]})})]})})})),za=La;var Ea=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Z=W[0],X=W[1],J=Object(s.useState)(""),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1];Object(s.useEffect)((function(){Le()}),[]);var ve=Object(s.useState)({}),_e=Object(o.a)(ve,2),ye=_e[0],Ne=_e[1],Ce=Object(s.useState)("created_at"),Se=Object(o.a)(Ce,2),we=Se[0],ke=Se[1],Te=Object(s.useState)("-"),Re=Object(o.a)(Te,2),De=Re[0],Ae=Re[1];function Fe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Fe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,me(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){ye[e]=t,g(f=1),Le()}function Ie(e,t){if(!t)return f=1,ye[e]="",g(f),void Le();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),g(f=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Fe(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/expense-category?select=id,name,parent_name,parent_id,created_by_name,created_at"+s+"&sort="+De+we+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),E((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function ze(e){ke(we=e),Ae(De="-"===De?"":"-"),Le()}function Ee(e){f=parseInt(e),g(f),Le()}function Ue(e){He.current.open(e)}var Be=Object(s.useRef)();function Ve(e){Be.current.open(e)}var He=Object(s.useRef)();function qe(){He.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(za,{ref:He,refreshList:Le,showToastMessage:e.showToastMessage,openDetailsView:Ve}),Object(v.jsx)(Ia,{ref:Be,openUpdateForm:Ue,openCreateForm:qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Expense Categories"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Expense Categories to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bexpensecategory:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bexpensecategory:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ue(!0),Le()},variant:"primary",disabled:je,children:[je?Object(v.jsx)(w.a,{as:"span",animation:"bexpensecategory",size:"sm",role:"status","aria-hidden":"true"}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ie&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Le()},className:"form-control pull-right",style:{bexpensecategory:"solid 1px",bexpensecategoryColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bexpensecategory:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",z+1,"-",z+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("name")},children:["Name","name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("parent_name")},children:["Parent","parent_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"parent_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_by_name")},children:["Created By","created_by_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return Me("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"parent_name",onChange:function(e){return Me("parent_name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ge(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Le()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Z,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ie("created_at","");Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return H(!V)},children:V?"Less..":"More.."}),Object(v.jsx)("br",{}),V?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ie("created_at_from","");Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ie("created_to","");Ie("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.parent_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})},Ua=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Expense");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/expense/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Expense #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Payment method"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Categories:"}),Object(v.jsx)("td",{children:Object(v.jsx)("ul",{children:c.category_name&&c.category_name.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"Expense",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Ba=Ua,Va=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){F(D=[]),$({formData:Y={images_content:[]}}),e&&function(e){console.log("inside get Expense");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}};fetch("/v1/expense/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(V({}),console.log("Response:"),console.log(n),i=n.result.category_id,o=n.result.category_name,D=[],i&&o)for(l=0;l<i.length;l++)D.push({id:i[l],name:o[l]});F(D),Y=n.result,d=[{id:Y.store_id,name:Y.store_name}],r([].concat(d)),Y.images_content=[],$(Object(h.a)({},Y));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Z(!1),V(e)}))}(e),se(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-expense.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],F=R[1],M=Object(s.useState)([]),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)({}),U=Object(o.a)(E,2),B=U[0],V=U[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Z=G[1],K=new y.a,X=Object(s.useState)({images_content:[]}),J=Object(o.a)(X,2),Y=J[0],$=J[1],ee=Object(s.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],se=te[1];function ne(){se(!1)}function ce(){return(ce=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ie({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/expense-category?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,z(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ie({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function oe(t){t.preventDefault(),console.log("Inside handle Create"),Y.category_id=[];for(var a=0;a<D.length;a++)Y.category_id.push(D[a].id);console.log("category_id:",Y.category_id),K.get("store_id")&&(Y.store_id=K.get("store_id"));var s="/v1/expense",n="POST";Y.id&&(s="/v1/expense/"+Y.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:K.get("access_token")},body:JSON.stringify(Y)};console.log("formData:",Y),Z(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:V({}),Z(!1),console.log("Response:"),console.log(c),e.showToastMessage("Expense Created Successfully!","success"),e.refreshList&&e.refreshList(),ne(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){Z(!1),console.log("Inside catch"),console.log(t),V(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Expense!","danger")}))}Object(s.useEffect)((function(){K.get("access_token")||(window.location="/")}));var le=Object(s.useRef)();var de=Object(s.useRef)();function je(){de.current.open()}var ue=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:le,showToastMessage:e.showToastMessage}),Object(v.jsx)(za,{ref:de,openDetailsView:function(e){ue.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsx)(Ia,{ref:ue,openUpdateForm:function(e){de.current.open(e)},openCreateForm:je}),Object(v.jsxs)(p.a,{show:ae,size:"xl",onHide:ne,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:Y.id?"Update Expense #"+Y.description:"Create New Expense"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Y.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ne(),e.openDetailsView(Y.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:oe,children:[W?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Y.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:ne,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:oe,children:[K.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!B.store_id,onChange:function(e){if(B.store_id="",B.product_id="",V(B),0===e.length)return B.store_id="Invalid Store selected",V(B),$(Object(h.a)({},Y)),void r([]);Y.store_id=e[0].id,$(Object(h.a)({},Y)),console.log("formData.store_id:",Y.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){re.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){le.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),B.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Y.amount?Y.amount:"",type:"number",onChange:function(e){B.amount="",V(Object(h.a)({},B)),Y.amount=parseFloat(e.target.value),$(Object(h.a)({},Y)),console.log(Y)},className:"form-control",id:"amount",placeholder:"Amount"}),B.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.amount]}),Y.amount&&!B.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:Y.description?Y.description:"",type:"string",onChange:function(e){B.description="",V(Object(h.a)({},B)),Y.description=e.target.value,$(Object(h.a)({},Y)),console.log(Y)},className:"form-control description",id:"description",placeholder:"Description"}),B.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.description]}),Y.description&&!B.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Categories*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"category_id",labelKey:"name",isInvalid:!!B.category_id,onChange:function(e){if(B.category_id="",V(B),0===e.length)return B.category_id="Invalid Category selected",V(B),$(Object(h.a)({},Y)),void F([]);$(Object(h.a)({},Y)),F(e)},options:L,placeholder:"Select Categories",selected:D,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ce.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:je,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),B.category_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.category_id]}),Y.category_id&&!B.category_id&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:Y.date_str?new Date(Y.date_str):null,value:Y.date_str?Object(O.default)(new Date(Y.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Y.date_str=e,$(Object(h.a)({},Y))}}),B.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:Y.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Y.payment_method="",B.status="Invalid Payment Method",void V(Object(h.a)({},B));B.payment_method="",V(Object(h.a)({},B)),Y.payment_method=e.target.value,$(Object(h.a)({},Y)),console.log(Y)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),B.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(B.image="",V(Object(h.a)({},B)),!e.target.value)return B.image="Invalid Image File",void V(Object(h.a)({},B));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Y.images_content=[],Y.images_content[0]=e,$(Object(h.a)({},Y)),console.log("formData.images_content[0]:",Y.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),B.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.image]}),Y.image&&!B.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:ne,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:oe,children:W?Object(v.jsx)(w.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Y.id?"Update":"Create"})]})]})})]})]})})),Ha=Va;var qa=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1];Object(s.useEffect)((function(){pt()}),[]);var We=Object(s.useState)({}),Ze=Object(o.a)(We,2),Ke=Ze[0],Xe=Ze[1],Je=Object(s.useState)("created_at"),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("-"),at=Object(o.a)(tt,2),st=at[0],nt=at[1];function ct(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function rt(){return(rt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=ct({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/expense-category?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Ve(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=ct({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){Ke[e]=t,U(E=1),pt()}function lt(e,t){if(!t)return E=1,Ke[e]="",U(E),void pt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),Ke.from_date="",Ke.to_date="",Ke[e]=t):"from_date"===e?(_(t),h(""),Ke.date="",Ke[e]=t):"to_date"===e?(k(t),h(""),Ke.date="",Ke[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),Ke.created_at_from="",Ke.created_at_to="",Ke[e]=t),"created_at_from"===e?(Oe(t),he(""),Ke.created_at="",Ke[e]=t):"created_at_to"===e&&(_e(t),he(""),Ke.created_at="",Ke[e]=t),U(E=1),pt()}function dt(e,t){"created_by"===e?ze(t):"category_id"===e&&Qe(t),Ke[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),pt()}var jt=Object(s.useState)(0),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1];function pt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ke.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ke.timezone_offset=parseFloat(a/60),Xe(Ke);var s=ct(Ke);""!==s&&(s="&"+s),Se(!0),fetch("/v1/expense?select=id,code,date,amount,description,category_name,created_by_name,created_at"+s+"&sort="+st+$e+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),bt=n.meta.total,ht(bt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function mt(e){et($e=e),nt(st="-"===st?"":"-"),pt()}function xt(e){E=parseInt(e),U(E),pt()}var Ot=Object(s.useRef)();function ft(e){Ot.current.open(e)}var gt=Object(s.useRef)();function vt(e){gt.current.open(e)}function _t(){Ot.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ha,{ref:Ot,refreshList:pt,openDetailsView:vt,showToastMessage:e.showToastMessage}),Object(v.jsx)(Ba,{ref:gt,openUpdateForm:ft,openCreateForm:_t,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:bt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Expenses"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:_t,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Expense to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bexpense:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),pt()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),pt()},className:"form-control pull-right",style:{bexpense:"solid 1px",bexpenseColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bexpense:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){xt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("code")},children:["ID","code"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("date")},children:["Date","date"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("amount")},children:["Amount","amount"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("description")},children:["Description","description"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("category_name")},children:["Categories","category_name"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"category_name"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("created_by_name")},children:["Created By","created_by_name"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){mt("created_at")},children:["Created At","created_at"===$e&&"-"===st?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===$e&&""===st?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return ot("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void lt("date_str","");lt("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void lt("from_date","");lt("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void lt("to_date","");lt("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return ot("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return ot("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"category_id",labelKey:"name",onChange:function(e){dt("category_id",e)},options:Be,placeholder:"Select Categories",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){rt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){dt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){it.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void lt("created_at","");lt("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void lt("created_at_from","");lt("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void lt("created_at_to","");lt("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:Object(v.jsx)("ul",{children:e.category_name&&e.category_name.map((function(e){return Object(v.jsx)("li",{children:e},e)}))})}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){ft(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){vt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){xt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})},Ga=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CustomerDeposit");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/customer-deposit/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of CustomerDeposit #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Customer"}),Object(v.jsxs)("td",{children:[" ",c.customer_name]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]}),Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"CustomerDeposit",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Qa=Ga,Wa=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){Y({formData:J={images_content:[]}}),e&&function(e){console.log("inside get CustomerDeposit");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}};fetch("/v1/customer-deposit/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:B({}),console.log("Response:"),console.log(n),J=n.result,i=[{id:J.customer_id,name:J.customer_name,search_label:J.customer_name}],he([].concat(i)),o=[{id:J.store_id,name:J.store_name}],r([].concat(o)),J.images_content=[],Y(Object(h.a)({},J));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){W(!1),B(e)}))}(e),ae(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customerdeposit.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],F=(R[1],Object(s.useState)([])),M=Object(o.a)(F,2),L=(M[0],M[1],Object(s.useState)({})),E=Object(o.a)(L,2),U=E[0],B=E[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Z=new y.a,K=Object(s.useState)({images_content:[]}),X=Object(o.a)(K,2),J=X[0],Y=X[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){ae(!1)}function ne(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=re({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){Z.get("access_token")||(window.location="/")}));var ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)([]),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1];function fe(){return(fe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),de([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=re({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",Oe(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,de(c.result),Oe(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(t){t.preventDefault(),console.log("Inside handle Create"),J.category_id=[];for(var a=0;a<D.length;a++)J.category_id.push(D[a].id);console.log("category_id:",J.category_id),Z.get("store_id")&&(J.store_id=Z.get("store_id"));var s="/v1/customer-deposit",n="POST";J.id&&(s="/v1/customer-deposit/"+J.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:Z.get("access_token")},body:JSON.stringify(J)};console.log("formData:",J),W(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:B({}),W(!1),console.log("Response:"),console.log(c),e.showToastMessage("CustomerDeposit Created Successfully!","success"),e.refreshList&&e.refreshList(),se(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){W(!1),console.log("Inside catch"),console.log(t),B(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CustomerDeposit!","danger")}))}var ve=Object(s.useRef)();function _e(){ve.current.open()}Object(s.useRef)();var ye=Object(s.useRef)();var Ne=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:ve,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:ye,openDetailsView:function(e){Ne.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsx)(I,{ref:Ne,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:te,size:"xl",onHide:se,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:J.id?"Update Customer Deposit #"+J.description:"Create New Customer Deposit"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[J.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){se(),e.openDetailsView(J.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:ge,children:[G?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",J.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:ge,children:[Z.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!U.store_id,onChange:function(e){if(U.store_id="",U.product_id="",B(U),0===e.length)return U.store_id="Invalid Store selected",B(U),Y(Object(h.a)({},J)),void r([]);J.store_id=e[0].id,Y(Object(h.a)({},J)),console.log("formData.store_id:",J.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){ne(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:_e,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),U.store_id]})]})]}),Z.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!U.store_id,onChange:function(e){if(U.store_id="",U.product_id="",B(U),0===e.length)return U.store_id="Invalid Store selected",B(U),Y(Object(h.a)({},J)),void r([]);J.store_id=e[0].id,Y(Object(h.a)({},J)),console.log("formData.store_id:",J.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){ne(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:_e,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),U.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",isLoading:xe,isInvalid:!!U.customer_id,onChange:function(e){if(U.customer_id="",B(U),0===e.length)return U.customer_id="Invalid Customer selected",B(U),J.customer_id="",Y(Object(h.a)({},J)),void he([]);J.customer_id=e[0].id,Y(Object(h.a)({},J)),he(e)},options:le,placeholder:"Select Customer",selected:be,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){fe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){ye.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),U.customer_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.customer_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:J.amount?J.amount:"",type:"number",onChange:function(e){U.amount="",B(Object(h.a)({},U)),J.amount=parseFloat(e.target.value),Y(Object(h.a)({},J)),console.log(J)},className:"form-control",id:"amount",placeholder:"Amount"}),U.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.amount]}),J.amount&&!U.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:J.description?J.description:"",type:"string",onChange:function(e){U.description="",B(Object(h.a)({},U)),J.description=e.target.value,Y(Object(h.a)({},J)),console.log(J)},className:"form-control description",id:"description",placeholder:"Description"}),U.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.description]}),J.description&&!U.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:J.date_str?new Date(J.date_str):null,value:J.date_str?Object(O.default)(new Date(J.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),J.date_str=e,Y(Object(h.a)({},J))}}),U.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:J.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return J.payment_method="",U.status="Invalid Payment Method",void B(Object(h.a)({},U));U.payment_method="",B(Object(h.a)({},U)),J.payment_method=e.target.value,Y(Object(h.a)({},J)),console.log(J)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),U.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(U.image="",B(Object(h.a)({},U)),!e.target.value)return U.image="Invalid Image File",void B(Object(h.a)({},U));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){J.images_content=[],J.images_content[0]=e,Y(Object(h.a)({},J)),console.log("formData.images_content[0]:",J.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),U.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.image]}),J.image&&!U.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:se,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:ge,children:G?Object(v.jsx)(w.a,{as:"span",animation:"bcustomerdeposit",size:"sm",role:"status","aria-hidden":!0})+" Processing...":J.id?"Update":"Create"})]})]})})]})]})})),Za=Wa;var Ka=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){ft()}),[]);var Je=Object(s.useState)({}),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function lt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function dt(){return(dt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=lt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){$e[e]=t,U(E=1),ft()}function ut(e,t){if(!t)return E=1,$e[e]="",U(E),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(_(t),h(""),$e.date="",$e[e]=t):"to_date"===e?(k(t),h(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(_e(t),he(""),$e.created_at="",$e[e]=t),U(E=1),ft()}function bt(e,t){"created_by"===e?ze(t):"customer_id"===e&&Qe(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),ft()}function ht(){return(ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=lt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ve(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=Object(s.useState)(0),mt=Object(o.a)(pt,2),xt=mt[0],Ot=mt[1];function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=lt($e);""!==s&&(s="&"+s),Se(!0),fetch("/v1/customer-deposit?select=id,code,date,amount,description,customer_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),xt=n.meta.total,Ot(xt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function gt(e){nt(st=e),ot(it="-"===it?"":"-"),ft()}function vt(e){E=parseInt(e),U(E),ft()}var _t=Object(s.useRef)();function yt(e){_t.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}function St(){_t.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Za,{ref:_t,refreshList:ft,openDetailsView:Ct,showToastMessage:e.showToastMessage}),Object(v.jsx)(Qa,{ref:Nt,openUpdateForm:yt,openCreateForm:St,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:xt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Customer Deposits"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:St,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No CustomerDeposit to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bcustomerdeposit:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),ft()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bcustomerdeposit",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),ft()},className:"form-control pull-right",style:{bcustomerdeposit:"solid 1px",bcustomerdepositColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bcustomerdeposit:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("code")},children:["ID","code"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("date")},children:["Date","date"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("amount")},children:["Amount","amount"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("description")},children:["Description","description"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("customer_name")},children:["Customer","customer_name"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return jt("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void ut("date_str","");ut("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void ut("from_date","");ut("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void ut("to_date","");ut("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return jt("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return jt("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){bt("customer_id",e)},options:Be,placeholder:"Select customers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ht.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){bt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){dt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ut("created_at","");ut("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_from","");ut("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_to","");ut("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})},Xa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CustomerWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/customer-withdrawal/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of CustomerWithdrawal #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"Customer"}),Object(v.jsxs)("td",{children:[" ",c.customer_name]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]}),Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"CustomerWithdrawal",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Ja=Xa,Ya=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){Y({formData:J={images_content:[]}}),e&&function(e){console.log("inside get CustomerWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}};fetch("/v1/customer-withdrawal/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:B({}),console.log("Response:"),console.log(n),J=n.result,i=[{id:J.customer_id,name:J.customer_name,search_label:J.customer_name}],be([].concat(i)),o=[{id:J.store_id,name:J.store_name}],r([].concat(o)),J.images_content=[],Y(Object(h.a)({},J));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){W(!1),B(e)}))}(e),ae(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customerwithdrawal.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],F=(R[1],Object(s.useState)([])),M=Object(o.a)(F,2),L=(M[0],M[1],Object(s.useState)({})),E=Object(o.a)(L,2),U=E[0],B=E[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Z=new y.a,K=Object(s.useState)({images_content:[]}),X=Object(o.a)(K,2),J=X[0],Y=X[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){ae(!1)}function ne(){return(ne=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ce({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){Z.get("access_token")||(window.location="/")}));var re=Object(s.useState)([]),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)([]),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),me=pe[0],xe=pe[1];function Oe(){return(Oe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),le([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ce({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:Z.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",xe(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,le(c.result),xe(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(t){t.preventDefault(),console.log("Inside handle Create"),J.category_id=[];for(var a=0;a<D.length;a++)J.category_id.push(D[a].id);console.log("category_id:",J.category_id),Z.get("store_id")&&(J.store_id=Z.get("store_id"));var s="/v1/customer-withdrawal",n="POST";J.id&&(s="/v1/customer-withdrawal/"+J.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:Z.get("access_token")},body:JSON.stringify(J)};console.log("formData:",J),W(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:B({}),W(!1),console.log("Response:"),console.log(c),e.showToastMessage("CustomerWithdrawal Created Successfully!","success"),e.refreshList&&e.refreshList(),se(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){W(!1),console.log("Inside catch"),console.log(t),B(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CustomerWithdrawal!","danger")}))}var ge=Object(s.useRef)();Object(s.useRef)();var ve=Object(s.useRef)();var _e=Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:ge,showToastMessage:e.showToastMessage}),Object(v.jsx)(z,{ref:ve,openDetailsView:function(e){_e.current.open(e)},showToastMessage:e.showToastMessage}),Object(v.jsx)(I,{ref:_e,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:te,size:"xl",onHide:se,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:J.id?"Update Customer Withdrawal #"+J.description:"Create New Customer Withdrawal"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[J.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){se(),e.openDetailsView(J.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:fe,children:[G?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",J.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:fe,children:[Z.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!U.store_id,onChange:function(e){if(U.store_id="",U.product_id="",B(U),0===e.length)return U.store_id="Invalid Store selected",B(U),Y(Object(h.a)({},J)),void r([]);J.store_id=e[0].id,Y(Object(h.a)({},J)),console.log("formData.store_id:",J.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ne.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){ge.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),U.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Customer*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",isLoading:me,isInvalid:!!U.customer_id,onChange:function(e){if(U.customer_id="",B(U),0===e.length)return U.customer_id="Invalid Customer selected",B(U),J.customer_id="",Y(Object(h.a)({},J)),void be([]);J.customer_id=e[0].id,Y(Object(h.a)({},J)),be(e)},options:oe,placeholder:"Select Customer",selected:ue,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Oe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){ve.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),U.customer_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.customer_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:J.amount?J.amount:"",type:"number",onChange:function(e){U.amount="",B(Object(h.a)({},U)),J.amount=parseFloat(e.target.value),Y(Object(h.a)({},J)),console.log(J)},className:"form-control",id:"amount",placeholder:"Amount"}),U.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.amount]}),J.amount&&!U.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:J.description?J.description:"",type:"string",onChange:function(e){U.description="",B(Object(h.a)({},U)),J.description=e.target.value,Y(Object(h.a)({},J)),console.log(J)},className:"form-control description",id:"description",placeholder:"Description"}),U.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.description]}),J.description&&!U.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:J.date_str?new Date(J.date_str):null,value:J.date_str?Object(O.default)(new Date(J.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),J.date_str=e,Y(Object(h.a)({},J))}}),U.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:J.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return J.payment_method="",U.status="Invalid Payment Method",void B(Object(h.a)({},U));U.payment_method="",B(Object(h.a)({},U)),J.payment_method=e.target.value,Y(Object(h.a)({},J)),console.log(J)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),U.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(U.image="",B(Object(h.a)({},U)),!e.target.value)return U.image="Invalid Image File",void B(Object(h.a)({},U));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){J.images_content=[],J.images_content[0]=e,Y(Object(h.a)({},J)),console.log("formData.images_content[0]:",J.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),U.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),U.image]}),J.image&&!U.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:se,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:fe,children:G?Object(v.jsx)(w.a,{as:"span",animation:"bcustomerwithdrawal",size:"sm",role:"status","aria-hidden":!0})+" Processing...":J.id?"Update":"Create"})]})]})})]})]})})),$a=Ya;var es=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){ft()}),[]);var Je=Object(s.useState)({}),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function lt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function dt(){return(dt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=lt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){$e[e]=t,U(E=1),ft()}function ut(e,t){if(!t)return E=1,$e[e]="",U(E),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(_(t),h(""),$e.date="",$e[e]=t):"to_date"===e?(k(t),h(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(_e(t),he(""),$e.created_at="",$e[e]=t),U(E=1),ft()}function bt(e,t){"created_by"===e?ze(t):"customer_id"===e&&Qe(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),ft()}function ht(){return(ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=lt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ve(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=Object(s.useState)(0),mt=Object(o.a)(pt,2),xt=mt[0],Ot=mt[1];function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=lt($e);""!==s&&(s="&"+s),Se(!0),fetch("/v1/customer-withdrawal?select=id,code,date,amount,description,customer_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),xt=n.meta.total,Ot(xt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function gt(e){nt(st=e),ot(it="-"===it?"":"-"),ft()}function vt(e){E=parseInt(e),U(E),ft()}var _t=Object(s.useRef)();function yt(e){_t.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}function St(){_t.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)($a,{ref:_t,refreshList:ft,openDetailsView:Ct,showToastMessage:e.showToastMessage}),Object(v.jsx)(Ja,{ref:Nt,openUpdateForm:yt,openCreateForm:St,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:xt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Customer Withdrawals"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:St,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No CustomerWithdrawal to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bcustomerwithdrawal:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),ft()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bcustomerwithdrawal",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),ft()},className:"form-control pull-right",style:{bcustomerwithdrawal:"solid 1px",bcustomerwithdrawalColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bcustomerwithdrawal:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("code")},children:["ID","code"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("date")},children:["Date","date"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("amount")},children:["Amount","amount"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("description")},children:["Description","description"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("customer_name")},children:["Customer","customer_name"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){gt("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return jt("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void ut("date_str","");ut("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void ut("from_date","");ut("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void ut("to_date","");ut("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return jt("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return jt("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){bt("customer_id",e)},options:Be,placeholder:"Select customers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ht.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){bt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){dt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ut("created_at","");ut("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_from","");ut("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_to","");ut("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.customer_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})},ts=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Capital");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/capital/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Capital #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"InvestedByUser"}),Object(v.jsxs)("td",{children:[" ",c.invested_by_user_name]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]}),Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"Capital",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),as=ts,ss=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get Capital");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}};fetch("/v1/capital/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:z({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.invested_by_user_id,name:Z.invested_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(h.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(!1),z(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-capital.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=(R[0],R[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=(F[0],F[1],Object(s.useState)({})),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1],H=new y.a,G=Object(s.useState)({images_content:[]}),W=Object(o.a)(G,2),Z=W[0],K=W[1],X=Object(s.useState)(!1),J=Object(o.a)(X,2),Y=J[0],$=J[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){H.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestInvestedByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(t){t.preventDefault(),console.log("Inside handle Create"),H.get("store_id")&&(Z.store_id=H.get("store_id"));var a="/v1/capital",s="POST";Z.id&&(a="/v1/capital/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:H.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),V(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:z({}),V(!1),console.log("Response:"),console.log(c),e.showToastMessage("Capital Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){V(!1),console.log("Inside catch"),console.log(t),z(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Capital!","danger")}))}var xe=Object(s.useRef)();Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:xe,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Y,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:Z.id?"Update InvestedByUser Capital #"+Z.description:"Create New Capital Investment"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:me,children:[B?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:me,children:[H.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!L.store_id,onChange:function(e){if(L.store_id="",L.product_id="",z(L),0===e.length)return L.store_id="Invalid Store selected",z(L),K(Object(h.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(h.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){xe.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),L.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Invested By User*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"invested_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!L.invested_by_user_id,onChange:function(e){if(L.invested_by_user_id="",z(L),0===e.length)return L.invested_by_user_id="Invalid User selected",z(L),Z.invested_by_user_id="",K(Object(h.a)({},Z)),void de([]);Z.invested_by_user_id=e[0].id,K(Object(h.a)({},Z)),de(e)},options:ce,placeholder:"Select InvestedByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),L.invested_by_user_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.invested_by_user_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){L.amount="",z(Object(h.a)({},L)),Z.amount=parseFloat(e.target.value),K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),L.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.amount]}),Z.amount&&!L.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){L.description="",z(Object(h.a)({},L)),Z.description=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),L.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.description]}),Z.description&&!L.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(O.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(h.a)({},Z))}}),L.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",L.status="Invalid Payment Method",void z(Object(h.a)({},L));L.payment_method="",z(Object(h.a)({},L)),Z.payment_method=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),L.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(L.image="",z(Object(h.a)({},L)),!e.target.value)return L.image="Invalid Image File",void z(Object(h.a)({},L));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(h.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),L.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.image]}),Z.image&&!L.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:me,children:B?Object(v.jsx)(w.a,{as:"span",animation:"bcapital",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),ns=ss;var cs=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){vt()}),[]);var Je=Object(s.useState)({}),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],ct=at[1],it=Object(s.useState)("-"),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1];function jt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=jt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,U(E=1),vt()}function ht(e,t){if(!t)return E=1,$e[e]="",U(E),void vt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(_(t),h(""),$e.date="",$e[e]=t):"to_date"===e?(k(t),h(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(_e(t),he(""),$e.created_at="",$e[e]=t),U(E=1),vt()}function pt(e,t){"created_by"===e?ze(t):"invested_by_user_id"===e&&Qe(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),vt()}function mt(){return(mt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestInvestedByUsers"),""!==(s=jt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ve(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt=Object(s.useState)(0),Ot=Object(o.a)(xt,2),ft=Ot[0],gt=Ot[1];function vt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=jt($e);""!==s&&(s="&"+s),Se(!0),fetch("/v1/capital?select=id,code,date,amount,description,invested_by_user_name,created_by_name,created_at"+s+"&sort="+lt+st+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),ft=n.meta.total,gt(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function _t(e){ct(st=e),dt(lt="-"===lt?"":"-"),vt()}function yt(e){E=parseInt(e),U(E),vt()}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var St=Object(s.useRef)();function wt(e){St.current.open(e)}function kt(){Nt.current.open()}var Tt=Object(s.useRef)(),Rt=Object(s.useRef)();function Dt(e){Rt.current.open(e)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ns,{ref:Nt,openUserCreateForm:function(){Tt.current.open()},openUserDetailsView:Dt,refreshList:vt,openDetailsView:wt,showToastMessage:e.showToastMessage}),Object(v.jsx)(as,{ref:St,openUpdateForm:Ct,openCreateForm:kt,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Tt,openDetailsView:Dt,showToastMessage:e.showToastMessage}),Object(v.jsx)(nt,{ref:Rt,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Capital Investments"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:kt,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Capital to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bcapital:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),vt()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bcapital",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),vt()},className:"form-control pull-right",style:{bcapital:"solid 1px",bcapitalColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bcapital:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("code")},children:["ID","code"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("date")},children:["Date","date"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("amount")},children:["Amount","amount"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("description")},children:["Description","description"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("invested_by_user_name")},children:["InvestedByUser","invested_by_user_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"invested_by_user_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by_name")},children:["Created By","created_by_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void ht("date_str","");ht("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"invested_by_user_id",labelKey:"name",onChange:function(e){pt("invested_by_user_id",e)},options:Be,placeholder:"Select investedbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){mt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.invested_by_user_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){wt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})},rs=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CapitalWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/capital-withdrawal/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of CapitalWithdrawal #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"WithdrawnByUser"}),Object(v.jsxs)("td",{children:[" ",c.withdrawn_by_user_name]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]}),Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"CapitalWithdrawal",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),is=rs,os=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get CapitalWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}};fetch("/v1/capital-withdrawal/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:z({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.withdrawn_by_user_id,name:Z.withdrawn_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(h.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(!1),z(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-capitalwithdrawal.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=(R[0],R[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=(F[0],F[1],Object(s.useState)({})),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1],H=new y.a,G=Object(s.useState)({images_content:[]}),W=Object(o.a)(G,2),Z=W[0],K=W[1],X=Object(s.useState)(!1),J=Object(o.a)(X,2),Y=J[0],$=J[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){H.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestWithdrawnByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(t){t.preventDefault(),console.log("Inside handle Create"),H.get("store_id")&&(Z.store_id=H.get("store_id"));var a="/v1/capital-withdrawal",s="POST";Z.id&&(a="/v1/capital-withdrawal/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:H.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),V(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:z({}),V(!1),console.log("Response:"),console.log(c),e.showToastMessage("CapitalWithdrawal Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){V(!1),console.log("Inside catch"),console.log(t),z(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CapitalWithdrawal!","danger")}))}var xe=Object(s.useRef)();Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:xe,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Y,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:Z.id?"Update WithdrawnByUser CapitalWithdrawal #"+Z.description:"Create New Capital Withdrawal"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:me,children:[B?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:me,children:[H.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!L.store_id,onChange:function(e){if(L.store_id="",L.product_id="",z(L),0===e.length)return L.store_id="Invalid Store selected",z(L),K(Object(h.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(h.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){xe.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),L.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Withdrawn By User*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"withdrawn_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!L.withdrawn_by_user_id,onChange:function(e){if(L.withdrawn_by_user_id="",z(L),0===e.length)return L.withdrawn_by_user_id="Invalid User selected",z(L),Z.withdrawn_by_user_id="",K(Object(h.a)({},Z)),void de([]);Z.withdrawn_by_user_id=e[0].id,K(Object(h.a)({},Z)),de(e)},options:ce,placeholder:"Select WithdrawnByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),L.withdrawn_by_user_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.withdrawn_by_user_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){L.amount="",z(Object(h.a)({},L)),Z.amount=parseFloat(e.target.value),K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),L.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.amount]}),Z.amount&&!L.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){L.description="",z(Object(h.a)({},L)),Z.description=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),L.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.description]}),Z.description&&!L.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(O.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(h.a)({},Z))}}),L.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",L.status="Invalid Payment Method",void z(Object(h.a)({},L));L.payment_method="",z(Object(h.a)({},L)),Z.payment_method=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),L.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(L.image="",z(Object(h.a)({},L)),!e.target.value)return L.image="Invalid Image File",void z(Object(h.a)({},L));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(h.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),L.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.image]}),Z.image&&!L.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:me,children:B?Object(v.jsx)(w.a,{as:"span",animation:"bcapitalwithdrawal",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),ls=os;var ds=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){vt()}),[]);var Je=Object(s.useState)({}),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],ct=at[1],it=Object(s.useState)("-"),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1];function jt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=jt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,U(E=1),vt()}function ht(e,t){if(!t)return E=1,$e[e]="",U(E),void vt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(_(t),h(""),$e.date="",$e[e]=t):"to_date"===e?(k(t),h(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(_e(t),he(""),$e.created_at="",$e[e]=t),U(E=1),vt()}function pt(e,t){"created_by"===e?ze(t):"withdrawn_by_user_id"===e&&Qe(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),vt()}function mt(){return(mt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestWithdrawnByUsers"),""!==(s=jt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ve(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt=Object(s.useState)(0),Ot=Object(o.a)(xt,2),ft=Ot[0],gt=Ot[1];function vt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=jt($e);""!==s&&(s="&"+s),Se(!0),fetch("/v1/capital-withdrawal?select=id,code,date,amount,description,withdrawn_by_user_name,created_by_name,created_at"+s+"&sort="+lt+st+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),ft=n.meta.total,gt(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function _t(e){ct(st=e),dt(lt="-"===lt?"":"-"),vt()}function yt(e){E=parseInt(e),U(E),vt()}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var St=Object(s.useRef)();function wt(e){St.current.open(e)}function kt(){Nt.current.open()}var Tt=Object(s.useRef)(),Rt=Object(s.useRef)();function Dt(e){Rt.current.open(e)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ls,{ref:Nt,openUserCreateForm:function(){Tt.current.open()},openUserDetailsView:Dt,refreshList:vt,openDetailsView:wt,showToastMessage:e.showToastMessage}),Object(v.jsx)(is,{ref:St,openUpdateForm:Ct,openCreateForm:kt,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Tt,openDetailsView:Dt,showToastMessage:e.showToastMessage}),Object(v.jsx)(nt,{ref:Rt,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Capital Withdrawals"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:kt,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No CapitalWithdrawal to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bcapitalwithdrawal:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),vt()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bcapitalwithdrawal",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),vt()},className:"form-control pull-right",style:{bcapitalwithdrawal:"solid 1px",bcapitalwithdrawalColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bcapitalwithdrawal:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("code")},children:["ID","code"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("date")},children:["Date","date"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("amount")},children:["Amount","amount"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("description")},children:["Description","description"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("withdrawn_by_user_name")},children:["WithdrawnByUser","withdrawn_by_user_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"withdrawn_by_user_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by_name")},children:["Created By","created_by_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void ht("date_str","");ht("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"withdrawn_by_user_id",labelKey:"name",onChange:function(e){pt("withdrawn_by_user_id",e)},options:Be,placeholder:"Select withdrawnbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){mt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.withdrawn_by_user_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){wt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})},js=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Divident");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/divident/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(h.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),x(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new y.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1];function O(){x(!1)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(p.a,{show:j,size:"xl",onHide:O,animation:!1,scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsxs)(p.a.Title,{children:["Details of Divident #",c.description," "]}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openCreateForm()},children:[Object(v.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){O(),e.openUpdateForm(c.id)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:O,"aria-label":"Close"})]})]}),Object(v.jsxs)(p.a.Body,{children:[Object(v.jsx)(k.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Code:"}),Object(v.jsxs)("td",{children:[" ",c.code]}),Object(v.jsx)("th",{children:"Date:"}),Object(v.jsxs)("td",{children:[" ",c.date]}),Object(v.jsx)("th",{children:"Description:"}),Object(v.jsxs)("td",{children:[" ",c.description]}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsxs)("td",{children:[" ",c.amount]}),Object(v.jsx)("th",{children:"WithdrawnByUser"}),Object(v.jsxs)("td",{children:[" ",c.withdrawn_by_user_name]}),Object(v.jsx)("th",{children:"Payment Method:"}),Object(v.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Created At:"}),Object(v.jsxs)("td",{children:[" ",c.created_at]}),Object(v.jsx)("th",{children:"Updated At:"}),Object(v.jsxs)("td",{children:[" ",c.updated_at]}),Object(v.jsx)("th",{children:"Created By:"}),Object(v.jsxs)("td",{children:[" ",c.created_by_name]}),Object(v.jsx)("th",{children:"Updated By:"}),Object(v.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(v.jsx)("h4",{children:"Images"}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:"SI No."}),Object(v.jsx)("th",{children:"Image"})]})}),Object(v.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:Object(v.jsx)("img",{alt:"Divident",src:"https://startpos-api.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),us=js,bs=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get Divident");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}};fetch("/v1/divident/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:z({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.withdrawn_by_user_id,name:Z.withdrawn_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(h.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(!1),z(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-divident.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var x=Object(s.useState)(""),f=Object(o.a)(x,2),g=f[0],_=f[1],N=Object(s.useState)([]),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=(R[0],R[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=(F[0],F[1],Object(s.useState)({})),I=Object(o.a)(M,2),L=I[0],z=I[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],V=U[1],H=new y.a,G=Object(s.useState)({images_content:[]}),W=Object(o.a)(G,2),Z=W[0],K=W[1],X=Object(s.useState)(!1),J=Object(o.a)(X,2),Y=J[0],$=J[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,k(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){H.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestWithdrawnByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:H.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(t){t.preventDefault(),console.log("Inside handle Create"),H.get("store_id")&&(Z.store_id=H.get("store_id"));var a="/v1/divident",s="POST";Z.id&&(a="/v1/divident/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:H.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),V(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:z({}),V(!1),console.log("Response:"),console.log(c),e.showToastMessage("Divident Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){V(!1),console.log("Inside catch"),console.log(t),z(Object(h.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Divident!","danger")}))}var xe=Object(s.useRef)();Object(s.useRef)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(P,{ref:xe,showToastMessage:e.showToastMessage}),Object(v.jsxs)(p.a,{show:Y,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(v.jsxs)(p.a.Header,{children:[Object(v.jsx)(p.a.Title,{children:Z.id?"Update WithdrawnByUser Divident #"+Z.description:"Create New Divident Withdrawal"}),Object(v.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(v.jsxs)(m.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(v.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(v.jsxs)(m.a,{variant:"primary",onClick:me,children:[B?Object(v.jsx)(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(v.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(v.jsx)(p.a.Body,{children:Object(v.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:me,children:[H.get("store_name")?"":Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Store*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!L.store_id,onChange:function(e){if(L.store_id="",L.product_id="",z(L),0===e.length)return L.store_id="Invalid Store selected",z(L),K(Object(h.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(h.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:S,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:function(){xe.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi x-lg",children:" "}),L.store_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Withdrawn By User*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(q.a,{id:"withdrawn_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!L.withdrawn_by_user_id,onChange:function(e){if(L.withdrawn_by_user_id="",z(L),0===e.length)return L.withdrawn_by_user_id="Invalid User selected",z(L),Z.withdrawn_by_user_id="",K(Object(h.a)({},Z)),void de([]);Z.withdrawn_by_user_id=e[0].id,K(Object(h.a)({},Z)),de(e)},options:ce,placeholder:"Select WithdrawnByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(v.jsxs)(m.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(v.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),L.withdrawn_by_user_id&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.withdrawn_by_user_id]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Amount*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){L.amount="",z(Object(h.a)({},L)),Z.amount=parseFloat(e.target.value),K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),L.amount&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.amount]}),Z.amount&&!L.amount&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Description*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){L.description="",z(Object(h.a)({},L)),Z.description=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),L.description&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.description]}),Z.description&&!L.description&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)(Q.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(O.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(h.a)({},Z))}}),L.date_str&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.date_str]})]})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",L.status="Invalid Payment Method",void z(Object(h.a)({},L));L.payment_method="",z(Object(h.a)({},L)),Z.payment_method=e.target.value,K(Object(h.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(v.jsx)("option",{value:"",SELECTED:!0}),Object(v.jsx)("option",{value:"cash",children:"Cash"}),Object(v.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),L.payment_method&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.payment_method]})]})]}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{value:g||"",type:"file",onChange:function(e){if(L.image="",z(Object(h.a)({},L)),!e.target.value)return L.image="Invalid Image File",void z(Object(h.a)({},L));g=e.target.value,_(g);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){A.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(h.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),L.image&&Object(v.jsxs)("div",{style:{color:"red"},children:[Object(v.jsx)("i",{className:"bi bi-x-lg",children:" "}),L.image]}),Z.image&&!L.image&&Object(v.jsxs)("div",{style:{color:"green"},children:[Object(v.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(v.jsx)(m.a,{variant:"primary",onClick:me,children:B?Object(v.jsx)(w.a,{as:"span",animation:"bdivident",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),hs=bs;var ps=function(e){var t=new y.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),g=f[0],_=f[1],N=Object(s.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],T=Object(s.useState)([]),R=Object(o.a)(T,2),D=R[0],A=R[1],F=Object(s.useState)(5),P=Object(o.a)(F,2),M=P[0],I=P[1],L=Object(s.useState)(1),z=Object(o.a)(L,2),E=z[0],U=z[1],B=Object(s.useState)(0),V=Object(o.a)(B,2),H=V[0],G=V[1],Z=Object(s.useState)(1),X=Object(o.a)(Z,2),J=X[0],Y=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),me=Object(o.a)(pe,2),xe=me[0],Oe=me[1],fe=Object(s.useState)(""),ge=Object(o.a)(fe,2),ve=ge[0],_e=ge[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],Se=Ne[1],we=Object(s.useState)(!1),ke=Object(o.a)(we,2),Te=ke[0],Re=ke[1],De=Object(s.useState)([]),Ae=Object(o.a)(De,2),Fe=Ae[0],Pe=Ae[1],Me=Object(s.useState)([]),Ie=Object(o.a)(Me,2),Le=Ie[0],ze=Ie[1],Ee=Object(s.useState)([]),Ue=Object(o.a)(Ee,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)([]),qe=Object(o.a)(He,2),Ge=qe[0],Qe=qe[1],We=Object(s.useState)([]),Ze=Object(o.a)(We,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){vt()}),[]);var Je=Object(s.useState)({}),Ye=Object(o.a)(Je,2),$e=Ye[0],et=Ye[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],ct=at[1],it=Object(s.useState)("-"),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1];function jt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=jt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,U(E=1),vt()}function ht(e,t){if(!t)return E=1,$e[e]="",U(E),void vt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"date_str"===e?(h(t),_(""),k(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(_(t),h(""),$e.date="",$e[e]=t):"to_date"===e?(k(t),h(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),_e(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(_e(t),he(""),$e.created_at="",$e[e]=t),U(E=1),vt()}function pt(e,t){"created_by"===e?ze(t):"withdrawn_by_user_id"===e&&Qe(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),U(E=1),vt()}function mt(){return(mt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestWithdrawnByUsers"),""!==(s=jt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ve(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt=Object(s.useState)(0),Ot=Object(o.a)(xt,2),ft=Ot[0],gt=Ot[1];function vt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=jt($e);""!==s&&(s="&"+s),Se(!0),fetch("/v1/divident?select=id,code,date,amount,description,withdrawn_by_user_name,created_by_name,created_at"+s+"&sort="+lt+st+"&page="+E+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Se(!1),Re(!1),A(n.result),r=parseInt((n.total_count+M-1)/M),G(r),Y(n.total_count),re((E-1)*M),ae(n.result.length),ft=n.meta.total,gt(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Se(!1),Re(!1),console.log(e)}))}function _t(e){ct(st=e),dt(lt="-"===lt?"":"-"),vt()}function yt(e){E=parseInt(e),U(E),vt()}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var St=Object(s.useRef)();function wt(e){St.current.open(e)}function kt(){Nt.current.open()}var Tt=Object(s.useRef)(),Rt=Object(s.useRef)();function Dt(e){Rt.current.open(e)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(hs,{ref:Nt,openUserCreateForm:function(){Tt.current.open()},openUserDetailsView:Dt,refreshList:vt,openDetailsView:wt,showToastMessage:e.showToastMessage}),Object(v.jsx)(us,{ref:St,openUpdateForm:Ct,openCreateForm:kt,showToastMessage:e.showToastMessage}),Object(v.jsx)(rt,{ref:Tt,openDetailsView:Dt,showToastMessage:e.showToastMessage}),Object(v.jsx)(nt,{ref:Rt,showToastMessage:e.showToastMessage}),Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("h1",{className:"text-end",children:["Total: ",Object(v.jsx)(W.a,{bg:"secondary",children:Object(v.jsx)(x.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Divident Withdrawals"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:kt,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===J&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Divident to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bdivident:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){Re(!0),vt()},variant:"primary",disabled:Te,children:[Te?Object(v.jsx)(w.a,{as:"span",animation:"bdivident",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:Ce&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),I(M),vt()},className:"form-control pull-right",style:{bdivident:"solid 1px",bdividentColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"}),Object(v.jsx)("option",{value:"200",children:"200"}),Object(v.jsx)("option",{value:"300",children:"300"}),Object(v.jsx)("option",{value:"500",children:"500"}),Object(v.jsx)("option",{value:"1000",children:"1000"}),Object(v.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bdivident:"solid 0px"},children:H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""})}),Object(v.jsx)("div",{className:"row",children:J>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+te," of"," ",J]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",E," of ",H]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("code")},children:["ID","code"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("date")},children:["Date","date"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("amount")},children:["Amount","amount"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("description")},children:["Description","description"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("withdrawn_by_user_name")},children:["WithdrawnByUser","withdrawn_by_user_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"withdrawn_by_user_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by_name")},children:["Created By","created_by_name"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===st&&"-"===lt?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===lt?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return h(""),void ht("date_str","");ht("date_str",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(v.jsx)("br",{}),c?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"from_date",value:g,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return _(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"to_date",value:S,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return k(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"withdrawn_by_user_id",labelKey:"name",onChange:function(e){pt("withdrawn_by_user_id",e)},options:Be,placeholder:"Select withdrawnbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){mt.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Fe,placeholder:"Select Users",selected:Le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(v.jsx)("br",{}),le?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:xe,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:ve,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:D&&D.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.code}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.withdrawn_by_user_name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ct(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){wt(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),H?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:H,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:E-1}):""]})})})})]})]})};var ms=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Z=W[0],X=W[1],J=Object(s.useState)(""),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1];Object(s.useEffect)((function(){Le()}),[]);var ve=Object(s.useState)({}),_e=Object(o.a)(ve,2),ye=_e[0],Ne=_e[1],Ce=Object(s.useState)("created_at"),Se=Object(o.a)(Ce,2),we=Se[0],ke=Se[1],Te=Object(s.useState)("-"),Re=Object(o.a)(Te,2),De=Re[0],Ae=Re[1];function Fe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Fe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,me(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){ye[e]=t,g(f=1),Le()}function Ie(e,t){if(!t)return f=1,ye[e]="",g(f),void Le();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),g(f=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Fe(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/user?select=id,name,admin,email,mob,created_by_name,created_at"+s+"&sort="+De+we+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),E((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function ze(e){ke(we=e),Ae(De="-"===De?"":"-"),Le()}function Ee(e){f=parseInt(e),g(f),Le()}function Ue(e){He.current.open(e)}var Be=Object(s.useRef)();function Ve(e){Be.current.open(e)}var He=Object(s.useRef)();function qe(){He.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(rt,{ref:He,refreshList:Le,showToastMessage:e.showToastMessage,openDetailsView:Ve}),Object(v.jsx)(nt,{ref:Be,openUpdateForm:Ue,openCreateForm:qe}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Users"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:qe,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Users to display"})})}),Object(v.jsxs)("div",{className:"row",style:{buser:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{buser:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ue(!0),Le()},variant:"primary",disabled:je,children:[je?Object(v.jsx)(w.a,{as:"span",animation:"buser",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ie&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Le()},className:"form-control pull-right",style:{buser:"solid 1px",buserColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{buser:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",z+1,"-",z+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("mob")},children:["Mob","mob"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"mob"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("name")},children:["Name","name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("email")},children:["Email","email"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"email"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_by_name")},children:["Created By","created_by_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"mob",onChange:function(e){return Me("mob",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return Me("name",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"email",onChange:function(e){return Me("email",e.target.value)},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ge(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Le()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Z,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ie("created_at","");Ie("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return H(!V)},children:V?"Less..":"More.."}),Object(v.jsx)("br",{}),V?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ie("created_at_from","");Ie("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ie("created_at_to","");Ie("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.mob}),Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.email}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})};var xs=function(e){var t=new y.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],h=d[1],p=Object(s.useState)(1),x=Object(o.a)(p,2),f=x[0],g=x[1],_=Object(s.useState)(0),N=Object(o.a)(_,2),C=N[0],S=N[1],k=Object(s.useState)(1),T=Object(o.a)(k,2),R=T[0],D=T[1],A=Object(s.useState)(0),F=Object(o.a)(A,2),P=F[0],M=F[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),z=L[0],E=L[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),V=B[0],H=B[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Z=W[0],X=W[1],J=Object(s.useState)(""),Y=Object(o.a)(J,2),$=Y[0],ee=Y[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],me=he[1],xe=Object(s.useState)([]),Oe=Object(o.a)(xe,2),fe=Oe[0],ge=Oe[1];Object(s.useEffect)((function(){Ie()}),[]);var ve=Object(s.useState)({}),_e=Object(o.a)(ve,2),ye=_e[0],Ne=_e[1],Ce=Object(s.useState)("created_at"),Se=Object(o.a)(Ce,2),we=Se[0],ke=Se[1],Te=Object(s.useState)("-"),Re=Object(o.a)(Te,2),De=Re[0],Ae=Re[1];function Fe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Fe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,me(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){if(!t)return f=1,ye[e]="",g(f),void Ie();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(O.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),g(f=1),Ie()}function Ie(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Fe(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/signature?select=id,name,created_by_name,created_at"+s+"&sort="+De+we+"&page="+f+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),S(r),D(n.total_count),E((f-1)*j),M(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function Le(e){ke(we=e),Ae(De="-"===De?"":"-"),Ie()}function ze(e){f=parseInt(e),g(f),Ie()}function Ee(e){Ve.current.open(e)}var Ue=Object(s.useRef)();function Be(e){Ue.current.open(e)}var Ve=Object(s.useRef)();function He(){Ve.current.open()}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(dt,{ref:Ve,refreshList:Ie,showToastMessage:e.showToastMessage,openDetailsView:Be}),Object(v.jsx)(ot,{ref:Ue,openUpdateForm:Ee,openCreateForm:He}),Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h1",{className:"h3",children:"Signatures"})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)(m.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:He,children:[Object(v.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("div",{className:"row",children:0===R&&Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("p",{className:"text-start",children:"No Signatures to display"})})}),Object(v.jsxs)("div",{className:"row",style:{bsignature:"solid 0px"},children:[Object(v.jsx)("div",{className:"col text-start",style:{bsignature:"solid 0px"},children:Object(v.jsxs)(m.a,{onClick:function(){ue(!0),Ie()},variant:"primary",disabled:je,children:[je?Object(v.jsx)(w.a,{as:"span",animation:"bsignature",size:"sm",role:"status","aria-hidden":!0}):Object(v.jsx)("i",{className:"fa fa-refresh"}),Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(v.jsx)("div",{className:"col text-center",children:ie&&Object(v.jsx)(w.a,{animation:"grow",variant:"primary"})}),Object(v.jsx)("div",{className:"col text-end",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(v.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),h(j),Ie()},className:"form-control pull-right",style:{bsignature:"solid 1px",bsignatureColor:"silver",width:"55px"},children:[Object(v.jsx)("option",{value:"5",children:"5"}),Object(v.jsx)("option",{value:"10",children:"10"}),Object(v.jsx)("option",{value:"20",children:"20"}),Object(v.jsx)("option",{value:"40",children:"40"}),Object(v.jsx)("option",{value:"50",children:"50"}),Object(v.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",style:{bsignature:"solid 0px"},children:C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""})}),Object(v.jsx)("div",{className:"row",children:R>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"col text-start",children:Object(v.jsxs)("p",{className:"text-start",children:["showing ",z+1,"-",z+P," of"," ",R]})}),Object(v.jsx)("div",{className:"col text-end",children:Object(v.jsxs)("p",{className:"text-end",children:["page ",f," of ",C]})})]})}),Object(v.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(v.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("name")},children:["Name","name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("created_by_name")},children:["Created By","created_by_name"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(v.jsx)("th",{children:Object(v.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Le("created_at")},children:["Created At","created_at"===we&&"-"===De?Object(v.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===we&&""===De?Object(v.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(v.jsx)("th",{children:"Actions"})]})}),Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"text-center",children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"text",id:"name",onChange:function(e){return t="name",a=e.target.value,ye[t]=a,g(f=1),void Ie();var t,a},className:"form-control"})}),Object(v.jsx)("th",{children:Object(v.jsx)(q.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ge(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),g(f=1),Ie()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(v.jsxs)("th",{children:[Object(v.jsx)(Q.a,{id:"created_at",value:Z,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Me("created_at","");Me("created_at",e)}}),Object(v.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return H(!V)},children:V?"Less..":"More.."}),Object(v.jsx)("br",{}),V?Object(v.jsxs)("span",{className:"text-left",children:["From:"," ",Object(v.jsx)(Q.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Me("created_at_from","");Me("created_at_from",e)}}),"To:"," ",Object(v.jsx)(Q.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Me("created_at_to","");Me("created_at_to",e)}})]}):null]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.created_by_name}),Object(v.jsx)("td",{children:Object(O.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(v.jsxs)("td",{children:[Object(v.jsx)(m.a,{className:"btn btn-light btn-sm",onClick:function(){Ee(e.id)},children:Object(v.jsx)("i",{className:"bi bi-pencil"})}),Object(v.jsx)(m.a,{className:"btn btn-primary btn-sm",onClick:function(){Be(e.id)},children:Object(v.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),C?Object(v.jsx)(K.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:C,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:f-1}):""]})})})})]})]})},Os=a(52),fs=a(62),gs=a(65),vs=a(64),_s=function(e){Object(gs.a)(a,e);var t=Object(vs.a)(a);function a(){return Object(Os.a)(this,a),t.apply(this,arguments)}return Object(fs.a)(a,[{key:"render",value:function(){return Object(v.jsx)("footer",{className:"footer",children:Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsxs)("div",{className:"row text-muted",children:[Object(v.jsx)("div",{className:"col-6 text-start",children:Object(v.jsx)("p",{className:"mb-0",children:Object(v.jsx)("a",{className:"text-muted",href:"https://www.startuptech.uk/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)("strong",{children:"\xa9 Startup Tech Consultancy LTD, UK"})})})}),Object(v.jsx)("div",{className:"col-6 text-end",children:Object(v.jsxs)("ul",{className:"list-inline",children:[Object(v.jsx)("li",{className:"list-inline-item",children:Object(v.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Support"})}),Object(v.jsx)("li",{className:"list-inline-item",children:Object(v.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Help Center"})}),Object(v.jsx)("li",{className:"list-inline-item",children:Object(v.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Privacy"})}),Object(v.jsx)("li",{className:"list-inline-item",children:Object(v.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Terms"})})]})})]})})})}}]),a}(n.a.Component),ys=_s;var Ns=function(e){var t=new y.a,a=Object(s.useState)({activeTab:"",tabs:["analytics","sales","sales cash discounts","sales payments","sales return","sales return payments","purchases","purchase cash discounts","purchase payments","purchase return","purchase return payments","delivery notes","quotations","vendors","stores","customers","products","product category","expense category","expenses","customer deposits","customer withdrawals","capitals","capital withdrawals","dividents","users","signatures"]}),n=Object(o.a)(a,2),c=n[0],r=n[1];function i(t){r(Object(h.a)(Object(h.a)({},c),{},{activeTab:t})),window.innerWidth<=991.98&&e.parentCallback()}function d(e){return e===c.activeTab?"sidebar-item active":"sidebar-item"}return Object(v.jsx)("nav",{id:"sidebar",className:"sidebar "+e.isSidebarOpen+" js-sidebar",style:{overflowY:"scroll"},children:Object(v.jsxs)("div",{className:"sidebar-content js-simplebar",children:[Object(v.jsx)("div",{className:"sidebar-brand",children:Object(v.jsx)("span",{className:"align-middle",children:t.get("store_name")?t.get("store_name"):"Start POS"})}),Object(v.jsxs)("ul",{className:"sidebar-nav",children:[Object(v.jsx)("li",{onClick:function(){i(c.tabs[0])},className:d(c.tabs[0]),children:Object(v.jsxs)(l.b,{to:"/dashboard/analytics",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-graph-up"}),Object(v.jsx)("span",{className:"align-middle",children:"Dashboard"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[1])},className:d(c.tabs[1]),children:Object(v.jsxs)(l.b,{to:"/dashboard/sales",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Sales"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[2])},className:d(c.tabs[2]),children:Object(v.jsxs)(l.b,{to:"/dashboard/sales-cash-discounts",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Sales Cash Discounts"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[3])},className:d(c.tabs[3]),children:Object(v.jsxs)(l.b,{to:"/dashboard/sales-payments",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Sales Payments"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[4])},className:d(c.tabs[4]),children:Object(v.jsxs)(l.b,{to:"/dashboard/salesreturn",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Sales Return"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[5])},className:d(c.tabs[5]),children:Object(v.jsxs)(l.b,{to:"/dashboard/sales-return-payments",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Sales Return Payments"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[6])},className:d(c.tabs[6]),children:Object(v.jsxs)(l.b,{to:"/dashboard/purchases",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Purchases"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[7])},className:d(c.tabs[7]),children:Object(v.jsxs)(l.b,{to:"/dashboard/purchase-cash-discounts",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Purchase Cash Discounts"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[8])},className:d(c.tabs[8]),children:Object(v.jsxs)(l.b,{to:"/dashboard/purchase-payments",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Purchase Payments"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[9])},className:d(c.tabs[9]),children:Object(v.jsxs)(l.b,{to:"/dashboard/purchasereturn",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Purchase Return"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[10])},className:d(c.tabs[10]),children:Object(v.jsxs)(l.b,{to:"/dashboard/purchase-return-payments",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-currency-dollar"}),Object(v.jsx)("span",{className:"align-middle",children:"Purchase Return Payments"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[11])},className:d(c.tabs[11]),children:Object(v.jsxs)(l.b,{to:"/dashboard/delivery-notes",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-file-earmark-text"}),Object(v.jsx)("span",{className:"align-middle",children:"Delivery Notes"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[12])},className:d(c.tabs[12]),children:Object(v.jsxs)(l.b,{to:"/dashboard/quotations",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-file-earmark-text"}),Object(v.jsx)("span",{className:"align-middle",children:"Quotations"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[13])},className:d(c.tabs[13]),children:Object(v.jsxs)(l.b,{to:"/dashboard/vendors",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-shop"}),Object(v.jsx)("span",{className:"align-middle",children:"Vendors/Suppliers"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[14])},className:d(c.tabs[14]),children:Object(v.jsxs)(l.b,{to:"/dashboard/stores",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-shop"}),Object(v.jsx)("span",{className:"align-middle",children:"Stores"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[15])},className:d(c.tabs[15]),children:Object(v.jsxs)(l.b,{to:"/dashboard/customers",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-people"}),Object(v.jsx)("span",{className:"align-middle",children:"Customers"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[16])},className:d(c.tabs[16]),children:Object(v.jsxs)(l.b,{to:"/dashboard/products",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-cart"}),Object(v.jsx)("span",{className:"align-middle",children:"Products"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[17])},className:d(c.tabs[17]),children:Object(v.jsxs)(l.b,{to:"/dashboard/product_category",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Product Category"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[18])},className:d(c.tabs[18]),children:Object(v.jsxs)(l.b,{to:"/dashboard/expense_category",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Expense Category"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[19])},className:d(c.tabs[19]),children:Object(v.jsxs)(l.b,{to:"/dashboard/expenses",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Expenses"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[20])},className:d(c.tabs[20]),children:Object(v.jsxs)(l.b,{to:"/dashboard/customer_deposits",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Customer Deposits"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[21])},className:d(c.tabs[21]),children:Object(v.jsxs)(l.b,{to:"/dashboard/customer_withdrawals",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Customer Withdrawals"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[22])},className:d(c.tabs[22]),children:Object(v.jsxs)(l.b,{to:"/dashboard/capitals",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Capital Investments"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[23])},className:d(c.tabs[23]),children:Object(v.jsxs)(l.b,{to:"/dashboard/capital_withdrawals",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Capital Withdrawals"})]})}),Object(v.jsx)("li",{onClick:function(){i(c.tabs[24])},className:d(c.tabs[24]),children:Object(v.jsxs)(l.b,{to:"/dashboard/dividents",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-diagram-3"}),Object(v.jsx)("span",{className:"align-middle",children:"Divident Withdrawals"})]})}),"true"===t.get("admin")?Object(v.jsx)("li",{onClick:function(){i(c.tabs[25])},className:d(c.tabs[25]),children:Object(v.jsxs)(l.b,{to:"/dashboard/users",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-file-person"}),Object(v.jsx)("span",{className:"align-middle",children:"Users"})]})}):"",Object(v.jsx)("li",{onClick:function(){i(c.tabs[26])},className:d(c.tabs[26]),children:Object(v.jsxs)(l.b,{to:"/dashboard/signatures",className:"sidebar-link",children:[Object(v.jsx)("i",{className:"bi bi-fingerprint"}),Object(v.jsx)("span",{className:"align-middle",children:"Signatures"})]})})]}),Object(v.jsx)("div",{className:"sidebar-cta",children:Object(v.jsx)("div",{className:"sidebar-cta-content"})})]})})};var Cs=function(e){var t=new y.a;return Object(v.jsxs)("nav",{className:"navbar navbar-expand navbar-light navbar-bg",children:[Object(v.jsx)("a",{href:"/",onClick:function(t){e.parentCallback(),t.preventDefault()},className:"sidebar-toggle js-sidebar-toggle collapsed",children:Object(v.jsx)("i",{className:"hamburger align-self-center"})}),Object(v.jsx)("div",{className:"navbar-collapse collapse ",children:Object(v.jsx)("ul",{className:"navbar-nav navbar-align",children:Object(v.jsxs)("li",{className:"nav-item dropdown",children:[Object(v.jsx)("a",{href:"/",className:"nav-icon dropdown-toggle d-inline-block d-sm-none","data-bs-toggle":"dropdown",children:Object(v.jsx)("i",{className:"align-middle","data-feather":"settings"})}),Object(v.jsxs)("a",{href:"/",className:"nav-link dropdown-toggle d-none d-sm-inline-block","data-bs-toggle":"dropdown",children:[t.get("user_photo")?Object(v.jsx)("img",{src:t.get("user_photo"),className:"avatar img-fluid rounded me-1",alt:"Charles Hall"}):null,Object(v.jsx)("span",{className:"text-dark",children:t.get("user_name")})]}),Object(v.jsx)("div",{className:"dropdown-menu dropdown-menu-end",children:Object(v.jsxs)("a",{href:"/",onClick:function(e){e.preventDefault(),t.remove("access_token",{path:"/"}),t.remove("user_id",{path:"/"}),t.remove("user_photo",{path:"/"}),t.remove("user_name",{path:"/"}),t.remove("store_name",{path:"/"}),t.remove("store_id",{path:"/"}),t.remove("admin",{path:"/"}),window.location="/"},className:"dropdown-item",children:[Object(v.jsx)("i",{className:"align-middle me-1","data-feather":"log-out"})," Log out"]})})]})})})]})},Ss=a.p+"static/media/avatar.432abd57.jpg";var ws=function(){var e=Object(d.g)(),t=Object(s.useState)({}),a=Object(o.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(!1),i=Object(o.a)(r,2),l=i[0],j=i[1],h=new y.a;function p(){console.log("inside me");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:h.get("access_token")}};fetch("/v1/me",t).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(r=t.t0,a.ok){t.next=10;break}return i=r&&r.errors,t.abrupt("return",Promise.reject(i));case 10:c({}),console.log("Response:"),console.log(r),h.set("user_name",r.result.name,{path:"/",expires:new Date(Date.now()+31536e6)}),h.set("user_id",r.result.id,{path:"/",expires:new Date(Date.now()+31536e6)}),!0===r.result.admin?h.set("admin",!0,{path:"/",expires:new Date(Date.now()+31536e6)}):h.set("admin",!1,{path:"/",expires:new Date(Date.now()+31536e6)}),r.result.photo&&h.set("user_photo",r.result.photo,{path:"/",expires:new Date(Date.now()+31536e6)}),e.push("/dashboard/analytics");case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){j(!1),c(e)}))}return Object(s.useEffect)((function(){h.get("access_token")&&(window.location="/dashboard/analytics")}),[h.get("admin")]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("main",{className:"d-flex w-100",children:Object(v.jsx)("div",{className:"container d-flex flex-column",children:Object(v.jsx)("div",{className:"row vh-100",children:Object(v.jsx)("div",{className:"col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100",children:Object(v.jsxs)("div",{className:"d-table-cell align-middle",children:[Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("h1",{className:"h2",children:"Start POS"}),Object(v.jsx)("p",{className:"lead",children:"Sign in to your account to continue"})]}),Object(v.jsx)("div",{className:"card",children:Object(v.jsx)("div",{className:"card-body",children:Object(v.jsxs)("div",{className:"m-sm-4",children:[Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)("img",{src:Ss,alt:"Charles Hall",className:"img-fluid rounded-circle",width:"132",height:"132"})}),Object(v.jsxs)("form",{onSubmit:function(e){console.log("Inside handle Submit"),e.preventDefault();var t={email:e.target[0].value,password:e.target[1].value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};j(!0),fetch("/v1/authorize",a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return r=n&&n.errors,e.abrupt("return",Promise.reject(r));case 10:c({}),console.log("Response:"),console.log(n),i=n.result.code,console.log("inside access token"),fetch("/v1/accesstoken",{method:"POST",headers:{"Content-Type":"application/json",Authorization:i}}).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return r=n&&n.errors,e.abrupt("return",Promise.reject(r));case 10:c({}),console.log("Response:"),console.log(n),i=new y.a,(o=new Date(0)).setUTCSeconds(n.result.expires_at),i.set("access_token",n.result.access_token,{path:"/",expires:o}),p();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),c(e)}));case 14:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),console.log("Inside catch"),console.log(e),c(e),console.error("There was an error!",e)}))},children:[Object(v.jsxs)("div",{className:"mb-3",children:[Object(v.jsx)("label",{className:"form-label",children:"Email"}),Object(v.jsx)("input",{className:"form-control form-control-lg",type:"email",name:"email",placeholder:"Enter your email"}),Object(v.jsx)("span",{style:{color:"red"},children:n.email})]}),Object(v.jsxs)("div",{className:"mb-3",children:[Object(v.jsxs)("label",{className:"form-label",children:["Password ",l]}),Object(v.jsx)("input",{className:"form-control form-control-lg",type:"password",name:"password",placeholder:"Enter your password"}),Object(v.jsx)("span",{style:{color:"red"},children:n.password})]}),Object(v.jsx)("div",{children:Object(v.jsx)("label",{className:"form-check"})}),Object(v.jsxs)("div",{className:"text-center mt-3",children:[l?Object(v.jsxs)("button",{className:"btn btn-lg btn-primary",type:"button",disabled:!0,children:[Object(v.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":!0}),"Logging In..."]}):null,l?null:Object(v.jsx)("button",{className:"btn btn-lg btn-primary",type:"submit",children:"Login"})]})]})]})})}),Object(v.jsx)(ys,{})]})})})})}),"  "]}),"   "]})},ks=a(185),Ts=a(335),Rs=(a(644),a(46)),Ds=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&function(){var t=[{type:"datetime",label:"Time"}];e.columns.sales&&t.push({type:"number",label:"Sales"});e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"});e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"});e.columns.unpaidSales&&t.push({type:"number",label:"UnPaid Sales"});e.columns.expense&&t.push({type:"number",label:"Expense"});e.columns.purchase&&t.push({type:"number",label:"Purchase"});e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"});e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"});e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"});e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"});e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t);if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var s,n=Object(E.a)(e.allOrders);try{for(n.s();!(s=n.n()).done;){var i=s.value,o=[new Date(i.date)];e.columns.sales&&o.push(parseFloat(i.net_total.toFixed(2))),e.columns.salesProfit&&o.push(parseFloat(i.net_profit.toFixed(2))),e.columns.paidSales&&("paid"==i.payment_status?o.push(parseFloat(i.net_total.toFixed(2))):o.push(0)),e.columns.unpaidSales&&("not_paid"==i.payment_status?o.push(parseFloat(i.net_total.toFixed(2))):o.push(0)),e.columns.expense&&o.push(void 0),e.columns.purchase&&o.push(void 0),e.columns.salesReturn&&o.push(void 0),e.columns.salesReturnProfit&&o.push(void 0),e.columns.salesReturnLoss&&o.push(void 0),e.columns.purchaseReturn&&o.push(void 0),e.columns.loss&&o.push(parseFloat(i.loss.toFixed(2))),a.push(o)}}catch(F){n.e(F)}finally{n.f()}}if(e.columns.expense){var l,d=Object(E.a)(e.allExpenses);try{for(d.s();!(l=d.n()).done;){var j=l.value,u=[new Date(j.date)];e.columns.sales&&u.push(void 0),e.columns.salesProfit&&u.push(void 0),e.columns.expense&&u.push(parseFloat(j.amount.toFixed(2))),e.columns.purchase&&u.push(void 0),e.columns.salesReturn&&u.push(void 0),e.columns.salesReturnProfit&&u.push(void 0),e.columns.salesReturnLoss&&u.push(void 0),e.columns.purchaseReturn&&u.push(void 0),e.columns.loss&&u.push(void 0),a.push(u)}}catch(F){d.e(F)}finally{d.f()}}if(e.columns.purchase){var b,h=Object(E.a)(e.allPurchases);try{for(h.s();!(b=h.n()).done;){var p=b.value,m=[new Date(p.date)];e.columns.sales&&m.push(void 0),e.columns.salesProfit&&m.push(void 0),e.columns.expense&&m.push(void 0),e.columns.purchase&&m.push(parseFloat(p.net_total.toFixed(2))),e.columns.salesReturn&&m.push(void 0),e.columns.salesReturnProfit&&m.push(void 0),e.columns.salesReturnLoss&&m.push(void 0),e.columns.purchaseReturn&&m.push(void 0),e.columns.loss&&m.push(void 0),a.push(m)}}catch(F){h.e(F)}finally{h.f()}}if(e.columns.salesReturn){var x,O=Object(E.a)(e.allSalesReturns);try{for(O.s();!(x=O.n()).done;){var f=x.value,g=[new Date(f.date)];e.columns.sales&&g.push(void 0),e.columns.salesProfit&&g.push(void 0),e.columns.expense&&g.push(void 0),e.columns.purchase&&g.push(void 0),e.columns.salesReturn&&g.push(parseFloat(f.net_total.toFixed(2))),e.columns.salesReturnProfit&&g.push(void 0),e.columns.salesReturnLoss&&g.push(void 0),e.columns.purchaseReturn&&g.push(void 0),e.columns.loss&&g.push(void 0),a.push(g)}}catch(F){O.e(F)}finally{O.f()}}if(e.columns.salesReturnProfit){var v,_=Object(E.a)(e.allSalesReturns);try{for(_.s();!(v=_.n()).done;){var y=v.value,N=[new Date(y.date)];e.columns.sales&&N.push(void 0),e.columns.salesProfit&&N.push(void 0),e.columns.expense&&N.push(void 0),e.columns.purchase&&N.push(void 0),e.columns.salesReturn&&N.push(void 0),e.columns.salesReturnProfit&&N.push(parseFloat(y.net_profit.toFixed(2))),e.columns.salesReturnLoss&&N.push(void 0),e.columns.purchaseReturn&&N.push(void 0),e.columns.loss&&N.push(void 0),a.push(N)}}catch(F){_.e(F)}finally{_.f()}}if(e.columns.salesReturnLoss){var C,S=Object(E.a)(e.allSalesReturns);try{for(S.s();!(C=S.n()).done;){var w=C.value,k=[new Date(w.date)];e.columns.sales&&k.push(void 0),e.columns.salesProfit&&k.push(void 0),e.columns.expense&&k.push(void 0),e.columns.purchase&&k.push(void 0),e.columns.salesReturn&&k.push(void 0),e.columns.salesReturnProfit&&k.push(void 0),e.columns.salesReturnLoss&&k.push(parseFloat(w.loss.toFixed(2))),e.columns.purchaseReturn&&k.push(void 0),e.columns.loss&&k.push(void 0),a.push(k)}}catch(F){S.e(F)}finally{S.f()}}if(e.columns.purchaseReturn){var T,R=Object(E.a)(e.allPurchaseReturns);try{for(R.s();!(T=R.n()).done;){var D=T.value,A=[new Date(D.date)];e.columns.sales&&A.push(void 0),e.columns.salesProfit&&A.push(void 0),e.columns.expense&&A.push(void 0),e.columns.purchase&&A.push(void 0),e.columns.salesReturn&&A.push(void 0),e.columns.salesReturnProfit&&A.push(void 0),e.columns.salesReturnLoss&&A.push(void 0),e.columns.purchaseReturn&&A.push(parseFloat(D.net_total.toFixed(2))),e.columns.loss&&A.push(void 0),a.push(A)}}catch(F){R.e(F)}finally{R.f()}}c=a,r(a)}()}}}));var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1];var i=Object(s.useState)({title:"Sales",displayExactValues:!0,subtitle:"(SAR)",legend:{position:"bottom"},hAxis:{title:"Time"},vAxis:{title:"Amount(SAR)"},series:{}}),l=Object(o.a)(i,2),d=l[0];l[1];Object(s.useEffect)((function(){console.log("Inside useEffect")}),[]);Object(s.useRef)();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"container-fluid p-0",children:[Object(v.jsx)("div",{className:"row",children:c&&c.length>0?Object(v.jsx)(Rs.a,{chartType:"AnnotationChart",width:"100%",height:"400px",data:c,options:d,chartEvents:[{eventName:"ready",callback:function(e){var t=e.chartWrapper,a=e.google,s=t.getChart();a.visualization.events.addListener(s,"select",(function(e){console.log(e);var t=s.getSelection();console.log("selection:",t)}))}}]}):""}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]})})})),As=Object(s.memo)(Ds),Fs=Object(s.forwardRef)((function(e,t){new y.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){A(),e.allOrders.length>0&&F()}}}));var a=Object(s.useState)([{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0],d=(i[1],Object(s.useState)([])),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(s.useState)([]),p=Object(o.a)(h,2),m=p[0],x=p[1],O=Object(s.useState)((new Date).getDate()),f=Object(o.a)(O,2),g=f[0],_=f[1],N=Object(s.useState)((new Date).getMonth()+1),C=Object(o.a)(N,2),S=C[0],w=C[1],k=Object(s.useState)((new Date).getFullYear()),T=Object(o.a)(k,2),R=T[0],D=T[1];function A(){for(var e=new Date(R,S,0).getDate(),t=[],a=1;a<=e;a++)t.push({label:a,value:a});u=t,b(t)}function F(){var t=[{type:"datetime",label:"Time"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"UnPaid Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];if(t.length>1&&a.push(t),e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var s,n=Object(E.a)(e.allOrders);try{for(n.s();!(s=n.n()).done;){var c=s.value;if(new Date(c.date).getMonth()+1==S&&new Date(c.date).getFullYear()==R&&new Date(c.date).getDate()==g){var r=[new Date(c.date)];e.columns.sales&&r.push(parseFloat(c.net_total.toFixed(2))),e.columns.salesProfit&&r.push(parseFloat(c.net_profit.toFixed(2))),e.columns.paidSales&&("paid"==c.payment_status?r.push(parseFloat(c.net_total.toFixed(2))):r.push(0)),e.columns.unpaidSales&&("not_paid"==c.payment_status?r.push(parseFloat(c.net_total.toFixed(2))):r.push(0)),e.columns.expense&&r.push(void 0),e.columns.purchase&&r.push(void 0),e.columns.salesReturn&&r.push(void 0),e.columns.salesReturnProfit&&r.push(void 0),e.columns.salesReturnLoss&&r.push(void 0),e.columns.purchaseReturn&&r.push(void 0),e.columns.loss&&r.push(parseFloat(c.loss.toFixed(2))),a.push(r)}}}catch(w){n.e(w)}finally{n.f()}}if(e.columns.expense){var i,o=Object(E.a)(e.allExpenses);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(new Date(l.date).getMonth()+1==S&&new Date(l.date).getFullYear()==R&&new Date(l.date).getDate()==g){var d=[new Date(l.date)];e.columns.sales&&d.push(void 0),e.columns.salesProfit&&d.push(void 0),e.columns.sales&&d.push(void 0),e.columns.salesProfit&&d.push(void 0),e.columns.expense&&d.push(parseFloat(l.amount.toFixed(2))),e.columns.purchase&&d.push(void 0),e.columns.salesReturn&&d.push(void 0),e.columns.salesReturnProfit&&d.push(void 0),e.columns.salesReturnLoss&&d.push(void 0),e.columns.purchaseReturn&&d.push(void 0),e.columns.loss&&d.push(void 0),a.push(d)}}}catch(w){o.e(w)}finally{o.f()}}if(e.columns.purchase){var j,u=Object(E.a)(e.allPurchases);try{for(u.s();!(j=u.n()).done;){var b=j.value;if(new Date(b.date).getMonth()+1==S&&new Date(b.date).getFullYear()==R&&new Date(b.date).getDate()==g){var h=[new Date(b.date)];e.columns.sales&&h.push(void 0),e.columns.salesProfit&&h.push(void 0),e.columns.sales&&h.push(void 0),e.columns.salesProfit&&h.push(void 0),e.columns.expense&&h.push(void 0),e.columns.purchase&&h.push(parseFloat(b.net_total.toFixed(2))),e.columns.salesReturn&&h.push(void 0),e.columns.salesReturnProfit&&h.push(void 0),e.columns.salesReturnLoss&&h.push(void 0),e.columns.purchaseReturn&&h.push(void 0),e.columns.loss&&h.push(void 0),a.push(h)}}}catch(w){u.e(w)}finally{u.f()}}if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var p,O=Object(E.a)(e.allSalesReturns);try{for(O.s();!(p=O.n()).done;){var f=p.value;if(new Date(f.date).getMonth()+1==S&&new Date(f.date).getFullYear()==R&&new Date(f.date).getDate()==g){var v=[new Date(f.date)];e.columns.sales&&v.push(void 0),e.columns.salesProfit&&v.push(void 0),e.columns.sales&&v.push(void 0),e.columns.salesProfit&&v.push(void 0),e.columns.expense&&v.push(void 0),e.columns.purchase&&v.push(void 0),e.columns.salesReturn&&v.push(parseFloat(f.net_total.toFixed(2))),e.columns.salesReturnProfit&&v.push(parseFloat(f.net_profit.toFixed(2))),e.columns.salesReturnLoss&&v.push(parseFloat(f.loss.toFixed(2))),e.columns.purchaseReturn&&v.push(void 0),e.columns.loss&&v.push(void 0),a.push(v)}}}catch(w){O.e(w)}finally{O.f()}}if(e.columns.purchaseReturn){var _,y=Object(E.a)(e.allPurchaseReturns);try{for(y.s();!(_=y.n()).done;){var N=_.value;if(new Date(N.date).getMonth()+1==S&&new Date(N.date).getFullYear()==R&&new Date(N.date).getDate()==g){var C=[new Date(N.date)];e.columns.sales&&C.push(void 0),e.columns.salesProfit&&C.push(void 0),e.columns.sales&&C.push(void 0),e.columns.salesProfit&&C.push(void 0),e.columns.expense&&C.push(void 0),e.columns.purchase&&C.push(void 0),e.columns.salesReturn&&C.push(void 0),e.columns.salesReturnProfit&&C.push(void 0),e.columns.salesReturnLoss&&C.push(void 0),e.columns.purchaseReturn&&C.push(parseFloat(N.net_total.toFixed(2))),e.columns.loss&&C.push(void 0),a.push(C)}}}catch(w){y.e(w)}finally{y.f()}}m=a,x(a)}var P=Object(s.useState)({title:"",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Time"},vAxis:{title:"Amount(SAR)"},series:{}}),M=Object(o.a)(P,2),I=M[0];M[1];return Object(s.useEffect)((function(){}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Year"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:R,onChange:function(e){e.target.value&&(R=parseInt(e.target.value),D(parseInt(e.target.value)),F())},className:"form-control",children:c.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Month"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:S,onChange:function(e){e.target.value&&(S=parseInt(e.target.value),w(parseInt(e.target.value)),A(),F())},className:"form-control",children:l.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Date"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:g,onChange:function(e){e.target.value&&(g=parseInt(e.target.value),_(parseInt(e.target.value)),F())},className:"form-control",children:u.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),m&&m.length>0?Object(v.jsx)(Rs.a,{chartType:"LineChart",width:"100%",height:"400px",data:m,options:I}):""]})})})})),Ps=Object(s.forwardRef)((function(e,t){new y.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){N()}}}));var a=Object(s.useState)([{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0],d=(i[1],Object(s.useState)([])),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(s.useState)((new Date).getMonth()+1),p=Object(o.a)(h,2),m=p[0],x=p[1],O=Object(s.useState)((new Date).getFullYear()),f=Object(o.a)(O,2),g=f[0],_=f[1];function N(){var t=[{type:"date",label:"Date"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"UnPaid Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t),console.log("selectedMonth:",m),console.log("selectedYear:",g);var s=new Date(g,m,0).getDate();console.log("lastDay:",s);for(var n=1;n<=s;n++){var c=0,r=0,i=0,o=0,l=0;if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var d,j=Object(E.a)(e.allOrders);try{for(j.s();!(d=j.n()).done;){var h=d.value;new Date(h.date).getMonth()+1==m&&new Date(h.date).getFullYear()==g&&new Date(h.date).getDate()==n&&(c+=parseFloat(h.net_total),o+=parseFloat(h.net_profit),"paid"==h.payment_status?r+=parseFloat(h.net_total):"not_paid"==h.payment_status&&(i+=parseFloat(h.net_total)),l+=parseFloat(h.loss))}}catch(I){j.e(I)}finally{j.f()}}var p=0;if(e.columns.expense){var x,O=Object(E.a)(e.allExpenses);try{for(O.s();!(x=O.n()).done;){var f=x.value;new Date(f.date).getMonth()+1==m&&new Date(f.date).getFullYear()==g&&new Date(f.date).getDate()==n&&(p+=parseFloat(f.amount))}}catch(I){O.e(I)}finally{O.f()}}var v=0;if(e.columns.purchase){var _,y=Object(E.a)(e.allPurchases);try{for(y.s();!(_=y.n()).done;){var N=_.value;new Date(N.date).getMonth()+1==m&&new Date(N.date).getFullYear()==g&&new Date(N.date).getDate()==n&&(v+=parseFloat(N.net_total))}}catch(I){y.e(I)}finally{y.f()}}var C=0,S=0,w=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var k,T=Object(E.a)(e.allSalesReturns);try{for(T.s();!(k=T.n()).done;){var R=k.value;new Date(R.date).getMonth()+1==m&&new Date(R.date).getFullYear()==g&&new Date(R.date).getDate()==n&&(C+=parseFloat(R.net_total),S+=parseFloat(R.net_profit),w+=parseFloat(R.loss))}}catch(I){T.e(I)}finally{T.f()}}var D=0;if(e.columns.purchaseReturn){var A,F=Object(E.a)(e.allPurchaseReturns);try{for(F.s();!(A=F.n()).done;){var P=A.value;new Date(P.date).getMonth()+1==m&&new Date(P.date).getFullYear()==g&&new Date(P.date).getDate()==n&&(D+=parseFloat(P.net_total))}}catch(I){F.e(I)}finally{F.f()}}var M=[new Date(g,m-1,n)];e.columns.sales&&M.push(parseFloat(c.toFixed(2))),e.columns.salesProfit&&M.push(parseFloat(o.toFixed(2))),e.columns.paidSales&&M.push(parseFloat(r.toFixed(2))),e.columns.unpaidSales&&M.push(parseFloat(i.toFixed(2))),e.columns.expense&&M.push(parseFloat(p.toFixed(2))),e.columns.purchase&&M.push(parseFloat(v.toFixed(2))),e.columns.salesReturn&&M.push(parseFloat(C.toFixed(2))),e.columns.salesReturnProfit&&M.push(parseFloat(S.toFixed(2))),e.columns.salesReturnLoss&&M.push(parseFloat(w.toFixed(2))),e.columns.purchaseReturn&&M.push(parseFloat(D.toFixed(2))),e.columns.loss&&M.push(parseFloat(l.toFixed(2))),M.length>1&&a.push(M)}u=a,b(a)}var C=Object(s.useState)({title:"",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Date"},vAxis:{title:"Amount(SAR)"},series:{}}),S=Object(o.a)(C,2),w=S[0];S[1];return Object(s.useEffect)((function(){}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Year"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:g,onChange:function(e){e.target.value&&(g=parseInt(e.target.value),_(parseInt(e.target.value)),N())},className:"form-control",children:c.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Month"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:m,onChange:function(e){e.target.value&&(m=parseInt(e.target.value),x(parseInt(e.target.value)),N())},className:"form-control",children:l.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),u&&u.length>0?Object(v.jsx)(Rs.a,{chartType:"LineChart",width:"100%",height:"400px",data:u,options:w}):""]})})})})),Ms=Object(s.forwardRef)((function(e,t){new y.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&f()}}}));var a=Object(s.useState)([{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0];i[1];function d(e){var t,a=Object(E.a)(l);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.value==e)return s.label}}catch(n){a.e(n)}finally{a.f()}}var j=Object(s.useState)([]),u=Object(o.a)(j,2),b=u[0],h=u[1],p=Object(s.useState)((new Date).getFullYear()),m=Object(o.a)(p,2),x=m[0],O=m[1];function f(){var t=[{type:"string",label:"Month"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"UnPaid Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Loss"});var a=[];t.length>1&&a.push(t),console.log("selectedYear:",x);for(var s=1;s<=12;s++){var n=0,c=0,r=0,i=0,o=0;if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var l,j=Object(E.a)(e.allOrders);try{for(j.s();!(l=j.n()).done;){var u=l.value;new Date(u.date).getMonth()+1==s&&new Date(u.date).getFullYear()==x&&(n+=parseFloat(u.net_total),c+=parseFloat(u.net_profit),"paid"==u.payment_status?r+=parseFloat(u.net_total):"not_paid"==u.payment_status&&(i+=parseFloat(u.net_total)),o+=parseFloat(u.loss))}}catch(M){j.e(M)}finally{j.f()}}var p=0;if(e.columns.expense){var m,O=Object(E.a)(e.allExpenses);try{for(O.s();!(m=O.n()).done;){var f=m.value;new Date(f.date).getMonth()+1==s&&new Date(f.date).getFullYear()==x&&(p+=parseFloat(f.amount))}}catch(M){O.e(M)}finally{O.f()}}var g=0;if(e.columns.purchase){var v,_=Object(E.a)(e.allPurchases);try{for(_.s();!(v=_.n()).done;){var y=v.value;new Date(y.date).getMonth()+1==s&&new Date(y.date).getFullYear()==x&&(g+=parseFloat(y.net_total))}}catch(M){_.e(M)}finally{_.f()}}var N=0,C=0,S=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var w,k=Object(E.a)(e.allSalesReturns);try{for(k.s();!(w=k.n()).done;){var T=w.value;new Date(T.date).getMonth()+1==s&&new Date(T.date).getFullYear()==x&&(N+=parseFloat(T.net_total),C+=parseFloat(T.net_profit),S+=parseFloat(T.loss))}}catch(M){k.e(M)}finally{k.f()}}var R=0;if(e.columns.purchaseReturn){var D,A=Object(E.a)(e.allPurchaseReturns);try{for(A.s();!(D=A.n()).done;){var F=D.value;new Date(F.date).getMonth()+1==s&&new Date(F.date).getFullYear()==x&&(R+=parseFloat(F.net_total))}}catch(M){A.e(M)}finally{A.f()}}var P=[d(s)];e.columns.sales&&P.push(parseFloat(n.toFixed(2))),e.columns.salesProfit&&P.push(parseFloat(c.toFixed(2))),e.columns.paidSales&&P.push(parseFloat(r.toFixed(2))),e.columns.unpaidSales&&P.push(parseFloat(i.toFixed(2))),e.columns.expense&&P.push(parseFloat(p.toFixed(2))),e.columns.purchase&&P.push(parseFloat(g.toFixed(2))),e.columns.salesReturn&&P.push(parseFloat(N.toFixed(2))),e.columns.salesReturnProfit&&P.push(parseFloat(C.toFixed(2))),e.columns.salesReturnLoss&&P.push(parseFloat(S.toFixed(2))),e.columns.purchaseReturn&&P.push(parseFloat(R.toFixed(2))),e.columns.loss&&P.push(parseFloat(o.toFixed(2))),P.length>1&&a.push(P)}b=a,h(a)}var g=Object(s.useState)({title:"Sales",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Month"},vAxis:{title:"Amount(SAR)"},series:{}}),_=Object(o.a)(g,2),N=_[0];_[1];return Object(s.useEffect)((function(){}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-md-2",children:[Object(v.jsx)("label",{className:"form-label",children:"Year"}),Object(v.jsx)("div",{className:"input-group mb-3",children:Object(v.jsx)("select",{value:x,onChange:function(e){e.target.value&&(x=parseInt(e.target.value),O(parseInt(e.target.value)),f())},className:"form-control",children:c.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.label})}))})})]}),b&&b.length>0?Object(v.jsx)(Rs.a,{chartType:"LineChart",width:"100%",height:"400px",data:b,options:N}):""]})})})})),Is=Object(s.forwardRef)((function(e,t){new y.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&function(){var t=[{type:"string",label:"Year"}];e.columns.sales&&t.push({type:"number",label:"Sales"});e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"});e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"});e.columns.unpaidSales&&t.push({type:"number",label:"UnPaid Sales"});e.columns.expense&&t.push({type:"number",label:"Expense"});e.columns.purchase&&t.push({type:"number",label:"Purchase"});e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"});e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"});e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"});e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"});e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t);for(var s=2020,n=(new Date).getFullYear(),c=s;c<=parseInt(n);c++){var r=0,o=0,d=0,j=0,u=0;if(e.columns.sales||e.columns.salesProfit||e.columns.paidSales||e.columns.unpaidSales||e.columns.loss){var b,h=Object(E.a)(e.allOrders);try{for(h.s();!(b=h.n()).done;){var p=b.value;parseInt(new Date(p.date).getFullYear())===c&&(r+=parseFloat(p.net_total),o+=parseFloat(p.net_profit),"paid"==p.payment_status?d+=parseFloat(p.net_total):"not_paid"==p.payment_status&&(j+=parseFloat(p.net_total)),u+=parseFloat(p.loss))}}catch(M){h.e(M)}finally{h.f()}}var m=0;if(e.columns.expense){var x,O=Object(E.a)(e.allExpenses);try{for(O.s();!(x=O.n()).done;){var f=x.value;parseInt(new Date(f.date).getFullYear())===c&&(m+=parseFloat(f.amount))}}catch(M){O.e(M)}finally{O.f()}}var g=0;if(e.columns.purchase){var v,_=Object(E.a)(e.allPurchases);try{for(_.s();!(v=_.n()).done;){var y=v.value;parseInt(new Date(y.date).getFullYear())===c&&(g+=parseFloat(y.net_total))}}catch(M){_.e(M)}finally{_.f()}}var N=0,C=0,S=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var w,k=Object(E.a)(e.allSalesReturns);try{for(k.s();!(w=k.n()).done;){var T=w.value;parseInt(new Date(T.date).getFullYear())===c&&(N+=parseFloat(T.net_total),C+=parseFloat(T.net_profit),S+=parseFloat(T.loss))}}catch(M){k.e(M)}finally{k.f()}}var R=0;if(e.columns.purchaseReturn){var D,A=Object(E.a)(e.allPurchaseReturns);try{for(A.s();!(D=A.n()).done;){var F=D.value;parseInt(new Date(F.date).getFullYear())===c&&(R+=parseFloat(F.net_total))}}catch(M){A.e(M)}finally{A.f()}}var P=[c.toString()];e.columns.sales&&P.push(parseFloat(r.toFixed(2))),e.columns.salesProfit&&P.push(parseFloat(o.toFixed(2))),e.columns.paidSales&&P.push(parseFloat(d.toFixed(2))),e.columns.unpaidSales&&P.push(parseFloat(j.toFixed(2))),e.columns.expense&&P.push(parseFloat(m.toFixed(2))),e.columns.purchase&&P.push(parseFloat(g.toFixed(2))),e.columns.salesReturn&&P.push(parseFloat(N.toFixed(2))),e.columns.salesReturnProfit&&P.push(parseFloat(C.toFixed(2))),e.columns.salesReturnLoss&&P.push(parseFloat(S.toFixed(2))),e.columns.purchaseReturn&&P.push(parseFloat(R.toFixed(2))),e.columns.loss&&P.push(parseFloat(u.toFixed(2))),P.length>1&&a.push(P)}i=a,l(a)}()}}}));var a=Object(s.useState)([{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021}]),n=Object(o.a)(a,2),c=(n[0],n[1],Object(s.useState)([])),r=Object(o.a)(c,2),i=r[0],l=r[1];var d=Object(s.useState)({title:"Sales",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Year"},vAxis:{title:"Amount(SAR)"},series:{}}),j=Object(o.a)(d,2),u=j[0];j[1];return Object(s.useEffect)((function(){}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"container-fluid p-0",children:Object(v.jsx)("div",{className:"row",children:i&&i.length>0?Object(v.jsx)(Rs.a,{chartType:"LineChart",width:"100%",height:"400px",data:i,options:u}):""})})})})),Ls=Object(s.forwardRef)((function(e,t){var a=new y.a,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)([]),x=Object(o.a)(m,2),O=x[0],f=x[1],g=Object(s.useState)([]),_=Object(o.a)(g,2),N=_[0],C=_[1],S=Object(s.useState)([]),w=Object(o.a)(S,2),k=w[0],T=w[1],R=Object(s.useState)({}),D=Object(o.a)(R,2),A=D[0],F=D[1],P=Object(s.useState)(!1),M=Object(o.a)(P,2),I=(M[0],M[1]),L=Object(s.useState)("date"),z=Object(o.a)(L,2),E=z[0],U=(z[1],Object(s.useState)("-")),B=Object(o.a)(U,2),V=B[0],H=(B[1],Object(s.useState)(!1)),q=Object(o.a)(H,2),G=(q[0],q[1]);function Q(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function W(e,t){return Z.apply(this,arguments)}function Z(){return Z=Object(b.a)(u.a.mark((function e(t,s){var n,c,r,i,o,l,d,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},c=s,a.get("store_id")&&(A.store_id=a.get("store_id")),r=new Date,i=r.getTimezoneOffset(),console.log("Timezone:",parseFloat(i/60)),A.timezone_offset=parseFloat(i/60),F(A),""!==(o=Q(A))&&(o="&"+o),l=1e3,d=[],j=1;case 13:return!0,I(!0),e.next=18,fetch("/v1/"+t+"?"+c+o+"&sort="+V+E+"&page="+j+"&limit="+l,n).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(G(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 18:if(0!==(h=e.sent).length){e.next=21;break}return e.abrupt("break",25);case 21:d=d.concat(h),j++;case 23:e.next=13;break;case 25:return!1,I(!1),e.abrupt("return",d);case 28:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}Object(s.useEffect)(Object(b.a)(u.a.mark((function e(){var t,a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="select=date,net_total,payment_status,net_profit,loss",e.next=3,W("order",t);case 3:return a=e.sent,t="select=date,amount",e.next=7,W("expense",t);case 7:return s=e.sent,t="select=date,net_total",e.next=11,W("purchase",t);case 11:return n=e.sent,t="select=date,net_total,net_profit,loss",e.next=15,W("sales-return",t);case 15:return c=e.sent,t="select=date,net_total",e.next=19,W("purchase-return",t);case 19:o=e.sent,r=a,i(a),j=s,p(s),O=n,f(n),N=c,C(c),console.log("allSalesReturns:",N),k=o,T(o),console.log("allPurchaseReturns:",k),X(),$(),ae(),ce(),oe();case 37:case"end":return e.stop()}}),e)}))),[]);var K=Object(s.useRef)();function X(){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K.current&&K.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=Object(s.useRef)();function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.current&&Y.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=Object(s.useRef)();function ae(){return se.apply(this,arguments)}function se(){return(se=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te.current&&te.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=Object(s.useRef)();function ce(){return re.apply(this,arguments)}function re(){return(re=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne.current&&ne.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=Object(s.useRef)();function oe(){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie.current&&ie.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useRef)();var de=Object(s.useState)({all:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},hourly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},daily:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},monthly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},yearly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1}}),je=Object(o.a)(de,2),ue=je[0],be=je[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h2",{children:[Object(v.jsx)("input",{type:"checkbox",checked:ue.all.sales,onChange:function(e){ue.all.sales=!ue.all.sales,be(Object(h.a)({},ue)),X()}}),"Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.salesProfit,onChange:function(e){ue.all.salesProfit=!ue.all.salesProfit,be(Object(h.a)({},ue)),X()}}),"Sales Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.paidSales,onChange:function(e){ue.all.paidSales=!ue.all.paidSales,be(Object(h.a)({},ue)),X()}}),"Paid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.unpaidSales,onChange:function(e){ue.all.unpaidSales=!ue.all.unpaidSales,be(Object(h.a)({},ue)),X()}}),"UnPaid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.expense,onChange:function(e){ue.all.expense=!ue.all.expense,be(Object(h.a)({},ue)),X()}}),"Expense vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.purchase,onChange:function(e){ue.all.purchase=!ue.all.purchase,be(Object(h.a)({},ue)),X()}}),"Purchase vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.salesReturn,onChange:function(e){ue.all.salesReturn=!ue.all.salesReturn,be(Object(h.a)({},ue)),X()}}),"Sales Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.salesReturnProfit,onChange:function(e){ue.all.salesReturnProfit=!ue.all.salesReturnProfit,be(Object(h.a)({},ue)),X()}}),"Sales Return Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.salesReturnLoss,onChange:function(e){ue.all.salesReturnLoss=!ue.all.salesReturnLoss,be(Object(h.a)({},ue)),X()}}),"Sales Return Loss vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.purchaseReturn,onChange:function(e){ue.all.purchaseReturn=!ue.all.purchaseReturn,be(Object(h.a)({},ue)),X()}}),"Purchase Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.all.loss,onChange:function(e){ue.all.loss=!ue.all.loss,be(Object(h.a)({},ue)),X()}}),"Sales Loss"]}),Object(v.jsx)(As,{ref:K,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:N,allPurchaseReturns:k,columns:ue.all}),Object(v.jsx)("hr",{}),Object(v.jsxs)("h2",{children:["Hourly \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.sales,onChange:function(e){ue.hourly.sales=!ue.hourly.sales,be(Object(h.a)({},ue)),$()}}),"Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.salesProfit,onChange:function(e){ue.hourly.salesProfit=!ue.hourly.salesProfit,be(Object(h.a)({},ue)),$()}}),"Sales Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.paidSales,onChange:function(e){ue.hourly.paidSales=!ue.hourly.paidSales,be(Object(h.a)({},ue)),$()}}),"Paid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.unpaidSales,onChange:function(e){ue.hourly.unpaidSales=!ue.hourly.unpaidSales,be(Object(h.a)({},ue)),$()}}),"UnPaid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.expense,onChange:function(e){ue.hourly.expense=!ue.hourly.expense,be(Object(h.a)({},ue)),$()}}),"Expense vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.purchase,onChange:function(e){ue.hourly.purchase=!ue.hourly.purchase,be(Object(h.a)({},ue)),$()}}),"Purchase vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturn,onChange:function(e){ue.hourly.salesReturn=!ue.hourly.salesReturn,be(Object(h.a)({},ue)),$()}}),"Sales Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturnProfit,onChange:function(e){ue.hourly.salesReturnProfit=!ue.hourly.salesReturnProfit,be(Object(h.a)({},ue)),$()}}),"Sales Return Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturnLoss,onChange:function(e){ue.hourly.salesReturnLoss=!ue.hourly.salesReturnLoss,be(Object(h.a)({},ue)),$()}}),"Sales Return Loss vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.purchaseReturn,onChange:function(e){ue.hourly.purchaseReturn=!ue.hourly.purchaseReturn,be(Object(h.a)({},ue)),$()}}),"Purchase Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.hourly.loss,onChange:function(e){ue.hourly.loss=!ue.hourly.loss,be(Object(h.a)({},ue)),$()}}),"Sales Loss"]}),Object(v.jsx)(Fs,{ref:Y,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:N,allPurchaseReturns:k,columns:ue.hourly}),Object(v.jsx)("hr",{}),Object(v.jsxs)("h2",{children:["Daily \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.sales,onChange:function(e){ue.daily.sales=!ue.daily.sales,be(Object(h.a)({},ue)),ae()}}),"Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.salesProfit,onChange:function(e){ue.daily.salesProfit=!ue.daily.salesProfit,be(Object(h.a)({},ue)),ae()}}),"Sales Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.paidSales,onChange:function(e){ue.daily.paidSales=!ue.daily.paidSales,be(Object(h.a)({},ue)),ae()}}),"Paid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.unpaidSales,onChange:function(e){ue.daily.unpaidSales=!ue.daily.unpaidSales,be(Object(h.a)({},ue)),ae()}}),"UnPaid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.expense,onChange:function(e){ue.daily.expense=!ue.daily.expense,be(Object(h.a)({},ue)),ae()}}),"Expense vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.purchase,onChange:function(e){ue.daily.purchase=!ue.daily.purchase,be(Object(h.a)({},ue)),ae()}}),"Purchase vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturn,onChange:function(e){ue.daily.salesReturn=!ue.daily.salesReturn,be(Object(h.a)({},ue)),ae()}}),"Sales Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturnProfit,onChange:function(e){ue.daily.salesReturnProfit=!ue.daily.salesReturnProfit,be(Object(h.a)({},ue)),ae()}}),"Sales Return Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturnLoss,onChange:function(e){ue.daily.salesReturnLoss=!ue.daily.salesReturnLoss,be(Object(h.a)({},ue)),ae()}}),"Sales Return Loss vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.purchaseReturn,onChange:function(e){ue.daily.purchaseReturn=!ue.daily.purchaseReturn,be(Object(h.a)({},ue)),ae()}}),"Purchase Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.daily.loss,onChange:function(e){ue.daily.loss=!ue.daily.loss,be(Object(h.a)({},ue)),ae()}}),"Sales Loss"]}),Object(v.jsx)(Ps,{ref:te,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:N,allPurchaseReturns:k,columns:ue.daily}),Object(v.jsx)("hr",{}),Object(v.jsxs)("h2",{children:["Monthly \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.sales,onChange:function(e){ue.monthly.sales=!ue.monthly.sales,be(Object(h.a)({},ue)),ce()}}),"Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.salesProfit,onChange:function(e){ue.monthly.salesProfit=!ue.monthly.salesProfit,be(Object(h.a)({},ue)),ce()}}),"Sales Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.paidSales,onChange:function(e){ue.monthly.paidSales=!ue.monthly.paidSales,be(Object(h.a)({},ue)),ce()}}),"Paid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.unpaidSales,onChange:function(e){ue.monthly.unpaidSales=!ue.monthly.unpaidSales,be(Object(h.a)({},ue)),ce()}}),"UnPaid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.expense,onChange:function(e){ue.monthly.expense=!ue.monthly.expense,be(Object(h.a)({},ue)),ce()}}),"Expense vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.purchase,onChange:function(e){ue.monthly.purchase=!ue.monthly.purchase,be(Object(h.a)({},ue)),ce()}}),"Purchase vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturn,onChange:function(e){ue.monthly.salesReturn=!ue.monthly.salesReturn,be(Object(h.a)({},ue)),ce()}}),"Sales Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturnProfit,onChange:function(e){ue.monthly.salesReturnProfit=!ue.monthly.salesReturnProfit,be(Object(h.a)({},ue)),ce()}}),"Sales Return Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturnLoss,onChange:function(e){ue.monthly.salesReturnLoss=!ue.monthly.salesReturnLoss,be(Object(h.a)({},ue)),ce()}}),"Sales Return Loss vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.purchaseReturn,onChange:function(e){ue.monthly.purchaseReturn=!ue.monthly.purchaseReturn,be(Object(h.a)({},ue)),ce()}}),"Purchase Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.monthly.loss,onChange:function(e){ue.monthly.loss=!ue.monthly.loss,be(Object(h.a)({},ue)),ce()}}),"Sales Loss"]}),Object(v.jsx)(Ms,{ref:ne,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:N,allPurchaseReturns:k,columns:ue.monthly}),Object(v.jsx)("hr",{}),Object(v.jsxs)("h2",{children:["Yearly \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.sales,onChange:function(e){ue.yearly.sales=!ue.yearly.sales,be(Object(h.a)({},ue)),oe()}}),"Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.salesProfit,onChange:function(e){ue.yearly.salesProfit=!ue.yearly.salesProfit,be(Object(h.a)({},ue)),oe()}}),"Sales Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.paidSales,onChange:function(e){ue.yearly.paidSales=!ue.yearly.paidSales,be(Object(h.a)({},ue)),oe()}}),"Paid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.unpaidSales,onChange:function(e){ue.yearly.unpaidSales=!ue.yearly.unpaidSales,be(Object(h.a)({},ue)),oe()}}),"UnPaid Sales vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.expense,onChange:function(e){ue.yearly.expense=!ue.yearly.expense,be(Object(h.a)({},ue)),oe()}}),"Expense vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.purchase,onChange:function(e){ue.yearly.purchase=!ue.yearly.purchase,be(Object(h.a)({},ue)),oe()}}),"Purchase vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturn,onChange:function(e){ue.yearly.salesReturn=!ue.yearly.salesReturn,be(Object(h.a)({},ue)),oe()}}),"Sales Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturnProfit,onChange:function(e){ue.yearly.salesReturnProfit=!ue.yearly.salesReturnProfit,be(Object(h.a)({},ue)),oe()}}),"Sales Return Profit vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturnLoss,onChange:function(e){ue.yearly.salesReturnLoss=!ue.yearly.salesReturnLoss,be(Object(h.a)({},ue)),oe()}}),"Sales Return Loss vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.purchaseReturn,onChange:function(e){ue.yearly.purchaseReturn=!ue.yearly.purchaseReturn,be(Object(h.a)({},ue)),oe()}}),"Purchase Return vs \xa0",Object(v.jsx)("input",{type:"checkbox",checked:ue.yearly.loss,onChange:function(e){ue.yearly.loss=!ue.yearly.loss,be(Object(h.a)({},ue)),oe()}}),"Sales Loss"]}),Object(v.jsx)(Is,{ref:ie,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:N,allPurchaseReturns:k,columns:ue.yearly}),Object(v.jsx)("hr",{})]})})),zs=Ls;var Es=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],c=new y.a,r=c.get("access_token");function j(){n("collapsed"===a?"":"collapsed")}Object(s.useEffect)((function(){c.get("access_token")||(window.location="/")}));var u=Object(s.useState)([]),b=Object(o.a)(u,2),h=b[0],p=b[1];function m(e,t){h.push({text:e,variant:t,show:!0}),p(Object(i.a)(h))}return r?Object(v.jsxs)(l.a,{children:[Object(v.jsx)(Ts.a,{position:"top-end",className:"p-3",style:{zIndex:1,position:"absolute"},children:h.map((function(e,t){return Object(v.jsxs)(ks.a,{onClose:function(){!function(e,t){h[e].show=t,p(Object(i.a)(h))}(t,!1),function(e){h=h.splice(e,1),p(Object(i.a)(h)),console.log("toastMessages:",h)}(t),e.show=!1},bg:e.variant,show:e.show,delay:4e3,autohide:!0,children:[Object(v.jsxs)(ks.a.Header,{children:[Object(v.jsx)("strong",{className:"me-auto",children:"Message"}),Object(v.jsx)("small",{children:"1 sec ago "})]}),Object(v.jsx)(ks.a.Body,{children:e.text})]},"toast"+t)}))}),Object(v.jsxs)(d.d,{children:[Object(v.jsx)(d.b,{path:"/dashboard/analytics",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(zs,{})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/sales",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Ht,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-cash-discounts",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(qt,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-payments",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Xt,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/salesreturn",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ha,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-return-payments",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ra,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/purchases",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ya,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-cash-discounts",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Kt,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-payments",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ta,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/purchasereturn",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Sa,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-return-payments",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ja,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/delivery-notes",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(xt,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/quotations",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ht,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/vendors",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(wa,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/stores",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ka,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/customers",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Ta,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/products",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Fa,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/product_category",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Pa,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/expense_category",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Ea,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/expenses",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(qa,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/customer_deposits",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(Ka,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/customer_withdrawals",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(es,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/capitals",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(cs,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/capital_withdrawals",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ds,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/dividents",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ps,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/users",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(ms,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsx)(d.b,{path:"/dashboard/signatures",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(Ns,{isSidebarOpen:a,parentCallback:j}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(Cs,{parentCallback:j}),Object(v.jsx)("main",{className:"content",children:Object(v.jsx)(xs,{showToastMessage:m})}),Object(v.jsx)(ys,{})]})]})}),Object(v.jsxs)(d.b,{path:"/",children:[r&&Object(v.jsx)(d.a,{to:"/dashboard/analytics"}),Object(v.jsx)(ws,{})]})]})]}):Object(v.jsx)(v.Fragment,{})};var Us=function(){return Object(v.jsx)(l.a,{children:Object(v.jsxs)(d.d,{children:[Object(v.jsx)(d.b,{path:"/dashboard/analytics",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/sales",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-cash-discounts",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-payments",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/salesreturn",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/sales-return-payments",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/purchases",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-cash-discounts",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-payments",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/purchasereturn",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/purchase-return-payments",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/delivery-notes",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/quotations",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/vendors",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/stores",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/customers",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/products",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/product_category",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/expense_category",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/expenses",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/customer_deposits",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/customer_withdrawals",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/capitals",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/capital_withdrawals",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/dividents",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/users",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/dashboard/signatures",children:Object(v.jsx)(Es,{})}),Object(v.jsx)(d.b,{path:"/",children:Object(v.jsx)(ws,{})})]})})},Bs=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,662)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(v.jsx)(Us,{}),document.getElementById("root")),Bs()}},[[645,1,2]]]);
//# sourceMappingURL=main.3cc22627.chunk.js.map