(this["webpackJsonpbilling-app2"]=this["webpackJsonpbilling-app2"]||[]).push([[0],{378:function(e,t){},395:function(e,t,a){},397:function(e,t,a){},539:function(e,t){},560:function(e,t){},562:function(e,t,a){},595:function(e,t){},597:function(e,t){},607:function(e,t){},609:function(e,t){},636:function(e,t){},638:function(e,t){},639:function(e,t){},644:function(e,t){},646:function(e,t){},652:function(e,t){},654:function(e,t){},673:function(e,t){},685:function(e,t){},688:function(e,t){},694:function(e,t){},695:function(e,t){},702:function(e,t,a){},703:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(46),r=a.n(c),i=(a(395),a(396),a(397),a(398),a(14)),o=a(2),l=a(35),d=a(41),j=a(4),u=a.n(j),b=a(5),h=a(8),p=a(16),x=a(705),m=a(7),O=a.n(m),f=(a(30),a(381)),_=a(84),g=a(288),v=a(18),y=a.n(v),N=a(6),C=a(3),w=a(26),S=a(31),k=a.n(S),T=a(0),D=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){var n,c,r,i,o,l,d,j,u;return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:Object(w.a)({backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:"10px",height:"1110px",width:"770px"},"marginTop",10+t.top+"px"),children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"70",height:"70",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(T.jsx)("div",{className:"row",style:{marginTop:"10px"},children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"BALANCE SHEET / \u0648\u0631\u0642\u0629 \u0627\u0644\u062a\u0648\u0627\u0632\u0646"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"50%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Account Name: "}),e.model.name?e.model.name:"N/A"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Account Number: "}),e.model.number?e.model.number:"N/A"]}),e.model.phone?Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Phone: "}),e.model.phone]}):"",e.model.dateValue?Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Date: "}),e.model.dateValue?Object(x.default)(new Date(e.model.dateValue),"MMM dd yyyy"):""]}):"",e.model.fromDateValue&&e.model.toDateValue?Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Date: "}),Object(x.default)(new Date(e.model.fromDateValue),"MMM dd yyyy")+" to "+Object(x.default)(new Date(e.model.toDateValue),"MMM dd yyyy")]}):"",!e.model.fromDateValue||e.model.toDateValue||e.model.dateValue?"":Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Date: "}),Object(x.default)(new Date(e.model.fromDateValue),"MMM dd yyyy")+" to present"]}),!e.model.toDateValue||e.model.fromDateValue||e.model.dateValue?"":Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Date: "}),"upto "+Object(x.default)(new Date(e.model.toDateValue),"MMM dd yyyy")]})]})}),Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"50%",alignSelf:"end"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.name?e.model.name:"\u063a\u064a\u0631 \u0645\u062a\u0627\u062d"," ",Object(T.jsx)("strong",{children:" :\u0625\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0631\u0642\u0645 \u062d\u0633\u0627\u0628: "}),e.model.number?e.model.number:"\u063a\u064a\u0631 \u0645\u062a\u0627\u062d"]}),e.model.phone?Object(T.jsxs)("li",{children:[" ",Object(T.jsx)("strong",{children:"\u0647\u0627\u062a\u0641:"})," ",e.model.phone," "]}):"",e.model.dateValue?Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e: "}),e.model.dateValue?Object(x.default)(new Date(e.model.dateValue),"dd-MM-yyyy"):""]}):"",e.model.fromDateValue&&e.model.toDateValue?Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e: "}),Object(x.default)(new Date(e.model.fromDateValue),"dd-MM-yyyy")+" - "+Object(x.default)(new Date(e.model.toDateValue),"dd-MM-yyyy")]}):"",!e.model.fromDateValue||e.model.toDateValue||e.model.dateValue?"":Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e: "}),"\u0645\u0646 "+Object(x.default)(new Date(e.model.fromDateValue),"dd-MM-yyyy")+" \u0644\u062a\u0642\u062f\u064a\u0645"]}),!e.model.toDateValue||e.model.fromDateValue||e.model.dateValue?"":Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e: "}),"\u064a\u0635\u0644 \u0625\u0644\u0649 "+Object(x.default)(new Date(e.model.toDateValue),"dd-MM-yyyy")]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(T.jsx)("thead",{style:{fontSize:"3mm"},children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"15%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e"}),Object(T.jsx)("li",{children:"Date"})]})}),Object(T.jsx)("th",{className:"per3 text-center",colSpan:2,style:{padding:"0px",width:"30%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u062f\u064e\u064a\u0646"}),Object(T.jsx)("li",{children:"Debit"})]})}),Object(T.jsx)("th",{className:"per68 text-center",colSpan:2,style:{padding:"0px",width:"30%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0627\u0626\u062a\u0645\u0627\u0646"}),Object(T.jsx)("li",{children:"Credit"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"10%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Type"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"15%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0628\u0637\u0627\u0642\u0629 \u062a\u0639\u0631\u064a\u0641"}),Object(T.jsx)("li",{children:"ID"})]})})]})}),Object(T.jsxs)("tbody",{style:{fontSize:"2.7mm"},children:[0===a&&e.model&&(e.model.debitBalanceBoughtDown>0||e.model.creditBalanceBoughtDown>0)?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right",color:"red"},children:Object(T.jsxs)("b",{children:[e.model.debitBalanceBoughtDown>0?"To balance b/d ":"",Object(T.jsx)(N.a,{value:e.model.debitBalanceBoughtDown>0?null===(n=e.model.debitBalanceBoughtDown)||void 0===n?void 0:n.toFixed(2):"",displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})]})}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right",color:"red"},children:Object(T.jsxs)("b",{children:[e.model.creditBalanceBoughtDown>0?"By balance b/d ":"",Object(T.jsx)(N.a,{value:e.model.creditBalanceBoughtDown>0?null===(c=e.model.creditBalanceBoughtDown)||void 0===c?void 0:c.toFixed(2):"",displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})]})}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{})]}):"",t.posts&&t.posts.filter((function(e){return e.date})).map((function(e,t){var a,s;return Object(T.jsxs)("tr",{style:{},children:[Object(T.jsx)("td",{style:{width:"15%",fontSize:"1.6mm",height:"10px"},children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{className:"text-start",style:{width:"25%",alignContent:"start",borderRightWidth:"0px",fontSize:"2mm"},children:e.debit_account}),Object(T.jsx)("td",{className:"text-end",style:{width:"5%",border:"solid 0px",fontSize:"2mm"},children:Object(T.jsx)(N.a,{value:null===(a=parseFloat(e.debit_amount))||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{style:{width:"25%",alignContent:"start",borderRightWidth:"0px",fontSize:"2mm"},children:e.credit_account}),Object(T.jsx)("td",{className:"text-end",style:{width:"5%",border:"solid 0px",fontSize:"2mm"},children:Object(T.jsx)(N.a,{value:null===(s=parseFloat(e.credit_amount))||void 0===s?void 0:s.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{style:{width:"10%",fontSize:"2mm"},children:e.reference_model}),Object(T.jsx)("td",{style:{width:"15%",fontSize:"1.6mm"},children:e.reference_code})]},t)}))]}),Object(T.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[e.model.pages.length===a+1&&e.model&&(e.model.debitBalance>0||e.model.creditBalance>0)?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right",color:"red"},children:Object(T.jsxs)("b",{children:[e.model.debitBalance>0?"To balance c/d ":"",Object(T.jsx)(N.a,{value:e.model.debitBalance>0?null===(r=e.model.debitBalance)||void 0===r?void 0:r.toFixed(2):"",displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})]})}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right",color:"red"},children:Object(T.jsxs)("b",{children:[e.model.creditBalance>0?"By balance c/d ":"",Object(T.jsx)(N.a,{value:e.model.creditBalance>0?null===(i=e.model.creditBalance)||void 0===i?void 0:i.toFixed(2):"",displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})]})}),Object(T.jsx)("td",{colSpan:2})]}):"",e.model.pages.length===a+1&&e.model?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right"},children:Object(T.jsx)("b",{children:Object(T.jsx)(N.a,{value:e.model.creditTotal>e.model.debitTotal?null===(o=e.model.creditTotal)||void 0===o?void 0:o.toFixed(2):null===(l=e.model.debitTotal)||void 0===l?void 0:l.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{colSpan:2,style:{textAlign:"right"},children:Object(T.jsx)("b",{children:Object(T.jsx)(N.a,{value:e.model.creditTotal>e.model.debitTotal?null===(d=e.model.creditTotal)||void 0===d?void 0:d.toFixed(2):null===(j=e.model.debitTotal)||void 0===j?void 0:j.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{colSpan:2})]}):"",e.model.pages.length===a+1?Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"Balance In Words \u0627\u0644\u062a\u0648\u0627\u0632\u0646 \u0641\u064a \u0627\u0644\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("th",{colSpan:"6",style:{padding:"2px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:[Object(T.jsx)("li",{children:k()(e.model.balance,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(T.jsx)("li",{children:k()(e.model.balance,{lang:"en"})+" saudi riyals"})]})})]}):""]})]}),e.model.pages.length===a+1?Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Account Manager \u0625\u062f\u0627\u0631\u0629 \u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:"}),Object(T.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.userName?e.userName:""]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{style:{width:"30%",height:"60px"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[Object(x.default)(new Date,"MMM dd yyyy h:mma"),"  "," / "+(u=new Date,new Date(u).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))]})]})]})}):""]})})}),e.model.pages.length===a+1?Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start"}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]}):""]})}))})})),F=a(36),M=a(47),R=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(console.log("modelObj:",e),e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id);var t=15;r.pageSize=t;var s=r.posts.length,n=0,c=parseInt(s/t),o=c;parseFloat(s/t)-c>0&&o++,r.total_pages=o,r.pages=[];for(var l=0,d=0;d<o;d++){r.pages.push({top:n,posts:[],lastPage:!1,firstPage:!1});for(var j=l;j<s;j++){for(var h=0;h<r.posts[j].posts.length;h++)r.pages[d].posts.push({date:r.posts[j].posts[h].date,debit_account:"debit"===r.posts[j].posts[h].debit_or_credit?"To "+r.posts[j].posts[h].account_name+" A/c #"+r.posts[j].posts[h].account_number+" Dr.":"",debit_account_number:"debit"===r.posts[j].posts[h].debit_or_credit?r.posts[j].posts[h].account_number:"",credit_account:"credit"===r.posts[j].posts[h].debit_or_credit?"By "+r.posts[j].posts[h].account_name+" A/c #"+r.posts[j].posts[h].account_number+" Cr.":"",credit_account_number:"credit"===r.posts[j].posts[h].debit_or_credit?r.posts[j].posts[h].account_number:"",debit_or_credit:r.posts[j].posts[h].debit_or_credit,debit_amount:r.posts[j].posts[h].debit?r.posts[j].posts[0].debit:"",credit_amount:r.posts[j].posts[h].credit?r.posts[j].posts[0].credit:"",reference_code:r.posts[j].reference_code,reference_model:r.posts[j].reference_model});if(r.pages[d].posts.length===t)break}if(r.pages[d].posts.length<t)for(var x=r.pages[d].posts.length;x<t;x++)r.pages[d].posts.push({});n+=1057,l+=t,0===d&&(r.pages[d].firstPage=!0),d+1===o&&(r.pages[d].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.posts:",r.posts),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2);g[0],g[1];var v=Object(s.useRef)();var y=Object(F.useReactToPrint)({content:function(){return v.current},documentTitle:function(){var e="";return r.name&&(e+=r.name+"_acc_#"+r.number),e=e.split(" ").join("_"),r.dateValue?e+="_Date_"+Object(x.default)(new Date(r.dateValue),"MMM_dd_yyyy"):r.fromDateValue&&r.toDateValue?e+="_Date_"+Object(x.default)(new Date(r.fromDateValue),"MMM_dd_yyyy")+"_to_"+Object(x.default)(new Date(r.toDateValue),"MMM dd yyyy"):!r.fromDateValue||r.toDateValue||r.dateValue?!r.toDateValue||r.fromDateValue||r.dateValue||(e+="_Date_upto_"+Object(x.default)(new Date(r.toDateValue),"MMM_dd_yyyy")):e+="_Date_from_"+Object(x.default)(new Date(r.fromDateValue),"MMM_dd_yyyy")+"_to_present",e+=".pdf"}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",fullscreen:!0,onHide:m,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Balance sheet preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:y,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:v,children:Object(T.jsx)(D,{model:r,userName:a.get("user_name")?a.get("user_name"):""})})}),Object(T.jsx)(f.a.Footer,{})]})})})),P=R,A=Object(s.forwardRef)((function(e,t){var a,n,c=new h.a,r=Object(s.useState)(null),i=Object(o.a)(r,2),l=i[0],d=i[1],j=Object(s.useState)(!1),m=Object(o.a)(j,2),v=m[0],N=m[1];function C(){v=!1,N(!1)}Object(s.useImperativeHandle)(t,(function(){return{open:function(e){v=!0,N(!0),d(l=e),ha()}}}));var w=Object(s.useState)(!1),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(new Date),M=Object(o.a)(F,2),R=M[0],A=M[1],L=Object(s.useState)(new Date),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(new Date),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(""),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],te=$[1],ae=Object(s.useState)([]),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(5),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(1),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(null),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)(),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)(0),ye=Object(o.a)(ve,2),Ne=ye[0],Ce=ye[1],we=Object(s.useState)(0),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)(!1),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1],Object(s.useState)("")),Re=Object(o.a)(Me,2),Pe=(Re[0],Re[1]),Ae=Object(s.useState)(""),Le=Object(o.a)(Ae,2),Ie=(Le[0],Le[1]),Ee=Object(s.useState)(""),ze=Object(o.a)(Ee,2),Ue=(ze[0],ze[1]),Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)(!1),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)([]),Xe=Object(o.a)(Ke,2),Ye=(Xe[0],Xe[1],Object(s.useState)([])),Je=Object(o.a)(Ye,2),$e=(Je[0],Je[1]),et=Object(s.useState)([]),tt=Object(o.a)(et,2),at=(tt[0],tt[1],Object(s.useState)([])),st=Object(o.a)(at,2),nt=(st[0],st[1]);Object(s.useEffect)((function(){ha()}),[]),Object(s.useEffect)((function(){xe&&(ut(jt="posts.date"),xt(pt=""),be(ue=xe),ha())}),[xe]);var ct=Object(s.useState)({}),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1],lt=Object(s.useState)("posts.date"),dt=Object(o.a)(lt,2),jt=dt[0],ut=dt[1],bt=Object(s.useState)("-"),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1];function mt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function Ot(e,t){it[e]=t,be(ue=1),ha()}function ft(e,t){if(!t)return ue=1,it[e]="",be(ue),void ha();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(Q(t),Y(""),te(""),it.from_date="",it.to_date="",it[e]=t):"from_date"===e?(Y(t),Q(""),it.date="",it[e]=t):"to_date"===e?(te(t),Q(""),it.date="",it[e]=t):"created_at"===e&&(Pe(t),Ie(""),Ue(""),it.created_at_from="",it.created_at_to="",it[e]=t),"created_at_from"===e?(Ie(t),Pe(""),it.created_at="",it[e]=t):"created_at_to"===e&&(Ue(t),Pe(""),it.created_at="",it[e]=t),be(ue=1),ha()}var _t=Object(s.useState)([]),gt=Object(o.a)(_t,2),vt=(gt[0],gt[1]),yt=Object(s.useState)([]),Nt=Object(o.a)(yt,2),Ct=Nt[0],wt=Nt[1],St=Object(s.useState)([]),kt=Object(o.a)(St,2),Tt=kt[0],Dt=kt[1];function Ft(e,t){"created_by"===e?$e(t):"category_id"===e?nt(t):"account_id"===e?vt(t):"debit_account_id"===e?wt(t):"credit_account_id"===e&&Dt(t),it[e]=Object.values(t).map((function(e){return e.id})).join(","),be(ue=1),ha()}var Mt=Object(s.useState)(0),Rt=Object(o.a)(Mt,2),Pt=(Rt[0],Rt[1],Object(s.useState)(0)),At=Object(o.a)(Pt,2),Lt=At[0],It=At[1],Et=Object(s.useState)(0),zt=Object(o.a)(Et,2),Ut=zt[0],Bt=zt[1],qt=Object(s.useState)(0),Vt=Object(o.a)(qt,2),Ht=Vt[0],Gt=Vt[1],Wt=Object(s.useState)(0),Qt=Object(o.a)(Wt,2),Zt=Qt[0],Kt=Qt[1],Xt=Object(s.useState)(0),Yt=Object(o.a)(Xt,2),Jt=Yt[0],$t=Yt[1],ea=Object(s.useState)(0),ta=Object(o.a)(ea,2),aa=ta[0],sa=ta[1],na=Object(s.useState)([]),ca=Object(o.a)(na,2),ra=ca[0],ia=ca[1],oa=Object(s.useState)(!1),la=Object(o.a)(oa,2),da=la[0],ja=la[1];function ua(){return ba.apply(this,arguments)}function ba(){return ba=Object(b.a)(u.a.mark((function e(){var t,a,s,n,r,i,o,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"GET",headers:{"Content-Type":"application/json",Authorization:c.get("access_token")}},a="select=id,date,store_id,account_id,account_name,account_number,reference_id,reference_model,reference_code,posts,debit_total_credit_total,created_at",c.get("store_id")&&(it.store_id=c.get("store_id")),l&&(it.account_id=l.id),s=new Date,n=s.getTimezoneOffset(),console.log("Timezone:",parseFloat(n/60)),it.timezone_offset=parseFloat(n/60),it.stats="1",ot(it),""!==(r=mt(it))&&(r="&"+r),i=1e3,o=[],d=1;case 15:return da=!0,ja(!0),e.next=20,fetch("/v1/posting?"+a+r+"&sort="+pt+jt+"&page="+d+"&limit="+i,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(n.result&&0!==n.result.length){e.next=12;break}return e.abrupt("return",[]);case 12:return e.abrupt("return",n.result);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 20:if(0!==(j=e.sent).length){e.next=23;break}return e.abrupt("break",27);case 23:o=o.concat(j),d++;case 25:e.next=15;break;case 27:ia(ra=o),console.log("allPostings:",ra),da=!1,ja(!1);case 32:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function ha(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:c.get("access_token")}};c.get("store_id")&&(it.store_id=c.get("store_id")),l&&(it.account_id=l.id);var t=(new Date).getTimezoneOffset();it.timezone_offset=parseFloat(t/60),it.stats="1",ot(it);var a=mt(it);""!==a&&(a="&"+a),He(!0),fetch("/v1/posting?select=id,date,store_id,account_id,account_name,account_number,reference_id,reference_model,reference_code,posts,debit_total_credit_total,created_at"+a+"&sort="+pt+jt+"&page="+ue+"&limit="+oe,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:He(!1),Ze(!1),ce(n.result),l.posts=n.result,r=parseInt((n.total_count+oe-1)/oe),me(r),ge(n.total_count),Te((ue-1)*oe),Ce(n.result.length),Lt=n.meta.debit_total,It(Lt),Ut=n.meta.credit_total,Bt(Ut),n.meta.debit_balance?(Ht=n.meta.debit_balance,Gt(Ht)):(Ht=0,Gt(0)),n.meta.debit_balance_bought_down?(Jt=n.meta.debit_balance_bought_down,$t(Jt)):(Jt=0,$t(0)),n.meta.credit_balance_bought_down?(aa=n.meta.credit_balance_bought_down,sa(aa)):(aa=0,sa(0)),n.meta.credit_balance?(Zt=n.meta.credit_balance,Kt(Zt)):(Zt=0,Kt(0));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){He(!1),Ze(!1),console.log(e)}))}function pa(e){ut(jt=e),xt(pt="-"===pt?"":"-"),ha()}function xa(e){ue=parseInt(e),be(ue),ha()}var ma=Object(s.useState)([]),Oa=Object(o.a)(ma,2),fa=Oa[0],_a=Oa[1];function ga(e){return va.apply(this,arguments)}function va(){return(va=Object(b.a)(u.a.mark((function e(t){var a,s,n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestAccounts"),a={search:t},c.get("store_id")&&(a.store_id=c.get("store_id")),""!==(s=mt(a))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:c.get("access_token")}},"select=id,name,phone,number,search_label,open,balance,debit_total,credit_total",e.next=9,fetch("/v1/account?".concat("select=id,name,phone,number,search_label,open,balance,debit_total,credit_total").concat(s),n);case 9:return r=e.sent,e.next=12,r.json();case 12:i=e.sent,_a(i.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ya=Object(s.useRef)();function Na(){return(Na=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Opening account: ",t),e.next=3,ua();case 3:t.posts=ra,t.debitBalance=Ht,t.creditBalance=Zt,t.debitBalanceBoughtDown=Jt,t.creditBalanceBoughtDown=aa,t.creditTotal=Ut,t.debitTotal=Lt,console.log(" account.posts",t.posts),console.log("opening"),t.dateRangeStr="",t.dateValue=W,t.fromDateValue=X,t.toDateValue=ee,ya.current.open(t);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(P,{ref:ya}),Object(T.jsxs)(f.a,{show:v,size:"xl",onHide:C,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Balance sheet of ",(null===(a=l)||void 0===a?void 0:a.name)+" A/c (#"+(null===(n=l)||void 0===n?void 0:n.number)+")"," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:["\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){!function(e){Na.apply(this,arguments)}(l)},children:[Object(T.jsx)("i",{className:"bi bi-display"}),da?"Preparing..":" Print Preview"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:C,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===_e&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No postings to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bexpense:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Ze(!0),ha()},variant:"primary",disabled:Qe,children:[Qe?Object(T.jsx)(g.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ve&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:_e>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:oe,onChange:function(e){var t;t=e.target.value,oe=parseInt(t),le(oe),ha()},className:"form-control pull-right",style:{bexpense:"solid 1px",bexpenseColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bexpense:"solid 0px"},children:xe?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){xa(e.selected+1)},pageRangeDisplayed:5,pageCount:xe,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ue-1}):""})}),Object(T.jsx)("div",{className:"row",children:_e>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ke+1,"-",ke+Ne," of"," ",_e]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ue," of ",xe]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){pa("posts.date")},children:["Date","posts.date"===jt&&"-"===pt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"posts.date"===jt&&""===pt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){pa("posts.debit")},children:["Debit","posts.debit"===jt&&"-"===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"posts.debit"===jt&&""===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){pa("posts.credit")},children:["Credit","posts.credit"===jt&&"-"===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"posts.credit"===jt&&""===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){pa("reference_model")},children:["Type","reference_model"===jt&&"-"===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"reference_model"===jt&&""===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){pa("reference_code")},children:["ID","reference_code"===jt&&"-"===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"reference_code"===jt&&""===pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsxs)("th",{style:{width:"80px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:W,selected:R,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Q(""),void ft("date_str","");ft("date_str",e),R=e,A(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return D(!k)},children:k?"Less..":"More.."}),Object(T.jsx)("br",{}),k?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:X,selected:E,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void ft("from_date","");ft("from_date",e),E=e,z(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:ee,selected:q,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return te(""),void ft("to_date","");ft("to_date",e),q=e,V(e)}})]}):null]}),Object(T.jsxs)("th",{style:{width:"130px"},children:[Object(T.jsx)(p.a,{id:"account_id",labelKey:"search_label",onChange:function(e){Ft("debit_account_id",e)},options:fa,placeholder:"Debit A/c name / acc no. / phone",selected:Ct,highlightOnlyResult:!0,onInputChange:function(e,t){ga(e)},multiple:!0}),Object(T.jsx)("br",{}),Object(T.jsx)("input",{type:"text",id:"debit",placeholder:"Debit amount",onChange:function(e){return Ot("debit",e.target.value)},className:"form-control"})]}),Object(T.jsxs)("th",{style:{width:"130px"},children:[Object(T.jsx)(p.a,{id:"account_id",labelKey:"search_label",onChange:function(e){Ft("credit_account_id",e)},options:fa,placeholder:"Credit A/c name / acc no. / phone",selected:Tt,highlightOnlyResult:!0,onInputChange:function(e,t){ga(e)},multiple:!0}),Object(T.jsx)("br",{}),Object(T.jsx)("input",{type:"text",id:"credit",placeholder:"Credit amount",onChange:function(e){return Ot("credit",e.target.value)},className:"form-control"})]}),Object(T.jsx)("th",{style:{width:"80px"},children:Object(T.jsxs)("select",{className:"form-control",onChange:function(e){return Ot("reference_model",e.target.value)},children:[Object(T.jsx)("option",{value:"",children:"All"}),Object(T.jsx)("option",{value:"sales",children:"Sales"}),Object(T.jsx)("option",{value:"sales_return",children:"Sales Return"}),Object(T.jsx)("option",{value:"purchase",children:"Purchase"}),Object(T.jsx)("option",{value:"purchase_return",children:"Purchase Return"}),Object(T.jsx)("option",{value:"capital",children:"Capital"}),Object(T.jsx)("option",{value:"drawing",children:"Drawing"}),Object(T.jsx)("option",{value:"expense",children:"Expense"}),Object(T.jsx)("option",{value:"customer_deposit",children:"Customer deposit"}),Object(T.jsx)("option",{value:"customer_withdrawal",children:"Customer withdrawl"})]})}),Object(T.jsx)("th",{style:{width:"80px"},children:Object(T.jsx)("input",{type:"text",id:"reference_code",onChange:function(e){return Ot("reference_code",e.target.value)},className:"form-control"})})]})}),Object(T.jsxs)("tbody",{className:"text-center",children:[l&&(Jt>0||aa>0)?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{style:{textAlign:"right",color:"red"},children:Object(T.jsx)("b",{children:Jt>0?"To balance b/d "+Jt:""})}),Object(T.jsx)("td",{style:{textAlign:"right",color:"red"},children:Object(T.jsx)("b",{children:aa>0?"By balance b/d "+aa:""})}),Object(T.jsx)("td",{colSpan:2})]}):"",ne&&ne.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:3,children:e.posts&&e.posts.map((function(e,t){return Object(T.jsxs)("tr",{style:{border:"solid 1px"},children:[Object(T.jsx)("td",{style:{border:"solid 1px",minWidth:"184px"},children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{colSpan:2,style:{border:"solid 0px"},children:[Object(T.jsxs)("td",{style:{border:"solid 0px",borderRight:"solid 0px",paddingLeft:"5px"},children:[Object(T.jsx)("td",{style:{textAlign:"left",border:"solid 0px",minWidth:"162px"},children:"debit"==e.debit_or_credit?"To "+e.account_name+" A/c #"+e.account_number+" Dr.":""}),Object(T.jsx)("td",{style:{textAlign:"right",border:"solid 0px",minWidth:"140px"},children:e.debit?e.debit:""})]}),Object(T.jsxs)("td",{style:{border:"solid 0px",paddingLeft:"5px",borderLeft:"solid 1px"},children:[Object(T.jsx)("td",{style:{textAlign:"left",border:"solid 0px",minWidth:"193px"},children:"credit"==e.debit_or_credit?"By "+e.account_name+" A/c #"+e.account_number+"  Cr.":""}),Object(T.jsx)("td",{style:{textAlign:"right",border:"solid 0px",minWidth:"105px"},children:e.credit?e.credit:""})]})]})]},t)}))}),Object(T.jsx)("td",{style:{minWidth:"155px",maxWidth:"155px"},children:e.reference_model}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.reference_code})]},e.id)})),l&&(Ht>0||Zt>0)?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{style:{textAlign:"right",color:"red"},children:Object(T.jsx)("b",{children:Ht>0?"To balance c/d "+Ht:""})}),Object(T.jsx)("td",{style:{textAlign:"right",color:"red"},children:Object(T.jsx)("b",{children:Zt>0?"By balance c/d "+Zt:""})}),Object(T.jsx)("td",{colSpan:2})]}):"",l?Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{style:{textAlign:"right"},children:Object(T.jsx)("b",{children:Ut>Lt?Ut:Lt})}),Object(T.jsx)("td",{style:{textAlign:"right"},children:Object(T.jsx)("b",{children:Ut>Lt?Ut:Lt})}),Object(T.jsx)("td",{colSpan:2})]}):""]})]})}),xe?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){xa(e.selected+1)},pageRangeDisplayed:5,pageCount:xe,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ue-1}):""]})})})})]})})]})]})})),L=A,I=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:10+t.top+"px",height:"1110px",width:"770px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"70",height:"70",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"QUOTATION / \u0627\u0642\u062a\u0628\u0627\u0633"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Quotation: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Quotation Date: "})," ",e.model.date?Object(x.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATETIME>"," "]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"N/A"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"N/A"]})]})}),Object(T.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:e.model.QRImageData?Object(T.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"70px",height:"72px"},alt:"Invoice QR Code"}):""}),Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0627\u0642\u062a\u0628\u0627\u0633 "})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0642\u062a\u0628\u0627\u0633:  "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(T.jsx)("thead",{style:{fontSize:"3mm"},children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(T.jsx)("li",{children:"Part Number"})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"20%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(T.jsx)("li",{children:"Unit Price"})]})}),Object(T.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(T.jsx)("li",{children:"Total Amount"})]})})]})}),Object(T.jsx)("tbody",{style:{fontSize:"2.7mm"},children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{style:{padding:"1px",height:"16px"},children:t.part_number?s+1+a*e.model.pageSize:""}),Object(T.jsx)("td",{style:{padding:"1px"},children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.quantity?t.quantity.toFixed(2):"","  ",t.unit?t.unit:""]}),Object(T.jsx)("td",{className:"text-end",style:{padding:"1px"},children:t.unit_price?Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}}):""}),Object(T.jsx)("td",{style:{padding:"1px"},className:"text-end",children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(T.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",style:{padding:"2px"}}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Total \u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Shipping / Handling Fees   \u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Discount \u062e\u0635\u0645:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"2px"},children:"VAT \u0636\u0631\u064a\u0628\u0629:"}),Object(T.jsxs)("th",{className:"text-end",colSpan:"1",style:{padding:"2px"},children:[e.model.vat_percent.toFixed(2),"%"]}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"2px"},children:"Net Total \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "})})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"In Words"}),Object(T.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"})})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"\u0635\u0644\u0627\u062d\u064a\u0629:"}),e.model.validity_days?Object(T.jsx)("th",{colSpan:"1",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{style:{color:"red"},children:e.model.validity_days+" \u0623\u064a\u0627\u0645"})})}):"",Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"\u062a\u0648\u0635\u064a\u0644:"}),e.model.delivery_days?Object(T.jsx)("th",{colSpan:"3",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{children:"\u062e\u0644\u0627\u0644 "+e.model.delivery_days+" \u0623\u064a\u0627\u0645 \u0645\u0646 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639"})})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"Validity"}),e.model.validity_days?Object(T.jsx)("th",{colSpan:"1",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{style:{color:"red"},children:e.model.validity_days+" days"})})}):"",Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"Delivery"}),e.model.delivery_days?Object(T.jsx)("th",{colSpan:"3",style:{padding:"2px"},children:Object(T.jsx)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:Object(T.jsx)("li",{children:"Within "+e.model.delivery_days+" days from the date of payment"})})}):""]}),e.model.pages.length===a+1?Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:"6",style:{padding:"0px"},children:Object(T.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(T.jsxs)("thead",{style:{fontSize:"3mm"},children:[Object(T.jsx)("tr",{children:Object(T.jsx)("th",{colSpan:"5",className:"per1 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0628\u0646\u0643\u064a"}),Object(T.jsx)("li",{children:"Bank Account details"})]})})}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643"}),Object(T.jsx)("li",{children:"Bank Name"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u064a\u0644"}),Object(T.jsx)("li",{children:"Customer No."})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",maxWidth:"100px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0635\u0631\u0641\u064a \u0627\u0644\u062f\u0648\u0644\u064a"}),Object(T.jsx)("li",{children:"IBAN"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"10%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"33px"},children:[Object(T.jsx)("li",{children:"\u0625\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628"}),Object(T.jsx)("li",{children:"Account name"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u062d\u0633\u0627\u0628"}),Object(T.jsx)("li",{children:"Account No."})]})})]})]}),Object(T.jsx)("tbody",{style:{fontSize:"3mm"},children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{style:{width:"5%"},children:"NATIONAL COMMERCIAL BANK(NCB)"}),Object(T.jsx)("td",{style:{width:"5%"},children:"57560905"}),Object(T.jsx)("td",{style:{maxWidth:"100px"},children:"SA751000001 4600000922202"}),Object(T.jsx)("td",{style:{width:"10%"},children:"GULF UNION OZONE CO."}),Object(T.jsx)("td",{style:{width:"5%"},children:"14600000922202"})]})})]})})}):""]})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Delivered By \u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(T.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Received By \u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("th",{style:{width:"30%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{style:{width:"30%",height:"30px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[e.model.signature_date_str?e.model.signature_date_str:"","  ",e.model.signature_date_str?n(e.model.signature_date_str):""]}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("th",{})]})]})})]})})}),e.model.pages.length===a+1?Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start"}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]}):""]})}))})})),E=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=17;var t=r.products.length,s=0,n=parseInt(t/17),c=n;parseFloat(t/17)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),17!==r.pages[l].products.length);d++);s+=1057,o+=17,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="Quotation #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",fullscreen:!0,onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Quotation Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(I,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),z=E,U=a(289),B=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Store #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Name(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.name_in_arabic]}),Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Title:"}),Object(T.jsxs)("td",{children:[" ",c.title]}),Object(T.jsx)("th",{children:"Title(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.title_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Registration Number(C.R NO.):"}),Object(T.jsxs)("td",{children:[" ",c.registration_number]}),Object(T.jsx)("th",{children:"Registration Number(C.R NO.)(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.registration_number_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Address:"}),Object(T.jsxs)("td",{children:[" ",c.address]}),Object(T.jsx)("th",{children:"Address in Arabic:"}),Object(T.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ZIP/PIN Code:"}),Object(T.jsxs)("td",{children:[" ",c.zipcode]}),Object(T.jsx)("th",{children:"ZIP/PIN Code in Arabic:"}),Object(T.jsxs)("td",{children:[" ",c.zipcode_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Phone:"}),Object(T.jsxs)("td",{children:[" ",c.phone]}),Object(T.jsx)("th",{children:"Phone in Arabic:"}),Object(T.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"VAT No:"}),Object(T.jsxs)("td",{children:[" ",c.vat_no]}),Object(T.jsx)("th",{children:"VAT No(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"E-mail:"}),Object(T.jsxs)("td",{children:[" ",c.email]}),Object(T.jsx)("th",{children:"VAT %:"}),Object(T.jsxs)("td",{children:[" ",c.vat_percent+"%"]})]})]})}),Object(T.jsxs)("div",{children:["Logo:",Object(T.jsx)("img",{alt:"Logo",src:"https://startpos-api-test.startuptech.uk"+c.logo+"?"+Date.now(),style:{width:100,height:100}},c.logo)]}),c.national_address&&Object(T.jsxs)("span",{children:[Object(T.jsx)("h2",{children:" National Address"}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Application Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.application_no]}),Object(T.jsx)("th",{children:"Application Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.application_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Service Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.service_no]}),Object(T.jsx)("th",{children:"Service Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.service_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Customer Account Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.customer_account_no]}),Object(T.jsx)("th",{children:"Customer Account Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.customer_account_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Building Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.building_no]}),Object(T.jsx)("th",{children:"Building Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.building_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Street Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.street_name]}),Object(T.jsx)("th",{children:"Street Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.street_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"District Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.district_name]}),Object(T.jsx)("th",{children:"District Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.district_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"City Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.city_name]}),Object(T.jsx)("th",{children:"City Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.city_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ZipCode: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.zipcode]}),Object(T.jsx)("th",{children:"ZipCode(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.zipcode_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Additional Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.additional_no]}),Object(T.jsx)("th",{children:"Additional Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.additional_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Unit Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.unit_no]}),Object(T.jsx)("th",{children:"Unit Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.unit_no_arabic]})]})]})})]})]})]})})})),q=B,V=a(48),H=a.n(V),G=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){I(L=[]),v={national_address:{}},y({national_address:{}}),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(r({}),console.log("Response:"),console.log(n),(i=n.result).logo="",o=n.result.use_products_from_store_id,l=n.result.use_products_from_store_names,L=[],o&&l)for(d=0;d<o.length;d++)L.push({id:o[d],name:l[d]});I(L),y(Object(C.a)({},i));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),k(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],x=new h.a,m=Object(s.useState)({national_address:{}}),O=Object(o.a)(m,2),v=O[0],y=O[1],N=Object(s.useState)(!1),w=Object(o.a)(N,2),S=w[0],k=w[1];function D(){k(!1)}function F(t){t.preventDefault(),console.log("Inside handle Create"),v.use_products_from_store_id=[];for(var a=0;a<L.length;a++)v.use_products_from_store_id.push(L[a].id);v.vat_percent?v.vat_percent=parseFloat(v.vat_percent):v.vat_percent=null,v.phone&&(v.phone_in_arabic=R(v.phone.toString())),v.vat_no&&(v.vat_no_in_arabic=R(v.vat_no.toString())),v.zipcode&&(v.zipcode_in_arabic=R(v.zipcode.toString())),v.registration_number&&(v.registration_number_in_arabic=R(v.registration_number.toString())),v.national_address.application_no&&(v.national_address.application_no_arabic=R(v.national_address.application_no.toString())),v.national_address.service_no&&(v.national_address.service_no_arabic=R(v.national_address.service_no.toString())),v.national_address.customer_account_no&&(v.national_address.customer_account_no_arabic=R(v.national_address.customer_account_no.toString())),v.national_address.building_no&&(v.national_address.building_no_arabic=R(v.national_address.building_no.toString())),v.national_address.zipcode&&(v.national_address.zipcode_arabic=R(v.national_address.zipcode.toString())),v.national_address.additional_no&&(v.national_address.additional_no_arabic=R(v.national_address.additional_no.toString())),v.national_address.unit_no&&(v.national_address.unit_no_arabic=R(v.national_address.unit_no.toString())),console.log("formData.logo:",v.logo);var s="/v1/store",n="POST";v.id&&(s="/v1/store/"+v.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:x.get("access_token")},body:JSON.stringify(v)};console.log("formData:",v),j(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Store Created Successfully!","success"),e.refreshList&&e.refreshList(),x.get("store_id")&&x.get("store_id")===c.result.id&&x.set("vat_percent",c.result.vat_percent,{path:"/",expires:new Date(Date.now()+31536e6)}),D(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Store!","danger")}))}Object(s.useEffect)((function(){x.get("access_token")||(window.location="/")}));var M="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function R(e){return e.replace(/\d/g,(function(e){return M[parseInt(e)]}))}var P=Object(s.useState)([]),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)([]),z=Object(o.a)(E,2),U=z[0],B=z[1];function q(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function V(){return(V=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=q({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:x.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,v.id&&(c.result=c.result.filter((function(e){return e.id!=v.id}))),B(c.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:S,size:"lg",onHide:D,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:v.id?"Update Store #"+v.name:"Create New Store"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[v.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){D(),e.openDetailsView(v.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:F,children:[d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",v.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:D,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:F,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.name?v.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),v.name=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),v.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name In Arabic*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.name_in_arabic?v.name_in_arabic:"",type:"string",onChange:function(e){c.v="",r(Object(C.a)({},c)),v.name_in_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),v.name_in_arabic&&!c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Code*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.code?v.code:"",type:"string",onChange:function(e){c.code="",r(Object(C.a)({},c)),v.code=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"code",placeholder:"Code"}),c.code&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.code]}),v.code&&!c.code&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Title(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.title?v.title:"",type:"string",onChange:function(e){c.title="",r(Object(C.a)({},c)),v.title=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"title",placeholder:"Title"}),c.title&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title]}),v.title&&!c.title&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Title In Arabic(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.title_in_arabic?v.title_in_arabic:"",type:"string",onChange:function(e){c.title_in_arabic="",r(Object(C.a)({},c)),v.title_in_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"title_in_arabic",placeholder:"Title In Arabic"}),c.title_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title_in_arabic]}),v.title_in_arabic&&!c.title_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:v.address,type:"string",onChange:function(e){c.address="",r(Object(C.a)({},c)),v.address=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),v.address&&!c.address&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address In Arabic*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:v.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(C.a)({},c)),v.address_in_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),v.address_in_arabic&&!c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Use products from other stores*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"use_products_from_store_id",labelKey:"name",isInvalid:!!c.use_products_from_store_id,onChange:function(e){c.use_products_from_store_id="",r(c),0!==e.length?I(e):I([])},options:U,placeholder:"Select Stores",selected:L,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){V.apply(this,arguments)}(e)},multiple:!0}),c.use_products_from_store_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.use_products_from_store_id]}),v.use_products_from_store_id&&!c.use_products_from_store_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Registration Number(C.R NO.)*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.registration_number?v.registration_number:"",type:"number",onChange:function(e){c.registration_number="",r(Object(C.a)({},c)),v.registration_number=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"registration_number",placeholder:"Registration Number(C.R NO.)"}),c.registration_number&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.registration_number]}),v.registration_number&&!c.registration_number&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Zipcode*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.zipcode?v.zipcode:"",type:"number",onChange:function(e){c.zipcode="",r(Object(C.a)({},c)),v.zipcode=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"zipcode",placeholder:"Zipcode"}),c.zipcode&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.zipcode]}),v.zipcode&&!c.zipcode&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Phone*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.phone?v.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(C.a)({},c)),v.phone=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),v.phone&&!c.phone&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"VAT NO.*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.vat_no?v.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(C.a)({},c)),v.vat_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),v.vat_no&&!c.vat_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"VAT %*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.vat_percent?v.vat_percent:"",type:"number",onChange:function(e){if(c.vat_percent="",r(Object(C.a)({},c)),isNaN(e.target.value))return c.vat_percent="Invalid Discount",void r(Object(C.a)({},c));v.vat_percent=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"vat_percent",placeholder:"Vat %"}),c.vat_percent&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_percent]}),v.vat_percent&&!c.vat_percent&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Email*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.email?v.email:"",type:"string",onChange:function(e){c.email="",v.email=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),v.email&&!c.email&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Logo*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.logo?v.logo:"",type:"file",onChange:function(e){if(c.logo_content="",r(Object(C.a)({},c)),!e.target.value)return c.logo_content="Invalid Logo File",void r(Object(C.a)({},c));v.logo=e.target.value;var t=document.querySelector("#logo").files[0],a=100,s=100,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){v.logo_content=e,y(Object(C.a)({},v)),console.log("formData.logo_content:",v.logo_content)}))},i.src=n},className:"form-control",id:"logo",placeholder:"Logo"}),c.logo_content&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.logo_content]}),v.logo_content&&!c.logo_content&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsx)("h2",{children:"National Address:"}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Application Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.application_no?v.national_address.application_no:"",type:"string",onChange:function(e){c.national_address_application_no="",v.national_address.application_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.application_no",placeholder:"Application Number"}),c.national_address_application_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_application_no]}),v.national_address&&v.national_address.application_no&&!c.national_address_application_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Service Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.service_no?v.national_address.service_no:"",type:"string",onChange:function(e){c.national_address_service_no="",v.national_address.service_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.service_no",placeholder:"Service Number"}),c.national_address_service_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_service_no]}),v.national_address&&v.national_address.service_no&&!c.national_address_service_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer Account Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.customer_account_no?v.national_address.customer_account_no:"",type:"string",onChange:function(e){c.national_address_customer_account_no="",v.national_address.customer_account_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.customer_account_no",placeholder:"Customer Account Number"}),c.national_address_customer_account_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_customer_account_no]}),v.national_address&&v.national_address.customer_account_no&&!c.national_address_customer_account_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Building Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.building_no?v.national_address.building_no:"",type:"string",onChange:function(e){c.national_address_building_no="",v.national_address.building_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.building_no",placeholder:"Building Number"}),c.national_address_building_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_building_no]}),v.national_address&&v.national_address.building_no&&!c.national_address_building_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Street Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.street_name?v.national_address.street_name:"",type:"string",onChange:function(e){c.national_address_street_name="",v.national_address.street_name=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.street_name",placeholder:"Street Name"}),c.national_address_street_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name]}),v.national_address&&v.national_address.street_name&&!c.national_address_street_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Street Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.street_name_arabic?v.national_address.street_name_arabic:"",type:"string",onChange:function(e){c.national_address_street_name_arabic="",v.national_address.street_name_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.street_name_arabic",placeholder:"Street Name(Arabic)"}),c.national_address_street_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name_arabic]}),v.national_address&&v.national_address.street_name_arabic&&!c.national_address_street_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"District Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.district_name?v.national_address.district_name:"",type:"string",onChange:function(e){c.national_address_district_name="",v.national_address.district_name=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.district_name",placeholder:"District Name"}),c.national_address_district_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name]}),v.national_address&&v.national_address.district_name&&!c.national_address_district_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"District Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.district_name_arabic?v.national_address.district_name_arabic:"",type:"string",onChange:function(e){c.national_address_district_name_arabic="",v.national_address.district_name_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.district_name_arabic",placeholder:"District Name(Arabic)"}),c.national_address_district_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name_arabic]}),v.national_address&&v.national_address.district_name_arabic&&!c.national_address_district_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"City Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.city_name?v.national_address.city_name:"",type:"string",onChange:function(e){c.national_address_city_name="",v.national_address.city_name=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.city_name",placeholder:"City Name"}),c.national_address_city_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name]}),v.national_address&&v.national_address.city_name&&!c.national_address_city_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"City Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.city_name_arabic?v.national_address.city_name_arabic:"",type:"string",onChange:function(e){c.national_address_city_name_arabic="",v.national_address.city_name_arabic=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.city_name_arabic",placeholder:"City Name(Arabic)"}),c.national_address_city_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name_arabic]}),v.national_address&&v.national_address.city_name_arabic&&!c.national_address_city_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Zipcode"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.zipcode?v.national_address.zipcode:"",type:"string",onChange:function(e){c.national_address_zipcode="",v.national_address.zipcode=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.zipcode",placeholder:"Zipcode"}),c.national_address_zipcode&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_zipcode]}),v.national_address&&v.national_address.zipcode&&!c.national_address_zipcode&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Additional Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.additional_no?v.national_address.additional_no:"",type:"string",onChange:function(e){c.national_address_additional_no="",v.national_address.additional_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.additional_no",placeholder:"Additional Number"}),c.national_address_additional_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_additional_no]}),v.national_address&&v.national_address.additional_no&&!c.national_address_additional_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Unit Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:v.national_address.unit_no?v.national_address.unit_no:"",type:"string",onChange:function(e){c.national_address_unit_no="",v.national_address.unit_no=e.target.value,y(Object(C.a)({},v)),console.log(v)},className:"form-control",id:"national_address.unit_no",placeholder:"Unit Number"}),c.national_address_unit_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_unit_no]}),v.national_address&&v.national_address.unit_no&&!c.national_address_unit_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:D,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:F,children:d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":v.id?"Update":"Create"})]})]})})]})})})),W=G,Q=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Customer #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Name(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Phone:"}),Object(T.jsxs)("td",{children:[" ",c.phone]}),Object(T.jsx)("th",{children:"Phone in Arabic:"}),Object(T.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Address:"}),Object(T.jsxs)("td",{children:[" ",c.address]}),Object(T.jsx)("th",{children:"Address in Arabic:"}),Object(T.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"VAT No:"}),Object(T.jsxs)("td",{children:[" ",c.vat_no]}),Object(T.jsx)("th",{children:"VAT No(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"E-mail:"}),Object(T.jsxs)("td",{children:[" ",c.email]})]})]})})})]})})})),Z=Q,K=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){O={},v(Object(C.a)({},O)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:p.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(i=n.result).logo="",v(Object(C.a)({},i));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),S(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customer.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],p=new h.a,x=Object(s.useState)({}),m=Object(o.a)(x,2),O=m[0],v=m[1],y=Object(s.useState)(!1),N=Object(o.a)(y,2),w=N[0],S=N[1];function k(){S(!1)}function D(t){t.preventDefault(),console.log("Inside handle Create"),O.vat_percent?O.vat_percent=parseFloat(O.vat_percent):O.vat_percent=null,O.phone_in_arabic=M(O.phone),O.vat_no_in_arabic=M(O.vat_no);var a="/v1/customer",s="POST";O.id&&(a="/v1/customer/"+O.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:p.get("access_token")},body:JSON.stringify(O)};console.log("formData:",O),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Customer Created Successfully!","success"),e.refreshList&&e.refreshList(),k(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Customer!","danger")}))}Object(s.useEffect)((function(){p.get("access_token")||(window.location="/")}));var F="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function M(e){return e?e.replace(/\d/g,(function(e){return F[parseInt(e)]})):""}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:w,size:"lg",onHide:k,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:O.id?"Update Customer #"+O.name:"Create New Customer"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[O.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openDetailsView(O.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:D,children:[d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",O.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:D,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name?O.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),O.name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),O.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name In Arabic (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name_in_arabic?O.name_in_arabic:"",type:"string",onChange:function(e){c.name_in_arabic="",r(Object(C.a)({},c)),O.name_in_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),O.name_in_arabic&&!c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Phone*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.phone?O.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(C.a)({},c)),O.phone=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),O.phone&&!c.phone&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:O.address,type:"string",onChange:function(e){c.address="",r(Object(C.a)({},c)),O.address=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),O.address&&!c.address&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address In Arabic(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:O.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(C.a)({},c)),O.address_in_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),O.address_in_arabic&&!c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"VAT NO.(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.vat_no?O.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(C.a)({},c)),O.vat_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),O.vat_no&&!c.vat_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Email (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.email?O.email:"",type:"string",onChange:function(e){c.email="",O.email=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),O.email&&!c.email&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:k,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:D,children:d?Object(T.jsx)(g.a,{as:"span",animation:"bcustomer",size:"sm",role:"status","aria-hidden":!0})+" Processing...":O.id?"Update":"Create"})]})]})})]})})})),X=K,Y=(a(96),a(70)),J=a.n(Y),$=(a(92),a(99)),ee=a.n($),te=a(309),ae=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:t.top+"px",height:"110px",width:"770px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"70",height:"70",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"TAX INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Invoice No.: "}),e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Invoice Date: "})," ",e.model.date?Object(x.default)(new Date(e.model.date),"yyyy-MM-dd h:mma"):"<DATETIME>"," "]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"N/A"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"N/A"]})]})}),Object(T.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:e.model.QRImageData?Object(T.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"70px",height:"72px"},alt:"Invoice QR Code"}):""}),Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 "})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:  "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(T.jsx)("thead",{style:{fontSize:"3mm"},children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(T.jsx)("li",{children:"Part No."})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"20%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(T.jsx)("li",{children:"Unit Price"})]})}),Object(T.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631"}),Object(T.jsx)("li",{children:"Price"})]})})]})}),Object(T.jsx)("tbody",{style:{fontSize:"2.7mm"},children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{style:{padding:"1px",height:"16px"},children:t.part_number?s+1+a*e.model.pageSize:""}),Object(T.jsx)("td",{style:{padding:"1px"},children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.quantity?t.quantity.toFixed(2):"","  ",t.unit?t.unit:""]}),Object(T.jsx)("td",{className:"text-end",style:{padding:"1px"},children:t.unit_price?Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}}):""}),Object(T.jsx)("td",{style:{padding:"1px"},className:"text-end",children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(T.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",style:{padding:"2px"}}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Total \u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Shipping / Handling Fees   \u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Discount \u062e\u0635\u0645:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"2px"},children:"VAT \u0636\u0631\u064a\u0628\u0629:"}),Object(T.jsxs)("th",{className:"text-end",colSpan:"1",style:{padding:"2px"},children:[e.model.vat_percent.toFixed(2),"%"]}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"2px"},children:"Net Total \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"In Words \u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:[Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Delivered By \u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(T.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Received By \u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("th",{style:{width:"30%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{style:{width:"30%",height:"30px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[e.model.signature_date_str?e.model.signature_date_str:"","  ",e.model.signature_date_str?n(e.model.signature_date_str):""]}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("th",{})]})]})})]})})}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start"}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),se=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:r.date,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=17,l.render();case 17:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);var t=20;r.pageSize=t;var s=r.products.length,n=0,c=parseInt(s/t),o=c;parseFloat(s/t)-c>0&&o++,r.total_pages=o,r.pages=[];for(var l=0,d=0;d<o;d++){r.pages.push({top:n,products:[],lastPage:!1,firstPage:!1});for(var j=l;j<s&&(r.pages[d].products.push(r.products[j]),r.pages[d].products.length!==t);j++);if(r.pages[d].products.length<t)for(var h=r.pages[d].products.length;h<t;h++)r.pages[d].products.push({});n+=1057,l+=t,0===d&&(r.pages[d].firstPage=!0),d+1===o&&(r.pages[d].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="Invoice #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="Sales_";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Invoice Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(ae,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),ne=se,ce=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(T.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"TAX INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsxs)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:[e.model.date?Object(x.default)(new Date(e.model.date),"yyyy-MM-dd"):"","\xa0\xa0\xa0\xa0",e.model.date?Object(x.default)(new Date(e.model.date),"h:mma"):""]}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"2.2mm"},children:t.part_number?t.part_number:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"2.4mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"2.4mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:530+t.top+"px",border:"solid 0px"},children:Object(T.jsxs)("tbody",{children:[Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:513+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:513+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:565+t.top+"px"},children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:580+t.top+"px"},children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:664+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""}),t.lastPage?Object(T.jsx)("div",{style:{position:"absolute",left:"600px",top:670+t.top+"px"},children:e.model.QRImageData&&Object(T.jsx)("img",{style:{width:"102px",height:"94px"},src:e.model.QRImageData,alt:"Invoice QR Code"})}):""]},a)}))})})),re=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.date),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1066,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="Sales Invoice #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="Sales_Invoice";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Invoice Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(ce,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),ie=re,oe=Object(s.forwardRef)((function(e,t){var a,n,c,r,i,l,d,j;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}};fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),O=n.result,g(Object(C.a)({},O));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},a="select=id,amount,store_name,order_code,order_id,created_by_name,created_at";v.get("store_id")&&(L.store_id=v.get("store_id"));L.order_id=e,I(L);var s=de(L);""!==s&&(s="&"+s);fetch("/v1/sales-cash-discount?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:q(n.result),G=n.meta.total_cash_discount,W(G);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},a="select=id,amount,method,store_name,order_code,order_id,created_by_name,created_at";v.get("store_id");L.order_id=e,I(L);var s=de(L);""!==s&&(s="&"+s);fetch("/v1/sales-payment?"+a+s+"&limit=100",t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:X(n.result),$=n.meta.total_cash_discount,ee($);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),ce(!0))}}}));var p=Object(s.useState)({}),m=Object(o.a)(p,2),O=m[0],g=m[1],v=new h.a,y=Object(s.useState)(0),w=Object(o.a)(y,2),S=(w[0],w[1],Object(s.useState)(0)),k=Object(o.a)(S,2),D=(k[0],k[1],Object(s.useState)(0)),F=Object(o.a)(D,2),M=(F[0],F[1],Object(s.useState)(0)),R=Object(o.a)(M,2),P=(R[0],R[1],Object(s.useState)({})),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)([]),z=Object(o.a)(E,2),B=z[0],q=z[1],V=Object(s.useState)(0),H=Object(o.a)(V,2),G=H[0],W=H[1];var Q=Object(s.useState)([]),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(0),J=Object(o.a)(Y,2),$=J[0],ee=J[1];var te=Object(s.useState)(!1),ae=Object(o.a)(te,2),se=ae[0],ce=ae[1];function re(){ce(!1)}var oe=Object(s.useRef)();var le=Object(s.useRef)();function de(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ne,{ref:oe}),Object(T.jsx)(ie,{ref:le}),Object(T.jsxs)(f.a,{show:se,size:"xl",onHide:re,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Sales Order #",O.code]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){re(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){le.current.open(O)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){oe.current.open(O)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," E-Invoice"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:re,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Unit Price"}),Object(T.jsx)("th",{children:"Price"}),Object(T.jsx)("th",{children:"Qty Returned"}),"true"===v.get("admin")?Object(T.jsx)("th",{children:"Purchase Unit Price"}):"","true"===v.get("admin")?Object(T.jsx)("th",{children:"Purchase Price"}):"","true"===v.get("admin")?Object(T.jsx)("th",{children:"Profit"}):"","true"===v.get("admin")?Object(T.jsx)("th",{children:"Loss"}):""]})}),Object(T.jsxs)("tbody",{children:[O.products&&O.products.map((function(e,t){var a,s,n,c;return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=e.unit_price)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsxs)("td",{children:[e.quantity_returned,"  ",e.unit?e.unit:""," "]}),"true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(s=e.purchase_unit_price)||void 0===s?void 0:s.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=e.profit)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=e.loss)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]},e.item_code)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",children:O.total?Object(T.jsx)(N.a,{value:O.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):"0.00 "}),Object(T.jsx)("td",{colSpan:"3"}),"true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=O.profit)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=O.loss)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(T.jsx)("td",{className:"text-end",children:O.shipping_handling_fees?Object(T.jsx)(N.a,{value:O.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):"0.00 "}),Object(T.jsx)("td",{colSpan:"3"}),Object(T.jsx)("td",{colSpan:"1",className:"text-end",children:"0.00"}),Object(T.jsx)("td",{colSpan:"1",className:"text-end",children:"0.00"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(T.jsx)("td",{className:"text-end",children:O.discount?Object(T.jsx)(N.a,{value:null===(c=O.discount)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):"0.00 "}),Object(T.jsx)("td",{colSpan:"3"}),"true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(O.discount-O.return_discount).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00"}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end"}),Object(T.jsxs)("th",{className:"text-end",children:["VAT ",O.vat_percent+"%"]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(r=O.vat_price)||void 0===r?void 0:r.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"3"}),"true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00 "}):"","true"===v.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00"}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(i=O.net_total)||void 0===i?void 0:i.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{colSpan:3,className:"text-end",children:"Cash discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(l=O.cash_discount)||void 0===l?void 0:l.toFixed(2),displayType:"text",suffix:"",thousandSeparator:!0,renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:"0.00"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"6"}),"true"===v.get("admin")?Object(T.jsx)("th",{colSpan:"3",className:"text-end",children:"Net Profit / Loss"}):"","true"===v.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(d=O.net_profit)||void 0===d?void 0:d.toFixed(2),displayType:"text",suffix:"",thousandSeparator:!0,renderText:function(e,t){return e}})}):"","true"===v.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(j=O.net_loss)||void 0===j?void 0:j.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}):""]})]})]})}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",O.store_name]}),Object(T.jsx)("th",{children:"Customer:"}),Object(T.jsxs)("td",{children:[" ",O.customer_name]}),Object(T.jsx)("th",{children:"Delivered by:"}),Object(T.jsxs)("td",{children:[" ",O.delivered_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date:"}),Object(T.jsx)("td",{children:O.date?Object(x.default)(new Date(O.date),"MMM dd yyyy h:mma"):"Not set"}),Object(T.jsx)("th",{children:"VAT %:"}),Object(T.jsxs)("td",{children:[" ",O.vat_percent,"%"]}),Object(T.jsx)("th",{children:"Discount :"}),Object(T.jsxs)("td",{children:[" ",O.discount," "]}),Object(T.jsx)("th",{children:"Discount %:"}),Object(T.jsxs)("td",{children:[" ",O.discount_percent]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Status:"}),Object(T.jsxs)("td",{children:[" ",O.status]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",O.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",O.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Payment Status:"}),Object(T.jsxs)("td",{children:[" ",O.payment_status]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",O.payment_method]}),Object(T.jsx)("th",{children:"Partial Payment Amount:"}),Object(T.jsxs)("td",{children:[" ",O.partial_payment_amount]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",O.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",O.updated_by_name]}),"true"===v.get("admin")?Object(T.jsx)("th",{children:"Profit:"}):"","true"===v.get("admin")?Object(T.jsxs)("td",{children:[" ",O.profit," "]}):"","true"===v.get("admin")?Object(T.jsx)("th",{children:"Loss:"}):"","true"===v.get("admin")?Object(T.jsxs)("td",{children:[" ",O.loss," "]}):""]}),Object(T.jsxs)("tr",{children:[B.length>0?Object(T.jsx)("th",{children:"Cash Discounts"}):"",B.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-center",children:B&&B.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):"",K.length>0?Object(T.jsx)("th",{children:"Payments"}):"",K.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment Method"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-center",children:K&&K.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})})]})]})]})})),le=oe,de=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],K=W[1],X=Object(s.useState)([]),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(5),ae=Object(o.a)(ee,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],de=Object(s.useState)(0),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(1),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)(0),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)(0),ye=Object(o.a)(ve,2),Ne=ye[0],Ce=ye[1],we=Object(s.useState)(!1),Se=Object(o.a)(we,2),ke=(Se[0],Se[1],Object(s.useState)("")),Te=Object(o.a)(ke,2),De=(Te[0],Te[1]),Fe=Object(s.useState)(""),Me=Object(o.a)(Fe,2),Re=(Me[0],Me[1]),Pe=Object(s.useState)(""),Ae=Object(o.a)(Pe,2),Le=(Ae[0],Ae[1]),Ie=Object(s.useState)(!1),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)({}),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)("created_at"),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){Qe[e]=t,oe(ie=1),ct()}function nt(e,t){if(!t)return Qe[e]="",oe(ie=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),K(""),Qe.from_date="",Qe.to_date="",Qe[e]=t):"from_date"===e?(H(t),U(""),Qe.date="",Qe[e]=t):"to_date"===e?(K(t),U(""),Qe.date="",Qe[e]=t):"created_at"===e&&(De(t),Re(""),Le(""),Qe.created_at_from="",Qe.created_at_to="",Qe[e]=t),"created_at_from"===e?(Re(t),De(""),Qe.created_at="",Qe[e]=t):"created_at_to"===e&&(Le(t),De(""),Qe.created_at="",Qe[e]=t),oe(ie=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Qe.store_id=i.get("store_id")),Qe.product_id=c.id,Ze(Qe);var t,a=(t=Qe,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();Qe.timezone_offset=parseFloat(s/60),Ue(!0),fetch("/v1/sales/history?"+a+"&sort="+tt+Ye+"&page="+ie+"&limit="+se,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Ue(!1),He(!1),$(n.result),r=parseInt((n.total_count+se-1)/se),be(r),me(n.total_count),Ce((ie-1)*se),ge(n.result.length),pt=n.meta.total_sales,xt(pt),ft=n.meta.total_profit,_t(ft),St=n.meta.total_loss,kt(St),yt=n.meta.total_vat,Nt(yt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ue(!1),He(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){ie=parseInt(e),oe(ie),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)(0),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(0),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1],Tt=Object(s.useRef)();var Dt=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(le,{ref:Tt}),Object(T.jsx)(Z,{ref:Dt}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Sales History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:St,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"",Object(T.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:yt.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===xe&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Sales History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){He(!0),ct()},variant:"primary",disabled:Ve,children:[Ve?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ze&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:xe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:se,onChange:function(e){var t;t=e.target.value,se=parseInt(t),ne(se),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:ue?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:ue,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""})}),Object(T.jsx)("div",{className:"row",children:xe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",Ne+1,"-",Ne+_e," of"," ",xe]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ie," of ",ue]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("order_code")},children:["Order ID","order_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("customer_name")},children:["Customer","customer_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("unit_price")},children:["Unit Price","unit_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("price")},children:["Price","price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vat_price")},children:["VAT","vat_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("net_price")},children:["Net Price","net_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("profit")},children:["Profit","profit"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"profit"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("loss")},children:["Loss","loss"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"loss"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return K(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return st("order_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return st("customer_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return st("unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"price",onChange:function(e){return st("price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return st("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return st("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"profit",onChange:function(e){return st("profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"loss",onChange:function(e){return st("loss",e.target.value)},className:"form-control"})}):""]})}),Object(T.jsx)("tbody",{className:"text-center",children:J&&J.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.order_id,Tt.current.open(t)},children:e.order_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,Dt.current.open(t)},children:e.customer_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(T.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(T.jsx)("td",{children:e.price.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.vat_price.toFixed(2)+"   ("+e.vat_percent.toFixed(2)+"%)"}),Object(T.jsx)("td",{children:e.net_price.toFixed(2)+" "}),"true"===i.get("admin")?Object(T.jsx)("td",{children:e.profit.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.loss.toFixed(2)+" "}):""]},e.id)}))})]})}),ue?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:ue,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""]})})})})]})})]})]})})),je=de,ue=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],K=W[1],X=Object(s.useState)([]),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(5),ae=Object(o.a)(ee,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],de=Object(s.useState)(0),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(1),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)(0),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)(0),ye=Object(o.a)(ve,2),Ne=ye[0],Ce=ye[1],we=Object(s.useState)(!1),Se=Object(o.a)(we,2),ke=(Se[0],Se[1],Object(s.useState)("")),Te=Object(o.a)(ke,2),De=(Te[0],Te[1]),Fe=Object(s.useState)(""),Me=Object(o.a)(Fe,2),Re=(Me[0],Me[1]),Pe=Object(s.useState)(""),Ae=Object(o.a)(Pe,2),Le=(Ae[0],Ae[1]),Ie=Object(s.useState)(!1),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)({}),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)("created_at"),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){Qe[e]=t,oe(ie=1),ct()}function nt(e,t){if(!t)return Qe[e]="",oe(ie=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),K(""),Qe.from_date="",Qe.to_date="",Qe[e]=t):"from_date"===e?(H(t),U(""),Qe.date="",Qe[e]=t):"to_date"===e?(K(t),U(""),Qe.date="",Qe[e]=t):"created_at"===e&&(De(t),Re(""),Le(""),Qe.created_at_from="",Qe.created_at_to="",Qe[e]=t),"created_at_from"===e?(Re(t),De(""),Qe.created_at="",Qe[e]=t):"created_at_to"===e&&(Le(t),De(""),Qe.created_at="",Qe[e]=t),oe(ie=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Qe.store_id=i.get("store_id")),Qe.product_id=c.id,Ze(Qe);var t,a=(t=Qe,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();Qe.timezone_offset=parseFloat(s/60),Ue(!0),fetch("/v1/sales-return/history?"+a+"&sort="+tt+Ye+"&page="+ie+"&limit="+se,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Ue(!1),He(!1),$(n.result),r=parseInt((n.total_count+se-1)/se),be(r),me(n.total_count),Ce((ie-1)*se),ge(n.result.length),pt=n.meta.total_sales_return,xt(pt),Ct=n.meta.total_profit,wt(Ct),Tt=n.meta.total_loss,Dt(Tt),ft=n.meta.total_vat_return,_t(ft);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ue(!1),He(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){ie=parseInt(e),oe(ie),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useRef)();var vt=Object(s.useRef)();var yt=Object(s.useState)(0),Nt=Object(o.a)(yt,2),Ct=Nt[0],wt=Nt[1],St=Object(s.useState)(0),kt=Object(o.a)(St,2),Tt=kt[0],Dt=kt[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(le,{ref:gt}),Object(T.jsx)(Z,{ref:vt}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Sales Return History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ct,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Tt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"",Object(T.jsxs)("h1",{className:"text-end",children:["VAT Returned: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===xe&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No SalesReturn History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){He(!0),ct()},variant:"primary",disabled:Ve,children:[Ve?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ze&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:xe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:se,onChange:function(e){var t;t=e.target.value,se=parseInt(t),ne(se),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:ue?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:ue,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""})}),Object(T.jsx)("div",{className:"row",children:xe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",Ne+1,"-",Ne+_e," of"," ",xe]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ie," of ",ue]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("order_code")},children:["Order ID","order_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("customer_name")},children:["Customer","customer_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("unit_price")},children:["Unit Price","unit_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("price")},children:["Price","price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vat_price")},children:["VAT","vat_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("net_price")},children:["Net Price","net_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("profit")},children:["Profit","profit"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"profit"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("loss")},children:["Loss","loss"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"loss"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return K(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return st("order_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return st("customer_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return st("unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"price",onChange:function(e){return st("price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return st("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return st("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"profit",onChange:function(e){return st("profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"loss",onChange:function(e){return st("loss",e.target.value)},className:"form-control"})}):""]})}),Object(T.jsx)("tbody",{className:"text-center",children:J&&J.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.order_id,gt.current.open(t)},children:e.order_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,vt.current.open(t)},children:e.customer_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(T.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(T.jsx)("td",{children:e.price.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.vat_price.toFixed(2)+"   ("+e.vat_percent.toFixed(2)+"%)"}),Object(T.jsx)("td",{children:e.net_price.toFixed(2)+" "}),"true"===i.get("admin")?Object(T.jsx)("td",{children:e.profit.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.loss.toFixed(2)+" "}):""]},e.id)}))})]})}),ue?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:ue,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""]})})})})]})})]})]})})),be=ue,he=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:t.top+"px",height:"1110px",width:"770px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"70",height:"70",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"3.5mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a"]})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"3mm"},children:"PURCHASE TAX INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3.5mm",border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Invoice No.: "}),e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Invoice Date: "}),e.model.date?Object(x.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATETIME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Vendor: "}),e.model.vendor?e.model.vendor.name:"<VENDOR_NAME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.vendor?e.model.vendor.vat_no:"<VENDOR_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:e.model.QRImageData?Object(T.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"70px",height:"72px"},alt:"Invoice QR Code"}):""}),Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0631\u0642\u0645 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0634\u0631\u0627\u0621"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:" :\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0626\u0639"}),e.model.vendor?e.model.vendor.name_in_arabic:"<VENDOR_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:" :\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621"}),e.model.vendor?e.model.vendor.vat_no_in_arabic:"<VENDOR_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3.5mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{borderRadius:"6px"},children:[Object(T.jsx)("thead",{style:{fontSize:"3mm"},children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(T.jsx)("li",{children:"Part No."})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"20%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(T.jsx)("li",{children:"Unit Price"})]})}),Object(T.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{height:"15px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631"}),Object(T.jsx)("li",{children:"Price"})]})})]})}),Object(T.jsx)("tbody",{style:{fontSize:"2.7mm"},children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{style:{padding:"1px",height:"16px"},children:s+1+a*e.model.pageSize}),Object(T.jsx)("td",{style:{padding:"1px"},children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{style:{padding:"1px"},children:[t.quantity?t.quantity.toFixed(2):"","  ",t.unit?t.unit:""]}),Object(T.jsx)("td",{className:"text-end",style:{padding:"1px"},children:t.purchase_unit_price?Object(T.jsx)(N.a,{value:t.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}}):""}),Object(T.jsx)("td",{style:{padding:"1px"},className:"text-end",children:Object(T.jsx)(N.a,{value:(t.purchase_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},s)}))}),Object(T.jsxs)("tfoot",{style:{fontSize:"3mm"},children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",style:{padding:"2px"}}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Total \u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Shipping / Handling Fees   \u0631\u0633\u0648\u0645 \u0627\u0644\u0634\u062d\u0646 / \u0627\u0644\u0645\u0646\u0627\u0648\u0644\u0629:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"2px"},children:"Discount \u062e\u0635\u0645:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"2px"},children:"VAT \u0636\u0631\u064a\u0628\u0629:"}),Object(T.jsxs)("th",{className:"text-end",colSpan:"1",style:{padding:"2px"},children:[e.model.vat_percent.toFixed(2),"%"]}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"2px"},children:"Net Total \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(T.jsx)("th",{className:"text-end",colSpan:"2",style:{padding:"2px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"2px"},children:"In Words \u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("th",{colSpan:"5",style:{padding:"2px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{marginBottom:"0px"},children:[Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Delivered By \u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(T.jsxs)("th",{style:{width:"30%",padding:"2px"},children:[" ",e.model.order_placed_by_user?e.model.order_placed_by_user.name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"20%",padding:"2px"},children:"Received By \u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("th",{style:{width:"30%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{style:{width:"30%",height:"30px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Signature \u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsxs)("th",{style:{padding:"2px"},className:"text-center",children:[e.model.signature_date_str?e.model.signature_date_str:"","  ",e.model.signature_date_str?n(e.model.signature_date_str):""]}),Object(T.jsx)("th",{className:"text-end",style:{padding:"2px"},children:"Date \u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("th",{})]})]})})]})})}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm",height:"55px"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start"}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),pe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.vendor_id&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.vendor=o,l=new M.Invoice({sellerName:r.vendor.name,vatRegistrationNumber:r.vendor.vat_no,invoiceTimestamp:r.date,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=17,l.render();case 17:r.QRImageData=e.sent,i(Object(C.a)({},r));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.vendor_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=16;var t=r.products.length,s=0,n=parseInt(t/16),c=n;parseFloat(t/16)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),16!==r.pages[l].products.length);d++);s+=1057,o+=16,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="Quotation #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Purchase Invoice Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(he,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),xe=pe,me=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(T.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"300px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"PURCHASE ORDER / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsxs)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:[e.model.date?Object(x.default)(new Date(e.model.date),"yyyy-MM-dd"):"","\xa0\xa0\xa0\xa0",e.model.date?Object(x.default)(new Date(e.model.date),"h:mma"):""]}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:t.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:(t.purchase_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(T.jsxs)("tbody",{children:[Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:533+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:533+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)+""}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.order_placed_by_user?e.model.order_placed_by_user.name:""})]},a)}))})})),Oe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="Quotation #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"PurchaseReturn Order Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(me,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),fe=Oe,_e=Object(s.forwardRef)((function(e,t){var a,n,c,r,i,l;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),p=n.result,m(Object(C.a)({},p));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},a="select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at";O.get("store_id")&&(B.store_id=O.get("store_id"));B.purchase_id=e,q(B);var s=k(B);""!==s&&(s="&"+s);fetch("/v1/purchase-cash-discount?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:W(n.result),K=n.meta.total_cash_discount,X(K);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},a="select=id,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at";O.get("store_id")&&(B.store_id=O.get("store_id"));B.purchase_id=e,q(B);var s=k(B);""!==s&&(s="&"+s);fetch("/v1/purchase-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:ee(n.result),se=n.meta.total_payment,ne(se);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),w(!0))}}}));var d=Object(s.useState)({}),j=Object(o.a)(d,2),p=j[0],m=j[1],O=new h.a,g=Object(s.useState)(!1),v=Object(o.a)(g,2),y=v[0],w=v[1];function S(){w(!1)}function k(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}var D=Object(s.useState)(0),F=Object(o.a)(D,2),M=(F[0],F[1],Object(s.useState)(0)),R=Object(o.a)(M,2),P=(R[0],R[1],Object(s.useState)(0)),A=Object(o.a)(P,2),L=(A[0],A[1],Object(s.useState)(0)),I=Object(o.a)(L,2),E=(I[0],I[1],Object(s.useState)({})),z=Object(o.a)(E,2),B=z[0],q=z[1],V=Object(s.useState)([]),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(0),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1];var Y=Object(s.useState)([]),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(0),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1];var ce=Object(s.useRef)();var re=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(xe,{ref:ce}),Object(T.jsx)(fe,{ref:re}),Object(T.jsxs)(f.a,{show:y,size:"xl",onHide:S,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Purchase #",p.code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){re.current.open(p)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){ce.current.open(p)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," E-Purchase Invoice"]}),"\xa0\xa0\xa0\xa0\xa0\xa0",e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){S(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){S(),e.openUpdateForm(p.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:S,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Purchase Unit Price"}),Object(T.jsx)("th",{children:"Purchase Price"}),Object(T.jsx)("th",{children:"Qty Returned"}),Object(T.jsx)("th",{children:"Wholesale Unit Price"}),Object(T.jsx)("th",{children:"Retail Unit Price"}),"true"===O.get("admin")?Object(T.jsx)("th",{children:"Wholesale Profit"}):"","true"===O.get("admin")?Object(T.jsx)("th",{children:"Retail Profit"}):"","true"===O.get("admin")?Object(T.jsx)("th",{children:"Wholesale Loss"}):"","true"===O.get("admin")?Object(T.jsx)("th",{children:"Retail Loss"}):""]})}),Object(T.jsxs)("tbody",{children:[p.products&&p.products.map((function(e,t){var a,s,n,c;return Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsxs)("td",{children:[e.quantity_returned,"  ",e.unit?e.unit:""]}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.wholesale_unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.retail_unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),"true"===O.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:null===(a=e.wholesale_profit)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:null===(s=e.retail_profit)||void 0===s?void 0:s.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:null===(n=e.wholesale_loss)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:null===(c=e.retail_loss)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),"true"===O.get("admin")?Object(T.jsx)("th",{colSpan:"3",className:"text-end",children:"Total Profit/Loss"}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=p.wholesale_profit)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=p.retail_profit)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=p.wholesale_loss)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(r=p.retail_loss)||void 0===r?void 0:r.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(T.jsx)("td",{className:"text-end",children:p.shipping_handling_fees?Object(T.jsx)(N.a,{value:p.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):"0.00 "}),Object(T.jsx)("td",{colSpan:"3"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{colSpan:"3",className:"text-end"}),"true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.discount-p.return_discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.discount-p.return_discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(T.jsx)("td",{className:"text-end",children:p.vat_percent+"%"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.vat_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{colSpan:"3",className:"text-end"}),"true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.net_total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),"true"===O.get("admin")?Object(T.jsx)("th",{colSpan:"3",className:"text-end",children:"Cash discount"}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.cash_discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.cash_discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"6"}),"true"===O.get("admin")?Object(T.jsx)("th",{colSpan:"3",className:"text-end",children:"Net Profit / Loss"}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(i=p.net_wholesale_profit)||void 0===i?void 0:i.toFixed(2),displayType:"text",suffix:"",thousandSeparator:!0,renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(l=p.net_retail_profit)||void 0===l?void 0:l.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.wholesale_loss,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===O.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:p.retail_loss,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]})]})]})}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",p.store_name]}),Object(T.jsx)("th",{children:"Vendor:"}),Object(T.jsxs)("td",{children:[" ",p.vendor_name]}),Object(T.jsx)("th",{children:"Vendor Invoice No.:"}),Object(T.jsxs)("td",{children:[" ",p.vendor_invoice_no]}),Object(T.jsx)("th",{children:"Order Placed by:"}),Object(T.jsxs)("td",{children:[" ",p.order_placed_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",p.date?Object(x.default)(new Date(p.date),"MMMM d, yyyy h:mm aa"):""]}),Object(T.jsx)("th",{children:"VAT %:"}),Object(T.jsxs)("td",{children:[" ",p.vat_percent,"%"]}),Object(T.jsx)("th",{children:"Discount :"}),Object(T.jsxs)("td",{children:[" ",p.discount," "]}),Object(T.jsx)("th",{children:"Discount %:"}),Object(T.jsxs)("td",{children:[" ",p.discount_percent," "]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Payment Status:"}),Object(T.jsxs)("td",{children:[" ",p.payment_status]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",p.payment_method]}),Object(T.jsx)("th",{children:"Partial Payment Amount:"}),Object(T.jsxs)("td",{children:[" ",p.partial_payment_amount]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Status:"}),Object(T.jsxs)("td",{children:[" ",p.status]}),Object(T.jsx)("th",{children:"Signature Date:"}),Object(T.jsxs)("td",{children:[" ",p.signature_date_str]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",p.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",p.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",p.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",p.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[G.length>0?Object(T.jsx)("th",{children:"Cash Discounts"}):"",G.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-end",children:G&&G.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):"",$.length>0?Object(T.jsx)("th",{children:"Payments"}):"",$.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment Method"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-end",children:$&&$.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})})]})]})]})})),ge=_e,ve=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Vendor");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Vendor #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name: "}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Name(in Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Title: "}),Object(T.jsxs)("td",{children:[" ",c.title]}),Object(T.jsx)("th",{children:"Title(in Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.title_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Address: "}),Object(T.jsxs)("td",{children:[" ",c.address]}),Object(T.jsx)("th",{children:"Address in Arabic: "}),Object(T.jsxs)("td",{children:[" ",c.address_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Phone: "}),Object(T.jsxs)("td",{children:[" ",c.phone]}),Object(T.jsx)("th",{children:"Phone in Arabic: "}),Object(T.jsxs)("td",{children:[" ",c.phone_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Registration Number(C.R NO.): "}),Object(T.jsxs)("td",{children:[" ",c.registration_number]}),Object(T.jsx)("th",{children:"Registration Number(C.R NO.)(in Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.registration_number_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"VAT No: "}),Object(T.jsxs)("td",{children:[" ",c.vat_no]}),Object(T.jsx)("th",{children:"VAT No(in Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.vat_no_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At: "}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At: "}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By: "}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By: "}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"E-mail: "}),Object(T.jsxs)("td",{children:[" ",c.email]}),Object(T.jsx)("th",{children:"VAT %: "}),Object(T.jsxs)("td",{children:[" ",c.vat_percent+"%"]})]})]})}),c.national_address&&Object(T.jsxs)("span",{children:[Object(T.jsx)("h2",{children:" National Address"}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Application Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.application_no]}),Object(T.jsx)("th",{children:"Application Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.application_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Service Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.service_no]}),Object(T.jsx)("th",{children:"Service Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.service_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Customer Account Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.customer_account_no]}),Object(T.jsx)("th",{children:"Customer Account Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.customer_account_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Building Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.building_no]}),Object(T.jsx)("th",{children:"Building Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.building_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Street Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.street_name]}),Object(T.jsx)("th",{children:"Street Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.street_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"District Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.district_name]}),Object(T.jsx)("th",{children:"District Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.district_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"City Name: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.city_name]}),Object(T.jsx)("th",{children:"City Name(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.city_name_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ZipCode: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.zipcode]}),Object(T.jsx)("th",{children:"ZipCode(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.zipcode_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Additional Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.additional_no]}),Object(T.jsx)("th",{children:"Additional Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.additional_no_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Unit Number: "}),Object(T.jsxs)("td",{children:[" ",c.national_address.unit_no]}),Object(T.jsx)("th",{children:"Unit Number(Arabic): "}),Object(T.jsxs)("td",{children:[" ",c.national_address.unit_no_arabic]})]})]})})]})]})]})})})),ye=ve,Ne=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],Z=W[1],K=Object(s.useState)([]),X=Object(o.a)(K,2),Y=X[0],J=X[1],$=Object(s.useState)(5),ee=Object(o.a)($,2),ae=ee[0],se=ee[1],ne=Object(s.useState)(1),ce=Object(o.a)(ne,2),re=ce[0],ie=ce[1],oe=Object(s.useState)(0),le=Object(o.a)(oe,2),de=le[0],je=le[1],ue=Object(s.useState)(1),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)(0),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(0),ve=Object(o.a)(_e,2),Ne=ve[0],Ce=ve[1],we=Object(s.useState)(!1),Se=Object(o.a)(we,2),ke=(Se[0],Se[1],Object(s.useState)("")),Te=Object(o.a)(ke,2),De=(Te[0],Te[1]),Fe=Object(s.useState)(""),Me=Object(o.a)(Fe,2),Re=(Me[0],Me[1]),Pe=Object(s.useState)(""),Ae=Object(o.a)(Pe,2),Le=(Ae[0],Ae[1]),Ie=Object(s.useState)(!1),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)({}),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)("created_at"),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){Qe[e]=t,ie(re=1),ct()}function nt(e,t){if(!t)return Qe[e]="",ie(re=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),Z(""),Qe.from_date="",Qe.to_date="",Qe[e]=t):"from_date"===e?(H(t),U(""),Qe.date="",Qe[e]=t):"to_date"===e?(Z(t),U(""),Qe.date="",Qe[e]=t):"created_at"===e&&(De(t),Re(""),Le(""),Qe.created_at_from="",Qe.created_at_to="",Qe[e]=t),"created_at_from"===e?(Re(t),De(""),Qe.created_at="",Qe[e]=t):"created_at_to"===e&&(Le(t),De(""),Qe.created_at="",Qe[e]=t),ie(re=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Qe.store_id=i.get("store_id")),Qe.product_id=c.id,Ze(Qe);var t,a=(t=Qe,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();Qe.timezone_offset=parseFloat(s/60),Ue(!0),fetch("/v1/purchase/history?"+a+"&sort="+tt+Ye+"&page="+re+"&limit="+ae,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Ue(!1),He(!1),J(n.result),r=parseInt((n.total_count+ae-1)/ae),je(r),pe(n.total_count),Ce((re-1)*ae),fe(n.result.length),pt=n.meta.total_purchase,xt(pt),ft=n.meta.total_retail_profit,_t(ft),yt=n.meta.total_wholesale_profit,Nt(yt),Ft=n.meta.total_retail_loss,Mt(Ft),At=n.meta.total_wholesale_loss,Lt(At),St=n.meta.total_vat,kt(St);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ue(!1),He(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){re=parseInt(e),ie(re),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)(0),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(0),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1],Tt=Object(s.useState)(0),Dt=Object(o.a)(Tt,2),Ft=Dt[0],Mt=Dt[1],Rt=Object(s.useState)(0),Pt=Object(o.a)(Rt,2),At=Pt[0],Lt=Pt[1],It=Object(s.useRef)();var Et=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ge,{ref:It}),Object(T.jsx)(ye,{ref:Et}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Purchase History of ",c.name,"  ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Retail Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Wholesale Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:yt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Retail Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ft,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Wholesale Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:At,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"",Object(T.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:St.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===he&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Purchase History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){He(!0),ct()},variant:"primary",disabled:Ve,children:[Ve?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ze&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:he>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:ae,onChange:function(e){var t;t=e.target.value,ae=parseInt(t),se(ae),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:de?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:de,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:re-1}):""})}),Object(T.jsx)("div",{className:"row",children:he>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",Ne+1,"-",Ne+Oe," of"," ",he]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",re," of ",de]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("purchase_code")},children:["Purchase ID","purchase_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vendor_name")},children:["Vendor","vendor_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("unit_price")},children:["Unit Price","unit_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("price")},children:["Price","price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vat_price")},children:["VAT","vat_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("net_price")},children:["Net Price","net_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("retain_profit")},children:["Retail Profit","retail_profit"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"retail_profit"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("profit")},children:["Wholesale Profit","wholesale_profit"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"wholesale_profit"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("retail_loss")},children:["Retail Loss","retail_loss"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"retail_loss"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("wholesale_loss")},children:["Wholesale Loss","wholesale_loss"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"wholesale_loss"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Z(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return st("purchase_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vendor_name",onChange:function(e){return st("vendor_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return st("unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"price",onChange:function(e){return st("price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return st("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return st("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"retail_profit",onChange:function(e){return st("retail_profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"wholesale_profit",onChange:function(e){return st("wholesale_profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"retail_loss",onChange:function(e){return st("retail_loss",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"wholesale_loss",onChange:function(e){return st("wholesale_loss",e.target.value)},className:"form-control"})}):""]})}),Object(T.jsx)("tbody",{className:"text-center",children:Y&&Y.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.purchase_id,It.current.open(t)},children:e.purchase_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.vendor_id,Et.current.open(t)},children:e.vendor_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(T.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(T.jsx)("td",{children:e.price.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.vat_price.toFixed(2)+"   ("+e.vat_percent.toFixed(2)+"%)"}),Object(T.jsx)("td",{children:e.net_price.toFixed(2)+" "}),"true"===i.get("admin")?Object(T.jsx)("td",{children:e.retail_profit.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.wholesale_profit.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.retail_loss.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.wholesale_loss.toFixed(2)+" "}):""]},e.id)}))})]})}),de?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:de,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:re-1}):""]})})})})]})})]})]})})),Ce=Ne,we=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:t.top+"px",height:"1110px",width:"770px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"100",height:"100",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a"]})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"PURCHASE RETURN / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Purchase Return: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Purchase Return Date: "}),e.model.date?Object(x.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Vendor: "}),e.model.vendor?e.model.vendor.name:"<VENDOR_NAME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.vendor?e.model.vendor.vat_no:"<VENDOR_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>","#",Object(T.jsx)("strong",{children:": \u0631\u0642\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0634\u0631\u0627\u0621 "})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.date?n(e.model.date):"<DATETIME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:":\u0628\u0627\u0626\u0639"}),e.model.vendor?e.model.vendor.name_in_arabic:"<VENDOR_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:":\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621"}),e.model.vendor?e.model.vendor.vat_no_in_arabic:"<VENDOR_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",borderRadius:"6px"},children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(T.jsx)("li",{children:"Part No."})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(T.jsx)("li",{children:"Purchase Return Unit Price"})]})}),Object(T.jsx)("th",{className:"per20 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(T.jsx)("li",{children:"Total Amount"})]})})]})}),Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return t.quantity>0?Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:s+1+a*e.model.pageSize}),Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.quantity.toFixed(2),"  ",t.unit?t.unit:""]}),Object(T.jsx)("td",{className:"text-end",style:{paddingBottom:"0px",marginTop:"0px"},children:Object(T.jsx)(N.a,{value:t.purchasereturn_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},className:"text-end",children:Object(T.jsx)(N.a,{value:(t.purchasereturn_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},s):""})).filter((function(e,t){return e}))}),Object(T.jsxs)("tfoot",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(T.jsx)("li",{children:"Total:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0636\u0631\u064a\u0628\u0629:"}),Object(T.jsx)("li",{children:"VAT:"})]})}),Object(T.jsxs)("th",{className:"text-center",colSpan:"1",children:[e.model.vat_percent,"%"]}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062e\u0635\u0645:"}),Object(T.jsx)("li",{children:"Discount:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(T.jsx)("li",{children:"Net Total:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("li",{children:"In Words:"})]})}),Object(T.jsx)("th",{colSpan:"5",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0648\u0636\u0639 \u0627\u0644\u0637\u0644\u0628 \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("li",{children:"Purchase Returned By:"})]})}),Object(T.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.purchase_returned_by_name?e.model.purchase_returned_by_name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("li",{children:"Received By:"})]})}),Object(T.jsx)("th",{style:{width:"37%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{style:{width:"37%",height:"40px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(T.jsx)("li",{children:e.model.signature_date_str?e.model.signature_date_str:""})]})}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{})]})]})})]})})}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start",children:e.model.store&&e.model.customer?Object(T.jsx)(J.a,{value:"Quotation #: "+e.model.code+"<br/> Store: "+e.model.store.name+"<br/> Net Total: "+e.model.net_total+"<br/> Customer: "+e.model.customer.name,size:128}):null}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),Se=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.vendor_id&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.vendor=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.vendor_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.order_placed_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(!r.products[d].selected||(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length));d++);s+=1057,o+=12,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="PurchaseReturn #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="PurchaseReturn";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Purchase Return Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(we,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),ke=Se,Te=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px"},children:[Object(T.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"300px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"PURCHASE RETURN / \u0623\u0645\u0631 \u0634\u0631\u0627\u0621"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsxs)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:[e.model.date?Object(x.default)(new Date(e.model.date),"yyyy-MM-dd"):"","\xa0\xa0\xa0\xa0",e.model.date?Object(x.default)(new Date(e.model.date),"h:mma"):""]}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return t.quantity>0?Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:t.purchasereturn_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:(t.purchasereturn_unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code):""}))})}),t.lastPage?Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(T.jsxs)("tbody",{children:[Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.purchase_returned_by_name?e.model.purchase_returned_by_name:""})]},a)}))})})),De=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.order_placed_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by),r.order_placed_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.order_placed_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(!r.products[d].selected||(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length));d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="Quotation #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Purchase Order Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(Te,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Fe=De,Me=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="select=id,amount,method,store_name,purchase_return_code,purchase_return_id,created_by_name,created_at";i.get("store_id")&&(q.store_id=i.get("store_id"));q.purchase_return_id=e,V(q);var s=(n=q,Object.keys(n).map((function(e){return"search[".concat(e,"]=").concat(n[e])})).join("&"));var n;""!==s&&(s="&"+s);fetch("/v1/purchase-return-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:P(n.result),I=n.meta.total_cash_discount,E(I);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(0),g=Object(o.a)(O,2),v=(g[0],g[1],Object(s.useState)(0)),y=Object(o.a)(v,2),w=(y[0],y[1],Object(s.useState)(0)),S=Object(o.a)(w,2),k=(S[0],S[1],Object(s.useState)(0)),D=Object(o.a)(k,2),F=(D[0],D[1],Object(s.useState)([])),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)({}),B=Object(o.a)(z,2),q=B[0],V=B[1];var H=Object(s.useRef)();var G=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ke,{ref:H}),Object(T.jsx)(Fe,{ref:G}),Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Purchase Return #",c.code," "]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){G.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]})}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){H.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," E-Purchase Return Invoice"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Purchase Return Unit Price"}),Object(T.jsx)("th",{children:"Purchase Return Price"})]})}),Object(T.jsxs)("tbody",{children:[c.products&&c.products.filter((function(e){return e.selected})).map((function(e,t){return Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.purchasereturn_unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:(e.purchasereturn_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end"}),Object(T.jsxs)("td",{className:"text-end",children:["VAT: ",c.vat_percent+"%"]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.vat_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.net_total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})]})}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Purchase Code:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_code]}),Object(T.jsx)("th",{children:"Purchase ID:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_id]}),Object(T.jsx)("th",{children:"Vendor:"}),Object(T.jsxs)("td",{children:[" ",c.vendor_name]}),Object(T.jsx)("th",{children:"Vendor Invoice No.:"}),Object(T.jsxs)("td",{children:[" ",c.vendor_invoice_no]}),Object(T.jsx)("th",{children:"Purchase Returned by:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_returned_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]}),Object(T.jsx)("th",{children:"Vendor:"}),Object(T.jsxs)("td",{children:[" ",c.vendor_name]}),Object(T.jsx)("th",{children:"Vendor Invoice No.:"}),Object(T.jsxs)("td",{children:[" ",c.vendor_invoice_no]}),Object(T.jsx)("th",{children:"Purchase Returned by:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_returned_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date:"}),Object(T.jsx)("td",{children:c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):"Not set"}),Object(T.jsx)("th",{children:"VAT %:"}),Object(T.jsxs)("td",{children:[" ",c.vat_percent,"%"]}),Object(T.jsx)("th",{children:"Cash Discount :"}),Object(T.jsxs)("td",{children:[" ",c.cash_discount," "]}),Object(T.jsx)("th",{children:"Discount :"}),Object(T.jsxs)("td",{children:[" ",c.discount," "]}),Object(T.jsx)("th",{children:"Discount %:"}),Object(T.jsxs)("td",{children:[" ",c.discount_percent," "]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Status:"}),Object(T.jsxs)("td",{children:[" ",c.status]}),Object(T.jsx)("th",{children:"Signature Date:"}),Object(T.jsxs)("td",{children:[" ",c.signature_date_str]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Payment Status:"}),Object(T.jsxs)("td",{children:[" ",c.payment_status]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]}),Object(T.jsx)("th",{children:"Partial Payment Amount:"}),Object(T.jsxs)("td",{children:[" ",c.partial_payment_amount]})]}),Object(T.jsxs)("tr",{children:[R.length>0?Object(T.jsx)("th",{children:"Payments"}):"",R.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment Method"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-end",children:R&&R.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})})]})]})]})})),Re=Me,Pe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],Z=W[1],K=Object(s.useState)([]),X=Object(o.a)(K,2),Y=X[0],J=X[1],$=Object(s.useState)(5),ee=Object(o.a)($,2),ae=ee[0],se=ee[1],ne=Object(s.useState)(1),ce=Object(o.a)(ne,2),re=ce[0],ie=ce[1],oe=Object(s.useState)(0),le=Object(o.a)(oe,2),de=le[0],je=le[1],ue=Object(s.useState)(1),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)(0),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(0),ge=Object(o.a)(_e,2),ve=ge[0],Ne=ge[1],Ce=Object(s.useState)(!1),we=Object(o.a)(Ce,2),Se=(we[0],we[1],Object(s.useState)("")),ke=Object(o.a)(Se,2),Te=(ke[0],ke[1]),De=Object(s.useState)(""),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1]),Pe=Object(s.useState)(""),Ae=Object(o.a)(Pe,2),Le=(Ae[0],Ae[1]),Ie=Object(s.useState)(!1),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)({}),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)("created_at"),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){Qe[e]=t,ie(re=1),ct()}function nt(e,t){if(!t)return Qe[e]="",ie(re=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),Z(""),Qe.from_date="",Qe.to_date="",Qe[e]=t):"from_date"===e?(H(t),U(""),Qe.date="",Qe[e]=t):"to_date"===e?(Z(t),U(""),Qe.date="",Qe[e]=t):"created_at"===e&&(Te(t),Me(""),Le(""),Qe.created_at_from="",Qe.created_at_to="",Qe[e]=t),"created_at_from"===e?(Me(t),Te(""),Qe.created_at="",Qe[e]=t):"created_at_to"===e&&(Le(t),Te(""),Qe.created_at="",Qe[e]=t),ie(re=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Qe.store_id=i.get("store_id")),Qe.product_id=c.id,Ze(Qe);var t,a=(t=Qe,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();Qe.timezone_offset=parseFloat(s/60),Ue(!0),fetch("/v1/purchase-return/history?"+a+"&sort="+tt+Ye+"&page="+re+"&limit="+ae,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Ue(!1),He(!1),J(n.result),r=parseInt((n.total_count+ae-1)/ae),je(r),pe(n.total_count),Ne((re-1)*ae),fe(n.result.length),pt=n.meta.total_purchase_return,xt(pt),ft=n.meta.total_vat_return,_t(ft);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ue(!1),He(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){re=parseInt(e),ie(re),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useRef)();var vt=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Re,{ref:gt}),Object(T.jsx)(ye,{ref:vt}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Purchase Return History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["VAT Returned: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===he&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No PurchaseReturn History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){He(!0),ct()},variant:"primary",disabled:Ve,children:[Ve?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ze&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:he>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:ae,onChange:function(e){var t;t=e.target.value,ae=parseInt(t),se(ae),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:de?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:de,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:re-1}):""})}),Object(T.jsx)("div",{className:"row",children:he>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ve+1,"-",ve+Oe," of"," ",he]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",re," of ",de]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("purchase_return_code")},children:["Purchase Return ID","purchase_return_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_return_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vendor_name")},children:["Vendor","vendor_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("unit_price")},children:["Unit Price","unit_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("price")},children:["Price","price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vat_price")},children:["VAT","vat_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("net_price")},children:["Net Price","net_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Z(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_return_code",onChange:function(e){return st("purchase_return_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vendor_name",onChange:function(e){return st("vendor_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return st("unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"price",onChange:function(e){return st("price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return st("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return st("net_price",e.target.value)},className:"form-control"})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:Y&&Y.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.purchase_return_id,gt.current.open(t)},children:e.purchase_return_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.vendor_id,vt.current.open(t)},children:e.vendor_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(T.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(T.jsx)("td",{children:e.price.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.vat_price.toFixed(2)+"   ("+e.vat_percent.toFixed(2)+"%)"}),Object(T.jsx)("td",{children:e.net_price.toFixed(2)+" "})]},e.id)}))})]})}),de?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:de,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:re-1}):""]})})})})]})})]})]})})),Ae=Pe,Le=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(T.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"QUOTATION / \u0627\u0642\u062a\u0628\u0627\u0633"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.date?Object(x.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:510+t.top+"px",border:"solid 0px"},children:Object(T.jsxs)("tbody",{children:[Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage&&e.model.shipping_handling_fees&&e.model.shipping_handling_fees>0?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"480px",top:533+t.top+"px"},children:"Shipping / Handling Fees: "}):"",t.lastPage&&e.model.shipping_handling_fees?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"686px",top:533+t.top+"px"},children:e.model.shipping_handling_fees.toFixed(2)+" SAR"}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:555+t.top+"px"},children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:565+t.top+"px"},children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""})]},a)}))})})),Ie=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.date),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="Quotation #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Quotation Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(Le,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Ee=Ie,ze=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Quotation");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/quotation/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),k(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(0),d=Object(o.a)(l,2),j=(d[0],d[1],Object(s.useState)(0)),p=Object(o.a)(j,2),m=(p[0],p[1],Object(s.useState)(0)),O=Object(o.a)(m,2),g=(O[0],O[1],Object(s.useState)(0)),v=Object(o.a)(g,2);v[0],v[1];var y=Object(s.useState)(!1),w=Object(o.a)(y,2),S=w[0],k=w[1];function D(){k(!1)}var F=Object(s.useRef)();var M=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(z,{ref:F}),Object(T.jsx)(Ee,{ref:M}),Object(T.jsxs)(f.a,{show:S,size:"xl",onHide:D,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Sales Quotation #",c.code]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){M.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0  \xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){F.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," E-Invoice"]}),"\xa0  \xa0\xa0 \xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){D(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){D(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:D,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Unit Price"}),Object(T.jsx)("th",{children:"Price"}),Object(T.jsx)("th",{children:"Purchase Unit Price"}),Object(T.jsx)("th",{children:"Purchase Price"}),Object(T.jsx)("th",{children:"Profit"}),Object(T.jsx)("th",{children:"Loss"})]})}),Object(T.jsxs)("tbody",{children:[c.products&&c.products.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-end",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.purchase_unit_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.profit,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.loss,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.profit,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.loss,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Shipping / Handling Fees"}),Object(T.jsx)("td",{className:"text-end",children:c.shipping_handling_fees?Object(T.jsx)(N.a,{value:c.shipping_handling_fees.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):"0.00 "}),Object(T.jsx)("td",{colSpan:"3"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0-c.discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:0,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(T.jsx)("td",{className:"text-end",children:c.vat_percent+"%"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.vat_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),Object(T.jsx)("td",{className:"text-end",children:"0 "}),Object(T.jsx)("td",{className:"text-end",children:"0 "})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.net_total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{colSpan:"2",className:"text-end",children:"Net Profit"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.net_profit,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:c.loss,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})]})}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]}),Object(T.jsx)("th",{children:"Customer:"}),Object(T.jsxs)("td",{children:[" ",c.customer_name]}),Object(T.jsx)("th",{children:"Delivered by:"}),Object(T.jsxs)("td",{children:[" ",c.delivered_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date:"}),Object(T.jsx)("td",{children:c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):"Not set"}),Object(T.jsx)("th",{children:"VAT %:"}),Object(T.jsxs)("td",{children:[" ",c.vat_percent,"%"]}),Object(T.jsx)("th",{children:"Discount :"}),Object(T.jsxs)("td",{children:[" ",c.discount," "]}),Object(T.jsx)("th",{children:"Discount %:"}),Object(T.jsxs)("td",{children:[" ",c.discount_percent," "]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Status:"}),Object(T.jsxs)("td",{children:[" ",c.status]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]}),Object(T.jsx)("th",{children:"Profit :"}),Object(T.jsxs)("td",{children:[" ",c.profit," "]}),Object(T.jsx)("th",{children:"Loss:"}),Object(T.jsxs)("td",{children:[" ",c.loss," "]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Delivery days:"}),Object(T.jsxs)("td",{children:[" ",c.delivery_days]}),Object(T.jsx)("th",{children:"Validity days:"}),Object(T.jsxs)("td",{children:[" ",c.validity_days]})]})]})})]})]})]})})),Ue=ze,Be=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],K=W[1],X=Object(s.useState)([]),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(5),ae=Object(o.a)(ee,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(1),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)(0),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1],ge=Object(s.useState)(0),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)(!1),we=Object(o.a)(Ce,2),Se=(we[0],we[1],Object(s.useState)("")),ke=Object(o.a)(Se,2),Te=(ke[0],ke[1]),De=Object(s.useState)(""),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1]),Re=Object(s.useState)(""),Pe=Object(o.a)(Re,2),Ae=(Pe[0],Pe[1]),Le=Object(s.useState)(!1),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)({}),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)("created_at"),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){Qe[e]=t,oe(ie=1),ct()}function nt(e,t){if(!t)return Qe[e]="",oe(ie=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),K(""),Qe.from_date="",Qe.to_date="",Qe[e]=t):"from_date"===e?(H(t),U(""),Qe.date="",Qe[e]=t):"to_date"===e?(K(t),U(""),Qe.date="",Qe[e]=t):"created_at"===e&&(Te(t),Me(""),Ae(""),Qe.created_at_from="",Qe.created_at_to="",Qe[e]=t),"created_at_from"===e?(Me(t),Te(""),Qe.created_at="",Qe[e]=t):"created_at_to"===e&&(Ae(t),Te(""),Qe.created_at="",Qe[e]=t),oe(ie=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(Qe.store_id=i.get("store_id")),Qe.product_id=c.id,Ze(Qe);var t,a=(t=Qe,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();Qe.timezone_offset=parseFloat(s/60),ze(!0),fetch("/v1/quotation/history?"+a+"&sort="+tt+Ye+"&page="+ie+"&limit="+se,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:ze(!1),He(!1),$(n.result),r=parseInt((n.total_count+se-1)/se),ue(r),xe(n.total_count),Ne((ie-1)*se),_e(n.result.length),pt=n.meta.total_quotation,xt(pt),ft=n.meta.total_profit,_t(ft),St=n.meta.total_loss,kt(St),yt=n.meta.total_vat,Nt(yt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ze(!1),He(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){ie=parseInt(e),oe(ie),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)(0),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(0),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1],Tt=Object(s.useRef)();var Dt=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ue,{ref:Tt}),Object(T.jsx)(Z,{ref:Dt}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Quotation History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Quotation: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===i.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:St,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"",Object(T.jsxs)("h1",{className:"text-end",children:["VAT: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:yt.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===pe&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Quotation History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){He(!0),ct()},variant:"primary",disabled:Ve,children:[Ve?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ee&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:pe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:se,onChange:function(e){var t;t=e.target.value,se=parseInt(t),ne(se),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:je?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:je,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""})}),Object(T.jsx)("div",{className:"row",children:pe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ye+1,"-",ye+fe," of"," ",pe]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ie," of ",je]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quotation_code")},children:["Quotation ID","quotation_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quotation_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("customer_name")},children:["Customer","customer_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("unit_price")},children:["Unit Price","unit_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"unit_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("price")},children:["Price","price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("vat_price")},children:["VAT","vat_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vat_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("net_price")},children:["Net Price","net_price"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"net_price"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("profit")},children:["Profit","profit"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"profit"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("loss")},children:["Loss","loss"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"loss"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}):""]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return K(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quotation_code",onChange:function(e){return st("quotation_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return st("customer_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"unit_price",onChange:function(e){return st("unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"price",onChange:function(e){return st("price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return st("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_price",onChange:function(e){return st("net_price",e.target.value)},className:"form-control"})}),"true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"profit",onChange:function(e){return st("profit",e.target.value)},className:"form-control"})}):"","true"===i.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"loss",onChange:function(e){return st("loss",e.target.value)},className:"form-control"})}):""]})}),Object(T.jsx)("tbody",{className:"text-center",children:J&&J.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.quotation_id,Tt.current.open(t)},children:e.quotation_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,Dt.current.open(t)},children:e.customer_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]}),Object(T.jsx)("td",{children:e.unit_price.toFixed(2)}),Object(T.jsx)("td",{children:e.price.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.vat_price.toFixed(2)+"   ("+e.vat_percent.toFixed(2)+"%)"}),Object(T.jsx)("td",{children:e.net_price.toFixed(2)+" "}),"true"===i.get("admin")?Object(T.jsx)("td",{children:e.profit.toFixed(2)+" "}):"","true"===i.get("admin")?Object(T.jsx)("td",{children:e.loss.toFixed(2)+" "}):""]},e.id)}))})]})}),je?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:je,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""]})})})})]})})]})]})})),qe=Be,Ve=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function s(e){return e?e.replace(/\d/g,(function(e){return a[parseInt(e)]})):""}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"30px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"100",height:"100",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsx)("li",{children:e.model.store?"\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644: "+e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"}),Object(T.jsx)("li",{children:e.model.store?"\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621: "+e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"DELIVERY NOTE / \u0645\u0630\u0643\u0631\u0629 \u062a\u0633\u0644\u064a\u0645"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Delivery Note: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Delivert Note Date: "}),e.model.created_at?Object(x.default)(new Date(e.model.created_at),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"<CUSTOMER_NAME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"<CUSTOMER_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?s(e.model.code)+"#":"<ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0631\u0642\u0645 \u0645\u0630\u0643\u0631\u0629 \u0627\u0644\u062a\u0633\u0644\u064a\u0645 "})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:" \u062a\u0627\u0631\u064a\u062e \u0645\u0630\u0643\u0631\u0629 \u0627\u0644\u062a\u0633\u0644\u064a\u0645: "}),e.model.created_at?n(e.model.created_at):"<DATE_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0638\u0631\u064a\u0628\u0647 \u0627\u0644\u0634\u0631\u0627\u0621: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",borderRadius:"6px"},children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0646\u0641"}),Object(T.jsx)("li",{children:"Part No."})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})})]})}),Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{className:"text-center",style:{height:"20px"},children:[Object(T.jsx)("td",{children:s+1+a*e.model.pageSize}),Object(T.jsx)("td",{children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[t.quantity,"  ",t.unit?t.unit:""," "]})]},s)}))})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(T.jsx)("li",{children:"Delivered By:"})]})}),Object(T.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.delivered_by_user?e.model.delivered_by_user.name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("li",{children:"Received By:"})]})}),Object(T.jsx)("th",{style:{width:"37%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{style:{width:"37%",height:"80px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(T.jsxs)("li",{children:[" ",e.model.signature_date_str?e.model.signature_date_str:""]})]})}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{})]})]})})]})})}),Object(T.jsx)("div",{className:"row",style:{fontSize:"3mm"},children:Object(T.jsx)("div",{className:"col-md-12 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})})]})}))})})),He=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.store=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length);d++);s+=1057,o+=12,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="DeliveryNote #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="DeliveryNote";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"DeliveryNote Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(Ve,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Ge=He,We=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px",height:"700px"},children:[Object(T.jsx)("h2",{style:{fontSize:"4mm",position:"absolute",left:"305px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"DELIVERY NOTE / \u0645\u0630\u0643\u0631\u0629 \u062a\u0633\u0644\u064a\u0645"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.created_at?Object(x.default)(new Date(e.model.created_at),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_number?t.part_number:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})})]},t.item_code)}))})}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:654+t.top+"px"},children:e.model.delivered_by_user?e.model.delivered_by_user.name:""})]},a)}))})})),Qe=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.delivered_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by),r.delivered_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.delivered_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length);d++);s+=1057,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="DeliveryNote #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="DeliveryNote";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"DeliveryNote Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(We,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Ze=Qe,Ke=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get DeliveryNote");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/delivery-note/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),S(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(0),d=Object(o.a)(l,2),j=(d[0],d[1],Object(s.useState)(0)),p=Object(o.a)(j,2),m=(p[0],p[1],Object(s.useState)(0)),O=Object(o.a)(m,2),g=(O[0],O[1],Object(s.useState)(0)),v=Object(o.a)(g,2);v[0],v[1];var y=Object(s.useState)(!1),N=Object(o.a)(y,2),w=N[0],S=N[1];function k(){S(!1)}var D=Object(s.useRef)();var F=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ge,{ref:D}),Object(T.jsx)(Ze,{ref:F}),Object(T.jsxs)(f.a,{show:w,size:"xl",onHide:k,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of  Delivery Note #",c.code]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){F.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),"\xa0  \xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){D.current.open(c)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," Print A4"]}),"\xa0  \xa0\xa0 \xa0\xa0",e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"xl",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]}),Object(T.jsx)("th",{children:"Customer:"}),Object(T.jsxs)("td",{children:[" ",c.customer_name]}),Object(T.jsx)("th",{children:"Delivered by:"}),Object(T.jsxs)("td",{children:[" ",c.delivered_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date:"}),Object(T.jsx)("td",{children:c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):"Not set"}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"})]})}),Object(T.jsx)("tbody",{children:c.products&&c.products.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]})]},t)}))})]})})]})]})]})})),Xe=Ke,Ye=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){c=e,r(Object(C.a)({},c)),ct(),jt(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(new Date),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(new Date),v=Object(o.a)(m,2),w=v[0],S=v[1],k=Object(s.useState)(new Date),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(""),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(""),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(""),W=Object(o.a)(G,2),Q=W[0],K=W[1],X=Object(s.useState)([]),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(5),ae=Object(o.a)(ee,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(1),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)(0),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1],ge=Object(s.useState)(0),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)(!1),we=Object(o.a)(Ce,2),Se=(we[0],we[1],Object(s.useState)("")),ke=Object(o.a)(Se,2),Te=(ke[0],ke[1]),De=Object(s.useState)(""),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1]),Re=Object(s.useState)(""),Pe=Object(o.a)(Re,2),Ae=(Pe[0],Pe[1]),Le=Object(s.useState)(!1),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Ue=Object(s.useState)(!1),Be=Object(o.a)(Ue,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)({}),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1],Ze=Object(s.useState)("created_at"),Ke=Object(o.a)(Ze,2),Ye=Ke[0],Je=Ke[1],$e=Object(s.useState)("-"),et=Object(o.a)($e,2),tt=et[0],at=et[1];function st(e,t){We[e]=t,oe(ie=1),ct()}function nt(e,t){if(!t)return We[e]="",oe(ie=1),void ct();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(U(t),H(""),K(""),We.from_date="",We.to_date="",We[e]=t):"from_date"===e?(H(t),U(""),We.date="",We[e]=t):"to_date"===e?(K(t),U(""),We.date="",We[e]=t):"created_at"===e&&(Te(t),Me(""),Ae(""),We.created_at_from="",We.created_at_to="",We[e]=t),"created_at_from"===e?(Me(t),Te(""),We.created_at="",We[e]=t):"created_at_to"===e&&(Ae(t),Te(""),We.created_at="",We[e]=t),oe(ie=1),ct()}function ct(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};i.get("store_id")&&(We.store_id=i.get("store_id")),We.product_id=c.id,Qe(We);var t,a=(t=We,Object.keys(t).map((function(e){return"search[".concat(e,"]=")+t[e]})).join("&"));""!==a&&(a="&"+a);var s=(new Date).getTimezoneOffset();We.timezone_offset=parseFloat(s/60),ze(!0),fetch("/v1/delivery-note/history?"+a+"&sort="+tt+Ye+"&page="+ie+"&limit="+se,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:ze(!1),Ve(!1),$(n.result),r=parseInt((n.total_count+se-1)/se),ue(r),xe(n.total_count),Ne((ie-1)*se),_e(n.result.length),pt=n.meta.total_quantity,xt(pt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ze(!1),Ve(!1),console.log(e)}))}function rt(e){Je(Ye=e),at(tt="-"===tt?"":"-"),ct()}function it(e){ie=parseInt(e),oe(ie),ct()}var ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1];function ut(){jt(!1)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=(Ot[0],Ot[1],Object(s.useState)(0)),_t=Object(o.a)(ft,2),gt=(_t[0],_t[1],Object(s.useState)(0)),vt=Object(o.a)(gt,2),yt=(vt[0],vt[1],Object(s.useRef)());var Nt=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Xe,{ref:yt}),Object(T.jsx)(Z,{ref:Nt}),Object(T.jsxs)(f.a,{show:dt,size:"xl",onHide:ut,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["DeliveryNote History of ",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ut,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Quantity: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===pe&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No DeliveryNote History to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Ve(!0),ct()},variant:"primary",disabled:qe,children:[qe?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ee&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:pe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:se,onChange:function(e){var t;t=e.target.value,se=parseInt(t),ne(se),ct()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:je?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:je,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""})}),Object(T.jsx)("div",{className:"row",children:pe>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ye+1,"-",ye+fe," of"," ",pe]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ie," of ",je]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("store_name")},children:["Store","store_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"store_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("delivery_note_code")},children:["DeliveryNote ID","delivery_note_code"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"delivery_note_code"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("customer_name")},children:["Customer","customer_name"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("quantity")},children:["Quantity","quantity"===Ye&&"-"===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"quantity"===Ye&&""===tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"100px"},children:[Object(T.jsx)(O.a,{id:"date",value:z,selected:j,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return U(""),void nt("date_str","");nt("date_str",e),j=e,p(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return L(!A)},children:A?"Less..":"More.."}),Object(T.jsx)("br",{}),A?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"date_from",value:V,selected:w,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return H(""),void nt("from_date","");nt("from_date",e),w=e,S(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"date_to",value:Q,selected:F,isClearable:!0,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return K(""),void nt("to_date","");nt("to_date",e),F=e,M(e)}})]}):null]})}),i.get("store_id")?"":Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"store_name",onChange:function(e){return st("store_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"delivery_note_code",onChange:function(e){return st("delivery_note_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"customer_name",onChange:function(e){return st("customer_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"quantity",onChange:function(e){return st("quantity",e.target.value)},className:"form-control"})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:J&&J.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):"Not set"}),i.get("store_id")?"":Object(T.jsx)("td",{children:e.store_name}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.delivery_note_id,yt.current.open(t)},children:e.delivery_note_code}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.customer_id,Nt.current.open(t)},children:e.customer_name}),Object(T.jsxs)("td",{children:[e.quantity,e.unit?e.unit:""]})]},e.id)}))})]})}),je?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:je,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ie-1}):""]})})})})]})})]})]})})),Je=Ye,$e=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Product");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/product/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}Object(s.useRef)(),Object(s.useRef)();var m=Object(s.useRef)();var O=Object(s.useRef)();var g=Object(s.useRef)();var v=Object(s.useRef)();var y=Object(s.useRef)();var w=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(je,{ref:m,showToastMessage:e.showToastMessage}),Object(T.jsx)(be,{ref:O,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ce,{ref:g,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ae,{ref:v,showToastMessage:e.showToastMessage}),Object(T.jsx)(qe,{ref:y,showToastMessage:e.showToastMessage}),Object(T.jsx)(Je,{ref:w,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Product #",c.name," ",c.name_in_arabic?" / "+c.name_in_arabic:""," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)("div",{class:"btn-group",children:[Object(T.jsx)("button",{type:"button",class:"btn btn-success dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:"History"}),Object(T.jsxs)("ul",{class:"dropdown-menu",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){m.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Sales History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){g.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Purchase History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){O.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Sales Return History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){v.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Purchase Return History"]})}),Object(T.jsxs)("li",{children:[" ",Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){y.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Quotation History"]})]}),Object(T.jsxs)("li",{children:[" ",Object(T.jsxs)("a",{class:"dropdown-item",onClick:function(){!function(e){w.current.open(e)}(c)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"})," Delivery Note History"]})]})]})]}),"\xa0\xa0",e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Barcode (Note:Save & Print):"}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"Barcode",src:c.barcode_base64,style:{width:"400px",height:"300px"},onClick:function(e){console.log("Clicked:"),console.log(e.target.getAttribute("src"));var t=new ee.a({language:"esc-pos"}),a=new Image;a.src=e.target.getAttribute("src"),a.onload=function(){console.log("Inside onload");var e=t.image(a,320,320,"atkinson").encode();console.log("result:",e)}}})}),Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Name(in Arabic):"}),Object(T.jsxs)("td",{children:[" ",c.name_in_arabic]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Store:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]}),Object(T.jsx)("th",{children:"Store Code:"}),Object(T.jsxs)("td",{children:[" ",c.store_code]}),Object(T.jsx)("th",{children:"Item Code:"}),Object(T.jsxs)("td",{children:[" ",c.item_code]}),Object(T.jsx)("th",{children:"Bar Code:"}),Object(T.jsxs)("td",{children:[" ",c.bar_code]}),Object(T.jsx)("th",{children:"EAN 12:"}),Object(T.jsxs)("td",{children:[" ",c.ean_12]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Part Number:"}),Object(T.jsxs)("td",{children:[" ",c.part_number]}),Object(T.jsx)("th",{children:"Rack / Location:"}),Object(T.jsxs)("td",{children:[" ",c.rack]}),Object(T.jsx)("th",{children:"Categories:"}),Object(T.jsx)("td",{children:Object(T.jsx)("ul",{children:c.category_name&&c.category_name.map((function(e){return Object(T.jsx)("li",{children:e},e)}))})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Unit:"}),Object(T.jsxs)("td",{children:[" ",c.unit?c.unit:"Unit(s)"]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Unit Prices & Stock"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[i.get("store_id")?"":Object(T.jsx)("th",{children:"Store Name"}),Object(T.jsx)("th",{children:"Purchase Unit Price"}),Object(T.jsx)("th",{children:"Wholesale Unit Price"}),Object(T.jsx)("th",{children:"Retail Unit Price"}),Object(T.jsx)("th",{children:"Stock"})]})}),Object(T.jsx)("tbody",{children:c.product_stores&&Object.keys(c.product_stores).map((function(e,t){return i.get("store_id")&&i.get("store_id")!=c.product_stores[e].store_id?"":Object(T.jsxs)("tr",{className:"text-center",children:[i.get("store_id")?"":Object(T.jsx)("td",{children:c.product_stores[e].store_name}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:c.product_stores[e].purchase_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" "})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:c.product_stores[e].wholesale_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" "})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:c.product_stores[e].retail_unit_price,displayType:"text",thousandSeparator:!0,renderText:function(e,t){return e},suffix:" "})}),Object(T.jsx)("td",{children:c.product_stores[e].stock})]},t)}))})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"Product",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})]})})),et=$e,tt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get ProductCategory");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/product-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Product Category #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Parent Category Name:"}),Object(T.jsxs)("td",{children:[" ",c.parent_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),at=tt,st=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){E(I={}),D(k=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:m.get("access_token")}};I={},E(Object(C.a)({},I)),k=[],D(Object(i.a)(k)),fetch("/v1/product-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),I=n.result,console.log("formData:",I),I.parent_id&&(k=[{id:I.parent_id,name:I.parent_name}],D(Object(i.a)(k))),E(Object(C.a)({},I)),console.log("formData:",I);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(!1),r(e)}))}(e),q(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1],m=new h.a,O=Object(s.useState)([]),v=Object(o.a)(O,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(!1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)({}),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1];function V(){q(!1)}function H(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function G(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",I.logo),P(!0);var a="/v1/product-category",s="POST";I.id&&(a="/v1/product-category/"+I.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:m.get("access_token")},body:JSON.stringify(I)};console.log("formData:",I),x(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),x(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),V(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){x(!1),P(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating ProductCategory!","danger")}))}function W(){return(W=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),N([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=H({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:m.get("access_token")}},"select=id,name",P(!0),e.next=13,fetch("/v1/product-category?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,N(c.result),P(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){m.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:B,size:"lg",onHide:V,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:I.id?"Update Product Category #"+I.name:"Create New Product Category"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[I.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){V(),e.openDetailsView(I.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:G,children:[j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",I.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:V,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:G,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:I.name?I.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),I.name=e.target.value,E(Object(C.a)({},I)),console.log(I)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),I.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Parent(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"parent_id",labelKey:"name",isLoading:R,isInvalid:!!c.parent_id,onChange:function(e){if(c.parent__id="",r({errors:c}),0===e.length)return c.parent_id="Invalid Parent Category Selected",r(c),I.parent_id="",I.parent_name="",E(Object(C.a)({},I)),void D([]);I.parent_id=e[0].id,E(Object(C.a)({},I)),D(Object(i.a)(e))},options:y,placeholder:"Select Parent Category",selected:k,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){W.apply(this,arguments)}(e)}}),c.parent_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.parent_id]}),I.parent_id&&!c.parent_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:V,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:G,children:j?Object(T.jsx)(g.a,{as:"span",animation:"bproductcategory",size:"sm",role:"status","aria-hidden":!0})+" Processing...":I.id?"Update":"Create"})]})]})})]})})})),nt=st,ct=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){w(N=[]),G({formData:V={images_content:[],unit:"",item_code:""}}),function(){se.apply(this,arguments)}(),e&&function(e){console.log("inside get Product");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:U.get("access_token")}};fetch("/v1/product/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(A({}),console.log("Response:"),console.log(n),r=n.result.category_id,o=n.result.category_name,N=[],r&&o)for(l=0;l<r.length;l++)N.push({id:r[l],name:o[l]});if(w(N),n.result.product_stores){for(b in console.log("data.result.product_stores-ok:",n.result.product_stores),d=0,n.result.product_stores)console.log("key: ",b),j[d].store_id==n.result.product_stores[b].store_id&&(j[d].purchase_unit_price=n.result.product_stores[b].purchase_unit_price,j[d].wholesale_unit_price=n.result.product_stores[b].wholesale_unit_price,j[d].retail_unit_price=n.result.product_stores[b].retail_unit_price,j[d].stock=n.result.product_stores[b].stock,d++);x(Object(i.a)(j)),console.log("productStores-ok:",j)}(V=n.result).name=n.result.name,V.unit||(V.unit=""),V.images_content=[],V.useLaserScanner=!1,G(Object(C.a)({},V));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){z(!1),A(e)}))}(e),X(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)(""),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],x=d[1],m=Object(s.useState)([]),O=Object(o.a)(m,2),v=(O[0],O[1],Object(s.useState)([])),y=Object(o.a)(v,2),N=y[0],w=y[1],S=Object(s.useState)([]),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)({}),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(!1),I=Object(o.a)(L,2),E=I[0],z=I[1],U=new h.a,B=Object(s.useState)({images_content:[],unit:"",item_code:""}),q=Object(o.a)(B,2),V=q[0],G=q[1],Q=Object(s.useState)(!1),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1];function Y(){X(!1)}function J(){return(J=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ne({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:U.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/product-category?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,F(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=Object(s.useState)([]),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){return(se=Object(b.a)(u.a.mark((function e(){var t,a,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching all stores"),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:U.get("access_token")}},"select=id,name",e.next=5,fetch("/v1/store?select=id,name",t);case 5:return a=e.sent,e.next=8,a.json();case 8:for(s=e.sent,te=s.result,ae(s.result),j=[],n=0;n<te.length;n++)j.push({store_id:te[n].id,store_name:te[n].name,purchase_unit_price:"",retail_unit_price:"",wholesale_unit_price:"",stock:""});x(Object(i.a)(j)),console.log("productStores:",j);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function ce(t){t.preventDefault(),console.log("Inside handle Create"),V.category_id=[];for(var a=0;a<N.length;a++)V.category_id.push(N[a].id);console.log("productStores:",j);for(var s={},n=0;n<j.length;n++)s[j[n].store_id]={store_id:j[n].store_id,store_name:j[n].store_name,retail_unit_price:j[n].retail_unit_price?j[n].retail_unit_price:0,wholesale_unit_price:j[n].wholesale_unit_price?j[n].wholesale_unit_price:0,purchase_unit_price:j[n].purchase_unit_price?j[n].purchase_unit_price:0,stock:j[n].stock?j[n].stock:0};V.product_stores=s,console.log("Formdata:",V);var c="/v1/product",r="POST";V.id?(c="/v1/product/"+V.id,r="PUT"):U.get("store_id")&&(V.store_id=U.get("store_id"));var i={method:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:U.get("access_token")},body:JSON.stringify(V)};z(!0),fetch(c,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:A({}),z(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Created Successfully!","success"),e.refreshList&&e.refreshList(),Y(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){z(!1),console.log("Inside catch"),console.log(t),A(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Product!","danger")}))}Object(s.useEffect)((function(){U.get("access_token")||(window.location="/")}));var re=Object(s.useRef)();var ie=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:re,showToastMessage:e.showToastMessage}),Object(T.jsx)(nt,{ref:ie,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:K,size:"xl",onHide:Y,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:V.id?"Update Product #"+V.name:"Create New Product"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[V.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){Y(),e.openDetailsView(V.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:ce,children:[E?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",V.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:ce,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:V.name?V.name:"",type:"string",onChange:function(e){P.name="",A(Object(C.a)({},P)),V.name=e.target.value,G(Object(C.a)({},V)),console.log(V)},className:"form-control",id:"name",placeholder:"Name"}),P.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.name]}),V.name&&!P.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name In Arabic (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:V.name_in_arabic?V.name_in_arabic:"",type:"string",onChange:function(e){P.v="",A(Object(C.a)({},P)),V.name_in_arabic=e.target.value,G(Object(C.a)({},V)),console.log(V)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),P.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.name_in_arabic]}),V.name_in_arabic&&!P.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Part Number(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:V.part_number?V.part_number:"",type:"string",onChange:function(e){P.part_number="",A(Object(C.a)({},P)),V.part_number=e.target.value,G(Object(C.a)({},V)),console.log(V)},className:"form-control",id:"part_number",placeholder:"Part Number"}),P.part_number&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.part_number]}),V.part_number&&!P.part_number&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Rack / Location (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:V.rack?V.rack:"",type:"string",onChange:function(e){P.rack="",A(Object(C.a)({},P)),V.rack=e.target.value,G(Object(C.a)({},V)),console.log(V)},className:"form-control",id:"rack",placeholder:"Rack/Location"}),P.rack&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.rack]}),V.rack&&!P.rack&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Categories*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"category_id",labelKey:"name",isInvalid:!!P.category_id,onChange:function(e){if(P.category_id="",A(P),0===e.length)return P.category_id="Invalid Category selected",A(P),G(Object(C.a)({},V)),void w([]);G(Object(C.a)({},V)),w(e)},options:D,placeholder:"Select Categories",selected:N,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){J.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){ie.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),P.category_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.category_id]}),V.category_id&&!P.category_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Unit"}),Object(T.jsxs)("select",{className:"form-control",value:V.unit,onChange:function(e){V.unit=e.target.value,console.log("Inside onchange price type:",V.unit),G(Object(C.a)({},V))},children:[Object(T.jsx)("option",{value:"",children:"PC"}),Object(T.jsx)("option",{value:"drum",children:"Drum"}),Object(T.jsx)("option",{value:"set",children:"Set"}),Object(T.jsx)("option",{value:"Kg",children:"Kg"}),Object(T.jsx)("option",{value:"Meter(s)",children:"Meter(s)"}),Object(T.jsx)("option",{value:"Gm",children:"Gm"}),Object(T.jsx)("option",{value:"L",children:"Liter (L)"}),Object(T.jsx)("option",{value:"Gm",children:"Gm"}),Object(T.jsx)("option",{value:"Mg",children:"Mg"})]})]}),Object(T.jsx)("h4",{children:"Unit Price & Stock"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[U.get("store_id")?"":Object(T.jsx)("th",{children:"Store Name"}),Object(T.jsx)("th",{children:"Purchase Unit Price"}),Object(T.jsx)("th",{children:"Wholesale Unit Price"}),Object(T.jsx)("th",{children:"Retail Unit Price"}),Object(T.jsx)("th",{children:"Stock"})]})}),Object(T.jsx)("tbody",{children:te.map((function(e,t){var a,s,n,c,r,o,l,d,u,b,h,p,m,O,f,_,g,v,y;return U.get("store_id")&&e.id!=U.get("store_id")?"":Object(T.jsxs)("tr",{className:"text-center",children:[U.get("store_id")?"":Object(T.jsx)("td",{style:{width:"150px"},children:e.name}),Object(T.jsxs)("td",{style:{width:"150px"},children:[Object(T.jsx)("input",{type:"number",value:(null===(a=j[t])||void 0===a?void 0:a.purchase_unit_price)||0==(null===(s=j[t])||void 0===s?void 0:s.purchase_unit_price)?null===(n=j[t])||void 0===n?void 0:n.purchase_unit_price:"",className:"form-control",placeholder:"Purchase Unit Price",onChange:function(e){return P["purchase_unit_price_"+t]="",A(Object(C.a)({},P)),e.target.value?parseFloat(e.target.value)<0?(j[t].purchase_unit_price="",x(Object(i.a)(j)),P["purchase_unit_price_"+t]="Purchase Unit Price should not be < 0",void A(Object(C.a)({},P))):(j[t].purchase_unit_price=parseFloat(e.target.value),void x(Object(i.a)(j))):(j[t].purchase_unit_price="",x(Object(i.a)(j)),void console.log("errors:",P))}})," ",P["purchase_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P["purchase_unit_price_"+t]]}),!(null===(c=j[t])||void 0===c?void 0:c.purchase_unit_price)&&0!==(null===(r=j[t])||void 0===r?void 0:r.purchase_unit_price)||P["purchase_unit_price_"+t]?null:Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("td",{style:{width:"150px"},children:[Object(T.jsx)("input",{type:"number",value:(null===(o=j[t])||void 0===o?void 0:o.wholesale_unit_price)||0===(null===(l=j[t])||void 0===l?void 0:l.wholesale_unit_price)?null===(d=j[t])||void 0===d?void 0:d.wholesale_unit_price:"",className:"form-control",placeholder:"Wholesale Unit Price",onChange:function(e){return P["wholesale_unit_price_"+t]="",A(Object(C.a)({},P)),e.target.value?parseFloat(e.target.value)<0?(j[t].wholesale_unit_price="",x(Object(i.a)(j)),P["wholesale_unit_price_"+t]="Wholesale unit price should not be < 0",void A(Object(C.a)({},P))):(j[t].wholesale_unit_price=parseFloat(e.target.value),void x(Object(i.a)(j))):(j[t].wholesale_unit_price="",void x(Object(i.a)(j)))}}),P["wholesale_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P["wholesale_unit_price_"+t]]}),!(null===(u=j[t])||void 0===u?void 0:u.wholesale_unit_price)&&0!==(null===(b=j[t])||void 0===b?void 0:b.wholesale_unit_price)||P["wholesale_unit_price_"+t]?null:Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("td",{style:{width:"150px"},children:[Object(T.jsx)("input",{type:"number",value:(null===(h=j[t])||void 0===h?void 0:h.retail_unit_price)||0===(null===(p=j[t])||void 0===p?void 0:p.retail_unit_price)?null===(m=j[t])||void 0===m?void 0:m.retail_unit_price:"",className:"form-control",placeholder:"Retail Unit Price",onChange:function(e){return P["retail_unit_price_"+t]="",A(Object(C.a)({},P)),e.target.value?parseFloat(e.target.value)<0?(P["retail_unit_price_"+t]="Retail Unit Price should not be < 0",j[t].retail_unit_price="",x(Object(i.a)(j)),A(Object(C.a)({},P)),void console.log("errors:",P)):(console.log("e.target.value:",e.target.value),j[t].retail_unit_price=parseFloat(e.target.value),console.log("productStores[index].retail_unit_price:",j[t].retail_unit_price),void x(Object(i.a)(j))):(j[t].retail_unit_price="",void x(Object(i.a)(j)))}})," ",P["retail_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P["retail_unit_price_"+t]]}),!(null===(O=j[t])||void 0===O?void 0:O.retail_unit_price)&&0!==(null===(f=j[t])||void 0===f?void 0:f.retail_unit_price)||P["retail_unit_price_"+t]?null:Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("td",{style:{width:"150px"},children:[Object(T.jsx)("input",{value:(null===(_=j[t])||void 0===_?void 0:_.stock)||0===(null===(g=j[t])||void 0===g?void 0:g.stock)?j[t].stock:"",type:"number",onChange:function(e){if(P["stock_"+t]="",A(Object(C.a)({},P)),!e.target.value)return j[t].stock="",void x(Object(i.a)(j));j[t].stock=parseFloat(e.target.value)},className:"form-control",id:"stock",placeholder:"Stock"}),P["stock_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P["stock_"+t]]}),!(null===(v=j[t])||void 0===v?void 0:v.stock)&&0!==(null===(y=j[t])||void 0===y?void 0:y.stock)||P["stock_"+t]?null:Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]},t)}))})]})}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:c||"",type:"file",onChange:function(e){if(P.image="",A(Object(C.a)({},P)),!e.target.value)return P.image="Invalid Image File",void A(Object(C.a)({},P));c=e.target.value,r(c);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){V.images_content[0]=e,G(Object(C.a)({},V)),console.log("formData.images_content[0]:",V.images_content[0])}))},i.src=n},className:"form-control",id:"image"}),P.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),P.image]}),V.image&&!P.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:Y,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:ce,children:E?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0})+" Processing...":V.id?"Update":"Create"})]})]})})]})]})})),rt=ct,it=a(383),ot=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get User");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of User #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Admin:"}),Object(T.jsxs)("td",{children:[" ",c.admin]}),Object(T.jsx)("th",{children:"E-mail:"}),Object(T.jsxs)("td",{children:[" ",c.email]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Mob:"}),Object(T.jsxs)("td",{children:[" ",c.mob]}),Object(T.jsx)("th",{children:"Password:"}),Object(T.jsx)("td",{children:" ***********"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),lt=ot,dt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){O={},v({}),e&&function(e){console.log("inside get User");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:p.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),i=n.result,console.log("Response:"),console.log(i),O={id:i.id,name:i.name,email:i.email,mob:i.mob,log:""},!0===i.admin?O.admin=!0:O.admin=!1,console.log("From Server:",O),v(Object(C.a)({},O));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),S(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],p=new h.a,x=Object(s.useState)({admin:!1}),m=Object(o.a)(x,2),O=m[0],v=m[1],y=Object(s.useState)(!1),N=Object(o.a)(y,2),w=N[0],S=N[1];function k(){S(!1)}function D(t){t.preventDefault(),console.log("Inside handle Create");var a="/v1/user",s="POST";O.id&&(a="/v1/user/"+O.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:p.get("access_token")},body:JSON.stringify(O)};console.log("sending formData:",O),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("User Created Successfully!","success"),e.refreshList&&e.refreshList(),k(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating User!","danger")}))}return Object(s.useEffect)((function(){p.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:w,size:"lg",onHide:k,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:O.id?"Update User #"+O.name:"Create New User"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[O.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openDetailsView(O.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:D,children:[d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",O.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:D,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name?O.name:"",type:"text",onChange:function(e){c.name="",r(Object(C.a)({},c)),O.name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name1",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),O.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsx)(it.a.Check,{type:"switch",as:"input",id:"admin",label:"Admin",value:O.admin,checked:!0===O.admin?"checked":"",onChange:function(e){O.admin=!O.admin,console.log("formData.admin:",O.admin),v(Object(C.a)({},O))}})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Email*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.email?O.email:"",type:"text",onChange:function(e){c.email="",O.email=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"email1",placeholder:"Email"}),c.email&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),O.email&&!c.email&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Password*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.password?O.password:"",type:"password",onChange:function(e){c.password="",O.password=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"password1",placeholder:"Password"}),c.password&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.password]}),O.password&&!c.password&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Mob*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.mob?O.mob:"",type:"text",onChange:function(e){c.mob="",r(Object(C.a)({},c)),O.mob=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"mob1",placeholder:"Mob"}),c.mob&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.mob]}),O.mob&&!c.mob&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:k,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",type:"submit",children:d?Object(T.jsx)(g.a,{as:"span",animation:"buser",size:"sm",role:"status","aria-hidden":!0})+" Creating...":O.id?"Update":"Create"})]})]})})]})})})),jt=dt,ut=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Signature #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsxs)("div",{children:["Signature:",Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+c.signature+"?"+Date.now(),style:{width:100,height:80}},"https://startpos-api-test.startuptech.uk"+c.signature)]})]})]})})})),bt=ut,ht=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){O={},v(Object(C.a)({},O)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:p.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),(i=n.result).signature="",v(Object(C.a)({},i));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),S(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],p=new h.a,x=Object(s.useState)({}),m=Object(o.a)(x,2),O=m[0],v=m[1],y=Object(s.useState)(!1),N=Object(o.a)(y,2),w=N[0],S=N[1];function k(){S(!1)}function D(t){t.preventDefault(),console.log("Inside handle Create"),O.vat_percent?O.vat_percent=parseFloat(O.vat_percent):O.vat_percent=null,console.log("formData.logo:",O.logo);var a="/v1/signature",s="POST";O.id&&(a="/v1/signature/"+O.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:p.get("access_token")},body:JSON.stringify(O)};console.log("formData:",O),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Signature Created Successfully!","success"),e.refreshList&&e.refreshList(),k(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Signature!","danger")}))}return Object(s.useEffect)((function(){p.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:w,size:"lg",onHide:k,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:O.id?"Update Signature #"+O.name:"Create New Signature"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[O.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openDetailsView(O.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:D,children:[d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",O.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:D,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name?O.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),O.name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),O.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Signature*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.signature?O.signature:"",type:"file",onChange:function(e){if(c.signature_content="",r(Object(C.a)({},c)),!e.target.value)return c.signature_content="Invalid Signature File",void r(Object(C.a)({},c));O.signature=e.target.value;var t=document.querySelector("#signature").files[0],a=100,s=80,n=URL.createObjectURL(t),i=new Image;i.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(i.width,i.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){O.signature_content=e,v(Object(C.a)({},O)),console.log("formData.logo_content:",O.logo_content)}))},i.src=n},className:"form-control",id:"signature"}),c.signature_content&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.signature_content]}),O.signature_content&&!c.signature_content&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:k,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:D,children:d?Object(T.jsx)(g.a,{as:"span",animation:"bsignature",size:"sm",role:"status","aria-hidden":!0})+" Processing...":O.id?"Update":"Create"})]})]})})]})})})),pt=ht,xt=a(115),mt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){S={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"delivered",price_type:"retail",delivery_days:7,validity_days:2},ue=[],be([]),L=[],I([]),Y=[],J([]),ve=[],ye([]),[],De([]),Nt(),v.get("user_id")&&(ve=[{id:v.get("user_id"),name:v.get("user_name")}],S.delivered_by=v.get("user_id"),k(Object(C.a)({},S)),ye(Object(i.a)(ve))),v.get("store_id")&&(S.store_id=v.get("store_id"),S.store_name=v.get("store_name")),k(Object(C.a)({},S)),e&&function(e){console.log("inside get Quotation");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}};fetch("/v1/quotation/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),o=n.result,(S={id:o.id,code:o.code,store_id:o.store_id,customer_id:o.customer_id,date:o.date,vat_percent:o.vat_percent,discount:o.discount,discount_percent:o.discount_percent,status:o.status,delivered_by:o.delivered_by,delivered_by_signature_id:o.delivered_by_signature_id,is_discount_percent:o.is_discount_percent,shipping_handling_fees:o.shipping_handling_fees,delivery_days:o.delivery_days?o.delivery_days:7,validity_days:o.validity_days?o.validity_days:2}).date_str=n.result.date,S.is_discount_percent?S.discountValue=S.discount_percent:S.discountValue=S.discount,ue=o.products,be(Object(i.a)(ue)),l=[{id:o.store_id,name:o.store_name}],d=[{id:o.customer_id,name:o.customer_name,search_label:o.customer_name}],j=[{id:o.delivered_by,name:o.delivered_by_name}],o.delivered_by_signature_id&&(b=[{id:o.delivered_by_signature_id,name:o.delivered_by_signature_name}],De([].concat(b))),ye([].concat(j)),I([].concat(l)),J([].concat(d)),k(Object(C.a)({},S)),Nt();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){m(!1),r(e)}))}(e),Le(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-order.123");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],m=d[1],v=new h.a,y=Object(s.useState)({vat_percent:15,discount:0,discountValue:0,discount_percent:0,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"created",price_type:"retail",is_discount_percent:!1,validity_days:2,delivery_days:7}),w=Object(o.a)(y,2),S=w[0],k=w[1],D=Object(s.useState)([]),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)([]),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)(!1),U=Object(o.a)(E,2),B=U[0],q=U[1],V=Object(s.useState)([]),H=Object(o.a)(V,2),G=H[0],Q=H[1],Z=Object(s.useState)([]),K=Object(o.a)(Z,2),Y=K[0],J=K[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=(oe[1],Object(s.useState)([])),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)([]),fe=Object(o.a)(Oe,2),_e=(fe[0],fe[1],Object(s.useState)([])),ge=Object(o.a)(_e,2),ve=ge[0],ye=ge[1],Ne=Object(s.useState)(!1),Ce=Object(o.a)(Ne,2),we=(Ce[0],Ce[1],Object(s.useState)([])),Se=Object(o.a)(we,2),ke=(Se[0],Se[1],Object(s.useState)([])),Te=Object(o.a)(ke,2),De=(Te[0],Te[1]),Fe=Object(s.useState)(!1),Me=Object(o.a)(Fe,2),Re=(Me[0],Me[1],Object(s.useState)(!1)),Pe=Object(o.a)(Re,2),Ae=Pe[0],Le=Pe[1];function Ie(){Le(!1)}function Ee(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function ze(){return(ze=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),R([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ee({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},"select=id,name",q(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,R(c.result),q(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return(Ue=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),Q([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ee({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",ae(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,Q(c.result),ae(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){v.get("access_token")||(window.location="/")}));var Be=Object(s.useState)(!1),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1];function Ge(){return(Ge=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),re([]),console.log("searchTerm:"+t),t){e.next=8;break}return Ve=!1,He(!1),me(!1),e.abrupt("return");case 8:return a={name:t},v.get("store_id")&&(a.store_id=v.get("store_id")),""!==(s=Ee(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},"select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic",me(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return Ve=!1,He(!1),me(!1),e.abrupt("return");case 27:Ve=!0,He(!0),re(i),me(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.barcode=t,k(Object(C.a)({},S)),console.log("Inside getProductByBarCode"),c.bar_code="",r(Object(C.a)({},c)),console.log("barcode:"+S.barcode),S.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===S.barcode.length&&(S.barcode=S.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:v.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+S.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(i=n.result)?Ze(i):(c.bar_code="Invalid Barcode:"+S.barcode,r(Object(C.a)({},c))),S.barcode="",k(Object(C.a)({},S));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",ue),S.products=[];for(var a=0;a<ue.length;a++)S.products.push({product_id:ue[a].product_id,name:ue[a].name,name_in_arabic:ue[a].name_in_arabic,quantity:parseFloat(ue[a].quantity),unit_price:parseFloat(ue[a].unit_price),purchase_unit_price:parseFloat(ue[a].purchase_unit_price),unit:ue[a].unit,part_number:ue[a].part_number});S.discount=parseFloat(S.discount),S.discount_percent=parseFloat(S.discount_percent),S.vat_percent=parseFloat(S.vat_percent),v.get("store_id")&&(S.store_id=v.get("store_id")),console.log("formData.discount:",S.discount);var s="/v1/quotation",n="POST";S.id&&(s="/v1/quotation/"+S.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:v.get("access_token")},body:JSON.stringify(S)};console.log("formData:",S),m(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),m(!1),console.log("Response:"),console.log(c),e.showToastMessage("Quotation Created Successfully!","success"),e.refreshList&&e.refreshList(),Ie(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){m(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Quotation!","danger")}))}function Ze(e){var t,a;if(console.log("Inside Add product"),!S.store_id)return c.product_id="Please Select a Store and try again",void r(Object(C.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(C.a)({},c));!function(e,t){if(!t)return"";for(var a=0;a<t.length;a++)if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("productStores[i].retail_unit_price:",t[a].retail_unit_price),t[a];console.log("not matched")}(S.store_id,e.stores);e.unit_price=null===(t=e.product_stores[S.store_id])||void 0===t?void 0:t.retail_unit_price,e.purchase_unit_price=null===(a=e.product_stores[S.store_id])||void 0===a?void 0:a.purchase_unit_price;var s=!1,n=-1,o=0;if(e.quantity=1,!function(e){for(var t=0;t<ue.length;t++)if(ue[t].product_id===e)return!0;return!1}(e.id)?o=parseFloat(e.quantity):(s=!0,n=function(e){for(var t=0;t<ue.length;t++)if(ue[t].product_id===e)return t;return!1}(e.id),o=parseFloat(ue[n].quantity+e.quantity)),console.log("quantity:",o),c.quantity="",s&&(ue[n].quantity=parseFloat(o)),!s){var l={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,product_stores:e.product_stores,unit:e.unit};e.unit_price&&(l.unit_price=parseFloat(e.unit_price),console.log("item.unit_price:",l.unit_price)),e.purchase_unit_price&&(l.purchase_unit_price=parseFloat(e.purchase_unit_price),console.log("item.purchase_unit_price",l.purchase_unit_price)),ue.push(l)}console.log("selectedProducts:",ue),be(Object(i.a)(ue)),Nt()}var Ke=Object(s.useState)(0),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1];var $e=Object(s.useState)(7),tt=Object(o.a)($e,2),at=tt[0],st=tt[1],nt=Object(s.useState)(2),ct=Object(o.a)(nt,2),it=ct[0],ot=ct[1],lt=Object(s.useState)(0),dt=Object(o.a)(lt,2),ut=dt[0],bt=dt[1];var ht=Object(s.useState)(0),mt=Object(o.a)(ht,2),Ot=mt[0],ft=mt[1];var _t=Object(s.useState)(0),gt=Object(o.a)(_t,2),vt=gt[0],yt=gt[1];function Nt(){!function(){Ye=0;for(var e=0;e<ue.length;e++)Ye+=parseFloat(ue[e].unit_price)*parseFloat(ue[e].quantity);Ye=Ye.toFixed(2),Je(Ye)}(),S.is_discount_percent?S.discount_percent>=0&&Ye>0&&(S.discount=parseFloat(Ye*parseFloat(S.discount_percent/100)).toFixed(2),k(Object(C.a)({},S))):S.discount>=0&&Ye>0&&(vt=parseFloat(100*parseFloat(S.discount/Ye)).toFixed(2),yt(vt),S.discount_percent=vt,k(Object(C.a)({},S))),ut=0,Ye>0&&(ut=(parseFloat(parseFloat(S.vat_percent)/100)*(parseFloat(Ye)+parseFloat(S.shipping_handling_fees)-parseFloat(S.discount))).toFixed(2),console.log("vatPrice:",ut)),bt(ut),Ot=0,Ye>0&&(Ot=(parseFloat(Ye)+parseFloat(S.shipping_handling_fees)-parseFloat(S.discount)+parseFloat(ut)).toFixed(2)),ft(Ot)}var Ct=Object(s.useRef)();var wt=Object(s.useRef)();var St=Object(s.useRef)();function kt(){St.current.open()}var Tt=Object(s.useRef)();var Dt=Object(s.useRef)();var Ft=Object(s.useRef)();function Mt(e){Ft.current.open(e)}var Rt=Object(s.useRef)();function Pt(){var e={};(e=JSON.parse(JSON.stringify(S))).products=ue,e.net_total=Ot,e.vat_price=ut,e.total=Ye,Rt.current.open(e)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(et,{ref:Ft,openUpdateForm:function(e){St.current.open(e)},openCreateForm:kt}),Object(T.jsx)(rt,{ref:St,showToastMessage:e.showToastMessage,openDetailsView:Mt}),Object(T.jsx)(z,{ref:Rt}),Object(T.jsx)(W,{ref:Ct,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:wt,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Tt,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:Dt,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:Ae,size:"xl",fullscreen:!0,onHide:Ie,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:S.id?"Update Quotation #"+S.code:"Create New Quotation"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:Pt,children:[Object(T.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:Pt,children:[Object(T.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0 \xa0\xa0 \xa0\xa0",S.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){Ie(),e.openDetailsView(S.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:Qe,children:[j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",S.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:Ie,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(c).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:c&&Object.keys(c).map((function(e,t){return c[e]?Object(T.jsx)("li",{style:{color:"red"},children:c[e]}):""}))})}):"",Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:Qe,children:[v.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:B,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),S.store_id="",k(Object(C.a)({},S)),void I([]);S.store_id=e[0].id,k(Object(C.a)({},S)),I(e)},options:M,placeholder:"Select Store",selected:L,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ze.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){Ct.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]}),S.store_id&&!c.store_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",isLoading:te,isInvalid:!!c.customer_id,onChange:function(e){if(c.customer_id="",r(c),0===e.length)return c.customer_id="Invalid Customer selected",r(c),S.customer_id="",k(Object(C.a)({},S)),void J([]);S.customer_id=e[0].id,k(Object(C.a)({},S)),J(e)},options:G,placeholder:"Type name or mob",selected:Y,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ue.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){wt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.customer_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.customer_id]}),S.customer_id&&!c.customer_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(xt.DebounceInput,{minLength:3,debounceTimeout:500,placeholder:"Scan Barcode",className:"form-control barcode",value:S.barcode,onChange:function(e){return function(e){return We.apply(this,arguments)}(e.target.value)}}),c.bar_code&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.bar_code]}),S.bar_code&&!c.bar_code&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-12",children:[Object(T.jsx)("label",{className:"form-label",children:"Product*"}),Object(T.jsx)(p.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Ve,isLoading:xe,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(C.a)({},c)),S.store_id&&Ze(e[0]),He(!1)},options:ce,selected:le,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ge.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:kt,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):null,le[0]&&le[0].id&&!c.product_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(T.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(T.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(T.jsx)("th",{style:{width:"34%"},className:"text-start",children:"Name"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Qty"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Purchase Unit Price"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Unit Price"}),Object(T.jsx)("th",{style:{width:"15%"},children:"Price"})]})}),Object(T.jsx)("tbody",{children:ue.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=ue.indexOf(e);t>-1&&ue.splice(t,1),be(Object(i.a)(ue)),Nt()}(e)},children:Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){Mt(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(T.jsxs)("td",{style:{width:"155px"},children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(C.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be > 0",ue[t].quantity=a.target.value,be(Object(i.a)(ue)),r(Object(C.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),Nt(),ue[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",ue[t].quantity),be(Object(i.a)(ue)),void Nt()):(c["quantity_"+t]="Invalid Quantity",ue[t].quantity=a.target.value,be(Object(i.a)(ue)),r(Object(C.a)({},c)),void console.log("errors:",c))}}),Object(T.jsxs)("span",{className:"input-group-text",id:"basic-addon2",children:[" ",ue[t].unit?ue[t].unit:"Units"]})]}),c["quantity_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]}),Object(T.jsx)("td",{style:{width:"150px"},children:e.purchase_unit_price?Object(T.jsx)(N.a,{value:e.purchase_unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}}):""}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.unit_price,className:"form-control",placeholder:"Unit Price",onChange:function(e){return c["unit_price_"+t]="",r(Object(C.a)({},c)),e.target.value?0===parseFloat(e.target.value)?(c["unit_price_"+t]="Unit Price shoudl be > 0",ue[t].unit_price=parseFloat(e.target.value),be(Object(i.a)(ue)),r(Object(C.a)({},c)),void console.log("errors:",c)):(ue[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",ue[t].unit_price),be(Object(i.a)(ue)),void Nt()):(c["unit_price_"+t]="Invalid Unit Price",ue[t].unit_price=parseFloat(e.target.value),be(Object(i.a)(ue)),r(Object(C.a)({},c)),void console.log("errors:",c))}}),Object(T.jsx)("span",{className:"input-group-text",id:"basic-addon2"})]}),c["unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["unit_price_"+t]]})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(T.jsx)("div",{className:"table-responsive",children:Object(T.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",style:{width:"200px"},children:Object(T.jsx)(N.a,{value:Ye,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:S.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(S.shipping_handling_fees=parseFloat(e.target.value),k(Object(C.a)({},S)),c.shipping_handling_fees="",r(Object(C.a)({},c)),void Nt()):parseFloat(e.target.value)<0?(S.shipping_handling_fees=parseFloat(e.target.value),k(Object(C.a)({},S)),c.shipping_handling_fees="Shipping / Handling Fees should be > 0",r(Object(C.a)({},c)),void Nt()):e.target.value?(c.shipping_handling_fees="",r(Object(C.a)({},c)),S.shipping_handling_fees=parseFloat(e.target.value),k(Object(C.a)({},S)),void Nt()):(S.shipping_handling_fees="",c.shipping_handling_fees="Invalid Shipping / Handling Fees",k(Object(C.a)({},S)),void r(Object(C.a)({},c)))}})," ",c.shipping_handling_fees&&Object(T.jsx)("div",{style:{color:"red"},children:c.shipping_handling_fees})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount"," ",Object(T.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:S.discount_percent,onChange:function(e){return S.is_discount_percent=!0,0===parseFloat(e.target.value)?(S.discount_percent=parseFloat(e.target.value),k(Object(C.a)({},S)),c.discount_percent="",r(Object(C.a)({},c)),void Nt()):parseFloat(e.target.value)<0?(S.discount_percent=parseFloat(e.target.value),S.discount=0,k(Object(C.a)({},S)),c.discount_percent="Discount percent should be >= 0",r(Object(C.a)({},c)),void Nt()):e.target.value?(c.discount_percent="",c.discount="",r(Object(C.a)({},c)),S.discount_percent=parseFloat(e.target.value),k(Object(C.a)({},S)),void Nt()):(S.discount_percent="",S.discount=0,c.discount_percent="Invalid Discount Percent",k(Object(C.a)({},S)),void r(Object(C.a)({},c)))}}),"%",c.discount_percent&&Object(T.jsx)("div",{style:{color:"red"},children:c.discount_percent})]}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:S.discount,onChange:function(e){return S.is_discount_percent=!1,0===parseFloat(e.target.value)?(S.discount=parseFloat(e.target.value),k(Object(C.a)({},S)),c.discount="",r(Object(C.a)({},c)),void Nt()):parseFloat(e.target.value)<0?(S.discount=parseFloat(e.target.value),S.discount_percent=0,k(Object(C.a)({},S)),c.discount="Discount should be >= 0",r(Object(C.a)({},c)),void Nt()):e.target.value?(c.discount="",c.discount_percent="",r(Object(C.a)({},c)),S.discount=parseFloat(e.target.value),k(Object(C.a)({},S)),void Nt()):(S.discount="",S.discount_percent=0,c.discount="Invalid Discount",k(Object(C.a)({},S)),Nt(),void r(Object(C.a)({},c)))}})," ",c.discount&&Object(T.jsx)("div",{style:{color:"red"},children:c.discount})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:[" ","VAT"," ",Object(T.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:S.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(S.vat_percent=parseFloat(e.target.value),k(Object(C.a)({},S)),c.vat_percent="",r(Object(C.a)({},c)),void Nt()):parseFloat(e.target.value)<0?(S.vat_percent=parseFloat(e.target.value),bt(ut=0),k(Object(C.a)({},S)),c.vat_percent="Vat percent should be >= 0",r(Object(C.a)({},c)),void Nt()):e.target.value?(c.vat_percent="",r(Object(C.a)({},c)),S.vat_percent=e.target.value,Nt(),k(Object(C.a)({},S)),void console.log(S)):(S.vat_percent="",bt(ut=0),c.vat_percent="Invalid vat percent",k(Object(C.a)({},S)),void r(Object(C.a)({},c)))}}),"%",c.vat_percent&&Object(T.jsx)("div",{style:{color:"red"},children:c.vat_percent})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:ut,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:Ot,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})})}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Status*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:S.status,onChange:function(e){if(console.log("Inside onchange status"),!e.target.value)return S.status="",k(Object(C.a)({},S)),c.status="Invalid Status",void r(Object(C.a)({},c));c.status="",r(Object(C.a)({},c)),S.status=e.target.value,k(Object(C.a)({},S)),console.log(S)},className:"form-control",children:[Object(T.jsx)("option",{value:"created",children:"Created"}),Object(T.jsx)("option",{value:"delivered",children:"Delivered"}),Object(T.jsx)("option",{value:"pending",children:"Pending"}),Object(T.jsx)("option",{value:"accepted",children:"Accepted"}),Object(T.jsx)("option",{value:"rejected",children:"Rejected"}),Object(T.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),c.status&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.status]}),S.status&&!c.status&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:S.date_str?new Date(S.date_str):null,value:S.date_str?Object(x.default)(new Date(S.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),S.date_str=e,k(Object(C.a)({},S))}}),c.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Validity (# of Days)*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:S.validity_days,onChange:function(e){return console.log("Inside onchange validity days"),e.target.value?parseInt(e.target.value)<=0?(S.validity_days=parseInt(e.target.value),ot(it),k(Object(C.a)({},S)),c.validity_days="Validity days should be > 0",void r(Object(C.a)({},c))):(c.validity_days="",r(Object(C.a)({},c)),S.validity_days=parseInt(e.target.value),k(Object(C.a)({},S)),it=S.validity_days,ot(S.validity_days),void console.log(S)):(S.validity_days=null,c.validity_days="Validity days are required",k(Object(C.a)({},S)),void r(Object(C.a)({},c)))}}),c.validity_days&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.validity_days]}),S.validity_days>0&&S.validity_days&&!c.validity_days&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Delivery (# of Days)*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:S.delivery_days,onChange:function(e){return console.log("Inside onchange delivery days"),e.target.value?parseInt(e.target.value)<=0?(S.delivery_days=parseInt(e.target.value),st(at),k(Object(C.a)({},S)),c.delivery_days="Delivery days should be > 0",void r(Object(C.a)({},c))):(c.delivery_days="",r(Object(C.a)({},c)),S.delivery_days=parseInt(e.target.value),k(Object(C.a)({},S)),at=S.delivery_days,st(S.delivery_days),void console.log(S)):(S.delivery_days=null,c.delivery_days="Delivery days are required",k(Object(C.a)({},S)),void r(Object(C.a)({},c)))}}),c.delivery_days&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.delivery_days]}),S.delivery_days>0&&S.delivery_days&&!c.delivery_days&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:Ie,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:Qe,children:j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Processing...":S.id?"Update":"Create"})]})]})]})]})]})})),Ot=mt;var ft=function(e){var t=new h.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(0),f=Object(o.a)(m,2),v=f[0],C=f[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(5),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(1),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(0),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(0),J=Object(o.a)(Y,2),$=J[0],ee=J[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=new Date,ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(!1),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(""),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(""),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)(""),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)(!1),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)(!1),Be=Object(o.a)(ze,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)([]),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1],Ze=Object(s.useState)([]),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Ye=Ke[1],Je=Object(s.useState)([]),$e=Object(o.a)(Je,2),et=$e[0],tt=$e[1],at=Object(s.useState)([]),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)([]),it=Object(o.a)(rt,2),ot=it[0],lt=it[1];Object(s.useEffect)((function(){Tt()}),[]);var dt=Object(s.useState)({}),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)("created_at"),pt=Object(o.a)(ht,2),xt=pt[0],mt=pt[1],ft=Object(s.useState)("-"),_t=Object(o.a)(ft,2),gt=_t[0],vt=_t[1];function yt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Nt(){return(Nt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=yt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){return(Ct=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),Qe([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=yt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,tt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e,t){ut[e]=t,E(I=1),Tt()}function St(e,t){if(!t)return I=1,ut[e]="",E(I),void Tt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(de(t),he(""),Oe(""),ut.from_date="",ut.to_date="",ut[e]=t,console.log("Value:",t)):"from_date"===e?(he(t),de(""),ut.date="",ut[e]=t):"to_date"===e?(Oe(t),de(""),ut.date="",ut[e]=t):"created_at"===e&&(we(t),De(""),Pe(""),ut.created_at_from="",ut.created_at_to="",ut[e]=t),"created_at_from"===e?(De(t),we(""),ut.created_at="",ut[e]=t):"created_at_to"===e&&(Pe(t),we(""),ut.created_at="",ut[e]=t),E(I=1),Tt()}function kt(e,t){"created_by"===e?ct(t):"customer_id"===e?Ye(t):"status"===e&&lt(t),ut[e]=Object.values(t).map((function(e){return e.id})).join(","),E(I=1),Tt()}function Tt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(ut.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();ut.timezone_offset=parseFloat(a/60),bt(ut);var s=yt(ut);""!==s&&(s="&"+s),Ee(!0),fetch("/v1/quotation?select=id,code,date,net_total,created_by_name,customer_name,status,created_at,profit,loss"+s+"&sort="+gt+xt+"&page="+I+"&limit="+R,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:Ee(!1),Ve(!1),D(n.result),o=parseInt((n.total_count+R-1)/R),q(o),W(n.total_count),ee((I-1)*R),X(n.result.length),c=n.meta.total_quotation,r(c),d=n.meta.profit,j(d),v=n.meta.loss,C(v);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ee(!1),Ve(!1),console.log(e)}))}function Dt(e){mt(xt=e),vt(gt="-"===gt?"":"-"),Tt()}function Ft(e){I=parseInt(e),E(I),Tt()}function Mt(e){At.current.open(e)}var Rt=Object(s.useRef)();function Pt(e){Rt.current.open(e)}var At=Object(s.useRef)();function Lt(){At.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ot,{ref:At,refreshList:Tt,showToastMessage:e.showToastMessage,openDetailsView:Pt}),Object(T.jsx)(Ue,{ref:Rt,openUpdateForm:Mt,openCreateForm:Lt}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Quotation: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Expected Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:d,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Expected Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:v,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Quotations"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Lt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===G&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Quotations to display"})})}),Object(T.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Ve(!0),Tt()},variant:"primary",disabled:qe,children:[qe?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:G>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:R,onChange:function(e){var t;t=e.target.value,R=parseInt(t),P(R),Tt()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{border:"solid 0px"},children:B?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ft(e.selected+1)},pageRangeDisplayed:5,pageCount:B,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:I-1}):""})}),Object(T.jsx)("div",{className:"row",children:G>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",$+1,"-",$+K," of"," ",G]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",I," of ",B]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("code")},children:["ID","code"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("date")},children:["Date","date"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("net_total")},children:["Net Total","net_total"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("profit")},children:["Expected Profit","profit"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"profit"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("loss")},children:["Expected Loss","loss"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"loss"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("created_by")},children:["Created By","created_by"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("customer_name")},children:["Customer","customer_name"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("status")},children:["Status","status"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"status"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Dt("created_at")},children:["Created At","created_at"===xt&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===xt&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return wt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:le,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return de(""),void St("date_str","");St("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ce(!ne)},children:ne?"Less..":"More.."}),Object(T.jsx)("br",{}),ne?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:be,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void St("from_date","");St("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:me,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void St("to_date","");St("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return wt("net_total",e.target.value)},className:"form-control"})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"profit",onChange:function(e){return wt("profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"loss",onChange:function(e){return wt("loss",e.target.value)},className:"form-control"})}):"",Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){kt("created_by",e)},options:et,placeholder:"Select Users",selected:nt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ct.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){kt("customer_id",e)},options:We,placeholder:"name or mob",selected:Xe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Nt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"status",labelKey:"name",onChange:function(e){kt("status",e)},options:[{id:"sent",name:"Sent"},{id:"pending",name:"Pending"},{id:"accepted",name:"Accepted"},{id:"rejected",name:"Rejected"},{id:"cancelled",name:"Cancelled"},{id:"deleted",name:"Deleted"}],placeholder:"Select Status",selected:ot,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Ce,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return we(""),void St("created_at","");St("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ve(!ge)},children:ge?"Less..":"More.."}),Object(T.jsx)("br",{}),ge?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:Te,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return De(""),void St("created_at_from","");St("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:Re,selected:re,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Pe(""),void St("created_at_to","");St("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:k&&k.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.net_total," "]}),"true"===t.get("admin")?Object(T.jsxs)("td",{children:[e.profit?e.profit:0," "]}):"","true"===t.get("admin")?Object(T.jsxs)("td",{children:[e.loss?e.loss:0," "]}):"",Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:Object(T.jsx)("span",{className:"badge bg-success",children:e.status})}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Mt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Pt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)("button",{className:"btn btn-default btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Download",children:Object(T.jsx)("i",{className:"bi bi-download"})}),Object(T.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(T.jsx)("ul",{className:"dropdown-menu",children:Object(T.jsx)("li",{children:Object(T.jsxs)("a",{href:"/",className:"dropdown-item",children:[Object(T.jsx)("i",{className:"bi bi-download"}),"Download"]})})})]})]},e.code)}))})]})}),B?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ft(e.selected+1)},pageRangeDisplayed:5,pageCount:B,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:I-1}):""]})})})})]})]})},_t=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){N={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,is_discount_percent:!1,date_str:Object(x.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"delivered",price_type:"retail"},le=[],de([]),P=[],A([]),Q=[],Z([]),fe=[],_e([]),[],Se([]),ut(),O.get("user_id")&&(fe=[{id:O.get("user_id"),name:O.get("user_name")}],N.delivered_by=O.get("user_id"),w(Object(C.a)({},N)),_e(Object(i.a)(fe))),O.get("store_id")&&(N.store_id=O.get("store_id"),N.store_name=O.get("store_name")),w(Object(C.a)({},N)),e&&function(e){console.log("inside get DeliveryNote");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}};fetch("/v1/delivery-note/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),o=n.result,(N={id:o.id,code:o.code,store_id:o.store_id,customer_id:o.customer_id,date_str:o.date_str,date:o.date,vat_percent:o.vat_percent,discount:o.discount,discount_percent:o.discount_percent,status:o.status,delivered_by:o.delivered_by,delivered_by_signature_id:o.delivered_by_signature_id,is_discount_percent:o.is_discount_percent,shipping_handling_fees:o.shipping_handling_fees}).is_discount_percent?N.discountValue=N.discount_percent:N.discountValue=N.discount,le=o.products,de(Object(i.a)(le)),l=[{id:o.store_id,name:o.store_name}],d=[{id:o.customer_id,name:o.customer_name,search_label:o.customer_name}],j=[{id:o.delivered_by,name:o.delivered_by_name}],o.delivered_by_signature_id&&(b=[{id:o.delivered_by_signature_id,name:o.delivered_by_signature_name}],Se([].concat(b))),_e([].concat(j)),A([].concat(l)),Z([].concat(d)),w(Object(C.a)({},N)),ut();case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){m(!1),r(e)}))}(e),Re(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],m=d[1],O=new h.a,v=Object(s.useState)({vat_percent:15,discount:0,discountValue:0,discount_percent:0,date_str:Object(x.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"created",price_type:"retail",is_discount_percent:!1}),y=Object(o.a)(v,2),N=y[0],w=y[1],S=Object(s.useState)([]),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(!1),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)([]),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)([]),G=Object(o.a)(H,2),Q=G[0],Z=G[1],K=Object(s.useState)(!1),Y=Object(o.a)(K,2),J=Y[0],$=Y[1],ee=Object(s.useState)([]),te=Object(o.a)(ee,2),ae=te[0],se=te[1],ne=Object(s.useState)([]),ce=Object(o.a)(ne,2),re=ce[0],ie=(ce[1],Object(s.useState)([])),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=(xe[0],xe[1],Object(s.useState)([])),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1],ge=Object(s.useState)(!1),ve=Object(o.a)(ge,2),ye=(ve[0],ve[1],Object(s.useState)([])),Ne=Object(o.a)(ye,2),Ce=(Ne[0],Ne[1],Object(s.useState)([])),we=Object(o.a)(Ce,2),Se=(we[0],we[1]),ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),De=(Te[0],Te[1],Object(s.useState)(!1)),Fe=Object(o.a)(De,2),Me=Fe[0],Re=Fe[1];function Pe(){Re(!1)}function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),F([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,name",z(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,F(c.result),z(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),V([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",$(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,V(c.result),$(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){O.get("access_token")||(window.location="/")}));var Ee=Object(s.useState)(!1),ze=Object(o.a)(Ee,2),Ue=ze[0],Be=ze[1];function qe(){return(qe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),se([]),console.log("searchTerm:"+t),t){e.next=8;break}return Ue=!1,Be(!1),he(!1),e.abrupt("return");case 8:return a={name:t},O.get("store_id")&&(a.store_id=O.get("store_id")),""!==(s=Ae(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic",he(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return Ue=!1,Be(!1),he(!1),e.abrupt("return");case 27:Ue=!0,Be(!0),se(i),he(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return(Ve=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.barcode=t,w(Object(C.a)({},N)),console.log("Inside getProductByBarCode"),c.bar_code="",r(Object(C.a)({},c)),console.log("barcode:"+N.barcode),N.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===N.barcode.length&&(N.barcode=N.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:O.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+N.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(i=n.result)?We(i):(c.bar_code="Invalid Barcode:"+N.barcode,r(Object(C.a)({},c))),N.barcode="",w(Object(C.a)({},N));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",le),N.products=[];for(var a=0;a<le.length;a++)N.products.push({product_id:le[a].product_id,name:le[a].name,name_in_arabic:le[a].name_in_arabic,quantity:parseFloat(le[a].quantity),unit_price:parseFloat(le[a].unit_price),purchase_unit_price:parseFloat(le[a].purchase_unit_price),unit:le[a].unit,part_number:le[a].part_number});N.discount=parseFloat(N.discount),N.discount_percent=parseFloat(N.discount_percent),N.vat_percent=parseFloat(N.vat_percent),O.get("store_id")&&(N.store_id=O.get("store_id")),console.log("formData.discount:",N.discount);var s="/v1/delivery-note",n="POST";N.id&&(s="/v1/delivery-note/"+N.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:O.get("access_token")},body:JSON.stringify(N)};console.log("formData:",N),m(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),m(!1),console.log("Response:"),console.log(c),e.showToastMessage("DeliveryNote Created Successfully!","success"),e.refreshList&&e.refreshList(),Pe(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){m(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating DeliveryNote!","danger")}))}function We(e){if(console.log("Inside Add product"),!N.store_id)return c.product_id="Please Select a Store and try again",void r(Object(C.a)({},c));if(c.product_id="",!e)return c.product_id="Invalid Product",void r(Object(C.a)({},c));var t=function(e,t){if(!t)return"";for(var a=0;a<t.length;a++)if(console.log("productStores[i]:",t[a]),console.log("store_id:",e),t[a].store_id===e)return console.log("macthed"),console.log("productStores[i].retail_unit_price:",t[a].retail_unit_price),t[a];return console.log("not matched"),""}(N.store_id,e.stores);e.unit_price=t.retail_unit_price,e.purchase_unit_price=t.purchase_unit_price;var a=!1,s=-1,n=0;if(e.quantity=1,!function(e){for(var t=0;t<le.length;t++)if(le[t].product_id===e)return!0;return!1}(e.id)?n=parseFloat(e.quantity):(a=!0,s=function(e){for(var t=0;t<le.length;t++)if(le[t].product_id===e)return t;return!1}(e.id),n=parseFloat(le[s].quantity+e.quantity)),console.log("quantity:",n),c.quantity="",a&&(le[s].quantity=parseFloat(n)),!a){var o={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,stores:e.stores,unit:e.unit};e.unit_price&&(o.unit_price=parseFloat(e.unit_price),console.log("item.unit_price:",o.unit_price)),e.purchase_unit_price&&(o.purchase_unit_price=parseFloat(e.purchase_unit_price),console.log("item.purchase_unit_price",o.purchase_unit_price)),le.push(o)}console.log("selectedProducts:",le),de(Object(i.a)(le)),ut()}var Qe=Object(s.useState)(0),Ze=Object(o.a)(Qe,2),Ke=Ze[0],Xe=Ze[1];var Ye=Object(s.useState)(0),Je=Object(o.a)(Ye,2),$e=Je[0],tt=Je[1];var at=Object(s.useState)(0),st=Object(o.a)(at,2),nt=st[0],ct=st[1];var it=Object(s.useState)(0),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1];function ut(){!function(){Ke=0;for(var e=0;e<le.length;e++)Ke+=parseFloat(le[e].unit_price)*parseFloat(le[e].quantity);Ke=Ke.toFixed(2),Xe(Ke)}(),N.is_discount_percent?N.discount_percent>=0&&Ke>0&&(N.discount=parseFloat(Ke*parseFloat(N.discount_percent/100)).toFixed(2),w(Object(C.a)({},N))):N.discount>=0&&Ke>0&&(lt=parseFloat(100*parseFloat(N.discount/Ke)).toFixed(2),dt(lt),N.discount_percent=lt,w(Object(C.a)({},N))),$e=0,Ke>0&&($e=(parseFloat(parseFloat(N.vat_percent)/100)*(parseFloat(Ke)+parseFloat(N.shipping_handling_fees)-parseFloat(N.discount))).toFixed(2),console.log("vatPrice:",$e)),tt($e),nt=0,Ke>0&&(nt=(parseFloat(Ke)+parseFloat(N.shipping_handling_fees)-parseFloat(N.discount)+parseFloat($e)).toFixed(2)),ct(nt)}var bt=Object(s.useRef)();var ht=Object(s.useRef)();var mt=Object(s.useRef)();function Ot(){mt.current.open()}var ft=Object(s.useRef)();var _t=Object(s.useRef)();var gt=Object(s.useRef)();function vt(e){gt.current.open(e)}var yt=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(et,{ref:gt,openUpdateForm:function(e){mt.current.open(e)},openCreateForm:Ot}),Object(T.jsx)(rt,{ref:mt,showToastMessage:e.showToastMessage,openDetailsView:vt}),Object(T.jsx)(Ge,{ref:yt}),Object(T.jsx)(W,{ref:bt,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:ht,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:ft,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:_t,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:Me,size:"xl",fullscreen:!0,onHide:Pe,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:N.id?"Update DeliveryNote #"+N.code:"Create New DeliveryNote"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){var e={};(e=JSON.parse(JSON.stringify(N))).products=le,e.net_total=nt,e.vat_price=$e,e.total=Ke,yt.current.open(e)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," Preview"]}),"\xa0\xa0 \xa0\xa0 \xa0\xa0",N.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){Pe(),e.openDetailsView(N.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:He,children:[j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",N.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:Pe,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(c).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:c&&Object.keys(c).map((function(e,t){return c[e]?Object(T.jsx)("li",{style:{color:"red"},children:c[e]}):""}))})}):"",Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:He,children:[O.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:E,isInvalid:!!c.store_id,onChange:function(e){if(c.store_id="",r(c),0===e.length)return c.store_id="Invalid Store selected",r(c),N.store_id="",w(Object(C.a)({},N)),void A([]);N.store_id=e[0].id,w(Object(C.a)({},N)),A(e)},options:D,placeholder:"Select Store",selected:P,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){bt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),c.store_id]}),N.store_id&&!c.store_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",isLoading:J,isInvalid:!!c.customer_id,onChange:function(e){if(c.customer_id="",r(c),0===e.length)return c.customer_id="Invalid Customer selected",r(c),N.customer_id="",w(Object(C.a)({},N)),void Z([]);N.customer_id=e[0].id,w(Object(C.a)({},N)),Z(e)},options:q,placeholder:"Type name or mob",selected:Q,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ie.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){ht.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.customer_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.customer_id]}),N.customer_id&&!c.customer_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(xt.DebounceInput,{minLength:3,debounceTimeout:500,placeholder:"Scan Barcode",className:"form-control",value:N.barcode,onChange:function(e){return function(e){return Ve.apply(this,arguments)}(e.target.value)}}),c.bar_code&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.bar_code]}),N.bar_code&&!c.bar_code&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-12",children:[Object(T.jsx)("label",{className:"form-label",children:"Product*"}),Object(T.jsx)(p.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Ue,isLoading:be,isInvalid:!!c.product_id,onChange:function(e){if(0===e.length)return c.product_id="Invalid Product selected",void r(c);c.product_id="",r(Object(C.a)({},c)),N.store_id&&We(e[0]),Be(!1)},options:ae,selected:re,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){qe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:Ot,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),c.product_id?Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.product_id]}):null,re[0]&&re[0].id&&!c.product_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(T.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(T.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(T.jsx)("th",{style:{width:"34%"},className:"text-start",children:"Name"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Qty"})]})}),Object(T.jsx)("tbody",{children:le.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=le.indexOf(e);t>-1&&le.splice(t,1),de(Object(i.a)(le)),ut()}(e)},children:Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){vt(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(T.jsxs)("td",{style:{width:"155px"},children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return c["quantity_"+t]="",r(Object(C.a)({},c)),a.target.value?0===parseFloat(a.target.value)?(c["quantity_"+t]="Quantity should be > 0",le[t].quantity=a.target.value,de(Object(i.a)(le)),r(Object(C.a)({},c)),void console.log("errors:",c)):(e.quantity=parseFloat(a.target.value),ut(),le[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",le[t].quantity),de(Object(i.a)(le)),void ut()):(c["quantity_"+t]="Invalid Quantity",le[t].quantity=a.target.value,de(Object(i.a)(le)),r(Object(C.a)({},c)),void console.log("errors:",c))}}),Object(T.jsxs)("span",{className:"input-group-text",id:"basic-addon2",children:[" ",le[t].unit?le[t].unit:"Units"]})]}),c["quantity_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c["quantity_"+t]]})]})]},t)})).reverse()})]})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:Pe,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:He,children:j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Processing...":N.id?"Update":"Create"})]})]})]})]})]})})),gt=_t;var vt=function(e){var t=new h.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(0),f=Object(o.a)(m,2),v=f[0],N=f[1],C=Object(s.useState)([]),w=Object(o.a)(C,2),S=w[0],k=w[1],D=Object(s.useState)(5),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(1),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)(0),z=Object(o.a)(E,2),U=z[0],B=z[1],q=Object(s.useState)(0),V=Object(o.a)(q,2),H=V[0],G=V[1],W=Object(s.useState)(0),Q=Object(o.a)(W,2),Z=Q[0],K=Q[1],X=Object(s.useState)(0),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(!1),te=Object(o.a)(ee,2),ae=(te[0],te[1],new Date),se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=(ne[0],ne[1]),re=Object(s.useState)(""),ie=Object(o.a)(re,2),oe=(ie[0],ie[1]),le=Object(s.useState)(""),de=Object(o.a)(le,2),je=(de[0],de[1]),ue=Object(s.useState)(!1),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)(""),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(""),ge=Object(o.a)(_e,2),ve=ge[0],ye=ge[1],Ne=Object(s.useState)(""),Ce=Object(o.a)(Ne,2),we=Ce[0],Se=Ce[1],ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),De=Te[0],Fe=Te[1],Me=Object(s.useState)(!1),Re=Object(o.a)(Me,2),Pe=Re[0],Ae=Re[1],Le=Object(s.useState)([]),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Ue=Object(s.useState)([]),Be=Object(o.a)(Ue,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)([]),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1],Ze=Object(s.useState)([]),Ke=Object(o.a)(Ze,2),Ye=Ke[0],Je=Ke[1],$e=Object(s.useState)([]),et=Object(o.a)($e,2),tt=(et[0],et[1]);Object(s.useEffect)((function(){ft()}),[]);var at=Object(s.useState)({}),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)("created_at"),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)("-"),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1];function ht(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function pt(){return(pt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=ht({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,ze(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return(xt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),ze([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=ht({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,Qe(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t){if(!t)return L=1,nt[e]="",I(L),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(ce(t),oe(""),je(""),nt.from_date="",nt.to_date="",nt[e]=t,console.log("Value:",t)):"from_date"===e?(oe(t),ce(""),nt.date="",nt[e]=t):"to_date"===e?(je(t),ce(""),nt.date="",nt[e]=t):"created_at"===e&&(fe(t),ye(""),Se(""),nt.created_at_from="",nt.created_at_to="",nt[e]=t),"created_at_from"===e?(ye(t),fe(""),nt.created_at="",nt[e]=t):"created_at_to"===e&&(Se(t),fe(""),nt.created_at="",nt[e]=t),I(L=1),ft()}function Ot(e,t){"created_by"===e?Je(t):"customer_id"===e?Ve(t):"status"===e&&tt(t),nt[e]=Object.values(t).map((function(e){return e.id})).join(","),I(L=1),ft()}function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(nt.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();nt.timezone_offset=parseFloat(a/60),ct(nt);var s=ht(nt);""!==s&&(s="&"+s),Fe(!0),fetch("/v1/delivery-note?select=id,code,created_by_name,customer_name,created_at"+s+"&sort="+ut+ot+"&page="+L+"&limit="+M,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:Fe(!1),Ae(!1),k(n.result),o=parseInt((n.total_count+M-1)/M),B(o),H=n.total_count,G(H),$((L-1)*M),K(n.result.length),c=n.meta.total_deliverynote,r(c),d=n.meta.profit,j(d),v=n.meta.loss,N(v);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Fe(!1),Ae(!1),console.log(e)}))}function _t(e){lt(ot=e),bt(ut="-"===ut?"":"-"),ft()}function vt(e){L=parseInt(e),I(L),ft()}function yt(e){wt.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var wt=Object(s.useRef)();function St(){wt.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(gt,{ref:wt,refreshList:ft,showToastMessage:e.showToastMessage,openDetailsView:Ct}),Object(T.jsx)(Xe,{ref:Nt,openUpdateForm:yt,openCreateForm:St}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col"})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Delivery Notes"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:St,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===H&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Delivery Notes to display"})})}),Object(T.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Ae(!0),ft()},variant:"primary",disabled:Pe,children:[Pe?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:De&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:H>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:M,onChange:function(e){var t;t=e.target.value,M=parseInt(t),R(M),ft()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{border:"solid 0px"},children:U?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:U,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:L-1}):""})}),Object(T.jsx)("div",{className:"row",children:H>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",J+1,"-",J+Z," of"," ",H]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",L," of ",U]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("code")},children:["ID","code"===ot&&"-"===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ot&&""===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("customer_name")},children:["Customer","customer_name"===ot&&"-"===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===ot&&""===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by")},children:["Created By","created_by"===ot&&"-"===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===ot&&""===ut?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===ot&&"-"===ut?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ot&&""===ut?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return t="code",a=e.target.value,nt[t]=a,I(L=1),void ft();var t,a},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){Ot("customer_id",e)},options:Ee,placeholder:"name or mob",selected:qe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){Ot("created_by",e)},options:We,placeholder:"Select Users",selected:Ye,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Oe,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){mt("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return pe(!he)},children:he?"Less..":"More.."}),Object(T.jsx)("br",{}),he?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ve,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){mt("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:we,selected:ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){mt("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:S&&S.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)("ul",{className:"dropdown-menu"})]})]},e.code)}))})]})}),U?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){vt(e.selected+1)},pageRangeDisplayed:5,pageCount:U,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:L-1}):""]})})})})]})]})},yt=(a(562),Object(s.forwardRef)((function(e,t){var a,n,c,r,l;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){m={},g(Object(C.a)({},m)),Oe=[],fe([]),U=[],B([]),ee=[],te([]),k.get("user_id")&&(ke=[{id:k.get("user_id"),name:k.get("user_name")}],M.delivered_by=k.get("user_id"),R(Object(C.a)({},M)),Te(Object(i.a)(ke))),k.get("store_id")&&(M.store_id=k.get("store_id"),M.store_name=k.get("store_name"),M.vat_percent=parseFloat(k.get("vat_percent")),console.log("formData.store_id:",M.store_id)),M.id=void 0,M.discount=0,M.discount_percent=0,M.shipping_handling_fees=0,M.partial_payment_amount=0,M.cash_discount=0,M.payment_method="",M.payment_status="",M.code="",M.net_total=0,M.date_str=new Date,M.payments_input=[{date_str:M.date_str,amount:0,method:"",deleted:!1}],M.cash_discount=0,e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}};fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(g({}),console.log("Response:"),console.log(n),(M=n.result).date_str=n.result.date,n.result.payments)for(console.log("data.result.payments:",n.result.payments),M.payments_input=n.result.payments,r=0;r<(null===(o=M.payments_input)||void 0===o?void 0:o.length);r++)M.payments_input[r].date_str=M.payments_input[r].date;M.is_discount_percent?M.discountValue=M.discount_percent:M.discountValue=M.discount,Oe=M.products,fe(Object(i.a)(Oe)),l=[{id:M.store_id,name:M.store_name}],d=M.customer_name,j=[{id:M.customer_id,name:M.customer_name,search_label:d}],B([].concat(l)),te([].concat(j)),vt(),R(Object(C.a)({},M));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){S(!1),g(e)}))}(e),R(Object(C.a)({},M)),vt(),Be(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-order.123");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var d=Object(s.useState)({payment_amount:[]}),j=Object(o.a)(d,2),m=j[0],g=j[1],v=Object(s.useState)(!1),y=Object(o.a)(v,2),w=y[0],S=y[1],k=new h.a,D=Object(s.useState)({vat_percent:15,discountValue:0,discount:0,discount_percent:0,cash_discount:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"delivered",payment_status:"",payment_method:"",price_type:"retail",useLaserScanner:!1,store_id:""}),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)([]),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)([]),z=Object(o.a)(E,2),U=z[0],B=z[1],q=Object(s.useState)(!1),V=Object(o.a)(q,2),H=V[0],G=V[1],Q=Object(s.useState)([]),Z=Object(o.a)(Q,2),K=Z[0],Y=Z[1],J=Object(s.useState)([]),$=Object(o.a)(J,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ce=se[0],re=se[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),de=oe[0],je=oe[1],ue=Object(s.useState)([]),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)([]),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(!1),ge=Object(o.a)(_e,2),ve=ge[0],ye=ge[1],Ne=Object(s.useState)([]),Ce=Object(o.a)(Ne,2),we=(Ce[0],Ce[1],Object(s.useState)([])),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)(!1),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1],Object(s.useState)([])),Re=Object(o.a)(Me,2),Pe=(Re[0],Re[1],Object(s.useState)([])),Ae=Object(o.a)(Pe,2),Le=(Ae[0],Ae[1],Object(s.useState)(!1)),Ie=Object(o.a)(Le,2),Ee=(Ie[0],Ie[1],Object(s.useState)(!1)),ze=Object(o.a)(Ee,2),Ue=ze[0],Be=ze[1];function qe(){Be(!1)}function Ve(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function He(){return(He=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),I([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ve({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}},"select=id,name",G(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,I(c.result),G(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),Y([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=Ve({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",re(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,Y(c.result),re(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){k.get("access_token")||(window.location="/")}));var We=Object(s.useState)(!1),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1];function Xe(){return(Xe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),je([]),console.log("searchTerm:"+t),t){e.next=7;break}return Ze=!1,Ke(!1),e.abrupt("return");case 7:return a={name:t},k.get("store_id")&&(a.store_id=k.get("store_id")),""!==(s=Ve(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}},"select=id,item_code,bar_code,part_number,name,unit,part_number,name_in_arabic,product_stores",ye(!0),e.next=16,fetch("/v1/product?select=id,item_code,bar_code,part_number,name,unit,part_number,name_in_arabic,product_stores"+s+"&limit=200",n);case 16:return c=e.sent,e.next=19,c.json();case 19:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=26;break}return Ze=!1,Ke(!1),ye(!1),e.abrupt("return");case 26:Ze=!0,Ke(!0),je(i),ye(!1);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M.barcode=t,R(Object(C.a)({},M)),console.log("Inside getProductByBarCode"),m.bar_code="",g(Object(C.a)({},m)),console.log("barcode:"+M.barcode),M.barcode){e.next=8;break}return e.abrupt("return");case 8:return 13===M.barcode.length&&(M.barcode=M.barcode.slice(0,-1)),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}},"select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",e.next=13,fetch("/v1/product/barcode/"+M.barcode+"?select=id,item_code,bar_code,ean_12,part_number,name,product_stores,unit,part_number,name_in_arabic",a);case 13:return s=e.sent,e.next=16,s.json();case 16:n=e.sent,(c=n.result)?$e(c):(m.bar_code="Invalid Barcode:"+M.barcode,g(Object(C.a)({},m))),M.barcode="",R(Object(C.a)({},M));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(t){t.preventDefault();var a=!1;M.cash_discount||(M.cash_discount=0),M.products=[];for(var s=0;s<Oe.length;s++)M.products.push({product_id:Oe[s].product_id,quantity:parseFloat(Oe[s].quantity),unit_price:parseFloat(Oe[s].unit_price),unit:Oe[s].unit});if(m.products="",g(Object(C.a)({},m)),0===M.products.length&&(m.products="No products added",g(Object(C.a)({},m)),a=!0),Vt()||(console.log("Errors on payments"),a=!0),M.shipping_handling_fees||0===M.shipping_handling_fees||(m.shipping_handling_fees="Invalid shipping / handling fees",g(Object(C.a)({},m)),a=!0),M.discount||0===M.discount||(m.discount="Invalid discount",g(Object(C.a)({},m)),a=!0),M.discount_percent||0===M.discount_percent||(m.discount_percent="Invalid discount percent",g(Object(C.a)({},m)),a=!0),parseFloat(M.discount_percent)>100&&(m.discount_percent="Discount percent cannot be > 100",g(Object(C.a)({},m)),a=!0),M.vat_percent||0===M.vat_percent||(m.vat_percent="Invalid vat percent",g(Object(C.a)({},m)),a=!0),a)console.log("Errors: ",m);else{M.discount=parseFloat(M.discount),M.discount_percent=parseFloat(M.discount_percent),M.vat_percent=parseFloat(M.vat_percent),M.net_total=parseFloat(bt),k.get("store_id")&&(M.store_id=k.get("store_id"));var n="/v1/order",c="POST";M.id&&(n="/v1/order/"+M.id,c="PUT");var r={method:c,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:k.get("access_token")},body:JSON.stringify(M)};console.log("formData:",M),S(!0),fetch(n,r).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:g({}),S(!1),console.log("Response:"),console.log(c),e.showToastMessage("Order Created Successfully!","success"),e.refreshList&&e.refreshList(),qe(),M.products=[],Oe=[],fe([]),M.customer_id="",te([]),R(Object(C.a)({},M)),vt(),i=c.result.id,yt.current.open(i);case 25:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){S(!1),console.log("Inside catch"),console.log(t),g(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Order!","danger")}))}}function $e(e){if(console.log("Inside Add product"),!M.store_id)return m.product_id="Please Select a Store and try again",void g(Object(C.a)({},m));if(m.product_id="",!e)return m.product_id="Invalid Product",void g(Object(C.a)({},m));if(e.product_stores[M.store_id]&&(e.unit_price=e.product_stores[M.store_id].retail_unit_price,e.purchase_unit_price=e.product_stores[M.store_id].purchase_unit_price),m.unit_price="",!e.unit_price)return m.unit_price="Invalid Unit Price",void g(Object(C.a)({},m));var t=!1,a=!1,s=0;e.quantity=1,!function(e){for(var t=0;t<Oe.length;t++)if(Oe[t].product_id===e)return!0;return!1}(e.id)?s=parseFloat(e.quantity):(t=!0,a=function(e){for(var t=0;t<Oe.length;t++)if(Oe[t].product_id===e)return t;return!1}(e.id),s=parseFloat(Oe[a].quantity+e.quantity)),console.log("quantity:",s),m.quantity="";var n=0;e.product_stores[M.store_id]&&(n=e.product_stores[M.store_id].stock),n<s&&(!1===a&&(a=Oe.length),m["quantity_"+a]="Warning: Available stock is "+n,console.log("errors:",m),g(Object(C.a)({},m))),t&&(Oe[a].quantity=parseFloat(s)),t||Oe.push({product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,product_stores:e.product_stores,unit_price:parseFloat(e.unit_price).toFixed(2),unit:e.unit,purchase_unit_price:parseFloat(e.purchase_unit_price).toFixed(2)}),fe(Object(i.a)(Oe)),vt()}var tt=Object(s.useState)(0),at=Object(o.a)(tt,2),st=at[0],nt=at[1];var ct=Object(s.useState)(0),it=Object(o.a)(ct,2),ot=it[0],lt=it[1];var dt=Object(s.useState)(0),ut=Object(o.a)(dt,2),bt=ut[0],ht=ut[1];function mt(){if(bt=0,st>0&&(bt=parseFloat(st)+parseFloat(M.shipping_handling_fees)-parseFloat(M.discount)+parseFloat(ot),bt=parseFloat(bt)),bt=function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}(bt,2),ht(bt),!M.id){var e="";if(M.payments_input[0]&&(e=M.payments_input[0].method),M.payments_input=[{date_str:M.date_str,amount:0,method:e,deleted:!1}],bt>0){var t;if(M.payments_input[0].amount=parseFloat(bt.toFixed(2)),M.cash_discount)M.payments_input[0].amount=M.payments_input[0].amount-parseFloat(null===(t=M.cash_discount)||void 0===t?void 0:t.toFixed(2));M.payments_input[0].amount=parseFloat(M.payments_input[0].amount.toFixed(2))}}R(Object(C.a)({},M)),Vt()}var Ot=Object(s.useState)(0),ft=Object(o.a)(Ot,2),_t=ft[0],gt=ft[1];function vt(){!function(){st=0;for(var e=0;e<Oe.length;e++)st+=parseFloat(Oe[e].unit_price)*parseFloat(Oe[e].quantity);nt(st)}(),M.is_discount_percent?M.discount_percent>=0&&st>0&&(M.discount=parseFloat(st*parseFloat(M.discount_percent/100)),R(Object(C.a)({},M))):M.discount>=0&&st>0&&(_t=parseFloat(100*parseFloat(M.discount/st)),gt(_t),M.discount_percent=_t,R(Object(C.a)({},M))),ot=0,st>0&&(console.log("formData.vat_percent:",M.vat_percent),ot=parseFloat(M.vat_percent)/100*(parseFloat(st)+parseFloat(M.shipping_handling_fees)-parseFloat(M.discount)),console.log("vatPrice:",ot)),lt(ot),mt()}var yt=Object(s.useRef)();var Nt=Object(s.useRef)();var Ct=Object(s.useRef)();var wt=Object(s.useRef)();var St=Object(s.useRef)();var kt=Object(s.useRef)();var Tt=Object(s.useRef)();function Dt(){for(var e,t,a=0,s=0;s<(null===(n=M.payments_input)||void 0===n?void 0:n.length);s++){var n;M.payments_input[s].amount&&!M.payments_input[s].deleted&&(a+=M.payments_input[s].amount)}return Rt=a,console.log("totalPaymentAmount:",Rt),Pt(Rt),console.log("totalPayment:",a),It=parseFloat(bt.toFixed(2))-parseFloat(null===(e=parseFloat(M.cash_discount))||void 0===e?void 0:e.toFixed(2))-parseFloat(a.toFixed(2)),It=parseFloat(It.toFixed(2)),Et(It),It===parseFloat((parseFloat(bt.toFixed(2))-parseFloat(null===(t=parseFloat(M.cash_discount))||void 0===t?void 0:t.toFixed(2))).toFixed(2))?Bt="not_paid":It<=0?Bt="paid":It>0&&(Bt="paid_partially"),qt(Bt),a}var Ft=Object(s.useState)(0),Mt=Object(o.a)(Ft,2),Rt=Mt[0],Pt=Mt[1],At=Object(s.useState)(0),Lt=Object(o.a)(At,2),It=Lt[0],Et=Lt[1],zt=Object(s.useState)(""),Ut=Object(o.a)(zt,2),Bt=Ut[0],qt=Ut[1];function Vt(){console.log("validatePaymentAmount: netTotal:",bt),m.cash_discount="",g(Object(C.a)({},m));var e=!1;if(!bt)return!0;if(M.cash_discount>0&&M.cash_discount>=bt)return m.cash_discount="Cash discount should not be >= "+bt.toFixed(2).toString(),g(Object(C.a)({},m)),e=!0,!1;Dt();for(var t=0;t<M.payments_input.length;t++)m["payment_amount_"+t]="",m["payment_date_"+t]="",m["payment_method_"+t]="",g(Object(C.a)({},m)),M.payments_input[t].amount?0===M.payments_input[t].amount&&(m["payment_amount_"+t]="Amount should be greater than zero",g(Object(C.a)({},m)),e=!0):(m["payment_amount_"+t]="Payment amount is required",g(Object(C.a)({},m)),e=!0),M.payments_input[t].date_str||(m["payment_date_"+t]="Payment date is required",g(Object(C.a)({},m)),e=!0),M.payments_input[t].method||(m["payment_method_"+t]="Payment method is required",g(Object(C.a)({},m)),e=!0),(M.payments_input[t].amount||0===M.payments_input[t].amount)&&M.payments_input[t].deleted;return!e}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(le,{ref:yt,openCreateForm:e.openCreateForm}),Object(T.jsx)(et,{ref:Tt}),Object(T.jsx)(W,{ref:Nt,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:Ct,showToastMessage:e.showToastMessage}),Object(T.jsx)(rt,{ref:wt,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:St,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:kt,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:Ue,size:"xl",fullscreen:!0,onHide:qe,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:M.id?"Update Sales Order #"+M.code:"Create New Sales Order"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsx)(ne,{}),Object(T.jsx)(_.a,{variant:"primary",onClick:Je,children:w?M.id?"Updating....":"Creating..":M.id?"Update":"Create"}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:qe,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(m).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:m&&Object.keys(m).map((function(e,t){return console.log("Key",e),Array.isArray(m[e])?m[e][0]?Object(T.jsx)("li",{style:{color:"red"},children:m[e]}):"":m[e]?Object(T.jsx)("li",{style:{color:"red"},children:m[e]}):""}))})}):"",Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:function(e){e.preventDefault(),Je(e)},children:[k.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:H,isInvalid:!!m.store_id,onChange:function(e){if(m.store_id="",m.product_id="",g(m),0===e.length)return m.store_id="Invalid Store selected",g(m),R(Object(C.a)({},M)),void B([]);if(M.store_id=e[0].id,R(Object(C.a)({},M)),console.log("formData.store_id:",M.store_id),U=e,B(Object(i.a)(e)),M.store_id){if(he[0]&&he[0].product_stores&&he[0].quantity){var t=0;he[0].product_stores&&he[0].product_stores[M.store_id]&&(t=he[0].product_stores[M.store_id].stock),t<parseFloat(he[0].quantity)&&(U[0]?m.product_id="Stock is only "+t+" in Store: "+U[0].name+" for this product":m.product_id="Stock is only "+t+" in Selected Store for this product",g(Object(C.a)({},m)))}else if(he[0]&&he[0].product_stores){var a=0;he[0].product_stores[M.store_id]&&(a=he[0].product_stores[M.store_id].stock),0===a&&(U[0]?m.product_id="This product is not available in store: "+U[0].name:m.product_id="This product is not available in selected store.",g(Object(C.a)({},m)))}he[0]&&(he[0].product_stores[M.store_id]&&(he[0].unit_price=he[0].product_stores[M.store_id].retail_unit_price),he[0].quantity||(he[0].quantity=1),pe(Object(i.a)(he)))}},options:L,placeholder:"Select Store",selected:U,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){He.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){Nt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),m.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",style:{border:"solid 0px"},children:[Object(T.jsx)("label",{className:"form-label",children:"Customer*"}),Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",isLoading:ce,isInvalid:!!m.customer_id,onChange:function(e){if(m.customer_id="",g(m),0===e.length)return m.customer_id="Invalid Customer selected",g(m),M.customer_id="",R(Object(C.a)({},M)),void te([]);M.customer_id=e[0].id,R(Object(C.a)({},M)),te(e)},options:K,placeholder:"Type name or mob",selected:ee,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ge.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){Ct.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),m.customer_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.customer_id]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Product Barcode Scan"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(xt.DebounceInput,{minLength:3,debounceTimeout:100,placeholder:"Scan Barcode",className:"form-control barcode",value:M.barcode,onChange:function(e){return function(e){return Ye.apply(this,arguments)}(e.target.value)}}),m.bar_code&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.bar_code]})]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:M.date_str?new Date(M.date_str):null,value:M.date_str?Object(x.default)(new Date(M.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),M.date_str=e,R(Object(C.a)({},M))}}),m.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-12",children:[Object(T.jsx)("label",{className:"form-label",children:"Product Search*"}),Object(T.jsx)(p.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Ze,isLoading:ve,isInvalid:!!m.product_id,onChange:function(e){if(0===e.length)return m.product_id="Invalid Product selected",void g(m);m.product_id="",g(Object(C.a)({},m)),M.store_id&&$e(e[0]),Ke(!1)},options:de,selected:he,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Xe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){wt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),m.product_id?Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.product_id]}):""]}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{style:{width:"3%"},children:"Remove"}),Object(T.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(T.jsx)("th",{style:{width:"10%"},children:"Part No."}),Object(T.jsx)("th",{style:{width:"33%"},className:"text-start",children:"Name"}),Object(T.jsx)("th",{style:{width:"10%"},children:"Purchase Unit Price"}),Object(T.jsx)("th",{style:{width:"10%"},children:"Qty"}),Object(T.jsx)("th",{style:{width:"10%"},children:"Unit Price"}),Object(T.jsx)("th",{style:{width:"32%"},children:"Price"})]})}),Object(T.jsx)("tbody",{children:Oe.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){var t=Oe.indexOf(e);if(e.quantity_returned>0)return m["product_"+t]="This product cannot be removed as it is returned, Note: Please remove the product from sales return and try again",void g(Object(C.a)({},m));t>-1&&Oe.splice(t,1),fe(Object(i.a)(Oe)),vt()}(e)},children:Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){var t;t=e.product_id,Tt.current.open(t)},children:[e.name,m["product_"+t]&&Object(T.jsx)("div",{style:{color:"red"},children:m["product_"+t]})]}),Object(T.jsx)("td",{children:e.purchase_unit_price?e.purchase_unit_price:"Not set"}),Object(T.jsxs)("td",{children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control text-end",placeholder:"Quantity",onChange:function(a){if(m["quantity_"+t]="",g(Object(C.a)({},m)),!a.target.value)return m["quantity_"+t]="Invalid Quantity",Oe[t].quantity=a.target.value,fe(Object(i.a)(Oe)),g(Object(C.a)({},m)),void console.log("errors:",m);if(0===a.target.value)return m["quantity_"+t]="Quantity should be > 0",Oe[t].quantity=a.target.value,fe(Object(i.a)(Oe)),g(Object(C.a)({},m)),void console.log("errors:",m);e.quantity=parseFloat(a.target.value),Oe[t].quantity=parseFloat(a.target.value),vt();var s,n=0;Oe[t].product_stores&&(n=null===(s=Oe[t].product_stores[M.store_id])||void 0===s?void 0:s.stock);if(n<parseFloat(a.target.value)&&Oe[t].product_stores)return m["quantity_"+t]=" Warning: Available stock is "+n,void g(Object(C.a)({},m));Oe[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",Oe[t].quantity),fe(Object(i.a)(Oe)),vt()}}),Object(T.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:Oe[t].unit?Oe[t].unit:"Units"})]}),m["quantity_"+t]&&Object(T.jsx)("div",{style:{color:"red"},children:m["quantity_"+t]})]}),Object(T.jsxs)("td",{children:[Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{type:"number",value:e.unit_price,className:"form-control text-end",placeholder:"Unit Price",onChange:function(e){return m["unit_price_"+t]="",g(Object(C.a)({},m)),e.target.value?0===e.target.value?(m["unit_price_"+t]="Unit Price should be > 0",Oe[t].unit_price=parseFloat(e.target.value),fe(Object(i.a)(Oe)),g(Object(C.a)({},m)),void console.log("errors:",m)):(Oe[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",Oe[t].unit_price),fe(Object(i.a)(Oe)),void vt()):(m["unit_price_"+t]="Invalid Unit Price",Oe[t].unit_price=parseFloat(e.target.value),fe(Object(i.a)(Oe)),g(Object(C.a)({},m)),void console.log("errors:",m))}})}),m["unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["unit_price_"+t]]})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(T.jsx)("div",{className:"table-responsive",children:Object(T.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",style:{width:"200px"},children:Object(T.jsx)(N.a,{value:null===(a=st)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:M.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(M.shipping_handling_fees=parseFloat(e.target.value),R(Object(C.a)({},M)),m.shipping_handling_fees="",g(Object(C.a)({},m)),void vt()):parseFloat(e.target.value)<0?(M.shipping_handling_fees=parseFloat(e.target.value),R(Object(C.a)({},M)),m.shipping_handling_fees="Shipping / Handling Fees should be > 0",g(Object(C.a)({},m)),void vt()):e.target.value?(m.shipping_handling_fees="",g(Object(C.a)({},m)),M.shipping_handling_fees=parseFloat(e.target.value),R(Object(C.a)({},M)),void vt()):(M.shipping_handling_fees="",m.shipping_handling_fees="Invalid Shipping / Handling Fees",R(Object(C.a)({},M)),void g(Object(C.a)({},m)))}})," ",m.shipping_handling_fees&&Object(T.jsx)("div",{style:{color:"red"},children:m.shipping_handling_fees})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount  ",Object(T.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:M.discount_percent,onChange:function(e){return M.is_discount_percent=!0,0===parseFloat(e.target.value)?(M.discount_percent=parseFloat(e.target.value),R(Object(C.a)({},M)),m.discount_percent="",g(Object(C.a)({},m)),void vt()):parseFloat(e.target.value)<0?(M.discount_percent=parseFloat(e.target.value),M.discount=0,R(Object(C.a)({},M)),m.discount_percent="Discount percent should be >= 0",g(Object(C.a)({},m)),void vt()):e.target.value?(m.discount_percent="",m.discount="",g(Object(C.a)({},m)),M.discount_percent=parseFloat(e.target.value),R(Object(C.a)({},M)),void vt()):(M.discount_percent="",M.discount=0,m.discount_percent="Invalid Discount Percent",R(Object(C.a)({},M)),void g(Object(C.a)({},m)))}}),"%",m.discount_percent&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount_percent})]}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:M.discount,onChange:function(e){return M.is_discount_percent=!1,0===parseFloat(e.target.value)?(M.discount=parseFloat(e.target.value),R(Object(C.a)({},M)),m.discount="",g(Object(C.a)({},m)),void vt()):parseFloat(e.target.value)<0?(M.discount=parseFloat(e.target.value),M.discount_percent=0,R(Object(C.a)({},M)),m.discount="Discount should be >= 0",g(Object(C.a)({},m)),void vt()):e.target.value?(m.discount="",m.discount_percent="",g(Object(C.a)({},m)),M.discount=parseFloat(e.target.value),R(Object(C.a)({},M)),void vt()):(M.discount="",M.discount_percent=0,m.discount="Invalid Discount",R(Object(C.a)({},M)),vt(),void g(Object(C.a)({},m)))}})," ",m.discount&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:[" VAT  ",Object(T.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:M.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(M.vat_percent=parseFloat(e.target.value),R(Object(C.a)({},M)),m.vat_percent="",g(Object(C.a)({},m)),void vt()):parseFloat(e.target.value)<0?(M.vat_percent=parseFloat(e.target.value),lt(ot=0),R(Object(C.a)({},M)),m.vat_percent="Vat percent should be >= 0",g(Object(C.a)({},m)),void vt()):e.target.value?(m.vat_percent="",g(Object(C.a)({},m)),M.vat_percent=e.target.value,vt(),R(Object(C.a)({},M)),void console.log(M)):(M.vat_percent="",lt(ot=0),m.vat_percent="Invalid vat percent",R(Object(C.a)({},M)),void g(Object(C.a)({},m)))}}),"%",m.vat_percent&&Object(T.jsx)("div",{style:{color:"red"},children:m.vat_percent})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=ot)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=bt)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})})}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Cash discount"}),Object(T.jsx)("input",{type:"number",value:M.cash_discount,className:"form-control ",onChange:function(e){return m.cash_discount="",g(Object(C.a)({},m)),e.target.value?(M.cash_discount=parseFloat(e.target.value),M.cash_discount>0&&M.cash_discount>=bt?(m.cash_discount="Cash discount should not be >= "+bt.toString(),void g(Object(C.a)({},m))):(R(Object(C.a)({},M)),Vt(),void console.log(M))):(M.cash_discount=e.target.value,R(Object(C.a)({},M)),void Vt())}}),m.cash_discount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.cash_discount]})]}),Object(T.jsxs)("div",{className:"col-md-8",children:[Object(T.jsx)("label",{className:"form-label",children:"Payments Received"}),Object(T.jsxs)("div",{class:"table-responsive",style:{maxWidth:"900px"},children:[Object(T.jsx)(_.a,{variant:"secondary",style:{alignContent:"right",marginBottom:"10px"},onClick:function(){var e=new Date;M.id||(e=M.date_str),M.payments_input.push({date_str:e,amount:0,method:"",deleted:!1}),R(Object(C.a)({},M)),Vt()},children:"Create new payment"}),Object(T.jsxs)("table",{class:"table table-striped table-sm table-bordered",children:[M.payments_input&&M.payments_input.length>0&&Object(T.jsxs)("thead",{children:[Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment method"}),Object(T.jsx)("th",{children:"Action"})]}),Object(T.jsxs)("tbody",{children:[M.payments_input&&M.payments_input.filter((function(e){return!e.deleted})).map((function(e,t){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{style:{minWidth:"220px"},children:[Object(T.jsx)(O.a,{id:"payment_date_str",selected:M.payments_input[t].date_str?new Date(M.payments_input[t].date_str):null,value:M.payments_input[t].date_str?Object(x.default)(new Date(M.payments_input[t].date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),M.payments_input[t].date_str=e,R(Object(C.a)({},M))}}),m["payment_date_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_date_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"300px"},children:[Object(T.jsx)("input",{type:"number",value:M.payments_input[t].amount,className:"form-control ",onChange:function(e){if(m["payment_amount_"+t]="",g(Object(C.a)({},m)),!e.target.value)return M.payments_input[t].amount=e.target.value,R(Object(C.a)({},M)),void Vt();M.payments_input[t].amount=parseFloat(e.target.value),Vt(),R(Object(C.a)({},M)),console.log(M)}}),m["payment_amount_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_amount_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"200px"},children:[Object(T.jsxs)("select",{value:M.payments_input[t].method,className:"form-control ",onChange:function(e){if(m["payment_method_"+t]="",g(Object(C.a)({},m)),!e.target.value)return m["payment_method_"+t]="Payment method is required",g(Object(C.a)({},m)),M.payments_input[t].method="",void R(Object(C.a)({},M));M.payments_input[t].method=e.target.value,R(Object(C.a)({},M)),console.log(M)},children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]}),m["payment_method_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_method_"+t]]})]}),Object(T.jsx)("td",{style:{width:"200px"},children:Object(T.jsx)(_.a,{variant:"danger",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M.payments_input.splice(e,1),R(Object(C.a)({},M)),t&&Vt(),Dt()}(t)},children:"Remove"})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{class:"text-end",children:Object(T.jsx)("b",{children:"Total"})}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{style:{marginLeft:"14px"},children:null===(r=Rt)||void 0===r?void 0:r.toFixed(2)})}),Object(T.jsx)("td",{children:Object(T.jsxs)("b",{style:{marginLeft:"12px",alignSelf:"end"},children:["Balance: ",null===(l=It)||void 0===l?void 0:l.toFixed(2)]})}),Object(T.jsxs)("td",{colSpan:1,children:[Object(T.jsx)("b",{children:"Payment status: "}),"paid"==Bt?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==Bt?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==Bt?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]})]})]})]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:qe,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:Je,children:w?M.id?"Updating....":"Creating..":M.id?"Update":"Create"})]})]})]})]})]})}))),Nt=yt,Ct=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Sales Payment  of Order #",c.order_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openCreateForm(e.order)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Order ID:"}),Object(T.jsxs)("td",{children:[" ",c.order_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.method]}),Object(T.jsx)("th",{children:"Payment from Account:"}),Object(T.jsxs)("td",{children:[" ",c.pay_from_account]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date :"}),Object(T.jsxs)("td",{children:["  ",c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):""," "]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),wt=Ct,St=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,c(Object(C.a)({},t)),(E={method:""}).date_str=new Date,t&&(E.order_id=t.id,E.order_code=t.code,E.store_id=t.store_id),z(E),M(F=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:N.get("access_token")}};E={},z(Object(C.a)({},E)),F=[],M(Object(i.a)(F)),fetch("/v1/sales-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:j({}),console.log("Response:"),console.log(n),(E=n.result).date_str=n.result.date,console.log("formData:",E),E.parent_id&&(F=[{id:E.parent_id,name:E.parent_name}],M(Object(i.a)(F))),z(Object(C.a)({},E)),console.log("formData:",E);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){y(!1),j(e)}))}(e),d={},j(Object(C.a)({},d)),V(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=(n[0],n[1]);Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var r=Object(s.useState)({}),l=Object(o.a)(r,2),d=l[0],j=l[1],p=Object(s.useState)(!1),m=Object(o.a)(p,2),v=m[0],y=m[1],N=new h.a,w=Object(s.useState)([]),S=Object(o.a)(w,2),k=(S[0],S[1],Object(s.useState)([])),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(!1),P=Object(o.a)(R,2),A=(P[0],P[1]),L=Object(s.useState)({}),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),q=B[0],V=B[1];function H(){V(!1)}function G(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",E.logo),A(!0);var a="/v1/sales-payment",s="POST";if(E.id&&(a="/v1/sales-payment/"+E.id,s="PUT"),E.amount<=0)return d.amount="Amount should be > 0:",void j(Object(C.a)({},d));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:N.get("access_token")},body:JSON.stringify(E)};console.log("formData:",E),y(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:j({}),y(!1),A(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),H(),e.refreshSalesList&&e.refreshSalesList();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){y(!1),A(!1),console.log("Inside catch"),console.log(t),j(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesPayment!","danger")}))}return Object(s.useEffect)((function(){N.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:q,size:"lg",onHide:H,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:E.id?"Update Payment  for sales order#"+E.order_code:"Add Payment  for sales order #"+E.order_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[E.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){H(),e.openDetailsView(E.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:G,children:[v?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",E.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-0 needs-validation",onSubmit:G,children:[Object(T.jsxs)("div",{class:"row",children:[Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:E.amount?E.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(E.amount=e.target.value,d.amount="Amount should be > 0",void j(Object(C.a)({},d))):(E.amount=parseFloat(e.target.value),d.amount="",j(Object(C.a)({},d)),z(Object(C.a)({},E)),void console.log(E)):(E.amount=e.target.value,d.amount="Invalid amount",void j(Object(C.a)({},d)))},className:"form-control",id:"name",placeholder:"Amount"})}),d.amount&&Object(T.jsx)("div",{style:{color:"red"},children:d.amount}),E.amount&&!d.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:E.date_str?new Date(E.date_str):null,value:E.date_str?Object(x.default)(new Date(E.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),E.date_str=e,z(Object(C.a)({},E))}}),d.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),d.date_str]})]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsxs)("select",{value:E.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return d.payment_method="Invalid Payment Method",j(Object(C.a)({},d)),E.method="",void z(Object(C.a)({},E));d.payment_method="",j(Object(C.a)({},d)),E.method=e.target.value,z(Object(C.a)({},E)),console.log(E)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]})}),d.payment_method&&Object(T.jsx)("div",{style:{color:"red"},children:d.payment_method}),E.payment_method&&!d.payment_method&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})}),Object(T.jsx)("div",{className:"row  g-5",children:Object(T.jsx)("div",{className:"col-md-3"})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:H,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:G,children:v?Object(T.jsx)(g.a,{as:"span",animation:"bsalespayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":E.id?"Update":"Create"})]})]})})]})})})),kt=St,Tt=a(107);var Dt=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(1),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1];Object(s.useEffect)((function(){ct()}),[]);var ze=Object(s.useState)({}),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)("-"),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)("created_at"),Ze=Object(o.a)(Qe,2),Ke=Ze[0],Xe=Ze[1];function Ye(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Je(){return(Je=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ye({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t){Be[e]=t,w(C=1),ct()}function et(e,t){if(!t)return C=1,Be[e]="",w(C),void ct();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(Y(t),ae(""),re(""),Be.from_date="",Be.to_date="",Be[e]=t):"from_date"===e?(ae(t),Y(""),Be.date="",Be[e]=t):"to_date"===e?(re(t),Y(""),Be.date="",Be[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),Be.created_at_from="",Be.created_at_to="",Be[e]=t),"created_at_from"===e?(Oe(t),he(""),Be.created_at="",Be[e]=t):"created_at_to"===e&&(ve(t),he(""),Be.created_at="",Be[e]=t),w(C=1),ct()}var tt=Object(s.useState)(!1),at=Object(o.a)(tt,2),st=at[0],nt=at[1];function ct(){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Be.store_id=t.get("store_id")),e.order&&(Be.order_id=e.order.id),console.log("searchParams.store_id:",Be.store_id);var s=(new Date).getTimezoneOffset();Be.timezone_offset=parseFloat(s/60),qe(Be);var n=Ye(Be);""!==n&&(n="&"+n),we(!0),fetch("/v1/sales-payment?select=id,date,amount,method,pay_from_account,store_name,order_code,order_id,created_by_name,created_at,deleted"+n+"&sort="+Ge+Ke+"&page="+C+"&limit="+j,a).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:we(!1),De(!1),i(c.result),console.log("data.result:",c.result),o=parseInt((c.total_count+j-1)/j),F(o),A(c.total_count),V((C-1)*j),z(c.result.length),pt=c.meta.total_payment,xt(pt),e.order&&!st&&(ft=e.order.net_total-e.order.cash_discount-pt,_t(ft),ft==e.order.net_total-e.order.cash_discount?Nt(yt="not_paid"):ft<=0?Nt(yt="paid"):ft>0&&Nt(yt="paid_partially"));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function rt(e){Xe(Ke=e),We(Ge="-"===Ge?"":"-"),ct()}function it(e){C=parseInt(e),w(C),ct()}function ot(e){jt.current.open(e)}var lt=Object(s.useRef)();function dt(e){lt.current.open(e)}var jt=Object(s.useRef)();function ut(){jt.current.open("",e.order)}var bt=Object(s.useState)(0),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)(""),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(Tt.confirm)("Are you sure?");case 3:a=e.sent,console.log(a),a&&St(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function St(a){var s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};fetch("/v1/sales-payment/"+a,s).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:e.showToastMessage("Sales payment deleted successfully!","success"),e.refreshList&&e.refreshList(),e.refreshSalesList&&e.refreshSalesList(),ct();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(kt,{ref:jt,refreshList:ct,showToastMessage:e.showToastMessage,openDetailsView:dt,refreshSalesList:e.refreshSalesList?e.refreshSalesList:""}),Object(T.jsx)(wt,{ref:lt,openUpdateForm:ot,openCreateForm:ut}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:["paid"==yt?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==yt?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==yt?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):"",Object(T.jsxs)("h1",{className:"text-end",children:["Total paid amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),e.order?Object(T.jsxs)("h4",{className:"text-end",children:["Balance amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Sales Payments"})}),Object(T.jsx)("div",{className:"col text-end",children:e.order?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:ut,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===P&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No sales payment s to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bsalespayment:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bsalespayment:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),ct()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bsalespayment",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ct()},className:"form-control pull-right",style:{bsalespayment:"solid 1px",bsalespaymentColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bsalespayment:"solid 0px"},children:D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""})}),Object(T.jsx)("div",{className:"row",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",q+1,"-",q+E," of"," ",P]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",C," of ",D]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("order_code")},children:["Order ID","order_code"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("date")},children:["Date","date"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("amount")},children:["Amount","amount"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("method")},children:["Payment Method","method"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("created_by_name")},children:["Created By","created_by_name"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){rt("created_at")},children:["Created At","created_at"===Ke&&"-"===Ge?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Ke&&""===Ge?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:"Deleted"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return $e("order_code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:X,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void et("date_str","");et("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Q(!W)},children:W?"Less..":"More.."}),Object(T.jsx)("br",{}),W?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void et("from_date","");et("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void et("to_date","");et("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return $e("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return $e("method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&Ee(a),Be[t]=Object.values(a).map((function(e){return e.id})).join(","),w(C=1),ct()},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Je.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void et("created_at","");et("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void et("created_at_from","");et("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ve(""),void et("created_at_to","");et("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsxs)("select",{onChange:function(e){$e("deleted",e.target.value),"1"==e.target.value?nt(st=!0):nt(st=!1)},children:[Object(T.jsx)("option",{value:"0",SELECTED:!0,children:"NO"}),Object(T.jsx)("option",{value:"1",children:"YES"})]})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.order_code}),Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{style:{width:"110px"},children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",disabled:e.deleted,onClick:function(){ot(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",disabled:e.deleted,onClick:function(){dt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)(_.a,{className:"btn btn-danger btn-sm",disabled:e.deleted,onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-trash"})})]}),Object(T.jsx)("td",{children:e.deleted?"YES":"NO"})]},e.id)}))})]})}),D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){it(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""]})})})})]})]})},Ft=Object(s.forwardRef)((function(e,t){var a="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");function s(e){return e.replace(/\d/g,(function(e){return a[parseInt(e)]}))}function n(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 2px",borderColor:"silver",borderRadius:"2mm",padding:"20px",marginTop:t.top+"px",height:"1110px",width:"770px"},children:[Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-left",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:e.model.store?e.model.store.name:"<STORE_NAME>"})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title:"<STORE_TITLE>"}),Object(T.jsxs)("li",{children:["C.R. / ",e.model.store?e.model.store.registration_number:"<STORE_CR_NO>"]}),Object(T.jsxs)("li",{children:["VAT / ",e.model.store?e.model.store.vat_no:"<STORE_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("div",{className:"invoice-logo text-center",children:e.model.store&&e.model.store.logo?Object(T.jsx)("img",{width:"100",height:"100",src:"https://startpos-api-test.startuptech.uk"+e.model.store.logo+"?"+Date.now(),alt:"Invoice logo"}):null})}),Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("ul",{className:"list-unstyled text-end",children:[Object(T.jsx)("li",{children:Object(T.jsx)("h4",{style:{fontSize:"4mm"},children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.name_in_arabic:"<STORE_NAME_ARABIC>"})})}),Object(T.jsx)("li",{children:e.model.store?e.model.store.title_in_arabic:"<STORE_TITLE_ARABIC>"}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.registration_number_in_arabic:"<STORE_CR_NO_ARABIC>"," / \u202b\u062a\u202c.\u202b\u0633\u202c"]}),Object(T.jsxs)("li",{children:[e.model.store?e.model.store.vat_no_in_arabic:"<STORE_VAT_NO_ARABIC>"," / \u202b\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u202c \u202b\u0627\u0644\u0631\u0642\u0645\u202c"]})]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("u",{children:Object(T.jsx)("h1",{className:"text-center",style:{fontSize:"4mm"},children:"SALES RETURN INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"})})})}),Object(T.jsxs)("div",{className:"row table-active",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-start",children:[Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Sales Return: "}),"#",e.model.code?e.model.code:"<ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Sales Return Date: "}),e.model.date?Object(x.default)(new Date(e.model.date),"MMM dd yyyy h:mma"):"<DATE_TIME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Order: "}),"#",e.model.order_code?e.model.order_code:"<ORDER_ID_NUMBER>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"Customer: "}),e.model.customer?e.model.customer.name:"<CUSTOMER_NAME>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"VAT Number: "}),e.model.customer?e.model.customer.vat_no:"<CUSTOMER_VAT_NO>"]})]})}),Object(T.jsx)("div",{className:"col-md-2 text-center",style:{border:"solid 0px",width:"20%",padding:"0px"},children:t.firstPage&&e.model.QRImageData?Object(T.jsx)("img",{className:"text-start",src:e.model.QRImageData,style:{width:"100px",height:"92px"},alt:"Invoice QR Code"}):""}),Object(T.jsx)("div",{className:"col-md-5",style:{border:"solid 0px",width:"40%"},children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-end",children:[Object(T.jsxs)("li",{children:[e.model.code?e.model.code:"<ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0639\u0627\u0626\u062f \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0639\u0648\u062f\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a: "}),e.model.date?n(e.model.date):"<DATE_ARABIC>"]}),Object(T.jsxs)("li",{children:[e.model.order_code?e.model.order_code:"<ORDER_ID_NUMBER_ARABIC>",Object(T.jsx)("strong",{children:" :\u0637\u0644\u0628"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.name_in_arabic:"<CUSTOMER_NAME_ARABIC>"]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0644\u0644\u0639\u0645\u064a\u0644: "}),e.model.customer?e.model.customer.vat_no_in_arabic:"<CUSTOMER_VAT_NO_ARABIC>"]})]})})]}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col text-start",children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("div",{className:"col text-end",children:e.model.total_pages?s(e.model.total_pages.toString())+" \u0627\u0644\u0635\u0641\u062d\u0629 "+s((a+1).toString())+" \u0645\u0646 ":""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("div",{className:"table-responsive",style:{overflow:"hidden",outline:"none"},tabIndex:"0",children:[Object(T.jsxs)("table",{className:"table table-bordered",style:{fontSize:"3mm",bsalesreturnRadius:"6px"},children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0633\u0631\u064a"}),Object(T.jsx)("li",{children:"SI No."})]})}),Object(T.jsx)("th",{className:"per3 text-center",style:{padding:"0px",width:"8%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fonSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u0637\u0639\u0629"}),Object(T.jsx)("li",{children:"Part Number"})]})}),Object(T.jsx)("th",{className:"per68 text-center",style:{padding:"0px",width:"15%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0648\u0635\u0641"}),Object(T.jsx)("li",{children:"Description"})]})}),Object(T.jsx)("th",{className:"per1 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0643\u0645\u064a\u0629"}),Object(T.jsx)("li",{children:"Qty"})]})}),Object(T.jsx)("th",{className:"per10 text-center",style:{padding:"0px",width:"10%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),Object(T.jsx)("li",{children:"Unit Price"})]})}),Object(T.jsx)("th",{className:"per20 text-center",style:{padding:"0px",width:"5%"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),Object(T.jsx)("li",{children:"Total Amount"})]})})]})}),Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:s+1+a*e.model.pageSize}),Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:t.part_number?t.part_number:""}),Object(T.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.name,t.name_in_arabic?"/"+t.name_in_arabic:""]}),Object(T.jsxs)("td",{style:{paddingBottom:"0px",marginTop:"0px"},children:[t.quantity.toFixed(2),"  ",t.unit?t.unit:""]}),Object(T.jsx)("td",{className:"text-end",style:{paddingBottom:"0px",marginTop:"0px"},children:Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{style:{paddingBottom:"0px",marginTop:"0px"},className:"text-end",children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]},t.item_code)}))}),Object(T.jsxs)("tfoot",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639:"}),Object(T.jsx)("li",{children:"Total:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"4",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0636\u0631\u064a\u0628\u0629:"}),Object(T.jsx)("li",{children:"VAT:"})]})}),Object(T.jsxs)("th",{className:"text-center",colSpan:"1",children:[e.model.vat_percent,"%"]}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.vat_price,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062e\u0635\u0645:"}),Object(T.jsx)("li",{children:"Discount:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.discount,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",colSpan:"5",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0627\u0641\u064a:"}),Object(T.jsx)("li",{children:"Net Total:"})]})}),Object(T.jsx)("th",{className:"text-center",colSpan:"2",children:Object(T.jsx)(N.a,{value:e.model.net_total,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"1",className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0628\u0643\u0644\u0645\u0627\u062a:"}),Object(T.jsx)("li",{children:"In Words:"})]})}),Object(T.jsx)("th",{colSpan:"5",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}),Object(T.jsx)("li",{children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"})]})})]})]})]}),Object(T.jsx)("table",{className:"table table-bordered",style:{fontSize:"3mm"},children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0633\u0644\u0645\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"}),Object(T.jsx)("li",{children:"Received By:"})]})}),Object(T.jsxs)("th",{style:{width:"37%"},children:[" ",e.model.received_by_user?e.model.received_by_user.name:null]}),Object(T.jsx)("th",{className:"text-end",style:{width:"13%",padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u0627\u0633\u062a\u0644\u0645\u062a \u0645\u0646 \u0642\u0628\u0644:"}),Object(T.jsx)("li",{children:"Returned By:"})]})}),Object(T.jsx)("th",{style:{width:"37%"}})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{style:{width:"37%",height:"40px"},children:e.model.delivered_by_signature?Object(T.jsx)("img",{alt:"Signature",src:"https://startpos-api-test.startuptech.uk"+e.model.delivered_by_signature.signature+"?"+Date.now(),style:{width:100,height:80}},e.model.delivered_by_signature.signature):null}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u0625\u0645\u0636\u0627\u0621:"}),Object(T.jsx)("li",{children:"Signature:"})]})}),Object(T.jsx)("th",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"20px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",height:"35px",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:e.model.signature_date_str?n(e.model.signature_date_str):""}),Object(T.jsx)("li",{children:e.model.signature_date_str?e.model.signature_date_str:""})]})}),Object(T.jsx)("th",{className:"text-end",style:{padding:"0px"},children:Object(T.jsxs)("ul",{className:"list-unstyled",style:{fontSize:"3mm",marginBottom:"0px"},children:[Object(T.jsx)("li",{children:"\u062a\u0627\u0631\u064a\u062e:"}),Object(T.jsx)("li",{children:"Date:"})]})}),Object(T.jsx)("th",{})]})]})})]})})}),Object(T.jsxs)("div",{className:"row",style:{fontSize:"3mm"},children:[Object(T.jsx)("div",{className:"col-md-2 text-start"}),Object(T.jsx)("div",{className:"col-md-8 text-center",children:Object(T.jsxs)("ul",{className:"list-unstyled mb0 text-center",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.address_in_arabic:"<STORE_ADDRESS_ARABIC>"]})}),Object(T.jsx)("li",{children:Object(T.jsx)("strong",{children:e.model.store?e.model.store.address:"<STORE_ADDRESS>"})}),Object(T.jsxs)("li",{children:["\u0647\u0627\u062a\u0641:",Object(T.jsxs)("b",{children:[" ",e.model.store?e.model.store.phone_in_arabic:"<STORE_PHONE_ARABIC>"]}),", Phone:",Object(T.jsx)("strong",{children:e.model.store?e.model.store.phone:"<STORE_PHONE>"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("strong",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:"}),e.model.store?e.model.store.zipcode_in_arabic:"<STORE_ZIPCODE_ARABIC>",",",Object(T.jsxs)("strong",{children:["Email:",e.model.store?e.model.store.email:"<STORE_EMAIL>"," "]})]})]})})]})]})}))})})),Mt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:r.created_at,invoiceTotal:r.total,invoiceVatTotal:r.vat_price}),e.next=17,l.render();case 17:r.QRImageData=e.sent,i(Object(C.a)({},r));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.received_by&&function(e){console.log("inside get User(Received by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.received_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by),r.received_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.received_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by_signature_id);r.pageSize=12;var t=r.products.length,s=0,n=parseInt(t/12),c=n;parseFloat(t/12)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1,firstPage:!1});for(var d=o;d<t&&(!r.products[d].selected||(r.pages[l].products.push(r.products[d]),12!==r.pages[l].products.length));d++);s+=1057,o+=12,0===l&&(r.pages[l].firstPage=!0),l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){g="",r.code&&(g+="Quotation #: "+r.code+"<br />");r.store&&(g+="Store: "+r.store.name+"<br />");r.customer&&(g+="Customer: "+r.customer.name+"<br />");r.net_total&&(g+="Net Total: "+r.net_total+"<br />");v(g+="Store: Test <br />"),r.qr_content=g,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}var m=Object(s.useState)(""),O=Object(o.a)(m,2),g=O[0],v=O[1];var y=Object(s.useRef)();var N=Object(F.useReactToPrint)({content:function(){return y.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:x,animation:!1,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Sales Return Invoice Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:N,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:y,children:Object(T.jsx)(Ft,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Rt=Mt,Pt=Object(s.forwardRef)((function(e,t){"\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9".split("");var a=Object(s.useState)("0"),n=Object(o.a)(a,2),c=n[0];n[1];return Object(T.jsx)(T.Fragment,{children:e.model.pages&&e.model.pages.map((function(t,a){return Object(T.jsxs)("div",{className:"container",id:"printableArea",style:{backgroundColor:"white",border:"solid 0px",borderColor:"silver",borderRadius:"3mm",padding:"10px"},children:[Object(T.jsx)("h4",{style:{fontSize:"4mm",position:"absolute",left:"270px",top:40+t.top+"px",border:"solid "+c+"px",textDecoration:"underline"},children:"RETURN INVOICE / \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:14+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name?e.model.customer.name:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:28+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.name_in_arabic?e.model.customer.name_in_arabic:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"100px",top:46+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no?e.model.customer.vat_no:"N/A"}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"105px",top:60+t.top+"px",border:"solid "+c+"px"},children:e.model.customer&&e.model.customer.vat_no_in_arabic?e.model.customer.vat_no_in_arabic:"N/A"}),Object(T.jsxs)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:14+t.top+"px",border:"solid "+c+"px"},children:[e.model.date?Object(x.default)(new Date(e.model.date),"yyyy-MM-dd"):"","\xa0\xa0\xa0\xa0",e.model.date?Object(x.default)(new Date(e.model.date),"h:mma"):""]}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"570px",top:35+t.top+"px",border:"solid "+c+"px"},children:e.model.code?e.model.code:""}),Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"69px",top:63+t.top+"px",border:"solid "+c+"px"},children:e.model.total_pages?"Page "+(a+1)+" of "+e.model.total_pages:""}),Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"18px",top:119+t.top+"px",border:"solid 0px"},children:Object(T.jsx)("tbody",{children:t.products&&t.products.map((function(t,s){return Object(T.jsxs)("tr",{style:{paddingTop:"1px",height:"8px",borderBottom:"solid 1px"},children:[Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"48px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:s+1+a*e.model.pageSize})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"93px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:t.part_no?t.part_no:""})}),Object(T.jsx)("td",{className:"text-left",style:{border:"solid 0px",width:"299px",paddingLeft:"5px"},children:Object(T.jsxs)("div",{style:{height:"23px"},children:[t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-2px"},children:t.name_in_arabic}):"",t.name&&t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"-11px"},children:t.name}):"",t.name&&!t.name_in_arabic?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"relative",top:"2px"},children:t.name}):""]})}),Object(T.jsx)("td",{className:"text-center",style:{border:"solid 0px",width:"77px"},children:Object(T.jsxs)("h4",{style:{fontSize:"3mm"},children:[t.quantity,"  ",t.unit?t.unit:""]})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"111px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:t.unit_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})}),Object(T.jsx)("td",{className:"text-end",style:{border:"solid 0px",width:"99px",paddingRight:"5px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm"},children:Object(T.jsx)(N.a,{value:(t.unit_price*t.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})]},t.item_code)}))})}),t.lastPage?Object(T.jsx)("table",{style:{fontSize:"3mm",position:"absolute",left:"646px",top:530+t.top+"px",border:"solid 0px"},children:Object(T.jsxs)("tbody",{children:[Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{displayType:"text",value:e.model.total.toFixed(2),thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.vat_price.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.discount.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})}),Object(T.jsx)("tr",{className:"text-end",style:{verticalAlign:"center",border:"solid 0px"},children:Object(T.jsx)("td",{style:{width:"99px",paddingRight:"5px",paddingTop:"10px"},children:Object(T.jsx)("h4",{style:{fontSize:"3mm",height:"9px"},children:Object(T.jsx)(N.a,{value:e.model.net_total.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})})})]})}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",right:"320px",top:565+t.top+"px"},children:k()(e.model.net_total,{lang:"ar"})+" \u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a  "}):"",t.lastPage?Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"50px",top:580+t.top+"px"},children:k()(e.model.net_total,{lang:"en"})+" saudi riyals"}):"",Object(T.jsx)("h4",{style:{fontSize:"3mm",position:"absolute",left:"205px",top:664+t.top+"px"},children:e.model.received_by_user?e.model.received_by_user.name:""}),t.lastPage?Object(T.jsx)("div",{style:{position:"absolute",left:"600px",top:670+t.top+"px"},children:e.model.QRImageData&&Object(T.jsx)("img",{style:{width:"102px",height:"94px"},src:e.model.QRImageData,alt:"Invoice QR Code"})}):""]},a)}))})})),At=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){if(e){r=e,i(Object(C.a)({},r)),r.store_id&&function(e){console.log("inside get Store");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/store/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:return console.log("Response:"),console.log(n),o=n.result,r.store=o,l=new Date(r.created_at),console.log("d:",l),d=Object(x.default)(new Date(l),"yyyy-MM-dd h:m:mma"),console.log("d2:",d),j=new M.Invoice({sellerName:r.store_name,vatRegistrationNumber:r.store.vat_no,invoiceTimestamp:d,invoiceTotal:r.net_total,invoiceVatTotal:r.vat_price}),e.next=21,j.render();case 21:r.QRImageData=e.sent,console.log("model.QRImageData:",r.QRImageData),i(Object(C.a)({},r));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.store_id),r.customer_id&&function(e){console.log("inside get Customer");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/customer/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.customer=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.customer_id),r.received_by&&function(e){console.log("inside get User(Delivered by)");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/user/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_user=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by),r.received_by_signature_id&&function(e){console.log("inside get Signature");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};fetch("/v1/signature/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),o=n.result,r.delivered_by_signature=o,i(Object(C.a)({},r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(r.received_by_signature_id);r.pageSize=15;var t=r.products.length,s=0,n=parseInt(t/15),c=n;parseFloat(t/15)-n>0&&c++,r.total_pages=c,r.pages=[];for(var o=0,l=0;l<c;l++){r.pages.push({top:s,products:[],lastPage:!1});for(var d=o;d<t&&(!r.products[d].selected||(r.pages[l].products.push(r.products[d]),15!==r.pages[l].products.length));d++);s+=1066,o+=15,l+1===c&&(r.pages[l].lastPage=!0)}console.log("model.pages:",r.pages),console.log("model.products:",r.products),function(){v="",r.code&&(v+="Quotation #: "+r.code+"<br />");r.store&&(v+="Store: "+r.store.name+"<br />");r.customer&&(v+="Customer: "+r.customer.name+"<br />");r.net_total&&(v+="Net Total: "+r.net_total+"<br />");y(v+="Store: Test <br />"),r.qr_content=v,i(Object(C.a)({},r)),console.log("QR content:",r.qr_content),r.qr_content}(),p(!0),console.log("model:",r)}}}}));var a=new h.a,n=Object(s.useState)({}),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(e.show),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}var O=Object(s.useState)(""),g=Object(o.a)(O,2),v=g[0],y=g[1];var N=Object(s.useRef)();var w=Object(F.useReactToPrint)({content:function(){return N.current},documentTitle:function(){var e="Quotation";return r.id&&(e+="_#"+r.code),e}()});return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,scrollable:!0,size:"xl",onHide:m,animation:!1,style:{overflowY:"auto",height:"auto"},children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Sales Return Invoice Preview"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:w,children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)("div",{ref:N,children:Object(T.jsx)(Pt,{model:r})})}),Object(T.jsx)(f.a.Footer,{})]})})})),Lt=At,It=Object(s.forwardRef)((function(e,t){var a,n,c,r,i,l,d,j,p,m,O;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:S.get("access_token")}};fetch("/v1/sales-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),y=n.result,w(Object(C.a)({},y));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:S.get("access_token")}},a="select=id,amount,method,store_name,sales_return_code,sales_return_id,created_by_name,created_at";S.get("store_id")&&(Z.store_id=S.get("store_id"));Z.sales_return_id=e,K(Z);var s=(n=Z,Object.keys(n).map((function(e){return"search[".concat(e,"]=").concat(n[e])})).join("&"));var n;""!==s&&(s="&"+s);fetch("/v1/sales-return-payment?"+a+s,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:B(n.result),H=n.meta.total_payment,G(H);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e),$(!0))}}}));var g=Object(s.useState)({}),v=Object(o.a)(g,2),y=v[0],w=v[1],S=new h.a,k=Object(s.useState)(0),D=Object(o.a)(k,2),F=(D[0],D[1],Object(s.useState)(0)),M=Object(o.a)(F,2),R=(M[0],M[1],Object(s.useState)(0)),P=Object(o.a)(R,2),A=(P[0],P[1],Object(s.useState)(0)),L=Object(o.a)(A,2),I=(L[0],L[1],Object(s.useState)([])),E=Object(o.a)(I,2),z=E[0],B=E[1],q=Object(s.useState)(0),V=Object(o.a)(q,2),H=V[0],G=V[1],W=Object(s.useState)({}),Q=Object(o.a)(W,2),Z=Q[0],K=Q[1];var X=Object(s.useState)(!1),Y=Object(o.a)(X,2),J=Y[0],$=Y[1];function ee(){$(!1)}var te=Object(s.useRef)();var ae=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Rt,{ref:te}),Object(T.jsx)(Lt,{ref:ae}),Object(T.jsxs)(f.a,{show:J,size:"xl",onHide:ee,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of SalesReturn #",y.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){ae.current.open(y)},children:[Object(T.jsx)("i",{className:"bi bi-printer"})," Print"]})}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){te.current.open(y)},children:[Object(T.jsx)("i",{className:"bi bi-display"})," E-Return Invoice"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Unit Price"}),Object(T.jsx)("th",{children:"Price"}),"true"===S.get("admin")?Object(T.jsx)("th",{children:"Purchase Unit Price"}):"","true"===S.get("admin")?Object(T.jsx)("th",{children:"Purchase Price"}):"","true"===S.get("admin")?Object(T.jsx)("th",{children:"Profit"}):"","true"===S.get("admin")?Object(T.jsx)("th",{children:"Loss"}):""]})}),Object(T.jsxs)("tbody",{children:[y.products&&y.products.filter((function(e){return e.selected})).map((function(e,t){var a,s,n;return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsxs)("td",{children:[e.name,e.name_in_arabic?" / "+e.name_in_arabic:""]}),Object(T.jsxs)("td",{children:[e.quantity,"  ",e.unit?e.unit:""," "]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=e.unit_price)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),"true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(s=e.purchase_unit_price)||void 0===s?void 0:s.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=e.profit)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:e.loss.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"3"}),Object(T.jsx)("td",{className:"text-center",children:Object(T.jsx)("b",{})}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=y.total)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),"true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=y.profit)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=y.loss)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end",children:"Discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(r=y.discount)||void 0===r?void 0:r.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),"true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(i=y.discount)||void 0===i?void 0:i.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00"}):"0.00"]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"4",className:"text-end",children:"VAT"}),Object(T.jsx)("td",{className:"text-end",children:(null===(l=y.vat_percent)||void 0===l?void 0:l.toFixed(2))+"%"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(d=y.vat_price)||void 0===d?void 0:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{colSpan:"2"}),"true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00 "}):"","true"===S.get("admin")?Object(T.jsx)("td",{className:"text-end",children:"0.00 "}):""]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(j=y.net_total)||void 0===j?void 0:j.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})}),Object(T.jsx)("th",{colSpan:2,className:"text-end",children:"Cash discount"}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(p=y.cash_discount)||void 0===p?void 0:p.toFixed(2),displayType:"text",suffix:"",thousandSeparator:!0,renderText:function(e,t){return e}})}),Object(T.jsx)("td",{className:"text-end",children:"0.00"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"6"}),"true"===S.get("admin")?Object(T.jsx)("th",{colSpan:"2",className:"text-end",children:"Net Profit / Loss"}):"","true"===S.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(m=y.net_profit)||void 0===m?void 0:m.toFixed(2),displayType:"text",suffix:" ",thousandSeparator:!0,renderText:function(e,t){return e}})}):"","true"===S.get("admin")?Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(O=y.net_loss)||void 0===O?void 0:O.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):""]})]})]})}),Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Order ID: "}),Object(T.jsxs)("td",{children:[" ",y.order_code]}),Object(T.jsx)("th",{children:"Store: "}),Object(T.jsxs)("td",{children:[" ",y.store_name]}),Object(T.jsx)("th",{children:"Customer: "}),Object(T.jsxs)("td",{children:[" ",y.customer_name]}),Object(T.jsx)("th",{children:"Received by: "}),Object(T.jsxs)("td",{children:[" ",y.received_by_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date: "}),Object(T.jsx)("td",{children:y.date?Object(x.default)(new Date(y.date),"MMM dd yyyy h:mma"):"Not set"}),Object(T.jsx)("th",{children:"VAT %: "}),Object(T.jsxs)("td",{children:[" ",y.vat_percent,"%"]}),Object(T.jsx)("th",{children:"Discount: "}),Object(T.jsxs)("td",{children:[" ",y.discount," "]}),Object(T.jsx)("th",{children:"Discount %: "}),Object(T.jsxs)("td",{children:[" ",y.discount_percent]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Status: "}),Object(T.jsxs)("td",{children:[" ",y.status]}),Object(T.jsx)("th",{children:"Created At: "}),Object(T.jsxs)("td",{children:[" ",y.created_at]}),Object(T.jsx)("th",{children:"Updated At: "}),Object(T.jsxs)("td",{children:[" ",y.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By: "}),Object(T.jsxs)("td",{children:[" ",y.created_by_name]}),Object(T.jsx)("th",{children:"Updated By: "}),Object(T.jsxs)("td",{children:[" ",y.updated_by_name]})]}),Object(T.jsxs)("tr",{children:[z.length>0?Object(T.jsx)("th",{children:"Payments"}):"",z.length>0?Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment Method"}),Object(T.jsx)("th",{children:"Created By"}),Object(T.jsx)("th",{children:"Created At"})]})}),Object(T.jsx)("tbody",{className:"text-center",children:z&&z.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.amount.toFixed(2)+" "}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")})]},e.id)}))})]})})}):""]})]})})]})]})]})})),Et=It,zt=Object(s.forwardRef)((function(e,t){var a,n,c,r,l,d;Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){m={},v(Object(C.a)({},m)),(R={order_id:t,vat_percent:15,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"received",payment_status:"",payment_method:"",price_type:"retail"}).payments_input=[{date_str:R.date_str,amount:0,method:"",deleted:!1}],R.cash_discount=0,D.get("user_id")&&(Z=[{id:D.get("user_id"),name:D.get("user_name")}],R.received_by=D.get("user_id"),P(Object(C.a)({},R)),K(Object(i.a)(Z))),P(Object(C.a)({},R)),e&&function(e){console.log("inside getSalesReturn id:",e);var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}};k(!0),fetch("/v1/sales-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!1),s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=7;break}return e.next=6,t.json();case 6:e.t0=e.sent;case 7:if(n=e.t0,t.ok){e.next=11;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 11:if(v({}),console.log("Response:"),console.log(n),r=n.result,(R={id:r.id,code:r.code,order_code:r.order_code,order_id:r.order_id,store_id:r.store_id,customer_id:r.customer_id,date_str:r.date,payments_input:r.payments,cash_discount:r.cash_discount,vat_percent:r.vat_percent,discount:r.discount,discount_percent:r.discount_percent,is_discount_percent:r.is_discount_percent,payment_status:r.payment_status}).payments_input||(R.payments_input=[]),n.result.payments)for(console.log("data.result.payments:",n.result.payments),R.payments_input=n.result.payments,o=0;o<(null===(l=R.payments_input)||void 0===l?void 0:l.length);o++)R.payments_input[o].date_str=R.payments_input[o].date;for(P(Object(C.a)({},R)),console.log("formData1.status:",R.status),console.log("purchaseReturn.products:",r.products),d=r.products,B=[],j=0;j<d.length;j++)B.push(d[j]);console.log("selectedProducts: ",B.length),q(Object(i.a)(B)),P(Object(C.a)({},R)),Se(),P(Object(C.a)({},R));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){k(!1),v(e)}))}(e),t&&(Se(),function(e){console.log("inside get SalesReturn");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}};k(!0),fetch("/v1/order/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!1),s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=7;break}return e.next=6,t.json();case 6:e.t0=e.sent;case 7:if(n=e.t0,t.ok){e.next=11;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 11:for(v({}),console.log("Response:"),console.log(n),r=n.result,o=r.products,B=[],l=0;l<o.length;l++)o[l].selected=!1,d=o[l].quantity-o[l].quantity_returned,o[l].quantity=d,d>0&&B.push(o[l]);console.log("selectedProducts:",B),q(Object(i.a)(B)),console.log("order.id:",r.id),R.id="",R.products=r.products,R.order_code=r.code,R.store_id=r.store_id,R.customer_id=r.customer_id,R.is_discount_percent=!0,console.log("order.discount_percent:",r.discount_percent),R.discount_percent=r.discount_percent,R.cash_discount=parseFloat(r.cash_discount-r.return_cash_discount),console.log("formData:",R),I=[{id:r.store_id,name:r.store_name}],E(I),console.log("selectedStores:",I),P(Object(C.a)({},R)),Se(),P(Object(C.a)({},R));case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){k(!1),v(e)}))}(t)),oe(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var j=Object(s.useState)({}),p=Object(o.a)(j,2),m=p[0],v=p[1],y=Object(s.useState)(!1),w=Object(o.a)(y,2),S=w[0],k=w[1],D=new h.a,F=Object(s.useState)({order_id:"",vat_percent:15,discount:0,date_str:Object(x.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"received",payment_status:"",payment_method:"",price_type:"retail"}),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)([]),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(null),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)([]),H=Object(o.a)(V,2),G=(H[0],H[1],Object(s.useState)([])),Q=Object(o.a)(G,2),Z=Q[0],K=Q[1],Y=Object(s.useState)(!1),J=Object(o.a)(Y,2),$=(J[0],J[1],Object(s.useState)([])),ee=Object(o.a)($,2),te=(ee[0],ee[1],Object(s.useState)([])),ae=Object(o.a)(te,2),se=(ae[0],ae[1],Object(s.useState)(!1)),ne=Object(o.a)(se,2),ce=(ne[0],ne[1],Object(s.useState)(!1)),re=Object(o.a)(ce,2),ie=re[0],oe=re[1];function le(){oe(!1)}function de(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",B),console.log("formData.order_id:",R.order_id),R.products=[];for(var a=0;a<(null===(s=B)||void 0===s?void 0:s.length);a++){var s;R.products.push({product_id:B[a].product_id,quantity:parseFloat(B[a].quantity),unit_price:parseFloat(B[a].unit_price),unit:B[a].unit,selected:B[a].selected})}R.cash_discount||(R.cash_discount=0),R.discount=parseFloat(R.discount),R.discount_percent=parseFloat(R.discount_percent),R.vat_percent=parseFloat(R.vat_percent),console.log("formData.discount:",R.discount);var n=!1;if(m.products="",v(Object(C.a)({},m)),0===R.products.length&&(m.products="No products added",v(Object(C.a)({},m)),n=!0),R.discount||0===R.discount||(m.discount="Invalid discount",v(Object(C.a)({},m)),n=!0),R.discount_percent||0===R.discount_percent||(m.discount_percent="Invalid discount percent",v(Object(C.a)({},m)),n=!0),parseFloat(R.discount_percent)>100&&(m.discount_percent="Discount percent cannot be > 100",v(Object(C.a)({},m)),n=!0),Ze()||(console.log("Errors on payments"),n=!0),n)console.log("Errors: ",m);else{R.net_total=parseFloat(ge);var c="/v1/sales-return",r="POST";R.id&&(c="/v1/sales-return/"+R.id,r="PUT");var i={method:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:D.get("access_token")},body:JSON.stringify(R)};console.log("formData:",R),k(!0),fetch(c,i).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:v({}),k(!1),console.log("Response:"),console.log(c),e.showToastMessage("SalesReturn Created Successfully!","success"),e.refreshList&&e.refreshList(),le(),e.refreshSalesList&&e.refreshSalesList();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){k(!1),console.log("Inside catch"),console.log(t),v(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesReturn!","danger")}))}}Object(s.useEffect)((function(){D.get("access_token")||(window.location="/")}));var je=Object(s.useState)(0),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];var pe=Object(s.useState)(0),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1];var fe=Object(s.useState)(0),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];var ye=Object(s.useState)(0),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1];function Se(){!function(){be=0;for(var e=0;e<(null===(t=B)||void 0===t?void 0:t.length);e++){var t;B[e].selected&&(be+=parseFloat(B[e].unit_price)*parseFloat(B[e].quantity))}he(be)}(),R.is_discount_percent?function(){var e;R.discount_percent>=0&&be>0&&(R.discount=parseFloat(be*parseFloat(R.discount_percent/100)),R.discount=parseFloat(null===(e=R.discount)||void 0===e?void 0:e.toFixed(2)),P(Object(C.a)({},R)))}():R.discount>=0&&be>0&&(Ce=parseFloat(100*parseFloat(R.discount/be)),we(Ce),R.discount_percent=Ce,P(Object(C.a)({},R))),me=0,be>0&&(me=parseFloat(parseFloat(R.vat_percent)/100)*(parseFloat(be)-parseFloat(R.discount)),console.log("vatPrice:",me)),Oe(me),function(){if(ge=parseFloat(be)-parseFloat(R.discount)+parseFloat(me),ve(ge),ge=Math.round(100*ge)/100,console.log("after rounding netTotal:",ge),ve(ge),!R.id){var e,t,a,s="";if(R.payments_input[0]&&(s=R.payments_input[0].method),R.payments_input=[{date_str:R.date_str,amount:0,method:s,deleted:!1}],ge>0)R.payments_input[0].amount=parseFloat(null===(e=ge)||void 0===e?void 0:e.toFixed(2)),R.cash_discount&&(R.payments_input[0].amount=R.payments_input[0].amount-parseFloat(null===(a=R.cash_discount)||void 0===a?void 0:a.toFixed(2))),R.payments_input[0].amount=parseFloat(null===(t=R.payments_input[0].amount)||void 0===t?void 0:t.toFixed(2))}P(Object(C.a)({},R)),Ze()}()}var ke=Object(s.useRef)();var Te=Object(s.useRef)(),De=Object(s.useRef)(),Fe=Object(s.useRef)(),Me=Object(s.useRef)();var Re=Object(s.useRef)();var Pe=Object(s.useRef)();var Ae=Object(s.useState)(0),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)(0),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)(""),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1];function Qe(){for(var e,t,a,s,n,c,r,i=0,o=0;o<(null===(l=R.payments_input)||void 0===l?void 0:l.length);o++){var l;R.payments_input[o].amount&&!R.payments_input[o].deleted&&(i+=R.payments_input[o].amount)}return Ee(Ie=i),Be=parseFloat(null===(e=ge)||void 0===e?void 0:e.toFixed(2))-parseFloat(null===(t=parseFloat(R.cash_discount))||void 0===t?void 0:t.toFixed(2))-parseFloat(null===(a=i)||void 0===a?void 0:a.toFixed(2)),Be=parseFloat(null===(s=Be)||void 0===s?void 0:s.toFixed(2)),qe(Be),Be===parseFloat(null===(n=parseFloat(null===(c=ge)||void 0===c?void 0:c.toFixed(2))-parseFloat(null===(r=parseFloat(R.cash_discount))||void 0===r?void 0:r.toFixed(2)))||void 0===n?void 0:n.toFixed(2))?Ge="not_paid":Be<=0?Ge="paid":Be>0&&(Ge="paid_partially"),We(Ge),i}function Ze(){if(B&&0==B.filter((function(e){return e.selected})).length)return!0;m.cash_discount="",v(Object(C.a)({},m));var e,t=!1;if(ge&&R.cash_discount>0&&R.cash_discount>=ge)return m.cash_discount="Cash discount should not be >= "+(null===(e=ge)||void 0===e?void 0:e.toFixed(2).toString()),v(Object(C.a)({},m)),t=!0,!1;Qe();for(var a=0;a<R.payments_input.length;a++)m["payment_amount_"+a]="",m["payment_date_"+a]="",m["payment_method_"+a]="",v(Object(C.a)({},m)),R.payments_input[a].amount?0===R.payments_input[a].amount&&(m["payment_amount_"+a]="Amount should be greater than zero",v(Object(C.a)({},m)),t=!0):(m["payment_amount_"+a]="Payment amount is required",v(Object(C.a)({},m)),t=!0),R.payments_input[a].date_str||(m["payment_date_"+a]="Payment date is required",v(Object(C.a)({},m)),t=!0),R.payments_input[a].method||(m["payment_method_"+a]="Payment method is required",v(Object(C.a)({},m)),t=!0);return!t}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Et,{ref:ke}),Object(T.jsx)(et,{ref:Pe}),Object(T.jsx)(W,{ref:Te,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:De,showToastMessage:e.showToastMessage}),Object(T.jsx)(rt,{ref:Fe,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Me,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:Re,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:ie,size:"xl",fullscreen:!0,onHide:le,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:R.id?"Update Sales Return #"+R.code+" for sale #"+R.order_code:"Create Sales Return for sale #"+R.order_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsx)(Rt,{}),B&&B.length>0&&Object(T.jsxs)(_.a,{variant:"primary",onClick:de,children:[S?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",R.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:le,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(m).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:m&&Object.keys(m).map((function(e,t){return m[e]?Object(T.jsx)("li",{style:{color:"red"},children:m[e]}):""}))})}):"",(null===(a=B)||void 0===a?void 0:a.length)>0&&Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)(O.a,{id:"date_str",selected:R.date_str?new Date(R.date_str):null,value:R.date_str?Object(x.default)(new Date(R.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),R.date_str=e,P(Object(C.a)({},R))}})}),m.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.date_str]}),R.date_str&&!m.date_str&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),B&&0===B.length&&"Already returned all products",B&&B.length>0&&Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:de,children:[Object(T.jsx)("h2",{children:"Select Products"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",overflowY:"scroll"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Select"}),Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Unit Price"}),Object(T.jsx)("th",{children:"Price"})]})}),Object(T.jsx)("tbody",{children:B.map((function(e,t){var a;return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("input",{type:"checkbox",checked:B[t].selected,onChange:function(e){console.log("e.target.value:",e.target.value),B[t].selected=!B[t].selected,q(Object(i.a)(B)),Se()}})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){var t;t=e.product_id,Pe.current.open(t)},children:e.name}),Object(T.jsxs)("td",{style:{width:"155px"},children:[Object(T.jsxs)("div",{class:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return m["quantity_"+t]="",v(Object(C.a)({},m)),a.target.value?0===parseFloat(a.target.value)?(m["quantity_"+t]="Quantity should be >0",B[t].quantity=parseFloat(a.target.value),q(Object(i.a)(B)),v(Object(C.a)({},m)),void console.log("errors:",m)):(e.quantity=parseFloat(a.target.value),B[t].quantity=parseFloat(a.target.value),q(Object(i.a)(B)),void Se()):(m["quantity_"+t]="Invalid Quantity",B[t].quantity=a.target.value,q(Object(i.a)(B)),v(Object(C.a)({},m)),void console.log("errors:",m))}}),Object(T.jsx)("span",{class:"input-group-text",id:"basic-addon2",children:B[t].unit?B[t].unit:"Units"})]}),m["quantity_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["quantity_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsxs)("div",{class:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.unit_price,className:"form-control",placeholder:"Unit Price",onChange:function(e){return m["unit_price_"+t]="",v(Object(C.a)({},m)),e.target.value?0===e.target.value?(m["unit_price_"+t]="Invalid Unit Price should be > 0",B[t].unit_price=parseFloat(e.target.value),q(Object(i.a)(B)),v(Object(C.a)({},m)),void console.log("errors:",m)):(B[t].unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].unit_price:",B[t].unit_price),q(Object(i.a)(B)),void Se()):(m["unit_price_"+t]="Invalid Unit Price",B[t].unit_price=e.target.value,q(Object(i.a)(B)),v(Object(C.a)({},m)),void console.log("errors:",m))}}),Object(T.jsx)("span",{class:"input-group-text",id:"basic-addon2"})]}),m["unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["unit_price_"+t]]})]}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:null===(a=e.unit_price*e.quantity)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]},t)}))})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"4"}),Object(T.jsx)("td",{className:"text-center"}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",style:{width:"180px"},children:Object(T.jsx)(N.a,{value:null===(n=be)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"6",className:"text-end",children:["Discount  ",Object(T.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:R.discount_percent,onChange:function(e){return R.is_discount_percent=!0,0===parseFloat(e.target.value)?(R.discount_percent=parseFloat(e.target.value),P(Object(C.a)({},R)),m.discount_percent="",v(Object(C.a)({},m)),void Se()):parseFloat(e.target.value)<0?(R.discount_percent=parseFloat(e.target.value),R.discount=0,P(Object(C.a)({},R)),m.discount_percent="Discount percent should be >= 0",v(Object(C.a)({},m)),void Se()):e.target.value?(m.discount_percent="",m.discount="",v(Object(C.a)({},m)),R.discount_percent=parseFloat(e.target.value),P(Object(C.a)({},R)),void Se()):(R.discount_percent="",R.discount=0,m.discount_percent="Invalid Discount Percent",P(Object(C.a)({},R)),void v(Object(C.a)({},m)))}}),"%",m.discount_percent&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount_percent})]}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:R.discount,onChange:function(e){return R.is_discount_percent=!1,0===parseFloat(e.target.value)?(R.discount=parseFloat(e.target.value),P(Object(C.a)({},R)),m.discount="",v(Object(C.a)({},m)),void Se()):parseFloat(e.target.value)<0?(R.discount=parseFloat(e.target.value),R.discount_percent=0,P(Object(C.a)({},R)),m.discount="Discount should be >= 0",v(Object(C.a)({},m)),void Se()):e.target.value?(m.discount="",m.discount_percent="",v(Object(C.a)({},m)),R.discount=parseFloat(e.target.value),P(Object(C.a)({},R)),void Se()):(R.discount="",R.discount_percent=0,m.discount="Invalid Discount",P(Object(C.a)({},R)),Se(),void v(Object(C.a)({},m)))}})," ",m.discount&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end"}),Object(T.jsxs)("th",{className:"text-end",children:[" VAT: ",R.vat_percent+"%"]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=me)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"5"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(r=ge)||void 0===r?void 0:r.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})})}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Cash discount"}),Object(T.jsx)("input",{type:"number",value:R.cash_discount,className:"form-control ",onChange:function(e){return m.cash_discount="",v(Object(C.a)({},m)),e.target.value?(R.cash_discount=parseFloat(e.target.value),R.cash_discount>0&&R.cash_discount>=ge?(m.cash_discount="Cash discount should not be >= "+ge.toString(),void v(Object(C.a)({},m))):(P(Object(C.a)({},R)),Ze(),void console.log(R))):(R.cash_discount=e.target.value,P(Object(C.a)({},R)),void Ze())}}),m.cash_discount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.cash_discount]})]}),Object(T.jsxs)("div",{className:"col-md-8",children:[Object(T.jsx)("label",{className:"form-label",children:"Payments given"}),Object(T.jsxs)("div",{class:"table-responsive",style:{maxWidth:"900px"},children:[Object(T.jsx)(_.a,{variant:"secondary",style:{alignContent:"right"},onClick:function(){var e=new Date;R.id||(e=R.date_str),R.payments_input.push({date_str:e,amount:0,method:"",deleted:!1}),P(Object(C.a)({},R)),Ze()},children:"Create new payment"}),Object(T.jsxs)("table",{class:"table table-striped table-sm table-bordered",children:[Object(T.jsxs)("thead",{children:[Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment method"}),Object(T.jsx)("th",{children:"Action"})]}),Object(T.jsxs)("tbody",{children:[R.payments_input&&R.payments_input.filter((function(e){return!e.deleted})).map((function(e,t){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{style:{minWidth:"220px"},children:[Object(T.jsx)(O.a,{id:"date_str",selected:R.payments_input[t].date_str?new Date(R.payments_input[t].date_str):null,value:R.payments_input[t].date_str?Object(x.default)(new Date(R.payments_input[t].date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),R.payments_input[t].date_str=e,P(Object(C.a)({},R))}}),m["payment_date_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_date_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"300px"},children:[Object(T.jsx)("input",{type:"number",value:R.payments_input[t].amount,className:"form-control ",onChange:function(e){if(m["payment_amount_"+t]="",v(Object(C.a)({},m)),!e.target.value)return R.payments_input[t].amount=e.target.value,P(Object(C.a)({},R)),void Ze();R.payments_input[t].amount=parseFloat(e.target.value),Ze(),P(Object(C.a)({},R)),console.log(R)}}),m["payment_amount_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_amount_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"200px"},children:[Object(T.jsxs)("select",{value:R.payments_input[t].method,className:"form-control ",onChange:function(e){if(m["payment_method_"+t]="",v(Object(C.a)({},m)),!e.target.value)return m["payment_method_"+t]="Payment method is required",v(Object(C.a)({},m)),R.payments_input[t].method="",void P(Object(C.a)({},R));R.payments_input[t].method=e.target.value,P(Object(C.a)({},R)),console.log(R)},children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]}),m["payment_method_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_method_"+t]]})]}),Object(T.jsx)("td",{style:{width:"200px"},children:Object(T.jsx)(_.a,{variant:"danger",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];R.payments_input.splice(e,1),P(Object(C.a)({},R)),t&&Ze(),Qe()}(t)},children:"Remove"})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{class:"text-end",children:Object(T.jsx)("b",{children:"Total"})}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{style:{marginLeft:"14px"},children:null===(l=Ie)||void 0===l?void 0:l.toFixed(2)})}),Object(T.jsx)("td",{children:Object(T.jsxs)("b",{style:{marginLeft:"12px",alignSelf:"end"},children:["Balance: ",null===(d=Be)||void 0===d?void 0:d.toFixed(2)]})}),Object(T.jsxs)("td",{colSpan:1,children:[Object(T.jsx)("b",{children:"Payment status: "}),"paid"==Ge?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==Ge?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==Ge?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]})]})]})]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:le,children:"Close"}),B&&B.length>0&&Object(T.jsx)(_.a,{variant:"primary",onClick:de,children:S?Object(T.jsx)(g.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":R.id?"Update":"Create"})]})]})]})]})]})})),Ut=zt,Bt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesReturnPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Sales Return Payment  of Sales return #",c.sales_return_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openCreateForm(e.sales_return)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Sales Return ID:"}),Object(T.jsxs)("td",{children:[" ",c.sales_return_code]}),Object(T.jsx)("th",{children:"Sales Order ID:"}),Object(T.jsxs)("td",{children:[" ",c.order_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.method]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date :"}),Object(T.jsxs)("td",{children:["  ",c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):""," "]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),qt=Bt,Vt=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(C.a)({},t)),(z={method:""}).date_str=new Date,t&&(z.sales_return_id=t.id,z.sales_return_code=t.code,z.order_id=t.order_id,z.order_code=t.order_code,z.store_id=t.store_id),U(z),R(M=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:w.get("access_token")}};z={},U(Object(C.a)({},z)),M=[],R(Object(i.a)(M)),fetch("/v1/sales-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:p({}),console.log("Response:"),console.log(n),(z=n.result).date_str=n.result.date,console.log("formData:",z),U(Object(C.a)({},z)),console.log("formData:",z);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N(!1),p(e)}))}(e),j={},p(Object(C.a)({},j)),H(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(!1),v=Object(o.a)(m,2),y=v[0],N=v[1],w=new h.a,S=Object(s.useState)([]),k=Object(o.a)(S,2),D=(k[0],k[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(!1),A=Object(o.a)(P,2),L=(A[0],A[1]),I=Object(s.useState)({}),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(!1),q=Object(o.a)(B,2),V=q[0],H=q[1];function G(){H(!1)}function W(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",z.logo),L(!0);var a="/v1/sales-return-payment",s="POST";if(z.id&&(a="/v1/sales-return-payment/"+z.id,s="PUT"),z.amount<=0)return j.amount="Amount should be > 0:",void p(Object(C.a)({},j));console.log("salesreturn.order_id:",c.order_id),z.order_id=c.order_id,z.order_code=c.order_code;var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:w.get("access_token")},body:JSON.stringify(z)};console.log("formData:",z),N(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:p({}),N(!1),L(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),G(),e.refreshSalesReturnList&&e.refreshSalesReturnList();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){N(!1),L(!1),console.log("Inside catch"),console.log(t),p(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesReturnPayment!","danger")}))}return Object(s.useEffect)((function(){w.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:V,size:"lg",onHide:G,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:z.id?"Update Payment of sales return #"+z.sales_return_code:"Add Payment of sales return  #"+z.sales_return_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){G(),e.openDetailsView(z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:W,children:[y?Object(T.jsx)(g.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:G,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:W,children:[Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:z.amount?z.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(z.amount=e.target.value,j.amount="Amount should be > 0",void p(Object(C.a)({},j))):(z.amount=parseFloat(e.target.value),j.amount="",p(Object(C.a)({},j)),U(Object(C.a)({},z)),void console.log(z)):(z.amount=e.target.value,j.amount="Invalid amount",void p(Object(C.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(T.jsx)("div",{style:{color:"red"},children:j.amount}),z.amount&&!j.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:z.date_str?new Date(z.date_str):null,value:z.date_str?Object(x.default)(new Date(z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),z.date_str=e,U(Object(C.a)({},z))}}),j.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.date_str]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:z.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",z.method="",U(Object(C.a)({},z)),void p(Object(C.a)({},j));j.method="",p(Object(C.a)({},j)),z.method=e.target.value,U(Object(C.a)({},z)),console.log(z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]}),j.method&&Object(T.jsx)("div",{style:{color:"red"},children:j.method}),z.method&&!j.method&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]})}),Object(T.jsx)("div",{className:"row  g-5",children:Object(T.jsx)("div",{className:"col-md-3"})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:G,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:W,children:y?Object(T.jsx)(g.a,{as:"span",animation:"bsalesreturnpayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":z.id?"Update":"Create"})]})]})})]})})})),Ht=Vt;var Gt=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(1),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];Object(s.useEffect)((function(){ze()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)("created_at"),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("-"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1];function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ae({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){Ce[e]=t,w(C=1),ze()}function Ee(e,t){if(!t)return C=1,Ce[e]="",w(C),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(jt(t),pt(""),ft(""),Ce.from_date="",Ce.to_date="",Ce[e]=t):"from_date"===e?(pt(t),jt(""),Ce.date="",Ce[e]=t):"to_date"===e?(ft(t),jt(""),Ce.date="",Ce[e]=t):"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),w(C=1),ze()}function ze(){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id")),e.salesReturn&&(Ce.sales_return_id=e.salesReturn.id);var s=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(s/60),we(Ce);var n=Ae(Ce);""!==n&&(n="&"+n),de(!0),fetch("/v1/sales-return-payment?select=id,date,amount,method,store_name,sales_return_code,sales_return_id,order_id,order_code,created_by_name,created_at,deleted"+n+"&sort="+Re+Te+"&page="+C+"&limit="+j,a).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:de(!1),he(!1),i(c.result),o=parseInt((c.total_count+j-1)/j),F(o),A(c.total_count),V((C-1)*j),z(c.result.length),Ze=c.meta.total_payment,Ke(Ze),e.salesReturn&&!St&&(Je=e.salesReturn.net_total-Ze,$e(Je),Je==e.salesReturn.net_total?st(at="not_paid"):Je<=0?st(at="paid"):Je>0&&st(at="paid_partially"));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){De(Te=e),Pe(Re="-"===Re?"":"-"),ze()}function Be(e){C=parseInt(e),w(C),ze()}function qe(e){Ge.current.open(e)}var Ve=Object(s.useRef)();function He(e){Ve.current.open(e)}var Ge=Object(s.useRef)(),We=Object(s.useState)(0),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1],Xe=Object(s.useState)(0),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=Ye[1],et=Object(s.useState)(""),tt=Object(o.a)(et,2),at=tt[0],st=tt[1],nt=Object(s.useState)(!1),ct=Object(o.a)(nt,2),rt=ct[0],it=ct[1],ot=Object(s.useState)(""),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1],ut=Object(s.useState)(""),bt=Object(o.a)(ut,2),ht=bt[0],pt=bt[1],xt=Object(s.useState)(""),mt=Object(o.a)(xt,2),Ot=mt[0],ft=mt[1],_t=Object(s.useState)("-"),gt=Object(o.a)(_t,2),vt=gt[0],yt=(gt[1],function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(Tt.confirm)("Are you sure?");case 3:a=e.sent,console.log(a),a&&Nt(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Nt(a){var s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};fetch("/v1/sales-return-payment/"+a,s).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:e.showToastMessage("Sales return payment deleted successfully!","success"),e.refreshList&&e.refreshList(),e.refreshSalesReturnList&&e.refreshSalesReturnList(),ze();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}var Ct=Object(s.useState)(!1),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ht,{ref:Ge,refreshList:ze,showToastMessage:e.showToastMessage,openDetailsView:He,refreshSalesReturnList:e.refreshSalesReturnList?e.refreshSalesReturnList:""}),Object(T.jsx)(qt,{ref:Ve,openUpdateForm:qe}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:["paid"==at?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==at?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==at?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):"",Object(T.jsxs)("h1",{className:"text-end",children:["Total paid amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),e.salesReturn?Object(T.jsxs)("h4",{className:"text-end",children:["Balance amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Je.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Sales Return Payments"})}),Object(T.jsx)("div",{className:"col text-end",children:e.salesReturn?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){console.log("props.salesReturn:",e.salesReturn),Ge.current.open("",e.salesReturn)},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===P&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No sales return payments to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bsalesreturnpayment:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bsalesreturnpayment:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){he(!0),ze()},variant:"primary",disabled:be,children:[be?Object(T.jsx)(g.a,{as:"span",animation:"bsalesreturnpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ze()},className:"form-control pull-right",style:{bsalesreturnpayment:"solid 1px",bsalesreturnpaymentColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bsalesreturnpayment:"solid 0px"},children:D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""})}),Object(T.jsx)("div",{className:"row",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",q+1,"-",q+E," of"," ",P]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",C," of ",D]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("sales_return_code")},children:["Sales Return ID","sales_return_code"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"sales_return_code"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("date")},children:["Date","date"===Te&&"-"===vt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Te&&""===vt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:"Deleted"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"sales_return_code",onChange:function(e){return Ie("sales_return_code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:dt,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return jt(""),void Ee("date_str","");Ee("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return it(!rt)},children:rt?"Less..":"More.."}),Object(T.jsx)("br",{}),rt?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:ht,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return pt(""),void Ee("from_date","");Ee("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:Ot,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ft(""),void Ee("to_date","");Ee("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Ie("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return Ie("method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),w(C=1),ze()},options:me,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:X,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void Ee("created_at","");Ee("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Q(!W)},children:W?"Less..":"More.."}),Object(T.jsx)("br",{}),W?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void Ee("created_at_from","");Ee("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void Ee("created_at_to","");Ee("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsxs)("select",{onChange:function(e){Ie("deleted",e.target.value),"1"==e.target.value?kt(St=!0):kt(St=!1)},children:[Object(T.jsx)("option",{value:"0",SELECTED:!0,children:"NO"}),Object(T.jsx)("option",{value:"1",children:"YES"})]})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.sales_return_code}),Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{style:{width:"110px"},children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",disabled:e.deleted,onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",disabled:e.deleted,onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)(_.a,{className:"btn btn-danger btn-sm",disabled:e.deleted,onClick:function(){yt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-trash"})})]}),Object(T.jsx)("td",{children:e.deleted?"YES":"NO"})]},e.id)}))})]})}),D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""]})})})})]})]})},Wt=a(74),Qt=a.n(Wt),Zt=Qt.a.ExcelFile,Kt=Qt.a.ExcelFile.ExcelSheet;var Xt=function(e){var t=new h.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(0),v=Object(o.a)(m,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(0),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)([]),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(5),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(1),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(0),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(0),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(0),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(new Date),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)(new Date),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)(new Date),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)(new Date),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)(new Date),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)(new Date),Ze=Object(o.a)(Qe,2),Ke=Ze[0],Xe=Ze[1],Ye=Object(s.useState)(""),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)(""),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)(""),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1],lt=Object(s.useState)(!1),dt=Object(o.a)(lt,2),jt=dt[0],ut=dt[1],bt=Object(s.useState)(""),ht=Object(o.a)(bt,2),pt=ht[0],xt=ht[1],mt=Object(s.useState)(""),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)(""),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(!1),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1],Tt=Object(s.useState)(!1),Dt=Object(o.a)(Tt,2),Ft=Dt[0],Mt=Dt[1],Rt=Object(s.useState)([]),Pt=Object(o.a)(Rt,2),At=Pt[0],Lt=Pt[1],It=Object(s.useState)([]),zt=Object(o.a)(It,2),Bt=zt[0],Vt=zt[1],Wt=Object(s.useState)([]),Qt=Object(o.a)(Wt,2),Xt=Qt[0],Yt=Qt[1],Jt=Object(s.useState)([]),$t=Object(o.a)(Jt,2),ea=$t[0],ta=$t[1],aa=Object(s.useState)([]),sa=Object(o.a)(aa,2),na=(sa[0],sa[1]);Object(s.useEffect)((function(){qa()}),[]);var ca=Object(s.useState)([]),ra=Object(o.a)(ca,2),ia=ra[0],oa=ra[1],la=Object(s.useState)([]),da=Object(o.a)(la,2),ja=da[0],ua=da[1],ba=Object(s.useState)("Sales Return Report"),ha=Object(o.a)(ba,2),pa=ha[0],xa=ha[1],ma=Object(s.useState)(!1),Oa=Object(o.a)(ma,2),fa=Oa[0],_a=Oa[1];function ga(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<ia.length;t++){var a=Object(x.default)(new Date(ia[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(ia[t])}console.log("groupedByDate:",e),ja=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:90}},{title:"Net Amount",width:{wpx:90}}],data:[]}];var s=0,n=0,c=0;for(var r in e){console.log("returnDate:",r),ja[0].data.push([{value:"Inv Date: "+r}]);var i=0,o=0;for(t=0;t<e[r].length>0;t++){c++;var l=e[r][t];if(ja[0].data.push([{value:"Inv No ("+l.code+") - "+c+" ["+l.customer_name+"]"}]),l.products){for(var d=0;d<l.products.length;d++){var j=l.products[d];ja[0].data.push([{value:j.name},{value:j.quantity.toFixed(2)},{value:j.unit?j.unit:"PCs"},{value:j.unit_price?j.unit_price.toFixed(2):0},{value:(j.unit_price*j.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(j.unit_price*j.quantity).toFixed(2)).toFixed(2)},{value:(j.unit_price*j.quantity).toFixed(2)}])}ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:l.discount.toFixed(2)}]),ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Tax"},{value:l.vat_price.toFixed(2)}]),ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total"},{value:(l.total-l.discount).toFixed(2)}]),i+=l.total-l.discount,o+=l.vat_price}}ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Tax"},{value:o.toFixed(2)}]),ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total"},{value:i.toFixed(2)}]),s+=i,n+=o}ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Tax"},{value:n.toFixed(2)}]),ja[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount"},{value:s.toFixed(2)}]),ua(ja),console.log("excelData:",ja)}function va(){pa="Sales Return Report",wa.from_date&&wa.to_date?pa+=" - From "+wa.from_date+" to "+wa.to_date:wa.from_date?pa+=" - From "+wa.from_date+" to "+Object(x.default)(new Date,"dd-MMM-yyyy"):wa.to_date?pa+=" - Upto "+wa.to_date:wa.date_str&&(pa+=" of "+wa.date_str),xa(pa)}function ya(){return ya=Object(b.a)(u.a.mark((function e(){var a,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},s="select=id,code,date,total,net_total,discount_percent,discount,products,customer_name,created_at,vat_price,loss,net_profit",t.get("store_id")&&(wa.store_id=t.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),wa.timezone_offset=parseFloat(c/60),wa.stats="1",Sa(wa),""!==(r=La(wa))&&(r="&"+r),i=500,o=[],l=1,va();case 15:return fa=!0,_a(!0),e.next=20,fetch("/v1/sales-return?"+s+r+"&sort="+Pa+Da+"&page="+l+"&limit="+i,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(kt(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 20:if(0!==(d=e.sent).length){e.next=23;break}return e.abrupt("break",27);case 23:o=o.concat(d),l++;case 25:e.next=15;break;case 27:ia=o,oa(o),console.log("allSalesReturns:",ia),ga(),fa=!1,_a(!1);case 33:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}var Na=Object(s.useState)({}),Ca=Object(o.a)(Na,2),wa=Ca[0],Sa=Ca[1],ka=Object(s.useState)("created_at"),Ta=Object(o.a)(ka,2),Da=Ta[0],Fa=Ta[1],Ma=Object(s.useState)("-"),Ra=Object(o.a)(Ma,2),Pa=Ra[0],Aa=Ra[1];function La(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ia(){return(Ia=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=La({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Lt(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(){return(Ea=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),Lt([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=La({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,Yt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t){wa[e]=t,re(ce=1),qa()}function Ua(e,t){if(!t)return ce=1,wa[e]="",re(ce),void qa();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(et(t),nt(""),ot(""),wa.from_date="",wa.to_date="",wa[e]=t):"from_date"===e?(nt(t),et(""),wa.date="",wa[e]=t):"to_date"===e?(ot(t),et(""),wa.date="",wa[e]=t):"created_at"===e&&(xt(t),_t(""),Nt(""),wa.created_at_from="",wa.created_at_to="",wa[e]=t),"created_at_from"===e?(_t(t),xt(""),wa.created_at="",wa[e]=t):"created_at_to"===e&&(Nt(t),xt(""),wa.created_at="",wa[e]=t),re(ce=1),qa()}function Ba(e,t){"created_by"===e?ta(t):"customer_id"===e?Vt(t):"status"===e?na(t):"payment_status"===e?us(t):"payment_methods"===e&&os(t),wa[e]=Object.values(t).map((function(e){return e.id})).join(","),re(ce=1),qa()}function qa(){ua(ja=[]);var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(wa.store_id=t.get("store_id")),e.order&&(wa.order_id=e.order.id);var s=(new Date).getTimezoneOffset();wa.timezone_offset=parseFloat(s/60),wa.stats="1",Sa(wa);var n=La(wa);""!==n&&(n="&"+n),kt(!0),fetch("/v1/sales-return?select=id,code,date,net_total,created_by_name,customer_name,status,created_at,net_profit,net_loss,cash_discount,order_code,order_id,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount,store_id"+n+"&sort="+Pa+Da+"&page="+ce+"&limit="+ee,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:kt(!1),Mt(!1),Y(n.result),o=parseInt((n.total_count+ee-1)/ee),de(o),he(n.total_count),ve((ce-1)*ee),Oe(n.result.length),c=n.meta.total_sales_return,r(c),Xa=n.meta.net_profit,Ya(Xa),es=n.meta.net_loss,ts(es),d=n.meta.vat_price,j(d),C=n.meta.discount,w(C),D=n.meta.cash_discount,F(D),P=n.meta.paid_sales_return,A(P),E=n.meta.unpaid_sales_return,z(E),q=n.meta.cash_sales_return,V(q),W=n.meta.bank_account_sales_return,Q(W);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){kt(!1),Mt(!1),console.log(e)}))}function Va(e){Fa(Da=e),Aa(Pa="-"===Pa?"":"-"),qa()}function Ha(e){ce=parseInt(e),re(ce),qa()}var Ga=Object(s.useRef)(),Wa=Object(s.useRef)(),Qa=Object(s.useRef)(),Za=Object(s.useState)(0),Ka=Object(o.a)(Za,2),Xa=Ka[0],Ya=Ka[1],Ja=Object(s.useState)(0),$a=Object(o.a)(Ja,2),es=$a[0],ts=$a[1],as=Object(s.useState)("-"),ss=Object(o.a)(as,2),ns=ss[0],cs=(ss[1],Object(s.useState)([])),rs=Object(o.a)(cs,2),is=rs[0],os=rs[1],ls=Object(s.useState)([]),ds=Object(o.a)(ls,2),js=ds[0],us=ds[1],bs=Object(s.useState)({}),hs=Object(o.a)(bs,2),ps=hs[0],xs=hs[1],ms=Object(s.useState)(!1),Os=Object(o.a)(ms,2),fs=Os[0],_s=Os[1];function gs(e){xs(e),fs=!0,_s(!0)}function vs(){fs=!1,_s(!1)}var ys=Object(s.useRef)(),Ns=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ut,{ref:ys,refreshList:qa,refreshSalesList:e.refreshSalesList,showToastMessage:e.showToastMessage}),Object(T.jsx)(Et,{ref:Ga}),Object(T.jsx)(Ht,{ref:Wa,showToastMessage:e.showToastMessage,openDetailsView:function(e){Qa.current.open(e)}}),Object(T.jsx)(qt,{ref:Qa,openUpdateForm:function(e){Wa.current.open(e)},showToastMessage:e.showToastMessage}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Paid Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:P.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Cash Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:q.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Bank Account Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:W.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Credit Sales Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:E.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Xa,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:es,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"",Object(T.jsxs)("h1",{className:"text-end",children:["Sales Return Discount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:C.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Cash Discount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:D.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["VAT Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Sales Returns"})}),Object(T.jsxs)("div",{className:"col text-end",children:[Object(T.jsx)(Zt,{filename:pa,element:ja.length>0?Object(T.jsx)(_.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Sales Return Report"}):"",children:Object(T.jsx)(Kt,{dataSet:ja,name:pa})}),0==ja.length?Object(T.jsx)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return ya.apply(this,arguments)},children:fa?"Preparing..":"Sales Return Report"}):"","\xa0\xa0",Object(T.jsx)("div",{className:"col text-end",children:e.order?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){ys.current.open(void 0,e.order.id)},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===be&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No SalesReturns to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bsalesreturn:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bsalesreturn:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Mt(!0),qa()},variant:"primary",disabled:Ft,children:[Ft?Object(T.jsx)(g.a,{as:"span",animation:"bsalesreturn",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:St&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:be>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:ee,onChange:function(e){var t;t=e.target.value,ee=parseInt(t),ae(ee),qa()},className:"form-control pull-right",style:{bsalesreturn:"solid 1px",bsalesreturnColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bsalesreturn:"solid 0px"},children:le?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ha(e.selected+1)},pageRangeDisplayed:5,pageCount:le,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ce-1}):""})}),Object(T.jsx)("div",{className:"row",children:be>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ge+1,"-",ge+me," of"," ",be]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ce," of ",le]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("code")},children:["ID","code"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("order_code")},children:["Order ID","order_code"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("date")},children:["Date","date"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("net_total")},children:["Net Total","net_total"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("cash_discount")},children:["Cash Discount","cash_discount"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"cash_discount"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("total_payment_paid")},children:["Amount paid","total_payment_paid"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"total_payment_paid"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("balance_amount")},children:["Balance","balance_amount"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"balance_amount"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("payments_count")},children:["No.of Payments","payments_count"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"payments_count"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("payment_status")},children:["Payment Status","payment_status"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_status"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("payment_methods")},children:["Payment Methods","payment_methods"===Da&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_methods"===Da&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("net_profit")},children:["Net Profit","net_profit"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_profit"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("net_loss")},children:["Net Loss","net_loss"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_loss"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("created_by")},children:["Created By","created_by"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("customer_name")},children:["Customer","customer_name"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Va("created_at")},children:["Created At","created_at"===Da&&"-"===Pa?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Da&&""===Pa?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return za("code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return za("order_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"125px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:$e,selected:Te,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return et(""),void Ua("date_str","");Ua("date_str",e),Te=e,De(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return we(!Ce)},children:Ce?"Less..":"More.."}),Object(T.jsx)("br",{}),Ce?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:st,selected:Re,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return nt(""),void Ua("from_date","");Ua("from_date",e),Re=e,Pe(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:it,selected:Ie,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return ot(""),void Ua("to_date","");Ua("to_date",e),Ie=e,Ee(e)}})]}):null]})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return za("net_total",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"cash_discount",onChange:function(e){return za("cash_discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"total_payment_paid",onChange:function(e){return za("total_payment_paid",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"balance_amount",onChange:function(e){return za("balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"payments_count",onChange:function(e){return za("payments_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_status",labelKey:"name",onChange:function(e){Ba("payment_status",e)},options:[{id:"paid",name:"Paid"},{id:"not_paid",name:"Not Paid"},{id:"paid_partially",name:"Paid partially"}],placeholder:"Select Payment Status",selected:js,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_methods",labelKey:"name",onChange:function(e){Ba("payment_methods",e)},options:[{id:"cash",name:"cash"},{id:"bank_account",name:"Bank Account / Debit / Credit card"}],placeholder:"Select payment methods",selected:is,highlightOnlyResult:!0,multiple:!0})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_profit",onChange:function(e){return za("net_profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_loss",onChange:function(e){return za("net_loss",e.target.value)},className:"form-control"})}):"",Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){Ba("created_by",e)},options:Xt,placeholder:"Select Users",selected:ea,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ea.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){Ba("customer_id",e)},options:At,placeholder:"name or mob",selected:Bt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ia.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:pt,selected:Be,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return xt(""),void Ua("created_at","");Ua("created_at",e),Be=e,qe(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ut(!jt)},children:jt?"Less..":"More.."}),Object(T.jsx)("br",{}),jt?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ft,selected:Ge,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return _t(""),void Ua("created_at_from","");Ua("created_at_from",e),Ge=e,We(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:yt,selected:Ke,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Nt(""),void Ua("created_at_to","");Ua("created_at_to",e),Ke=e,Xe(e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:X&&X.map((function(e){var a,s,n,c,r;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:e.order_code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.net_total," "]}),Object(T.jsx)("td",{children:null===(a=e.cash_discount)||void 0===a?void 0:a.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){gs(e)},children:null===(s=e.total_payment_paid)||void 0===s?void 0:s.toFixed(2)})}),Object(T.jsx)("td",{children:null===(n=e.balance_amount)||void 0===n?void 0:n.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){gs(e)},children:e.payments_count})}),Object(T.jsxs)("td",{children:["paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]}),Object(T.jsx)("td",{children:e.payment_methods&&e.payment_methods.map((function(e){return Object(T.jsx)("span",{className:"badge bg-info",children:e})}))}),"true"===t.get("admin")?Object(T.jsx)("td",{children:null===(c=e.net_profit)||void 0===c?void 0:c.toFixed(2)}):"","true"===t.get("admin")?Object(T.jsx)("td",{children:null===(r=e.net_loss)||void 0===r?void 0:r.toFixed(2)}):"",Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){var t;t=e.id,ys.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Ga.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),le?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ha(e.selected+1)},pageRangeDisplayed:5,pageCount:le,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ce-1}):""]})})})})]}),Object(T.jsxs)(f.a,{show:fs,size:"lg",onHide:vs,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Payment history of Sales Return #",ps.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:vs,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(Gt,{ref:Ns,showToastMessage:e.showToastMessage,salesReturn:ps,refreshSalesReturnList:qa})})]})]})},Yt=Qt.a.ExcelFile,Jt=Qt.a.ExcelFile.ExcelSheet,$t=Object(s.forwardRef)((function(e,t){var a=new h.a,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],m=d[1],v=Object(s.useState)("Sales Report"),C=Object(o.a)(v,2),w=C[0],S=C[1],k=Object(s.useState)(!1),D=Object(o.a)(k,2),F=D[0],M=D[1];function R(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<r.length;t++){var a=Object(x.default)(new Date(r[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(r[t])}console.log("groupedByDate:",e),j=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:180}},{title:"Net Amount",width:{wpx:90}}],data:[],filename:w}];var s=0,n=0,c=0,i=0;for(var o in e){j[0].data.push([{value:"Inv Date: "+o}]);var l=0,d=0,u=0;for(t=0;t<e[o].length>0;t++){i++;var b=e[o][t];if(j[0].data.push([{value:"Inv No ("+b.code+") - "+i}]),j[0].data.push([{value:"Customer: "+b.customer_name}]),b.customer&&b.customer.vat_no?j[0].data.push([{value:"Customer VAT NO.: "+b.customer.vat_no}]):j[0].data.push([{value:"Customer VAT NO.: N/A"}]),b.products){for(var h=0;h<b.products.length;h++){var p=b.products[h];j[0].data.push([{value:p.name},{value:p.quantity.toFixed(2)},{value:p.unit?p.unit:"PCs"},{value:p.unit_price?p.unit_price.toFixed(2):0},{value:(p.unit_price*p.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(p.unit_price*p.quantity).toFixed(2)).toFixed(2)},{value:(p.unit_price*p.quantity).toFixed(2)}])}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Shipping/Handling Fees"},{value:b.shipping_handling_fees.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount Before VAT"},{value:(b.total+b.shipping_handling_fees).toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:b.discount.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After Discount"},{value:(b.total+b.shipping_handling_fees-b.discount).toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"VAT Amount"},{value:b.vat_price.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After VAT"},{value:(b.total+b.shipping_handling_fees-b.discount+b.vat_price).toFixed(2)}]),u+=b.vat_price,l+=b.total+b.shipping_handling_fees-b.discount,d+=b.total+b.shipping_handling_fees-b.discount+b.vat_price,b.discount,b.shipping_handling_fees}}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total Before VAT"},{value:l.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day VAT"},{value:u.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total After VAT"},{value:d.toFixed(2)}]),s+=l,n+=d,c+=u}j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount Before VAT"},{value:s.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total VAT"},{value:c.toFixed(2)}]),j[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount After VAT"},{value:n.toFixed(2)}]),m(j),console.log("excelData:",j)}function P(){w="Sales Report",sa.created_at_from&&sa.created_at_to?w+=" - From "+sa.created_at_from+" to "+sa.created_at_to:sa.created_at_from?w+=" - From "+sa.created_at_from+" to "+Object(x.default)(new Date,"dd-MMM-yyyy"):sa.created_at_to?w+=" - Upto "+sa.created_at_to:sa.created_at&&(w+=" of "+sa.created_at),S(w)}function A(){return A=Object(b.a)(u.a.mark((function e(){var t,s,n,c,o,l,d,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},s="select=id,code,date,total,net_total,shipping_handling_fees,discount_percent,discount,products,customer_name,created_at,vat_price,customer_id,customer.id,customer.vat_no",a.get("store_id")&&(sa.store_id=a.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),sa.timezone_offset=parseFloat(c/60),sa.stats="1",na(sa),""!==(o=ss(sa))&&(o="&"+o),l=500,d=[],j=1,P();case 15:return F=!0,M(!0),e.next=20,fetch("/v1/order?"+s+o+"&sort="+ja+ia+"&page="+j+"&limit="+l,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(mt(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 20:if(0!==(h=e.sent).length){e.next=23;break}return e.abrupt("break",27);case 23:d=d.concat(h),j++;case 25:e.next=15;break;case 27:r=d,i(d),console.log("allOrders:",r),R(),F=!1,M(!1);case 33:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var L=Object(s.useState)([]),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(5),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(0),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(1),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(0),oe=Object(o.a)(ie,2),de=oe[0],je=oe[1],ue=Object(s.useState)(!1),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)(new Date),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(new Date),ge=Object(o.a)(_e,2),ve=ge[0],ye=ge[1],Ne=Object(s.useState)(new Date),Ce=Object(o.a)(Ne,2),we=Ce[0],Se=Ce[1],ke=Object(s.useState)(new Date),Te=Object(o.a)(ke,2),De=Te[0],Fe=Te[1],Me=Object(s.useState)(new Date),Re=Object(o.a)(Me,2),Pe=Re[0],Ae=Re[1],Le=Object(s.useState)(new Date),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Ue=Object(s.useState)(""),Be=Object(o.a)(Ue,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)(""),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1],Ze=Object(s.useState)(""),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Ye=Ke[1],Je=Object(s.useState)(!1),$e=Object(o.a)(Je,2),et=$e[0],tt=$e[1],at=Object(s.useState)(""),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)(""),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)(""),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)(!1),pt=Object(o.a)(ht,2),xt=pt[0],mt=pt[1],Ot=Object(s.useState)(!1),ft=Object(o.a)(Ot,2),_t=ft[0],gt=ft[1],vt=Object(s.useState)([]),yt=Object(o.a)(vt,2),Ct=yt[0],wt=yt[1],St=Object(s.useState)([]),kt=Object(o.a)(St,2),Tt=kt[0],Ft=kt[1],Mt=Object(s.useState)([]),Rt=Object(o.a)(Mt,2),Pt=Rt[0],At=Rt[1],Lt=Object(s.useState)([]),It=Object(o.a)(Lt,2),Et=It[0],zt=It[1],Bt=Object(s.useState)([]),qt=Object(o.a)(Bt,2),Vt=(qt[0],qt[1]),Ht=Object(s.useState)([]),Gt=Object(o.a)(Ht,2),Wt=Gt[0],Qt=Gt[1],Zt=Object(s.useState)([]),Kt=Object(o.a)(Zt,2),$t=Kt[0],ea=Kt[1];Object(s.useEffect)((function(){ls()}),[]);var ta=Object(s.useState)({}),aa=Object(o.a)(ta,2),sa=aa[0],na=aa[1],ca=Object(s.useState)("created_at"),ra=Object(o.a)(ca,2),ia=ra[0],oa=ra[1],la=Object(s.useState)("-"),da=Object(o.a)(la,2),ja=da[0],ua=da[1],ba=Object(s.useState)(0),ha=Object(o.a)(ba,2),pa=ha[0],xa=ha[1],ma=Object(s.useState)(0),Oa=Object(o.a)(ma,2),fa=Oa[0],_a=Oa[1],ga=Object(s.useState)(0),va=Object(o.a)(ga,2),ya=va[0],Na=va[1],Ca=Object(s.useState)(0),wa=Object(o.a)(Ca,2),Sa=wa[0],ka=wa[1],Ta=Object(s.useState)(0),Da=Object(o.a)(Ta,2),Fa=Da[0],Ma=Da[1],Ra=Object(s.useState)(0),Pa=Object(o.a)(Ra,2),Aa=Pa[0],La=Pa[1],Ia=Object(s.useState)(0),Ea=Object(o.a)(Ia,2),za=Ea[0],Ua=Ea[1],Ba=Object(s.useState)(0),qa=Object(o.a)(Ba,2),Va=qa[0],Ha=qa[1],Ga=Object(s.useState)(0),Wa=Object(o.a)(Ga,2),Qa=Wa[0],Za=Wa[1],Ka=Object(s.useState)(0),Xa=Object(o.a)(Ka,2),Ya=Xa[0],Ja=Xa[1],$a=Object(s.useState)(0),es=Object(o.a)($a,2),ts=es[0],as=es[1];function ss(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function ns(){return(ns=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=ss({name:t}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,wt(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(){return(cs=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),wt([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=ss({name:t}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,At(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){sa[e]=t,Q(W=1),ls()}function is(e,t){if(!t)return sa[e]="",Q(W=1),void ls();if(t){var a=new Date(t);t=Object(x.default)(a,"MMM dd yyyy"),console.log("value2:",t),console.log(Intl.DateTimeFormat().resolvedOptions().timeZone)}else t="";"date_str"===e?(Ve(t),Qe(""),Ye(""),sa.from_date="",sa.to_date="",sa[e]=t):"from_date"===e?(Qe(t),Ve(""),sa.date="",sa[e]=t):"to_date"===e?(Ye(t),Ve(""),sa.date="",sa[e]=t):"created_at"===e&&(ct(t),lt(""),bt(""),sa.created_at_from="",sa.created_at_to="",sa[e]=t,console.log("searchParams[field]:",sa[e])),"created_at_from"===e?(lt(t),ct(""),sa.created_at="",sa[e]=t):"created_at_to"===e&&(bt(t),ct(""),sa.created_at="",sa[e]=t),Q(W=1),ls()}function os(e,t){"created_by"===e?zt(t):"customer_id"===e?Ft(t):"status"===e?Vt(t):"payment_status"===e?Qt(t):"payment_methods"===e&&ea(t),sa[e]=Object.values(t).map((function(e){return e.id})).join(","),Q(W=1),ls()}function ls(){m(j=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};a.get("store_id")&&(sa.store_id=a.get("store_id"));var t=(new Date).getTimezoneOffset();console.log("Timezone:",parseFloat(t/60)),sa.timezone_offset=parseFloat(t/60),sa.stats="1",na(sa);var s=ss(sa);""!==s&&(s="&"+s),mt(!0),fetch("/v1/order?select=id,code,date,net_total,return_count,cash_discount,total_payment_received,payments_count,payment_methods,balance_amount,discount_percent,discount,created_by_name,customer_name,status,payment_status,payment_method,created_at,loss,net_loss,net_profit,store_id,total"+s+"&sort="+ja+ia+"&page="+W+"&limit="+q,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:mt(!1),gt(!1),z(n.result),r=parseInt((n.total_count+q-1)/q),Y(r),ae(n.total_count),je((W-1)*q),re(n.result.length),pa=n.meta.total_sales,xa(pa),fa=n.meta.net_profit,_a(fa),ts=n.meta.net_loss,as(ts),ya=n.meta.vat_price,Na(ya),Sa=n.meta.shipping_handling_fees,ka(Sa),Fa=n.meta.discount,Ma(Fa),Aa=n.meta.cash_discount,La(Aa),za=n.meta.paid_sales,Ua(za),Va=n.meta.unpaid_sales,Ha(Va),Qa=n.meta.cash_sales,Za(Qa),Ya=n.meta.bank_account_sales,Ja(Ya);case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){mt(!1),gt(!1),console.log(e)}))}function ds(e){oa(ia=e),ua(ja="-"===ja?"":"-"),ls()}function js(e){W=parseInt(e),Q(W),ls()}var us=Object(s.useState)(!1),bs=Object(o.a)(us,2),hs=bs[0],ps=bs[1],xs=Object(s.useState)({}),ms=Object(o.a)(xs,2),Os=ms[0],fs=ms[1];function _s(e){fs(e),hs=!0,ps(!0)}function gs(){hs=!1,ps(!1)}var vs=Object(s.useState)(!1),ys=Object(o.a)(vs,2),Ns=ys[0],Cs=ys[1];function ws(){Ns=!1,Cs(!1)}var Ss=Object(s.useRef)();var ks=Object(s.useRef)();function Ts(){ks.current.open()}Object(s.useRef)();Object(s.useRef)();var Ds=Object(s.useRef)(),Fs=Object(s.useRef)();var Ms=Object(s.useRef)();Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Nt,{ref:ks,refreshList:ls,showToastMessage:e.showToastMessage,openCreateForm:Ts}),Object(T.jsx)(le,{ref:Ss,openCreateForm:Ts}),Object(T.jsx)(Ut,{ref:Ms,showToastMessage:e.showToastMessage,refreshSalesList:ls}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:pa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Paid Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:za.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Cash Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Qa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Bank Account Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ya.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Credit Sales: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Va.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Cash Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Aa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Sales Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Fa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Shipping/Handling fees: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Sa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ya.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===a.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Net Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:fa.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===a.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Loss: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ts.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Sales Orders"})}),Object(T.jsxs)("div",{className:"col text-end",children:[Object(T.jsx)(Yt,{filename:w,element:j.length>0?Object(T.jsx)(_.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Sales Report"}):"",children:Object(T.jsx)(Jt,{dataSet:j,name:w})}),0==j.length?Object(T.jsx)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return A.apply(this,arguments)},children:F?"Preparing..":"Sales Report"}):"","\xa0\xa0",Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Ts,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===ee&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Orders to display"})})}),Object(T.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){gt(!0),ls()},variant:"primary",disabled:_t,children:[_t?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:xt&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:ee>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:q,onChange:function(e){var t;t=e.target.value,q=parseInt(t),V(q),ls()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{border:"solid 0px",width:"100%"},children:X?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){js(e.selected+1)},pageRangeDisplayed:5,pageCount:X,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:W-1}):""})}),Object(T.jsx)("div",{className:"row",children:ee>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",de+1,"-",de+ce," of"," ",ee]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",W," of ",X]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-bordered table-sm",style:{},children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("code")},children:["ID","code"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("date")},children:["Date","date"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("net_total")},children:["Net Total","net_total"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("cash_discount")},children:["Cash Discount","cash_discount"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"cash_discount"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("total_payment_received")},children:["Amount Paid","total_payment_received"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"total_payment_received"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("balance_amount")},children:["Balance","balance_amount"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"balance_amount"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("payments_count")},children:["No.of Payments","payments_count"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"payments_count"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("payment_status")},children:["Payment Status","payment_status"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_status"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("payment_methods")},children:["Payment Methods","payment_methods"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_methods"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("discount")},children:["Sales Discount","discount"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("discount_percent")},children:["Sales Discount %","discount_percent"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount_percent"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===a.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("net_profit")},children:["Net Profit","net_profit"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_profit"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===a.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("net_loss")},children:["Net Loss","net_loss"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_loss"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("created_by")},children:["Created By","created_by"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("return_count")},children:["Returns","return_count"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"return_count"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("customer_name")},children:["Customer","customer_name"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ds("created_at")},children:["Created At","created_at"===ia&&"-"===ja?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ia&&""===ja?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return rs("code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"125px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:qe,selected:Oe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Ve(""),void is("date_str","");is("date_str",e),Oe=e,fe(e)}}),Object(T.jsx)("br",{}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return pe(!he)},children:he?"Less..":"More.."}),Object(T.jsx)("br",{}),he?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:We,selected:ve,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Qe(""),void is("from_date","");is("from_date",e),ve=e,ye(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:Xe,selected:we,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Ye(""),void is("to_date","");is("to_date",e),we=e,Se(e)}})]}):null]})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return rs("net_total",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"cash_discount",onChange:function(e){return rs("cash_discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"total_payment_received",onChange:function(e){return rs("total_payment_received",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"balance_amount",onChange:function(e){return rs("balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"payments_count",onChange:function(e){return rs("payments_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_status",labelKey:"name",onChange:function(e){os("payment_status",e)},options:[{id:"paid",name:"Paid"},{id:"not_paid",name:"Not Paid"},{id:"paid_partially",name:"Paid partially"}],placeholder:"Select Payment Status",selected:Wt,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_methods",labelKey:"name",onChange:function(e){os("payment_methods",e)},options:[{id:"cash",name:"cash"},{id:"bank_account",name:"Bank Account / Debit / Credit card"},{id:"customer_account",name:"Customer account"}],placeholder:"Select payment methods",selected:$t,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"discount",onChange:function(e){return rs("discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"discount_percent",onChange:function(e){return rs("discount_percent",e.target.value)},className:"form-control"})}),"true"===a.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_profit",onChange:function(e){return rs("net_profit",e.target.value)},className:"form-control"})}):"","true"===a.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_loss",onChange:function(e){return rs("net_loss",e.target.value)},className:"form-control"})}):"",Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){os("created_by",e)},options:Pt,placeholder:"Select Users",selected:Et,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){cs.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"return_count",onChange:function(e){return rs("return_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){os("customer_id",e)},options:Ct,placeholder:"name or mob",selected:Tt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ns.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:nt,selected:De,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return ct(""),void is("created_at","");is("created_at",e),De=e,Fe(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return tt(!et)},children:et?"Less..":"More.."}),Object(T.jsx)("br",{}),et?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ot,selected:Pe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return lt(""),void is("created_at_from","");is("created_at_from",e),Pe=e,Ae(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ut,selected:Ee,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return bt(""),void is("created_at_to","");is("created_at_to",e),Ee=e,ze(e)}})]}):null]}),Object(T.jsx)("th",{style:{width:"150px"}})]})}),Object(T.jsx)("tbody",{className:"text-center",children:E&&E.map((function(e){var t,s,n,c,r,i;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{children:null===(t=e.net_total)||void 0===t?void 0:t.toFixed(2)}),Object(T.jsx)("td",{children:null===(s=e.cash_discount)||void 0===s?void 0:s.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){_s(e)},children:null===(n=e.total_payment_received)||void 0===n?void 0:n.toFixed(2)})}),Object(T.jsx)("td",{children:null===(c=e.balance_amount)||void 0===c?void 0:c.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){_s(e)},children:e.payments_count})}),Object(T.jsxs)("td",{children:["paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]}),Object(T.jsx)("td",{children:e.payment_methods&&e.payment_methods.map((function(e){return Object(T.jsx)("span",{className:"badge bg-info",children:e})}))}),Object(T.jsxs)("td",{children:[e.discount.toFixed(2)," "]}),Object(T.jsxs)("td",{children:[e.discount_percent.toFixed(2)," %"]}),"true"===a.get("admin")?Object(T.jsxs)("td",{children:[null===(r=e.net_profit)||void 0===r?void 0:r.toFixed(2)," "]}):"","true"===a.get("admin")?Object(T.jsxs)("td",{children:[null===(i=e.net_loss)||void 0===i?void 0:i.toFixed(2)," "]}):"",Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){!function(e){fs(e),Ns=!0,Cs(!0)}(e)},children:e.return_count})}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){var t;t=e.id,ks.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Ss.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsxs)("button",{className:"btn btn-dark btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Create Sales Return",onClick:function(){var t;t=e.id,Ms.current.open(void 0,t)},children:[Object(T.jsx)("i",{className:"bi bi-arrow-left"})," Return"]})]})]},e.code)}))})]})}),X?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){js(e.selected+1)},pageRangeDisplayed:5,pageCount:X,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:W-1}):""]})})})})]}),Object(T.jsxs)(f.a,{show:hs,size:"lg",onHide:gs,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Payment history of Order #",Os.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:gs,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(Dt,{ref:Fs,showToastMessage:e.showToastMessage,order:Os,refreshSalesList:ls})})]}),Object(T.jsxs)(f.a,{show:Ns,size:"lg",onHide:ws,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Sales Returns of Sale Order #",Os.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ws,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(Xt,{ref:Ds,showToastMessage:e.showToastMessage,order:Os,refreshSalesList:ls})})]})]})})),ea=$t,ta=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get SalesCashDiscount");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/sales-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Sales Cash Discount of Order #",c.order_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openCreateForm(e.order)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Order ID:"}),Object(T.jsxs)("td",{children:[" ",c.order_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date :"}),Object(T.jsxs)("td",{children:["  ",c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):""," "]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),aa=ta,sa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(C.a)({},t)),(z={}).date_str=new Date,t&&(z.order_id=t.id,z.order_code=t.code,z.store_id=t.store_id),U(z),R(M=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:w.get("access_token")}};z={},U(Object(C.a)({},z)),M=[],R(Object(i.a)(M)),fetch("/v1/sales-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:p({}),console.log("Response:"),console.log(n),(z=n.result).date_str=n.result.date,console.log("formData:",z),z.parent_id&&(M=[{id:z.parent_id,name:z.parent_name}],R(Object(i.a)(M))),U(Object(C.a)({},z)),console.log("formData:",z);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N(!1),p(e)}))}(e),H(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(!1),v=Object(o.a)(m,2),y=v[0],N=v[1],w=new h.a,S=Object(s.useState)([]),k=Object(o.a)(S,2),D=(k[0],k[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(!1),A=Object(o.a)(P,2),L=(A[0],A[1]),I=Object(s.useState)({}),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(!1),q=Object(o.a)(B,2),V=q[0],H=q[1];function G(){H(!1)}function W(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",z.logo),L(!0);var a="/v1/sales-cash-discount",s="POST";if(z.id&&(a="/v1/sales-cash-discount/"+z.id,s="PUT"),z.amount<=0)return j.amount="Amount should be > 0:",void p(Object(C.a)({},j));if(z.amount>=c.total_payment_received)return j.amount="Amount should be less than total paid amount:"+c.total_payment_received,void p(Object(C.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:w.get("access_token")},body:JSON.stringify(z)};console.log("formData:",z),N(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:p({}),N(!1),L(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),G(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){N(!1),L(!1),console.log("Inside catch"),console.log(t),p(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating SalesCashDiscount!","danger")}))}return Object(s.useEffect)((function(){w.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:V,size:"lg",onHide:G,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:z.id?"Update Cash Discount for sales order#"+z.order_code:"Add Cash Discount for sales order #"+z.order_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){G(),e.openDetailsView(z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:W,children:[y?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:G,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:W,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:z.amount?z.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?parseFloat(e.target.value)<=0?(z.amount=e.target.value,j.amount="Amount should be > 0",void p(Object(C.a)({},j))):(z.amount=parseFloat(e.target.value),j.amount="",console.log("order.total_payment_received:",c.total_payment_received),z.amount>=c.total_payment_received?(j.amount="Cash discount amount should be less than total paid amount:"+c.total_payment_received,void p(Object(C.a)({},j))):(p(Object(C.a)({},j)),U(Object(C.a)({},z)),void console.log(z))):(z.amount=e.target.value,j.amount="Invalid amount",void p(Object(C.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(T.jsx)("div",{style:{color:"red"},children:j.amount}),z.amount&&!j.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:z.date_str?new Date(z.date_str):null,value:z.date_str?Object(x.default)(new Date(z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),z.date_str=e,U(Object(C.a)({},z))}}),j.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.date_str]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsxs)("select",{value:z.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",p(Object(C.a)({},j)),z.method="",void U(Object(C.a)({},z));j.method="",p(Object(C.a)({},j)),z.method=e.target.value,U(Object(C.a)({},z)),console.log(z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]})}),j.method&&Object(T.jsx)("div",{style:{color:"red"},children:j.method}),z.method&&!j.method&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:G,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:W,children:y?Object(T.jsx)(g.a,{as:"span",animation:"bsalescashdiscount",size:"sm",role:"status","aria-hidden":!0})+" Processing...":z.id?"Update":"Create"})]})]})})]})})})),na=sa;var ca=function(e){var t=new h.a,a=new Date,n=Object(s.useState)("-"),c=Object(o.a)(n,2),r=c[0],i=(c[1],Object(s.useState)(!1)),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(""),f=Object(o.a)(m,2),v=f[0],C=f[1],w=Object(s.useState)(""),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(""),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)([]),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(5),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(0),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(1),J=Object(o.a)(Y,2),$=J[0],ee=J[1],ae=Object(s.useState)(0),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(0),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(!1),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(""),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)(""),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)(""),ye=Object(o.a)(ve,2),Ne=ye[0],Ce=ye[1],we=Object(s.useState)(!1),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)(!1),Fe=Object(o.a)(De,2),Me=Fe[0],Re=Fe[1],Pe=Object(s.useState)([]),Ae=Object(o.a)(Pe,2),Le=Ae[0],Ie=Ae[1],Ee=Object(s.useState)([]),ze=Object(o.a)(Ee,2),Ue=ze[0],Be=ze[1];Object(s.useEffect)((function(){nt()}),[]);var qe=Object(s.useState)({}),Ve=Object(o.a)(qe,2),He=Ve[0],Ge=Ve[1],We=Object(s.useState)("created_at"),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1],Xe=Object(s.useState)("-"),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=Ye[1];function et(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function tt(){return(tt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=et({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Ie(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e,t){He[e]=t,W(G=1),nt()}function st(e,t){if(!t)return G=1,He[e]="",W(G),void nt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(C(t),D(""),P(""),He.from_date="",He.to_date="",He[e]=t):"from_date"===e?(D(t),C(""),He.date="",He[e]=t):"to_date"===e?(P(t),C(""),He.date="",He[e]=t):"created_at"===e&&(me(t),ge(""),Ce(""),He.created_at_from="",He.created_at_to="",He[e]=t),"created_at_from"===e?(ge(t),me(""),He.created_at="",He[e]=t):"created_at_to"===e&&(Ce(t),me(""),He.created_at="",He[e]=t),W(G=1),nt()}function nt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(He.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();He.timezone_offset=parseFloat(a/60),Ge(He);var s=et(He);""!==s&&(s="&"+s),Te(!0),fetch("/v1/sales-cash-discount?select=id,date,method,amount,store_name,order_code,order_id,created_by_name,created_at"+s+"&sort="+Je+Ze+"&page="+G+"&limit="+B,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Te(!1),Re(!1),E(n.result),r=parseInt((n.total_count+B-1)/B),X(r),ee(n.total_count),le((G-1)*B),ce(n.result.length),ut=n.meta.total_cash_discount,bt(ut);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Te(!1),Re(!1),console.log(e)}))}function ct(e){Ke(Ze=e),$e(Je="-"===Je?"":"-"),nt()}function rt(e){G=parseInt(e),W(G),nt()}var it=Object(s.useRef)();function ot(e){it.current.open(e)}var lt=Object(s.useRef)(),dt=Object(s.useState)(0),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(na,{ref:lt,refreshList:nt,showToastMessage:e.showToastMessage,openDetailsView:ot}),Object(T.jsx)(aa,{ref:it,openUpdateForm:function(e){lt.current.open(e)},openCreateForm:function(){lt.current.open()}}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ut,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Sales Cash Discounts"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===$&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No sales cash discounts to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bsalescashdiscount:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bsalescashdiscount:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Re(!0),nt()},variant:"primary",disabled:Me,children:[Me?Object(T.jsx)(g.a,{as:"span",animation:"bsalescashdiscount",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ke&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:$>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:B,onChange:function(e){var t;t=e.target.value,B=parseInt(t),q(B),nt()},className:"form-control pull-right",style:{bsalescashdiscount:"solid 1px",bsalescashdiscountColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bsalescashdiscount:"solid 0px"},children:K?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){rt(e.selected+1)},pageRangeDisplayed:5,pageCount:K,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:G-1}):""})}),Object(T.jsx)("div",{className:"row",children:$>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",oe+1,"-",oe+ne," of"," ",$]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",G," of ",K]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("order_code")},children:["Order ID","order_code"===Ze&&"-"===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"order_code"===Ze&&""===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("date")},children:["Date","date"===Ze&&"-"===r?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Ze&&""===r?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("amount")},children:["Amount","amount"===Ze&&"-"===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Ze&&""===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("method")},children:["Payment Method","method"===Ze&&"-"===r?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Ze&&""===r?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("created_by_name")},children:["Created By","created_by_name"===Ze&&"-"===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Ze&&""===Je?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ct("created_at")},children:["Created At","created_at"===Ze&&"-"===Je?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Ze&&""===Je?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"order_code",onChange:function(e){return at("order_code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:v,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return C(""),void st("date_str","");st("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return j(!d)},children:d?"Less..":"More.."}),Object(T.jsx)("br",{}),d?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:k,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return D(""),void st("from_date","");st("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:R,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return P(""),void st("to_date","");st("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return at("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return at("method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&Be(a),He[t]=Object.values(a).map((function(e){return e.id})).join(","),W(G=1),nt()},options:Le,placeholder:"Select Users",selected:Ue,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){tt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:xe,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return me(""),void st("created_at","");st("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return be(!ue)},children:ue?"Less..":"More.."}),Object(T.jsx)("br",{}),ue?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:_e,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ge(""),void st("created_at_from","");st("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:Ne,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return me(""),void st("created_at_to","");st("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:I&&I.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.order_code}),Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){ot(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})})]},e.id)}))})]})}),K?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){rt(e.selected+1)},pageRangeDisplayed:5,pageCount:K,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:G-1}):""]})})})})]})]})},ra=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseCashDiscount");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Purchase Cash Discount of Purchase #",c.purchase_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm(e.purchase)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Purchase ID:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),ia=ra,oa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(C.a)({},t)),I={},t&&(I.purchase_id=t.id,I.purchase_code=t.code,I.store_id=t.store_id),E(I),F(D=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:y.get("access_token")}};I={},E(Object(C.a)({},I)),D=[],F(Object(i.a)(D)),fetch("/v1/purchase-cash-discount/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:p({}),console.log("Response:"),console.log(n),I=n.result,console.log("formData:",I),E(Object(C.a)({},I)),console.log("formData:",I);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){v(!1),p(e)}))}(e),j={},p(Object(C.a)({},j)),q(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],p=d[1],x=Object(s.useState)(!1),m=Object(o.a)(x,2),O=m[0],v=m[1],y=new h.a,N=Object(s.useState)([]),w=Object(o.a)(N,2),S=(w[0],w[1],Object(s.useState)([])),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(!1),R=Object(o.a)(M,2),P=(R[0],R[1]),A=Object(s.useState)({}),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1];function V(){q(!1)}function H(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",I.logo),P(!0);var a="/v1/purchase-cash-discount",s="POST";if(I.id&&(a="/v1/purchase-cash-discount/"+I.id,s="PUT"),I.amount<=0)return j.amount="Amount should be > 0",void p(Object(C.a)({},j));if(I.amount>=c.total)return j.amount="Amount should be less than total amount:"+c.total,void p(Object(C.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:y.get("access_token")},body:JSON.stringify(I)};console.log("formData:",I),v(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:p({}),v(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),V(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){v(!1),P(!1),console.log("Inside catch"),console.log(t),p(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseCashDiscount!","danger")}))}return Object(s.useEffect)((function(){y.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:B,size:"lg",onHide:V,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:I.id?"Update Cash Discount for purchase#"+I.purchase_code:"Add Cash Discount for purchase#"+I.purchase_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[I.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){V(),e.openDetailsView(I.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:H,children:[O?Object(T.jsx)(g.a,{as:"span",animation:"bpurchase",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",I.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:V,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:H,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:I.amount?I.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat discount"),e.target.value?parseFloat(e.target.value)<=0?(I.amount=e.target.value,j.amount="Amount should be > 0",void p(Object(C.a)({},j))):(I.amount=parseFloat(e.target.value),j.amount="",console.log("purchase.total:",c.total),I.amount>=c.total?(j.amount="Amount should be less than total amount:"+c.total,void p(Object(C.a)({},j))):(p(Object(C.a)({},j)),E(Object(C.a)({},I)),void console.log(I))):(I.amount=e.target.value,j.amount="Invalid amount",void p(Object(C.a)({},j)))},className:"form-control",id:"name",placeholder:"Name"})}),j.amount&&Object(T.jsx)("div",{style:{color:"red"},children:j.amount}),I.amount&&!j.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:V,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:H,children:O?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasecashdiscount",size:"sm",role:"status","aria-hidden":!0})+" Processing...":I.id?"Update":"Create"})]})]})})]})})})),la=oa;var da=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(0),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];Object(s.useEffect)((function(){ze()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)("created_at"),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("-"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1];function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ae({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){Ce[e]=t,w(C=1),ze()}function Ee(e,t){if(!t)return C=1,Ce[e]="",w(C),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),w(C=1),ze()}function ze(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),we(Ce);var s=Ae(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/purchase-cash-discount?select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at"+s+"&sort="+Re+Te+"&page="+C+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),F(r),A(n.total_count),V((C-1)*j),z(n.result.length),Ze=n.meta.total_cash_discount,Ke(Ze);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){De(Te=e),Pe(Re="-"===Re?"":"-"),ze()}function Be(e){C=parseInt(e),w(C),ze()}function qe(e){Ge.current.open(e)}var Ve=Object(s.useRef)();function He(e){Ve.current.open(e)}var Ge=Object(s.useRef)(),We=Object(s.useState)(0),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(la,{ref:Ge,refreshList:ze,showToastMessage:e.showToastMessage,openDetailsView:He}),Object(T.jsx)(ia,{ref:Ve,openUpdateForm:qe,openCreateForm:function(){Ge.current.open()}}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Purchase Cash Discounts"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===P&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No purchase cash discounts to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bpurchasecashdiscount:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bpurchasecashdiscount:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){he(!0),ze()},variant:"primary",disabled:be,children:[be?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasecashdiscount",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ze()},className:"form-control pull-right",style:{bpurchasecashdiscount:"solid 1px",bpurchasecashdiscountColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bpurchasecashdiscount:"solid 0px"},children:D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""})}),Object(T.jsx)("div",{className:"row",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",q+1,"-",q+E," of"," ",P]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",C," of ",D]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("purchase_code")},children:["Purchase ID","purchase_code"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return Ie("purchase_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Ie("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),w(C=1),ze()},options:me,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:X,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void Ee("created_at","");Ee("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Q(!W)},children:W?"Less..":"More.."}),Object(T.jsx)("br",{}),W?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void Ee("created_at_from","");Ee("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void Ee("created_at_to","");Ee("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.purchase_code}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""]})})})})]})]})},ja=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchasePayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Payment of Purchase #",c.purchase_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openCreateForm(e.order)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Purchase ID:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.method]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date :"}),Object(T.jsxs)("td",{children:["  ",c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):""," "]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),ua=ja,ba=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(C.a)({},t)),(z={method:""}).date_str=new Date,t&&(z.purchase_id=t.id,z.purchase_code=t.code,z.store_id=t.store_id),U(z),R(M=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:w.get("access_token")}};z={},U(Object(C.a)({},z)),M=[],R(Object(i.a)(M)),fetch("/v1/purchase-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:p({}),console.log("Response:"),console.log(n),(z=n.result).date_str=n.result.date,console.log("formData:",z),U(Object(C.a)({},z)),console.log("formData:",z);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N(!1),p(e)}))}(e),j={},p(Object(C.a)({},j)),H(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(!1),v=Object(o.a)(m,2),y=v[0],N=v[1],w=new h.a,S=Object(s.useState)([]),k=Object(o.a)(S,2),D=(k[0],k[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(!1),A=Object(o.a)(P,2),L=(A[0],A[1]),I=Object(s.useState)({}),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(!1),q=Object(o.a)(B,2),V=q[0],H=q[1];function G(){H(!1)}function W(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",z.logo),L(!0);var a="/v1/purchase-payment",s="POST";if(z.id&&(a="/v1/purchase-payment/"+z.id,s="PUT"),!z.amount)return j.amount="Amount is required",void p(Object(C.a)({},j));if(z.amount<=0)return j.amount="Amount should be > 0",void p(Object(C.a)({},j));if(z.amount>c.net_total)return j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void p(Object(C.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:w.get("access_token")},body:JSON.stringify(z)};console.log("formData:",z),N(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:p({}),N(!1),L(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),G(),e.refreshPurchaseList&&e.refreshPurchaseList();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){N(!1),L(!1),console.log("Inside catch"),console.log(t),p(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchasePayment!","danger")}))}return Object(s.useEffect)((function(){w.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:V,size:"lg",onHide:G,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:z.id?"Update Payment  for purchase purchase#"+z.purchase_code:"Add Payment  for purchase purchase #"+z.purchase_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){G(),e.openDetailsView(z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:W,children:[y?Object(T.jsx)(g.a,{as:"span",animation:"bpurchase",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:G,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:W,children:[Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:z.amount?z.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(z.amount=e.target.value,j.amount="Amount should be > 0",void p(Object(C.a)({},j))):(z.amount=parseFloat(e.target.value),j.amount="",z.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void p(Object(C.a)({},j))):(p(Object(C.a)({},j)),U(Object(C.a)({},z)),void console.log(z))):(z.amount=e.target.value,j.amount="Invalid amount",void p(Object(C.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(T.jsx)("div",{style:{color:"red"},children:j.amount}),z.amount&&!j.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:z.date_str?new Date(z.date_str):null,value:z.date_str?Object(x.default)(new Date(z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),z.date_str=e,U(Object(C.a)({},z))}}),j.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.date_str]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:z.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",p(Object(C.a)({},j)),z.method="",void U(Object(C.a)({},z));j.method="",p(Object(C.a)({},j)),z.method=e.target.value,U(Object(C.a)({},z)),console.log(z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"vendor_account",children:"Vendor Account"})]}),j.method&&Object(T.jsx)("div",{style:{color:"red"},children:j.method}),z.method&&!j.method&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]})}),Object(T.jsx)("div",{className:"row  g-5",children:Object(T.jsx)("div",{className:"col-md-3"})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:G,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:W,children:y?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasepayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":z.id?"Update":"Create"})]})]})})]})})})),ha=ba;var pa=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(1),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];Object(s.useEffect)((function(){ze()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)("created_at"),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("-"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1];function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ae({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){Ce[e]=t,w(C=1),ze()}function Ee(e,t){if(!t)return C=1,Ce[e]="",w(C),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),w(C=1),ze()}function ze(){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id")),e.purchase&&(Ce.purchase_id=e.purchase.id);var s=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(s/60),we(Ce);var n=Ae(Ce);""!==n&&(n="&"+n),de(!0),fetch("/v1/purchase-payment?select=id,date,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at,deleted"+n+"&sort="+Re+Te+"&page="+C+"&limit="+j,a).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:de(!1),he(!1),i(c.result),o=parseInt((c.total_count+j-1)/j),F(o),A(c.total_count),V((C-1)*j),z(c.result.length),Ze=c.meta.total_payment,Ke(Ze),e.purchase&&!Ot&&(yt=e.purchase.net_total-e.purchase.cash_discount-Ze,Nt(yt),yt==e.purchase.net_total-e.purchase.cash_discount?kt(St="not_paid"):yt<=0?kt(St="paid"):yt>0&&kt(St="paid_partially"));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){De(Te=e),Pe(Re="-"===Re?"":"-"),ze()}function Be(e){C=parseInt(e),w(C),ze()}function qe(e){Ge.current.open(e)}var Ve=Object(s.useRef)();function He(e){Ve.current.open(e)}var Ge=Object(s.useRef)(),We=Object(s.useState)(0),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1],Xe=Object(s.useState)("-"),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=(Ye[1],Object(s.useState)(!1)),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(""),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useState)(""),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(""),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1];function Ee(e,t){if(!t)return C=1,Ce[e]="",w(C),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(rt(t),dt(""),ht(""),Ce.from_date="",Ce.to_date="",Ce[e]=t):"from_date"===e?(dt(t),rt(""),Ce.date="",Ce[e]=t):"to_date"===e?(ht(t),rt(""),Ce.date="",Ce[e]=t):"created_at"===e&&(Y(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),Y(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),Y(""),Ce.created_at="",Ce[e]=t),w(C=1),ze()}var pt=function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(Tt.confirm)("Are you sure?");case 3:a=e.sent,console.log(a),a&&_t(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=Object(s.useState)(!1),mt=Object(o.a)(xt,2),Ot=mt[0],ft=mt[1];function _t(a){var s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};fetch("/v1/purchase-payment/"+a,s).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:e.showToastMessage("Purchase payment deleted successfully!","success"),e.refreshList&&e.refreshList(),e.refreshPurchaseList&&e.refreshPurchaseList(),ze();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}var gt=Object(s.useState)(0),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(""),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ha,{ref:Ge,refreshList:ze,showToastMessage:e.showToastMessage,openDetailsView:He,refreshPurchaseList:e.refreshPurchaseList?e.refreshPurchaseList:""}),Object(T.jsx)(ua,{ref:Ve,openUpdateForm:qe}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:["paid"==St?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==St?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==St?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):"",Object(T.jsxs)("h1",{className:"text-end",children:["Total paid amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ze,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),e.purchase?Object(T.jsxs)("h4",{className:"text-end",children:["Balance amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:yt.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Purchase Payments"})}),Object(T.jsx)("div",{className:"col text-end",children:e.purchase?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){console.log("props.purchase:",e.purchase),Ge.current.open("",e.purchase)},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===P&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Purchase payments to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bpurchase:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bpurchase:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){he(!0),ze()},variant:"primary",disabled:be,children:[be?Object(T.jsx)(g.a,{as:"span",animation:"bpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ze()},className:"form-control pull-right",style:{bpurchasepayment:"solid 1px",bpurchasepaymentColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"500",children:"500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bpurchasepayment:"solid 0px"},children:D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""})}),Object(T.jsx)("div",{className:"row",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",q+1,"-",q+E," of"," ",P]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",C," of ",D]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("purchase_code")},children:["Purchase ID","purchase_code"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_code"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("date")},children:["Date","date"===Te&&"-"===Je?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Te&&""===Je?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("amount")},children:["Amount","amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("method")},children:["Payment Method","method"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:"Deleted"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return Ie("purchase_code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:ct,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return rt(""),void Ee("date_str","");Ee("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return at(!tt)},children:tt?"Less..":"More.."}),Object(T.jsx)("br",{}),tt?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:lt,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return dt(""),void Ee("from_date","");Ee("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:bt,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ht(""),void Ee("to_date","");Ee("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Ie("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return Ie("method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),w(C=1),ze()},options:me,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:X,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void Ee("created_at","");Ee("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Q(!W)},children:W?"Less..":"More.."}),Object(T.jsx)("br",{}),W?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void Ee("created_at_from","");Ee("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void Ee("created_at_to","");Ee("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsxs)("select",{onChange:function(e){Ie("deleted",e.target.value),"1"==e.target.value?ft(Ot=!0):ft(Ot=!1)},children:[Object(T.jsx)("option",{value:"0",SELECTED:!0,children:"NO"}),Object(T.jsx)("option",{value:"1",children:"YES"})]})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.purchase_code}),Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{style:{width:"110px"},children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",disabled:e.deleted,onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",disabled:e.deleted,onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)(_.a,{className:"btn btn-danger btn-sm",disabled:e.deleted,onClick:function(){pt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-trash"})})]}),Object(T.jsx)("td",{children:e.deleted?"YES":"NO"})]},e.id)}))})]})}),D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""]})})})})]})]})},xa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get PurchaseReturnPayment");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/purchase-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function m(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:m,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Purchase Return Payment  of Purchase return #",c.purchase_return_code," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openCreateForm(c)},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){m(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:m,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Purchase Return ID:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_return_code]}),Object(T.jsx)("th",{children:"Purchase Purchase ID:"}),Object(T.jsxs)("td",{children:[" ",c.purchase_code]}),Object(T.jsx)("th",{children:"Amount:"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.method]}),Object(T.jsx)("th",{children:"Store Name:"}),Object(T.jsxs)("td",{children:[" ",c.store_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date :"}),Object(T.jsxs)("td",{children:["  ",c.date?Object(x.default)(new Date(c.date),"MMM dd yyyy h:mma"):""," "]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),ma=xa,Oa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){t=t,r(Object(C.a)({},t)),(z={method:""}).date_str=new Date,t&&(z.purchase_return_id=t.id,z.purchase_return_code=t.code,z.purchase_id=t.purchase_id,z.purchase_code=t.purchase_code,z.store_id=t.store_id),U(z),R(M=[]),e&&function(e){console.log("inside get Product Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:w.get("access_token")}};z={},U(Object(C.a)({},z)),M=[],R(Object(i.a)(M)),fetch("/v1/purchase-return-payment/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:p({}),console.log("Response:"),console.log(n),(z=n.result).date_str=n.result.date,console.log("formData:",z),z.parent_id&&(M=[{id:z.parent_id,name:z.parent_name}],R(Object(i.a)(M))),U(Object(C.a)({},z)),console.log("formData:",z);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N(!1),p(e)}))}(e),j={},p(Object(C.a)({},j)),H(!0)}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-product category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var l=Object(s.useState)({}),d=Object(o.a)(l,2),j=d[0],p=d[1],m=Object(s.useState)(!1),v=Object(o.a)(m,2),y=v[0],N=v[1],w=new h.a,S=Object(s.useState)([]),k=Object(o.a)(S,2),D=(k[0],k[1],Object(s.useState)([])),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(!1),A=Object(o.a)(P,2),L=(A[0],A[1]),I=Object(s.useState)({}),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(!1),q=Object(o.a)(B,2),V=q[0],H=q[1];function G(){H(!1)}function W(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",z.logo),L(!0);var a="/v1/purchase-return-payment",s="POST";if(z.id&&(a="/v1/purchase-return-payment/"+z.id,s="PUT"),!z.amount)return j.amount="Amount is required",void p(Object(C.a)({},j));if(z.amount<=0)return j.amount="Amount should be > 0",void p(Object(C.a)({},j));var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:w.get("access_token")},body:JSON.stringify(z)};console.log("formData:",z),N(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:p({}),N(!1),L(!1),console.log("Response:"),console.log(c),e.showToastMessage("Product Category Created Successfully!","success"),e.refreshList&&e.refreshList(),G(),e.refreshPurchaseReturnList&&e.refreshPurchaseReturnList();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){N(!1),L(!1),console.log("Inside catch"),console.log(t),p(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseReturnPayment!","danger")}))}return Object(s.useEffect)((function(){w.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:V,size:"lg",onHide:G,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:z.id?"Update Payment  of purchase return #"+z.purchase_return_code:"Add Payment of purchase return  #"+z.purchase_return_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){G(),e.openDetailsView(z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:W,children:[y?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasereturn",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:G,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:W,children:[Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{value:z.amount?z.amount:"",type:"number",onChange:function(e){return console.log("Inside onchange vat "),e.target.value?parseFloat(e.target.value)<=0?(z.amount=e.target.value,j.amount="Amount should be > 0",void p(Object(C.a)({},j))):(z.amount=parseFloat(e.target.value),j.amount="",z.amount>c.net_total?(j.amount="Amount should be less than or equal to net total amount:"+c.net_total,void p(Object(C.a)({},j))):(p(Object(C.a)({},j)),U(Object(C.a)({},z)),void console.log(z))):(z.amount=e.target.value,j.amount="Invalid amount",void p(Object(C.a)({},j)))},className:"form-control",id:"name",placeholder:"Amount"})}),j.amount&&Object(T.jsx)("div",{style:{color:"red"},children:j.amount}),z.amount&&!j.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:z.date_str?new Date(z.date_str):null,value:z.date_str?Object(x.default)(new Date(z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),z.date_str=e,U(Object(C.a)({},z))}}),j.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),j.date_str]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:z.method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return j.method="Invalid Payment Method",p(Object(C.a)({},j)),z.method="",void U(Object(C.a)({},z));j.method="",p(Object(C.a)({},j)),z.method=e.target.value,U(Object(C.a)({},z)),console.log(z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"vendor_account",children:"Vendor Account"})]}),j.method&&Object(T.jsx)("div",{style:{color:"red"},children:j.method}),z.method&&!j.method&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]})}),Object(T.jsx)("div",{className:"row  g-5",children:Object(T.jsx)("div",{className:"col-md-3"})}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:G,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:W,children:y?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasereturnpayment",size:"sm",role:"status","aria-hidden":!0})+" Processing...":z.id?"Update":"Create"})]})]})})]})})})),fa=Oa;var _a=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(5),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(1),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(0),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(1),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(!1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)([]),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1];Object(s.useEffect)((function(){Ve()}),[]);var Se=Object(s.useState)({}),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("created_at"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)("-"),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1];function ze(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ue(){return(Ue=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=ze({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,ve(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){Te[e]=t,F(D=1),Ve()}function qe(e,t){if(!t)return D=1,Te[e]="",F(D),void Ve();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(pt(t),ft(""),yt(""),Te.from_date="",Te.to_date="",Te[e]=t):"from_date"===e?(ft(t),pt(""),Te.date="",Te[e]=t):"to_date"===e?(yt(t),pt(""),Te.date="",Te[e]=t):"created_at"===e&&(ae(t),re(""),de(""),Te.created_at_from="",Te.created_at_to="",Te[e]=t),"created_at_from"===e?(re(t),ae(""),Te.created_at="",Te[e]=t):"created_at_to"===e&&(de(t),ae(""),Te.created_at="",Te[e]=t),F(D=1),Ve()}function Ve(){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Te.store_id=t.get("store_id")),e.purchaseReturn&&(Te.purchase_return_id=e.purchaseReturn.id);var s=(new Date).getTimezoneOffset();Te.timezone_offset=parseFloat(s/60),De(Te);var n=ze(Te);""!==n&&(n="&"+n),he(!0),fetch("/v1/purchase-return-payment?select=id,date,amount,method,store_name,purchase_return_code,purchase_return_id,purchase_id,purchase_code,created_by_name,created_at,deleted"+n+"&sort="+Ie+Re+"&page="+D+"&limit="+C,a).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:he(!1),Oe(!1),i(c.result),o=parseInt((c.total_count+C-1)/C),A(o),z(c.total_count),Q((D-1)*C),V(c.result.length),Je=c.meta.total_payment,$e(Je),e.purchaseReturn&&!j&&(at=e.purchaseReturn.net_total-e.purchaseReturn.cash_discount-Je,st(at),at==e.purchaseReturn.net_total-e.purchaseReturn.cash_discount?it(rt="not_paid"):at<=0?it(rt="paid"):at>0&&it(rt="paid_partially"));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){he(!1),Oe(!1),console.log(e)}))}function He(e){Pe(Re=e),Ee(Ie="-"===Ie?"":"-"),Ve()}function Ge(e){D=parseInt(e),F(D),Ve()}function We(e){Ke.current.open(e)}var Qe=Object(s.useRef)();function Ze(e){Qe.current.open(e)}var Ke=Object(s.useRef)(),Xe=Object(s.useState)(0),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=Ye[1],et=Object(s.useState)(0),tt=Object(o.a)(et,2),at=tt[0],st=tt[1],nt=Object(s.useState)(""),ct=Object(o.a)(nt,2),rt=ct[0],it=ct[1],ot=Object(s.useState)(!1),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1],ut=Object(s.useState)(""),bt=Object(o.a)(ut,2),ht=bt[0],pt=bt[1],xt=Object(s.useState)(""),mt=Object(o.a)(xt,2),Ot=mt[0],ft=mt[1],_t=Object(s.useState)(""),gt=Object(o.a)(_t,2),vt=gt[0],yt=gt[1],Nt=Object(s.useState)("-"),Ct=Object(o.a)(Nt,2),wt=Ct[0],St=(Ct[1],function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(Tt.confirm)("Are you sure?");case 3:a=e.sent,console.log(a),a&&kt(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function kt(a){var s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};fetch("/v1/purchase-return-payment/"+a,s).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:e.showToastMessage("Purchase return payment deleted successfully!","success"),e.refreshList&&e.refreshList(),e.refreshPurchaseReturnList&&e.refreshPurchaseReturnList(),Ve();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(fa,{ref:Ke,refreshList:Ve,showToastMessage:e.showToastMessage,openDetailsView:Ze,refreshPurchaseReturnList:e.refreshPurchaseReturnList?e.refreshPurchaseReturnList:""}),Object(T.jsx)(ma,{ref:Qe,openUpdateForm:We}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:["paid"==rt?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==rt?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==rt?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):"",Object(T.jsxs)("h1",{className:"text-end",children:["Total paid amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Je,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}),e.purchaseReturn?Object(T.jsxs)("h4",{className:"text-end",children:["Balance amount: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:at.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Purchase Return Payments"})}),Object(T.jsx)("div",{className:"col text-end",children:e.purchaseReturn?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){console.log("props.purchase:",e.purchaseReturn),Ke.current.open("",e.purchaseReturn)},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===E&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No purchase return payments to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bpurchasereturnpayment:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bpurchasereturnpayment:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Oe(!0),Ve()},variant:"primary",disabled:me,children:[me?Object(T.jsx)(g.a,{as:"span",animation:"bpurchasereturnpayment",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:be&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:E>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:C,onChange:function(e){var t;t=e.target.value,C=parseInt(t),w(C),Ve()},className:"form-control pull-right",style:{bpurchasereturnpayment:"solid 1px",bpurchasereturnpaymentColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bpurchasereturnpayment:"solid 0px"},children:P?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ge(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:D-1}):""})}),Object(T.jsx)("div",{className:"row",children:E>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",W+1,"-",W+q," of"," ",E]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",D," of ",P]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("purchase_return_code")},children:["Purchase Return ID","purchase_return_code"===Re&&"-"===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"purchase_return_code"===Re&&""===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("date")},children:["Date","date"===Re&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===Re&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("amount")},children:["Amount","amount"===Re&&"-"===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===Re&&""===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("method")},children:["Payment Method","method"===Re&&"-"===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"method"===Re&&""===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("created_by_name")},children:["Created By","created_by_name"===Re&&"-"===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Re&&""===Ie?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){He("created_at")},children:["Created At","created_at"===Re&&"-"===Ie?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Re&&""===Ie?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:"Deleted"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_return_code",onChange:function(e){return Be("purchase_return_code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:ht,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return pt(""),void qe("date_str","");qe("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return jt(!dt)},children:dt?"Less..":"More.."}),Object(T.jsx)("br",{}),dt?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:Ot,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ft(""),void qe("from_date","");qe("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:vt,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return yt(""),void qe("to_date","");qe("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Be("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return Be("method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&we(a),Te[t]=Object.values(a).map((function(e){return e.id})).join(","),F(D=1),Ve()},options:ge,placeholder:"Select Users",selected:Ce,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ue.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void qe("created_at","");qe("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Y(!X)},children:X?"Less..":"More.."}),Object(T.jsx)("br",{}),X?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void qe("created_at_from","");qe("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:le,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return de(""),void qe("created_at_to","");qe("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsxs)("select",{onChange:function(e){Be("deleted",e.target.value),"1"==e.target.value?m(j=!0):m(j=!1)},children:[Object(T.jsx)("option",{value:"0",SELECTED:!0,children:"NO"}),Object(T.jsx)("option",{value:"1",children:"YES"})]})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.purchase_return_code}),Object(T.jsx)("td",{children:e.date?Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma"):""}),Object(T.jsx)("td",{children:e.amount.toFixed(2)+" SAR"}),Object(T.jsx)("td",{children:e.method}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{style:{width:"110px"},children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",disabled:e.deleted,onClick:function(){We(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",disabled:e.deleted,onClick:function(){Ze(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)(_.a,{className:"btn btn-danger btn-sm",disabled:e.deleted,onClick:function(){St(e.id)},children:Object(T.jsx)("i",{className:"bi bi-trash"})})]}),Object(T.jsx)("td",{children:e.deleted?"YES":"NO"})]},e.id)}))})]})}),P?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ge(e.selected+1)},pageRangeDisplayed:5,pageCount:P,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:D-1}):""]})})})})]})]})},ga=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){O={national_address:{},vat_percent:15},v(Object(C.a)({},O)),e&&function(e){console.log("inside get Order");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:p.get("access_token")}};fetch("/v1/vendor/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),i=n.result,(O=i).national_address||(O.national_address={}),O.vat_percent||(O.vat_percent=15),v(Object(C.a)({},O));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),r(e)}))}(e),S(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],p=new h.a,x=Object(s.useState)({national_address:{},vat_percent:15}),m=Object(o.a)(x,2),O=m[0],v=m[1],y=Object(s.useState)(!1),N=Object(o.a)(y,2),w=N[0],S=N[1];function k(){S(!1)}function D(t){t.preventDefault(),console.log("Inside handle Create"),O.vat_percent=parseFloat(O.vat_percent),O.phone&&(O.phone_in_arabic=M(O.phone.toString())),O.vat_no&&(O.vat_no_in_arabic=M(O.vat_no.toString())),O.registration_number&&(O.registration_number_in_arabic=M(O.registration_number.toString())),O.national_address.application_no&&(O.national_address.application_no_arabic=M(O.national_address.application_no.toString())),O.national_address.service_no&&(O.national_address.service_no_arabic=M(O.national_address.service_no.toString())),O.national_address.customer_account_no&&(O.national_address.customer_account_no_arabic=M(O.national_address.customer_account_no.toString())),O.national_address.building_no&&(O.national_address.building_no_arabic=M(O.national_address.building_no.toString())),O.national_address.zipcode&&(O.national_address.zipcode_arabic=M(O.national_address.zipcode.toString())),O.national_address.additional_no&&(O.national_address.additional_no_arabic=M(O.national_address.additional_no.toString())),O.national_address.unit_no&&(O.national_address.unit_no_arabic=M(O.national_address.unit_no.toString()));var a="/v1/vendor",s="POST";O.id&&(a="/v1/vendor/"+O.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:p.get("access_token")},body:JSON.stringify(O)};console.log("formData:",O),j(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),j(!1),console.log("Response:"),console.log(c),e.showToastMessage("Vendor Created Successfully!","success"),e.refreshList&&e.refreshList(),k(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){j(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Vendor!","danger")}))}Object(s.useEffect)((function(){p.get("access_token")||(window.location="/")}));var F="\u06f0\u06f1\u06f2\u06f3\u0664\u06f5\u0666\u06f7\u06f8\u06f9".split("");function M(e){return e.replace(/\d/g,(function(e){return F[parseInt(e)]}))}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:w,size:"lg",onHide:k,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:O.id?"Update Vendor #"+O.name:"Create New Vendor"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[O.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){k(),e.openDetailsView(O.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:D,children:[d?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",O.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:D,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name?O.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),O.name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),O.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name In Arabic"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.name_in_arabic?O.name_in_arabic:"",type:"string",onChange:function(e){c.name_in_arabic="",r(Object(C.a)({},c)),O.name_in_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"name_in_arabic",placeholder:"Name In Arabic"}),c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name_in_arabic]}),O.name_in_arabic&&!c.name_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Phone*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.phone?O.phone:"",type:"string",onChange:function(e){c.phone="",r(Object(C.a)({},c)),O.phone=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"phone",placeholder:"Phone"}),c.phone&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.phone]}),O.phone&&!c.phone&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Email"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.email?O.email:"",type:"string",onChange:function(e){c.email="",O.email=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"email",placeholder:"Email"}),c.email&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.email]}),O.email&&!c.email&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Title(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.title?O.title:"",type:"string",onChange:function(e){c.title="",r(Object(C.a)({},c)),O.title=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"title",placeholder:"Title"}),c.title&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title]}),O.title&&!c.title&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Title In Arabic(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.title_in_arabic?O.title_in_arabic:"",type:"string",onChange:function(e){c.title_in_arabic="",r(Object(C.a)({},c)),O.title_in_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"title_in_arabic",placeholder:"Title In Arabic"}),c.title_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.title_in_arabic]}),O.title_in_arabic&&!c.title_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:O.address,type:"string",onChange:function(e){c.address="",r(Object(C.a)({},c)),O.address=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"address",placeholder:"Address"}),c.address&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address]}),O.address&&!c.address&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Address In Arabic"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:O.address_in_arabic,type:"string",onChange:function(e){c.address_in_arabic="",r(Object(C.a)({},c)),O.address_in_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"address_in_arabic",placeholder:"Address In Arabic"}),c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.address_in_arabic]}),O.address_in_arabic&&!c.address_in_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Registration Number(C.R NO.)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.registration_number?O.registration_number:"",type:"number",onChange:function(e){c.registration_number="",r(Object(C.a)({},c)),O.registration_number=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"registration_number",placeholder:"Registration Number(C.R NO.)"}),c.registration_number&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.registration_number]}),O.registration_number&&!c.registration_number&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"VAT NO."}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.vat_no?O.vat_no:"",type:"string",onChange:function(e){c.vat_no="",r(Object(C.a)({},c)),O.vat_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"vat_no",placeholder:"VAT NO."}),c.vat_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_no]}),O.vat_no&&!c.vat_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"VAT %"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.vat_percent?O.vat_percent:"",type:"string",onChange:function(e){c.vat_percent="",r(Object(C.a)({},c)),O.vat_percent=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"vat_percent",placeholder:"Vat %"}),c.vat_percent&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.vat_percent]}),O.vat_percent&&!c.vat_percent&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsx)("h2",{children:"National Address:"}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Application Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.application_no?O.national_address.application_no:"",type:"string",onChange:function(e){c.national_address_application_no="",O.national_address.application_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.application_no",placeholder:"Application Number"}),c.national_address_application_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_application_no]}),O.national_address&&O.national_address.application_no&&!c.national_address_application_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Service Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.service_no?O.national_address.service_no:"",type:"string",onChange:function(e){c.national_address_service_no="",O.national_address.service_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.service_no",placeholder:"Service Number"}),c.national_address_service_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_service_no]}),O.national_address&&O.national_address.service_no&&!c.national_address_service_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer Account Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.customer_account_no?O.national_address.customer_account_no:"",type:"string",onChange:function(e){c.national_address_customer_account_no="",O.national_address.customer_account_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.customer_account_no",placeholder:"Customer Account Number"}),c.national_address_customer_account_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_customer_account_no]}),O.national_address&&O.national_address.customer_account_no&&!c.national_address_customer_account_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Building Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.building_no?O.national_address.building_no:"",type:"string",onChange:function(e){c.national_address_building_no="",O.national_address.building_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.building_no",placeholder:"Building Number"}),c.national_address_building_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_building_no]}),O.national_address&&O.national_address.building_no&&!c.national_address_building_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Street Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.street_name?O.national_address.street_name:"",type:"string",onChange:function(e){c.national_address_street_name="",O.national_address.street_name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.street_name",placeholder:"Street Name"}),c.national_address_street_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name]}),O.national_address&&O.national_address.street_name&&!c.national_address_street_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Street Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.street_name_arabic?O.national_address.street_name_arabic:"",type:"string",onChange:function(e){c.national_address_street_name_arabic="",O.national_address.street_name_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.street_name_arabic",placeholder:"Street Name(Arabic)"}),c.national_address_street_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_street_name_arabic]}),O.national_address&&O.national_address.street_name_arabic&&!c.national_address_street_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"District Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.district_name?O.national_address.district_name:"",type:"string",onChange:function(e){c.national_address_district_name="",O.national_address.district_name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.district_name",placeholder:"District Name"}),c.national_address_district_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name]}),O.national_address&&O.national_address.district_name&&!c.national_address_district_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"District Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.district_name_arabic?O.national_address.district_name_arabic:"",type:"string",onChange:function(e){c.national_address_district_name_arabic="",O.national_address.district_name_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.district_name_arabic",placeholder:"District Name(Arabic)"}),c.national_address_district_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_district_name_arabic]}),O.national_address&&O.national_address.district_name_arabic&&!c.national_address_district_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"City Name"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.city_name?O.national_address.city_name:"",type:"string",onChange:function(e){c.national_address_city_name="",O.national_address.city_name=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.city_name",placeholder:"City Name"}),c.national_address_city_name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name]}),O.national_address&&O.national_address.city_name&&!c.national_address_city_name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"City Name(Arabic)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.city_name_arabic?O.national_address.city_name_arabic:"",type:"string",onChange:function(e){c.national_address_city_name_arabic="",O.national_address.city_name_arabic=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.city_name_arabic",placeholder:"City Name(Arabic)"}),c.national_address_city_name_arabic&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_city_name_arabic]}),O.national_address&&O.national_address.city_name_arabic&&!c.national_address_city_name_arabic&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Zipcode"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.zipcode?O.national_address.zipcode:"",type:"string",onChange:function(e){c.national_address_zipcode="",O.national_address.zipcode=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.zipcode",placeholder:"Zipcode"}),c.national_address_zipcode&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_zipcode]}),O.national_address&&O.national_address.zipcode&&!c.national_address_zipcode&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Additional Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.additional_no?O.national_address.additional_no:"",type:"string",onChange:function(e){c.national_address_additional_no="",O.national_address.additional_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.additional_no",placeholder:"Additional Number"}),c.national_address_additional_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_additional_no]}),O.national_address&&O.national_address.additional_no&&!c.national_address_additional_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Unit Number"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:O.national_address.unit_no?O.national_address.unit_no:"",type:"string",onChange:function(e){c.national_address_unit_no="",O.national_address.unit_no=e.target.value,v(Object(C.a)({},O)),console.log(O)},className:"form-control",id:"national_address.unit_no",placeholder:"Unit Number"}),c.national_address_unit_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.national_address_unit_no]}),O.national_address&&O.national_address.unit_no&&!c.national_address_unit_no&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:k,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:D,children:d?Object(T.jsx)(g.a,{as:"span",animation:"bvendor",size:"sm",role:"status","aria-hidden":!0})+" Creating...":O.id?"Update":"Create"})]})]})})]})})})),va=ga,ya=Object(s.forwardRef)((function(e,t){var a,n,c,r,l;Object(s.useImperativeHandle)(t,(function(){return{open:function(e){pe=[],me([]),B=[],q([]),ee=[],te([]),we=[],Se([]),[],Pe([]),(R={vat_percent:15,discount:0,discountValue:0,discount_percent:0,shipping_handling_fees:0,partial_payment_amount:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"delivered",payment_method:"",payment_status:"paid"}).payments_input=[{date_str:R.date_str,amount:0,method:"",deleted:!1}],R.cash_discount=0,D.get("store_id")&&(R.store_id=D.get("store_id"),R.store_name=D.get("store_name")),D.get("user_id")&&(we=[{id:D.get("user_id"),name:D.get("user_name")}],R.order_placed_by=D.get("user_id"),R.vat_percent=parseFloat(D.get("vat_percent")),P(Object(C.a)({},R)),Se(Object(i.a)(we))),P(Object(C.a)({},R)),e&&function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,j,b,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(v({}),console.log("Response:"),console.log(n),r=n.result,R={id:r.id,code:r.code,store_id:r.store_id,vendor_id:r.vendor_id,date_str:r.date,vat_percent:r.vat_percent,discount:r.discount,cash_discount:r.cash_discount,discount_percent:r.discount_percent,status:r.status,order_placed_by:r.order_placed_by,order_placed_by_signature_id:r.order_placed_by_signature_id,is_discount_percent:r.is_discount_percent,partial_payment_amount:r.partial_payment_amount,payment_method:r.payment_method,payment_status:r.payment_status,shipping_handling_fees:r.shipping_handling_fees},n.result.payments)for(console.log("data.result.payments:",n.result.payments),R.payments_input=n.result.payments,o=0;o<(null===(l=R.payments_input)||void 0===l?void 0:l.length);o++)R.payments_input[o].date_str=R.payments_input[o].date;R.is_discount_percent?R.discountValue=R.discount_percent:R.discountValue=R.discount,pe=r.products,me(Object(i.a)(pe)),d=[{id:r.store_id,name:r.store_name}],j=[{id:r.vendor_id,name:r.vendor_name,search_label:r.vendor_name}],b=[{id:r.order_placed_by,name:r.order_placed_by_name}],r.order_placed_by_signature_id&&(h=[{id:r.order_placed_by_signature_id,name:r.order_placed_by_signature_name}],Pe([].concat(h))),Se([].concat(b)),q([].concat(d)),te([].concat(j)),ft(),P(Object(C.a)({},R));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){k(!1),v(e)}))}(e),ft(),Ue(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-purchase.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(s.useEffect)((function(){console.log("inside change on formData:",R)}));new Date;var d=Object(s.useState)({}),j=Object(o.a)(d,2),m=j[0],v=j[1],y=Object(s.useState)(!1),w=Object(o.a)(y,2),S=w[0],k=w[1],D=new h.a,F=Object(s.useState)({vat_percent:10,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:Object(x.default)(new Date,"MMM dd yyyy"),signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),status:"created"}),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)([]),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)([]),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],Q=H[1],Z=Object(s.useState)([]),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)([]),$=Object(o.a)(J,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)([]),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)([]),je=Object(o.a)(de,2),ue=je[0],be=(je[1],Object(s.useState)([])),he=Object(o.a)(be,2),pe=he[0],me=he[1],Oe=Object(s.useState)(!1),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)([]),ye=Object(o.a)(ve,2),Ne=(ye[0],ye[1],Object(s.useState)([])),Ce=Object(o.a)(Ne,2),we=Ce[0],Se=Ce[1],ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),De=(Te[0],Te[1],Object(s.useState)([])),Fe=Object(o.a)(De,2),Me=(Fe[0],Fe[1],Object(s.useState)([])),Re=Object(o.a)(Me,2),Pe=(Re[0],Re[1]),Ae=Object(s.useState)(!1),Le=Object(o.a)(Ae,2),Ie=(Le[0],Le[1],Object(s.useState)(!1)),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1];function Be(){Ue(!1)}function qe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+encodeURIComponent(e[t])})).join("&")}function Ve(){return(Ve=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestStores"),E([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=qe({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}},"select=id,name",Q(!0),e.next=13,fetch("/v1/store?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,E(c.result),Q(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(){return(He=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestVendors"),Y([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=qe({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",ce(!0),e.next=13,fetch("/v1/vendor?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,Y(c.result),ce(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){D.get("access_token")||(window.location="/")}));var Ge=Object(s.useState)(!1),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1];function Ke(){return(Ke=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestProducts"),le([]),console.log("searchTerm:"+t),t){e.next=8;break}return Qe=!1,Ze(!1),ge(!1),e.abrupt("return");case 8:return a={name:t},D.get("store_id")&&(a.store_id=D.get("store_id")),""!==(s=qe(a))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:D.get("access_token")}},"select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic",ge(!0),e.next=17,fetch("/v1/product?select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic"+s+"&limit=200",n);case 17:return c=e.sent,e.next=20,c.json();case 20:if(r=e.sent,(i=r.result)&&0!==i.length){e.next=27;break}return Qe=!1,Ze(!1),ge(!1),e.abrupt("return");case 27:Qe=!0,Ze(!0),le(i),ge(!1);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(t){t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",pe),R.cash_discount||(R.cash_discount=0),R.products=[];for(var a=0;a<pe.length;a++)R.products.push({product_id:pe[a].product_id,quantity:parseFloat(pe[a].quantity),unit:pe[a].unit,purchase_unit_price:parseFloat(pe[a].purchase_unit_price),retail_unit_price:parseFloat(pe[a].retail_unit_price),wholesale_unit_price:parseFloat(pe[a].wholesale_unit_price)});if(R.discount=parseFloat(R.discount),R.discount_percent=parseFloat(R.discount_percent),R.vat_percent=parseFloat(R.vat_percent),R.net_total=parseFloat(dt),console.log("formData.discount:",R.discount),console.log("formData.discount_percent:",R.discount_percent),!R.shipping_handling_fees&&0!==R.shipping_handling_fees)return m.shipping_handling_fees="Invalid shipping / handling fees",void v(Object(C.a)({},m));if(!R.discount&&0!==R.discount)return m.discount="Invalid discount",void v(Object(C.a)({},m));if(!R.discount_percent&&0!==R.discount_percent)return m.discount_percent="Invalid discount percent",void v(Object(C.a)({},m));if(parseFloat(R.discount_percent)>100)return m.discount_percent="Discount percent cannot be > 100",void v(Object(C.a)({},m));if(!R.vat_percent&&0!==R.vat_percent)return m.vat_percent="Invalid vat percent",void v(Object(C.a)({},m));D.get("store_id")&&(R.store_id=D.get("store_id"));var s="/v1/purchase",n="POST";R.id&&(s="/v1/purchase/"+R.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:D.get("access_token")},body:JSON.stringify(R)};k(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:v({}),k(!1),console.log("Response:"),console.log(c),e.showToastMessage("Purchase Created Successfully!","success"),e.refreshList&&e.refreshList(),Be(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){k(!1),console.log("Inside catch"),console.log(t),v(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Purchase!","danger")}))}function Ye(e){if(console.log("Inside Add product"),!R.store_id)return m.product_id="Please Select a Store and try again",void v(Object(C.a)({},m));if(m.product_id="",!e)return m.product_id="Invalid Product",void v(Object(C.a)({},m));e.product_stores&&(e.product_stores[R.store_id]&&(e.retail_unit_price=e.product_stores[R.store_id].retail_unit_price),e.product_stores[R.store_id]&&(e.purchase_unit_price=e.product_stores[R.store_id].purchase_unit_price),e.product_stores[R.store_id]&&(e.wholesale_unit_price=e.product_stores[R.store_id].wholesale_unit_price));var t=!1,a=-1,s=0;if(e.quantity=1,!function(e){for(var t=0;t<pe.length;t++)if(pe[t].product_id===e)return!0;return!1}(e.id)?s=parseFloat(e.quantity):(t=!0,a=function(e){for(var t=0;t<pe.length;t++)if(pe[t].product_id===e)return t;return!1}(e.id),s=parseFloat(pe[a].quantity+e.quantity)),console.log("quantity:",s),m.quantity="",t&&(pe[a].quantity=parseFloat(s)),!t){var n={product_id:e.id,code:e.item_code,part_number:e.part_number,name:e.name,quantity:e.quantity,product_stores:e.product_stores,unit:e.unit};e.purchase_unit_price&&(n.purchase_unit_price=parseFloat(e.purchase_unit_price).toFixed(2)),e.retail_unit_price&&(n.retail_unit_price=parseFloat(e.retail_unit_price).toFixed(2)),e.wholesale_unit_price&&(n.wholesale_unit_price=parseFloat(e.wholesale_unit_price).toFixed(2)),pe.push(n)}me(Object(i.a)(pe)),ft(),R.products=[];for(var c=0;c<pe.length;c++)R.products.push({product_id:pe[c].product_id,quantity:parseFloat(pe[c].quantity),unit:pe[c].unit,purchase_unit_price:parseFloat(pe[c].purchase_unit_price),retail_unit_price:parseFloat(pe[c].retail_unit_price),wholesale_unit_price:parseFloat(pe[c].wholesale_unit_price)});P(Object(C.a)({},R))}var Je=Object(s.useState)(0),$e=Object(o.a)(Je,2),tt=$e[0],at=$e[1];var st=Object(s.useState)(0),nt=Object(o.a)(st,2),ct=nt[0],it=nt[1];var ot=Object(s.useState)(0),lt=Object(o.a)(ot,2),dt=lt[0],ut=lt[1];function bt(){if(dt=0,tt>0&&(dt=parseFloat(tt)+parseFloat(R.shipping_handling_fees)-parseFloat(R.discount)+parseFloat(ct),dt=parseFloat(dt)),dt=function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}(dt,2),ut(dt),!R.id){var e="";if(R.payments_input[0]&&(e=R.payments_input[0].method),R.payments_input=[{date_str:R.date_str,amount:0,method:e,deleted:!1}],dt>0){var t;if(R.payments_input[0].amount=parseFloat(dt.toFixed(2)),R.cash_discount)R.payments_input[0].amount=R.payments_input[0].amount-parseFloat(null===(t=R.cash_discount)||void 0===t?void 0:t.toFixed(2));R.payments_input[0].amount=parseFloat(R.payments_input[0].amount.toFixed(2))}}P(Object(C.a)({},R)),Rt()}var ht=Object(s.useState)(0),xt=Object(o.a)(ht,2),mt=xt[0],Ot=xt[1];function ft(){!function(){tt=0;for(var e=0;e<pe.length;e++)tt+=parseFloat(pe[e].purchase_unit_price)*parseFloat(pe[e].quantity);at(tt)}(),R.is_discount_percent?R.discount_percent>=0&&tt>0&&(R.discount=parseFloat(tt*parseFloat(R.discount_percent/100)).toFixed(2),P(Object(C.a)({},R))):R.discount>=0&&tt>0&&(mt=parseFloat(100*parseFloat(R.discount/tt)).toFixed(2),Ot(mt),R.discount_percent=mt,P(Object(C.a)({},R))),ct=0,tt>0&&(console.log("formData.vat_percent:",R.vat_percent),ct=parseFloat(R.vat_percent)/100*(parseFloat(tt)+parseFloat(R.shipping_handling_fees)-parseFloat(R.discount)),console.log("vatPrice:",ct)),it(ct),bt()}function _t(){for(var e,t,a=0,s=0;s<(null===(n=R.payments_input)||void 0===n?void 0:n.length);s++){var n;R.payments_input[s].amount&&!R.payments_input[s].deleted&&(a+=R.payments_input[s].amount)}return yt=a,console.log("totalPaymentAmount:",yt),Nt(yt),console.log("totalPayment:",a),St=parseFloat(dt.toFixed(2))-parseFloat(null===(e=parseFloat(R.cash_discount))||void 0===e?void 0:e.toFixed(2))-parseFloat(a.toFixed(2)),St=parseFloat(St.toFixed(2)),kt(St),St===parseFloat((parseFloat(dt.toFixed(2))-parseFloat(null===(t=parseFloat(R.cash_discount))||void 0===t?void 0:t.toFixed(2))).toFixed(2))?Ft="not_paid":St<=0?Ft="paid":St>0&&(Ft="paid_partially"),Mt(Ft),a}var gt=Object(s.useState)(0),vt=Object(o.a)(gt,2),yt=vt[0],Nt=vt[1],Ct=Object(s.useState)(0),wt=Object(o.a)(Ct,2),St=wt[0],kt=wt[1],Tt=Object(s.useState)(""),Dt=Object(o.a)(Tt,2),Ft=Dt[0],Mt=Dt[1];function Rt(){console.log("validatePaymentAmount: netTotal:",dt),m.cash_discount="",v(Object(C.a)({},m));var e=!1;if(!dt)return!0;if(R.cash_discount>0&&R.cash_discount>=dt)return m.cash_discount="Cash discount should not be >= "+dt.toFixed(2).toString(),v(Object(C.a)({},m)),e=!0,!1;for(var t=_t(),a=0;a<R.payments_input.length;a++)if(m["payment_amount_"+a]="",m["payment_date_"+a]="",m["payment_method_"+a]="",v(Object(C.a)({},m)),R.payments_input[a].amount?0===R.payments_input[a].amount&&(m["payment_amount_"+a]="Amount should be greater than zero",v(Object(C.a)({},m)),e=!0):(m["payment_amount_"+a]="Payment amount is required",v(Object(C.a)({},m)),e=!0),R.payments_input[a].date_str||(m["payment_date_"+a]="Payment date is required",v(Object(C.a)({},m)),e=!0),R.payments_input[a].method||(m["payment_method_"+a]="Payment method is required",v(Object(C.a)({},m)),e=!0),(R.payments_input[a].amount||0===R.payments_input[a].amount)&&!R.payments_input[a].deleted){var s=dt-R.cash_discount-(t-R.payments_input[a].amount);s<0&&(s=0)}return!e}var Pt=Object(s.useRef)();var At=Object(s.useRef)();function Lt(){At.current.open()}var It=Object(s.useRef)();var Et=Object(s.useRef)();var zt=Object(s.useRef)();var Ut=Object(s.useRef)();function Bt(e){Ut.current.open(e)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(et,{ref:Ut,openUpdateForm:function(e){At.current.open(e)},openCreateForm:Lt}),Object(T.jsx)(rt,{ref:At,showToastMessage:e.showToastMessage,openDetailsView:Bt}),Object(T.jsx)(W,{ref:Pt,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Et,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:zt,showToastMessage:e.showToastMessage}),Object(T.jsx)(va,{ref:It,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:ze,size:"xl",fullscreen:!0,onHide:Be,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:R.id?"Update Purchase #"+R.code:"Create New Purchase"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsx)(xe,{}),R.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){Be(),e.openDetailsView(R.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:Xe,children:[S?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",R.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:Be,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(m).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:m&&Object.keys(m).map((function(e,t){return m[e]?Object(T.jsx)("li",{style:{color:"red"},children:m[e]}):""}))})}):"",Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:Xe,children:[D.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Purchase to Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:G,isInvalid:!!m.store_id,onChange:function(e){if(m.store_id="",v(m),0===e.length)return m.store_id="Invalid Store selected",v(m),P(Object(C.a)({},R)),void q([]);R.store_id=e[0].id,P(Object(C.a)({},R)),q(e)},options:I,placeholder:"Select Store",selected:B,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ve.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){Pt.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),m.store_id]}),R.store_id&&!m.store_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Purchase From Vendor*"}),Object(T.jsx)(p.a,{id:"vendor_id",labelKey:"search_label",isLoading:ne,isInvalid:!!m.vendor_id,onChange:function(e){if(m.vendor_id="",v(m),0===e.length)return m.vendor_id="Invalid Vendor selected",v(m),R.vendor_id="",P(Object(C.a)({},R)),void te([]);R.vendor_id=e[0].id,P(Object(C.a)({},R)),te(e)},options:X,placeholder:"Type name or mob",selected:ee,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){He.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){It.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),m.vendor_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.vendor_id]}),R.vendor_id&&!m.vendor_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Vendor Invoice No. (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:R.vendor_invoice_no?R.vendor_invoice_no:"",type:"string",onChange:function(e){m.vendor_invoice_no="",v(Object(C.a)({},m)),R.vendor_invoice_no=e.target.value,P(Object(C.a)({},R)),console.log(R)},className:"form-control",id:"vendor_invoice_no",placeholder:"Vendor Invoice No."}),m.vendor_invoice_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.vendor_invoice_no]}),R.vendor_invoice_no&&!m.rack&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:R.date_str?new Date(R.date_str):null,value:R.date_str?Object(x.default)(new Date(R.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),R.date_str=e,P(Object(C.a)({},R))}}),m.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-12",children:[Object(T.jsx)("label",{className:"form-label",children:"Product*"}),Object(T.jsx)(p.a,{id:"product_id",size:"lg",labelKey:"search_label",emptyLabel:"",clearButton:!0,open:Qe,isLoading:_e,isInvalid:!!m.product_id,onChange:function(e){if(0===e.length)return m.product_id="Invalid Product selected",void v(m);m.product_id="",v(Object(C.a)({},m)),R.store_id&&Ye(e[0]),Ze(!1)},options:oe,selected:ue,placeholder:"Search By Part No. / Name / Name in Arabic",highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ke.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:Lt,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),m.product_id?Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.product_id]}):"",ue[0]&&ue[0].id&&!m.product_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{style:{width:"2%"},children:"Remove"}),Object(T.jsx)("th",{style:{width:"5%"},children:"SI No."}),Object(T.jsx)("th",{style:{width:"8%"},children:"Part No."}),Object(T.jsx)("th",{style:{width:"26%"},className:"text-start",children:"Name"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Qty"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Purchase Unit Price"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Wholesale Unit Price"}),Object(T.jsx)("th",{style:{width:"11%"},children:"Retail Unit Price"}),Object(T.jsx)("th",{style:{width:"15%"},children:"Purchase Price"})]})}),Object(T.jsx)("tbody",{children:pe.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("div",{style:{color:"red",cursor:"pointer"},onClick:function(){!function(e){if(e.quantity_returned>0)return m["product_"+t]="This product cannot be removed as it is returned, Note: Please remove the product from purchase return and try again",void v(Object(C.a)({},m));var t=pe.indexOf(e);t>-1&&pe.splice(t,1),me(Object(i.a)(pe)),ft()}(e)},children:Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "})})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},className:"text-start",onClick:function(){Bt(e.product_id),console.log("okk,id:",e.product_id)},children:e.name}),Object(T.jsxs)("td",{style:{width:"155px"},children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return m["quantity_"+t]="",v(Object(C.a)({},m)),a.target.value?0===a.target.value?(m["quantity_"+t]="Invalid Quantity should be > 0",pe[t].quantity=parseFloat(a.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m)):(e.quantity=parseFloat(a.target.value),ft(),pe[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",pe[t].quantity),me(Object(i.a)(pe)),void ft()):(m["quantity_"+t]="Invalid Quantity",pe[t].quantity=a.target.value,me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m))}}),Object(T.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:pe[t].unit?pe[t].unit:"Units"})]}),m["quantity_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["quantity_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{type:"number",value:e.purchase_unit_price,className:"form-control",placeholder:"Purchase Unit Price",onChange:function(e){return m["purchase_unit_price_"+t]="",v(Object(C.a)({},m)),e.target.value?0===e.target.value?(m["purchase_unit_price_"+t]="Purchase Unit Price should be > 0",pe[t].purchase_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m)):(pe[t].purchase_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].purchase_unit_price:",pe[t].purchase_unit_price),me(Object(i.a)(pe)),void ft()):(m["purchase_unit_price_"+t]="Invalid Purchase Unit Price",pe[t].purchase_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m))}})}),m["purchase_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["purchase_unit_price_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{type:"number",value:e.wholesale_unit_price,className:"form-control",placeholder:"Wholesale Unit Price",onChange:function(e){return m["wholesale_unit_price_"+t]="",v(Object(C.a)({},m)),e.target.value?0===e.target.value?(m["wholesale_unit_price_"+t]="Wholesale Unit Price should be > 0",pe[t].wholesale_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m)):(pe[t].wholesale_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].wholesale_unit_price:",pe[t].wholesale_unit_price),me(Object(i.a)(pe)),void ft()):(m["wholesale_unit_price_"+t]="Invalid Wholesale Unit Price",pe[t].wholesale_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m))}})}),m["wholesale_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["wholesale_unit_price_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{type:"number",value:e.retail_unit_price,className:"form-control",placeholder:"Retail Unit Price",onChange:function(e){return m["retail_unit_price_"+t]="",v(Object(C.a)({},m)),e.target.value?0===e.target.value?(m["retail_unit_price_"+t]="Retail Unit Price should be > 0",pe[t].retail_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m)):(pe[t].retail_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].retail_unit_price:",pe[t].retail_unit_price),me(Object(i.a)(pe)),void ft()):(m["retail_unit_price_"+t]="Invalid Retail Unit Price",pe[t].retail_unit_price=parseFloat(e.target.value),me(Object(i.a)(pe)),v(Object(C.a)({},m)),void console.log("errors:",m))}})}),m["retail_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["retail_unit_price_"+t]]})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]},t)})).reverse()})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{style:{width:"90%"},colSpan:"8",className:"text-end",children:"Total"}),Object(T.jsx)("td",{style:{width:"10%"},className:"text-end",children:Object(T.jsx)(N.a,{value:null===(a=tt)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Shipping & Handling Fees"}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:R.shipping_handling_fees,onChange:function(e){return 0===parseFloat(e.target.value)?(R.shipping_handling_fees=parseFloat(e.target.value),P(Object(C.a)({},R)),m.shipping_handling_fees="",v(Object(C.a)({},m)),void ft()):parseFloat(e.target.value)<0?(R.shipping_handling_fees=parseFloat(e.target.value),P(Object(C.a)({},R)),m.shipping_handling_fees="Shipping / Handling Fees should be > 0",v(Object(C.a)({},m)),void ft()):e.target.value?(m.shipping_handling_fees="",v(Object(C.a)({},m)),R.shipping_handling_fees=parseFloat(e.target.value),P(Object(C.a)({},R)),void ft()):(R.shipping_handling_fees="",m.shipping_handling_fees="Invalid Shipping / Handling Fees",P(Object(C.a)({},R)),void v(Object(C.a)({},m)))}}),"",m.shipping_handling_fees&&Object(T.jsx)("div",{style:{color:"red"},children:m.shipping_handling_fees})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:["Discount  ",Object(T.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:R.discount_percent,onChange:function(e){return R.is_discount_percent=!0,0===parseFloat(e.target.value)?(R.discount_percent=parseFloat(e.target.value),P(Object(C.a)({},R)),m.discount_percent="",v(Object(C.a)({},m)),void ft()):parseFloat(e.target.value)<0?(R.discount_percent=parseFloat(e.target.value),R.discount=0,P(Object(C.a)({},R)),m.discount_percent="Discount percent should be >= 0",v(Object(C.a)({},m)),void ft()):e.target.value?(m.discount_percent="",m.discount="",v(Object(C.a)({},m)),R.discount_percent=parseFloat(e.target.value),P(Object(C.a)({},R)),void ft()):(R.discount_percent="",R.discount=0,m.discount_percent="Invalid Discount Percent",P(Object(C.a)({},R)),void v(Object(C.a)({},m)))}}),"%",m.discount_percent&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount_percent})]}),Object(T.jsxs)("td",{className:"text-end",children:[Object(T.jsx)("input",{type:"number",style:{width:"150px"},className:"text-start",value:R.discount,onChange:function(e){return R.is_discount_percent=!1,0===parseFloat(e.target.value)?(R.discount=parseFloat(e.target.value),P(Object(C.a)({},R)),m.discount="",v(Object(C.a)({},m)),void ft()):parseFloat(e.target.value)<0?(R.discount=parseFloat(e.target.value),R.discount_percent=0,P(Object(C.a)({},R)),m.discount="Discount should be >= 0",v(Object(C.a)({},m)),void ft()):e.target.value?(m.discount="",m.discount_percent="",v(Object(C.a)({},m)),R.discount=parseFloat(e.target.value),P(Object(C.a)({},R)),void ft()):(R.discount="",R.discount_percent=0,m.discount="Invalid Discount",P(Object(C.a)({},R)),ft(),void v(Object(C.a)({},m)))}}),"",m.discount&&Object(T.jsx)("div",{style:{color:"red"},children:m.discount})]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"8",className:"text-end",children:[" VAT  ",Object(T.jsx)("input",{type:"number",className:"text-center",style:{width:"50px"},value:R.vat_percent,onChange:function(e){return console.log("Inside onchange vat percent"),0===parseFloat(e.target.value)?(R.vat_percent=parseFloat(e.target.value),P(Object(C.a)({},R)),m.vat_percent="",v(Object(C.a)({},m)),void ft()):parseFloat(e.target.value)<0?(R.vat_percent=parseFloat(e.target.value),it(ct=0),P(Object(C.a)({},R)),m.vat_percent="Vat percent should be >= 0",v(Object(C.a)({},m)),void ft()):e.target.value?(m.vat_percent="",v(Object(C.a)({},m)),R.vat_percent=e.target.value,ft(),P(Object(C.a)({},R)),void console.log(R)):(R.vat_percent="",it(ct=0),m.vat_percent="Invalid vat percent",P(Object(C.a)({},R)),void v(Object(C.a)({},m)))}}),"%",m.vat_percent&&Object(T.jsx)("div",{style:{color:"red"},children:m.vat_percent})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=ct)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"8",className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=dt)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]})]})})}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Cash discount"}),Object(T.jsx)("input",{type:"number",value:R.cash_discount,className:"form-control ",onChange:function(e){return m.cash_discount="",v(Object(C.a)({},m)),e.target.value?(R.cash_discount=parseFloat(e.target.value),R.cash_discount>0&&R.cash_discount>=dt?(m.cash_discount="Cash discount should not be >= "+dt.toString(),void v(Object(C.a)({},m))):(P(Object(C.a)({},R)),Rt(),void console.log(R))):(R.cash_discount=e.target.value,P(Object(C.a)({},R)),void Rt())}}),m.cash_discount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m.cash_discount]})]}),Object(T.jsxs)("div",{className:"col-md-8",children:[Object(T.jsx)("label",{className:"form-label",children:"Payments Paid"}),Object(T.jsxs)("div",{class:"table-responsive",style:{maxWidth:"900px"},children:[Object(T.jsx)(_.a,{variant:"secondary",style:{alignContent:"right",marginBottom:"10px"},onClick:function(){var e=new Date;R.id||(e=R.date_str),R.payments_input||(R.payments_input=[]),R.payments_input.push({date_str:e,amount:0,method:"",deleted:!1}),P(Object(C.a)({},R)),Rt()},children:"Create new payment"}),Object(T.jsxs)("table",{class:"table table-striped table-sm table-bordered",children:[R.payments_input&&R.payments_input.length>0&&Object(T.jsxs)("thead",{children:[Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment method"}),Object(T.jsx)("th",{children:"Action"})]}),Object(T.jsxs)("tbody",{children:[R.payments_input&&R.payments_input.filter((function(e){return!e.deleted})).map((function(e,t){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{style:{minWidth:"220px"},children:[Object(T.jsx)(O.a,{id:"payment_date_str",selected:R.payments_input[t].date_str?new Date(R.payments_input[t].date_str):null,value:R.payments_input[t].date_str?Object(x.default)(new Date(R.payments_input[t].date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),R.payments_input[t].date_str=e,P(Object(C.a)({},R))}}),m["payment_date_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_date_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"300px"},children:[Object(T.jsx)("input",{type:"number",value:R.payments_input[t].amount,className:"form-control ",onChange:function(e){if(m["payment_amount_"+t]="",v(Object(C.a)({},m)),!e.target.value)return R.payments_input[t].amount=e.target.value,P(Object(C.a)({},R)),void Rt();R.payments_input[t].amount=parseFloat(e.target.value),Rt(),P(Object(C.a)({},R)),console.log(R)}}),m["payment_amount_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_amount_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"200px"},children:[Object(T.jsxs)("select",{value:R.payments_input[t].method,className:"form-control ",onChange:function(e){if(m["payment_method_"+t]="",v(Object(C.a)({},m)),!e.target.value)return m["payment_method_"+t]="Payment method is required",v(Object(C.a)({},m)),R.payments_input[t].method="",void P(Object(C.a)({},R));R.payments_input[t].method=e.target.value,P(Object(C.a)({},R)),console.log(R)},children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"vendor_account",children:"Vendor Account"})]}),m["payment_method_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),m["payment_method_"+t]]})]}),Object(T.jsx)("td",{style:{width:"200px"},children:Object(T.jsx)(_.a,{variant:"danger",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];R.payments_input.splice(e,1),P(Object(C.a)({},R)),t&&Rt(),_t()}(t)},children:"Remove"})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{class:"text-end",children:Object(T.jsx)("b",{children:"Total"})}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{style:{marginLeft:"14px"},children:null===(r=yt)||void 0===r?void 0:r.toFixed(2)})}),Object(T.jsx)("td",{children:Object(T.jsxs)("b",{style:{marginLeft:"12px",alignSelf:"end"},children:["Balance: ",null===(l=St)||void 0===l?void 0:l.toFixed(2)]})}),Object(T.jsxs)("td",{colSpan:1,children:[Object(T.jsx)("b",{children:"Payment status: "}),"paid"==Ft?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==Ft?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==Ft?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]})]})]})]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:Be,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:Xe,children:S?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":R.id?"Update":"Create"})]})]})]})]})]})})),Na=ya,Ca=Object(s.forwardRef)((function(e,t){var a,n,c,r,l;Object(s.useImperativeHandle)(t,(function(){return{open:function(e,t){p={},m(Object(C.a)({},p)),L=[],I([]),q=[],V([]),[],Y([]),(M={vat_percent:15,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),payment_status:"paid",payment_method:""}).payments_input=[{date_str:M.date_str,amount:0,method:"",deleted:!1}],M.cash_discount=0,R(Object(C.a)({},M)),k.get("user_id")&&(q=[{id:k.get("user_id"),name:k.get("user_name")}],M.purchase_returned_by=k.get("user_id"),R(Object(C.a)({},M)),V(Object(i.a)(q))),R(Object(C.a)({},M)),e&&function(e){console.log("inside get PurchaseReturned id:",e);var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}};fetch("/v1/purchase-return/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(m({}),console.log("Response:"),console.log(n),r=n.result,(M={id:r.id,code:r.code,purchase_code:r.purchase_code,store_id:r.store_id,vendor_id:r.vendor_id,date_str:r.date,vat_percent:r.vat_percent,cash_discount:r.cash_discount,discount:r.discount,discount_percent:r.discount_percent,status:r.status,order_placed_by:r.order_placed_by,order_placed_by_signature_id:r.order_placed_by_signature_id,is_discount_percent:r.is_discount_percent,partial_payment_amount:r.partial_payment_amount,payment_method:r.payment_method,payment_status:r.payment_status,shipping_handling_fees:r.shipping_handling_fees}).payments_input||(M.payments_input=[]),n.result.payments)for(console.log("data.result.payments:",n.result.payments),M.payments_input=n.result.payments,o=0;o<(null===(l=M.payments_input)||void 0===l?void 0:l.length);o++)M.payments_input[o].date_str=M.payments_input[o].date;for(R(Object(C.a)({},M)),console.log("formData1.status:",M.status),console.log("purchaseReturn.products:",r.products),d=r.products,L=[],j=0;j<d.length;j++)L.push(d[j]),d[j].purchase_unit_price=d[j].purchasereturn_unit_price;I(Object(i.a)(L)),R(Object(C.a)({},M)),Ne(),R(Object(C.a)({},M));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){S(!1),m(e)}))}(e),t&&(Ne(),function(e){console.log("inside get Purchase");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:k.get("access_token")}};fetch("/v1/purchase/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:for(m({}),console.log("Response:"),console.log(n),r=n.result,(M={date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),purchase_id:r.id,purchase_code:r.code,store_id:r.store_id,vendor_id:r.vendor_id,vat_percent:r.vat_percent,status:r.status,purchase_returned_by:r.order_placed_by,purchase_returned_by_signature_id:r.order_placed_by_signature_id,is_discount_percent:r.is_discount_percent,discount_percent:r.discount_percent,payment_status:"paid",payment_method:""}).discount=0,M.is_discount_percent?M.discountValue=M.discount_percent:M.discountValue=M.discount,M.discountValue=0,R(Object(C.a)({},M)),console.log("formData1.status:",M.status),o=r.products,L=[],l=0;l<o.length;l++)o[l].selected=!1,d=o[l].quantity-o[l].quantity_returned,o[l].quantity=d,d>0&&L.push(o[l]);I(Object(i.a)(L)),R(Object(C.a)({},M)),Ne(),R(Object(C.a)({},M));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){S(!1),m(e)}))}(t)),se(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-purchase return.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);new Date;var d=Object(s.useState)({}),j=Object(o.a)(d,2),p=j[0],m=j[1],v=Object(s.useState)(!1),y=Object(o.a)(v,2),w=y[0],S=y[1],k=new h.a,D=Object(s.useState)({vat_percent:10,discount:0,discountValue:0,discount_percent:0,is_discount_percent:!1,date_str:new Date,signature_date_str:Object(x.default)(new Date,"MMM dd yyyy"),payment_status:"paid",payment_method:""}),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(null),A=Object(o.a)(P,2),L=A[0],I=A[1],E=Object(s.useState)([]),z=Object(o.a)(E,2),U=(z[0],z[1],Object(s.useState)([])),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),Q=(G[0],G[1],Object(s.useState)([])),Z=Object(o.a)(Q,2),K=(Z[0],Z[1],Object(s.useState)([])),X=Object(o.a)(K,2),Y=(X[0],X[1]),J=Object(s.useState)(!1),$=Object(o.a)(J,2),ee=($[0],$[1],Object(s.useState)(!1)),te=Object(o.a)(ee,2),ae=te[0],se=te[1];function ne(){se(!1)}function ce(t){console.log("formData:",M),console.log("formData.payment_status:"+M.payment_status),t.preventDefault(),console.log("Inside handle Create"),console.log("selectedProducts:",L);var a=!1;M.products=[];for(var s=0;s<L.length;s++)M.products.push({product_id:L[s].product_id,quantity:parseFloat(L[s].quantity),unit:L[s].unit,purchasereturn_unit_price:parseFloat(L[s].purchase_unit_price),selected:L[s].selected});if(M.cash_discount||(M.cash_discount=0),M.discount=parseFloat(M.discount),M.discount_percent=parseFloat(M.discount_percent),M.net_total=parseFloat(xe),M.vat_percent=parseFloat(M.vat_percent),console.log("formData.discount:",M.discount),M.discount||0===M.discount||(p.discount="Invalid discount",m(Object(C.a)({},p)),a=!0),M.discount_percent||0===M.discount_percent||(p.discount_percent="Invalid discount percent",m(Object(C.a)({},p)),a=!0),parseFloat(M.discount_percent)>100&&(p.discount_percent="Discount percent cannot be > 100",m(Object(C.a)({},p)),a=!0),p.payment_method="",m(Object(C.a)({},p)),a)console.log("Errors: ",p);else{var n="/v1/purchase-return",c="POST";M.id&&(n="/v1/purchase-return/"+M.id,c="PUT");var r={method:c,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:k.get("access_token")},body:JSON.stringify(M)};S(!0),fetch(n,r).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:m({}),S(!1),console.log("Response:"),console.log(c),e.showToastMessage("Purchase Return Created Successfully!","success"),e.refreshList&&e.refreshList(),ne(),e.refreshPurchaseList&&e.refreshPurchaseList();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){S(!1),console.log("Inside catch"),console.log(t),m(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating PurchaseReturned!","danger")}))}}Object(s.useEffect)((function(){k.get("access_token")||(window.location="/")}));var re=Object(s.useState)(0),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1];var de=Object(s.useState)(0),je=Object(o.a)(de,2),ue=je[0],be=je[1];var he=Object(s.useState)(0),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1];function Oe(){if(xe=0,oe>0&&(xe=parseFloat(oe)-parseFloat(M.discount)+parseFloat(ue),xe=parseFloat(xe)),xe=function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}(xe,2),me(xe),M.payments_input||(M.payments_input=[]),!M.id){var e="";if(M.payments_input&&M.payments_input[0]&&(e=M.payments_input[0].method),M.payments_input=[{date_str:M.date_str,amount:0,method:e,deleted:!1}],xe>0){var t;if(M.payments_input[0].amount=parseFloat(xe.toFixed(2)),M.cash_discount)M.payments_input[0].amount=M.payments_input[0].amount-parseFloat(null===(t=M.cash_discount)||void 0===t?void 0:t.toFixed(2));M.payments_input[0].amount=parseFloat(M.payments_input[0].amount.toFixed(2))}}R(Object(C.a)({},M)),Ke()}var fe=Object(s.useState)(0),_e=Object(o.a)(fe,2),ve=_e[0],ye=_e[1];function Ne(){!function(){oe=0;for(var e=0;e<L.length;e++)L[e].selected&&(oe+=parseFloat(L[e].purchase_unit_price)*parseFloat(L[e].quantity));le(oe)}(),M.is_discount_percent?M.discount_percent>=0&&oe>0&&(M.discount=parseFloat(oe*parseFloat(M.discount_percent/100)),M.discount=parseFloat(M.discount.toFixed(2)),R(Object(C.a)({},M))):M.discount>=0&&oe>0&&(ve=parseFloat(100*parseFloat(M.discount/oe)),ye(ve),M.discount_percent=ve,R(Object(C.a)({},M))),ue=0,oe>0&&(console.log("formData.vat_percent:",M.vat_percent),ue=parseFloat(M.vat_percent)/100*(parseFloat(oe)-parseFloat(M.discount)),console.log("vatPrice:",ue)),be(ue),Oe()}var Ce=Object(s.useRef)();var we=Object(s.useRef)(),Se=Object(s.useRef)();var Te=Object(s.useRef)(),De=Object(s.useRef)();var Fe=Object(s.useRef)();var Me=Object(s.useRef)();function Pe(e){Me.current.open(e)}var Ae=Object(s.useRef)();var Le=Object(s.useState)(0),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Ue=Object(s.useState)(0),Be=Object(o.a)(Ue,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)(""),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1];function Ze(){var e,t;console.log("Inside findTotalPayments()");for(var a=0,s=0;s<(null===(n=M.payments_input)||void 0===n?void 0:n.length);s++){var n;M.payments_input[s].amount&&!M.payments_input[s].deleted&&(a+=M.payments_input[s].amount)}return ze(Ee=a),M.cash_discount||(M.cash_discount=0),qe=parseFloat(xe.toFixed(2))-parseFloat(null===(e=parseFloat(M.cash_discount))||void 0===e?void 0:e.toFixed(2))-parseFloat(a.toFixed(2)),qe=parseFloat(qe.toFixed(2)),Ve(qe),qe===parseFloat((parseFloat(xe.toFixed(2))-parseFloat(null===(t=parseFloat(M.cash_discount))||void 0===t?void 0:t.toFixed(2))).toFixed(2))?We="not_paid":qe<=0?We="paid":qe>0&&(We="paid_partially"),Qe(We),a}function Ke(){if(L&&0==L.filter((function(e){return e.selected})).length)return!0;p.cash_discount="",m(Object(C.a)({},p));var e=!1;if(xe&&M.cash_discount>0&&M.cash_discount>=xe)return p.cash_discount="Cash discount should not be >= "+xe.toFixed(2).toString(),m(Object(C.a)({},p)),e=!0,!1;Ze();for(var t=0;t<M.payments_input.length;t++)p["payment_amount_"+t]="",p["payment_date_"+t]="",p["payment_method_"+t]="",m(Object(C.a)({},p)),M.payments_input[t].amount?0===M.payments_input[t].amount&&(p["payment_amount_"+t]="Amount should be greater than zero",m(Object(C.a)({},p)),e=!0):(p["payment_amount_"+t]="Payment amount is required",m(Object(C.a)({},p)),e=!0),M.payments_input[t].date_str||(p["payment_date_"+t]="Payment date is required",m(Object(C.a)({},p)),e=!0),M.payments_input[t].method||(p["payment_method_"+t]="Payment method is required",m(Object(C.a)({},p)),e=!0);return!e}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(et,{ref:Me,openUpdateForm:function(e){Se.current.open(e)},openCreateForm:function(){Se.current.open()}}),Object(T.jsx)(rt,{ref:Se,showToastMessage:e.showToastMessage,openDetailsView:Pe}),Object(T.jsx)(Re,{ref:Ce}),Object(T.jsx)(W,{ref:we,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:De,showToastMessage:e.showToastMessage}),Object(T.jsx)(pt,{ref:Fe,showToastMessage:e.showToastMessage}),Object(T.jsx)(va,{ref:Te,showToastMessage:e.showToastMessage}),Object(T.jsx)(ge,{ref:Ae}),Object(T.jsxs)(f.a,{show:ae,size:"xl",fullscreen:!0,onHide:ne,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:M.id?"Update Purchase Return #"+M.code+" for purchase #"+M.purchase_code:"Create Purchase Return for purchase #"+M.purchase_code}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsx)(ke,{}),L&&L.length>0&&Object(T.jsxs)(_.a,{variant:"primary",className:"mb-3",onClick:ce,children:[w?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",M.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ne,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(p).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:p&&Object.keys(p).map((function(e,t){return p[e]?Object(T.jsx)("li",{style:{color:"red"},children:p[e]}):""}))})}):"",L&&0===L.length&&"Already Returned All purchased products",L&&L.length>0&&Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:ce,children:[Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Vendor Invoice No. (Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:M.vendor_invoice_no?M.vendor_invoice_no:"",type:"string",onChange:function(e){p.vendor_invoice_no="",m(Object(C.a)({},p)),M.vendor_invoice_no=e.target.value,R(Object(C.a)({},M)),console.log(M)},className:"form-control",id:"vendor_invoice_no",placeholder:"Vendor Invoice No."}),p.vendor_invoice_no&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p.vendor_invoice_no]}),M.vendor_invoice_no&&!p.rack&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Date*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:M.date_str?new Date(M.date_str):null,value:M.date_str?Object(x.default)(new Date(M.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),M.date_str=e,R(Object(C.a)({},M))}}),p.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p.date_str]}),M.date_str&&!p.date_str&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsx)("h2",{children:"Select Products"}),p.product_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p.product_id]}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto",overflowY:"scroll"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Select"}),Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Part No."}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Qty"}),Object(T.jsx)("th",{children:"Unit Price"}),Object(T.jsx)("th",{children:"Purchase Return Price"})]})}),Object(T.jsx)("tbody",{children:L.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:Object(T.jsx)("input",{type:"checkbox",checked:L[t].selected,onChange:function(e){console.log("e.target.value:",e.target.value),L[t].selected=!L[t].selected,I(Object(i.a)(L)),Ne()}})}),Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{style:{textDecoration:"underline",color:"blue",cursor:"pointer"},onClick:function(){Pe(e.product_id)},children:e.name}),Object(T.jsxs)("td",{style:{width:"155px"},children:[Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{type:"number",value:e.quantity,className:"form-control",placeholder:"Quantity",onChange:function(a){return p["quantity_"+t]="",m(Object(C.a)({},p)),a.target.value?0===parseFloat(a.target.value)?(p["quantity_"+t]="Quantity should be >0",L[t].quantity=parseFloat(a.target.value),I(Object(i.a)(L)),m(Object(C.a)({},p)),void console.log("errors:",p)):(e.quantity=parseFloat(a.target.value),Ne(),L[t].quantity=parseFloat(a.target.value),console.log("selectedProducts[index].quantity:",L[t].quantity),I(Object(i.a)(L)),void Ne()):(p["quantity_"+t]="Invalid Quantity",L[t].quantity=a.target.value,I(Object(i.a)(L)),m(Object(C.a)({},p)),void console.log("errors:",p))}}),Object(T.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:L[t].unit?L[t].unit:"Units"})]}),p["quantity_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p["quantity_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"180px"},children:[Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("input",{type:"number",value:e.purchase_unit_price,className:"form-control",placeholder:"Purchase Return Unit Price",onChange:function(e){return p["purchasereturned_unit_price_"+t]="",m(Object(C.a)({},p)),e.target.value?0===e.target.value?(p["purchasereturned_unit_price_"+t]="Purchase Return Unit Price should be >0",L[t].purchase_unit_price=parseFloat(e.target.value),I(Object(i.a)(L)),void m(Object(C.a)({},p))):(L[t].purchase_unit_price=parseFloat(e.target.value),console.log("selectedProducts[index].purchase_unit_price:",L[t].purchase_unit_price),I(Object(i.a)(L)),void Ne()):(p["purchasereturned_unit_price_"+t]="Invalid Purchase Return Unit Price",L[t].purchase_unit_price=parseFloat(e.target.value),I(Object(i.a)(L)),void m(Object(C.a)({},p)))}})}),p["purchasereturned_unit_price_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p["purchasereturned_unit_price_"+t]]})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:(e.purchase_unit_price*e.quantity).toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]})}))})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsx)("table",{className:"table table-striped table-sm table-bordered",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"5"}),Object(T.jsx)("th",{className:"text-end",children:"Total"}),Object(T.jsx)("td",{className:"text-end",style:{width:"180px"},children:Object(T.jsx)(N.a,{value:null===(a=oe)||void 0===a?void 0:a.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{colSpan:"6",className:"text-end",children:["Discount  ",Object(T.jsx)("input",{type:"number",style:{width:"50px"},className:"text-start",value:M.discount_percent,onChange:function(e){return M.is_discount_percent=!0,0===parseFloat(e.target.value)?(M.discount_percent=parseFloat(e.target.value),R(Object(C.a)({},M)),p.discount_percent="",m(Object(C.a)({},p)),void Ne()):parseFloat(e.target.value)<0?(M.discount_percent=parseFloat(e.target.value),M.discount=0,R(Object(C.a)({},M)),p.discount_percent="Discount percent should be >= 0",m(Object(C.a)({},p)),void Ne()):e.target.value?(p.discount_percent="",p.discount="",m(Object(C.a)({},p)),M.discount_percent=parseFloat(e.target.value),R(Object(C.a)({},M)),void Ne()):(M.discount_percent="",M.discount=0,p.discount_percent="Invalid Discount Percent",R(Object(C.a)({},M)),void m(Object(C.a)({},p)))}}),"%",p.discount_percent&&Object(T.jsx)("div",{style:{color:"red"},children:p.discount_percent})]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:M.discount,displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{colSpan:"5",className:"text-end"}),Object(T.jsxs)("th",{className:"text-end",children:["VAT: ",M.vat_percent+"%"]}),Object(T.jsx)("td",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(n=ue)||void 0===n?void 0:n.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:"5"}),Object(T.jsx)("th",{className:"text-end",children:"Net Total"}),Object(T.jsx)("th",{className:"text-end",children:Object(T.jsx)(N.a,{value:null===(c=xe)||void 0===c?void 0:c.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]})]})})}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Cash discount"}),Object(T.jsx)("input",{type:"number",value:M.cash_discount,className:"form-control ",onChange:function(e){return p.cash_discount="",m(Object(C.a)({},p)),e.target.value?(M.cash_discount=parseFloat(e.target.value),M.cash_discount>0&&M.cash_discount>=xe?(p.cash_discount="Cash discount should not be >= "+xe.toString(),void m(Object(C.a)({},p))):(R(Object(C.a)({},M)),Ke(),void console.log(M))):(M.cash_discount=e.target.value,R(Object(C.a)({},M)),void Ke())}}),p.cash_discount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p.cash_discount]})]}),Object(T.jsxs)("div",{className:"col-md-8",children:[Object(T.jsx)("label",{className:"form-label",children:"Payments received"}),Object(T.jsxs)("div",{class:"table-responsive",style:{maxWidth:"900px"},children:[Object(T.jsx)(_.a,{variant:"secondary",style:{alignContent:"right"},onClick:function(){var e=new Date;M.id||(e=M.date_str),M.payments_input.push({date_str:e,amount:0,method:"",deleted:!1}),R(Object(C.a)({},M)),Ke()},children:"Create new payment"}),Object(T.jsxs)("table",{class:"table table-striped table-sm table-bordered",children:[Object(T.jsxs)("thead",{children:[Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Payment method"}),Object(T.jsx)("th",{children:"Action"})]}),Object(T.jsxs)("tbody",{children:[M.payments_input&&M.payments_input.filter((function(e){return!e.deleted})).map((function(e,t){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{style:{minWidth:"220px"},children:[Object(T.jsx)(O.a,{id:"date_str",selected:M.payments_input[t].date_str?new Date(M.payments_input[t].date_str):null,value:M.payments_input[t].date_str?Object(x.default)(new Date(M.payments_input[t].date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),M.payments_input[t].date_str=e,R(Object(C.a)({},M))}}),p["payment_date_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p["payment_date_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"300px"},children:[Object(T.jsx)("input",{type:"number",value:M.payments_input[t].amount,className:"form-control ",onChange:function(e){if(p["payment_amount_"+t]="",m(Object(C.a)({},p)),!e.target.value)return M.payments_input[t].amount=e.target.value,R(Object(C.a)({},M)),void Ke();M.payments_input[t].amount=parseFloat(e.target.value),Ke(),R(Object(C.a)({},M)),console.log(M)}}),p["payment_amount_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p["payment_amount_"+t]]})]}),Object(T.jsxs)("td",{style:{width:"200px"},children:[Object(T.jsxs)("select",{value:M.payments_input[t].method,className:"form-control ",onChange:function(e){if(p["payment_method_"+t]="",m(Object(C.a)({},p)),!e.target.value)return p["payment_method_"+t]="Payment method is required",m(Object(C.a)({},p)),M.payments_input[t].method="",void R(Object(C.a)({},M));M.payments_input[t].method=e.target.value,R(Object(C.a)({},M)),console.log(M)},children:[Object(T.jsx)("option",{value:"",children:"Select"}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"}),Object(T.jsx)("option",{value:"customer_account",children:"Customer Account"})]}),p["payment_method_"+t]&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),p["payment_method_"+t]]})]}),Object(T.jsx)("td",{style:{width:"200px"},children:Object(T.jsx)(_.a,{variant:"danger",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M.payments_input.splice(e,1),R(Object(C.a)({},M)),t&&Ke(),Ze()}(t)},children:"Remove"})})]},t)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{class:"text-end",children:Object(T.jsx)("b",{children:"Total"})}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{style:{marginLeft:"14px"},children:null===(r=Ee)||void 0===r?void 0:r.toFixed(2)})}),Object(T.jsx)("td",{children:Object(T.jsxs)("b",{style:{marginLeft:"12px",alignSelf:"end"},children:["Balance: ",null===(l=qe)||void 0===l?void 0:l.toFixed(2)]})}),Object(T.jsxs)("td",{colSpan:1,children:[Object(T.jsx)("b",{children:"Payment status: "}),"paid"==We?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==We?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==We?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]})]})]})]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:ne,children:"Close"}),L&&L.length>0&&Object(T.jsx)(_.a,{variant:"primary",onClick:ce,children:w?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":M.id?"Update":"Create"})]})]})]})]})]})})),wa=Ca,Sa=Qt.a.ExcelFile,ka=Qt.a.ExcelFile.ExcelSheet;var Ta=function(e){var t,a=new h.a,n=Object(s.useState)(0),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(0),d=Object(o.a)(l,2),j=d[0],m=d[1],v=Object(s.useState)(0),C=Object(o.a)(v,2),w=C[0],S=C[1],k=Object(s.useState)([]),D=Object(o.a)(k,2),F=D[0],M=D[1],R=Object(s.useState)(5),P=Object(o.a)(R,2),A=P[0],L=P[1],I=Object(s.useState)(1),E=Object(o.a)(I,2),z=E[0],U=E[1],B=Object(s.useState)(0),q=Object(o.a)(B,2),V=q[0],H=q[1],G=Object(s.useState)(1),W=Object(o.a)(G,2),Q=W[0],Z=W[1],K=Object(s.useState)(0),X=Object(o.a)(K,2),Y=X[0],J=X[1],$=Object(s.useState)(0),ee=Object(o.a)($,2),ae=ee[0],se=ee[1],ne=Object(s.useState)(!1),ce=Object(o.a)(ne,2),re=ce[0],ie=ce[1],oe=Object(s.useState)(new Date),le=Object(o.a)(oe,2),de=le[0],je=le[1],ue=Object(s.useState)(new Date),be=Object(o.a)(ue,2),he=be[0],pe=be[1],xe=Object(s.useState)(new Date),me=Object(o.a)(xe,2),Oe=me[0],fe=me[1],_e=Object(s.useState)(new Date),ge=Object(o.a)(_e,2),ve=ge[0],ye=ge[1],Ne=Object(s.useState)(new Date),Ce=Object(o.a)(Ne,2),we=Ce[0],Se=Ce[1],ke=Object(s.useState)(new Date),Te=Object(o.a)(ke,2),De=Te[0],Fe=Te[1],Me=Object(s.useState)(""),Pe=Object(o.a)(Me,2),Ae=Pe[0],Le=Pe[1],Ie=Object(s.useState)(""),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(""),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)(!1),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)(""),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)(""),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(""),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useState)(!1),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(!1),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1],pt=Object(s.useState)([]),xt=Object(o.a)(pt,2),mt=xt[0],Ot=xt[1],ft=Object(s.useState)([]),_t=Object(o.a)(ft,2),gt=_t[0],vt=_t[1],yt=Object(s.useState)([]),Nt=Object(o.a)(yt,2),Ct=Nt[0],wt=Nt[1],St=Object(s.useState)([]),kt=Object(o.a)(St,2),Tt=kt[0],Dt=kt[1],Ft=Object(s.useState)([]),Mt=Object(o.a)(Ft,2),Rt=(Mt[0],Mt[1]);Object(s.useEffect)((function(){Qa()}),[]);var Pt=Object(s.useState)([]),At=Object(o.a)(Pt,2),Lt=At[0],It=At[1],Et=Object(s.useState)([]),zt=Object(o.a)(Et,2),Ut=zt[0],Bt=zt[1],qt=Object(s.useState)("Purchase Return Report"),Vt=Object(o.a)(qt,2),Ht=Vt[0],Gt=Vt[1],Wt=Object(s.useState)(!1),Qt=Object(o.a)(Wt,2),Zt=Qt[0],Kt=Qt[1];function Xt(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<Lt.length;t++){var a=Object(x.default)(new Date(Lt[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(Lt[t])}console.log("groupedByDate:",e),Ut=[{columns:[{title:"Description",width:{wch:50}},{title:"Quantity",width:{wpx:90}},{title:"Unit",width:{wpx:90}},{title:"Rate",width:{wpx:90}},{title:"Gross",width:{wpx:90}},{title:"Disc %",width:{wpx:90}},{title:"Disc",width:{wpx:90}},{title:"Tax %",width:{wpx:90}},{title:"Tax Amount",width:{wpx:90}},{title:"Net Amount",width:{wpx:90}}],data:[]}];var s=0,n=0,c=0;for(var r in e){console.log("purchaseReturnDate:",r),Ut[0].data.push([{value:"Inv Date: "+r}]);var i=0,o=0;for(t=0;t<e[r].length>0;t++){c++;var l=e[r][t],d=l.vendor_invoice_no?l.vendor_invoice_no+" / "+l.code:l.code;if(Ut[0].data.push([{value:"Inv No ("+d+") - "+c+" ["+l.vendor_name+"]"}]),l.products){for(var j=0;j<l.products.length;j++){var u=l.products[j];Ut[0].data.push([{value:u.name},{value:u.quantity.toFixed(2)},{value:u.unit?u.unit:"PCs"},{value:u.purchasereturn_unit_price?u.purchasereturn_unit_price.toFixed(2):0},{value:(u.purchasereturn_unit_price*u.quantity).toFixed(2)},{value:"0.00"},{value:"0.00"},{value:"15.00"},{value:(.15*(u.purchasereturn_unit_price*u.quantity).toFixed(2)).toFixed(2)},{value:(u.purchasereturn_unit_price*u.quantity).toFixed(2)}])}Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Discount"},{value:l.discount.toFixed(2)}]),Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Tax"},{value:l.vat_price.toFixed(2)}]),Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total"},{value:(l.total-l.discount).toFixed(2)}]),i+=l.total-l.discount,o+=l.vat_price}}Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Tax"},{value:o.toFixed(2)}]),Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Day Total"},{value:i.toFixed(2)}]),s+=i,n+=o}Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Tax"},{value:n.toFixed(2)}]),Ut[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:"Total Amount"},{value:s.toFixed(2)}]),Bt(Ut),console.log("excelData:",Ut)}function Yt(){Ht="Purchase Return Report",ta.from_date&&ta.to_date?Ht+=" - From "+ta.from_date+" to "+ta.to_date:ta.from_date?Ht+=" - From "+ta.from_date+" to "+Object(x.default)(new Date,"dd-MMM-yyyy"):ta.to_date?Ht+=" - Upto "+ta.to_date:ta.date_str&&(Ht+=" of "+ta.date_str),Gt(Ht)}function Jt(){return Jt=Object(b.a)(u.a.mark((function e(){var t,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},s="select=id,code,vendor_invoice_no,date,total,net_total,discount_percent,discount,products,vendor_name,created_at,vat_price",a.get("store_id")&&(ta.store_id=a.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),ta.timezone_offset=parseFloat(c/60),ta.stats="1",aa(ta),""!==(r=ja(ta))&&(r="&"+r),i=500,o=[],l=1,Yt();case 15:return Zt=!0,Kt(!0),e.next=20,fetch("/v1/purchase-return?"+s+r+"&sort="+la+ca+"&page="+l+"&limit="+i,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(dt(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 20:if(0!==(d=e.sent).length){e.next=23;break}return e.abrupt("break",27);case 23:o=o.concat(d),l++;case 25:e.next=15;break;case 27:Lt=o,It(o),console.log("allPurchaseReturns:",Lt),Xt(),Zt=!1,Kt(!1);case 33:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}var $t=Object(s.useState)({}),ea=Object(o.a)($t,2),ta=ea[0],aa=ea[1],sa=Object(s.useState)("created_at"),na=Object(o.a)(sa,2),ca=na[0],ra=na[1],ia=Object(s.useState)("-"),oa=Object(o.a)(ia,2),la=oa[0],da=oa[1];function ja(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function ua(){return(ua=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestVendors"),""!==(s=ja({name:t}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/vendor?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,Ot(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(){return(ba=Object(b.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),Ot([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=ja({name:t}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,wt(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(e,t){ta[e]=t,U(z=1),Qa()}function pa(e,t){if(!t)return z=1,ta[e]="",U(z),void Qa();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(Le(t),Ue(""),He(""),ta.from_date="",ta.to_date="",ta[e]=t):"from_date"===e?(Ue(t),Le(""),ta.date="",ta[e]=t):"to_date"===e?(He(t),Le(""),ta.date="",ta[e]=t):"created_at"===e&&(Je(t),at(""),rt(""),ta.created_at_from="",ta.created_at_to="",ta[e]=t),"created_at_from"===e?(at(t),Je(""),ta.created_at="",ta[e]=t):"created_at_to"===e&&(rt(t),Je(""),ta.created_at="",ta[e]=t),U(z=1),Qa()}var xa=Object(s.useState)([]),Oa=Object(o.a)(xa,2),ga=Oa[0],va=Oa[1],ya=Object(s.useState)([]),Na=Object(o.a)(ya,2),Ca=Na[0],Ta=Na[1];function Da(e,t){"created_by"===e?Dt(t):"vendor_id"===e?vt(t):"status"===e?Rt(t):"payment_status"===e?Ta(t):"payment_methods"===e&&va(t),ta[e]=Object.values(t).map((function(e){return e.id})).join(","),U(z=1),Qa()}var Fa=Object(s.useState)(0),Ma=Object(o.a)(Fa,2),Ra=Ma[0],Pa=Ma[1],Aa=Object(s.useState)(0),La=Object(o.a)(Aa,2),Ia=La[0],Ea=La[1],za=Object(s.useState)(0),Ua=Object(o.a)(za,2),Ba=Ua[0],qa=Ua[1],Va=Object(s.useState)(0),Ha=Object(o.a)(Va,2),Ga=Ha[0],Wa=Ha[1];function Qa(){Bt(Ut=[]);var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}};a.get("store_id")&&(ta.store_id=a.get("store_id")),e.purchase&&(ta.purchase_id=e.purchase.id);var s=(new Date).getTimezoneOffset();ta.timezone_offset=parseFloat(s/60),ta.stats="1",aa(ta);var n=ja(ta);""!==n&&(n="&"+n),dt(!0),fetch("/v1/purchase-return?select=id,code,purchase_code,cash_discount,purchase_id,date,net_total,created_by_name,vendor_name,vendor_invoice_no,status,created_at,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount,store_id"+n+"&sort="+la+ca+"&page="+z+"&limit="+A,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:dt(!1),ht(!1),M(n.result),o=parseInt((n.total_count+A-1)/A),H(o),Z(n.total_count),se((z-1)*A),J(n.result.length),r=n.meta.total_purchase_return,i(r),j=n.meta.vat_price,m(j),w=n.meta.discount,S(w),bs=n.meta.cash_discount,hs(bs),Ra=n.meta.paid_purchase_return,Pa(Ra),Ia=n.meta.unpaid_purchase_return,Ea(Ia),Ba=n.meta.cash_purchase_return,qa(Ba),Ga=n.meta.bank_account_purchase_return,Wa(Ga);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){dt(!1),ht(!1),console.log(e)}))}function Za(e){ra(ca=e),da(la="-"===la?"":"-"),Qa()}function Ka(e){z=parseInt(e),U(z),Qa()}var Xa=Object(s.useRef)(),Ya=Object(s.useRef)(),Ja=Object(s.useRef)(),$a=Object(s.useRef)(),es=Object(s.useState)({}),ts=Object(o.a)(es,2),as=ts[0],ss=ts[1],ns=Object(s.useState)(!1),cs=Object(o.a)(ns,2),rs=cs[0],is=cs[1];function os(e){ss(e),rs=!0,is(!0)}function ls(){rs=!1,is(!1)}var ds=Object(s.useRef)(),js=Object(s.useState)(0),us=Object(o.a)(js,2),bs=us[0],hs=us[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(wa,{ref:Ya,refreshList:Qa,refreshPurchaseList:e.refreshPurchaseList,showToastMessage:e.showToastMessage}),Object(T.jsx)(Re,{ref:Xa}),Object(T.jsx)(fa,{ref:Ja,showToastMessage:e.showToastMessage,openDetailsView:function(e){$a.current.open(e)}}),Object(T.jsx)(ma,{ref:$a,openUpdateForm:function(e){Ja.current.open(e)},showToastMessage:e.showToastMessage}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:r,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Paid Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:null===(t=Ra)||void 0===t?void 0:t.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Cash Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ba.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Bank Account Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ga.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Credit Purchase Return: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ia.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Cash Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:bs.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Purchase return Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:w.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["VAT Collected: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:j.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Purchase Returns"})}),Object(T.jsxs)("div",{className:"col text-end",children:[Object(T.jsx)(Sa,{filename:Ht,element:Ut.length>0?Object(T.jsx)(_.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Purchase Return Report"}):"",children:Object(T.jsx)(ka,{dataSet:Ut,name:Ht})}),0==Ut.length?Object(T.jsx)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return Jt.apply(this,arguments)},children:Zt?"Preparing..":"Purchase Return Report"}):"","\xa0\xa0",Object(T.jsx)("div",{className:"col text-end",children:e.purchase?Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){Ya.current.open(void 0,e.purchase.id)},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]}):""})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===Q&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Purchase Returns to display"})})}),Object(T.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ht(!0),Qa()},variant:"primary",disabled:bt,children:[bt?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:lt&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:Q>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:A,onChange:function(e){var t;t=e.target.value,A=parseInt(t),L(A),Qa()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{border:"solid 0px"},children:V?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ka(e.selected+1)},pageRangeDisplayed:5,pageCount:V,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:z-1}):""})}),Object(T.jsx)("div",{className:"row",children:Q>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ae+1,"-",ae+Y," of"," ",Q]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",z," of ",V]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("code")},children:["ID","code"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("vendor_invoice_no")},children:["Vendor Invoice No.","vendor_invoice_no"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_invoice_no"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("vendor_name")},children:["Vendor","vendor_name"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("purchase_code")},children:["Purchase ID","code"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("date")},children:["Date","date"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("net_total")},children:["Net Total","net_total"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("cash_discount")},children:["Cash Discount","cash_discount"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"cash_discount"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("total_payment_paid")},children:["Amount Paid","total_payment_paid"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"total_payment_paid"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("balance_amount")},children:["Balance","balance_amount"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"balance_amount"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("payments_count")},children:["No.of Payments","payments_count"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"payments_count"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("payment_status")},children:["Payment Status","payment_status"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_status"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("payment_methods")},children:["Payment Methods","payment_methods"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_methods"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("created_by")},children:["Created By","created_by"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Za("created_at")},children:["Created At","created_at"===ca&&"-"===la?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ca&&""===la?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return ha("code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vendor_invoice_no",onChange:function(e){return ha("vendor_invoice_no",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"vendor_id",labelKey:"search_label",onChange:function(e){Da("vendor_id",e)},options:mt,placeholder:"name or mob",selected:gt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ua.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_code",onChange:function(e){return ha("purchase_code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"125px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:Ae,selected:de,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Le(""),void pa("date_str","");pa("date_str",e),de=e,je(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ie(!re)},children:re?"Less..":"More.."}),Object(T.jsx)("br",{}),re?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:ze,selected:he,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Ue(""),void pa("from_date","");pa("from_date",e),he=e,pe(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:Ve,selected:Oe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return He(""),void pa("to_date","");pa("to_date",e),Oe=e,fe(e)}})]}):null]})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return ha("net_total",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"cash_discount",onChange:function(e){return ha("cash_discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"total_payment_paid",onChange:function(e){return ha("total_payment_paid",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"balance_amount",onChange:function(e){return ha("balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"payments_count",onChange:function(e){return ha("payments_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_status",labelKey:"name",onChange:function(e){Da("payment_status",e)},options:[{id:"paid",name:"Paid"},{id:"not_paid",name:"Not Paid"},{id:"paid_partially",name:"Paid partially"}],placeholder:"Select Payment Status",selected:Ca,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_methods",labelKey:"name",onChange:function(e){Da("payment_methods",e)},options:[{id:"cash",name:"cash"},{id:"bank_account",name:"Bank Account / Debit / Credit card"}],placeholder:"Select payment methods",selected:ga,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){Da("created_by",e)},options:Ct,placeholder:"Select Users",selected:Tt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ba.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Ye,selected:ve,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Je(""),void pa("created_at","");pa("created_at",e),ve=e,ye(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Ze(!Qe)},children:Qe?"Less..":"More.."}),Object(T.jsx)("br",{}),Qe?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:tt,selected:we,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return at(""),void pa("created_at_from","");pa("created_at_from",e),we=e,Se(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ct,selected:De,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return rt(""),void pa("created_at_to","");pa("created_at_to",e),De=e,Fe(e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:F&&F.map((function(e){var t,a,s;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:e.vendor_invoice_no}),Object(T.jsx)("td",{children:e.vendor_name}),Object(T.jsx)("td",{children:e.purchase_code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{children:e.net_total}),Object(T.jsx)("td",{children:null===(t=e.cash_discount)||void 0===t?void 0:t.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){os(e)},children:null===(a=e.total_payment_paid)||void 0===a?void 0:a.toFixed(2)})}),Object(T.jsx)("td",{children:null===(s=e.balance_amount)||void 0===s?void 0:s.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){os(e)},children:e.payments_count})}),Object(T.jsxs)("td",{children:["paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]}),Object(T.jsx)("td",{children:e.payment_methods&&e.payment_methods.map((function(e){return Object(T.jsx)("span",{className:"badge bg-info",children:e})}))}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){var t;t=e.id,Ya.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,Xa.current.open(t)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(T.jsx)("ul",{className:"dropdown-menu",children:Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){var t;t=e,Ja.current.open(void 0,t)},children:[Object(T.jsx)("i",{className:"bi bi-plus"}),"\xa0 Add Payment"]})})})]})]},e.code)}))})]})}),V?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ka(e.selected+1)},pageRangeDisplayed:5,pageCount:V,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:z-1}):""]})})})})]}),Object(T.jsxs)(f.a,{show:rs,size:"lg",onHide:ls,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Payment history of Purchase return #",as.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ls,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(_a,{ref:ds,showToastMessage:e.showToastMessage,purchaseReturn:as,refreshPurchaseReturnList:Qa})})]})]})},Da=Qt.a.ExcelFile,Fa=Qt.a.ExcelFile.ExcelSheet;var Ma=function(e){var t=new h.a,a=Object(s.useState)(0),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(0),v=Object(o.a)(m,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(0),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)([]),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(5),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(1),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(0),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(0),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(!1),_e=Object(o.a)(fe,2),ve=_e[0],ye=_e[1],Ne=Object(s.useState)(new Date),Ce=Object(o.a)(Ne,2),we=Ce[0],Se=Ce[1],ke=Object(s.useState)(new Date),Te=Object(o.a)(ke,2),De=Te[0],Fe=Te[1],Me=Object(s.useState)(new Date),Re=Object(o.a)(Me,2),Pe=Re[0],Ae=Re[1],Le=Object(s.useState)(new Date),Ie=Object(o.a)(Le,2),Ee=Ie[0],ze=Ie[1],Ue=Object(s.useState)(new Date),Be=Object(o.a)(Ue,2),qe=Be[0],Ve=Be[1],He=Object(s.useState)(new Date),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1],Ze=Object(s.useState)(new Date),Ke=Object(o.a)(Ze,2),Xe=Ke[0],Ye=Ke[1],Je=Object(s.useState)(new Date),$e=Object(o.a)(Je,2),et=$e[0],tt=$e[1],at=Object(s.useState)(new Date),st=Object(o.a)(at,2),nt=st[0],ct=st[1],rt=Object(s.useState)(""),it=Object(o.a)(rt,2),ot=it[0],lt=it[1],dt=Object(s.useState)(""),jt=Object(o.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(s.useState)(""),pt=Object(o.a)(ht,2),xt=pt[0],mt=pt[1],Ot=Object(s.useState)(!1),ft=Object(o.a)(Ot,2),_t=ft[0],gt=ft[1],vt=Object(s.useState)(""),yt=Object(o.a)(vt,2),Nt=yt[0],Ct=yt[1],wt=Object(s.useState)(""),St=Object(o.a)(wt,2),kt=St[0],Tt=St[1],Dt=Object(s.useState)(""),Ft=Object(o.a)(Dt,2),Mt=Ft[0],Rt=Ft[1],Pt=Object(s.useState)(!1),At=Object(o.a)(Pt,2),Lt=At[0],It=At[1],Et=Object(s.useState)(""),zt=Object(o.a)(Et,2),Ut=zt[0],Bt=zt[1],qt=Object(s.useState)(""),Vt=Object(o.a)(qt,2),Ht=Vt[0],Gt=Vt[1],Wt=Object(s.useState)(""),Qt=Object(o.a)(Wt,2),Zt=Qt[0],Kt=Qt[1],Xt=Object(s.useState)(!1),Yt=Object(o.a)(Xt,2),Jt=Yt[0],$t=Yt[1],ea=Object(s.useState)(!1),ta=Object(o.a)(ea,2),aa=ta[0],sa=ta[1],na=Object(s.useState)([]),ca=Object(o.a)(na,2),ra=ca[0],ia=ca[1],oa=Object(s.useState)([]),la=Object(o.a)(oa,2),da=la[0],ja=la[1],ua=Object(s.useState)([]),ba=Object(o.a)(ua,2),ha=ba[0],xa=ba[1],ma=Object(s.useState)([]),Oa=Object(o.a)(ma,2),fa=Oa[0],_a=Oa[1],ga=Object(s.useState)([]),va=Object(o.a)(ga,2),ya=(va[0],va[1]);Object(s.useEffect)((function(){Ls()}),[]);var Ca=Object(s.useState)([]),Sa=Object(o.a)(Ca,2),ka=Sa[0],Ma=Sa[1],Ra=Object(s.useState)([]),Pa=Object(o.a)(Ra,2),Aa=Pa[0],La=Pa[1],Ia=Object(s.useState)("Purchase Report"),Ea=Object(o.a)(Ia,2),za=Ea[0],Ua=Ea[1],Ba=Object(s.useState)(!1),qa=Object(o.a)(Ba,2),Va=qa[0],Ha=qa[1];function Ga(){console.log("Inside prepareExcelData()");for(var e=[],t=0;t<ka.length;t++){var a=Object(x.default)(new Date(ka[t].date),"dd-MMM-yyyy");e[a]||(e[a]=[]),e[a].push(ka[t])}console.log("groupedByDate:",e),Aa=[{columns:[{title:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a - S/L No.",width:{wch:18},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 - Date of Invoice",width:{wch:25},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 - Invoice Number",width:{wch:25},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 - Supplier Name",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0631\u0642\u0645\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u0644\u0644\u0645\u0648\u0631\u062f - Supplier VAT No",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0645\u0628\u0644\u063a \u0642\u0628\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 - Amount Before VAT",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u062a\u062e\u0641\u064a\u0636 - Discount",width:{wch:15},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0645\u0628\u0644\u063a \u0628\u0639\u062f \u0627\u0644\u062e\u0635\u0645 - Amount After Discount",width:{wch:30},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 -  VAT Amount",width:{wch:20},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}},{title:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0634\u0627\u0645\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 - Total Amount after VAT",width:{wch:35},style:{fill:{patternType:"solid",fgColor:{rgb:"FFCCEEFF"}},font:{vertAlign:!0,bold:!0},alignment:{horizontal:"center",vertical:"center"}}}],data:[]}];var s=0,n=0,c=0,r=0,i=0,o=0;for(var l in e){console.log("purchaseDate:",l),0,0,0;for(t=0;t<e[l].length>0;t++){o++;var d=e[l][t],j=d.vendor_invoice_no?d.vendor_invoice_no+" / "+d.code:d.code,u="N/A";d.vendor&&d.vendor.vat_no&&(u=d.vendor.vat_no);var b=d.total+d.shipping_handling_fees,h=d.total+d.shipping_handling_fees-d.discount,p=d.total+d.shipping_handling_fees-d.discount+d.vat_price;s+=b,i+=d.discount,c+=h,r+=d.vat_price,n+=p,Aa[0].data.push([{value:o,style:{alignment:{horizontal:"center"}}},{value:l,style:{alignment:{horizontal:"center"}}},{value:j,style:{alignment:{horizontal:"center"}}},{value:d.vendor_name},{value:u,style:{alignment:{horizontal:"center"}}},{value:b.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:d.discount.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:h.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:d.vat_price.toFixed(2),style:{alignment:{horizontal:"right"}}},{value:p.toFixed(2),style:{alignment:{horizontal:"right"}}}])}}Aa[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]),Aa[0].data.push([{value:""},{value:""},{value:""},{value:""},{value:"TOTAL",style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:s.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:i.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:c.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:r.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}},{value:n.toFixed(2),style:{font:{vertAlign:!0,bold:!0},alignment:{horizontal:"right"}}}]),La(Aa),console.log("excelData:",Aa)}function Wa(){za="Purchase Report",Xa.from_date&&Xa.to_date?za+=" - From "+Xa.from_date+" to "+Xa.to_date:Xa.from_date?za+=" - From "+Xa.from_date+" to "+Object(x.default)(new Date,"dd-MMM-yyyy"):Xa.to_date?za+=" - Upto "+Xa.to_date:Xa.date_str&&(za+=" of "+Xa.date_str),Ua(za)}function Qa(){return Qa=Object(b.a)(u.a.mark((function e(){var a,s,n,c,r,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},s="select=id,code,vendor_id,vendor.id,vendor.vat_no,vendor_invoice_no,date,total,net_total,shipping_handling_fees,discount_percent,discount,products,vendor_name,created_at,updated_at,vat_price",t.get("store_id")&&(Xa.store_id=t.get("store_id")),n=new Date,c=n.getTimezoneOffset(),console.log("Timezone:",parseFloat(c/60)),Xa.timezone_offset=parseFloat(c/60),Xa.stats="1",Ya(Xa),""!==(r=rs(Xa))&&(r="&"+r),i=500,o=[],l=1,Wa();case 15:return Va=!0,Ha(!0),e.next=20,fetch("/v1/purchase?"+s+r+"&sort="+ns+es+"&page="+l+"&limit="+i,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if($t(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 20:if(0!==(d=e.sent).length){e.next=23;break}return e.abrupt("break",27);case 23:o=o.concat(d),l++;case 25:e.next=15;break;case 27:ka=o,Ma(o),console.log("allPurchases:",ka),Ga(),Va=!1,Ha(!1);case 33:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}var Za=Object(s.useState)({}),Ka=Object(o.a)(Za,2),Xa=Ka[0],Ya=Ka[1],Ja=Object(s.useState)("created_at"),$a=Object(o.a)(Ja,2),es=$a[0],ts=$a[1],as=Object(s.useState)("-"),ss=Object(o.a)(as,2),ns=ss[0],cs=ss[1];function rs(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function is(){return(is=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestVendors"),""!==(s=rs({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/vendor?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,ia(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(){return(os=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),ia([]),console.log("searchTerm:"+a),a){e.next=5;break}return e.abrupt("return");case 5:return""!==(s=rs({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=12,fetch("/v1/user?select=id,name"+s,n);case 12:return c=e.sent,e.next=15,c.json();case 15:r=e.sent,xa(r.result);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e,t){Xa[e]=t,ae(ee=1),Ls()}function ds(e,t){if(!t)return ee=1,Xa[e]="",ae(ee),void Ls();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(lt(t),bt(""),mt(""),Xa.from_date="",Xa.to_date="",Xa[e]=t):"from_date"===e?(bt(t),lt(""),Xa.date="",Xa[e]=t):"to_date"===e?(mt(t),lt(""),Xa.date="",Xa[e]=t):"created_at"===e?(Ct(t),Tt(""),Rt(""),Xa.created_at_from="",Xa.created_at_to="",Xa[e]=t):"updated_at"===e&&(Bt(t),Gt(""),Kt(""),Xa.updated_at_from="",Xa.updated_at_to="",Xa[e]=t),"created_at_from"===e?(Tt(t),Ct(""),Xa.created_at="",Xa[e]=t):"created_at_to"===e&&(Rt(t),Ct(""),Xa.created_at="",Xa[e]=t),"updated_at_from"===e?(Gt(t),Bt(""),Xa.updated_at="",Xa[e]=t):"updated_at_to"===e&&(Kt(t),Bt(""),Xa.updated_at="",Xa[e]=t),ae(ee=1),Ls()}var js=Object(s.useState)([]),us=Object(o.a)(js,2),bs=us[0],hs=us[1],ps=Object(s.useState)([]),xs=Object(o.a)(ps,2),ms=xs[0],Os=xs[1];function fs(e,t){"created_by"===e?_a(t):"vendor_id"===e?ja(t):"status"===e?ya(t):"payment_status"===e?Os(t):"payment_methods"===e&&hs(t),Xa[e]=Object.values(t).map((function(e){return e.id})).join(","),ae(ee=1),Ls()}var _s=Object(s.useState)(0),gs=Object(o.a)(_s,2),vs=gs[0],ys=gs[1],Ns=Object(s.useState)(0),Cs=Object(o.a)(Ns,2),ws=Cs[0],Ss=Cs[1],ks=Object(s.useState)(0),Ts=Object(o.a)(ks,2),Ds=Ts[0],Fs=Ts[1],Ms=Object(s.useState)(0),Rs=Object(o.a)(Ms,2),Ps=Rs[0],As=Rs[1];function Ls(){La(Aa=[]);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Xa.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Xa.timezone_offset=parseFloat(a/60),Xa.stats="1",Ya(Xa);var s=rs(Xa);""!==s&&(s="&"+s),$t(!0),fetch("/v1/purchase?select=id,code,date,net_total,return_count,cash_discount,discount,vat_price,total,store_id,created_by_name,vendor_name,vendor_invoice_no,status,created_at,updated_at,net_retail_profit,net_wholesale_profit,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount"+s+"&sort="+ns+es+"&page="+ee+"&limit="+X,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:$t(!1),sa(!1),Q(n.result),o=parseInt((n.total_count+X-1)/X),re(o),de(n.total_count),Oe((ee-1)*X),he(n.result.length),c=n.meta.total_purchase,r(c),d=n.meta.vat_price,j(d),C=n.meta.shipping_handling_fees,w(C),D=n.meta.discount,F(D),P=n.meta.cash_discount,A(P),E=n.meta.net_retail_profit,z(E),q=n.meta.net_wholesale_profit,V(q),vs=n.meta.paid_purchase,ys(vs),ws=n.meta.unpaid_purchase,Ss(ws),Ds=n.meta.cash_purchase,Fs(Ds),Ps=n.meta.bank_account_purchase,As(Ps);case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){$t(!1),sa(!1),console.log(e)}))}function Is(e){ts(es=e),cs(ns="-"===ns?"":"-"),Ls()}function Es(e){ee=parseInt(e),ae(ee),Ls()}function zs(e){qs.current.open(e)}var Us=Object(s.useRef)();function Bs(e){Us.current.open(e)}var qs=Object(s.useRef)();function Vs(){qs.current.open()}var Hs=Object(s.useRef)();Object(s.useRef)(),Object(s.useRef)();var Gs=Object(s.useState)({}),Ws=Object(o.a)(Gs,2),Qs=Ws[0],Zs=Ws[1],Ks=Object(s.useState)(!1),Xs=Object(o.a)(Ks,2),Ys=Xs[0],Js=Xs[1];function $s(e){Zs(e),Ys=!0,Js(!0)}function en(){Ys=!1,Js(!1)}var tn=Object(s.useRef)(),an=Object(s.useState)(!1),sn=Object(o.a)(an,2),nn=sn[0],cn=sn[1];function rn(){nn=!1,cn(!1)}var on=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Na,{ref:qs,refreshList:Ls,showToastMessage:e.showToastMessage,openDetailsView:Bs}),Object(T.jsx)(ge,{ref:Us,openUpdateForm:zs,openCreateForm:Vs}),Object(T.jsx)(wa,{ref:Hs,showToastMessage:e.showToastMessage}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:c,displayType:"text",thousandSeparator:!0,suffix:"",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Paid Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:vs.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Cash Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ds.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h4",{className:"text-end",children:["Bank Account Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Ps.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Credit Purchase: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ws.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Cash Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:P.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Purchase Discounts: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:D.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Shipping/Handling fees: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:C.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["VAT paid: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:d.toFixed(2),displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),"true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Expected Net Retail Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:E,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):"","true"===t.get("admin")?Object(T.jsxs)("h1",{className:"text-end",children:["Expected Net Wholesale Profit: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:q,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}):""]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Purchases"})}),Object(T.jsxs)("div",{className:"col text-end",children:[Object(T.jsx)(Da,{filename:za,element:Aa.length>0?Object(T.jsx)(_.a,{variant:"success",className:"btn btn-primary mb-3 success",children:"Download Purchase Report"}):"",children:Object(T.jsx)(Fa,{dataSet:Aa,name:za})}),0==Aa.length?Object(T.jsx)(_.a,{variant:"primary",className:"btn btn-primary mb-3",onClick:function(){return Qa.apply(this,arguments)},children:Va?"Preparing..":"Purchase Report"}):"","\xa0\xa0",Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Vs,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===le&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Purchases to display"})})}),Object(T.jsxs)("div",{className:"row",style:{border:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){sa(!0),Ls()},variant:"primary",disabled:aa,children:[aa?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Jt&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:le>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:X,onChange:function(e){var t;t=e.target.value,X=parseInt(t),Y(X),Ls()},className:"form-control pull-right",style:{border:"solid 1px",borderColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{border:"solid 0px"},children:ce?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Es(e.selected+1)},pageRangeDisplayed:5,pageCount:ce,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ee-1}):""})}),Object(T.jsx)("div",{className:"row",children:le>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",me+1,"-",me+be," of"," ",le]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ee," of ",ce]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("code")},children:["ID","code"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("vendor_invoice_no")},children:["Vendor Invoice No.","vendor_invoice_no"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_invoice_no"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("vendor_name")},children:["Vendor","vendor_name"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"vendor_name"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("date")},children:["Date","date"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("net_total")},children:["Net Total","net_total"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_total"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("cash_discount")},children:["Cash Discount","cash_discount"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"cash_discount"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("total_payment_paid")},children:["Amount Paid","total_payment_paid"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"total_payment_paid"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("balance_amount")},children:["Balance","balance_amount"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"balance_amount"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("payments_count")},children:["No.of Payments","payments_count"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"payments_count"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("payment_status")},children:["Payment Status","payment_status"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_status"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("payment_methods")},children:["Payment Methods","payment_methods"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_methods"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("discount")},children:["Purchase Discount","discount"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"discount"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("vat_price")},children:["VAT","vat_price"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"vat_price"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("return_count")},children:["Returns","return_count"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"return_count"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("retail_profit")},children:["Expected Net Retail Profit","net_retail_profit"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_retail_profit"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("wholesale_profit")},children:["Expected Net Wholesale Profit","net_wholesale_profit"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-down"}):null,"net_wholesale_profit"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-numeric-up"}):null]})}):"",Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("created_by")},children:["Created By","created_by"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("created_at")},children:["Created At","created_at"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Is("updated_at")},children:["Updated At","updated_at"===es&&"-"===ns?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"updated_at"===es&&""===ns?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return ls("code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vendor_invoice_no",onChange:function(e){return ls("vendor_invoice_no",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"vendor_id",labelKey:"search_label",onChange:function(e){fs("vendor_id",e)},options:ra,placeholder:"name or mob",selected:da,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){is.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsxs)("div",{style:{minWidth:"125px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:ot,selected:we,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return lt(""),void ds("date_str","");ds("date_str",e),we=e,Se(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return ye(!ve)},children:ve?"Less..":"More.."}),Object(T.jsx)("br",{}),ve?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:ut,selected:De,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return bt(""),void ds("from_date","");ds("from_date",e),De=e,Fe(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:xt,selected:Pe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return mt(""),void ds("to_date","");ds("to_date",e),Pe=e,Ae(e)}})]}):null]})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_total",onChange:function(e){return ls("net_total",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"cash_discount",onChange:function(e){return ls("cash_discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"total_payment_paid",onChange:function(e){return ls("total_payment_paid",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"balance_amount",onChange:function(e){return ls("balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"payments_count",onChange:function(e){return ls("payments_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_status",labelKey:"name",onChange:function(e){fs("payment_status",e)},options:[{id:"paid",name:"Paid"},{id:"not_paid",name:"Not Paid"},{id:"paid_partially",name:"Paid partially"}],placeholder:"Select Payment Status",selected:ms,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"payment_methods",labelKey:"name",onChange:function(e){fs("payment_methods",e)},options:[{id:"cash",name:"cash"},{id:"bank_account",name:"Bank Account / Debit / Credit card"}],placeholder:"Select payment methods",selected:bs,highlightOnlyResult:!0,multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"discount",onChange:function(e){return ls("discount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"vat_price",onChange:function(e){return ls("vat_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"return_count",onChange:function(e){return ls("return_count",e.target.value)},className:"form-control"})}),"true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_retail_profit",onChange:function(e){return ls("net_retail_profit",e.target.value)},className:"form-control"})}):"","true"===t.get("admin")?Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"net_wholesale_profit",onChange:function(e){return ls("net_wholesale_profit",e.target.value)},className:"form-control"})}):"",Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){fs("created_by",e)},options:ha,placeholder:"Select Users",selected:fa,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){os.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Nt,selected:Ee,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Ct(""),void ds("created_at","");ds("created_at",e),Ee=e,ze(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return gt(!_t)},children:_t?"Less..":"More.."}),Object(T.jsx)("br",{}),_t?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:kt,selected:qe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Tt(""),void ds("created_at_from","");ds("created_at_from",e),qe=e,Ve(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:Mt,selected:We,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Rt(""),void ds("created_at_to","");ds("created_at_to",e),We=e,Qe(e)}})]}):null]}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"updated_at",value:Ut,selected:Xe,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Bt(""),void ds("updated_at","");ds("updated_at",e),Xe=e,Ye(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return It(!Lt)},children:Lt?"Less..":"More.."}),Object(T.jsx)("br",{}),Lt?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"updated_at_from",value:Ht,selected:et,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Gt(""),void ds("updated_at_from","");ds("updated_at_from",e),et=e,tt(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"updated_at_to",value:Zt,selected:nt,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Kt(""),void ds("updated_at_to","");ds("updated_at_to",e),nt=e,ct(e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:W&&W.map((function(e){var a,s,n;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:e.vendor_invoice_no}),Object(T.jsx)("td",{children:e.vendor_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.net_total,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:null===(a=e.cash_discount)||void 0===a?void 0:a.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){$s(e)},children:null===(s=e.total_payment_paid)||void 0===s?void 0:s.toFixed(2)})}),Object(T.jsx)("td",{children:null===(n=e.balance_amount)||void 0===n?void 0:n.toFixed(2)}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){$s(e)},children:e.payments_count})}),Object(T.jsxs)("td",{children:["paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-success",children:"Paid"}):"","paid_partially"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-warning",children:"Paid Partially"}):"","not_paid"==e.payment_status?Object(T.jsx)("span",{className:"badge bg-danger",children:"Not Paid"}):""]}),Object(T.jsx)("td",{children:e.payment_methods&&e.payment_methods.map((function(e){return Object(T.jsx)("span",{className:"badge bg-info",children:e})}))}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.discount,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.vat_price,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}),Object(T.jsx)("td",{children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){!function(e){Zs(e),nn=!0,cn(!0)}(e)},children:e.return_count})}),"true"===t.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.net_retail_profit,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"","true"===t.get("admin")?Object(T.jsx)("td",{children:Object(T.jsx)(N.a,{value:e.net_wholesale_profit,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})}):"",Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{children:e.updated_at?Object(x.default)(new Date(e.updated_at),"MMM dd yyyy h:mma"):""}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){zs(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Bs(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),Object(T.jsxs)("button",{className:"btn btn-dark btn-sm","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Create Purchase Return",onClick:function(){var t;t=e.id,Hs.current.open(void 0,t)},children:[Object(T.jsx)("i",{className:"bi bi-arrow-left"})," Return"]})]})]},e.code)}))})]})}),ce?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Es(e.selected+1)},pageRangeDisplayed:5,pageCount:ce,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ee-1}):""]})})})})]}),Object(T.jsxs)(f.a,{show:Ys,size:"lg",onHide:en,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Payment history of Purchase #",Qs.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:en,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(pa,{ref:tn,showToastMessage:e.showToastMessage,purchase:Qs,refreshPurchaseList:Ls})})]}),Object(T.jsxs)(f.a,{show:nn,size:"lg",onHide:rn,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Purchase Returns of Purchase Order #",Qs.code]}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:rn,"aria-label":"Close"})})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(Ta,{ref:on,showToastMessage:e.showToastMessage,purchase:Qs,refreshPurchaseList:Ls})})]})]})};var Ra=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1];Object(s.useEffect)((function(){Ee()}),[]);var ge=Object(s.useState)({}),ve=Object(o.a)(ge,2),Ne=ve[0],Ce=ve[1],we=Object(s.useState)("created_at"),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)("-"),Fe=Object(o.a)(De,2),Me=Fe[0],Re=Fe[1];function Pe(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Ae(){return(Ae=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Pe({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,xe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){Ne[e]=t,C(N=1),Ee()}function Ie(e,t){if(!t)return N=1,Ne[e]="",C(N),void Ee();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),Ne.created_at_from="",Ne.created_at_to="",Ne[e]=t),"created_at_from"===e?(ee(t),X(""),Ne.created_at="",Ne[e]=t):"created_at_to"===e&&(ne(t),X(""),Ne.created_at="",Ne[e]=t),C(N=1),Ee()}function Ee(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ne.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ne.timezone_offset=parseFloat(a/60),Ce(Ne);var s=Pe(Ne);""!==s&&(s="&"+s),oe(!0),fetch("/v1/vendor?select=id,name,created_by_name,created_at,stores"+s+"&sort="+Me+ke+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("data.result:",n.result),oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function ze(e){Te(ke=e),Re(Me="-"===Me?"":"-"),Ee()}function Ue(e){N=parseInt(e),C(N),Ee()}function Be(e){He.current.open(e)}var qe=Object(s.useRef)();function Ve(e){console.log("id:",e),qe.current.open(e)}var He=Object(s.useRef)();function Ge(){He.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(va,{ref:He,refreshList:Ee,showToastMessage:e.showToastMessage,openDetailsView:Ve}),Object(T.jsx)(ye,{ref:qe,openUpdateForm:Be,openCreateForm:Ge}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Vendors"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Ge,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Vendors to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bvendor:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bvendor:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ue(!0),Ee()},variant:"primary",disabled:je,children:[je?Object(T.jsx)(g.a,{as:"span",animation:"bvendor",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),Ee()},className:"form-control pull-right",style:{bvendor:"solid 1px",bvendorColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bvendor:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ue(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("name")},children:["Name","name"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_count")},children:["Purchase count","stores.purchase_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_amount")},children:["Purchase amount","stores.purchase_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_paid_amount")},children:["Purchase paid amount","stores.purchase_paid_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_paid_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_balance_amount")},children:["Purchase balance amount","stores.purchase_balance_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_balance_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_retail_profit")},children:["Purchase expected retail profit","stores.purchase_retail_profit"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_retail_profit"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_retail_loss")},children:["Purchase expected retail loss","stores.purchase_retail_loss"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_retail_loss"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_wholesale_profit")},children:["Purchase expected wholesale profit","stores.purchase_wholesale_profit"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_wholesale_profit"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_wholesale_loss")},children:["Purchase expected wholesale loss","stores.purchase_wholesale_loss"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_wholesale_loss"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_paid_count")},children:["Purchase paid count","stores.purchase_paid_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_paid_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_not_paid_count")},children:["Purchase unpaid count","stores.purchase_not_paid_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_not_paid_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_paid_partially_count")},children:["Purchase paid partially count","stores.purchase_paid_partially_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_paid_partially_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_count")},children:["Purchase return count","stores.purchase_return_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_amount")},children:["Purchase return amount","stores.purchase_return_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_paid_amount")},children:["Purchase return paid amount","stores.purchase_return_paid_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_paid_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_balance_amount")},children:["Purchase return balance amount","stores.purchase_return_balance_amount"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_balance_amount"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_paid_count")},children:["Purchase return paid count","stores.purchase_return_paid_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_paid_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_not_paid_count")},children:["Purchase return unpaid count","stores.purchase_return_not_paid_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_not_paid_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("stores.purchase_return_paid_partially_count")},children:["Purchase return paid partially count","stores.purchase_return_paid_partially_count"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_paid_partially_count"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_by_name")},children:["Created By","created_by_name"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ze("created_at")},children:["Created At","created_at"===ke&&"-"===Me?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===ke&&""===Me?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Le("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_paid_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_retail_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_retail_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_wholesale_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_wholesale_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_not_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_paid_partially_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_paid_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_not_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Le("purchase_return_paid_partially_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),Ne[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),Ee()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ae.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:K,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ie("created_at","");Ie("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ie("created_at_from","");Ie("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ie("created_at_to","");Ie("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Be(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]}),Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_paid_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_paid_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_balance_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_balance_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_retail_profit)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_retail_profit)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_retail_loss)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_retail_loss)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_wholesale_profit)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_wholesale_profit)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_wholesale_loss)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_wholesale_loss)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_not_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_not_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_paid_partially_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_paid_partially_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_return_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_return_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_return_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_return_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_return_paid_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_return_paid_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].purchase_return_balance_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].purchase_return_balance_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_return_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_return_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_return_not_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_return_not_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].purchase_return_paid_partially_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].purchase_return_paid_partially_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Be(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ve(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ue(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})};var Pa=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],V=U[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),Q=G[0],Z=G[1],K=Object(s.useState)(""),X=Object(o.a)(K,2),Y=X[0],J=X[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];Object(s.useEffect)((function(){ze()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)("created_at"),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("-"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1];function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ae({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){Ce[e]=t,C(N=1),ze()}function Ee(e,t){if(!t)return N=1,Ce[e]="",C(N),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(J(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),J(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),J(""),Ce.created_at="",Ce[e]=t),C(N=1),ze()}function ze(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),we(Ce);var s=Ae(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/store?select=id,name,code,created_by_name,created_at,vat_percent"+s+"&sort="+Re+Te+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),V((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){De(Te=e),Pe(Re="-"===Re?"":"-"),ze()}function Be(e){N=parseInt(e),C(N),ze()}function qe(e){Ge.current.open(e)}var Ve=Object(s.useRef)();function He(e){Ve.current.open(e)}var Ge=Object(s.useRef)();function We(){Ge.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:Ge,refreshList:ze,showToastMessage:e.showToastMessage,openDetailsView:He}),Object(T.jsx)(q,{ref:Ve,openUpdateForm:qe,openCreateForm:We}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Stores"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:We,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){t.remove("store_name",{path:"/"}),t.remove("store_id",{path:"/"}),t.remove("vat_percent",{path:"/"}),window.location="/dashboard/stores"},children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Select All Stores"]})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Stores to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bstore:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bstore:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){he(!0),ze()},variant:"primary",disabled:be,children:[be?Object(T.jsx)(g.a,{as:"span",animation:"bstore",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ze()},className:"form-control pull-right",style:{bstore:"solid 1px",bstoreColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bstore:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("name")},children:["Name","name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("code")},children:["Code","code"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ie("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return Ie("code",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),ze()},options:me,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Y,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return J(""),void Ee("created_at","");Ee("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Z(!Q)},children:Q?"Less..":"More.."}),Object(T.jsx)("br",{}),Q?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void Ee("created_at_from","");Ee("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return re(""),void Ee("created_at_to","");Ee("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[t.get("store_id")!==e.id?Object(T.jsxs)(_.a,{className:"btn btn-danger btn-sm",onClick:function(){!function(e){t.set("store_name",e.name,{path:"/",expires:new Date(Date.now()+31536e6)}),t.set("store_id",e.id,{path:"/",expires:new Date(Date.now()+31536e6)}),t.set("vat_percent",e.vat_percent,{path:"/",expires:new Date(Date.now()+31536e6)}),window.location="/dashboard/stores"}(e)},children:[Object(T.jsx)("i",{className:"bi bi-select"}),"SELECT"]}):"SELECTED",Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})};var Aa=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),K=Object(o.a)(Q,2),Y=K[0],J=K[1],$=Object(s.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)([]),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)([]),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1];Object(s.useEffect)((function(){ze()}),[]);var ye=Object(s.useState)({}),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)("created_at"),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)("-"),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1];function Ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Le(){return(Le=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ae({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Oe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){Ce[e]=t,C(N=1),ze()}function Ee(e,t){if(!t)return N=1,Ce[e]="",C(N),void ze();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(J(t),ae(""),re(""),Ce.created_at_from="",Ce.created_at_to="",Ce[e]=t),"created_at_from"===e?(ae(t),J(""),Ce.created_at="",Ce[e]=t):"created_at_to"===e&&(re(t),J(""),Ce.created_at="",Ce[e]=t),C(N=1),ze()}function ze(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ce.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ce.timezone_offset=parseFloat(a/60),we(Ce);var s=Ae(Ce);""!==s&&(s="&"+s),de(!0),fetch("/v1/customer?select=id,name,email,phone,created_by_name,created_at,stores"+s+"&sort="+Re+Te+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),he(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),he(!1),console.log(e)}))}function Ue(e){De(Te=e),Pe(Re="-"===Re?"":"-"),ze()}function Be(e){N=parseInt(e),C(N),ze()}function qe(e){Ge.current.open(e)}var Ve=Object(s.useRef)();function He(e){Ve.current.open(e)}var Ge=Object(s.useRef)();function We(){Ge.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(X,{ref:Ge,refreshList:ze,showToastMessage:e.showToastMessage,openDetailsView:He}),Object(T.jsx)(Z,{ref:Ve,openUpdateForm:qe,openCreateForm:We}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Customers"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:We,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Customers to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bcustomer:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bcustomer:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){he(!0),ze()},variant:"primary",disabled:be,children:[be?Object(T.jsx)(g.a,{as:"span",animation:"bcustomer",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ze()},className:"form-control pull-right",style:{bcustomer:"solid 1px",bcustomerColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bcustomer:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("mob")},children:["Phone","phone"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"phone"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("name")},children:["Name","name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("email")},children:["Email","email"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"email"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_count")},children:["Sales count","stores.sales_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_amount")},children:["Sales amount","stores.sales_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_paid_amount")},children:["Sales paid amount","stores.sales_paid_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_paid_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_balance_amount")},children:["Sales balance amount","stores.sales_balance_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_balance_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_profit")},children:["Sales profit","stores.sales_profit"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_profit"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_loss")},children:["Sales loss","stores.sales_loss"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_loss"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_paid_count")},children:["Sales paid count","stores.sales_paid_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_paid_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_not_paid_count")},children:["Sales unpaid count","stores.sales_not_paid_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_not_paid_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_paid_partially_count")},children:["Sales paid partially count","stores.sales_paid_partially_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_paid_partially_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_count")},children:["Sales return count","stores.sales_return_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_amount")},children:["Sales return amount","stores.sales_return_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_paid_amount")},children:["Sales return paid amount","stores.sales_return_paid_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_paid_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_balance_amount")},children:["Sales return balance amount","stores.sales_return_balance_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_balance_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_profit")},children:["Sales return profit","stores.sales_return_profit"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_profit"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_loss")},children:["Sales return loss","stores.sales_return_loss"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_loss"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_paid_count")},children:["Sales return paid count","stores.sales_return_paid_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_paid_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_not_paid_count")},children:["Sales return unpaid count","stores.sales_return_not_paid_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_not_paid_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.sales_return_paid_partially_count")},children:["Sales return paid partially count","stores.sales_return_paid_partially_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_paid_partially_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.quotation_count")},children:["Quotation count","stores.quotation_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.quotation_amount")},children:["Quotation amount","stores.quotation_amount"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_amount"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.quotation_profit")},children:["Quotation profit","stores.quotation_profit"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_profit"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.quotation_loss")},children:["Quotation loss","stores.quotation_loss"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_loss"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("stores.delivery_note_count")},children:["Delivery note count","stores.delivery_note_count"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.delivery_note_count"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_by_name")},children:["Created By","created_by_name"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ue("created_at")},children:["Created At","created_at"===Te&&"-"===Re?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Te&&""===Re?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"phone",onChange:function(e){return Ie("phone",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ie("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"email",onChange:function(e){return Ie("email",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_paid_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_not_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_paid_partially_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_paid_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_balance_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_not_paid_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("sales_return_paid_partially_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("quotation_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("quotation_amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("quotation_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("quotation_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ie("delivery_note_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&ve(a),Ce[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),ze()},options:me,placeholder:"Select Users",selected:ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Le.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Y,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ee("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:te,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ee("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){Ee("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]}),Object(T.jsx)("td",{children:e.phone}),Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.email}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_paid_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_paid_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_balance_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_balance_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_profit)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_profit)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_loss)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_loss)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_not_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_not_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_paid_partially_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_paid_partially_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_return_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_return_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_return_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_return_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_return_paid_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_return_paid_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_return_balance_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_return_balance_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_return_profit)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_return_profit)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].sales_return_loss)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].sales_return_loss)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_return_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_return_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_return_not_paid_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_return_not_paid_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].sales_return_paid_partially_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].sales_return_paid_partially_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].quotation_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].quotation_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].quotation_amount)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].quotation_amount)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].quotation_profit)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].quotation_profit)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){var n,c;return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.stores[a].quotation_loss)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.stores[a].quotation_loss)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.stores&&Object.keys(e.stores).map((function(a,s){return t.get("store_id")&&e.stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.stores[a].delivery_note_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.stores[a].delivery_note_count})," ","@"+e.stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){He(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Be(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})},La=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){r(c=e),b(!0)}}}));var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)({}),l=Object(o.a)(i,2),d=(l[0],l[1],new h.a,Object(s.useState)(!1)),j=Object(o.a)(d,2),u=j[0],b=j[1];function p(){b(!1)}var x=Object(s.useState)(!1),m=Object(o.a)(x,2),O=m[0],g=m[1];return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:u,size:"xl",onHide:p,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:"Json "}),Object(T.jsx)("div",{className:"col align-self-end text-end",children:Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:p,"aria-label":"Close"})})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-md-12 align-self-end text-end",children:Object(T.jsx)(_.a,{variant:"primary",onClick:function(){var e=document.getElementById("data");navigator.clipboard.writeText(e.innerText),O=!0,g(!0)},children:O?"Copied":"Copy"})})}),Object(T.jsx)("code",{children:Object(T.jsx)("pre",{id:"data",children:JSON.stringify(c,null,2)})})]})]})})})),Ia=a(310),Ea=a(311);var za=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(0),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)(1),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(0),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(0),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(!1),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(""),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(""),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(""),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],ue=Object(s.useState)(!1),he=Object(o.a)(ue,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1],ge=Object(s.useState)([]),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],we=Object(s.useState)([]),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)([]),Fe=Object(o.a)(De,2),Me=Fe[0],Re=Fe[1];Object(s.useEffect)((function(){ft()}),[]);var Pe=Object(s.useState)({}),Le=Object(o.a)(Pe,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)("created_at"),Ue=Object(o.a)(ze,2),Be=Ue[0],Ve=Ue[1],He=Object(s.useState)("-"),Ge=Object(o.a)(He,2),We=Ge[0],Qe=Ge[1];function Ze(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function Ke(){return(Ke=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ze({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/product-category?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Te(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return(Xe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Ze({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,_e(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t){Ie[e]=t,w(C=1),ft()}function $e(e,t){if(!t)return C=1,Ie[e]="",w(C),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(Y(t),ae(""),re(""),Ie.created_at_from="",Ie.created_at_to="",Ie[e]=t),"created_at_from"===e?(ae(t),Y(""),Ie.created_at="",Ie[e]=t):"created_at_to"===e&&(re(t),Y(""),Ie.created_at="",Ie[e]=t),w(C=1),ft()}function tt(e,t){"created_by"===e?Ne(t):"category_id"===e&&Re(t),Ie[e]=Object.values(t).map((function(e){return e.id})).join(","),w(C=1),ft()}var at=Object(s.useState)(0),st=Object(o.a)(at,2),nt=st[0],ct=st[1],it=Object(s.useState)(0),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(0),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1],pt=Object(s.useState)(0),xt=Object(o.a)(pt,2),mt=xt[0],Ot=xt[1];function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ie.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ie.timezone_offset=parseFloat(a/60),Ie.stats="1",Ee(Ie);var s=Ze(Ie);""!==s&&(s="&"+s),de(!0),fetch("/v1/product?select=id,item_code,ean_12,bar_code,part_number,name,name_in_arabic,category_name,created_by_name,created_at,rack,product_stores"+s+"&sort="+We+Be+"&page="+C+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:de(!1),xe(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),F(r),A(n.total_count),V((C-1)*j),z(n.result.length),nt=n.meta.stock,ct(nt),lt=n.meta.retail_stock_value,dt(lt),bt=n.meta.wholesale_stock_value,ht(bt),mt=n.meta.purchase_stock_value,Ot(mt);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){de(!1),xe(!1),console.log(e)}))}function _t(e){Ve(Be=e),Qe(We="-"===We?"":"-"),ft()}function gt(e){C=parseInt(e),w(C),ft()}var vt=Object(s.useRef)();function yt(e){vt.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}function wt(){vt.current.open()}var St=Object(s.useRef)();function kt(e){var a=t.get("store_id"),s=.15;if(t.get("vat_percent")&&(s=parseFloat(t.get("vat_percent")/100).toFixed(2)),!a||!e.stores)return{retail_unit_price:"0.00",purchase_unit_price_secret:""};for(var n=0;n<e.stores.length;n++)if(e.stores[n].store_id===a){var c={retail_unit_price:"0.00",purchase_unit_price_secret:""};return e.stores[n].retail_unit_price&&(c.retail_unit_price=parseFloat(e.stores[n].retail_unit_price+parseFloat(e.stores[n].retail_unit_price*s)).toFixed(2)),e.stores[n].purchase_unit_price_secret&&(c.purchase_unit_price_secret=e.stores[n].purchase_unit_price_secret),c}return{retail_unit_price:"0.00",purchase_unit_price_secret:""}}var Tt=Object(s.useRef)();function Dt(e){Tt.current.open(e)}var Ft=Object(s.useRef)();function Mt(e){Ft.current.open(e)}var Rt=Object(s.useRef)();function Pt(e){Rt.current.open(e)}var At=Object(s.useRef)();function Lt(e){At.current.open(e)}var It=Object(s.useRef)();function Et(e){It.current.open(e)}var zt=Object(s.useRef)();function Ut(e){zt.current.open(e)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(je,{ref:Tt,showToastMessage:e.showToastMessage}),Object(T.jsx)(be,{ref:Ft,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ce,{ref:Rt,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ae,{ref:At,showToastMessage:e.showToastMessage}),Object(T.jsx)(qe,{ref:It,showToastMessage:e.showToastMessage}),Object(T.jsx)(Je,{ref:zt,showToastMessage:e.showToastMessage}),Object(T.jsx)(rt,{ref:vt,refreshList:ft,openDetailsView:Ct,showToastMessage:e.showToastMessage}),Object(T.jsx)(et,{ref:Nt,openUpdateForm:yt,openCreateForm:wt,showToastMessage:e.showToastMessage}),Object(T.jsx)(La,{ref:St}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col",children:[Object(T.jsxs)("h1",{className:"text-end",children:["Stock: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:nt,displayType:"text",thousandSeparator:!0,suffix:" Units",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Retail Stock value: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:lt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Wholesale Stock value: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:bt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]}),Object(T.jsxs)("h1",{className:"text-end",children:["Purchase Stock value: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:mt,displayType:"text",thousandSeparator:!0,suffix:" ",renderText:function(e,t){return e}})})]})]})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Products"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:wt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsx)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:function(){var e=function(){for(var e=[],a=0;a<r.length;a++){var s=kt(r[a]);e.push({storename:t.get("store_name"),productname:r[a].name,ean_12:r[a].ean_12,rack:r[a].rack,price:s.retail_unit_price,purchase_unit_price_secret:s.purchase_unit_price_secret})}return console.log("jsonContent:",e),e}();St.current.open(e)},children:"Get JSON for Bar Tender"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===P&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Product Categories to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproduct:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bproduct:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){xe(!0),ft()},variant:"primary",disabled:pe,children:[pe?Object(T.jsx)(g.a,{as:"span",animation:"bproduct",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:le&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),ft()},className:"form-control pull-right",style:{bproduct:"solid 1px",bproductColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproduct:"solid 0px"},children:D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){gt(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""})}),Object(T.jsx)("div",{className:"row",children:P>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",q+1,"-",q+E," of"," ",P]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",C," of ",D]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"Actions"}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("part_number")},children:["Part Number","part_number"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"part_number"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("name")},children:["Name","name"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("ean_12")},children:["Bar Code","ean_12"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"ean_12"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("rack")},children:["Rack","rack"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"rack"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_unit_price")},children:["Purchase Unit Price","stores.purchase_unit_price"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_unit_price"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.wholesale_unit_price")},children:["Wholesale Unit Price","stores.wholesale_unit_price"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_price"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.retail_unit_price")},children:["Retail Unit Price","stores.retail_unit_price"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_price"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.wholesale_unit_profit")},children:["Wholesale Unit Profit","stores.wholesale_unit_profit"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_profit"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.wholesale_unit_profit_perc")},children:["Wholesale Unit Profit %","stores.wholesale_unit_profit_perc"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.wholesale_unit_profit_perc"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.retail_unit_profit")},children:["Retail Unit Profit","stores.retail_unit_profit"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_profit"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.retail_unit_profit_perc")},children:["Retail Unit Profit %","stores.retail_unit_profit_perc"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.retail_unit_profit_perc"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.stock")},children:["Stock","stores.stock"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.stock"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("category_name")},children:["Categories","category_name"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"category_name"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_count")},children:["Sales count","stores.sales_count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales")},children:["Sales amount","stores.sales"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_quantity")},children:["Sales quantity","stores.sales_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_profit")},children:["Sales profit","stores.sales_profit"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_profit"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_loss")},children:["Sales loss","stores.sales_loss"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_loss"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_return_count")},children:["Sales return count","stores.sales_return_count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_return")},children:["Sales return amount","stores.sales_return"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_return_quantity")},children:["Sales return quantity","stores.sales_return_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_return_profit")},children:["Sales return profit","stores.sales_return_profit"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_profit"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.sales_return_loss")},children:["Sales return loss","stores.sales_return_loss"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.sales_return_loss"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_count")},children:["Purchase count","stores.purchase__count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase__count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase")},children:["Purchase amount","stores.purchase"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_quantity")},children:["Purchase quantity","stores.purchase_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_return_count")},children:["Purchase return count","stores.purchase_return_count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_return")},children:["Purchase return amount","stores.purchase_return"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.purchase_return_quantity")},children:["Purchase return quantity","stores.purchase_return_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.purchase_return_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.quotation_count")},children:["Quotation count","stores.quotation_count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.quotation")},children:["Quotation amount","stores.quotation"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.quotation_quantity")},children:["Quotation quantity","stores.quotation_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.quotation_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.delivery_note_count")},children:["Delivery note count","stores.delivery_note_count"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.delivery_note_count"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("stores.delivery_note_quantity")},children:["Delivery note quantity","stores.delivery_note_quantity"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"stores.delivery_note_quantity"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by_name")},children:["Created By","created_by_name"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===Be&&"-"===We?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Be&&""===We?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"part_number",onChange:function(e){return Ye("part_number",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ye("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"ean_12",onChange:function(e){13===e.target.value.length&&(e.target.value=e.target.value.slice(0,-1)),Ye("ean_12",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"rack",onChange:function(e){return Ye("rack",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"purchase_unit_price",onChange:function(e){return Ye("purchase_unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"wholesale_unit_price",onChange:function(e){return Ye("wholesale_unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"retail_unit_price",onChange:function(e){return Ye("retail_unit_price",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"wholesale_unit_profit",onChange:function(e){return Ye("wholesale_unit_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"wholesale_unit_profit_perc",onChange:function(e){return Ye("wholesale_unit_profit_perc",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"retail_unit_profit",onChange:function(e){return Ye("retail_unit_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"retail_unit_profit_perc",onChange:function(e){return Ye("retail_unit_profit_perc",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"stock",onChange:function(e){return Ye("stock",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"category_id",labelKey:"name",onChange:function(e){tt("category_id",e)},options:ke,placeholder:"Select Categories",selected:Me,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Ke.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_return_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_return",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_return_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_return_profit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("sales_return_loss",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase_return_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase_return",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("purchase_return_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("quotation_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("quotation",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("quotation_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("delivery_note_count",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Ye("delivery_note_quantity",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){tt("created_by",e)},options:fe,placeholder:"Select Users",selected:ye,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Xe.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:X,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Y(""),void $e("created_at","");$e("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Q(!W)},children:W?"Less..":"More.."}),Object(T.jsx)("br",{}),W?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:ee,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void $e("created_at_from","");$e("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ce,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ae(""),void $e("created_at_to","");$e("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),"\xa0  \xa0",Object(T.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(T.jsxs)("ul",{className:"dropdown-menu",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Dt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Pt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Mt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales Return History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Lt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase Return History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Et(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Quotation History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Ut(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Delivert Note History"]})})]})]}),Object(T.jsx)("td",{children:e.part_number}),Object(T.jsx)("td",{children:e.name+(e.name_in_arabic?" / "+e.name_in_arabic:"")}),Object(T.jsx)("td",{children:e.ean_12}),Object(T.jsx)("td",{children:e.rack}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.product_stores[a].purchase_unit_price)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.product_stores[a].purchase_unit_price)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.product_stores[a].wholesale_unit_price)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.product_stores[a].wholesale_unit_price)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:null===(n=e.product_stores[a].retail_unit_price)||void 0===n?void 0:n.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(c=e.product_stores[a].retail_unit_price)||void 0===c?void 0:c.toFixed(2)})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c,r;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?e.product_stores[a].wholesale_unit_profit<=0?Object(T.jsx)(Ia.a,{placement:"right",overlay:Object(T.jsx)(Ea.a,{id:"tooltip-right",children:"Wholesale unit profit should be greater than zero."}),children:Object(T.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(T.jsxs)("b",{children:[" ",null===(n=e.product_stores[a].wholesale_unit_profit)||void 0===n?void 0:n.toFixed(2)]})})},"right"):Object(T.jsx)("b",{children:null===(c=e.product_stores[a].wholesale_unit_profit)||void 0===c?void 0:c.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:null===(r=e.product_stores[a].wholesale_unit_profit)||void 0===r?void 0:r.toFixed(2)})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c,r;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?e.product_stores[a].wholesale_unit_profit_perc<=0?Object(T.jsx)(Ia.a,{placement:"right",overlay:Object(T.jsx)(Ea.a,{id:"tooltip-right",children:"Wholesale unit profit % should be greater than zero."}),children:Object(T.jsx)("span",{className:"badge bg-danger",children:Object(T.jsxs)("b",{children:[" ",(null===(n=e.product_stores[a].wholesale_unit_profit_perc)||void 0===n?void 0:n.toFixed(2))+"%"]})})},"right"):Object(T.jsx)("b",{children:(null===(c=e.product_stores[a].wholesale_unit_profit_perc)||void 0===c?void 0:c.toFixed(2))+"%"}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:(null===(r=e.product_stores[a].wholesale_unit_profit_perc)||void 0===r?void 0:r.toFixed(2))+"%"})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?e.product_stores[a].retail_unit_profit<=0?Object(T.jsx)(Ia.a,{placement:"right",overlay:Object(T.jsx)(Ea.a,{id:"tooltip-right",children:"Reatail unit profit should be greater than zero."}),children:Object(T.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(T.jsxs)("b",{children:[" ",null===(n=e.product_stores[a].retail_unit_profit)||void 0===n?void 0:n.toFixed(2)]})})},"right"):Object(T.jsx)("b",{children:null===(c=e.product_stores[a].retail_unit_profit)||void 0===c?void 0:c.toFixed(2)}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].retail_unit_profit.toFixed(2)})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){var n,c,r;return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?e.product_stores[a].retail_unit_profit_perc<=0?Object(T.jsx)(Ia.a,{placement:"right",overlay:Object(T.jsx)(Ea.a,{id:"tooltip-right",children:"Retail unit profit % should be greater than zero."}),children:Object(T.jsx)("span",{className:"badge bg-danger","data-bs-toggle":"tooltip",title:"Disabled tooltip",children:Object(T.jsxs)("b",{children:[" ",(null===(n=e.product_stores[a].retail_unit_profit_perc)||void 0===n?void 0:n.toFixed(2))+"%"]})})},"right"):Object(T.jsx)("b",{children:(null===(c=e.product_stores[a].retail_unit_profit_perc)||void 0===c?void 0:c.toFixed(2))+"%"}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:(null===(r=e.product_stores[a].retail_unit_profit_perc)||void 0===r?void 0:r.toFixed(2))+"%"})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].stock}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].stock})," ","@"+e.product_stores[a].store_name]})}))}),Object(T.jsx)("td",{children:Object(T.jsx)("ul",{children:e.category_name&&e.category_name.map((function(e){return Object(T.jsx)("li",{children:e},e)}))})}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_quantity})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_profit}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_profit})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_loss}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_loss})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_return_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_return_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_return}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_return})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_return_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_return_quantity})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_return_profit}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_return_profit})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].sales_return_loss}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].sales_return_loss})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase_quantity})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase_return_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase_return_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase_return}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase_return})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].purchase_return_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].purchase_return_quantity})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].quotation_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].quotation_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].quotation}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].quotation})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].quotation_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].quotation_quantity})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].delivery_note_count}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].delivery_note_count})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.product_stores&&Object.keys(e.product_stores).map((function(a,s){return t.get("store_id")&&e.product_stores[a].store_id==t.get("store_id")?Object(T.jsx)("b",{children:e.product_stores[a].delivery_note_quantity}):t.get("store_id")?void 0:Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.product_stores[a].delivery_note_quantiy})," ","@"+e.product_stores[a].sales_name]})}))}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})}),"\xa0  \xa0",Object(T.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(T.jsxs)("ul",{className:"dropdown-menu",children:[Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Dt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Pt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Mt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Sales Return History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Lt(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Purchase Return History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Et(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Quotation History"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"dropdown-item",onClick:function(){Ut(e)},children:[Object(T.jsx)("i",{className:"bi bi-clock-history"}),"\xa0 Delivert Note History"]})})]})]})]},e.id)}))})]})}),D?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){gt(e.selected+1)},pageRangeDisplayed:5,pageCount:D,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:C-1}):""]})})})})]})]})};var Ua=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1];Object(s.useEffect)((function(){Ie()}),[]);var ge=Object(s.useState)({}),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)("created_at"),we=Object(o.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(s.useState)("-"),De=Object(o.a)(Te,2),Fe=De[0],Me=De[1];function Re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Re({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,xe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){ye[e]=t,C(N=1),Ie()}function Le(e,t){if(!t)return N=1,ye[e]="",C(N),void Ie();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),C(N=1),Ie()}function Ie(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Re(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/product-category?select=id,name,parent_name,parent_id,created_by_name,created_at"+s+"&sort="+Fe+Se+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function Ee(e){ke(Se=e),Me(Fe="-"===Fe?"":"-"),Ie()}function ze(e){N=parseInt(e),C(N),Ie()}function Ue(e){Ve.current.open(e)}var Be=Object(s.useRef)();function qe(e){Be.current.open(e)}var Ve=Object(s.useRef)();function He(){Ve.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(nt,{ref:Ve,refreshList:Ie,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(T.jsx)(at,{ref:Be,openUpdateForm:Ue,openCreateForm:He}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Product Categories"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:He,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Product Categories to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bproductcategory:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bproductcategory:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ue(!0),Ie()},variant:"primary",disabled:je,children:[je?Object(T.jsx)(g.a,{as:"span",animation:"bproductcategory",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),Ie()},className:"form-control pull-right",style:{bproductcategory:"solid 1px",bproductcategoryColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bproductcategory:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("name")},children:["Name","name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("parent_name")},children:["Parent","parent_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"parent_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_by_name")},children:["Created By","created_by_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_at")},children:["Created At","created_at"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ae("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"parent_name",onChange:function(e){return Ae("parent_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),Ie()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:K,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Le("created_at","");Le("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Le("created_at_from","");Le("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Le("created_to","");Le("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.parent_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})},Ba=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get ExpenseCategory");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}};fetch("/v1/expense-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"lg",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Expense Category #",c.name," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}),"\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name:"}),Object(T.jsxs)("td",{children:[" ",c.name]}),Object(T.jsx)("th",{children:"Parent Category Name:"}),Object(T.jsxs)("td",{children:[" ",c.parent_name]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})})})]})})})),qa=Ba,Va=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){E(I={}),D(k=[]),e&&function(e){console.log("inside get Expense Category");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:m.get("access_token")}};I={},E(Object(C.a)({},I)),k=[],D(Object(i.a)(k)),fetch("/v1/expense-category/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:r({}),console.log("Response:"),console.log(n),I=n.result,console.log("formData:",I),I.parent_id&&(k=[{id:I.parent_id,name:I.parent_name}],D(Object(i.a)(k))),E(Object(C.a)({},I)),console.log("formData:",I);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(!1),r(e)}))}(e),q(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-expense category.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("barcode")?t.elements[a].focus():t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],x=d[1],m=new h.a,O=Object(s.useState)([]),v=Object(o.a)(O,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(!1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)({}),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1];function V(){q(!1)}function H(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function G(t){t.preventDefault(),console.log("Inside handle Create"),console.log("formData.logo:",I.logo),P(!0);var a="/v1/expense-category",s="POST";I.id&&(a="/v1/expense-category/"+I.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:m.get("access_token")},body:JSON.stringify(I)};console.log("formData:",I),x(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return i=c&&c.errors,t.abrupt("return",Promise.reject(i));case 10:r({}),x(!1),P(!1),console.log("Response:"),console.log(c),e.showToastMessage("Expense Category Created Successfully!","success"),e.refreshList&&e.refreshList(),V(),e.openDetailsView(c.result.id);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){x(!1),P(!1),console.log("Inside catch"),console.log(t),r(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating ExpenseCategory!","danger")}))}function W(){return(W=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),N([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=H({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:m.get("access_token")}},"select=id,name",P(!0),e.next=13,fetch("/v1/expense-category?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,N(c.result),P(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){m.get("access_token")||(window.location="/")})),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:B,size:"lg",onHide:V,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:I.id?"Update Expense Category #"+I.name:"Create New Expense Category"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[I.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){V(),e.openDetailsView(I.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:G,children:[j?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",I.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:V,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:G,children:[Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Name*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:I.name?I.name:"",type:"string",onChange:function(e){c.name="",r(Object(C.a)({},c)),I.name=e.target.value,E(Object(C.a)({},I)),console.log(I)},className:"form-control",id:"name",placeholder:"Name"}),c.name&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.name]}),I.name&&!c.name&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Parent(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"parent_id",labelKey:"name",isLoading:R,isInvalid:!!c.parent_id,onChange:function(e){if(c.parent__id="",r({errors:c}),0===e.length)return c.parent_id="Invalid Parent Category Selected",r(c),I.parent_id="",I.parent_name="",E(Object(C.a)({},I)),void D([]);I.parent_id=e[0].id,E(Object(C.a)({},I)),D(Object(i.a)(e))},options:y,placeholder:"Select Parent Category",selected:k,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){W.apply(this,arguments)}(e)}}),c.parent_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),c.parent_id]}),I.parent_id&&!c.parent_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:V,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:G,children:j?Object(T.jsx)(g.a,{as:"span",animation:"bexpensecategory",size:"sm",role:"status","aria-hidden":!0})+" Processing...":I.id?"Update":"Create"})]})]})})]})})})),Ha=Va;var Ga=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1];Object(s.useEffect)((function(){Ie()}),[]);var ge=Object(s.useState)({}),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)("created_at"),we=Object(o.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(s.useState)("-"),De=Object(o.a)(Te,2),Fe=De[0],Me=De[1];function Re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Re({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,xe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){ye[e]=t,C(N=1),Ie()}function Le(e,t){if(!t)return N=1,ye[e]="",C(N),void Ie();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),C(N=1),Ie()}function Ie(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Re(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/expense-category?select=id,name,parent_name,parent_id,created_by_name,created_at"+s+"&sort="+Fe+Se+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function Ee(e){ke(Se=e),Me(Fe="-"===Fe?"":"-"),Ie()}function ze(e){N=parseInt(e),C(N),Ie()}function Ue(e){Ve.current.open(e)}var Be=Object(s.useRef)();function qe(e){Be.current.open(e)}var Ve=Object(s.useRef)();function He(){Ve.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ha,{ref:Ve,refreshList:Ie,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(T.jsx)(qa,{ref:Be,openUpdateForm:Ue,openCreateForm:He}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Expense Categories"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:He,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Expense Categories to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bexpensecategory:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bexpensecategory:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ue(!0),Ie()},variant:"primary",disabled:je,children:[je?Object(T.jsx)(g.a,{as:"span",animation:"bexpensecategory",size:"sm",role:"status","aria-hidden":"true"}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),Ie()},className:"form-control pull-right",style:{bexpensecategory:"solid 1px",bexpensecategoryColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bexpensecategory:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("name")},children:["Name","name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("parent_name")},children:["Parent","parent_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"parent_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_by_name")},children:["Created By","created_by_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_at")},children:["Created At","created_at"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ae("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"parent_name",onChange:function(e){return Ae("parent_name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),Ie()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:K,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Le("created_at","");Le("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Le("created_at_from","");Le("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Le("created_to","");Le("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.parent_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})},Wa=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Expense");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/expense/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Expense #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Payment method"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Categories:"}),Object(T.jsx)("td",{children:Object(T.jsx)("ul",{children:c.category_name&&c.category_name.map((function(e){return Object(T.jsx)("li",{children:e},e)}))})})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"Expense",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Qa=Wa,Za=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){P(R=[]),$({formData:J={images_content:[]}}),e&&function(e){console.log("inside get Expense");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}};fetch("/v1/expense/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(q({}),console.log("Response:"),console.log(n),i=n.result.category_id,o=n.result.category_name,R=[],i&&o)for(l=0;l<i.length;l++)R.push({id:i[l],name:o[l]});P(R),J=n.result,d=[{id:J.store_id,name:J.store_name}],r([].concat(d)),J.images_content=[],$(Object(C.a)({},J));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Z(!1),q(e)}))}(e),se(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-expense.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)([]),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)({}),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),G=Object(o.a)(V,2),Q=G[0],Z=G[1],K=new h.a,X=Object(s.useState)({images_content:[]}),Y=Object(o.a)(X,2),J=Y[0],$=Y[1],ee=Object(s.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],se=te[1];function ne(){se(!1)}function ce(){return(ce=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ie({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/expense-category?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,E(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ie({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:K.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function oe(t){t.preventDefault(),console.log("Inside handle Create"),J.category_id=[];for(var a=0;a<R.length;a++)J.category_id.push(R[a].id);console.log("category_id:",J.category_id),K.get("store_id")&&(J.store_id=K.get("store_id"));var s="/v1/expense",n="POST";J.id&&(s="/v1/expense/"+J.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:K.get("access_token")},body:JSON.stringify(J)};console.log("formData:",J),Z(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:q({}),Z(!1),console.log("Response:"),console.log(c),e.showToastMessage("Expense Created Successfully!","success"),e.refreshList&&e.refreshList(),ne(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){Z(!1),console.log("Inside catch"),console.log(t),q(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Expense!","danger")}))}Object(s.useEffect)((function(){K.get("access_token")||(window.location="/")}));var le=Object(s.useRef)();var de=Object(s.useRef)();function je(){de.current.open()}var ue=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:le,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ha,{ref:de,openDetailsView:function(e){ue.current.open(e)},showToastMessage:e.showToastMessage}),Object(T.jsx)(qa,{ref:ue,openUpdateForm:function(e){de.current.open(e)},openCreateForm:je}),Object(T.jsxs)(f.a,{show:ae,size:"xl",onHide:ne,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:J.id?"Update Expense #"+J.description:"Create New Expense"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[J.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){ne(),e.openDetailsView(J.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:oe,children:[Q?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",J.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ne,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:oe,children:[K.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!B.store_id,onChange:function(e){if(B.store_id="",B.product_id="",q(B),0===e.length)return B.store_id="Invalid Store selected",q(B),$(Object(C.a)({},J)),void r([]);J.store_id=e[0].id,$(Object(C.a)({},J)),console.log("formData.store_id:",J.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){re.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){le.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),B.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:J.amount?J.amount:"",type:"number",onChange:function(e){B.amount="",q(Object(C.a)({},B)),J.amount=parseFloat(e.target.value),$(Object(C.a)({},J)),console.log(J)},className:"form-control",id:"amount",placeholder:"Amount"}),B.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.amount]}),J.amount&&!B.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:J.description?J.description:"",type:"string",onChange:function(e){B.description="",q(Object(C.a)({},B)),J.description=e.target.value,$(Object(C.a)({},J)),console.log(J)},className:"form-control description",id:"description",placeholder:"Description"}),B.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.description]}),J.description&&!B.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Categories*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"category_id",labelKey:"name",isInvalid:!!B.category_id,onChange:function(e){if(B.category_id="",q(B),0===e.length)return B.category_id="Invalid Category selected",q(B),$(Object(C.a)({},J)),void P([]);$(Object(C.a)({},J)),P(e)},options:I,placeholder:"Select Categories",selected:R,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ce.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:je,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),B.category_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.category_id]}),J.category_id&&!B.category_id&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:J.date_str?new Date(J.date_str):null,value:J.date_str?Object(x.default)(new Date(J.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),J.date_str=e,$(Object(C.a)({},J))}}),B.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:J.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return J.payment_method="",B.status="Invalid Payment Method",void q(Object(C.a)({},B));B.payment_method="",q(Object(C.a)({},B)),J.payment_method=e.target.value,$(Object(C.a)({},J)),console.log(J)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),B.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(B.image="",q(Object(C.a)({},B)),!e.target.value)return B.image="Invalid Image File",void q(Object(C.a)({},B));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){J.images_content=[],J.images_content[0]=e,$(Object(C.a)({},J)),console.log("formData.images_content[0]:",J.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),B.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),B.image]}),J.image&&!B.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:ne,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:oe,children:Q?Object(T.jsx)(g.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0})+" Processing...":J.id?"Update":"Create"})]})]})})]})]})})),Ka=Za;var Xa=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(new Date),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(new Date),f=Object(o.a)(m,2),v=f[0],C=f[1],w=Object(s.useState)(new Date),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(new Date),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(new Date),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(new Date),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(""),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],ae=Object(s.useState)([]),se=Object(o.a)(ae,2),ne=se[0],ce=se[1],re=Object(s.useState)(5),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)(1),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(0),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1],Oe=Object(s.useState)(1),fe=Object(o.a)(Oe,2),_e=fe[0],ge=fe[1],ve=Object(s.useState)(0),ye=Object(o.a)(ve,2),Ne=ye[0],Ce=ye[1],we=Object(s.useState)(0),Se=Object(o.a)(we,2),ke=Se[0],Te=Se[1],De=Object(s.useState)(!1),Fe=Object(o.a)(De,2),Me=Fe[0],Re=Fe[1],Pe=Object(s.useState)(""),Ae=Object(o.a)(Pe,2),Le=Ae[0],Ie=Ae[1],Ee=Object(s.useState)(""),ze=Object(o.a)(Ee,2),Ue=ze[0],Be=ze[1],qe=Object(s.useState)(""),Ve=Object(o.a)(qe,2),He=Ve[0],Ge=Ve[1],We=Object(s.useState)(!1),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1],Xe=Object(s.useState)(!1),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=Ye[1],et=Object(s.useState)([]),tt=Object(o.a)(et,2),at=tt[0],st=tt[1],nt=Object(s.useState)([]),ct=Object(o.a)(nt,2),rt=ct[0],it=ct[1],ot=Object(s.useState)([]),lt=Object(o.a)(ot,2),dt=lt[0],jt=lt[1],ut=Object(s.useState)([]),bt=Object(o.a)(ut,2),ht=bt[0],pt=bt[1];Object(s.useEffect)((function(){Et()}),[]);var xt=Object(s.useState)({}),mt=Object(o.a)(xt,2),Ot=mt[0],ft=mt[1],_t=Object(s.useState)("created_at"),gt=Object(o.a)(_t,2),vt=gt[0],yt=gt[1],Nt=Object(s.useState)("-"),Ct=Object(o.a)(Nt,2),wt=Ct[0],St=Ct[1];function kt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function Tt(){return(Tt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Categories"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=kt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/expense-category?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,jt(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(){return(Dt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=kt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,st(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e,t){Ot[e]=t,be(ue=1),Et()}function Mt(e,t){if(!t)return ue=1,Ot[e]="",be(ue),void Et();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(W(t),X(""),ee(""),Ot.from_date="",Ot.to_date="",Ot[e]=t):"from_date"===e?(X(t),W(""),Ot.date="",Ot[e]=t):"to_date"===e?(ee(t),W(""),Ot.date="",Ot[e]=t):"created_at"===e&&(Ie(t),Be(""),Ge(""),Ot.created_at_from="",Ot.created_at_to="",Ot[e]=t),"created_at_from"===e?(Be(t),Ie(""),Ot.created_at="",Ot[e]=t):"created_at_to"===e&&(Ge(t),Ie(""),Ot.created_at="",Ot[e]=t),be(ue=1),Et()}function Rt(e,t){"created_by"===e?it(t):"category_id"===e&&pt(t),Ot[e]=Object.values(t).map((function(e){return e.id})).join(","),be(ue=1),Et()}var Pt=Object(s.useState)(0),At=Object(o.a)(Pt,2),Lt=At[0],It=At[1];function Et(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ot.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ot.timezone_offset=parseFloat(a/60),Ot.stats="1",ft(Ot);var s=kt(Ot);""!==s&&(s="&"+s),Ke(!0),fetch("/v1/expense?select=id,code,date,amount,description,category_name,created_by_name,created_at"+s+"&sort="+wt+vt+"&page="+ue+"&limit="+oe,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Ke(!1),$e(!1),ce(n.result),r=parseInt((n.total_count+oe-1)/oe),me(r),ge(n.total_count),Te((ue-1)*oe),Ce(n.result.length),Lt=n.meta.total,It(Lt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Ke(!1),$e(!1),console.log(e)}))}function zt(e){yt(vt=e),St(wt="-"===wt?"":"-"),Et()}function Ut(e){ue=parseInt(e),be(ue),Et()}var Bt=Object(s.useRef)();function qt(e){Bt.current.open(e)}var Vt=Object(s.useRef)();function Ht(e){Vt.current.open(e)}function Gt(){Bt.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ka,{ref:Bt,refreshList:Et,openDetailsView:Ht,showToastMessage:e.showToastMessage}),Object(T.jsx)(Qa,{ref:Vt,openUpdateForm:qt,openCreateForm:Gt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:Lt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Expenses"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Gt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===_e&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Expense to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bexpense:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){$e(!0),Et()},variant:"primary",disabled:Je,children:[Je?Object(T.jsx)(g.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ze&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:_e>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:oe,onChange:function(e){var t;t=e.target.value,oe=parseInt(t),le(oe),Et()},className:"form-control pull-right",style:{bexpense:"solid 1px",bexpenseColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bexpense:"solid 0px"},children:xe?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ut(e.selected+1)},pageRangeDisplayed:5,pageCount:xe,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ue-1}):""})}),Object(T.jsx)("div",{className:"row",children:_e>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ke+1,"-",ke+Ne," of"," ",_e]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",ue," of ",xe]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("code")},children:["ID","code"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("date")},children:["Date","date"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("amount")},children:["Amount","amount"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("description")},children:["Description","description"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("category_name")},children:["Categories","category_name"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"category_name"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("created_by_name")},children:["Created By","created_by_name"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){zt("created_at")},children:["Created At","created_at"===vt&&"-"===wt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===vt&&""===wt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return Ft("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:G,selected:d,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return W(""),void Mt("date_str","");Mt("date_str",e),d=e,j(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:K,selected:v,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return X(""),void Mt("from_date","");Mt("from_date",e),v=e,C(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:$,selected:k,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return ee(""),void Mt("to_date","");Mt("to_date",e),k=e,D(e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return Ft("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return Ft("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"category_id",labelKey:"name",onChange:function(e){Rt("category_id",e)},options:dt,placeholder:"Select Categories",selected:ht,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Tt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){Rt("created_by",e)},options:at,placeholder:"Select Users",selected:rt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Dt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:Le,selected:R,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Ie(""),void Mt("created_at","");Mt("created_at",e),R=e,P(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Re(!Me)},children:Me?"Less..":"More.."}),Object(T.jsx)("br",{}),Me?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:Ue,selected:I,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Be(""),void Mt("created_at_from","");Mt("created_at_from",e),I=e,E(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:He,selected:B,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return Be(""),void Mt("created_at_to","");Mt("created_at_to",e),B=e,q(e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:ne&&ne.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:Object(T.jsx)("ul",{children:e.category_name&&e.category_name.map((function(e){return Object(T.jsx)("li",{children:e},e)}))})}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){qt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ht(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),xe?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ut(e.selected+1)},pageRangeDisplayed:5,pageCount:xe,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:ue-1}):""]})})})})]})]})},Ya=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CustomerDeposit");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/customer-deposit/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of CustomerDeposit #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Customer"}),Object(T.jsxs)("td",{children:[" ",c.customer_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"CustomerDeposit",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Ja=Ya,$a=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){J({formData:Y={images_content:[]}}),e&&function(e){console.log("inside get CustomerDeposit");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}};fetch("/v1/customer-deposit/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:z({}),console.log("Response:"),console.log(n),Y=n.result,i=[{id:Y.customer_id,name:Y.customer_name,search_label:Y.customer_name}],he([].concat(i)),o=[{id:Y.store_id,name:Y.store_name}],r([].concat(o)),Y.images_content=[],J(Object(C.a)({},Y));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(!1),z(e)}))}(e),ae(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customerdeposit.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=M[0],P=(M[1],Object(s.useState)([])),A=Object(o.a)(P,2),L=(A[0],A[1],Object(s.useState)({})),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),q=B[0],V=B[1],G=new h.a,Q=Object(s.useState)({images_content:[]}),K=Object(o.a)(Q,2),Y=K[0],J=K[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){ae(!1)}function ne(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=re({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){G.get("access_token")||(window.location="/")}));var ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)([]),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(!1),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1];function fe(){return(fe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),de([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=re({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",Oe(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,de(c.result),Oe(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(t){t.preventDefault(),console.log("Inside handle Create"),Y.category_id=[];for(var a=0;a<R.length;a++)Y.category_id.push(R[a].id);console.log("category_id:",Y.category_id),G.get("store_id")&&(Y.store_id=G.get("store_id"));var s="/v1/customer-deposit",n="POST";Y.id&&(s="/v1/customer-deposit/"+Y.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:G.get("access_token")},body:JSON.stringify(Y)};console.log("formData:",Y),V(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:z({}),V(!1),console.log("Response:"),console.log(c),e.showToastMessage("CustomerDeposit Created Successfully!","success"),e.refreshList&&e.refreshList(),se(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){V(!1),console.log("Inside catch"),console.log(t),z(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CustomerDeposit!","danger")}))}var ge=Object(s.useRef)();function ve(){ge.current.open()}Object(s.useRef)();var ye=Object(s.useRef)();var Ne=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:ge,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:ye,openDetailsView:function(e){Ne.current.open(e)},showToastMessage:e.showToastMessage}),Object(T.jsx)(Z,{ref:Ne,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:te,size:"xl",onHide:se,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:Y.id?"Update Customer Deposit #"+Y.description:"Create New Customer Deposit"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Y.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){se(),e.openDetailsView(Y.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:_e,children:[q?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Y.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:_e,children:[G.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!E.store_id,onChange:function(e){if(E.store_id="",E.product_id="",z(E),0===e.length)return E.store_id="Invalid Store selected",z(E),J(Object(C.a)({},Y)),void r([]);Y.store_id=e[0].id,J(Object(C.a)({},Y)),console.log("formData.store_id:",Y.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){ne(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:ve,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),E.store_id]})]})]}),G.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!E.store_id,onChange:function(e){if(E.store_id="",E.product_id="",z(E),0===e.length)return E.store_id="Invalid Store selected",z(E),J(Object(C.a)({},Y)),void r([]);Y.store_id=e[0].id,J(Object(C.a)({},Y)),console.log("formData.store_id:",Y.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){ne(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:ve,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),E.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",isLoading:me,isInvalid:!!E.customer_id,onChange:function(e){if(E.customer_id="",z(E),0===e.length)return E.customer_id="Invalid Customer selected",z(E),Y.customer_id="",J(Object(C.a)({},Y)),void he([]);Y.customer_id=e[0].id,J(Object(C.a)({},Y)),he(e)},options:le,placeholder:"Select Customer",selected:be,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){fe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){ye.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),E.customer_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.customer_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:Y.amount?Y.amount:"",type:"number",onChange:function(e){E.amount="",z(Object(C.a)({},E)),Y.amount=parseFloat(e.target.value),J(Object(C.a)({},Y)),console.log(Y)},className:"form-control",id:"amount",placeholder:"Amount"}),E.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.amount]}),Y.amount&&!E.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:Y.description?Y.description:"",type:"string",onChange:function(e){E.description="",z(Object(C.a)({},E)),Y.description=e.target.value,J(Object(C.a)({},Y)),console.log(Y)},className:"form-control description",id:"description",placeholder:"Description"}),E.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.description]}),Y.description&&!E.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:Y.date_str?new Date(Y.date_str):null,value:Y.date_str?Object(x.default)(new Date(Y.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Y.date_str=e,J(Object(C.a)({},Y))}}),E.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:Y.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Y.payment_method="",E.status="Invalid Payment Method",void z(Object(C.a)({},E));E.payment_method="",z(Object(C.a)({},E)),Y.payment_method=e.target.value,J(Object(C.a)({},Y)),console.log(Y)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),E.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(E.image="",z(Object(C.a)({},E)),!e.target.value)return E.image="Invalid Image File",void z(Object(C.a)({},E));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Y.images_content=[],Y.images_content[0]=e,J(Object(C.a)({},Y)),console.log("formData.images_content[0]:",Y.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),E.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.image]}),Y.image&&!E.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:se,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:_e,children:q?Object(T.jsx)(g.a,{as:"span",animation:"bcustomerdeposit",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Y.id?"Update":"Create"})]})]})})]})]})})),es=$a;var ts=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(""),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(""),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(5),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(0),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)([]),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)([]),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)([]),Ze=Object(o.a)(Qe,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){vt()}),[]);var Ye=Object(s.useState)({}),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function lt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function dt(){return(dt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=lt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){$e[e]=t,V(q=1),vt()}function ut(e,t){if(!t)return q=1,$e[e]="",V(q),void vt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(m(t),w(""),F(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(w(t),m(""),$e.date="",$e[e]=t):"to_date"===e?(F(t),m(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(ve(t),he(""),$e.created_at="",$e[e]=t),V(q=1),vt()}function bt(e,t){"created_by"===e?Ee(t):"customer_id"===e&&We(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),V(q=1),vt()}function ht(){return(ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=lt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=Object(s.useState)(0),xt=Object(o.a)(pt,2),mt=xt[0],Ot=xt[1],ft=Object(s.useState)("-"),_t=Object(o.a)(ft,2),gt=_t[0];function vt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=lt($e);""!==s&&(s="&"+s),we(!0),fetch("/v1/customer-deposit?select=id,code,date,amount,payment_method,description,customer_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+q+"&limit="+E,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:we(!1),De(!1),A(n.result),r=parseInt((n.total_count+E-1)/E),Q(r),Y(n.total_count),re((q-1)*E),ae(n.result.length),mt=n.meta.total,Ot(mt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function yt(e){nt(st=e),ot(it="-"===it?"":"-"),vt()}function Nt(e){q=parseInt(e),V(q),vt()}_t[1];var Ct=Object(s.useRef)();function wt(e){Ct.current.open(e)}var St=Object(s.useRef)();function kt(e){St.current.open(e)}function Tt(){Ct.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(es,{ref:Ct,refreshList:vt,openDetailsView:kt,showToastMessage:e.showToastMessage}),Object(T.jsx)(Ja,{ref:St,openUpdateForm:wt,openCreateForm:Tt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:mt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Customer Deposits"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Tt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===X&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No CustomerDeposit to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bcustomerdeposit:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),vt()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bcustomerdeposit",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:E,onChange:function(e){var t;t=e.target.value,E=parseInt(t),z(E),vt()},className:"form-control pull-right",style:{bcustomerdeposit:"solid 1px",bcustomerdepositColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bcustomerdeposit:"solid 0px"},children:W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Nt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""})}),Object(T.jsx)("div",{className:"row",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+ee," of"," ",X]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",q," of ",W]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("code")},children:["ID","code"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("date")},children:["Date","date"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("amount")},children:["Amount","amount"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("payment_method")},children:["Payment Method","payment_method"===st&&"-"===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===st&&""===gt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("description")},children:["Description","description"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("customer_name")},children:["Customer","customer_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){yt("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return jt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return m(""),void ut("date_str","");ut("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:C,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return w(""),void ut("from_date","");ut("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:D,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return F(""),void ut("to_date","");ut("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return jt("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return jt("payment_method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return jt("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){bt("customer_id",e)},options:Be,placeholder:"Select customers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ht.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){bt("created_by",e)},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){dt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ut("created_at","");ut("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_from","");ut("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_to","");ut("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.payment_method}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){wt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){kt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Nt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""]})})})})]})]})},as=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CustomerWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/customer-withdrawal/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of CustomerWithdrawal #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"Customer"}),Object(T.jsxs)("td",{children:[" ",c.customer_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"CustomerWithdrawal",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),ss=as,ns=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){J({formData:Y={images_content:[]}}),e&&function(e){console.log("inside get CustomerWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}};fetch("/v1/customer-withdrawal/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:z({}),console.log("Response:"),console.log(n),Y=n.result,i=[{id:Y.customer_id,name:Y.customer_name,search_label:Y.customer_name}],be([].concat(i)),o=[{id:Y.store_id,name:Y.store_name}],r([].concat(o)),Y.images_content=[],J(Object(C.a)({},Y));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(!1),z(e)}))}(e),ae(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-customerwithdrawal.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=M[0],P=(M[1],Object(s.useState)([])),A=Object(o.a)(P,2),L=(A[0],A[1],Object(s.useState)({})),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(!1),B=Object(o.a)(U,2),q=B[0],V=B[1],G=new h.a,Q=Object(s.useState)({images_content:[]}),K=Object(o.a)(Q,2),Y=K[0],J=K[1],$=Object(s.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];function se(){ae(!1)}function ne(){return(ne=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ce({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){G.get("access_token")||(window.location="/")}));var re=Object(s.useState)([]),ie=Object(o.a)(re,2),oe=ie[0],le=ie[1],de=Object(s.useState)([]),je=Object(o.a)(de,2),ue=je[0],be=je[1],he=Object(s.useState)(!1),pe=Object(o.a)(he,2),xe=pe[0],me=pe[1];function Oe(){return(Oe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestCustomers"),le([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ce({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:G.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",me(!0),e.next=13,fetch("/v1/customer?select=id,name,phone,name_in_arabic,phone_in_arabic,search_label"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,le(c.result),me(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(t){t.preventDefault(),console.log("Inside handle Create"),Y.category_id=[];for(var a=0;a<R.length;a++)Y.category_id.push(R[a].id);console.log("category_id:",Y.category_id),G.get("store_id")&&(Y.store_id=G.get("store_id"));var s="/v1/customer-withdrawal",n="POST";Y.id&&(s="/v1/customer-withdrawal/"+Y.id,n="PUT");var c={method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:G.get("access_token")},body:JSON.stringify(Y)};console.log("formData:",Y),V(!0),fetch(s,c).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:z({}),V(!1),console.log("Response:"),console.log(c),e.showToastMessage("CustomerWithdrawal Created Successfully!","success"),e.refreshList&&e.refreshList(),se(),e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){V(!1),console.log("Inside catch"),console.log(t),z(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CustomerWithdrawal!","danger")}))}var _e=Object(s.useRef)();Object(s.useRef)();var ge=Object(s.useRef)();var ve=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:_e,showToastMessage:e.showToastMessage}),Object(T.jsx)(X,{ref:ge,openDetailsView:function(e){ve.current.open(e)},showToastMessage:e.showToastMessage}),Object(T.jsx)(Z,{ref:ve,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:te,size:"xl",onHide:se,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:Y.id?"Update Customer Withdrawal #"+Y.description:"Create New Customer Withdrawal"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Y.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){se(),e.openDetailsView(Y.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:fe,children:[q?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Y.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object.keys(E).length>0?Object(T.jsx)("div",{children:Object(T.jsx)("ul",{children:E&&Object.keys(E).map((function(e,t){return E[e]?Object(T.jsx)("li",{style:{color:"red"},children:E[e]}):""}))})}):"",Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:fe,children:[G.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!E.store_id,onChange:function(e){if(E.store_id="",E.product_id="",z(E),0===e.length)return E.store_id="Invalid Store selected",z(E),J(Object(C.a)({},Y)),void r([]);Y.store_id=e[0].id,J(Object(C.a)({},Y)),console.log("formData.store_id:",Y.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ne.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){_e.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),E.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Customer*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",isLoading:xe,isInvalid:!!E.customer_id,onChange:function(e){if(E.customer_id="",z(E),0===e.length)return E.customer_id="Invalid Customer selected",z(E),Y.customer_id="",J(Object(C.a)({},Y)),void be([]);Y.customer_id=e[0].id,J(Object(C.a)({},Y)),be(e)},options:oe,placeholder:"Select Customer",selected:ue,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Oe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){ge.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),E.customer_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.customer_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:Y.amount?Y.amount:"",type:"number",onChange:function(e){E.amount="",z(Object(C.a)({},E)),Y.amount=parseFloat(e.target.value),J(Object(C.a)({},Y)),console.log(Y)},className:"form-control",id:"amount",placeholder:"Amount"}),E.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.amount]}),Y.amount&&!E.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:Y.description?Y.description:"",type:"string",onChange:function(e){E.description="",z(Object(C.a)({},E)),Y.description=e.target.value,J(Object(C.a)({},Y)),console.log(Y)},className:"form-control description",id:"description",placeholder:"Description"}),E.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.description]}),Y.description&&!E.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:Y.date_str?new Date(Y.date_str):null,value:Y.date_str?Object(x.default)(new Date(Y.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Y.date_str=e,J(Object(C.a)({},Y))}}),E.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:Y.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Y.payment_method="",E.status="Invalid Payment Method",void z(Object(C.a)({},E));E.payment_method="",z(Object(C.a)({},E)),Y.payment_method=e.target.value,J(Object(C.a)({},Y)),console.log(Y)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),E.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(E.image="",z(Object(C.a)({},E)),!e.target.value)return E.image="Invalid Image File",void z(Object(C.a)({},E));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Y.images_content=[],Y.images_content[0]=e,J(Object(C.a)({},Y)),console.log("formData.images_content[0]:",Y.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),E.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),E.image]}),Y.image&&!E.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:se,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:fe,children:q?Object(T.jsx)(g.a,{as:"span",animation:"bcustomerwithdrawal",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Y.id?"Update":"Create"})]})]})]})]})]})})),cs=ns;var rs=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(""),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(""),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(5),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(0),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)([]),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)([]),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)([]),Ze=Object(o.a)(Qe,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){ft()}),[]);var Ye=Object(s.useState)({}),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function lt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function dt(){return(dt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=lt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){$e[e]=t,V(q=1),ft()}function ut(e,t){if(!t)return q=1,$e[e]="",V(q),void ft();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(m(t),w(""),F(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(w(t),m(""),$e.date="",$e[e]=t):"to_date"===e?(F(t),m(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(ve(t),he(""),$e.created_at="",$e[e]=t),V(q=1),ft()}function bt(e,t){"created_by"===e?Ee(t):"customer_id"===e&&We(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),V(q=1),ft()}function ht(){return(ht=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestCustomers"),""!==(s=lt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label",e.next=8,fetch("/v1/customer?".concat("select=id,name,phone,name_in_arabic,phone_in_arabic,search_label").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=Object(s.useState)(0),xt=Object(o.a)(pt,2),mt=xt[0],Ot=xt[1];function ft(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=lt($e);""!==s&&(s="&"+s),we(!0),fetch("/v1/customer-withdrawal?select=id,code,date,amount,payment_method,description,customer_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+q+"&limit="+E,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:we(!1),De(!1),A(n.result),r=parseInt((n.total_count+E-1)/E),Q(r),Y(n.total_count),re((q-1)*E),ae(n.result.length),mt=n.meta.total,Ot(mt);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function _t(e){nt(st=e),ot(it="-"===it?"":"-"),ft()}function gt(e){q=parseInt(e),V(q),ft()}var vt=Object(s.useRef)();function yt(e){vt.current.open(e)}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}function wt(){vt.current.open()}var St=Object(s.useState)("-"),kt=Object(o.a)(St,2),Tt=kt[0];return kt[1],Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(cs,{ref:vt,refreshList:ft,openDetailsView:Ct,showToastMessage:e.showToastMessage}),Object(T.jsx)(ss,{ref:Nt,openUpdateForm:yt,openCreateForm:wt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:mt,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Customer Withdrawals"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:wt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===X&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No CustomerWithdrawal to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bcustomerwithdrawal:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),ft()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bcustomerwithdrawal",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:E,onChange:function(e){var t;t=e.target.value,E=parseInt(t),z(E),ft()},className:"form-control pull-right",style:{bcustomerwithdrawal:"solid 1px",bcustomerwithdrawalColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bcustomerwithdrawal:"solid 0px"},children:W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){gt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""})}),Object(T.jsx)("div",{className:"row",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+ee," of"," ",X]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",q," of ",W]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("code")},children:["ID","code"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("date")},children:["Date","date"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("amount")},children:["Amount","amount"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("payment_method")},children:["Payment Method","payment_method"===st&&"-"===Tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===st&&""===Tt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("description")},children:["Description","description"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("customer_name")},children:["Customer","customer_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"customer_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_t("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return jt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return m(""),void ut("date_str","");ut("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:C,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return w(""),void ut("from_date","");ut("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:D,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return F(""),void ut("to_date","");ut("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return jt("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return jt("payment_method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return jt("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"customer_id",labelKey:"search_label",onChange:function(e){bt("customer_id",e)},options:Be,placeholder:"Select customers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ht.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){bt("created_by",e)},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){dt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ut("created_at","");ut("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_from","");ut("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ut("created_at_to","");ut("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.payment_method}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.customer_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){yt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){gt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""]})})})})]})]})},is=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Capital");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/capital/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Capital #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"InvestedByUser"}),Object(T.jsxs)("td",{children:[" ",c.invested_by_user_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"Capital",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),os=is,ls=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get Capital");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}};fetch("/v1/capital/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:E({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.invested_by_user_id,name:Z.invested_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(C.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q(!1),E(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-capital.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=(M[0],M[1],Object(s.useState)([])),P=Object(o.a)(R,2),A=(P[0],P[1],Object(s.useState)({})),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1],V=new h.a,G=Object(s.useState)({images_content:[]}),Q=Object(o.a)(G,2),Z=Q[0],K=Q[1],X=Object(s.useState)(!1),Y=Object(o.a)(X,2),J=Y[0],$=Y[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){V.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestInvestedByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(t){t.preventDefault(),console.log("Inside handle Create"),V.get("store_id")&&(Z.store_id=V.get("store_id"));var a="/v1/capital",s="POST";Z.id&&(a="/v1/capital/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:V.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),q(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:E({}),q(!1),console.log("Response:"),console.log(c),e.showToastMessage("Capital Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){q(!1),console.log("Inside catch"),console.log(t),E(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Capital!","danger")}))}var me=Object(s.useRef)();Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:me,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:J,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:Z.id?"Update InvestedByUser Capital #"+Z.description:"Create New Capital Investment"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:xe,children:[B?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:xe,children:[V.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!I.store_id,onChange:function(e){if(I.store_id="",I.product_id="",E(I),0===e.length)return I.store_id="Invalid Store selected",E(I),K(Object(C.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(C.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){me.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),I.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Invested By User*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"invested_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!I.invested_by_user_id,onChange:function(e){if(I.invested_by_user_id="",E(I),0===e.length)return I.invested_by_user_id="Invalid User selected",E(I),Z.invested_by_user_id="",K(Object(C.a)({},Z)),void de([]);Z.invested_by_user_id=e[0].id,K(Object(C.a)({},Z)),de(e)},options:ce,placeholder:"Select InvestedByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),I.invested_by_user_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.invested_by_user_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){I.amount="",E(Object(C.a)({},I)),Z.amount=parseFloat(e.target.value),K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),I.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.amount]}),Z.amount&&!I.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){I.description="",E(Object(C.a)({},I)),Z.description=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),I.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.description]}),Z.description&&!I.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(x.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(C.a)({},Z))}}),I.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",I.status="Invalid Payment Method",void E(Object(C.a)({},I));I.payment_method="",E(Object(C.a)({},I)),Z.payment_method=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),I.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(I.image="",E(Object(C.a)({},I)),!e.target.value)return I.image="Invalid Image File",void E(Object(C.a)({},I));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(C.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),I.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.image]}),Z.image&&!I.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:xe,children:B?Object(T.jsx)(g.a,{as:"span",animation:"bcapital",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),ds=ls;var js=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(""),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(""),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(5),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(0),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)([]),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)([]),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)([]),Ze=Object(o.a)(Qe,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){Nt()}),[]);var Ye=Object(s.useState)({}),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function dt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=dt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,V(q=1),Nt()}function ht(e,t){if(!t)return q=1,$e[e]="",V(q),void Nt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(m(t),w(""),F(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(w(t),m(""),$e.date="",$e[e]=t):"to_date"===e?(F(t),m(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(ve(t),he(""),$e.created_at="",$e[e]=t),V(q=1),Nt()}function pt(e,t){"created_by"===e?Ee(t):"invested_by_user_id"===e&&We(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),V(q=1),Nt()}function xt(){return(xt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestInvestedByUsers"),""!==(s=dt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1],gt=Object(s.useState)("-"),vt=Object(o.a)(gt,2),yt=vt[0];function Nt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=dt($e);""!==s&&(s="&"+s),we(!0),fetch("/v1/capital?select=id,code,date,amount,payment_method,description,invested_by_user_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+q+"&limit="+E,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:we(!1),De(!1),A(n.result),r=parseInt((n.total_count+E-1)/E),Q(r),Y(n.total_count),re((q-1)*E),ae(n.result.length),ft=n.meta.total,_t(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function Ct(e){nt(st=e),ot(it="-"===it?"":"-"),Nt()}function wt(e){q=parseInt(e),V(q),Nt()}vt[1];var St=Object(s.useRef)();function kt(e){St.current.open(e)}var Tt=Object(s.useRef)();function Dt(e){Tt.current.open(e)}function Ft(){St.current.open()}var Mt=Object(s.useRef)(),Rt=Object(s.useRef)();function Pt(e){Rt.current.open(e)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ds,{ref:St,openUserCreateForm:function(){Mt.current.open()},openUserDetailsView:Pt,refreshList:Nt,openDetailsView:Dt,showToastMessage:e.showToastMessage}),Object(T.jsx)(os,{ref:Tt,openUpdateForm:kt,openCreateForm:Ft,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Mt,openDetailsView:Pt,showToastMessage:e.showToastMessage}),Object(T.jsx)(lt,{ref:Rt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Capital Investments"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Ft,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===X&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Capital to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bcapital:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),Nt()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bcapital",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:E,onChange:function(e){var t;t=e.target.value,E=parseInt(t),z(E),Nt()},className:"form-control pull-right",style:{bcapital:"solid 1px",bcapitalColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bcapital:"solid 0px"},children:W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){wt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""})}),Object(T.jsx)("div",{className:"row",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+ee," of"," ",X]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",q," of ",W]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("code")},children:["ID","code"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("date")},children:["Date","date"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("amount")},children:["Amount","amount"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("payment_method")},children:["Payment Method","payment_method"===st&&"-"===yt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===st&&""===yt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("description")},children:["Description","description"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("invested_by_user_name")},children:["InvestedByUser","invested_by_user_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"invested_by_user_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ct("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return m(""),void ht("date_str","");ht("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:C,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return w(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:D,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return F(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return bt("payment_method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"invested_by_user_id",labelKey:"name",onChange:function(e){pt("invested_by_user_id",e)},options:Be,placeholder:"Select investedbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.payment_method}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.invested_by_user_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){kt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Dt(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){wt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""]})})})})]})]})},us=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get CapitalWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/capital-withdrawal/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of CapitalWithdrawal #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"WithdrawnByUser"}),Object(T.jsxs)("td",{children:[" ",c.withdrawn_by_user_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"CapitalWithdrawal",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),bs=us,hs=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get CapitalWithdrawal");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}};fetch("/v1/capital-withdrawal/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:E({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.withdrawn_by_user_id,name:Z.withdrawn_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(C.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q(!1),E(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-capitalwithdrawal.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=(M[0],M[1],Object(s.useState)([])),P=Object(o.a)(R,2),A=(P[0],P[1],Object(s.useState)({})),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1],V=new h.a,G=Object(s.useState)({images_content:[]}),Q=Object(o.a)(G,2),Z=Q[0],K=Q[1],X=Object(s.useState)(!1),Y=Object(o.a)(X,2),J=Y[0],$=Y[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){V.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestWithdrawnByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(t){t.preventDefault(),console.log("Inside handle Create"),V.get("store_id")&&(Z.store_id=V.get("store_id"));var a="/v1/capital-withdrawal",s="POST";Z.id&&(a="/v1/capital-withdrawal/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:V.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),q(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:E({}),q(!1),console.log("Response:"),console.log(c),e.showToastMessage("CapitalWithdrawal Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){q(!1),console.log("Inside catch"),console.log(t),E(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating CapitalWithdrawal!","danger")}))}var me=Object(s.useRef)();Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:me,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:J,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:Z.id?"Update WithdrawnByUser CapitalWithdrawal #"+Z.description:"Create New Capital Withdrawal"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:xe,children:[B?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:xe,children:[V.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!I.store_id,onChange:function(e){if(I.store_id="",I.product_id="",E(I),0===e.length)return I.store_id="Invalid Store selected",E(I),K(Object(C.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(C.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){me.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),I.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Withdrawn By User*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"withdrawn_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!I.withdrawn_by_user_id,onChange:function(e){if(I.withdrawn_by_user_id="",E(I),0===e.length)return I.withdrawn_by_user_id="Invalid User selected",E(I),Z.withdrawn_by_user_id="",K(Object(C.a)({},Z)),void de([]);Z.withdrawn_by_user_id=e[0].id,K(Object(C.a)({},Z)),de(e)},options:ce,placeholder:"Select WithdrawnByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),I.withdrawn_by_user_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.withdrawn_by_user_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){I.amount="",E(Object(C.a)({},I)),Z.amount=parseFloat(e.target.value),K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),I.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.amount]}),Z.amount&&!I.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){I.description="",E(Object(C.a)({},I)),Z.description=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),I.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.description]}),Z.description&&!I.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(x.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(C.a)({},Z))}}),I.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",I.status="Invalid Payment Method",void E(Object(C.a)({},I));I.payment_method="",E(Object(C.a)({},I)),Z.payment_method=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),I.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(I.image="",E(Object(C.a)({},I)),!e.target.value)return I.image="Invalid Image File",void E(Object(C.a)({},I));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(C.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),I.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.image]}),Z.image&&!I.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:xe,children:B?Object(T.jsx)(g.a,{as:"span",animation:"bcapitalwithdrawal",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),ps=hs;var xs=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(""),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(""),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(5),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(0),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)([]),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)([]),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)([]),Ze=Object(o.a)(Qe,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){gt()}),[]);var Ye=Object(s.useState)({}),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function dt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=dt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,V(q=1),gt()}function ht(e,t){if(!t)return q=1,$e[e]="",V(q),void gt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(m(t),w(""),F(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(w(t),m(""),$e.date="",$e[e]=t):"to_date"===e?(F(t),m(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(ve(t),he(""),$e.created_at="",$e[e]=t),V(q=1),gt()}function pt(e,t){"created_by"===e?Ee(t):"withdrawn_by_user_id"===e&&We(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),V(q=1),gt()}function xt(){return(xt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestWithdrawnByUsers"),""!==(s=dt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1];function gt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=dt($e);""!==s&&(s="&"+s),we(!0),fetch("/v1/capital-withdrawal?select=id,code,date,amount,payment_method,description,withdrawn_by_user_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+q+"&limit="+E,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:we(!1),De(!1),A(n.result),r=parseInt((n.total_count+E-1)/E),Q(r),Y(n.total_count),re((q-1)*E),ae(n.result.length),ft=n.meta.total,_t(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function vt(e){nt(st=e),ot(it="-"===it?"":"-"),gt()}function yt(e){q=parseInt(e),V(q),gt()}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var wt=Object(s.useRef)();function St(e){wt.current.open(e)}function kt(){Nt.current.open()}var Tt=Object(s.useRef)(),Dt=Object(s.useRef)();function Ft(e){Dt.current.open(e)}var Mt=Object(s.useState)("-"),Rt=Object(o.a)(Mt,2),Pt=Rt[0];return Rt[1],Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ps,{ref:Nt,openUserCreateForm:function(){Tt.current.open()},openUserDetailsView:Ft,refreshList:gt,openDetailsView:St,showToastMessage:e.showToastMessage}),Object(T.jsx)(bs,{ref:wt,openUpdateForm:Ct,openCreateForm:kt,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Tt,openDetailsView:Ft,showToastMessage:e.showToastMessage}),Object(T.jsx)(lt,{ref:Dt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Capital Withdrawals"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:kt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===X&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No CapitalWithdrawal to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bcapitalwithdrawal:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),gt()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bcapitalwithdrawal",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:E,onChange:function(e){var t;t=e.target.value,E=parseInt(t),z(E),gt()},className:"form-control pull-right",style:{bcapitalwithdrawal:"solid 1px",bcapitalwithdrawalColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bcapitalwithdrawal:"solid 0px"},children:W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""})}),Object(T.jsx)("div",{className:"row",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+ee," of"," ",X]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",q," of ",W]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("code")},children:["ID","code"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("date")},children:["Date","date"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("amount")},children:["Amount","amount"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("payment_method")},children:["Payment Method","payment_method"===st&&"-"===Pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===st&&""===Pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("description")},children:["Description","description"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("withdrawn_by_user_name")},children:["WithdrawnByUser","withdrawn_by_user_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"withdrawn_by_user_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return m(""),void ht("date_str","");ht("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:C,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return w(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:D,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return F(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return bt("payment_method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"withdrawn_by_user_id",labelKey:"name",onChange:function(e){pt("withdrawn_by_user_id",e)},options:Be,placeholder:"Select withdrawnbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.payment_method}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.withdrawn_by_user_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){St(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""]})})})})]})]})},ms=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{open:function(e){e&&(!function(e){console.log("inside get Divident");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:i.get("access_token")}},a="",s=i.get("store_id");s&&(a="?store_id="+s);fetch("/v1/divident/"+e+a,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return i=n&&n.errors,e.abrupt("return",Promise.reject(i));case 10:console.log("Response:"),console.log(n),c=n.result,r(Object(C.a)({},c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e),p(!0))}}}));var a=Object(s.useState)({}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new h.a,l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0],p=d[1];function x(){p(!1)}return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(f.a,{show:j,size:"xl",onHide:x,animation:!1,scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsxs)(f.a.Title,{children:["Details of Divident #",c.description," "]}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[e.openCreateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openCreateForm()},children:[Object(T.jsx)("i",{className:"bi bi-plus"})," Create"]}):"","\xa0\xa0",e.openUpdateForm?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){x(),e.openUpdateForm(c.id)},children:[Object(T.jsx)("i",{className:"bi bi-pencil"})," Edit"]}):"",Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:x,"aria-label":"Close"})]})]}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U.a,{striped:!0,bordered:!0,hover:!0,responsive:"lg",children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Code:"}),Object(T.jsxs)("td",{children:[" ",c.code]}),Object(T.jsx)("th",{children:"Date:"}),Object(T.jsxs)("td",{children:[" ",c.date]}),Object(T.jsx)("th",{children:"Description:"}),Object(T.jsxs)("td",{children:[" ",c.description]}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsxs)("td",{children:[" ",c.amount]}),Object(T.jsx)("th",{children:"WithdrawnByUser"}),Object(T.jsxs)("td",{children:[" ",c.withdrawn_by_user_name]}),Object(T.jsx)("th",{children:"Payment Method:"}),Object(T.jsxs)("td",{children:[" ",c.payment_method]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Created At:"}),Object(T.jsxs)("td",{children:[" ",c.created_at]}),Object(T.jsx)("th",{children:"Updated At:"}),Object(T.jsxs)("td",{children:[" ",c.updated_at]}),Object(T.jsx)("th",{children:"Created By:"}),Object(T.jsxs)("td",{children:[" ",c.created_by_name]}),Object(T.jsx)("th",{children:"Updated By:"}),Object(T.jsxs)("td",{children:[" ",c.updated_by_name]})]})]})}),Object(T.jsx)("h4",{children:"Images"}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:"SI No."}),Object(T.jsx)("th",{children:"Image"})]})}),Object(T.jsx)("tbody",{children:c.images&&c.images.map((function(e,t){return Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("img",{alt:"Divident",src:"https://startpos-api-test.startuptech.uk"+e+"?"+Date.now(),style:{width:300,height:300}},"https://startpos-api-test.startuptech.uk"+e)})]},t)}))})]})})]})]})})})),Os=ms,fs=Object(s.forwardRef)((function(e,t){var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),j=d[0];d[1];Object(s.useImperativeHandle)(t,(function(){return{open:function(e){K({formData:Z={images_content:[]}}),e&&function(e){console.log("inside get Divident");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}};fetch("/v1/divident/"+e,t).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:E({}),console.log("Response:"),console.log(n),Z=n.result,i=[{id:Z.withdrawn_by_user_id,name:Z.withdrawn_by_user_name}],de([].concat(i)),o=[{id:Z.store_id,name:Z.store_name}],r([].concat(o)),Z.images_content=[],K(Object(C.a)({},Z));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){q(!1),E(e)}))}(e),$(!0)}}})),Object(s.useEffect)((function(){var e=function(e){if("Enter"===e.code||"NumpadEnter"===e.code){console.log("Enter key was pressed. Run your function-divident.");var t=e.target.form;if(t&&e.target){var a=Array.prototype.indexOf.call(t,e.target);t&&t.elements[a+1]&&(e.target.getAttribute("class").includes("description")?(t.elements[a].focus(),t.elements[a].value+="\r\n"):t.elements[a+1].focus(),e.preventDefault())}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=Object(s.useState)(""),v=Object(o.a)(m,2),y=v[0],N=v[1],w=Object(s.useState)([]),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)([]),M=Object(o.a)(F,2),R=(M[0],M[1],Object(s.useState)([])),P=Object(o.a)(R,2),A=(P[0],P[1],Object(s.useState)({})),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(!1),U=Object(o.a)(z,2),B=U[0],q=U[1],V=new h.a,G=Object(s.useState)({images_content:[]}),Q=Object(o.a)(G,2),Z=Q[0],K=Q[1],X=Object(s.useState)(!1),Y=Object(o.a)(X,2),J=Y[0],$=Y[1];function ee(){$(!1)}function te(){return(te=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Stores"),console.log("searchTerm:"+t),t){e.next=4;break}return e.abrupt("return");case 4:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/store?select=id,name"+a,s);case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,D(c.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}Object(s.useEffect)((function(){V.get("access_token")||(window.location="/")}));var se=Object(s.useState)([]),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],he=ue[1];function pe(){return(pe=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestWithdrawnByUsers"),re([]),console.log("searchTerm:"+t),t){e.next=5;break}return e.abrupt("return");case 5:return""!==(a=ae({name:t}))&&(a="&"+a),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:V.get("access_token")}},"select=id,name",he(!0),e.next=13,fetch("/v1/user?select=id,name"+a,s);case 13:return n=e.sent,e.next=16,n.json();case 16:c=e.sent,re(c.result),he(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(t){t.preventDefault(),console.log("Inside handle Create"),V.get("store_id")&&(Z.store_id=V.get("store_id"));var a="/v1/divident",s="POST";Z.id&&(a="/v1/divident/"+Z.id,s="PUT");var n={method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:V.get("access_token")},body:JSON.stringify(Z)};console.log("formData:",Z),q(!0),fetch(a,n).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,a.ok){t.next=10;break}return r=c&&c.errors,t.abrupt("return",Promise.reject(r));case 10:E({}),q(!1),console.log("Response:"),console.log(c),e.showToastMessage("Divident Created Successfully!","success"),e.refreshList&&e.refreshList(),ee(),e.openDetailsView&&e.openDetailsView(c.result.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){q(!1),console.log("Inside catch"),console.log(t),E(Object(C.a)({},t)),console.error("There was an error!",t),e.showToastMessage("Error Creating Divident!","danger")}))}var me=Object(s.useRef)();Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(W,{ref:me,showToastMessage:e.showToastMessage}),Object(T.jsxs)(f.a,{show:J,size:"xl",onHide:ee,animation:!1,backdrop:"static",scrollable:!0,children:[Object(T.jsxs)(f.a.Header,{children:[Object(T.jsx)(f.a.Title,{children:Z.id?"Update WithdrawnByUser Divident #"+Z.description:"Create New Divident Withdrawal"}),Object(T.jsxs)("div",{className:"col align-self-end text-end",children:[Z.id?Object(T.jsxs)(_.a,{variant:"primary",onClick:function(){ee(),e.openDetailsView(Z.id)},children:[Object(T.jsx)("i",{className:"bi bi-eye"})," View Detail"]}):"","\xa0\xa0",Object(T.jsxs)(_.a,{variant:"primary",onClick:xe,children:[B?Object(T.jsx)(g.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":!0})+" Creating...":"",Z.id?"Update":"Create"]}),Object(T.jsx)("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]})]}),Object(T.jsx)(f.a.Body,{children:Object(T.jsxs)("form",{className:"row g-3 needs-validation",onSubmit:xe,children:[V.get("store_name")?"":Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Store*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"store_id",labelKey:"name",isLoading:j,isInvalid:!!I.store_id,onChange:function(e){if(I.store_id="",I.product_id="",E(I),0===e.length)return I.store_id="Invalid Store selected",E(I),K(Object(C.a)({},Z)),void r([]);Z.store_id=e[0].id,K(Object(C.a)({},Z)),console.log("formData.store_id:",Z.store_id),c=e,r(Object(i.a)(e))},options:k,placeholder:"Select Store",selected:c,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){te.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:function(){me.current.open()},className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi x-lg",children:" "}),I.store_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Withdrawn By User*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(p.a,{id:"withdrawn_by_user_id",labelKey:"name",isLoading:be,isInvalid:!!I.withdrawn_by_user_id,onChange:function(e){if(I.withdrawn_by_user_id="",E(I),0===e.length)return I.withdrawn_by_user_id="Invalid User selected",E(I),Z.withdrawn_by_user_id="",K(Object(C.a)({},Z)),void de([]);Z.withdrawn_by_user_id=e[0].id,K(Object(C.a)({},Z)),de(e)},options:ce,placeholder:"Select WithdrawnByUser",selected:le,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){pe.apply(this,arguments)}(e)}}),Object(T.jsxs)(_.a,{hide:(!0).toString(),onClick:e.openUserCreateForm,className:"btn btn-outline-secondary btn-primary btn-sm",type:"button",id:"button-addon1",children:[" ",Object(T.jsx)("i",{className:"bi bi-plus-lg"})," New"]}),I.withdrawn_by_user_id&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.withdrawn_by_user_id]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Amount*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:Z.amount?Z.amount:"",type:"number",onChange:function(e){I.amount="",E(Object(C.a)({},I)),Z.amount=parseFloat(e.target.value),K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",id:"amount",placeholder:"Amount"}),I.amount&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.amount]}),Z.amount&&!I.amount&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Description*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("textarea",{value:Z.description?Z.description:"",type:"string",onChange:function(e){I.description="",E(Object(C.a)({},I)),Z.description=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control description",id:"description",placeholder:"Description"}),I.description&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.description]}),Z.description&&!I.description&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Date Time*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)(O.a,{id:"date_str",selected:Z.date_str?new Date(Z.date_str):null,value:Z.date_str?Object(x.default)(new Date(Z.date_str),"MMMM d, yyyy h:mm aa"):null,className:"form-control",dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeIntervals:"1",onChange:function(e){console.log("Value",e),Z.date_str=e,K(Object(C.a)({},Z))}}),I.date_str&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.date_str]})]})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Payment method*"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsxs)("select",{value:Z.payment_method,onChange:function(e){if(console.log("Inside onchange payment method"),!e.target.value)return Z.payment_method="",I.status="Invalid Payment Method",void E(Object(C.a)({},I));I.payment_method="",E(Object(C.a)({},I)),Z.payment_method=e.target.value,K(Object(C.a)({},Z)),console.log(Z)},className:"form-control",children:[Object(T.jsx)("option",{value:"",SELECTED:!0}),Object(T.jsx)("option",{value:"cash",children:"Cash"}),Object(T.jsx)("option",{value:"bank_account",children:"Bank Account / Debit / Credit Card"})]}),I.payment_method&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.payment_method]})]})]}),Object(T.jsxs)("div",{className:"col-md-6",children:[Object(T.jsx)("label",{className:"form-label",children:"Image(Optional)"}),Object(T.jsxs)("div",{className:"input-group mb-3",children:[Object(T.jsx)("input",{value:y||"",type:"file",onChange:function(e){if(I.image="",E(Object(C.a)({},I)),!e.target.value)return I.image="Invalid Image File",void E(Object(C.a)({},I));y=e.target.value,N(y);var t=document.querySelector("#image").files[0],a=400,s=400,n=URL.createObjectURL(t),c=new Image;c.onload=function(){var e=function(e,t,a,s){var n=parseFloat(e/t);return{targetWidth:a=parseInt(s*n),targetHeight:s=parseInt(a*n)}}(c.width,c.height,s,a);s=e.targetWidth,a=e.targetHeight,function(e,t,a,s){H.a.imageFileResizer(e,t,a,"JPEG",100,0,(function(e){s(e)}),"base64")}(t,s,a,(function(e){Z.images_content=[],Z.images_content[0]=e,K(Object(C.a)({},Z)),console.log("formData.images_content[0]:",Z.images_content[0])}))},c.src=n},className:"form-control",id:"image"}),I.image&&Object(T.jsxs)("div",{style:{color:"red"},children:[Object(T.jsx)("i",{className:"bi bi-x-lg",children:" "}),I.image]}),Z.image&&!I.image&&Object(T.jsxs)("div",{style:{color:"green"},children:[Object(T.jsx)("i",{className:"bi bi-check-lg",children:" "}),"Looks good!"]})]})]}),Object(T.jsxs)(f.a.Footer,{children:[Object(T.jsx)(_.a,{variant:"secondary",onClick:ee,children:"Close"}),Object(T.jsx)(_.a,{variant:"primary",onClick:xe,children:B?Object(T.jsx)(g.a,{as:"span",animation:"bdivident",size:"sm",role:"status","aria-hidden":!0})+" Processing...":Z.id?"Update":"Create"})]})]})})]})]})})),_s=fs;var gs=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=new Date,l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(""),v=Object(o.a)(f,2),C=v[0],w=v[1],S=Object(s.useState)(""),k=Object(o.a)(S,2),D=k[0],F=k[1],M=Object(s.useState)([]),R=Object(o.a)(M,2),P=R[0],A=R[1],L=Object(s.useState)(5),I=Object(o.a)(L,2),E=I[0],z=I[1],U=Object(s.useState)(1),B=Object(o.a)(U,2),q=B[0],V=B[1],H=Object(s.useState)(0),G=Object(o.a)(H,2),W=G[0],Q=G[1],Z=Object(s.useState)(1),K=Object(o.a)(Z,2),X=K[0],Y=K[1],J=Object(s.useState)(0),$=Object(o.a)(J,2),ee=$[0],ae=$[1],se=Object(s.useState)(0),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],ie=Object(s.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(s.useState)(""),ue=Object(o.a)(je,2),be=ue[0],he=ue[1],pe=Object(s.useState)(""),xe=Object(o.a)(pe,2),me=xe[0],Oe=xe[1],fe=Object(s.useState)(""),_e=Object(o.a)(fe,2),ge=_e[0],ve=_e[1],ye=Object(s.useState)(!1),Ne=Object(o.a)(ye,2),Ce=Ne[0],we=Ne[1],Se=Object(s.useState)(!1),ke=Object(o.a)(Se,2),Te=ke[0],De=ke[1],Fe=Object(s.useState)([]),Me=Object(o.a)(Fe,2),Re=Me[0],Pe=Me[1],Ae=Object(s.useState)([]),Le=Object(o.a)(Ae,2),Ie=Le[0],Ee=Le[1],ze=Object(s.useState)([]),Ue=Object(o.a)(ze,2),Be=Ue[0],qe=Ue[1],Ve=Object(s.useState)([]),He=Object(o.a)(Ve,2),Ge=He[0],We=He[1],Qe=Object(s.useState)([]),Ze=Object(o.a)(Qe,2),Ke=(Ze[0],Ze[1],Object(s.useState)([])),Xe=Object(o.a)(Ke,2);Xe[0],Xe[1],Object(s.useEffect)((function(){gt()}),[]);var Ye=Object(s.useState)({}),Je=Object(o.a)(Ye,2),$e=Je[0],et=Je[1],tt=Object(s.useState)("created_at"),at=Object(o.a)(tt,2),st=at[0],nt=at[1],ct=Object(s.useState)("-"),rt=Object(o.a)(ct,2),it=rt[0],ot=rt[1];function dt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ut(){return(ut=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggest Users"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=dt({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,Pe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){$e[e]=t,V(q=1),gt()}function ht(e,t){if(!t)return q=1,$e[e]="",V(q),void gt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(m(t),w(""),F(""),$e.from_date="",$e.to_date="",$e[e]=t):"from_date"===e?(w(t),m(""),$e.date="",$e[e]=t):"to_date"===e?(F(t),m(""),$e.date="",$e[e]=t):"created_at"===e&&(he(t),Oe(""),ve(""),$e.created_at_from="",$e.created_at_to="",$e[e]=t),"created_at_from"===e?(Oe(t),he(""),$e.created_at="",$e[e]=t):"created_at_to"===e&&(ve(t),he(""),$e.created_at="",$e[e]=t),V(q=1),gt()}function pt(e,t){"created_by"===e?Ee(t):"withdrawn_by_user_id"===e&&We(t),$e[e]=Object.values(t).map((function(e){return e.id})).join(","),V(q=1),gt()}function xt(){return(xt=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestWithdrawnByUsers"),""!==(s=dt({name:a}))&&(s="&".concat(s)),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=8,fetch("/v1/user?".concat("select=id,name").concat(s),n);case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,qe(r.result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=Object(s.useState)(0),Ot=Object(o.a)(mt,2),ft=Ot[0],_t=Ot[1];function gt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&($e.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();$e.timezone_offset=parseFloat(a/60),et($e);var s=dt($e);""!==s&&(s="&"+s),we(!0),fetch("/v1/divident?select=id,code,date,amount,payment_method,description,withdrawn_by_user_name,created_by_name,created_at"+s+"&sort="+it+st+"&page="+q+"&limit="+E,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:we(!1),De(!1),A(n.result),r=parseInt((n.total_count+E-1)/E),Q(r),Y(n.total_count),re((q-1)*E),ae(n.result.length),ft=n.meta.total,_t(ft);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){we(!1),De(!1),console.log(e)}))}function vt(e){nt(st=e),ot(it="-"===it?"":"-"),gt()}function yt(e){q=parseInt(e),V(q),gt()}var Nt=Object(s.useRef)();function Ct(e){Nt.current.open(e)}var wt=Object(s.useRef)();function St(e){wt.current.open(e)}function kt(){Nt.current.open()}var Tt=Object(s.useRef)(),Dt=Object(s.useRef)();function Ft(e){Dt.current.open(e)}var Mt=Object(s.useState)("-"),Rt=Object(o.a)(Mt,2),Pt=Rt[0];return Rt[1],Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(_s,{ref:Nt,openUserCreateForm:function(){Tt.current.open()},openUserDetailsView:Ft,refreshList:gt,openDetailsView:St,showToastMessage:e.showToastMessage}),Object(T.jsx)(Os,{ref:wt,openUpdateForm:Ct,openCreateForm:kt,showToastMessage:e.showToastMessage}),Object(T.jsx)(jt,{ref:Tt,openDetailsView:Ft,showToastMessage:e.showToastMessage}),Object(T.jsx)(lt,{ref:Dt,showToastMessage:e.showToastMessage}),Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsxs)("h1",{className:"text-end",children:["Total: ",Object(T.jsx)(te.a,{bg:"secondary",children:Object(T.jsx)(N.a,{value:ft,displayType:"text",thousandSeparator:!0,suffix:" SAR",renderText:function(e,t){return e}})})]})})})}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Drawings"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:kt,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===X&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Divident to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bdivident:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){De(!0),gt()},variant:"primary",disabled:Te,children:[Te?Object(T.jsx)(g.a,{as:"span",animation:"bdivident",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:Ce&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:E,onChange:function(e){var t;t=e.target.value,E=parseInt(t),z(E),gt()},className:"form-control pull-right",style:{bdivident:"solid 1px",bdividentColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bdivident:"solid 0px"},children:W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""})}),Object(T.jsx)("div",{className:"row",children:X>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",ce+1,"-",ce+ee," of"," ",X]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",q," of ",W]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("code")},children:["ID","code"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"code"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("date")},children:["Date","date"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"date"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("amount")},children:["Amount","amount"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"amount"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("payment_method")},children:["Payment Method","payment_method"===st&&"-"===Pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"payment_method"===st&&""===Pt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("description")},children:["Description","description"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"description"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("withdrawn_by_user_name")},children:["WithdrawnByUser","withdrawn_by_user_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"withdrawn_by_user_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_by_name")},children:["Created By","created_by_name"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){vt("created_at")},children:["Created At","created_at"===st&&"-"===it?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===st&&""===it?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"code",onChange:function(e){return bt("code",e.target.value)},className:"form-control"})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"date_str",value:j,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return m(""),void ht("date_str","");ht("date_str",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:C,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return w(""),void ht("from_date","");ht("from_date",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:D,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return F(""),void ht("to_date","");ht("to_date",e)}})]}):null]}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"amount",onChange:function(e){return bt("amount",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"method",onChange:function(e){return bt("payment_method",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"description",onChange:function(e){return bt("description",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"withdrawn_by_user_id",labelKey:"name",onChange:function(e){pt("withdrawn_by_user_id",e)},options:Be,placeholder:"Select withdrawnbyusers",selected:Ge,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){xt.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){pt("created_by",e)},options:Re,placeholder:"Select Users",selected:Ie,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){ut.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:be,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return he(""),void ht("created_at","");ht("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return de(!le)},children:le?"Less..":"More.."}),Object(T.jsx)("br",{}),le?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:me,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_from","");ht("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:ge,selected:i,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Oe(""),void ht("created_at_to","");ht("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:P&&P.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.code}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[e.amount.toFixed(2)," SAR"]}),Object(T.jsx)("td",{children:e.payment_method}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.withdrawn_by_user_name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Ct(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){St(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.code)}))})]})}),W?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){yt(e.selected+1)},pageRangeDisplayed:5,pageCount:W,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:q-1}):""]})})})})]})]})};var vs=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(new Date),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(s.useState)(new Date),f=Object(o.a)(m,2),v=f[0],N=f[1],C=Object(s.useState)(new Date),w=Object(o.a)(C,2),S=w[0],k=w[1],D=Object(s.useState)(""),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(""),A=Object(o.a)(P,2),I=A[0],E=A[1],z=Object(s.useState)(""),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)([]),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(5),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(1),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(0),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(0),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(0),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)(!1),Oe=Object(o.a)(me,2),fe=(Oe[0],Oe[1],Object(s.useState)("")),_e=Object(o.a)(fe,2),ge=(_e[0],_e[1]),ve=Object(s.useState)(""),ye=Object(o.a)(ve,2),Ne=(ye[0],ye[1]),Ce=Object(s.useState)(""),we=Object(o.a)(Ce,2),Se=(we[0],we[1]),ke=Object(s.useState)(!1),Te=Object(o.a)(ke,2),De=Te[0],Fe=Te[1],Me=Object(s.useState)(!1),Re=Object(o.a)(Me,2),Pe=Re[0],Ae=Re[1],Le=Object(s.useState)([]),Ie=Object(o.a)(Le,2),Ee=(Ie[0],Ie[1],Object(s.useState)([])),ze=Object(o.a)(Ee,2),Ue=(ze[0],ze[1]),Be=Object(s.useState)([]),qe=Object(o.a)(Be,2),Ve=(qe[0],qe[1],Object(s.useState)([])),He=Object(o.a)(Ve,2),Ge=(He[0],He[1]);Object(s.useEffect)((function(){bt()}),[]),Object(s.useEffect)((function(){se&&($e(Je="journals.date"),st(at=""),ee($=se),bt())}),[se]);var We=Object(s.useState)({}),Qe=Object(o.a)(We,2),Ze=Qe[0],Ke=Qe[1],Xe=Object(s.useState)("journals.date"),Ye=Object(o.a)(Xe,2),Je=Ye[0],$e=Ye[1],et=Object(s.useState)("-"),tt=Object(o.a)(et,2),at=tt[0],st=tt[1];function nt(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=")+e[t]})).join("&")}function ct(e,t){Ze[e]=t,ee($=1),bt()}function rt(e,t){if(!t)return $=1,Ze[e]="",ee($),void bt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(R(t),E(""),q(""),Ze.from_date="",Ze.to_date="",Ze[e]=t):"from_date"===e?(E(t),R(""),Ze.date="",Ze[e]=t):"to_date"===e?(q(t),R(""),Ze.date="",Ze[e]=t):"created_at"===e&&(ge(t),Ne(""),Se(""),Ze.created_at_from="",Ze.created_at_to="",Ze[e]=t),"created_at_from"===e?(Ne(t),ge(""),Ze.created_at="",Ze[e]=t):"created_at_to"===e&&(Se(t),ge(""),Ze.created_at="",Ze[e]=t),ee($=1),bt()}var it=Object(s.useState)([]),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(0),ut=Object(o.a)(jt,2);function bt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ze.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ze.timezone_offset=parseFloat(a/60),Ze.stats="1",Ke(Ze);var s=nt(Ze);""!==s&&(s="&"+s),Fe(!0),fetch("/v1/ledger?select=id,store_id,reference_model,reference_code,journals,created_at"+s+"&sort="+at+Je+"&page="+$+"&limit="+K,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:Fe(!1),Ae(!1),W(n.result),r=parseInt((n.total_count+K-1)/K),ne(r),oe(n.total_count),xe(($-1)*K),ue(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Fe(!1),Ae(!1),console.log(e)}))}function ht(e){$e(Je=e),st(at="-"===at?"":"-"),bt()}function pt(e){$=parseInt(e),ee($),bt()}ut[0],ut[1];var xt=Object(s.useState)([]),mt=Object(o.a)(xt,2),Ot=mt[0],ft=mt[1];function _t(){return(_t=Object(b.a)(u.a.mark((function e(a){var s,n,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside handle suggestAccounts"),s={search:a},t.get("store_id")&&(s.store_id=t.get("store_id")),""!==(n=nt(s))&&(n="&".concat(n)),c={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name,phone,number,search_label,open,balance,debit_total,credit_total",e.next=9,fetch("/v1/account?".concat("select=id,name,phone,number,search_label,open,balance,debit_total,credit_total").concat(n),c);case 9:return r=e.sent,e.next=12,r.json();case 12:i=e.sent,ft(i.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gt=Object(s.useState)(!1),vt=Object(o.a)(gt,2),yt=(vt[0],vt[1]),Nt=Object(s.useState)({}),Ct=Object(o.a)(Nt,2),wt=(Ct[0],Ct[1]),St=Object(s.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Ledger"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===ie&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Expense to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bexpense:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){Ae(!0),bt()},variant:"primary",disabled:Pe,children:[Pe?Object(T.jsx)(g.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:De&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:ie>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:K,onChange:function(e){var t;t=e.target.value,K=parseInt(t),X(K),bt()},className:"form-control pull-right",style:{bexpense:"solid 1px",bexpenseColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bexpense:"solid 0px"},children:se?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){pt(e.selected+1)},pageRangeDisplayed:5,pageCount:se,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:$-1}):""})}),Object(T.jsx)("div",{className:"row",children:ie>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",pe+1,"-",pe+je," of"," ",ie]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",$," of ",se]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("journals.date")},children:["Date","journals.date"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"journals.date"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("journals.account_name")},children:["Account","journals.account_name"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"journals.account_name"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("journals.debit")},children:["Debit","journals.debit"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"journals.debit"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("journals.credit")},children:["Credit","journals.credit"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"journals.credit"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("reference_model")},children:["Type","reference_model"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"reference_model"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){ht("reference_code")},children:["ID","reference_code"===Je&&"-"===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"reference_code"===Je&&""===at?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsxs)("th",{style:{width:"190px"},children:[Object(T.jsx)(O.a,{id:"date_str",value:M,selected:d,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return R(""),void rt("date_str","");rt("date_str",e),d=e,j(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return r(!c)},children:c?"Less..":"More.."}),Object(T.jsx)("br",{}),c?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"from_date",value:I,selected:v,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return E(""),void rt("from_date","");rt("from_date",e),v=e,N(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"to_date",value:B,selected:S,className:"form-control",dateFormat:"MMM dd yyyy",isClearable:!0,onChange:function(e){if(!e)return q(""),void rt("to_date","");rt("to_date",e),S=e,k(e)}})]}):null]}),Object(T.jsx)("th",{style:{minWidth:"250px"},children:Object(T.jsx)(p.a,{id:"account_id",labelKey:"search_label",onChange:function(e){var t,a;a=e,"created_by"===(t="account_id")?Ue(a):"category_id"===t?Ge(a):"account_id"===t&&dt(a),Ze[t]=Object.values(a).map((function(e){return e.id})).join(","),ee($=1),bt()},options:Ot,placeholder:"Name / mob / acc no.",selected:lt,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){_t.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsx)("th",{style:{minWidth:"130px"},children:Object(T.jsx)("input",{type:"text",id:"debit",onChange:function(e){return ct("debit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{minWidth:"130px"},children:Object(T.jsx)("input",{type:"text",id:"credit",onChange:function(e){return ct("credit",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsxs)("select",{className:"form-control",onChange:function(e){return ct("reference_model",e.target.value)},children:[Object(T.jsx)("option",{value:"",children:"All"}),Object(T.jsx)("option",{value:"sales",children:"Sales"}),Object(T.jsx)("option",{value:"sales_return",children:"Sales Return"}),Object(T.jsx)("option",{value:"purchase",children:"Purchase"}),Object(T.jsx)("option",{value:"purchase_return",children:"Purchase Return"}),Object(T.jsx)("option",{value:"capital",children:"Capital"}),Object(T.jsx)("option",{value:"drawing",children:"Drawing"}),Object(T.jsx)("option",{value:"expense",children:"Expense"}),Object(T.jsx)("option",{value:"customer_deposit",children:"Customer deposit"}),Object(T.jsx)("option",{value:"customer_withdrawal",children:"Customer withdrawl"})]})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",id:"reference_code",onChange:function(e){return ct("reference_code",e.target.value)},className:"form-control"})})]})}),Object(T.jsx)("tbody",{className:"text-center",children:G&&G.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:4,children:e.journals&&e.journals.map((function(e){return Object(T.jsxs)("tr",{style:{border:"solid 1px"},children:[Object(T.jsx)("td",{style:{border:"solid 1px",minWidth:"184px"},children:Object(x.default)(new Date(e.date),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{style:{border:"solid 1px",minWidth:"250px",maxWidth:"250px",textAlign:"left",paddingLeft:"credit"==e.debit_or_credit?"60px":"30px"},children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){!function(e){console.log("inside get User");var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};fetch("/v1/account/"+e,a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:console.log("Response:"),console.log(n),wt(n.result),!0,yt(!0),St.current.open(n.result);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}(e.account_id)},children:"credit"==e.debit_or_credit?"     To "+e.account_name+" A/c #"+e.account_number+"  Cr.":e.account_name+" A/c #"+e.account_number+" Dr."})}),Object(T.jsx)("td",{style:{border:"solid 1px",minWidth:"165px"},children:"debit"==e.debit_or_credit?e.debit:""}),Object(T.jsx)("td",{style:{border:"solid 1px",minWidth:"160px"},children:"credit"==e.debit_or_credit?e.credit:""})]},e.id)}))}),Object(T.jsx)("td",{style:{minWidth:"155px",maxWidth:"155px"},children:e.reference_model}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.reference_code})]},e.id)}))})]})}),se?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){pt(e.selected+1)},pageRangeDisplayed:5,pageCount:se,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:$-1}):""]})})})})]}),Object(T.jsx)(L,{ref:St,showToastMessage:e.showToastMessage,refreshLedgerList:bt})]})};var ys=function(e){var t=new h.a,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=(n[0],n[1],Object(s.useState)(new Date)),r=Object(o.a)(c,2),i=(r[0],r[1],Object(s.useState)(new Date)),l=Object(o.a)(i,2),d=(l[0],l[1],Object(s.useState)(new Date)),j=Object(o.a)(d,2),p=(j[0],j[1],Object(s.useState)("")),m=Object(o.a)(p,2),f=(m[0],m[1]),v=Object(s.useState)(""),N=Object(o.a)(v,2),C=(N[0],N[1]),w=Object(s.useState)(""),S=Object(o.a)(w,2),k=(S[0],S[1]),D=Object(s.useState)([]),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(5),A=Object(o.a)(P,2),I=A[0],E=A[1],z=Object(s.useState)(1),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(0),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(1),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(0),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(0),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(""),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)(""),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)(""),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1],ge=Object(s.useState)(new Date),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)(new Date),we=Object(o.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(s.useState)(new Date),De=Object(o.a)(Te,2),Fe=De[0],Me=De[1],Re=Object(s.useState)(new Date),Pe=Object(o.a)(Re,2),Ae=Pe[0],Le=Pe[1],Ie=Object(s.useState)(new Date),Ee=Object(o.a)(Ie,2),ze=Ee[0],Ue=Ee[1],Be=Object(s.useState)(new Date),qe=Object(o.a)(Be,2),Ve=qe[0],He=qe[1],Ge=Object(s.useState)(!1),We=Object(o.a)(Ge,2),Qe=We[0],Ze=We[1],Ke=Object(s.useState)(""),Xe=Object(o.a)(Ke,2),Ye=Xe[0],Je=Xe[1],$e=Object(s.useState)(""),et=Object(o.a)($e,2),tt=et[0],at=et[1],st=Object(s.useState)(""),nt=Object(o.a)(st,2),ct=nt[0],rt=nt[1],it=Object(s.useState)(!1),ot=Object(o.a)(it,2),lt=ot[0],dt=ot[1],jt=Object(s.useState)(!1),ut=Object(o.a)(jt,2),bt=ut[0],ht=ut[1],pt=Object(s.useState)([]),xt=Object(o.a)(pt,2),mt=(xt[0],xt[1],Object(s.useState)([])),Ot=Object(o.a)(mt,2),ft=(Ot[0],Ot[1],Object(s.useState)([])),_t=Object(o.a)(ft,2),gt=(_t[0],_t[1],Object(s.useState)([])),vt=Object(o.a)(gt,2);vt[0],vt[1],Object(s.useEffect)((function(){Yt()}),[]);var yt=Object(s.useState)({}),Nt=Object(o.a)(yt,2),Ct=Nt[0],wt=Nt[1],St=Object(s.useState)("updated_at"),kt=Object(o.a)(St,2),Tt=kt[0],Dt=kt[1],Ft=Object(s.useState)("-"),Mt=Object(o.a)(Ft,2),Rt=Mt[0],Pt=Mt[1],At=Object(s.useState)(0),Lt=Object(o.a)(At,2),It=Lt[0],Et=Lt[1],zt=Object(s.useState)(0),Ut=Object(o.a)(zt,2),Bt=Ut[0],qt=Ut[1];function Vt(e,t){Ct[e]=t,q(B=1),Yt()}function Ht(e,t){if(!t)return B=1,Ct[e]="",q(B),void Yt();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"date_str"===e?(f(t),C(""),k(""),Ct.from_date="",Ct.to_date="",Ct[e]=t):"from_date"===e?(C(t),f(""),Ct.date="",Ct[e]=t):"to_date"===e?(k(t),f(""),Ct.date="",Ct[e]=t):"created_at"===e?(ue(t),xe(""),_e(""),Ct.created_at_from="",Ct.created_at_to="",Ct[e]=t):"updated_at"===e&&(Je(t),at(""),rt(""),Ct.updated_at_from="",Ct.updated_at_to="",Ct[e]=t),"created_at_from"===e?(xe(t),ue(""),Ct.created_at="",Ct[e]=t):"created_at_to"===e&&(_e(t),ue(""),Ct.created_at="",Ct[e]=t),"updated_at_from"===e?(at(t),Je(""),Ct.updated_at="",Ct[e]=t):"updated_at_to"===e&&(rt(t),Je(""),Ct.updated_at="",Ct[e]=t),q(B=1),Yt()}var Gt=Object(s.useState)([]),Wt=Object(o.a)(Gt,2),Qt=(Wt[0],Wt[1],Object(s.useState)({})),Zt=Object(o.a)(Qt,2);Zt[0],Zt[1];var Kt=Object(s.useState)(0),Xt=Object(o.a)(Kt,2);function Yt(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}};t.get("store_id")&&(Ct.store_id=t.get("store_id"));var a=(new Date).getTimezoneOffset();Ct.timezone_offset=parseFloat(a/60),Ct.stats="1",wt(Ct);var s,n=(s=Ct,Object.keys(s).map((function(e){return"search[".concat(e,"]=")+s[e]})).join("&"));""!==n&&(n="&"+n),dt(!0),fetch("/v1/account?select=id,store_id,name,type,phone,number,search_label,open,balance,debit_total,credit_total,created_at,updated_at,reference_model,debit_or_credit_balance"+n+"&sort="+Rt+Tt+"&page="+B+"&limit="+I,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:dt(!1),ht(!1),R(n.result),r=parseInt((n.total_count+I-1)/I),W(r),X(n.total_count),ne((B-1)*I),ee(n.result.length),It=n.meta.debit_balance_total,Et(It),Bt=n.meta.credit_balance_total,qt(Bt);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){dt(!1),ht(!1),console.log(e)}))}function Jt(e){Dt(Tt=e),Pt(Rt="-"===Rt?"":"-"),Yt()}function $t(e){B=parseInt(e),q(B),Yt()}Xt[0],Xt[1];var ea=Object(s.useState)(!1),ta=Object(o.a)(ea,2),aa=(ta[0],ta[1],Object(s.useRef)());function sa(e){aa.current.open(e)}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Accounts & Trial balances"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===K&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Accounts to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bexpense:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{border:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ht(!0),Yt()},variant:"primary",disabled:bt,children:[bt?Object(T.jsx)(g.a,{as:"span",animation:"bexpense",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:lt&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:K>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:I,onChange:function(e){var t;t=e.target.value,I=parseInt(t),E(I),Yt()},className:"form-control pull-right",style:{bexpense:"solid 1px",bexpenseColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"}),Object(T.jsx)("option",{value:"200",children:"200"}),Object(T.jsx)("option",{value:"300",children:"300"}),Object(T.jsx)("option",{value:"500",children:"500"}),Object(T.jsx)("option",{value:"1000",children:"1000"}),Object(T.jsx)("option",{value:"1500",children:"1500"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bexpense:"solid 0px"},children:G?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){$t(e.selected+1)},pageRangeDisplayed:5,pageCount:G,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:B-1}):""})}),Object(T.jsx)("div",{className:"row",children:K>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",se+1,"-",se+$," of"," ",K]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",B," of ",G]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("number")},children:["Account No.","number"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"number"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("name")},children:["Account Name","name"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("balance")},children:["Debit Balance","balance"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"balance"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("balance")},children:["Credit Balance","balance"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"balance"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("phone")},children:["Phone","phone"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"phone"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("type")},children:["Type","type"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"type"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("balance")},children:["Balance","balance"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"balance"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("open")},children:["Status","open"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"open"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("reference_model")},children:["Reference model","reference_model"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"reference_model"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("updated_at")},children:["Updated At","updated_at"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"updated_at"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Jt("created_at")},children:["Created At","created_at"===Tt&&"-"===Rt?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Tt&&""===Rt?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",id:"number",onChange:function(e){return Vt("number",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Vt("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Vt("balance",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",onChange:function(e){return Vt("balance",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",id:"phone",onChange:function(e){return Vt("phone",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsxs)("select",{onChange:function(e){return Vt("type",e.target.value)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"All"}),Object(T.jsx)("option",{value:"drawing",children:"Drawing"}),Object(T.jsx)("option",{value:"expense",children:"Expense"}),Object(T.jsx)("option",{value:"asset",children:"Asset"}),Object(T.jsx)("option",{value:"liability",children:"Liability"}),Object(T.jsx)("option",{value:"capital",children:"Capital"}),Object(T.jsx)("option",{value:"revenue",children:"Revenue"})]})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsx)("input",{type:"text",id:"balance",onChange:function(e){return Vt("balance",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{style:{minWidth:"130px"},children:Object(T.jsxs)("select",{onChange:function(e){return Vt("open",e.target.value)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"All"}),Object(T.jsx)("option",{value:"1",children:"Open"}),Object(T.jsx)("option",{value:"0",children:"Closed"})]})}),Object(T.jsx)("th",{style:{width:"110px"},children:Object(T.jsxs)("select",{onChange:function(e){return Vt("reference_model",e.target.value)},className:"form-control",children:[Object(T.jsx)("option",{value:"",children:"All"}),Object(T.jsx)("option",{value:"customer",children:"Customer"}),Object(T.jsx)("option",{value:"vendor",children:"Vendor"}),Object(T.jsx)("option",{value:"investor",children:"Investor"}),Object(T.jsx)("option",{value:"withdrawer",children:"Withdrawer"}),Object(T.jsx)("option",{value:"expense_category",children:"Expense Category"})]})}),Object(T.jsxs)("th",{style:{minWidth:"150px"},children:[Object(T.jsx)(O.a,{id:"updated_at",value:Ye,selected:Ae,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return Je(""),void Ht("updated_at","");Ht("updated_at",e),Ae=e,Le(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return Ze(!Qe)},children:Qe?"Less..":"More.."}),Object(T.jsx)("br",{}),Qe?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"updated_at_from",value:tt,selected:ze,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return xe(""),void Ht("updated_at_from","");Ht("updated_at_from",e),ze=e,Ue(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"updated_at_to",value:ct,selected:Ve,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return at(""),void Ht("updated_at_to","");Ht("updated_at_to",e),Ve=e,He(e)}})]}):null]}),Object(T.jsxs)("th",{style:{minWidth:"150px"},children:[Object(T.jsx)(O.a,{id:"created_at",value:je,selected:ye,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ue(""),void Ht("created_at","");Ht("created_at",e),ye=e,Ne(e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return oe(!ie)},children:ie?"Less..":"More.."}),Object(T.jsx)("br",{}),ie?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:pe,selected:Se,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return xe(""),void Ht("created_at_from","");Ht("created_at_from",e),Se=e,ke(e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:fe,selected:Fe,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return xe(""),void Ht("created_at_to","");Ht("created_at_to",e),Fe=e,Me(e)}})]}):null]})]})}),Object(T.jsxs)("tbody",{className:"text-center",children:[M&&M.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{style:{minWidth:"155px",maxWidth:"155px"},children:e.number}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){sa(e)},children:e.name})}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:"debit_balance"==e.debit_or_credit_balance?e.balance:"0"}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:"credit_balance"==e.debit_or_credit_balance?e.balance:"0"}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.phone}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.type}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:Object(T.jsx)(_.a,{variant:"link",onClick:function(){sa(e)},children:e.balance})}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.open?"Open":"Closed"}),Object(T.jsx)("td",{style:{minWidth:"120px",maxWidth:"120px"},children:e.reference_model}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.updated_at),"MMM dd yyyy h:mma")}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy h:mma")})]},e.id)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{colSpan:2}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{children:It})}),Object(T.jsx)("td",{children:Object(T.jsx)("b",{children:Bt})}),Object(T.jsx)("td",{colSpan:7})]})]})]})}),G?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){$t(e.selected+1)},pageRangeDisplayed:5,pageCount:G,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:B-1}):""]})})})})]}),Object(T.jsx)(L,{ref:aa,showToastMessage:e.showToastMessage,refreshAccountList:Yt})]})};var Ns=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1];Object(s.useEffect)((function(){Ie()}),[]);var ge=Object(s.useState)({}),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)("created_at"),we=Object(o.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(s.useState)("-"),De=Object(o.a)(Te,2),Fe=De[0],Me=De[1];function Re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Re({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,xe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){ye[e]=t,C(N=1),Ie()}function Le(e,t){if(!t)return N=1,ye[e]="",C(N),void Ie();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),C(N=1),Ie()}function Ie(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Re(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/user?select=id,name,admin,email,mob,created_by_name,created_at"+s+"&sort="+Fe+Se+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function Ee(e){ke(Se=e),Me(Fe="-"===Fe?"":"-"),Ie()}function ze(e){N=parseInt(e),C(N),Ie()}function Ue(e){Ve.current.open(e)}var Be=Object(s.useRef)();function qe(e){Be.current.open(e)}var Ve=Object(s.useRef)();function He(){Ve.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(jt,{ref:Ve,refreshList:Ie,showToastMessage:e.showToastMessage,openDetailsView:qe}),Object(T.jsx)(lt,{ref:Be,openUpdateForm:Ue,openCreateForm:He}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Users"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:He,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Users to display"})})}),Object(T.jsxs)("div",{className:"row",style:{buser:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{buser:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ue(!0),Ie()},variant:"primary",disabled:je,children:[je?Object(T.jsx)(g.a,{as:"span",animation:"buser",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),Ie()},className:"form-control pull-right",style:{buser:"solid 1px",buserColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{buser:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("mob")},children:["Mob","mob"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"mob"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("name")},children:["Name","name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("email")},children:["Email","email"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"email"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_by_name")},children:["Created By","created_by_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ee("created_at")},children:["Created At","created_at"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"mob",onChange:function(e){return Ae("mob",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return Ae("name",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"email",onChange:function(e){return Ae("email",e.target.value)},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),Ie()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:K,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Le("created_at","");Le("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Le("created_at_from","");Le("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Le("created_at_to","");Le("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.mob}),Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.email}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){Ue(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){qe(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){ze(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})};var Cs=function(e){var t=new h.a,a=new Date,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(5),d=Object(o.a)(l,2),j=d[0],m=d[1],f=Object(s.useState)(1),v=Object(o.a)(f,2),N=v[0],C=v[1],w=Object(s.useState)(0),S=Object(o.a)(w,2),k=S[0],D=S[1],F=Object(s.useState)(1),M=Object(o.a)(F,2),R=M[0],P=M[1],A=Object(s.useState)(0),L=Object(o.a)(A,2),I=L[0],E=L[1],z=Object(s.useState)(0),U=Object(o.a)(z,2),B=U[0],q=U[1],V=Object(s.useState)(!1),H=Object(o.a)(V,2),G=H[0],W=H[1],Q=Object(s.useState)(""),Z=Object(o.a)(Q,2),K=Z[0],X=Z[1],Y=Object(s.useState)(""),J=Object(o.a)(Y,2),$=J[0],ee=J[1],te=Object(s.useState)(""),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(s.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(s.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(s.useState)([]),he=Object(o.a)(be,2),pe=he[0],xe=he[1],me=Object(s.useState)([]),Oe=Object(o.a)(me,2),fe=Oe[0],_e=Oe[1];Object(s.useEffect)((function(){Le()}),[]);var ge=Object(s.useState)({}),ve=Object(o.a)(ge,2),ye=ve[0],Ne=ve[1],Ce=Object(s.useState)("created_at"),we=Object(o.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(s.useState)("-"),De=Object(o.a)(Te,2),Fe=De[0],Me=De[1];function Re(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Pe(){return(Pe=Object(b.a)(u.a.mark((function e(a){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Inside handle suggestUsers"),console.log("searchTerm:"+a),a){e.next=4;break}return e.abrupt("return");case 4:return""!==(s=Re({name:a}))&&(s="&"+s),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},"select=id,name",e.next=11,fetch("/v1/user?select=id,name"+s,n);case 11:return c=e.sent,e.next=14,c.json();case 14:r=e.sent,xe(r.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){if(!t)return N=1,ye[e]="",C(N),void Le();var a=new Date(t);a=new Date(a.toUTCString()),t=Object(x.default)(a,"MMM dd yyyy"),"created_at"===e&&(X(t),ee(""),ne(""),ye.created_at_from="",ye.created_at_to="",ye[e]=t),"created_at_from"===e?(ee(t),X(""),ye.created_at="",ye[e]=t):"created_at_to"===e&&(ne(t),X(""),ye.created_at="",ye[e]=t),C(N=1),Le()}function Le(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:t.get("access_token")}},a=(new Date).getTimezoneOffset();ye.timezone_offset=parseFloat(a/60),Ne(ye);var s=Re(ye);""!==s&&(s="&"+s),oe(!0),fetch("/v1/signature?select=id,name,created_by_name,created_at"+s+"&sort="+Fe+Se+"&page="+N+"&limit="+j,e).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:oe(!1),ue(!1),i(n.result),r=parseInt((n.total_count+j-1)/j),D(r),P(n.total_count),q((N-1)*j),E(n.result.length);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){oe(!1),ue(!1),console.log(e)}))}function Ie(e){ke(Se=e),Me(Fe="-"===Fe?"":"-"),Le()}function Ee(e){N=parseInt(e),C(N),Le()}function ze(e){qe.current.open(e)}var Ue=Object(s.useRef)();function Be(e){Ue.current.open(e)}var qe=Object(s.useRef)();function Ve(){qe.current.open()}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(pt,{ref:qe,refreshList:Le,showToastMessage:e.showToastMessage,openDetailsView:Be}),Object(T.jsx)(bt,{ref:Ue,openUpdateForm:ze,openCreateForm:Ve}),Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("h1",{className:"h3",children:"Signatures"})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)(_.a,{hide:(!0).toString(),variant:"primary",className:"btn btn-primary mb-3",onClick:Ve,children:[Object(T.jsx)("i",{className:"bi bi-plus-lg"})," Create"]})})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"row",children:0===R&&Object(T.jsx)("div",{className:"col",children:Object(T.jsx)("p",{className:"text-start",children:"No Signatures to display"})})}),Object(T.jsxs)("div",{className:"row",style:{bsignature:"solid 0px"},children:[Object(T.jsx)("div",{className:"col text-start",style:{bsignature:"solid 0px"},children:Object(T.jsxs)(_.a,{onClick:function(){ue(!0),Le()},variant:"primary",disabled:je,children:[je?Object(T.jsx)(g.a,{as:"span",animation:"bsignature",size:"sm",role:"status","aria-hidden":!0}):Object(T.jsx)("i",{className:"fa fa-refresh"}),Object(T.jsx)("span",{className:"visually-hidden",children:"Loading..."})]})}),Object(T.jsx)("div",{className:"col text-center",children:ie&&Object(T.jsx)(g.a,{animation:"grow",variant:"primary"})}),Object(T.jsx)("div",{className:"col text-end",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"form-label",children:"Size:\xa0"}),Object(T.jsxs)("select",{value:j,onChange:function(e){var t;t=e.target.value,j=parseInt(t),m(j),Le()},className:"form-control pull-right",style:{bsignature:"solid 1px",bsignatureColor:"silver",width:"55px"},children:[Object(T.jsx)("option",{value:"5",children:"5"}),Object(T.jsx)("option",{value:"10",children:"10"}),Object(T.jsx)("option",{value:"20",children:"20"}),Object(T.jsx)("option",{value:"40",children:"40"}),Object(T.jsx)("option",{value:"50",children:"50"}),Object(T.jsx)("option",{value:"100",children:"100"})]})]})})]}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col",style:{bsignature:"solid 0px"},children:k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""})}),Object(T.jsx)("div",{className:"row",children:R>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"col text-start",children:Object(T.jsxs)("p",{className:"text-start",children:["showing ",B+1,"-",B+I," of"," ",R]})}),Object(T.jsx)("div",{className:"col text-end",children:Object(T.jsxs)("p",{className:"text-end",children:["page ",N," of ",k]})})]})}),Object(T.jsx)("div",{className:"table-responsive",style:{overflowX:"auto"},children:Object(T.jsxs)("table",{className:"table table-striped table-sm table-bordered",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ie("name")},children:["Name","name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ie("created_by_name")},children:["Created By","created_by_name"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up-alt"}):null,"created_by_name"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-alpha-up"}):null]})}),Object(T.jsx)("th",{children:Object(T.jsxs)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){Ie("created_at")},children:["Created At","created_at"===Se&&"-"===Fe?Object(T.jsx)("i",{className:"bi bi-sort-down"}):null,"created_at"===Se&&""===Fe?Object(T.jsx)("i",{className:"bi bi-sort-up"}):null]})}),Object(T.jsx)("th",{children:"Actions"})]})}),Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"text-center",children:[Object(T.jsx)("th",{children:Object(T.jsx)("input",{type:"text",id:"name",onChange:function(e){return t="name",a=e.target.value,ye[t]=a,C(N=1),void Le();var t,a},className:"form-control"})}),Object(T.jsx)("th",{children:Object(T.jsx)(p.a,{id:"created_by",labelKey:"name",onChange:function(e){var t,a;a=e,"created_by"===(t="created_by")&&_e(a),ye[t]=Object.values(a).map((function(e){return e.id})).join(","),C(N=1),Le()},options:pe,placeholder:"Select Users",selected:fe,highlightOnlyResult:!0,onInputChange:function(e,t){!function(e){Pe.apply(this,arguments)}(e)},multiple:!0})}),Object(T.jsxs)("th",{children:[Object(T.jsx)(O.a,{id:"created_at",value:K,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return X(""),void Ae("created_at","");Ae("created_at",e)}}),Object(T.jsx)("small",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(e){return W(!G)},children:G?"Less..":"More.."}),Object(T.jsx)("br",{}),G?Object(T.jsxs)("span",{className:"text-left",children:["From:"," ",Object(T.jsx)(O.a,{id:"created_at_from",value:$,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ee(""),void Ae("created_at_from","");Ae("created_at_from",e)}}),"To:"," ",Object(T.jsx)(O.a,{id:"created_at_to",value:se,selected:a,className:"form-control",dateFormat:"MMM dd yyyy",onChange:function(e){if(!e)return ne(""),void Ae("created_at_to","");Ae("created_at_to",e)}})]}):null]}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{className:"text-center",children:r&&r.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.created_by_name}),Object(T.jsx)("td",{children:Object(x.default)(new Date(e.created_at),"MMM dd yyyy H:mma")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(_.a,{className:"btn btn-light btn-sm",onClick:function(){ze(e.id)},children:Object(T.jsx)("i",{className:"bi bi-pencil"})}),Object(T.jsx)(_.a,{className:"btn btn-primary btn-sm",onClick:function(){Be(e.id)},children:Object(T.jsx)("i",{className:"bi bi-eye"})})]})]},e.id)}))})]})}),k?Object(T.jsx)(y.a,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){Ee(e.selected+1)},pageRangeDisplayed:5,pageCount:k,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination  flex-wrap",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",forcePage:N-1}):""]})})})})]})]})},ws=a(59),Ss=a(73),ks=a(76),Ts=a(75),Ds=function(e){Object(ks.a)(a,e);var t=Object(Ts.a)(a);function a(){return Object(ws.a)(this,a),t.apply(this,arguments)}return Object(Ss.a)(a,[{key:"render",value:function(){return Object(T.jsx)("footer",{className:"footer",children:Object(T.jsx)("div",{className:"container-fluid",children:Object(T.jsxs)("div",{className:"row text-muted",children:[Object(T.jsx)("div",{className:"col-6 text-start",children:Object(T.jsx)("p",{className:"mb-0",children:Object(T.jsx)("a",{className:"text-muted",href:"https://www.startuptech.uk/",target:"_blank",rel:"noreferrer",children:Object(T.jsx)("strong",{children:"\xa9 Startup Tech Consultancy LTD, UK"})})})}),Object(T.jsx)("div",{className:"col-6 text-end",children:Object(T.jsxs)("ul",{className:"list-inline",children:[Object(T.jsx)("li",{className:"list-inline-item",children:Object(T.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Support"})}),Object(T.jsx)("li",{className:"list-inline-item",children:Object(T.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Help Center"})}),Object(T.jsx)("li",{className:"list-inline-item",children:Object(T.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Privacy"})}),Object(T.jsx)("li",{className:"list-inline-item",children:Object(T.jsx)("a",{className:"text-muted",href:"https://adminkit.io/",target:"_blank",rel:"noreferrer",children:"Terms"})})]})})]})})})}}]),a}(n.a.Component),Fs=Ds;var Ms=function(e){var t=new h.a,a=Object(s.useState)({activeTab:"",tabs:["sales","sales return","purchases","purchase return","delivery notes","quotations","vendors","stores","customers","products","product category","expense category","expenses","analytics","customer deposits","customer withdrawals","capitals","dividents","ledger","accounts","users","signatures"]}),n=Object(o.a)(a,2),c=n[0],r=n[1];function i(t){r(Object(C.a)(Object(C.a)({},c),{},{activeTab:t})),window.innerWidth<=991.98&&e.parentCallback()}function d(e){return e===c.activeTab?"sidebar-item active":"sidebar-item"}return Object(T.jsx)("nav",{id:"sidebar",className:"sidebar "+e.isSidebarOpen+" js-sidebar",style:{overflowY:"scroll"},children:Object(T.jsxs)("div",{className:"sidebar-content js-simplebar",children:[Object(T.jsx)("div",{className:"sidebar-brand",children:Object(T.jsx)("span",{className:"align-middle",children:t.get("store_name")?t.get("store_name"):"Start POS"})}),Object(T.jsxs)("ul",{className:"sidebar-nav",children:[Object(T.jsx)("li",{onClick:function(){i(c.tabs[0])},className:d(c.tabs[0]),children:Object(T.jsxs)(l.b,{to:"/dashboard/sales",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Sales"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[1])},className:d(c.tabs[1]),children:Object(T.jsxs)(l.b,{to:"/dashboard/salesreturn",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Sales Return"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[2])},className:d(c.tabs[2]),children:Object(T.jsxs)(l.b,{to:"/dashboard/purchases",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Purchases"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[3])},className:d(c.tabs[3]),children:Object(T.jsxs)(l.b,{to:"/dashboard/purchasereturn",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Purchase Return"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[4])},className:d(c.tabs[4]),children:Object(T.jsxs)(l.b,{to:"/dashboard/delivery-notes",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-file-earmark-text"}),Object(T.jsx)("span",{className:"align-middle",children:"Delivery Notes"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[5])},className:d(c.tabs[5]),children:Object(T.jsxs)(l.b,{to:"/dashboard/quotations",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-file-earmark-text"}),Object(T.jsx)("span",{className:"align-middle",children:"Quotations"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[6])},className:d(c.tabs[6]),children:Object(T.jsxs)(l.b,{to:"/dashboard/vendors",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-shop"}),Object(T.jsx)("span",{className:"align-middle",children:"Vendors/Suppliers"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[7])},className:d(c.tabs[7]),children:Object(T.jsxs)(l.b,{to:"/dashboard/stores",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-shop"}),Object(T.jsx)("span",{className:"align-middle",children:"Stores"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[8])},className:d(c.tabs[8]),children:Object(T.jsxs)(l.b,{to:"/dashboard/customers",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-people"}),Object(T.jsx)("span",{className:"align-middle",children:"Customers"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[9])},className:d(c.tabs[9]),children:Object(T.jsxs)(l.b,{to:"/dashboard/products",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-cart"}),Object(T.jsx)("span",{className:"align-middle",children:"Products"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[10])},className:d(c.tabs[10]),children:Object(T.jsxs)(l.b,{to:"/dashboard/product_category",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-diagram-3"}),Object(T.jsx)("span",{className:"align-middle",children:"Product Category"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[11])},className:d(c.tabs[11]),children:Object(T.jsxs)(l.b,{to:"/dashboard/expense_category",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-diagram-3"}),Object(T.jsx)("span",{className:"align-middle",children:"Expense Category"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[12])},className:d(c.tabs[12]),children:Object(T.jsxs)(l.b,{to:"/dashboard/expenses",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Expenses"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[13])},className:d(c.tabs[13]),children:Object(T.jsxs)(l.b,{to:"/dashboard/analytics",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-graph-up"}),Object(T.jsx)("span",{className:"align-middle",children:"Analytics"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[14])},className:d(c.tabs[14]),children:Object(T.jsxs)(l.b,{to:"/dashboard/customer_deposits",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Customer Deposits"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[15])},className:d(c.tabs[15]),children:Object(T.jsxs)(l.b,{to:"/dashboard/customer_withdrawals",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Customer Drawings"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[16])},className:d(c.tabs[16]),children:Object(T.jsxs)(l.b,{to:"/dashboard/capitals",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Capitals"})]})}),Object(T.jsx)("li",{onClick:function(){i(c.tabs[17])},className:d(c.tabs[17]),children:Object(T.jsxs)(l.b,{to:"/dashboard/dividents",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-currency-dollar"}),Object(T.jsx)("span",{className:"align-middle",children:"Drawings"})]})}),"true"===t.get("admin")?Object(T.jsx)("li",{onClick:function(){i(c.tabs[18])},className:d(c.tabs[18]),children:Object(T.jsxs)(l.b,{to:"/dashboard/ledger",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-file-earmark-text"}),Object(T.jsx)("span",{className:"align-middle",children:"Ledger"})]})}):"","true"===t.get("admin")?Object(T.jsx)("li",{onClick:function(){i(c.tabs[19])},className:d(c.tabs[19]),children:Object(T.jsxs)(l.b,{to:"/dashboard/accounts",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-file-person"}),Object(T.jsx)("span",{className:"align-middle",children:"Accounts & Trial balances"})]})}):"","true"===t.get("admin")?Object(T.jsx)("li",{onClick:function(){i(c.tabs[20])},className:d(c.tabs[20]),children:Object(T.jsxs)(l.b,{to:"/dashboard/users",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-file-person"}),Object(T.jsx)("span",{className:"align-middle",children:"Users"})]})}):"",Object(T.jsx)("li",{onClick:function(){i(c.tabs[21])},className:d(c.tabs[21]),children:Object(T.jsxs)(l.b,{to:"/dashboard/signatures",className:"sidebar-link",children:[Object(T.jsx)("i",{className:"bi bi-fingerprint"}),Object(T.jsx)("span",{className:"align-middle",children:"Signatures"})]})})]}),Object(T.jsxs)("div",{className:"sidebar-cta",children:[Object(T.jsx)("div",{className:"sidebar-cta-content"}),"x"]})]})})};var Rs=function(e){var t=new h.a;return Object(T.jsxs)("nav",{className:"navbar navbar-expand navbar-light navbar-bg",children:[Object(T.jsx)("a",{href:"/",onClick:function(t){e.parentCallback(),t.preventDefault()},className:"sidebar-toggle js-sidebar-toggle collapsed",children:Object(T.jsx)("i",{className:"hamburger align-self-center"})}),Object(T.jsx)("div",{className:"navbar-collapse collapse ",children:Object(T.jsx)("ul",{className:"navbar-nav navbar-align",children:Object(T.jsxs)("li",{className:"nav-item dropdown",children:[Object(T.jsx)("a",{href:"/",className:"nav-icon dropdown-toggle d-inline-block d-sm-none","data-bs-toggle":"dropdown",children:Object(T.jsx)("i",{className:"align-middle","data-feather":"settings"})}),Object(T.jsxs)("a",{href:"/",className:"nav-link dropdown-toggle d-none d-sm-inline-block","data-bs-toggle":"dropdown",children:[t.get("user_photo")?Object(T.jsx)("img",{src:t.get("user_photo"),className:"avatar img-fluid rounded me-1",alt:"Charles Hall"}):null,Object(T.jsx)("span",{className:"text-dark",children:t.get("user_name")})]}),Object(T.jsx)("div",{className:"dropdown-menu dropdown-menu-end",children:Object(T.jsxs)("a",{href:"/",onClick:function(e){e.preventDefault(),t.remove("access_token",{path:"/"}),t.remove("user_id",{path:"/"}),t.remove("user_photo",{path:"/"}),t.remove("user_name",{path:"/"}),t.remove("store_name",{path:"/"}),t.remove("store_id",{path:"/"}),t.remove("admin",{path:"/"}),window.location="/"},className:"dropdown-item",children:[Object(T.jsx)("i",{className:"align-middle me-1","data-feather":"log-out"})," Log out"]})})]})})})]})},Ps=a.p+"static/media/avatar.432abd57.jpg";var As=function(){var e=Object(d.g)(),t=Object(s.useState)({}),a=Object(o.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(!1),i=Object(o.a)(r,2),l=i[0],j=i[1],p=new h.a;function x(){console.log("inside me");var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:p.get("access_token")}};fetch("/v1/me",t).then(function(){var t=Object(b.a)(u.a.mark((function t(a){var s,n,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(s=a.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=n,!t.t0){t.next=6;break}return t.next=5,a.json();case 5:t.t0=t.sent;case 6:if(r=t.t0,a.ok){t.next=10;break}return i=r&&r.errors,t.abrupt("return",Promise.reject(i));case 10:c({}),console.log("Response:"),console.log(r),p.set("user_name",r.result.name,{path:"/",expires:new Date(Date.now()+31536e6)}),p.set("user_id",r.result.id,{path:"/",expires:new Date(Date.now()+31536e6)}),!0===r.result.admin?p.set("admin",!0,{path:"/",expires:new Date(Date.now()+31536e6)}):p.set("admin",!1,{path:"/",expires:new Date(Date.now()+31536e6)}),r.result.photo&&p.set("user_photo",r.result.photo,{path:"/",expires:new Date(Date.now()+31536e6)}),e.push("/dashboard/sales");case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){j(!1),c(e)}))}return Object(s.useEffect)((function(){p.get("access_token")&&(window.location="/dashboard/sales")}),[p.get("admin")]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)("main",{className:"d-flex w-100",children:Object(T.jsx)("div",{className:"container d-flex flex-column",children:Object(T.jsx)("div",{className:"row vh-100",children:Object(T.jsx)("div",{className:"col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100",children:Object(T.jsxs)("div",{className:"d-table-cell align-middle",children:[Object(T.jsxs)("div",{className:"text-center mt-4",children:[Object(T.jsx)("h1",{className:"h2",children:"Start POS"}),Object(T.jsx)("p",{className:"lead",children:"Sign in to your account to continue"})]}),Object(T.jsx)("div",{className:"card",children:Object(T.jsx)("div",{className:"card-body",children:Object(T.jsxs)("div",{className:"m-sm-4",children:[Object(T.jsx)("div",{className:"text-center",children:Object(T.jsx)("img",{src:Ps,alt:"Charles Hall",className:"img-fluid rounded-circle",width:"132",height:"132"})}),Object(T.jsxs)("form",{onSubmit:function(e){console.log("Inside handle Submit"),e.preventDefault();var t={email:e.target[0].value,password:e.target[1].value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};j(!0),fetch("/v1/authorize",a).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return r=n&&n.errors,e.abrupt("return",Promise.reject(r));case 10:c({}),console.log("Response:"),console.log(n),i=n.result.code,console.log("inside access token"),fetch("/v1/accesstoken",{method:"POST",headers:{"Content-Type":"application/json",Authorization:i}}).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return r=n&&n.errors,e.abrupt("return",Promise.reject(r));case 10:c({}),console.log("Response:"),console.log(n),i=new h.a,(o=new Date(0)).setUTCSeconds(n.result.expires_at),i.set("access_token",n.result.access_token,{path:"/",expires:o}),x();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),c(e)}));case 14:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(!1),console.log("Inside catch"),console.log(e),c(e),console.error("There was an error!",e)}))},children:[Object(T.jsxs)("div",{className:"mb-3",children:[Object(T.jsx)("label",{className:"form-label",children:"Email"}),Object(T.jsx)("input",{className:"form-control form-control-lg",type:"email",name:"email",placeholder:"Enter your email"}),Object(T.jsx)("span",{style:{color:"red"},children:n.email})]}),Object(T.jsxs)("div",{className:"mb-3",children:[Object(T.jsxs)("label",{className:"form-label",children:["Password ",l]}),Object(T.jsx)("input",{className:"form-control form-control-lg",type:"password",name:"password",placeholder:"Enter your password"}),Object(T.jsx)("span",{style:{color:"red"},children:n.password})]}),Object(T.jsx)("div",{children:Object(T.jsx)("label",{className:"form-check"})}),Object(T.jsxs)("div",{className:"text-center mt-3",children:[l?Object(T.jsxs)("button",{className:"btn btn-lg btn-primary",type:"button",disabled:!0,children:[Object(T.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":!0}),"Logging In..."]}):null,l?null:Object(T.jsx)("button",{className:"btn btn-lg btn-primary",type:"submit",children:"Login"})]})]})]})})}),Object(T.jsx)(Fs,{})]})})})})}),"  "]}),"   "]})},Ls=a(148),Is=a(197),Es=(a(702),a(25)),zs=a(54),Us=Object(s.forwardRef)((function(e,t){Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&function(){var t=[{type:"datetime",label:"Time"}];e.columns.sales&&t.push({type:"number",label:"Sales"});e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"});e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"});e.columns.unpaidSales&&t.push({type:"number",label:"Credit Sales"});e.columns.expense&&t.push({type:"number",label:"Expense"});e.columns.purchase&&t.push({type:"number",label:"Purchase"});e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"});e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"});e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"});e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"});e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t);if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var s,n=Object(Es.a)(e.allOrders);try{for(n.s();!(s=n.n()).done;){var i=s.value,o=[new Date(i.date)];e.columns.sales&&o.push(parseFloat(i.net_total.toFixed(2))),e.columns.salesProfit&&o.push(parseFloat(i.net_profit.toFixed(2))),e.columns.paidSales&&o.push(parseFloat(i.total_payment_received.toFixed(2))),e.columns.unpaidSales&&o.push(parseFloat(i.balance_amount.toFixed(2))),e.columns.expense&&o.push(void 0),e.columns.purchase&&o.push(void 0),e.columns.salesReturn&&o.push(void 0),e.columns.salesReturnProfit&&o.push(void 0),e.columns.salesReturnLoss&&o.push(void 0),e.columns.purchaseReturn&&o.push(void 0),e.columns.loss&&o.push(parseFloat(i.loss.toFixed(2))),a.push(o)}}catch(R){n.e(R)}finally{n.f()}}if(e.columns.expense){var l,d=Object(Es.a)(e.allExpenses);try{for(d.s();!(l=d.n()).done;){var j=l.value,u=[new Date(j.date)];e.columns.sales&&u.push(void 0),e.columns.salesProfit&&u.push(void 0),e.columns.expense&&u.push(parseFloat(j.amount.toFixed(2))),e.columns.purchase&&u.push(void 0),e.columns.salesReturn&&u.push(void 0),e.columns.salesReturnProfit&&u.push(void 0),e.columns.salesReturnLoss&&u.push(void 0),e.columns.purchaseReturn&&u.push(void 0),e.columns.loss&&u.push(void 0),a.push(u)}}catch(R){d.e(R)}finally{d.f()}}if(e.columns.purchase){var b,h=Object(Es.a)(e.allPurchases);try{for(h.s();!(b=h.n()).done;){var p=b.value,x=[new Date(p.date)];e.columns.sales&&x.push(void 0),e.columns.salesProfit&&x.push(void 0),e.columns.expense&&x.push(void 0),e.columns.purchase&&x.push(parseFloat(p.net_total.toFixed(2))),e.columns.salesReturn&&x.push(void 0),e.columns.salesReturnProfit&&x.push(void 0),e.columns.salesReturnLoss&&x.push(void 0),e.columns.purchaseReturn&&x.push(void 0),e.columns.loss&&x.push(void 0),a.push(x)}}catch(R){h.e(R)}finally{h.f()}}if(e.columns.salesReturn){var m,O=Object(Es.a)(e.allSalesReturns);try{for(O.s();!(m=O.n()).done;){var f=m.value,_=[new Date(f.date)];e.columns.sales&&_.push(void 0),e.columns.salesProfit&&_.push(void 0),e.columns.expense&&_.push(void 0),e.columns.purchase&&_.push(void 0),e.columns.salesReturn&&_.push(parseFloat(f.net_total.toFixed(2))),e.columns.salesReturnProfit&&_.push(void 0),e.columns.salesReturnLoss&&_.push(void 0),e.columns.purchaseReturn&&_.push(void 0),e.columns.loss&&_.push(void 0),a.push(_)}}catch(R){O.e(R)}finally{O.f()}}if(e.columns.salesReturnProfit){var g,v=Object(Es.a)(e.allSalesReturns);try{for(v.s();!(g=v.n()).done;){var y=g.value,N=[new Date(y.date)];e.columns.sales&&N.push(void 0),e.columns.salesProfit&&N.push(void 0),e.columns.expense&&N.push(void 0),e.columns.purchase&&N.push(void 0),e.columns.salesReturn&&N.push(void 0),e.columns.salesReturnProfit&&N.push(parseFloat(y.net_profit.toFixed(2))),e.columns.salesReturnLoss&&N.push(void 0),e.columns.purchaseReturn&&N.push(void 0),e.columns.loss&&N.push(void 0),a.push(N)}}catch(R){v.e(R)}finally{v.f()}}if(e.columns.salesReturnLoss){var C,w=Object(Es.a)(e.allSalesReturns);try{for(w.s();!(C=w.n()).done;){var S=C.value,k=[new Date(S.date)];e.columns.sales&&k.push(void 0),e.columns.salesProfit&&k.push(void 0),e.columns.expense&&k.push(void 0),e.columns.purchase&&k.push(void 0),e.columns.salesReturn&&k.push(void 0),e.columns.salesReturnProfit&&k.push(void 0),e.columns.salesReturnLoss&&k.push(parseFloat(S.loss.toFixed(2))),e.columns.purchaseReturn&&k.push(void 0),e.columns.loss&&k.push(void 0),a.push(k)}}catch(R){w.e(R)}finally{w.f()}}if(e.columns.purchaseReturn){var T,D=Object(Es.a)(e.allPurchaseReturns);try{for(D.s();!(T=D.n()).done;){var F=T.value,M=[new Date(F.date)];e.columns.sales&&M.push(void 0),e.columns.salesProfit&&M.push(void 0),e.columns.expense&&M.push(void 0),e.columns.purchase&&M.push(void 0),e.columns.salesReturn&&M.push(void 0),e.columns.salesReturnProfit&&M.push(void 0),e.columns.salesReturnLoss&&M.push(void 0),e.columns.purchaseReturn&&M.push(parseFloat(F.net_total.toFixed(2))),e.columns.loss&&M.push(void 0),a.push(M)}}catch(R){D.e(R)}finally{D.f()}}c=a,r(a)}()}}}));var a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1];var i=Object(s.useState)({title:"Sales",displayExactValues:!0,subtitle:"(SAR)",legend:{position:"bottom"},hAxis:{title:"Time"},vAxis:{title:"Amount(SAR)"},series:{}}),l=Object(o.a)(i,2),d=l[0];l[1];Object(s.useEffect)((function(){console.log("Inside useEffect")}),[]);Object(s.useRef)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"container-fluid p-0",children:[Object(T.jsx)("div",{className:"row",children:c&&c.length>0?Object(T.jsx)(zs.a,{chartType:"AnnotationChart",width:"100%",height:"400px",data:c,options:d,chartEvents:[{eventName:"ready",callback:function(e){var t=e.chartWrapper,a=e.google,s=t.getChart();a.visualization.events.addListener(s,"select",(function(e){console.log(e);var t=s.getSelection();console.log("selection:",t)}))}}]}):""}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})})})),Bs=Object(s.memo)(Us),qs=Object(s.forwardRef)((function(e,t){new h.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){M(),e.allOrders.length>0&&R()}}}));var a=Object(s.useState)([{label:"2024",value:2024},{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0],d=(i[1],Object(s.useState)([])),j=Object(o.a)(d,2),u=j[0],b=j[1],p=Object(s.useState)([]),x=Object(o.a)(p,2),m=x[0],O=x[1],f=Object(s.useState)((new Date).getDate()),_=Object(o.a)(f,2),g=_[0],v=_[1],y=Object(s.useState)((new Date).getMonth()+1),N=Object(o.a)(y,2),C=N[0],w=N[1],S=Object(s.useState)((new Date).getFullYear()),k=Object(o.a)(S,2),D=k[0],F=k[1];function M(){for(var e=new Date(D,C,0).getDate(),t=[],a=1;a<=e;a++)t.push({label:a,value:a});u=t,b(t)}function R(){var t=[{type:"datetime",label:"Time"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"Credit Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];if(t.length>1&&a.push(t),e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var s,n=Object(Es.a)(e.allOrders);try{for(n.s();!(s=n.n()).done;){var c=s.value;if(new Date(c.date).getMonth()+1==C&&new Date(c.date).getFullYear()==D&&new Date(c.date).getDate()==g){var r=[new Date(c.date)];e.columns.sales&&r.push(parseFloat(c.net_total.toFixed(2))),e.columns.salesProfit&&r.push(parseFloat(c.net_profit.toFixed(2))),e.columns.paidSales&&r.push(parseFloat(c.total_payment_received.toFixed(2))),e.columns.unpaidSales&&r.push(parseFloat(c.balance_amount.toFixed(2))),e.columns.expense&&r.push(void 0),e.columns.purchase&&r.push(void 0),e.columns.salesReturn&&r.push(void 0),e.columns.salesReturnProfit&&r.push(void 0),e.columns.salesReturnLoss&&r.push(void 0),e.columns.purchaseReturn&&r.push(void 0),e.columns.loss&&r.push(parseFloat(c.loss.toFixed(2))),a.push(r)}}}catch(S){n.e(S)}finally{n.f()}}if(e.columns.expense){var i,o=Object(Es.a)(e.allExpenses);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(new Date(l.date).getMonth()+1==C&&new Date(l.date).getFullYear()==D&&new Date(l.date).getDate()==g){var d=[new Date(l.date)];e.columns.sales&&d.push(void 0),e.columns.salesProfit&&d.push(void 0),e.columns.sales&&d.push(void 0),e.columns.salesProfit&&d.push(void 0),e.columns.expense&&d.push(parseFloat(l.amount.toFixed(2))),e.columns.purchase&&d.push(void 0),e.columns.salesReturn&&d.push(void 0),e.columns.salesReturnProfit&&d.push(void 0),e.columns.salesReturnLoss&&d.push(void 0),e.columns.purchaseReturn&&d.push(void 0),e.columns.loss&&d.push(void 0),a.push(d)}}}catch(S){o.e(S)}finally{o.f()}}if(e.columns.purchase){var j,u=Object(Es.a)(e.allPurchases);try{for(u.s();!(j=u.n()).done;){var b=j.value;if(new Date(b.date).getMonth()+1==C&&new Date(b.date).getFullYear()==D&&new Date(b.date).getDate()==g){var h=[new Date(b.date)];e.columns.sales&&h.push(void 0),e.columns.salesProfit&&h.push(void 0),e.columns.sales&&h.push(void 0),e.columns.salesProfit&&h.push(void 0),e.columns.expense&&h.push(void 0),e.columns.purchase&&h.push(parseFloat(b.net_total.toFixed(2))),e.columns.salesReturn&&h.push(void 0),e.columns.salesReturnProfit&&h.push(void 0),e.columns.salesReturnLoss&&h.push(void 0),e.columns.purchaseReturn&&h.push(void 0),e.columns.loss&&h.push(void 0),a.push(h)}}}catch(S){u.e(S)}finally{u.f()}}if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var p,x=Object(Es.a)(e.allSalesReturns);try{for(x.s();!(p=x.n()).done;){var f=p.value;if(new Date(f.date).getMonth()+1==C&&new Date(f.date).getFullYear()==D&&new Date(f.date).getDate()==g){var _=[new Date(f.date)];e.columns.sales&&_.push(void 0),e.columns.salesProfit&&_.push(void 0),e.columns.sales&&_.push(void 0),e.columns.salesProfit&&_.push(void 0),e.columns.expense&&_.push(void 0),e.columns.purchase&&_.push(void 0),e.columns.salesReturn&&_.push(parseFloat(f.net_total.toFixed(2))),e.columns.salesReturnProfit&&_.push(parseFloat(f.net_profit.toFixed(2))),e.columns.salesReturnLoss&&_.push(parseFloat(f.loss.toFixed(2))),e.columns.purchaseReturn&&_.push(void 0),e.columns.loss&&_.push(void 0),a.push(_)}}}catch(S){x.e(S)}finally{x.f()}}if(e.columns.purchaseReturn){var v,y=Object(Es.a)(e.allPurchaseReturns);try{for(y.s();!(v=y.n()).done;){var N=v.value;if(new Date(N.date).getMonth()+1==C&&new Date(N.date).getFullYear()==D&&new Date(N.date).getDate()==g){var w=[new Date(N.date)];e.columns.sales&&w.push(void 0),e.columns.salesProfit&&w.push(void 0),e.columns.sales&&w.push(void 0),e.columns.salesProfit&&w.push(void 0),e.columns.expense&&w.push(void 0),e.columns.purchase&&w.push(void 0),e.columns.salesReturn&&w.push(void 0),e.columns.salesReturnProfit&&w.push(void 0),e.columns.salesReturnLoss&&w.push(void 0),e.columns.purchaseReturn&&w.push(parseFloat(N.net_total.toFixed(2))),e.columns.loss&&w.push(void 0),a.push(w)}}}catch(S){y.e(S)}finally{y.f()}}m=a,O(a)}var P=Object(s.useState)({title:"",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Time"},vAxis:{title:"Amount(SAR)"},series:{}}),A=Object(o.a)(P,2),L=A[0];A[1];return Object(s.useEffect)((function(){}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsxs)("div",{className:"row",children:[Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Year"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:D,onChange:function(e){e.target.value&&(D=parseInt(e.target.value),F(parseInt(e.target.value)),R())},className:"form-control",children:c.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Month"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:C,onChange:function(e){e.target.value&&(C=parseInt(e.target.value),w(parseInt(e.target.value)),M(),R())},className:"form-control",children:l.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Date"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:g,onChange:function(e){e.target.value&&(g=parseInt(e.target.value),v(parseInt(e.target.value)),R())},className:"form-control",children:u.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),m&&m.length>0?Object(T.jsx)(zs.a,{chartType:"LineChart",width:"100%",height:"400px",data:m,options:L}):""]})})})})),Vs=Object(s.forwardRef)((function(e,t){new h.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){y()}}}));var a=Object(s.useState)([{label:"2024",value:2024},{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0],d=(i[1],Object(s.useState)([])),j=Object(o.a)(d,2),u=j[0],b=j[1],p=Object(s.useState)((new Date).getMonth()+1),x=Object(o.a)(p,2),m=x[0],O=x[1],f=Object(s.useState)((new Date).getFullYear()),_=Object(o.a)(f,2),g=_[0],v=_[1];function y(){var t=[{type:"date",label:"Date"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"Credit Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t),console.log("selectedMonth:",m),console.log("selectedYear:",g);var s=new Date(g,m,0).getDate();console.log("lastDay:",s);for(var n=1;n<=s;n++){var c=0,r=0,i=0,o=0,l=0;if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var d,j=Object(Es.a)(e.allOrders);try{for(j.s();!(d=j.n()).done;){var h=d.value;new Date(h.date).getMonth()+1==m&&new Date(h.date).getFullYear()==g&&new Date(h.date).getDate()==n&&(c+=parseFloat(h.net_total),o+=parseFloat(h.net_profit),r+=parseFloat(h.total_payment_received),i+=parseFloat(h.balance_amount),l+=parseFloat(h.loss))}}catch(L){j.e(L)}finally{j.f()}}var p=0;if(e.columns.expense){var x,O=Object(Es.a)(e.allExpenses);try{for(O.s();!(x=O.n()).done;){var f=x.value;new Date(f.date).getMonth()+1==m&&new Date(f.date).getFullYear()==g&&new Date(f.date).getDate()==n&&(p+=parseFloat(f.amount))}}catch(L){O.e(L)}finally{O.f()}}var _=0;if(e.columns.purchase){var v,y=Object(Es.a)(e.allPurchases);try{for(y.s();!(v=y.n()).done;){var N=v.value;new Date(N.date).getMonth()+1==m&&new Date(N.date).getFullYear()==g&&new Date(N.date).getDate()==n&&(_+=parseFloat(N.net_total))}}catch(L){y.e(L)}finally{y.f()}}var C=0,w=0,S=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var k,T=Object(Es.a)(e.allSalesReturns);try{for(T.s();!(k=T.n()).done;){var D=k.value;new Date(D.date).getMonth()+1==m&&new Date(D.date).getFullYear()==g&&new Date(D.date).getDate()==n&&(C+=parseFloat(D.net_total),w+=parseFloat(D.net_profit),S+=parseFloat(D.loss))}}catch(L){T.e(L)}finally{T.f()}}var F=0;if(e.columns.purchaseReturn){var M,R=Object(Es.a)(e.allPurchaseReturns);try{for(R.s();!(M=R.n()).done;){var P=M.value;new Date(P.date).getMonth()+1==m&&new Date(P.date).getFullYear()==g&&new Date(P.date).getDate()==n&&(F+=parseFloat(P.net_total))}}catch(L){R.e(L)}finally{R.f()}}var A=[new Date(g,m-1,n)];e.columns.sales&&A.push(parseFloat(c.toFixed(2))),e.columns.salesProfit&&A.push(parseFloat(o.toFixed(2))),e.columns.paidSales&&A.push(parseFloat(r.toFixed(2))),e.columns.unpaidSales&&A.push(parseFloat(i.toFixed(2))),e.columns.expense&&A.push(parseFloat(p.toFixed(2))),e.columns.purchase&&A.push(parseFloat(_.toFixed(2))),e.columns.salesReturn&&A.push(parseFloat(C.toFixed(2))),e.columns.salesReturnProfit&&A.push(parseFloat(w.toFixed(2))),e.columns.salesReturnLoss&&A.push(parseFloat(S.toFixed(2))),e.columns.purchaseReturn&&A.push(parseFloat(F.toFixed(2))),e.columns.loss&&A.push(parseFloat(l.toFixed(2))),A.length>1&&a.push(A)}u=a,b(a)}var N=Object(s.useState)({title:"",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Date"},vAxis:{title:"Amount(SAR)"},series:{}}),C=Object(o.a)(N,2),w=C[0];C[1];return Object(s.useEffect)((function(){}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsxs)("div",{className:"row",children:[Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Year"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:g,onChange:function(e){e.target.value&&(g=parseInt(e.target.value),v(parseInt(e.target.value)),y())},className:"form-control",children:c.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Month"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:m,onChange:function(e){e.target.value&&(m=parseInt(e.target.value),O(parseInt(e.target.value)),y())},className:"form-control",children:l.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),u&&u.length>0?Object(T.jsx)(zs.a,{chartType:"LineChart",width:"100%",height:"400px",data:u,options:w}):""]})})})})),Hs=Object(s.forwardRef)((function(e,t){new h.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&_()}}}));var a=Object(s.useState)([{label:"2024",value:2024},{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021},{label:"2020",value:2020}]),n=Object(o.a)(a,2),c=n[0],r=(n[1],Object(s.useState)([{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JULY",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}])),i=Object(o.a)(r,2),l=i[0];i[1];function d(e){var t,a=Object(Es.a)(l);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.value==e)return s.label}}catch(n){a.e(n)}finally{a.f()}}var j=Object(s.useState)([]),u=Object(o.a)(j,2),b=u[0],p=u[1],x=Object(s.useState)((new Date).getFullYear()),m=Object(o.a)(x,2),O=m[0],f=m[1];function _(){var t=[{type:"string",label:"Month"}];e.columns.sales&&t.push({type:"number",label:"Sales"}),e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"}),e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"}),e.columns.unpaidSales&&t.push({type:"number",label:"Credit Sales"}),e.columns.expense&&t.push({type:"number",label:"Expense"}),e.columns.purchase&&t.push({type:"number",label:"Purchase"}),e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"}),e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"}),e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"}),e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"}),e.columns.loss&&t.push({type:"number",label:"Loss"});var a=[];t.length>1&&a.push(t),console.log("selectedYear:",O);for(var s=1;s<=12;s++){var n=0,c=0,r=0,i=0,o=0;if(e.columns.sales||e.columns.salesProfit||e.columns.loss||e.columns.paidSales||e.columns.unpaidSales){var l,j=Object(Es.a)(e.allOrders);try{for(j.s();!(l=j.n()).done;){var u=l.value;new Date(u.date).getMonth()+1==s&&new Date(u.date).getFullYear()==O&&(n+=parseFloat(u.net_total),c+=parseFloat(u.net_profit),r+=parseFloat(u.total_payment_received),i+=parseFloat(u.balance_amount),o+=parseFloat(u.loss))}}catch(A){j.e(A)}finally{j.f()}}var h=0;if(e.columns.expense){var x,m=Object(Es.a)(e.allExpenses);try{for(m.s();!(x=m.n()).done;){var f=x.value;new Date(f.date).getMonth()+1==s&&new Date(f.date).getFullYear()==O&&(h+=parseFloat(f.amount))}}catch(A){m.e(A)}finally{m.f()}}var _=0;if(e.columns.purchase){var g,v=Object(Es.a)(e.allPurchases);try{for(v.s();!(g=v.n()).done;){var y=g.value;new Date(y.date).getMonth()+1==s&&new Date(y.date).getFullYear()==O&&(_+=parseFloat(y.net_total))}}catch(A){v.e(A)}finally{v.f()}}var N=0,C=0,w=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var S,k=Object(Es.a)(e.allSalesReturns);try{for(k.s();!(S=k.n()).done;){var T=S.value;new Date(T.date).getMonth()+1==s&&new Date(T.date).getFullYear()==O&&(N+=parseFloat(T.net_total),C+=parseFloat(T.net_profit),w+=parseFloat(T.loss))}}catch(A){k.e(A)}finally{k.f()}}var D=0;if(e.columns.purchaseReturn){var F,M=Object(Es.a)(e.allPurchaseReturns);try{for(M.s();!(F=M.n()).done;){var R=F.value;new Date(R.date).getMonth()+1==s&&new Date(R.date).getFullYear()==O&&(D+=parseFloat(R.net_total))}}catch(A){M.e(A)}finally{M.f()}}var P=[d(s)];e.columns.sales&&P.push(parseFloat(n.toFixed(2))),e.columns.salesProfit&&P.push(parseFloat(c.toFixed(2))),e.columns.paidSales&&P.push(parseFloat(r.toFixed(2))),e.columns.unpaidSales&&P.push(parseFloat(i.toFixed(2))),e.columns.expense&&P.push(parseFloat(h.toFixed(2))),e.columns.purchase&&P.push(parseFloat(_.toFixed(2))),e.columns.salesReturn&&P.push(parseFloat(N.toFixed(2))),e.columns.salesReturnProfit&&P.push(parseFloat(C.toFixed(2))),e.columns.salesReturnLoss&&P.push(parseFloat(w.toFixed(2))),e.columns.purchaseReturn&&P.push(parseFloat(D.toFixed(2))),e.columns.loss&&P.push(parseFloat(o.toFixed(2))),P.length>1&&a.push(P)}b=a,p(a)}var g=Object(s.useState)({title:"Sales",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Month"},vAxis:{title:"Amount(SAR)"},series:{}}),v=Object(o.a)(g,2),y=v[0];v[1];return Object(s.useEffect)((function(){}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsxs)("div",{className:"row",children:[Object(T.jsxs)("div",{className:"col-md-2",children:[Object(T.jsx)("label",{className:"form-label",children:"Year"}),Object(T.jsx)("div",{className:"input-group mb-3",children:Object(T.jsx)("select",{value:O,onChange:function(e){e.target.value&&(O=parseInt(e.target.value),f(parseInt(e.target.value)),_())},className:"form-control",children:c.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label})}))})})]}),b&&b.length>0?Object(T.jsx)(zs.a,{chartType:"LineChart",width:"100%",height:"400px",data:b,options:y}):""]})})})})),Gs=Object(s.forwardRef)((function(e,t){new h.a;Object(s.useImperativeHandle)(t,(function(){return{init:function(){e.allOrders.length>0&&function(){var t=[{type:"string",label:"Year"}];e.columns.sales&&t.push({type:"number",label:"Sales"});e.columns.salesProfit&&t.push({type:"number",label:"Sales Profit"});e.columns.paidSales&&t.push({type:"number",label:"Paid Sales"});e.columns.unpaidSales&&t.push({type:"number",label:"Credit Sales"});e.columns.expense&&t.push({type:"number",label:"Expense"});e.columns.purchase&&t.push({type:"number",label:"Purchase"});e.columns.salesReturn&&t.push({type:"number",label:"Sales Return"});e.columns.salesReturnProfit&&t.push({type:"number",label:"Sales Return Profit"});e.columns.salesReturnLoss&&t.push({type:"number",label:"Sales Return Loss"});e.columns.purchaseReturn&&t.push({type:"number",label:"Purchase Return"});e.columns.loss&&t.push({type:"number",label:"Sales Loss"});var a=[];t.length>1&&a.push(t);for(var s=2020,n=(new Date).getFullYear(),c=s;c<=parseInt(n);c++){var r=0,o=0,d=0,j=0,u=0;if(e.columns.sales||e.columns.salesProfit||e.columns.paidSales||e.columns.unpaidSales||e.columns.loss){var b,h=Object(Es.a)(e.allOrders);try{for(h.s();!(b=h.n()).done;){var p=b.value;parseInt(new Date(p.date).getFullYear())===c&&(r+=parseFloat(p.net_total),o+=parseFloat(p.net_profit),d+=parseFloat(p.total_payment_received),j+=parseFloat(p.balance_amount),u+=parseFloat(p.loss))}}catch(A){h.e(A)}finally{h.f()}}var x=0;if(e.columns.expense){var m,O=Object(Es.a)(e.allExpenses);try{for(O.s();!(m=O.n()).done;){var f=m.value;parseInt(new Date(f.date).getFullYear())===c&&(x+=parseFloat(f.amount))}}catch(A){O.e(A)}finally{O.f()}}var _=0;if(e.columns.purchase){var g,v=Object(Es.a)(e.allPurchases);try{for(v.s();!(g=v.n()).done;){var y=g.value;parseInt(new Date(y.date).getFullYear())===c&&(_+=parseFloat(y.net_total))}}catch(A){v.e(A)}finally{v.f()}}var N=0,C=0,w=0;if(e.columns.salesReturn||e.columns.salesReturnProfit||e.columns.salesReturnLoss){var S,k=Object(Es.a)(e.allSalesReturns);try{for(k.s();!(S=k.n()).done;){var T=S.value;parseInt(new Date(T.date).getFullYear())===c&&(N+=parseFloat(T.net_total),C+=parseFloat(T.net_profit),w+=parseFloat(T.loss))}}catch(A){k.e(A)}finally{k.f()}}var D=0;if(e.columns.purchaseReturn){var F,M=Object(Es.a)(e.allPurchaseReturns);try{for(M.s();!(F=M.n()).done;){var R=F.value;parseInt(new Date(R.date).getFullYear())===c&&(D+=parseFloat(R.net_total))}}catch(A){M.e(A)}finally{M.f()}}var P=[c.toString()];e.columns.sales&&P.push(parseFloat(r.toFixed(2))),e.columns.salesProfit&&P.push(parseFloat(o.toFixed(2))),e.columns.paidSales&&P.push(parseFloat(d.toFixed(2))),e.columns.unpaidSales&&P.push(parseFloat(j.toFixed(2))),e.columns.expense&&P.push(parseFloat(x.toFixed(2))),e.columns.purchase&&P.push(parseFloat(_.toFixed(2))),e.columns.salesReturn&&P.push(parseFloat(N.toFixed(2))),e.columns.salesReturnProfit&&P.push(parseFloat(C.toFixed(2))),e.columns.salesReturnLoss&&P.push(parseFloat(w.toFixed(2))),e.columns.purchaseReturn&&P.push(parseFloat(D.toFixed(2))),e.columns.loss&&P.push(parseFloat(u.toFixed(2))),P.length>1&&a.push(P)}i=a,l(a)}()}}}));var a=Object(s.useState)([{label:"2024",value:2024},{label:"2023",value:2023},{label:"2022",value:2022},{label:"2021",value:2021}]),n=Object(o.a)(a,2),c=(n[0],n[1],Object(s.useState)([])),r=Object(o.a)(c,2),i=r[0],l=r[1];var d=Object(s.useState)({title:"Sales",subtitle:"(SAR)",legend:{position:"right"},hAxis:{title:"Year"},vAxis:{title:"Amount(SAR)"},series:{}}),j=Object(o.a)(d,2),u=j[0];j[1];return Object(s.useEffect)((function(){}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"container-fluid p-0",children:Object(T.jsx)("div",{className:"row",children:i&&i.length>0?Object(T.jsx)(zs.a,{chartType:"LineChart",width:"100%",height:"400px",data:i,options:u}):""})})})})),Ws=Object(s.forwardRef)((function(e,t){var a=new h.a,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],p=d[1],x=Object(s.useState)([]),m=Object(o.a)(x,2),O=m[0],f=m[1],_=Object(s.useState)([]),g=Object(o.a)(_,2),v=g[0],y=g[1],N=Object(s.useState)([]),w=Object(o.a)(N,2),S=w[0],k=w[1],D=Object(s.useState)({}),F=Object(o.a)(D,2),M=F[0],R=F[1],P=Object(s.useState)(!1),A=Object(o.a)(P,2),L=(A[0],A[1]),I=Object(s.useState)("date"),E=Object(o.a)(I,2),z=E[0],U=(E[1],Object(s.useState)("-")),B=Object(o.a)(U,2),q=B[0],V=(B[1],Object(s.useState)(!1)),H=Object(o.a)(V,2),G=(H[0],H[1]);function W(e){return Object.keys(e).map((function(t){return"search[".concat(t,"]=").concat(e[t])})).join("&")}function Q(e,t){return Z.apply(this,arguments)}function Z(){return Z=Object(b.a)(u.a.mark((function e(t,s){var n,c,r,i,o,l,d,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a.get("access_token")}},c=s,a.get("store_id")&&(M.store_id=a.get("store_id")),r=new Date,i=r.getTimezoneOffset(),console.log("Timezone:",parseFloat(i/60)),M.timezone_offset=parseFloat(i/60),R(M),""!==(o=W(M))&&(o="&"+o),l=1e3,d=[],j=1;case 13:return!0,L(!0),e.next=18,fetch("/v1/"+t+"?"+c+o+"&sort="+q+z+"&page="+j+"&limit="+l,n).then(function(){var e=Object(b.a)(u.a.mark((function e(t){var a,s,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(a=t.headers.get("content-type"))||void 0===a?void 0:a.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(n=e.t0,t.ok){e.next=10;break}return c=n&&n.errors,e.abrupt("return",Promise.reject(c));case 10:if(G(!1),n.result&&0!==n.result.length){e.next=13;break}return e.abrupt("return",[]);case 13:return e.abrupt("return",n.result);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e),[]}));case 18:if(0!==(h=e.sent).length){e.next=21;break}return e.abrupt("break",25);case 21:d=d.concat(h),j++;case 23:e.next=13;break;case 25:return!1,L(!1),e.abrupt("return",d);case 28:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}Object(s.useEffect)(Object(b.a)(u.a.mark((function e(){var t,a,s,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="select=date,net_total,total_payment_received,balance_amount,payment_status,net_profit,loss",e.next=3,Q("order",t);case 3:return a=e.sent,t="select=date,amount",e.next=7,Q("expense",t);case 7:return s=e.sent,t="select=date,net_total",e.next=11,Q("purchase",t);case 11:return n=e.sent,t="select=date,net_total,net_profit,loss",e.next=15,Q("sales-return",t);case 15:return c=e.sent,t="select=date,net_total",e.next=19,Q("purchase-return",t);case 19:o=e.sent,r=a,i(a),j=s,p(s),O=n,f(n),v=c,y(c),console.log("allSalesReturns:",v),S=o,k(o),console.log("allPurchaseReturns:",S),X(),$(),ae(),ce(),oe();case 37:case"end":return e.stop()}}),e)}))),[]);var K=Object(s.useRef)();function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K.current&&K.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=Object(s.useRef)();function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J.current&&J.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=Object(s.useRef)();function ae(){return se.apply(this,arguments)}function se(){return(se=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te.current&&te.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=Object(s.useRef)();function ce(){return re.apply(this,arguments)}function re(){return(re=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne.current&&ne.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=Object(s.useRef)();function oe(){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie.current&&ie.current.init();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useRef)();var de=Object(s.useState)({all:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},hourly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},daily:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},monthly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1},yearly:{sales:!0,salesProfit:!1,paidSales:!1,unpaidSales:!1,expense:!1,purchase:!1,salesReturn:!1,salesReturnProfit:!1,salesReturnLoss:!1,purchaseReturn:!1,loss:!1}}),je=Object(o.a)(de,2),ue=je[0],be=je[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("h2",{children:[Object(T.jsx)("input",{type:"checkbox",checked:ue.all.sales,onChange:function(e){ue.all.sales=!ue.all.sales,be(Object(C.a)({},ue)),X()}}),"Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.salesProfit,onChange:function(e){ue.all.salesProfit=!ue.all.salesProfit,be(Object(C.a)({},ue)),X()}}),"Sales Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.paidSales,onChange:function(e){ue.all.paidSales=!ue.all.paidSales,be(Object(C.a)({},ue)),X()}}),"Paid Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.unpaidSales,onChange:function(e){ue.all.unpaidSales=!ue.all.unpaidSales,be(Object(C.a)({},ue)),X()}}),"Credit Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.expense,onChange:function(e){ue.all.expense=!ue.all.expense,be(Object(C.a)({},ue)),X()}}),"Expense vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.purchase,onChange:function(e){ue.all.purchase=!ue.all.purchase,be(Object(C.a)({},ue)),X()}}),"Purchase vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.salesReturn,onChange:function(e){ue.all.salesReturn=!ue.all.salesReturn,be(Object(C.a)({},ue)),X()}}),"Sales Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.salesReturnProfit,onChange:function(e){ue.all.salesReturnProfit=!ue.all.salesReturnProfit,be(Object(C.a)({},ue)),X()}}),"Sales Return Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.salesReturnLoss,onChange:function(e){ue.all.salesReturnLoss=!ue.all.salesReturnLoss,be(Object(C.a)({},ue)),X()}}),"Sales Return Loss vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.purchaseReturn,onChange:function(e){ue.all.purchaseReturn=!ue.all.purchaseReturn,be(Object(C.a)({},ue)),X()}}),"Purchase Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.all.loss,onChange:function(e){ue.all.loss=!ue.all.loss,be(Object(C.a)({},ue)),X()}}),"Sales Loss"]}),Object(T.jsx)(Bs,{ref:K,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:v,allPurchaseReturns:S,columns:ue.all}),Object(T.jsx)("hr",{}),Object(T.jsxs)("h2",{children:["Hourly \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.sales,onChange:function(e){ue.hourly.sales=!ue.hourly.sales,be(Object(C.a)({},ue)),$()}}),"Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.salesProfit,onChange:function(e){ue.hourly.salesProfit=!ue.hourly.salesProfit,be(Object(C.a)({},ue)),$()}}),"Sales Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.paidSales,onChange:function(e){ue.hourly.paidSales=!ue.hourly.paidSales,be(Object(C.a)({},ue)),$()}}),"Paid Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.unpaidSales,onChange:function(e){ue.hourly.unpaidSales=!ue.hourly.unpaidSales,be(Object(C.a)({},ue)),$()}}),"Credit Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.expense,onChange:function(e){ue.hourly.expense=!ue.hourly.expense,be(Object(C.a)({},ue)),$()}}),"Expense vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.purchase,onChange:function(e){ue.hourly.purchase=!ue.hourly.purchase,be(Object(C.a)({},ue)),$()}}),"Purchase vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturn,onChange:function(e){ue.hourly.salesReturn=!ue.hourly.salesReturn,be(Object(C.a)({},ue)),$()}}),"Sales Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturnProfit,onChange:function(e){ue.hourly.salesReturnProfit=!ue.hourly.salesReturnProfit,be(Object(C.a)({},ue)),$()}}),"Sales Return Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.salesReturnLoss,onChange:function(e){ue.hourly.salesReturnLoss=!ue.hourly.salesReturnLoss,be(Object(C.a)({},ue)),$()}}),"Sales Return Loss vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.purchaseReturn,onChange:function(e){ue.hourly.purchaseReturn=!ue.hourly.purchaseReturn,be(Object(C.a)({},ue)),$()}}),"Purchase Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.hourly.loss,onChange:function(e){ue.hourly.loss=!ue.hourly.loss,be(Object(C.a)({},ue)),$()}}),"Sales Loss"]}),Object(T.jsx)(qs,{ref:J,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:v,allPurchaseReturns:S,columns:ue.hourly}),Object(T.jsx)("hr",{}),Object(T.jsxs)("h2",{children:["Daily \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.sales,onChange:function(e){ue.daily.sales=!ue.daily.sales,be(Object(C.a)({},ue)),ae()}}),"Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.salesProfit,onChange:function(e){ue.daily.salesProfit=!ue.daily.salesProfit,be(Object(C.a)({},ue)),ae()}}),"Sales Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.paidSales,onChange:function(e){ue.daily.paidSales=!ue.daily.paidSales,be(Object(C.a)({},ue)),ae()}}),"Paid Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.unpaidSales,onChange:function(e){ue.daily.unpaidSales=!ue.daily.unpaidSales,be(Object(C.a)({},ue)),ae()}}),"Credit Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.expense,onChange:function(e){ue.daily.expense=!ue.daily.expense,be(Object(C.a)({},ue)),ae()}}),"Expense vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.purchase,onChange:function(e){ue.daily.purchase=!ue.daily.purchase,be(Object(C.a)({},ue)),ae()}}),"Purchase vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturn,onChange:function(e){ue.daily.salesReturn=!ue.daily.salesReturn,be(Object(C.a)({},ue)),ae()}}),"Sales Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturnProfit,onChange:function(e){ue.daily.salesReturnProfit=!ue.daily.salesReturnProfit,be(Object(C.a)({},ue)),ae()}}),"Sales Return Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.salesReturnLoss,onChange:function(e){ue.daily.salesReturnLoss=!ue.daily.salesReturnLoss,be(Object(C.a)({},ue)),ae()}}),"Sales Return Loss vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.purchaseReturn,onChange:function(e){ue.daily.purchaseReturn=!ue.daily.purchaseReturn,be(Object(C.a)({},ue)),ae()}}),"Purchase Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.daily.loss,onChange:function(e){ue.daily.loss=!ue.daily.loss,be(Object(C.a)({},ue)),ae()}}),"Sales Loss"]}),Object(T.jsx)(Vs,{ref:te,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:v,allPurchaseReturns:S,columns:ue.daily}),Object(T.jsx)("hr",{}),Object(T.jsxs)("h2",{children:["Monthly \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.sales,onChange:function(e){ue.monthly.sales=!ue.monthly.sales,be(Object(C.a)({},ue)),ce()}}),"Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.salesProfit,onChange:function(e){ue.monthly.salesProfit=!ue.monthly.salesProfit,be(Object(C.a)({},ue)),ce()}}),"Sales Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.paidSales,onChange:function(e){ue.monthly.paidSales=!ue.monthly.paidSales,be(Object(C.a)({},ue)),ce()}}),"Paid Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.unpaidSales,onChange:function(e){ue.monthly.unpaidSales=!ue.monthly.unpaidSales,be(Object(C.a)({},ue)),ce()}}),"Credit Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.expense,onChange:function(e){ue.monthly.expense=!ue.monthly.expense,be(Object(C.a)({},ue)),ce()}}),"Expense vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.purchase,onChange:function(e){ue.monthly.purchase=!ue.monthly.purchase,be(Object(C.a)({},ue)),ce()}}),"Purchase vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturn,onChange:function(e){ue.monthly.salesReturn=!ue.monthly.salesReturn,be(Object(C.a)({},ue)),ce()}}),"Sales Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturnProfit,onChange:function(e){ue.monthly.salesReturnProfit=!ue.monthly.salesReturnProfit,be(Object(C.a)({},ue)),ce()}}),"Sales Return Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.salesReturnLoss,onChange:function(e){ue.monthly.salesReturnLoss=!ue.monthly.salesReturnLoss,be(Object(C.a)({},ue)),ce()}}),"Sales Return Loss vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.purchaseReturn,onChange:function(e){ue.monthly.purchaseReturn=!ue.monthly.purchaseReturn,be(Object(C.a)({},ue)),ce()}}),"Purchase Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.monthly.loss,onChange:function(e){ue.monthly.loss=!ue.monthly.loss,be(Object(C.a)({},ue)),ce()}}),"Sales Loss"]}),Object(T.jsx)(Hs,{ref:ne,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:v,allPurchaseReturns:S,columns:ue.monthly}),Object(T.jsx)("hr",{}),Object(T.jsxs)("h2",{children:["Yearly \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.sales,onChange:function(e){ue.yearly.sales=!ue.yearly.sales,be(Object(C.a)({},ue)),oe()}}),"Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.salesProfit,onChange:function(e){ue.yearly.salesProfit=!ue.yearly.salesProfit,be(Object(C.a)({},ue)),oe()}}),"Sales Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.paidSales,onChange:function(e){ue.yearly.paidSales=!ue.yearly.paidSales,be(Object(C.a)({},ue)),oe()}}),"Paid Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.unpaidSales,onChange:function(e){ue.yearly.unpaidSales=!ue.yearly.unpaidSales,be(Object(C.a)({},ue)),oe()}}),"Credit Sales vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.expense,onChange:function(e){ue.yearly.expense=!ue.yearly.expense,be(Object(C.a)({},ue)),oe()}}),"Expense vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.purchase,onChange:function(e){ue.yearly.purchase=!ue.yearly.purchase,be(Object(C.a)({},ue)),oe()}}),"Purchase vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturn,onChange:function(e){ue.yearly.salesReturn=!ue.yearly.salesReturn,be(Object(C.a)({},ue)),oe()}}),"Sales Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturnProfit,onChange:function(e){ue.yearly.salesReturnProfit=!ue.yearly.salesReturnProfit,be(Object(C.a)({},ue)),oe()}}),"Sales Return Profit vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.salesReturnLoss,onChange:function(e){ue.yearly.salesReturnLoss=!ue.yearly.salesReturnLoss,be(Object(C.a)({},ue)),oe()}}),"Sales Return Loss vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.purchaseReturn,onChange:function(e){ue.yearly.purchaseReturn=!ue.yearly.purchaseReturn,be(Object(C.a)({},ue)),oe()}}),"Purchase Return vs \xa0",Object(T.jsx)("input",{type:"checkbox",checked:ue.yearly.loss,onChange:function(e){ue.yearly.loss=!ue.yearly.loss,be(Object(C.a)({},ue)),oe()}}),"Sales Loss"]}),Object(T.jsx)(Gs,{ref:ie,allOrders:r,allExpenses:j,allPurchases:O,allSalesReturns:v,allPurchaseReturns:S,columns:ue.yearly}),Object(T.jsx)("hr",{})]})})),Qs=Ws;var Zs=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],c=new h.a,r=c.get("access_token");function j(){n("collapsed"===a?"":"collapsed")}Object(s.useEffect)((function(){c.get("access_token")||(window.location="/")}));var u=Object(s.useState)([]),b=Object(o.a)(u,2),p=b[0],x=b[1];function m(e,t){p.push({text:e,variant:t,show:!0}),x(Object(i.a)(p))}return r?Object(T.jsxs)(l.a,{children:[Object(T.jsx)(Is.a,{position:"top-end",className:"p-3",style:{zIndex:1,position:"absolute"},children:p.map((function(e,t){return Object(T.jsxs)(Ls.a,{onClose:function(){!function(e,t){p[e].show=t,x(Object(i.a)(p))}(t,!1),function(e){p=p.splice(e,1),x(Object(i.a)(p)),console.log("toastMessages:",p)}(t),e.show=!1},bg:e.variant,show:e.show,delay:4e3,autohide:!0,children:[Object(T.jsxs)(Ls.a.Header,{children:[Object(T.jsx)("strong",{className:"me-auto",children:"Message"}),Object(T.jsx)("small",{children:"1 sec ago "})]}),Object(T.jsx)(Ls.a.Body,{children:e.text})]},"toast"+t)}))}),Object(T.jsxs)(d.d,{children:[Object(T.jsx)(d.b,{path:"/dashboard/analytics",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Qs,{})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/sales",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(ea,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-cash-discounts",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(ca,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-payments",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Dt,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/salesreturn",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Xt,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-return-payments",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Gt,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/purchases",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ma,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-cash-discounts",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(da,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-payments",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(pa,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/purchasereturn",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ta,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-return-payments",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(_a,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/delivery-notes",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(vt,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/quotations",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(ft,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/vendors",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ra,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/stores",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Pa,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/customers",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Aa,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/products",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(za,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/product_category",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ua,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/expense_category",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ga,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/expenses",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Xa,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/customer_deposits",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(ts,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/customer_withdrawals",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(rs,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/capitals",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(js,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/capital_withdrawals",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(xs,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/dividents",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(gs,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/users",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Ns,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/signatures",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(Cs,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/ledger",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(vs,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/accounts",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(ys,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsx)(d.b,{path:"/dashboard/postings",children:Object(T.jsxs)("div",{className:"wrapper",children:[Object(T.jsx)(Ms,{isSidebarOpen:a,parentCallback:j}),Object(T.jsxs)("div",{className:"main",children:[Object(T.jsx)(Rs,{parentCallback:j}),Object(T.jsx)("main",{className:"content",children:Object(T.jsx)(L,{showToastMessage:m})}),Object(T.jsx)(Fs,{})]})]})}),Object(T.jsxs)(d.b,{path:"/",children:[r&&Object(T.jsx)(d.a,{to:"/dashboard/analytics"}),Object(T.jsx)(As,{})]})]})]}):Object(T.jsx)(T.Fragment,{})};var Ks=function(){return Object(T.jsx)(l.a,{children:Object(T.jsxs)(d.d,{children:[Object(T.jsx)(d.b,{path:"/dashboard/analytics",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/sales",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-cash-discounts",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-payments",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/salesreturn",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/sales-return-payments",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/purchases",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-cash-discounts",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-payments",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/purchasereturn",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/purchase-return-payments",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/delivery-notes",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/quotations",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/vendors",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/stores",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/customers",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/products",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/product_category",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/expense_category",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/expenses",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/customer_deposits",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/customer_withdrawals",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/capitals",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/capital_withdrawals",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/dividents",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/users",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/signatures",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/ledger",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/accounts",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/dashboard/postings",children:Object(T.jsx)(Zs,{})}),Object(T.jsx)(d.b,{path:"/",children:Object(T.jsx)(As,{})})]})})},Xs=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,712)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(T.jsx)(Ks,{}),document.getElementById("root")),Xs()}},[[703,1,2]]]);
//# sourceMappingURL=main.68d4026e.chunk.js.map