{"ast":null,"code":"var _jsxFileName = \"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/sales_return/create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport SalesReturnPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport SalesReturnView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SalesReturnCreate = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        order_id: id,\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        is_discount_percent: false,\n        //  date_str: format(new Date(), \"MMM dd yyyy\"),\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"received\",\n        payment_status: \"paid\",\n        payment_method: \"\",\n        price_type: \"retail\"\n      };\n\n      if (cookies.get(\"user_id\")) {\n        selectedReceivedByUsers = [{\n          id: cookies.get(\"user_id\"),\n          name: cookies.get(\"user_name\")\n        }];\n        formData.received_by = cookies.get(\"user_id\");\n        setFormData({ ...formData\n        });\n        setSelectedReceivedByUsers([...selectedReceivedByUsers]);\n      }\n\n      setFormData({ ...formData\n      });\n\n      if (id) {\n        reCalculate();\n        getOrder(id);\n      }\n\n      setShow(true);\n    }\n\n  }));\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function.\"); // event.preventDefault();\n\n        var form = event.target.form;\n\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n\n            event.preventDefault();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  function getOrder(id) {\n    console.log(\"inside get SalesReturn\");\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': cookies.get('access_token')\n      }\n    };\n    fetch('/v1/order/' + id, requestOptions).then(async response => {\n      var _response$headers$get;\n\n      const isJson = (_response$headers$get = response.headers.get('content-type')) === null || _response$headers$get === void 0 ? void 0 : _response$headers$get.includes('application/json');\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let order = data.result;\n      let selectedProductsTemp = order.products;\n      selectedProducts = [];\n\n      for (let i = 0; i < selectedProductsTemp.length; i++) {\n        selectedProductsTemp[i].selected = false;\n        let soldQty = selectedProductsTemp[i].quantity - selectedProductsTemp[i].quantity_returned;\n        selectedProductsTemp[i].quantity = soldQty;\n\n        if (soldQty > 0) {\n          selectedProducts.push(selectedProductsTemp[i]);\n        }\n      } // selectedProducts = selectedProductsTemp\n\n\n      console.log(\"selectedProducts:\", selectedProducts);\n      setSelectedProducts([...selectedProducts]); //formData = order;\n\n      console.log(\"order.id:\", order.id);\n      formData.id = \"\";\n      formData.products = order.products; // formData.order_id = order.id;\n      //console.log(\"formData.order_id:\", formData.order_id);\n\n      formData.order_code = order.code;\n      formData.store_id = order.store_id;\n      /*\n      formData.received_by = order.delivered_by;\n      formData.received_by_signature_id = order.delivered_by_signature_id;\n      */\n\n      formData.customer_id = order.customer_id;\n      formData.is_discount_percent = order.is_discount_percent;\n      formData.discount = order.discount - order.return_discount; // formData.discount_percent = order.discount_percent;\n\n      if (formData.is_discount_percent) {\n        formData.discountValue = formData.discount_percent;\n      } else {\n        formData.discountValue = formData.discount;\n      } // setFormData({ ...formData });\n\n\n      console.log(\"formData:\", formData);\n      selectedStores = [{\n        id: order.store_id,\n        name: order.store_name\n      }];\n      setSelectedStores(selectedStores);\n      console.log(\"selectedStores:\", selectedStores);\n      setFormData({ ...formData\n      });\n      reCalculate();\n      setFormData({ ...formData\n      });\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n  /*\n  let [barcode, setBarcode] = useState(\"\");\n  let [barcodeEnded, setBarcodeEnded] = useState(false);\n  const keyPress = useCallback(\n      (e) => {\n          console.log(\"e.key:\", e.key);\n           if (!barcodeEnded && e.key != \"Enter\") {\n              console.log()\n              barcode += e.key;\n              setBarcode(barcode);\n          }\n           if (e.key === \"Enter\") {\n              document.removeEventListener(\"keydown\", keyPress);\n              console.log(\"barcode:\", barcode);\n              barcodeEnded = true;\n              setBarcodeEnded(true);\n          }\n       },\n      []\n  );\n   function addListener() {\n      //barcode = \"\";\n      //setBarcode(barcode);\n      document.addEventListener(\"keydown\", keyPress);\n      console.log(\"Listener added, barcode:\", barcode);\n  }\n  */\n\n  /*\n  useEffect(() => {\n      document.addEventListener(\"keydown\", keyPress);\n      return () => document.removeEventListener(\"keydown\", keyPress);\n  }, [keyPress]);\n  */\n\n  /*\n  useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  });\n  let [barcode, setBarcode] = useState(\"\");\n  function handleKeyDown(event) {\n      console.log(\"event.key:\", event.key);\n       /*\n      if (event.key == \"Enter\") {\n          barcode = \"\";\n          setBarcode(barcode);\n      }\n      else if (event.key == \"Shift\") {\n          console.log(\"barcode:\", barcode);\n      } else {\n          barcode += event.key;\n          setBarcode(barcode);\n      }\n      */\n\n  /*\n  if (event.keyCode === KEY_ESCAPE) {\n      /* do your action here */\n  // }  \n  // }\n\n\n  const selectedDate = new Date(); //const history = useHistory();\n\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies(); //fields\n\n  let [formData, setFormData] = useState({\n    order_id: \"\",\n    vat_percent: 15.0,\n    discount: 0.0,\n    date_str: format(new Date(), \"MMM dd yyyy\"),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"received\",\n    payment_status: \"paid\",\n    payment_method: \"\",\n    price_type: \"retail\"\n  });\n  let [selectedStores, setSelectedStores] = useState([]); //Product Auto Suggestion\n\n  let [selectedProducts, setSelectedProducts] = useState([]); //Received By Auto Suggestion\n\n  const [receivedByUserOptions, setReceivedByUserOptions] = useState([]);\n  let [selectedReceivedByUsers, setSelectedReceivedByUsers] = useState([]);\n  const [isReceivedByUsersLoading, setIsReceivedByUsersLoading] = useState(false); //Received By Signature Auto Suggestion\n\n  const [receivedBySignatureOptions, setReceivedBySignatureOptions] = useState([]);\n  const [selectedReceivedBySignatures, setSelectedReceivedBySignatures] = useState([]);\n  const [isReceivedBySignaturesLoading, setIsReceivedBySignaturesLoading] = useState(false);\n  const [show, setShow] = useState(false);\n\n  function handleClose() {\n    setShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n\n    if (!at) {\n      // history.push(\"/dashboard/salesreturns\");\n      window.location = \"/\";\n    }\n  });\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object).map(function (key) {\n      return `search[${key}]=${object[key]}`;\n    }).join(\"&\");\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setReceivedByUserOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsReceivedByUsersLoading(true);\n    let result = await fetch(\"/v1/user?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setReceivedByUserOptions(data.result);\n    setIsReceivedByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setReceivedBySignatureOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsReceivedBySignaturesLoading(true);\n    let result = await fetch(\"/v1/signature?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setReceivedBySignatureOptions(data.result);\n    setIsReceivedBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n    console.log(\"formData.order_id:\", formData.order_id);\n    formData.products = [];\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (!selectedProducts[i].selected) {\n        continue;\n      }\n\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        unit: selectedProducts[i].unit\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n    formData.partial_payment_amount = parseFloat(formData.partial_payment_amount);\n    console.log(\"formData.discount:\", formData.discount);\n\n    if (formData.payment_status === \"paid_partially\" && !formData.partial_payment_amount && formData.partial_payment_amount !== 0) {\n      errors[\"partial_payment_amount\"] = \"Invalid partial payment amount\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    if (formData.payment_status === \"paid_partially\" && formData.partial_payment_amount <= 0) {\n      errors[\"partial_payment_amount\"] = \"Partial payment should be > 0 \";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    if (formData.payment_status === \"paid_partially\" && formData.partial_payment_amount >= netTotal) {\n      errors[\"partial_payment_amount\"] = \"Partial payment cannot be >= \" + netTotal;\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    if (!formData.discountValue && formData.discountValue !== 0) {\n      errors[\"discount\"] = \"Invalid Discount\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    let endPoint = \"/v1/sales-return\";\n    let method = \"POST\";\n    const requestOptions = {\n      method: method,\n      headers: {\n        'Accept': 'application/json',\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      },\n      body: JSON.stringify(formData)\n    };\n    console.log(\"formData:\", formData);\n    setProcessing(true);\n    fetch(endPoint, requestOptions).then(async response => {\n      var _response$headers$get2;\n\n      const isJson = (_response$headers$get2 = response.headers.get(\"content-type\")) === null || _response$headers$get2 === void 0 ? void 0 : _response$headers$get2.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.errors; //const error = data.errors\n\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      setProcessing(false);\n      console.log(\"Response:\");\n      console.log(data);\n      props.showToastMessage(\"SalesReturn Created Successfully!\", \"success\");\n\n      if (props.refreshList) {\n        props.refreshList();\n      }\n\n      handleClose();\n      openDetailsView(data.result.id);\n    }).catch(error => {\n      setProcessing(false);\n      console.log(\"Inside catch\");\n      console.log(error);\n      setErrors({ ...error\n      });\n      console.error(\"There was an error!\", error);\n      props.showToastMessage(\"Error Creating SalesReturn!\", \"danger\");\n    });\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.00;\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (!selectedProducts[i].selected) {\n        continue;\n      }\n\n      totalPrice += parseFloat(selectedProducts[i].unit_price) * parseFloat(selectedProducts[i].quantity);\n    }\n\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [vatPrice, setVatPrice] = useState(0.00);\n\n  function findVatPrice() {\n    vatPrice = (parseFloat(formData.vat_percent) / 100 * parseFloat(totalPrice - formData.discount)).toFixed(2);\n    ;\n    console.log(\"vatPrice:\", vatPrice);\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.00);\n\n  function findNetTotal() {\n    if (totalPrice > 0) {\n      netTotal = (parseFloat(totalPrice) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n      setNetTotal(netTotal);\n    }\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.00);\n\n  function findDiscountPercent() {\n    if (!formData.discountValue) {\n      formData.discount = 0.00;\n      formData.discount_percent = 0.00;\n      setFormData({ ...formData\n      });\n      return;\n    }\n\n    formData.discount = formData.discountValue;\n\n    if (formData.discount > 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function findDiscount() {\n    if (!formData.discountValue) {\n      formData.discount = 0.00;\n      formData.discount_percent = 0.00;\n      setFormData({ ...formData\n      });\n      return;\n    }\n\n    formData.discount_percent = formData.discountValue;\n\n    if (formData.discount_percent > 0 && totalPrice > 0) {\n      formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n    }\n\n    setFormData({ ...formData\n    });\n  }\n\n  function reCalculate() {\n    findTotalPrice();\n\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const DetailsViewRef = useRef();\n\n  function openDetailsView(id) {\n    DetailsViewRef.current.open(id);\n  }\n\n  const StoreCreateFormRef = useRef();\n  const CustomerCreateFormRef = useRef();\n  const ProductCreateFormRef = useRef();\n  const UserCreateFormRef = useRef();\n\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SalesReturnView, {\n      ref: DetailsViewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProductView, {\n      ref: ProductDetailsViewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StoreCreate, {\n      ref: StoreCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CustomerCreate, {\n      ref: CustomerCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProductCreate, {\n      ref: ProductCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserCreate, {\n      ref: UserCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 616,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SignatureCreate, {\n      ref: SignatureCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      size: \"xl\",\n      onHide: handleClose,\n      animation: false,\n      backdrop: \"static\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Create Sales Return for Sales Order #\" + formData.order_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col align-self-end text-end\",\n          children: [/*#__PURE__*/_jsxDEV(SalesReturnPreview, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleCreate,\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 33\n            }, this) + \" Creating...\" : \"\", formData.id ? \"Update\" : \"Create\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: handleClose,\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [selectedProducts.length === 0 && \"Already Returned All sold products\", selectedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-3 needs-validation\",\n          onSubmit: handleCreate,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Select Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 25\n          }, this), errors[\"product_id\"] && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"red\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-x-lg\",\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 33\n            }, this), errors[\"product_id\"]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\",\n              height: \"400px\",\n              overflowY: \"scroll\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 665,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"SI No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 666,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Part No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 668,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 669,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 671,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: selectedProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: selectedProducts[index].selected,\n                      onChange: e => {\n                        console.log(\"e.target.value:\", e.target.value);\n                        selectedProducts[index].selected = !selectedProducts[index].selected;\n                        setSelectedProducts([...selectedProducts]);\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 678,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 685,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.part_number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 686,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textDecoration: \"underline\",\n                      color: \"blue\",\n                      cursor: \"pointer\"\n                    },\n                    onClick: () => {\n                      openProductDetailsView(product.product_id);\n                    },\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"155px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.quantity,\n                        className: \"form-control\",\n                        placeholder: \"Quantity\",\n                        onChange: e => {\n                          errors[\"quantity_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"quantity_\" + index] = \"Quantity should be >0\";\n                            selectedProducts[index].quantity = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          product.quantity = parseFloat(e.target.value);\n                          selectedProducts[index].quantity = parseFloat(e.target.value);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 699,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 729,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 698,\n                      columnNumber: 49\n                    }, this), errors[\"quantity_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 733,\n                        columnNumber: 57\n                      }, this), errors[\"quantity_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 732,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 696,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"180px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.unit_price,\n                        className: \"form-control\",\n                        placeholder: \"Unit Price\",\n                        onChange: e => {\n                          errors[\"unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"unit_price_\" + index] = \"Invalid Unit Price\";\n                            selectedProducts[index].unit_price = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (e.target.value === 0) {\n                            errors[\"unit_price_\" + index] = \"Invalid Unit Price should be > 0\";\n                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          selectedProducts[index].unit_price = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].unit_price:\", selectedProducts[index].unit_price);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 741,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: \"SAR\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 771,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 740,\n                      columnNumber: 49\n                    }, this), errors[\"unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 775,\n                        columnNumber: 57\n                      }, this), errors[\"unit_price_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 774,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 739,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: (product.unit_price * product.quantity).toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 782,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 45\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 799,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 800,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: totalPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 804,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 798,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"6\",\n                    className: \"text-end\",\n                    children: [\"Discount(  \", formData.discount_percent + \"%\", \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 816,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: formData.discount,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 820,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 819,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"5\",\n                    className: \"text-end\",\n                    children: \"VAT\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: formData.vat_percent + \"%\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 833,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: vatPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 835,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 845,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: \"Net Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 846,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: netTotal,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 848,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 847,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 844,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 797,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 796,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Date*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: \"date_str\",\n                selected: formData.date_str ? new Date(formData.date_str) : null,\n                value: formData.date_str ? format(new Date(formData.date_str), \"MMMM d, yyyy h:mm aa\") : null,\n                className: \"form-control\",\n                dateFormat: \"MMMM d, yyyy h:mm aa\",\n                showTimeSelect: true,\n                timeIntervals: \"1\",\n                onChange: value => {\n                  console.log(\"Value\", value);\n                  formData.date_str = value; // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n\n                  setFormData({ ...formData\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 865,\n                columnNumber: 33\n              }, this), errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 886,\n                  columnNumber: 41\n                }, this), errors.date_str]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 885,\n                columnNumber: 37\n              }, this), formData.date_str && !errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 41\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 864,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Discount*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"switch\",\n              id: \"custom-switch\",\n              label: \"%\",\n              value: formData.is_discount_percent,\n              checked: formData.is_discount_percent ? \"checked\" : null,\n              onChange: e => {\n                formData.is_discount_percent = !formData.is_discount_percent;\n                console.log(\"e.target.value:\", formData.is_discount_percent);\n                setFormData({ ...formData\n                });\n                reCalculate();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.discountValue,\n                type: \"number\",\n                onChange: e => {\n                  if (parseFloat(e.target.value) === 0) {\n                    formData.discountValue = parseFloat(e.target.value);\n                    setFormData({ ...formData\n                    });\n                    errors[\"discount\"] = \"\";\n                    setErrors({ ...errors\n                    });\n                    reCalculate();\n                    return;\n                  }\n\n                  if (!e.target.value) {\n                    formData.discountValue = \"\";\n                    errors[\"discount\"] = \"Invalid Discount\";\n                    setFormData({ ...formData\n                    });\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"discount\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.discountValue = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  reCalculate();\n                },\n                className: \"form-control\",\n                id: \"validationCustom02\",\n                placeholder: \"Discount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 33\n              }, this), errors.discount && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 950,\n                  columnNumber: 41\n                }, this), errors.discount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 949,\n                columnNumber: 37\n              }, this), !errors.discount && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 956,\n                  columnNumber: 41\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 955,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 915,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Status*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 964,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.status,\n                onChange: e => {\n                  console.log(\"Inside onchange status\");\n\n                  if (!e.target.value) {\n                    errors[\"status\"] = \"Invalid Status\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"status\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.status = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"received\",\n                  children: \"Received\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 986,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"salesreturn_placed\",\n                  children: \"Sales Return Placed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 987,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pending\",\n                  children: \"Pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 988,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cancelled\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 989,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"dispatched\",\n                  children: \"Dispatched\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 990,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 967,\n                columnNumber: 33\n              }, this), errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 994,\n                  columnNumber: 41\n                }, this), errors.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 993,\n                columnNumber: 37\n              }, this), formData.status && !errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1000,\n                  columnNumber: 41\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 999,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 966,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 963,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Payment method*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.payment_method,\n                onChange: e => {\n                  console.log(\"Inside onchange payment method\");\n\n                  if (!e.target.value) {\n                    errors[\"status\"] = \"Invalid Payment Method\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"payment_method\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.payment_method = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1031,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cash\",\n                  children: \"Cash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1032,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"bank_account\",\n                  children: \"Bank Account / Debit / Credit Card\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1033,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1012,\n                columnNumber: 33\n              }, this), errors.payment_method && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1037,\n                  columnNumber: 41\n                }, this), errors.payment_method]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1036,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1008,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Payment Status*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1045,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.payment_status,\n                onChange: e => {\n                  console.log(\"Inside onchange payment Status\");\n\n                  if (!e.target.value) {\n                    errors[\"status\"] = \"Invalid Payment Status\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"payment_status\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.payment_status = e.target.value;\n\n                  if (formData.payment_status !== \"paid_partially\") {\n                    formData.partial_payment_amount = 0.00;\n                  }\n\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"paid\",\n                  children: \"Paid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1070,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"not_paid\",\n                  children: \"Not Paid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1071,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"paid_partially\",\n                  children: \"Paid Partially\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1072,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1048,\n                columnNumber: 33\n              }, this), errors.payment_status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1076,\n                  columnNumber: 41\n                }, this), errors.payment_status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1075,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1044,\n            columnNumber: 25\n          }, this), formData.payment_status === \"paid_partially\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Patial Payment Amount*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1085,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: formData.partial_payment_amount,\n                onChange: e => {\n                  console.log(\"Inside onchange vat discount\");\n\n                  if (!e.target.value) {\n                    formData.partial_payment_amount = e.target.value;\n                    errors[\"partial_payment_amount\"] = \"Invalid partial payment amount\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  formData.partial_payment_amount = parseFloat(e.target.value);\n                  errors[\"partial_payment_amount\"] = \"\";\n\n                  if (formData.partial_payment_amount >= netTotal) {\n                    errors[\"partial_payment_amount\"] = \"Partial payment cannot be >= \" + netTotal;\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  setErrors({ ...errors\n                  });\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"validationCustom02\",\n                placeholder: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1088,\n                columnNumber: 33\n              }, this), errors.partial_payment_amount && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1117,\n                  columnNumber: 41\n                }, this), errors.partial_payment_amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1116,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1084,\n            columnNumber: 73\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1127,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleCreate,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n                as: \"span\",\n                animation: \"bsalesreturn\",\n                size: \"sm\",\n                role: \"status\",\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1132,\n                columnNumber: 37\n              }, this) + \" Creating...\" : formData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1130,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1126,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}, \"/xrgpPn+ntDLRIfYpHJ2x1I4RP0=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = SalesReturnCreate;\nexport default SalesReturnCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SalesReturnCreate$forwardRef\");\n$RefreshReg$(_c2, \"SalesReturnCreate\");","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/sales_return/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","SalesReturnPreview","Modal","Button","Form","StoreCreate","CustomerCreate","ProductCreate","UserCreate","SignatureCreate","Cookies","Typeahead","NumberFormat","DatePicker","format","Spinner","SalesReturnView","ProductView","SalesReturnCreate","props","ref","open","id","formData","order_id","vat_percent","discount","discountValue","discount_percent","is_discount_percent","date_str","Date","signature_date_str","status","payment_status","payment_method","price_type","cookies","get","selectedReceivedByUsers","name","received_by","setFormData","setSelectedReceivedByUsers","reCalculate","getOrder","setShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","requestOptions","method","headers","fetch","then","response","isJson","data","json","ok","error","errors","Promise","reject","setErrors","order","result","selectedProductsTemp","products","selectedProducts","i","length","selected","soldQty","quantity","quantity_returned","push","setSelectedProducts","order_code","store_id","customer_id","return_discount","selectedStores","store_name","setSelectedStores","catch","setProcessing","selectedDate","isProcessing","receivedByUserOptions","setReceivedByUserOptions","isReceivedByUsersLoading","setIsReceivedByUsersLoading","receivedBySignatureOptions","setReceivedBySignatureOptions","selectedReceivedBySignatures","setSelectedReceivedBySignatures","isReceivedBySignaturesLoading","setIsReceivedBySignaturesLoading","show","handleClose","at","window","location","ObjectToSearchQueryParams","object","Object","keys","map","key","join","suggestUsers","searchTerm","params","queryString","Authorization","Select","suggestSignatures","handleCreate","product_id","parseFloat","unit_price","unit","partial_payment_amount","netTotal","endPoint","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","totalPrice","setTotalPrice","findTotalPrice","toFixed","vatPrice","setVatPrice","findVatPrice","setNetTotal","findNetTotal","discountPercent","setDiscountPercent","findDiscountPercent","findDiscount","DetailsViewRef","current","StoreCreateFormRef","CustomerCreateFormRef","ProductCreateFormRef","UserCreateFormRef","openUserCreateForm","SignatureCreateFormRef","openSignatureCreateForm","ProductDetailsViewRef","openProductDetailsView","color","overflowX","height","overflowY","product","e","value","part_number","textDecoration","cursor","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport SalesReturnPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport SalesReturnView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\n\nconst SalesReturnCreate = forwardRef((props, ref) => {\n\n    useImperativeHandle(ref, () => ({\n        open(id) {\n\n            formData = {\n                order_id: id,\n                vat_percent: 15.0,\n                discount: 0.0,\n                discountValue: 0.0,\n                discount_percent: 0.0,\n                is_discount_percent: false,\n                //  date_str: format(new Date(), \"MMM dd yyyy\"),\n                date_str: new Date(),\n                signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n                status: \"received\",\n                payment_status: \"paid\",\n                payment_method: \"\",\n                price_type: \"retail\"\n            };\n            if (cookies.get(\"user_id\")) {\n                selectedReceivedByUsers = [{\n                    id: cookies.get(\"user_id\"),\n                    name: cookies.get(\"user_name\"),\n                }];\n                formData.received_by = cookies.get(\"user_id\");\n                setFormData({ ...formData });\n                setSelectedReceivedByUsers([...selectedReceivedByUsers]);\n            }\n            setFormData({ ...formData });\n            if (id) {\n                reCalculate();\n                getOrder(id);\n            }\n            setShow(true);\n\n        },\n\n    }));\n\n    useEffect(() => {\n        const listener = event => {\n            if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n                console.log(\"Enter key was pressed. Run your function.\");\n                // event.preventDefault();\n\n                var form = event.target.form;\n                if (form && event.target) {\n                    var index = Array.prototype.indexOf.call(form, event.target);\n                    if (form && form.elements[index + 1]) {\n                        if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n                            form.elements[index].focus();\n                        } else {\n                            form.elements[index + 1].focus();\n                        }\n                        event.preventDefault();\n                    }\n                }\n            }\n        };\n        document.addEventListener(\"keydown\", listener);\n        return () => {\n            document.removeEventListener(\"keydown\", listener);\n        };\n    }, []);\n\n    function getOrder(id) {\n        console.log(\"inside get SalesReturn\");\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        fetch('/v1/order/' + id, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                setErrors({});\n\n                console.log(\"Response:\");\n                console.log(data);\n\n                let order = data.result;\n\n                let selectedProductsTemp = order.products;\n                selectedProducts = [];\n                for (let i = 0; i < selectedProductsTemp.length; i++) {\n                    selectedProductsTemp[i].selected = false;\n                    let soldQty = selectedProductsTemp[i].quantity - selectedProductsTemp[i].quantity_returned;\n                    selectedProductsTemp[i].quantity = soldQty;\n\n                    if (soldQty > 0) {\n                        selectedProducts.push(selectedProductsTemp[i]);\n                    }\n                }\n\n                // selectedProducts = selectedProductsTemp\n\n                console.log(\"selectedProducts:\", selectedProducts);\n                setSelectedProducts([...selectedProducts]);\n\n\n\n                //formData = order;\n                console.log(\"order.id:\", order.id);\n                formData.id = \"\";\n                formData.products = order.products;\n                // formData.order_id = order.id;\n                //console.log(\"formData.order_id:\", formData.order_id);\n                formData.order_code = order.code;\n                formData.store_id = order.store_id;\n                /*\n                formData.received_by = order.delivered_by;\n                formData.received_by_signature_id = order.delivered_by_signature_id;\n                */\n                formData.customer_id = order.customer_id;\n\n                formData.is_discount_percent = order.is_discount_percent;\n                formData.discount = (order.discount - order.return_discount);\n\n                // formData.discount_percent = order.discount_percent;\n\n                if (formData.is_discount_percent) {\n                    formData.discountValue = formData.discount_percent;\n                } else {\n                    formData.discountValue = formData.discount;\n                }\n\n                // setFormData({ ...formData });\n                console.log(\"formData:\", formData);\n\n\n                selectedStores = [\n                    {\n                        id: order.store_id,\n                        name: order.store_name,\n                    }\n                ];\n\n                setSelectedStores(selectedStores);\n                console.log(\"selectedStores:\", selectedStores);\n\n                setFormData({ ...formData });\n                reCalculate();\n                setFormData({ ...formData });\n            })\n            .catch(error => {\n                setProcessing(false);\n                setErrors(error);\n            });\n    }\n\n    /*\n    let [barcode, setBarcode] = useState(\"\");\n    let [barcodeEnded, setBarcodeEnded] = useState(false);\n    const keyPress = useCallback(\n        (e) => {\n            console.log(\"e.key:\", e.key);\n\n            if (!barcodeEnded && e.key != \"Enter\") {\n                console.log()\n                barcode += e.key;\n                setBarcode(barcode);\n            }\n\n            if (e.key === \"Enter\") {\n                document.removeEventListener(\"keydown\", keyPress);\n                console.log(\"barcode:\", barcode);\n                barcodeEnded = true;\n                setBarcodeEnded(true);\n            }\n\n        },\n        []\n    );\n\n    function addListener() {\n        //barcode = \"\";\n        //setBarcode(barcode);\n        document.addEventListener(\"keydown\", keyPress);\n        console.log(\"Listener added, barcode:\", barcode);\n    }\n    */\n    /*\n    useEffect(() => {\n        document.addEventListener(\"keydown\", keyPress);\n        return () => document.removeEventListener(\"keydown\", keyPress);\n    }, [keyPress]);\n    */\n    /*\n    useEffect(() => {\n        document.addEventListener('keydown', handleKeyDown);\n        return () => document.removeEventListener(\"keydown\", handleKeyDown);\n    });\n    let [barcode, setBarcode] = useState(\"\");\n    function handleKeyDown(event) {\n        console.log(\"event.key:\", event.key);\n\n        /*\n        if (event.key == \"Enter\") {\n            barcode = \"\";\n            setBarcode(barcode);\n        }\n        else if (event.key == \"Shift\") {\n            console.log(\"barcode:\", barcode);\n        } else {\n            barcode += event.key;\n            setBarcode(barcode);\n        }\n        */\n\n    /*\n    if (event.keyCode === KEY_ESCAPE) {\n        /* do your action here */\n    // }  \n    // }\n\n    const selectedDate = new Date();\n\n    //const history = useHistory();\n    let [errors, setErrors] = useState({});\n    const [isProcessing, setProcessing] = useState(false);\n    const cookies = new Cookies();\n\n    //fields\n    let [formData, setFormData] = useState({\n        order_id: \"\",\n        vat_percent: 15.0,\n        discount: 0.0,\n        date_str: format(new Date(), \"MMM dd yyyy\"),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"received\",\n        payment_status: \"paid\",\n        payment_method: \"\",\n        price_type: \"retail\",\n    });\n\n    let [selectedStores, setSelectedStores] = useState([]);\n\n\n\n\n    //Product Auto Suggestion\n    let [selectedProducts, setSelectedProducts] = useState([]);\n\n    //Received By Auto Suggestion\n    const [receivedByUserOptions, setReceivedByUserOptions] = useState([]);\n    let [selectedReceivedByUsers, setSelectedReceivedByUsers] = useState([]);\n    const [isReceivedByUsersLoading, setIsReceivedByUsersLoading] =\n        useState(false);\n\n    //Received By Signature Auto Suggestion\n    const [receivedBySignatureOptions, setReceivedBySignatureOptions] =\n        useState([]);\n    const [selectedReceivedBySignatures, setSelectedReceivedBySignatures] =\n        useState([]);\n    const [isReceivedBySignaturesLoading, setIsReceivedBySignaturesLoading] =\n        useState(false);\n\n    const [show, setShow] = useState(false);\n\n    function handleClose() {\n        setShow(false);\n    }\n\n    useEffect(() => {\n        let at = cookies.get(\"access_token\");\n        if (!at) {\n            // history.push(\"/dashboard/salesreturns\");\n            window.location = \"/\";\n        }\n    });\n\n\n    function ObjectToSearchQueryParams(object) {\n        return Object.keys(object)\n            .map(function (key) {\n                return `search[${key}]=${object[key]}`;\n            })\n            .join(\"&\");\n    }\n\n    async function suggestUsers(searchTerm) {\n        console.log(\"Inside handle suggestUsers\");\n        setReceivedByUserOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        setIsReceivedByUsersLoading(true);\n        let result = await fetch(\n            \"/v1/user?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setReceivedByUserOptions(data.result);\n        setIsReceivedByUsersLoading(false);\n    }\n\n    async function suggestSignatures(searchTerm) {\n        console.log(\"Inside handle suggestSignatures\");\n        setReceivedBySignatureOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        setIsReceivedBySignaturesLoading(true);\n        let result = await fetch(\n            \"/v1/signature?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setReceivedBySignatureOptions(data.result);\n        setIsReceivedBySignaturesLoading(false);\n    }\n\n    function handleCreate(event) {\n        event.preventDefault();\n        console.log(\"Inside handle Create\");\n        console.log(\"selectedProducts:\", selectedProducts);\n        console.log(\"formData.order_id:\", formData.order_id);\n\n        formData.products = [];\n        for (var i = 0; i < selectedProducts.length; i++) {\n            if (!selectedProducts[i].selected) {\n                continue;\n            }\n\n            formData.products.push({\n                product_id: selectedProducts[i].product_id,\n                quantity: parseFloat(selectedProducts[i].quantity),\n                unit_price: parseFloat(selectedProducts[i].unit_price),\n                unit: selectedProducts[i].unit,\n            });\n        }\n\n        formData.discount = parseFloat(formData.discount);\n        formData.discount_percent = parseFloat(formData.discount_percent);\n\n        formData.vat_percent = parseFloat(formData.vat_percent);\n        formData.partial_payment_amount = parseFloat(formData.partial_payment_amount);\n        console.log(\"formData.discount:\", formData.discount);\n\n\n        if (formData.payment_status === \"paid_partially\" && !formData.partial_payment_amount && formData.partial_payment_amount !== 0) {\n            errors[\"partial_payment_amount\"] = \"Invalid partial payment amount\";\n            setErrors({ ...errors });\n            return;\n        }\n\n        if (formData.payment_status === \"paid_partially\" && formData.partial_payment_amount <= 0) {\n            errors[\"partial_payment_amount\"] = \"Partial payment should be > 0 \";\n            setErrors({ ...errors });\n            return;\n        }\n\n        if (formData.payment_status === \"paid_partially\" && formData.partial_payment_amount >= netTotal) {\n            errors[\"partial_payment_amount\"] = \"Partial payment cannot be >= \" + netTotal;\n            setErrors({ ...errors });\n            return;\n        }\n\n\n        if (!formData.discountValue && formData.discountValue !== 0) {\n            errors[\"discount\"] = \"Invalid Discount\";\n            setErrors({ ...errors });\n            return;\n        }\n\n        let endPoint = \"/v1/sales-return\";\n        let method = \"POST\";\n\n\n        const requestOptions = {\n            method: method,\n            headers: {\n                'Accept': 'application/json',\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n            body: JSON.stringify(formData),\n        };\n\n        console.log(\"formData:\", formData);\n\n        setProcessing(true);\n        fetch(endPoint, requestOptions)\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    // get error message from body or default to response status\n                    const error = data && data.errors;\n                    //const error = data.errors\n                    return Promise.reject(error);\n                }\n\n                setErrors({});\n                setProcessing(false);\n\n                console.log(\"Response:\");\n                console.log(data);\n                props.showToastMessage(\"SalesReturn Created Successfully!\", \"success\");\n                if (props.refreshList) {\n                    props.refreshList();\n                }\n                handleClose();\n\n                openDetailsView(data.result.id);\n            })\n            .catch((error) => {\n                setProcessing(false);\n                console.log(\"Inside catch\");\n                console.log(error);\n                setErrors({ ...error });\n                console.error(\"There was an error!\", error);\n                props.showToastMessage(\"Error Creating SalesReturn!\", \"danger\");\n            });\n    }\n\n\n    let [totalPrice, setTotalPrice] = useState(0.0);\n\n    function findTotalPrice() {\n        totalPrice = 0.00;\n        for (var i = 0; i < selectedProducts.length; i++) {\n            if (!selectedProducts[i].selected) {\n                continue;\n            }\n            totalPrice +=\n                parseFloat(selectedProducts[i].unit_price) *\n                parseFloat(selectedProducts[i].quantity);\n        }\n        totalPrice = totalPrice.toFixed(2);\n        setTotalPrice(totalPrice);\n    }\n\n    let [vatPrice, setVatPrice] = useState(0.00);\n\n    function findVatPrice() {\n        vatPrice = ((parseFloat(formData.vat_percent) / 100) * parseFloat(totalPrice - formData.discount)).toFixed(2);;\n        console.log(\"vatPrice:\", vatPrice);\n        setVatPrice(vatPrice);\n    }\n\n\n\n    let [netTotal, setNetTotal] = useState(0.00);\n\n    function findNetTotal() {\n        if (totalPrice > 0) {\n            netTotal = (parseFloat(totalPrice) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n            setNetTotal(netTotal);\n        }\n\n    }\n\n    let [discountPercent, setDiscountPercent] = useState(0.00);\n\n    function findDiscountPercent() {\n        if (!formData.discountValue) {\n            formData.discount = 0.00;\n            formData.discount_percent = 0.00;\n            setFormData({ ...formData });\n            return;\n        }\n\n        formData.discount = formData.discountValue;\n\n        if (formData.discount > 0 && totalPrice > 0) {\n            discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n            setDiscountPercent(discountPercent);\n            formData.discount_percent = discountPercent;\n            setFormData({ ...formData });\n        }\n\n    }\n\n    function findDiscount() {\n        if (!formData.discountValue) {\n            formData.discount = 0.00;\n            formData.discount_percent = 0.00;\n            setFormData({ ...formData });\n            return;\n        }\n\n        formData.discount_percent = formData.discountValue;\n\n        if (formData.discount_percent > 0 && totalPrice > 0) {\n            formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n        }\n        setFormData({ ...formData });\n    }\n\n\n    function reCalculate() {\n        findTotalPrice();\n        if (formData.is_discount_percent) {\n            findDiscount();\n        } else {\n            findDiscountPercent();\n        }\n        findVatPrice();\n        findNetTotal();\n    }\n\n\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        DetailsViewRef.current.open(id);\n    }\n\n    const StoreCreateFormRef = useRef();\n\n    const CustomerCreateFormRef = useRef();\n    const ProductCreateFormRef = useRef();\n\n\n\n    const UserCreateFormRef = useRef();\n    function openUserCreateForm() {\n        UserCreateFormRef.current.open();\n    }\n\n\n    const SignatureCreateFormRef = useRef();\n    function openSignatureCreateForm() {\n        SignatureCreateFormRef.current.open();\n    }\n\n\n    const ProductDetailsViewRef = useRef();\n    function openProductDetailsView(id) {\n        ProductDetailsViewRef.current.open(id);\n    }\n\n\n    return (\n        <>\n            <SalesReturnView ref={DetailsViewRef} />\n            <ProductView ref={ProductDetailsViewRef} />\n            <StoreCreate ref={StoreCreateFormRef} showToastMessage={props.showToastMessage} />\n            <CustomerCreate ref={CustomerCreateFormRef} showToastMessage={props.showToastMessage} />\n            <ProductCreate ref={ProductCreateFormRef} showToastMessage={props.showToastMessage} />\n            <UserCreate ref={UserCreateFormRef} showToastMessage={props.showToastMessage} />\n            <SignatureCreate ref={SignatureCreateFormRef} showToastMessage={props.showToastMessage} />\n\n\n            <Modal show={show} size=\"xl\" onHide={handleClose} animation={false} backdrop=\"static\" scrollable={true}>\n                <Modal.Header>\n                    <Modal.Title>\n                        {\"Create Sales Return for Sales Order #\" + formData.order_code}\n                    </Modal.Title>\n\n                    <div className=\"col align-self-end text-end\">\n                        <SalesReturnPreview />\n                        <Button variant=\"primary\" onClick={handleCreate} >\n                            {isProcessing ?\n                                <Spinner\n                                    as=\"span\"\n                                    animation=\"border\"\n                                    size=\"sm\"\n                                    role=\"status\"\n                                    aria-hidden={true}\n                                /> + \" Creating...\"\n\n                                : \"\"\n                            }\n                            {formData.id ? \"Update\" : \"Create\"}\n\n                        </Button>\n                        <button\n                            type=\"button\"\n                            className=\"btn-close\"\n                            onClick={handleClose}\n                            aria-label=\"Close\"\n                        ></button>\n                    </div>\n                </Modal.Header>\n                <Modal.Body>\n                    {selectedProducts.length === 0 && \"Already Returned All sold products\"}\n                    {selectedProducts.length > 0 && <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n                        <h2>Select Products</h2>\n                        {errors[\"product_id\"] && (\n                            <div style={{ color: \"red\" }}>\n                                <i className=\"bi bi-x-lg\"> </i>\n                                {errors[\"product_id\"]}\n                            </div>\n                        )}\n                        <div className=\"table-responsive\" style={{ overflowX: \"auto\", height: \"400px\", overflowY: \"scroll\" }}>\n                            <table className=\"table table-striped table-sm table-bordered\">\n                                <thead>\n                                    <tr className=\"text-center\">\n                                        <th>Select</th>\n                                        <th>SI No.</th>\n                                        <th>Part No.</th>\n                                        <th>Name</th>\n                                        <th>Qty</th>\n                                        <th>Unit Price</th>\n                                        <th>Price</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {selectedProducts.map((product, index) => (\n                                        <tr key={index} className=\"text-center\">\n                                            <td>\n                                                <input type=\"checkbox\" checked={selectedProducts[index].selected} onChange={(e) => {\n                                                    console.log(\"e.target.value:\", e.target.value)\n                                                    selectedProducts[index].selected = !selectedProducts[index].selected;\n                                                    setSelectedProducts([...selectedProducts]);\n                                                    reCalculate();\n                                                }} />\n                                            </td>\n                                            <td>{index + 1}</td>\n                                            <td>{product.part_number}</td>\n                                            <td style={{\n                                                textDecoration: \"underline\",\n                                                color: \"blue\",\n                                                cursor: \"pointer\",\n                                            }}\n                                                onClick={() => {\n                                                    openProductDetailsView(product.product_id);\n                                                }}>{product.name}\n                                            </td>\n                                            <td style={{ width: \"155px\" }}>\n\n                                                <div class=\"input-group mb-3\">\n                                                    <input type=\"number\" value={(product.quantity)} className=\"form-control\"\n\n                                                        placeholder=\"Quantity\" onChange={(e) => {\n                                                            errors[\"quantity_\" + index] = \"\";\n                                                            setErrors({ ...errors });\n                                                            if (!e.target.value) {\n                                                                errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                                                                selectedProducts[index].quantity = e.target.value;\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n                                                            if (parseFloat(e.target.value) === 0) {\n                                                                errors[\"quantity_\" + index] = \"Quantity should be >0\";\n                                                                selectedProducts[index].quantity = parseFloat(e.target.value);\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n\n                                                            product.quantity = parseFloat(e.target.value);\n                                                            selectedProducts[index].quantity = parseFloat(e.target.value);\n                                                            setSelectedProducts([...selectedProducts]);\n                                                            reCalculate();\n\n                                                        }} />\n                                                    <span class=\"input-group-text\" id=\"basic-addon2\">{selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"}</span>\n                                                </div>\n                                                {errors[\"quantity_\" + index] && (\n                                                    <div style={{ color: \"red\" }}>\n                                                        <i className=\"bi bi-x-lg\"> </i>\n                                                        {errors[\"quantity_\" + index]}\n                                                    </div>\n                                                )}\n\n                                            </td>\n                                            <td style={{ width: \"180px\" }}>\n                                                <div class=\"input-group mb-3\">\n                                                    <input type=\"number\" value={product.unit_price} className=\"form-control\"\n\n                                                        placeholder=\"Unit Price\" onChange={(e) => {\n                                                            errors[\"unit_price_\" + index] = \"\";\n                                                            setErrors({ ...errors });\n                                                            if (!e.target.value) {\n                                                                errors[\"unit_price_\" + index] = \"Invalid Unit Price\";\n                                                                selectedProducts[index].unit_price = e.target.value;\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n                                                            if (e.target.value === 0) {\n                                                                errors[\"unit_price_\" + index] = \"Invalid Unit Price should be > 0\";\n                                                                selectedProducts[index].unit_price = parseFloat(e.target.value);\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n\n                                                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                                                            console.log(\"selectedProducts[index].unit_price:\", selectedProducts[index].unit_price);\n                                                            setSelectedProducts([...selectedProducts]);\n                                                            reCalculate();\n\n                                                        }} />\n                                                    <span class=\"input-group-text\" id=\"basic-addon2\">SAR</span>\n                                                </div>\n                                                {errors[\"unit_price_\" + index] && (\n                                                    <div style={{ color: \"red\" }}>\n                                                        <i className=\"bi bi-x-lg\"> </i>\n                                                        {errors[\"unit_price_\" + index]}\n                                                    </div>\n                                                )}\n\n                                            </td>\n                                            <td>\n                                                <NumberFormat\n                                                    value={(product.unit_price * product.quantity).toFixed(2)}\n                                                    displayType={\"text\"}\n                                                    thousandSeparator={true}\n                                                    suffix={\" SAR\"}\n                                                    renderText={(value, props) => value}\n                                                />\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                        <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                            <table className=\"table table-striped table-sm table-bordered\">\n                                <tbody>\n                                    <tr>\n                                        <td colSpan=\"4\"></td>\n                                        <td className=\"text-center\">\n\n                                        </td>\n                                        <th className=\"text-end\">Total</th>\n                                        <td className=\"text-center\">\n                                            <NumberFormat\n                                                value={totalPrice}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n\n                                    <tr>\n                                        <th colSpan=\"6\" className=\"text-end\">\n                                            Discount(  {formData.discount_percent + \"%\"})\n                                        </th>\n                                        <td className=\"text-center\">\n                                            <NumberFormat\n                                                value={formData.discount}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <th colSpan=\"5\" className=\"text-end\">\n                                            VAT\n                                        </th>\n                                        <td className=\"text-center\">{formData.vat_percent + \"%\"}</td>\n                                        <td className=\"text-center\">\n                                            <NumberFormat\n                                                value={vatPrice}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td colSpan=\"5\"></td>\n                                        <th className=\"text-end\">Net Total</th>\n                                        <th className=\"text-center\">\n                                            <NumberFormat\n                                                value={netTotal}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </th>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n\n                        <div className=\"col-md-4\">\n                            <label className=\"form-label\">Date*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <DatePicker\n                                    id=\"date_str\"\n                                    selected={formData.date_str ? new Date(formData.date_str) : null}\n                                    value={formData.date_str ? format(\n                                        new Date(formData.date_str),\n                                        \"MMMM d, yyyy h:mm aa\"\n                                    ) : null}\n                                    className=\"form-control\"\n                                    dateFormat=\"MMMM d, yyyy h:mm aa\"\n                                    showTimeSelect\n                                    timeIntervals=\"1\"\n                                    onChange={(value) => {\n                                        console.log(\"Value\", value);\n                                        formData.date_str = value;\n                                        // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n                                        setFormData({ ...formData });\n                                    }}\n                                />\n\n                                {errors.date_str && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.date_str}\n                                    </div>\n                                )}\n                                {formData.date_str && !errors.date_str && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n\n                        <div className=\"col-md-4\">\n                            <label className=\"form-label\">Discount*</label>\n                            <Form.Check\n                                type=\"switch\"\n                                id=\"custom-switch\"\n                                label=\"%\"\n                                value={formData.is_discount_percent}\n                                checked={formData.is_discount_percent ? \"checked\" : null}\n                                onChange={(e) => {\n                                    formData.is_discount_percent = !formData.is_discount_percent;\n                                    console.log(\"e.target.value:\", formData.is_discount_percent);\n                                    setFormData({ ...formData });\n                                    reCalculate();\n                                }}\n                            />\n                            <div className=\"input-group mb-3\">\n                                <input\n                                    value={formData.discountValue}\n                                    type='number'\n                                    onChange={(e) => {\n                                        if (parseFloat(e.target.value) === 0) {\n                                            formData.discountValue = parseFloat(e.target.value);\n                                            setFormData({ ...formData });\n                                            errors[\"discount\"] = \"\";\n                                            setErrors({ ...errors });\n                                            reCalculate();\n                                            return;\n                                        }\n\n                                        if (!e.target.value) {\n                                            formData.discountValue = \"\";\n                                            errors[\"discount\"] = \"Invalid Discount\";\n                                            setFormData({ ...formData });\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n\n                                        errors[\"discount\"] = \"\";\n                                        setErrors({ ...errors });\n\n                                        formData.discountValue = e.target.value;\n                                        setFormData({ ...formData });\n                                        reCalculate();\n                                    }}\n                                    className=\"form-control\"\n                                    id=\"validationCustom02\"\n                                    placeholder=\"Discount\"\n                                />\n                                {errors.discount && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.discount}\n                                    </div>\n                                )}\n                                {!errors.discount && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"col-md-4\">\n                            <label className=\"form-label\">Status*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <select\n                                    value={formData.status}\n                                    onChange={(e) => {\n                                        console.log(\"Inside onchange status\");\n                                        if (!e.target.value) {\n                                            errors[\"status\"] = \"Invalid Status\";\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n\n                                        errors[\"status\"] = \"\";\n                                        setErrors({ ...errors });\n\n                                        formData.status = e.target.value;\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                >\n                                    <option value=\"received\">Received</option>\n                                    <option value=\"salesreturn_placed\">Sales Return Placed</option>\n                                    <option value=\"pending\">Pending</option>\n                                    <option value=\"cancelled\">Cancelled</option>\n                                    <option value=\"dispatched\">Dispatched</option>\n                                </select>\n                                {errors.status && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.status}\n                                    </div>\n                                )}\n                                {formData.status && !errors.status && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n\n                        <div className=\"col-md-2\">\n                            <label className=\"form-label\">Payment method*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <select\n                                    value={formData.payment_method}\n                                    onChange={(e) => {\n                                        console.log(\"Inside onchange payment method\");\n                                        if (!e.target.value) {\n                                            errors[\"status\"] = \"Invalid Payment Method\";\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n\n                                        errors[\"payment_method\"] = \"\";\n                                        setErrors({ ...errors });\n\n                                        formData.payment_method = e.target.value;\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                >\n                                    <option value=\"\">Select</option>\n                                    <option value=\"cash\">Cash</option>\n                                    <option value=\"bank_account\">Bank Account / Debit / Credit Card</option>\n                                </select>\n                                {errors.payment_method && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.payment_method}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"col-md-2\">\n                            <label className=\"form-label\">Payment Status*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <select\n                                    value={formData.payment_status}\n                                    onChange={(e) => {\n                                        console.log(\"Inside onchange payment Status\");\n                                        if (!e.target.value) {\n                                            errors[\"status\"] = \"Invalid Payment Status\";\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n\n                                        errors[\"payment_status\"] = \"\";\n                                        setErrors({ ...errors });\n\n                                        formData.payment_status = e.target.value;\n                                        if (formData.payment_status !== \"paid_partially\") {\n                                            formData.partial_payment_amount = 0.00;\n                                        }\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                >\n                                    <option value=\"paid\">Paid</option>\n                                    <option value=\"not_paid\">Not Paid</option>\n                                    <option value=\"paid_partially\">Paid Partially</option>\n                                </select>\n                                {errors.payment_status && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.payment_status}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n\n                        {formData.payment_status === \"paid_partially\" ? <div className=\"col-md-3\">\n                            <label className=\"form-label\">Patial Payment Amount*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <input\n                                    type='number'\n                                    value={formData.partial_payment_amount}\n                                    onChange={(e) => {\n                                        console.log(\"Inside onchange vat discount\");\n                                        if (!e.target.value) {\n                                            formData.partial_payment_amount = e.target.value;\n                                            errors[\"partial_payment_amount\"] = \"Invalid partial payment amount\";\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n                                        formData.partial_payment_amount = parseFloat(e.target.value);\n                                        errors[\"partial_payment_amount\"] = \"\";\n\n                                        if (formData.partial_payment_amount >= netTotal) {\n                                            errors[\"partial_payment_amount\"] = \"Partial payment cannot be >= \" + netTotal;\n                                            setErrors({ ...errors });\n                                            return;\n                                        }\n                                        setErrors({ ...errors });\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                    id=\"validationCustom02\"\n                                    placeholder=\"Amount\"\n                                />\n                                {errors.partial_payment_amount && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.partial_payment_amount}\n                                    </div>\n                                )}\n                            </div>\n                        </div> : \"\"}\n\n\n\n                        <Modal.Footer>\n                            <Button variant=\"secondary\" onClick={handleClose}>\n                                Close\n                            </Button>\n                            <Button variant=\"primary\" onClick={handleCreate} >\n                                {isProcessing ?\n                                    <Spinner\n                                        as=\"span\"\n                                        animation=\"bsalesreturn\"\n                                        size=\"sm\"\n                                        role=\"status\"\n                                        aria-hidden={true}\n                                    /> + \" Creating...\"\n\n                                    : formData.id ? \"Update\" : \"Create\"\n                                }\n                            </Button>\n                        </Modal.Footer>\n                    </form>}\n                </Modal.Body>\n\n            </Modal>\n\n\n        </>\n    );\n});\n\nexport default SalesReturnCreate;\n"]},"metadata":{},"sourceType":"module"}