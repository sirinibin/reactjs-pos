{"ast":null,"code":"const Utils = require('./utils');\n\nfunction clearCanvas(ctx, canvas, size) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  if (!canvas.style) canvas.style = {};\n  canvas.height = size;\n  canvas.width = size;\n  canvas.style.height = size + 'px';\n  canvas.style.width = size + 'px';\n}\n\nfunction getCanvasElement() {\n  try {\n    return document.createElement('canvas');\n  } catch (e) {\n    throw new Error('You need to specify a canvas element');\n  }\n}\n\nexports.render = function render(qrData, canvas, options) {\n  let opts = options;\n  let canvasEl = canvas;\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas;\n    canvas = undefined;\n  }\n\n  if (!canvas) {\n    canvasEl = getCanvasElement();\n  }\n\n  opts = Utils.getOptions(opts);\n  const size = Utils.getImageWidth(qrData.modules.size, opts);\n  const ctx = canvasEl.getContext('2d');\n  const image = ctx.createImageData(size, size);\n  Utils.qrToImageData(image.data, qrData, opts);\n  clearCanvas(ctx, canvasEl, size);\n  ctx.putImageData(image, 0, 0);\n  return canvasEl;\n};\n\nexports.renderToDataURL = function renderToDataURL(qrData, canvas, options) {\n  let opts = options;\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas;\n    canvas = undefined;\n  }\n\n  if (!opts) opts = {};\n  const canvasEl = exports.render(qrData, canvas, opts);\n  const type = opts.type || 'image/png';\n  const rendererOpts = opts.rendererOpts || {};\n  return canvasEl.toDataURL(type, rendererOpts.quality);\n};","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/qrcode/lib/renderer/canvas.js"],"names":["Utils","require","clearCanvas","ctx","canvas","size","clearRect","width","height","style","getCanvasElement","document","createElement","e","Error","exports","render","qrData","options","opts","canvasEl","getContext","undefined","getOptions","getImageWidth","modules","image","createImageData","qrToImageData","data","putImageData","renderToDataURL","type","rendererOpts","toDataURL","quality"],"mappings":"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","sourcesContent":["const Utils = require('./utils')\n\nfunction clearCanvas (ctx, canvas, size) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n  if (!canvas.style) canvas.style = {}\n  canvas.height = size\n  canvas.width = size\n  canvas.style.height = size + 'px'\n  canvas.style.width = size + 'px'\n}\n\nfunction getCanvasElement () {\n  try {\n    return document.createElement('canvas')\n  } catch (e) {\n    throw new Error('You need to specify a canvas element')\n  }\n}\n\nexports.render = function render (qrData, canvas, options) {\n  let opts = options\n  let canvasEl = canvas\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!canvas) {\n    canvasEl = getCanvasElement()\n  }\n\n  opts = Utils.getOptions(opts)\n  const size = Utils.getImageWidth(qrData.modules.size, opts)\n\n  const ctx = canvasEl.getContext('2d')\n  const image = ctx.createImageData(size, size)\n  Utils.qrToImageData(image.data, qrData, opts)\n\n  clearCanvas(ctx, canvasEl, size)\n  ctx.putImageData(image, 0, 0)\n\n  return canvasEl\n}\n\nexports.renderToDataURL = function renderToDataURL (qrData, canvas, options) {\n  let opts = options\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!opts) opts = {}\n\n  const canvasEl = exports.render(qrData, canvas, opts)\n\n  const type = opts.type || 'image/png'\n  const rendererOpts = opts.rendererOpts || {}\n\n  return canvasEl.toDataURL(type, rendererOpts.quality)\n}\n"]},"metadata":{},"sourceType":"script"}