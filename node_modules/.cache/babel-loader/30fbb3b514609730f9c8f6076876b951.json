{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import PurchaseReturnCreate from\"./create.js\";import PurchaseReturnView from\"./view.js\";import Cookies from\"universal-cookie\";import{Typeahead}from\"react-bootstrap-typeahead\";import{format}from\"date-fns\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{Button,Spinner,Badge,Modal}from\"react-bootstrap\";import ReactPaginate from\"react-paginate\";import NumberFormat from\"react-number-format\";import PurchaseReturnPaymentCreate from\"./../purchase_return_payment/create.js\";import PurchaseReturnPaymentDetailsView from\"./../purchase_return_payment/view.js\";import PurchaseReturnPaymentIndex from\"./../purchase_return_payment/index.js\";import ReactExport from'react-data-export';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;function PurchaseReturnIndex(props){var _totalPaidPurchaseRet;var cookies=new Cookies();var _useState=useState(0.00),_useState2=_slicedToArray(_useState,2),totalPurchaseReturn=_useState2[0],setTotalPurchaseReturn=_useState2[1];var _useState3=useState(0.00),_useState4=_slicedToArray(_useState3,2),vatPrice=_useState4[0],setVatPrice=_useState4[1];var _useState5=useState(0.00),_useState6=_slicedToArray(_useState5,2),totalDiscount=_useState6[0],setTotalDiscount=_useState6[1];//list\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),purchasereturnList=_useState8[0],setPurchaseReturnList=_useState8[1];//pagination\nvar _useState9=useState(5),_useState10=_slicedToArray(_useState9,2),pageSize=_useState10[0],setPageSize=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),page=_useState12[0],setPage=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalPages=_useState14[0],setTotalPages=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),totalItems=_useState16[0],setTotalItems=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),currentPageItemsCount=_useState18[0],setCurrentPageItemsCount=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),offset=_useState20[0],setOffset=_useState20[1];//Date filter\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showDateRange=_useState22[0],setShowDateRange=_useState22[1];var selectedDate=new Date();var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),dateValue=_useState24[0],setDateValue=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),fromDateValue=_useState26[0],setFromDateValue=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),toDateValue=_useState28[0],setToDateValue=_useState28[1];//Created At filter\nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),showCreatedAtDateRange=_useState30[0],setShowCreatedAtDateRange=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),createdAtValue=_useState32[0],setCreatedAtValue=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),createdAtFromValue=_useState34[0],setCreatedAtFromValue=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),createdAtToValue=_useState36[0],setCreatedAtToValue=_useState36[1];//loader flag\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),isListLoading=_useState38[0],setIsListLoading=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),isRefreshInProcess=_useState40[0],setIsRefreshInProcess=_useState40[1];//Vendor Auto Suggestion\nvar _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),vendorOptions=_useState42[0],setVendorOptions=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),selectedVendors=_useState44[0],setSelectedVendors=_useState44[1];//Created By User Auto Suggestion\nvar _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),userOptions=_useState46[0],setUserOptions=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),selectedCreatedByUsers=_useState48[0],setSelectedCreatedByUsers=_useState48[1];//Status Auto Suggestion\nvar statusOptions=[{id:\"sent\",name:\"Sent\"},{id:\"pending\",name:\"Pending\"},{id:\"accepted\",name:\"Accepted\"},{id:\"rejected\",name:\"Rejected\"},{id:\"cancelled\",name:\"Cancelled\"},{id:\"deleted\",name:\"Deleted\"}];var _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),selectedStatusList=_useState50[0],setSelectedStatusList=_useState50[1];useEffect(function(){list();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),allPurchaseReturns=_useState52[0],setAllPurchaseReturns=_useState52[1];var _useState53=useState([]),_useState54=_slicedToArray(_useState53,2),excelData=_useState54[0],setExcelData=_useState54[1];var _useState55=useState(\"Purchase Return Report\"),_useState56=_slicedToArray(_useState55,2),purchaseReturnReportFileName=_useState56[0],setPurchaseReturnReportFileName=_useState56[1];var _useState57=useState(false),_useState58=_slicedToArray(_useState57,2),fettingAllRecordsInProgress=_useState58[0],setFettingAllRecordsInProgress=_useState58[1];function prepareExcelData(){console.log(\"Inside prepareExcelData()\");var groupedByDate=[];for(var i=0;i<allPurchaseReturns.length;i++){var date=format(new Date(allPurchaseReturns[i].date),\"dd-MMM-yyyy\");if(!groupedByDate[date]){groupedByDate[date]=[];}groupedByDate[date].push(allPurchaseReturns[i]);}console.log(\"groupedByDate:\",groupedByDate);excelData=[{columns:[{title:\"Description\",width:{wch:50}},//pixels width \n{title:\"Quantity\",width:{wpx:90}},//char width \n{title:\"Unit\",width:{wpx:90}},{title:\"Rate\",width:{wpx:90}},{title:\"Gross\",width:{wpx:90}},{title:\"Disc %\",width:{wpx:90}},{title:\"Disc\",width:{wpx:90}},{title:\"Tax %\",width:{wpx:90}},{title:\"Tax Amount\",width:{wpx:90}},{title:\"Net Amount\",width:{wpx:90}}],data:[]}];var totalAmount=0;var totalTax=0;var invoiceCount=0;for(var purchaseReturnDate in groupedByDate){console.log(\"purchaseReturnDate:\",purchaseReturnDate);excelData[0].data.push([{value:\"Inv Date: \"+purchaseReturnDate}]);var dayTotal=0.00;var dayTax=0.00;for(var i=0;i<groupedByDate[purchaseReturnDate].length>0;i++){invoiceCount++;var purchaseReturn=groupedByDate[purchaseReturnDate][i];var invoiceNo=purchaseReturn.vendor_invoice_no?purchaseReturn.vendor_invoice_no+\" / \"+purchaseReturn.code:purchaseReturn.code;excelData[0].data.push([{value:\"Inv No (\"+invoiceNo+\") - \"+invoiceCount+\" [\"+purchaseReturn.vendor_name+\"]\"}]);if(!purchaseReturn.products){continue;}for(var j=0;j<purchaseReturn.products.length;j++){var product=purchaseReturn.products[j];excelData[0].data.push([{value:product.name},{value:product.quantity.toFixed(2)},{value:product.unit?product.unit:\"PCs\"},{value:product.purchasereturn_unit_price?product.purchasereturn_unit_price.toFixed(2):0.00},{value:(product.purchasereturn_unit_price*product.quantity).toFixed(2)},{value:\"0.00\"},{value:\"0.00\"},{value:\"15.00\"},{value:((product.purchasereturn_unit_price*product.quantity).toFixed(2)*0.15).toFixed(2)},{value:(product.purchasereturn_unit_price*product.quantity).toFixed(2)}]);}excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Discount\"},{value:purchaseReturn.discount.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Tax\"},{value:purchaseReturn.vat_price.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total\"},{value:(purchaseReturn.total-purchaseReturn.discount).toFixed(2)}]);dayTotal+=purchaseReturn.total-purchaseReturn.discount;dayTax+=purchaseReturn.vat_price;}excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Day Tax\"},{value:dayTax.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Day Total\"},{value:dayTotal.toFixed(2)}]);totalAmount+=dayTotal;totalTax+=dayTax;}//end for1\nexcelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total Tax\"},{value:totalTax.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total Amount\"},{value:totalAmount.toFixed(2)}]);setExcelData(excelData);console.log(\"excelData:\",excelData);}function makePurchaseReturnReportFilename(){purchaseReturnReportFileName=\"Purchase Return Report\";if(searchParams[\"from_date\"]&&searchParams[\"to_date\"]){purchaseReturnReportFileName+=\" - From \"+searchParams[\"from_date\"]+\" to \"+searchParams[\"to_date\"];}else if(searchParams[\"from_date\"]){purchaseReturnReportFileName+=\" - From \"+searchParams[\"from_date\"]+\" to \"+format(new Date(),\"dd-MMM-yyyy\");}else if(searchParams[\"to_date\"]){purchaseReturnReportFileName+=\" - Upto \"+searchParams[\"to_date\"];}else if(searchParams[\"date_str\"]){purchaseReturnReportFileName+=\" of \"+searchParams[\"date_str\"];}setPurchaseReturnReportFileName(purchaseReturnReportFileName);}function getAllPurchaseReturns(){return _getAllPurchaseReturns.apply(this,arguments);}//Search params\nfunction _getAllPurchaseReturns(){_getAllPurchaseReturns=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var requestOptions,Select,d,diff,queryParams,size,purchaseReturns,pageNo,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,code,vendor_invoice_no,date,total,net_total,discount_percent,discount,products,vendor_name,created_at,vat_price\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}d=new Date();diff=d.getTimezoneOffset();console.log(\"Timezone:\",parseFloat(diff/60));searchParams[\"timezone_offset\"]=parseFloat(diff/60);searchParams[\"stats\"]=\"1\";setSearchParams(searchParams);queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}size=500;purchaseReturns=[];pageNo=1;makePurchaseReturnReportFilename();case 15:if(!true){_context3.next=27;break;}fettingAllRecordsInProgress=true;setFettingAllRecordsInProgress(true);_context3.next=20;return fetch(\"/v1/purchase-return?\"+Select+queryParams+\"&sort=\"+sortOrder+sortField+\"&page=\"+pageNo+\"&limit=\"+size,requestOptions).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var _response$headers$get2;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isJson=(_response$headers$get2=response.headers.get(\"content-type\"))===null||_response$headers$get2===void 0?void 0:_response$headers$get2.includes(\"application/json\");_context2.t0=isJson;if(!_context2.t0){_context2.next=6;break;}_context2.next=5;return response.json();case 5:_context2.t0=_context2.sent;case 6:data=_context2.t0;if(response.ok){_context2.next=10;break;}error=data&&data.errors;return _context2.abrupt(\"return\",Promise.reject(error));case 10:setIsListLoading(false);if(!(!data.result||data.result.length===0)){_context2.next=13;break;}return _context2.abrupt(\"return\",[]);case 13:return _context2.abrupt(\"return\",data.result);case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x4){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log(error);return[];//break;\n});case 20:res=_context3.sent;if(!(res.length===0)){_context3.next=23;break;}return _context3.abrupt(\"break\",27);case 23:purchaseReturns=purchaseReturns.concat(res);pageNo++;case 25:_context3.next=15;break;case 27:allPurchaseReturns=purchaseReturns;setAllPurchaseReturns(purchaseReturns);console.log(\"allPurchaseReturns:\",allPurchaseReturns);prepareExcelData();fettingAllRecordsInProgress=false;setFettingAllRecordsInProgress(false);case 33:case\"end\":return _context3.stop();}}},_callee3);}));return _getAllPurchaseReturns.apply(this,arguments);}var _useState59=useState({}),_useState60=_slicedToArray(_useState59,2),searchParams=_useState60[0],setSearchParams=_useState60[1];var _useState61=useState(\"created_at\"),_useState62=_slicedToArray(_useState61,2),sortField=_useState62[0],setSortField=_useState62[1];var _useState63=useState(\"-\"),_useState64=_slicedToArray(_useState63,2),sortOrder=_useState64[0],setSortOrder=_useState64[1];function ObjectToSearchQueryParams(object){return Object.keys(object).map(function(key){return\"search[\".concat(key,\"]=\").concat(object[key]);}).join(\"&\");}function suggestVendors(_x){return _suggestVendors.apply(this,arguments);}function _suggestVendors(){_suggestVendors=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"Inside handle suggestVendors\");params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\".concat(queryString);}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";_context4.next=8;return fetch(\"/v1/vendor?\".concat(Select).concat(queryString),requestOptions);case 8:result=_context4.sent;_context4.next=11;return result.json();case 11:data=_context4.sent;setVendorOptions(data.result);case 13:case\"end\":return _context4.stop();}}},_callee4);}));return _suggestVendors.apply(this,arguments);}function suggestUsers(_x2){return _suggestUsers.apply(this,arguments);}function _suggestUsers(){_suggestUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"Inside handle suggestUsers\");setVendorOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context5.next=5;break;}return _context5.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";_context5.next=12;return fetch(\"/v1/user?\"+Select+queryString,requestOptions);case 12:result=_context5.sent;_context5.next=15;return result.json();case 15:data=_context5.sent;setUserOptions(data.result);case 17:case\"end\":return _context5.stop();}}},_callee5);}));return _suggestUsers.apply(this,arguments);}function searchByFieldValue(field,value){searchParams[field]=value;page=1;setPage(page);list();}function searchByDateField(field,value){if(!value){page=1;searchParams[field]=\"\";setPage(page);list();return;}var d=new Date(value);d=new Date(d.toUTCString());value=format(d,\"MMM dd yyyy\");if(field===\"date_str\"){setDateValue(value);setFromDateValue(\"\");setToDateValue(\"\");searchParams[\"from_date\"]=\"\";searchParams[\"to_date\"]=\"\";searchParams[field]=value;}else if(field===\"from_date\"){setFromDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"to_date\"){setToDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"created_at\"){setCreatedAtValue(value);setCreatedAtFromValue(\"\");setCreatedAtToValue(\"\");searchParams[\"created_at_from\"]=\"\";searchParams[\"created_at_to\"]=\"\";searchParams[field]=value;}if(field===\"created_at_from\"){setCreatedAtFromValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}else if(field===\"created_at_to\"){setCreatedAtToValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}page=1;setPage(page);list();}var _useState65=useState([]),_useState66=_slicedToArray(_useState65,2),selectedPaymentMethodList=_useState66[0],setSelectedPaymentMethodList=_useState66[1];var _useState67=useState([]),_useState68=_slicedToArray(_useState67,2),selectedPaymentStatusList=_useState68[0],setSelectedPaymentStatusList=_useState68[1];function searchByMultipleValuesField(field,values){if(field===\"created_by\"){setSelectedCreatedByUsers(values);}else if(field===\"vendor_id\"){setSelectedVendors(values);}else if(field===\"status\"){setSelectedStatusList(values);}else if(field===\"payment_status\"){setSelectedPaymentStatusList(values);}else if(field===\"payment_methods\"){setSelectedPaymentMethodList(values);}searchParams[field]=Object.values(values).map(function(model){return model.id;}).join(\",\");page=1;setPage(page);list();}var _useState69=useState(0.00),_useState70=_slicedToArray(_useState69,2),totalPaidPurchaseReturn=_useState70[0],setTotalPaidPurchaseReturn=_useState70[1];var _useState71=useState(0.00),_useState72=_slicedToArray(_useState71,2),totalUnPaidPurchaseReturn=_useState72[0],setTotalUnPaidPurchaseReturn=_useState72[1];var _useState73=useState(0.00),_useState74=_slicedToArray(_useState73,2),totalCashPurchaseReturn=_useState74[0],setTotalCashPurchaseReturn=_useState74[1];var _useState75=useState(0.00),_useState76=_slicedToArray(_useState75,2),totalBankAccountPurchaseReturn=_useState76[0],setTotalBankAccountPurchaseReturn=_useState76[1];function list(){excelData=[];setExcelData(excelData);var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};var Select=\"select=id,code,purchase_code,cash_discount,purchase_id,date,net_total,created_by_name,vendor_name,vendor_invoice_no,status,created_at,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount,store_id\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}if(props.purchase){searchParams.purchase_id=props.purchase.id;}var d=new Date();var diff=d.getTimezoneOffset();searchParams[\"timezone_offset\"]=parseFloat(diff/60);searchParams[\"stats\"]=\"1\";setSearchParams(searchParams);var queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}setIsListLoading(true);fetch(\"/v1/purchase-return?\"+Select+queryParams+\"&sort=\"+sortOrder+sortField+\"&page=\"+page+\"&limit=\"+pageSize,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error,pageCount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get(\"content-type\"))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes(\"application/json\");_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:setIsListLoading(false);setIsRefreshInProcess(false);setPurchaseReturnList(data.result);pageCount=parseInt((data.total_count+pageSize-1)/pageSize);setTotalPages(pageCount);setTotalItems(data.total_count);setOffset((page-1)*pageSize);setCurrentPageItemsCount(data.result.length);totalPurchaseReturn=data.meta.total_purchase_return;setTotalPurchaseReturn(totalPurchaseReturn);vatPrice=data.meta.vat_price;setVatPrice(vatPrice);totalDiscount=data.meta.discount;setTotalDiscount(totalDiscount);totalCashDiscount=data.meta.cash_discount;setTotalCashDiscount(totalCashDiscount);totalPaidPurchaseReturn=data.meta.paid_purchase_return;setTotalPaidPurchaseReturn(totalPaidPurchaseReturn);totalUnPaidPurchaseReturn=data.meta.unpaid_purchase_return;setTotalUnPaidPurchaseReturn(totalUnPaidPurchaseReturn);totalCashPurchaseReturn=data.meta.cash_purchase_return;setTotalCashPurchaseReturn(totalCashPurchaseReturn);totalBankAccountPurchaseReturn=data.meta.bank_account_purchase_return;setTotalBankAccountPurchaseReturn(totalBankAccountPurchaseReturn);case 34:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref.apply(this,arguments);};}()).catch(function(error){setIsListLoading(false);setIsRefreshInProcess(false);console.log(error);});}function sort(field){sortField=field;setSortField(sortField);sortOrder=sortOrder===\"-\"?\"\":\"-\";setSortOrder(sortOrder);list();}function changePageSize(size){pageSize=parseInt(size);setPageSize(pageSize);list();}function changePage(newPage){page=parseInt(newPage);setPage(page);list();}var DetailsViewRef=useRef();function openDetailsView(id){DetailsViewRef.current.open(id);}var CreateFormRef=useRef();function openUpdateForm(id){CreateFormRef.current.open(id);}//Purchase Return Payments\nvar PurchaseReturnPaymentCreateRef=useRef();function openPurchaseReturnPaymentCreateForm(purchaseReturn){PurchaseReturnPaymentCreateRef.current.open(undefined,purchaseReturn);}var PurchaseReturnPaymentDetailsViewRef=useRef();function openPurchaseReturnPaymentDetailsView(id){PurchaseReturnPaymentDetailsViewRef.current.open(id);}function openPurchaseReturnPaymentUpdateForm(id){PurchaseReturnPaymentCreateRef.current.open(id);}var _useState77=useState({}),_useState78=_slicedToArray(_useState77,2),selectedPurchaseReturn=_useState78[0],setSelectedPurchaseReturn=_useState78[1];var _useState79=useState(false),_useState80=_slicedToArray(_useState79,2),showPurchaseReturnPaymentHistory=_useState80[0],setShowPurchaseReturnPaymentHistory=_useState80[1];function openPaymentsDialogue(purchaseReturn){setSelectedPurchaseReturn(purchaseReturn);showPurchaseReturnPaymentHistory=true;setShowPurchaseReturnPaymentHistory(true);}function handlePaymentHistoryClose(){showPurchaseReturnPaymentHistory=false;setShowPurchaseReturnPaymentHistory(false);//list();\n}var PurchaseReturnPaymentListRef=useRef();var paymentStatusOptions=[{id:\"paid\",name:\"Paid\"},{id:\"not_paid\",name:\"Not Paid\"},{id:\"paid_partially\",name:\"Paid partially\"}];var paymentMethodOptions=[{id:\"cash\",name:\"cash\"},{id:\"bank_account\",name:\"Bank Account / Debit / Credit card\"}];var _useState81=useState(0.00),_useState82=_slicedToArray(_useState81,2),totalCashDiscount=_useState82[0],setTotalCashDiscount=_useState82[1];function openCreateForm(){CreateFormRef.current.open(undefined,props.purchase.id);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PurchaseReturnCreate,{ref:CreateFormRef,refreshList:list,refreshPurchaseList:props.refreshPurchaseList,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(PurchaseReturnView,{ref:DetailsViewRef}),/*#__PURE__*/_jsx(PurchaseReturnPaymentCreate,{ref:PurchaseReturnPaymentCreateRef,showToastMessage:props.showToastMessage,openDetailsView:openPurchaseReturnPaymentDetailsView}),/*#__PURE__*/_jsx(PurchaseReturnPaymentDetailsView,{ref:PurchaseReturnPaymentDetailsViewRef,openUpdateForm:openPurchaseReturnPaymentUpdateForm,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Purchase Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalPurchaseReturn,displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Paid Purchase Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:(_totalPaidPurchaseRet=totalPaidPurchaseReturn)===null||_totalPaidPurchaseRet===void 0?void 0:_totalPaidPurchaseRet.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-end\",children:[\"Cash Purchase Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalCashPurchaseReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-end\",children:[\"Bank Account Purchase Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalBankAccountPurchaseReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Credit Purchase Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalUnPaidPurchaseReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Cash Discounts: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalCashDiscount.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Purchase return Discounts: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalDiscount.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"VAT Collected: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:vatPrice.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h3\",children:\"Purchase Returns\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-end\",children:[/*#__PURE__*/_jsx(ExcelFile,{filename:purchaseReturnReportFileName,element:excelData.length>0?/*#__PURE__*/_jsx(Button,{variant:\"success\",className:\"btn btn-primary mb-3 success\",children:\"Download Purchase Return Report\"}):\"\",children:/*#__PURE__*/_jsx(ExcelSheet,{dataSet:excelData,name:purchaseReturnReportFileName})}),excelData.length==0?/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"btn btn-primary mb-3\",onClick:getAllPurchaseReturns,children:fettingAllRecordsInProgress?\"Preparing..\":\"Purchase Return Report\"}):\"\",\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:props.purchase?/*#__PURE__*/_jsxs(Button,{hide:true.toString(),variant:\"primary\",className:\"btn btn-primary mb-3\",onClick:openCreateForm,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" Create\"]}):\"\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-start\",children:\"No Purchase Returns to display\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{border:\"solid 0px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",style:{border:\"solid 0px\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){setIsRefreshInProcess(true);list();},variant:\"primary\",disabled:isRefreshInProcess,children:[isRefreshInProcess?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true}):/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-refresh\"}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:isListLoading&&/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"primary\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Size:\\xA0\"}),/*#__PURE__*/_jsxs(\"select\",{value:pageSize,onChange:function onChange(e){changePageSize(e.target.value);},className:\"form-control pull-right\",style:{border:\"solid 1px\",borderColor:\"silver\",width:\"55px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20\",children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:\"40\",children:\"40\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100\"})]})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{border:\"solid 0px\"},children:totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-start\",children:[\"showing \",offset+1,\"-\",offset+currentPageItemsCount,\" of\",\" \",totalItems]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-end\",children:[\"page \",page,\" of \",totalPages]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"code\");},children:[\"ID\",sortField===\"code\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"code\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"vendor_invoice_no\");},children:[\"Vendor Invoice No.\",sortField===\"vendor_invoice_no\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"vendor_invoice_no\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"vendor_name\");},children:[\"Vendor\",sortField===\"vendor_name\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"vendor_name\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"purchase_code\");},children:[\"Purchase ID\",sortField===\"code\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"code\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"date\");},children:[\"Date\",sortField===\"date\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"date\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"net_total\");},children:[\"Net Total\",sortField===\"net_total\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"net_total\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"cash_discount\");},children:[\"Cash Discount\",sortField===\"cash_discount\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"cash_discount\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"total_payment_paid\");},children:[\"Amount Paid\",sortField===\"total_payment_paid\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"total_payment_paid\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"balance_amount\");},children:[\"Balance\",sortField===\"balance_amount\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"balance_amount\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payments_count\");},children:[\"No.of Payments\",sortField===\"payments_count\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"payments_count\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payment_status\");},children:[\"Payment Status\",sortField===\"payment_status\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"payment_status\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payment_methods\");},children:[\"Payment Methods\",sortField===\"payment_methods\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"payment_methods\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_by\");},children:[\"Created By\",sortField===\"created_by\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"created_by\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_at\");},children:[\"Created At\",sortField===\"created_at\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"created_at\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"code\",onChange:function onChange(e){return searchByFieldValue(\"code\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"vendor_invoice_no\",onChange:function onChange(e){return searchByFieldValue(\"vendor_invoice_no\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"vendor_id\",labelKey:\"search_label\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"vendor_id\",selectedItems);},options:vendorOptions,placeholder:\"name or mob\",selected:selectedVendors,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestVendors(searchTerm);},multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"purchase_code\",onChange:function onChange(e){return searchByFieldValue(\"purchase_code\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"date_str\",value:dateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setDateValue(\"\");searchByDateField(\"date_str\",\"\");return;}searchByDateField(\"date_str\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowDateRange(!showDateRange);},children:showDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"from_date\",value:fromDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setFromDateValue(\"\");searchByDateField(\"from_date\",\"\");return;}searchByDateField(\"from_date\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"to_date\",value:toDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setToDateValue(\"\");searchByDateField(\"to_date\",\"\");return;}searchByDateField(\"to_date\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"net_total\",onChange:function onChange(e){return searchByFieldValue(\"net_total\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cash_discount\",onChange:function onChange(e){return searchByFieldValue(\"cash_discount\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"total_payment_paid\",onChange:function onChange(e){return searchByFieldValue(\"total_payment_paid\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"balance_amount\",onChange:function onChange(e){return searchByFieldValue(\"balance_amount\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"payments_count\",onChange:function onChange(e){return searchByFieldValue(\"payments_count\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"payment_status\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"payment_status\",selectedItems);},options:paymentStatusOptions,placeholder:\"Select Payment Status\",selected:selectedPaymentStatusList,highlightOnlyResult:true,multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"payment_methods\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"payment_methods\",selectedItems);},options:paymentMethodOptions,placeholder:\"Select payment methods\",selected:selectedPaymentMethodList,highlightOnlyResult:true,multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"created_by\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"created_by\",selectedItems);},options:userOptions,placeholder:\"Select Users\",selected:selectedCreatedByUsers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestUsers(searchTerm);},multiple:true})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"created_at\",value:createdAtValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtValue(\"\");searchByDateField(\"created_at\",\"\");return;}searchByDateField(\"created_at\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowCreatedAtDateRange(!showCreatedAtDateRange);},children:showCreatedAtDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showCreatedAtDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_from\",value:createdAtFromValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtFromValue(\"\");searchByDateField(\"created_at_from\",\"\");return;}searchByDateField(\"created_at_from\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_to\",value:createdAtToValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtToValue(\"\");searchByDateField(\"created_at_to\",\"\");return;}searchByDateField(\"created_at_to\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:purchasereturnList&&purchasereturnList.map(function(purchasereturn){var _purchasereturn$cash_,_purchasereturn$total,_purchasereturn$balan;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.code}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.vendor_invoice_no}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.vendor_name}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.purchase_code}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(purchasereturn.date),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.net_total}),/*#__PURE__*/_jsx(\"td\",{children:(_purchasereturn$cash_=purchasereturn.cash_discount)===null||_purchasereturn$cash_===void 0?void 0:_purchasereturn$cash_.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){openPaymentsDialogue(purchasereturn);},children:(_purchasereturn$total=purchasereturn.total_payment_paid)===null||_purchasereturn$total===void 0?void 0:_purchasereturn$total.toFixed(2)})}),/*#__PURE__*/_jsx(\"td\",{children:(_purchasereturn$balan=purchasereturn.balance_amount)===null||_purchasereturn$balan===void 0?void 0:_purchasereturn$balan.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){openPaymentsDialogue(purchasereturn);},children:purchasereturn.payments_count})}),/*#__PURE__*/_jsxs(\"td\",{children:[purchasereturn.payment_status==\"paid\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success\",children:\"Paid\"}):\"\",purchasereturn.payment_status==\"paid_partially\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-warning\",children:\"Paid Partially\"}):\"\",purchasereturn.payment_status==\"not_paid\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:\"Not Paid\"}):\"\"]}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.payment_methods&&purchasereturn.payment_methods.map(function(name){return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info\",children:name});})}),/*#__PURE__*/_jsx(\"td\",{children:purchasereturn.created_by_name}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(purchasereturn.created_at),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{className:\"btn btn-light btn-sm\",onClick:function onClick(){openUpdateForm(purchasereturn.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary btn-sm\",onClick:function onClick(){openDetailsView(purchasereturn.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item\",onClick:function onClick(){openPurchaseReturnPaymentCreateForm(purchasereturn);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\"\\xA0 Add Payment\"]})})})]})]},purchasereturn.code);})})]})}),totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"]})})})})]}),/*#__PURE__*/_jsxs(Modal,{show:showPurchaseReturnPaymentHistory,size:\"lg\",onHide:handlePaymentHistoryClose,animation:false,scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Payment history of Purchase return #\",selectedPurchaseReturn.code]}),/*#__PURE__*/_jsx(\"div\",{className:\"col align-self-end text-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handlePaymentHistoryClose,\"aria-label\":\"Close\"})})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(PurchaseReturnPaymentIndex,{ref:PurchaseReturnPaymentListRef,showToastMessage:props.showToastMessage,purchaseReturn:selectedPurchaseReturn,refreshPurchaseReturnList:list})})]})]});}export default PurchaseReturnIndex;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/purchase_return/index.js"],"names":["React","useState","useEffect","useRef","PurchaseReturnCreate","PurchaseReturnView","Cookies","Typeahead","format","DatePicker","Button","Spinner","Badge","Modal","ReactPaginate","NumberFormat","PurchaseReturnPaymentCreate","PurchaseReturnPaymentDetailsView","PurchaseReturnPaymentIndex","ReactExport","ExcelFile","ExcelSheet","PurchaseReturnIndex","props","cookies","totalPurchaseReturn","setTotalPurchaseReturn","vatPrice","setVatPrice","totalDiscount","setTotalDiscount","purchasereturnList","setPurchaseReturnList","pageSize","setPageSize","page","setPage","totalPages","setTotalPages","totalItems","setTotalItems","currentPageItemsCount","setCurrentPageItemsCount","offset","setOffset","showDateRange","setShowDateRange","selectedDate","Date","dateValue","setDateValue","fromDateValue","setFromDateValue","toDateValue","setToDateValue","showCreatedAtDateRange","setShowCreatedAtDateRange","createdAtValue","setCreatedAtValue","createdAtFromValue","setCreatedAtFromValue","createdAtToValue","setCreatedAtToValue","isListLoading","setIsListLoading","isRefreshInProcess","setIsRefreshInProcess","vendorOptions","setVendorOptions","selectedVendors","setSelectedVendors","userOptions","setUserOptions","selectedCreatedByUsers","setSelectedCreatedByUsers","statusOptions","id","name","selectedStatusList","setSelectedStatusList","list","allPurchaseReturns","setAllPurchaseReturns","excelData","setExcelData","purchaseReturnReportFileName","setPurchaseReturnReportFileName","fettingAllRecordsInProgress","setFettingAllRecordsInProgress","prepareExcelData","console","log","groupedByDate","i","length","date","push","columns","title","width","wch","wpx","data","totalAmount","totalTax","invoiceCount","purchaseReturnDate","value","dayTotal","dayTax","purchaseReturn","invoiceNo","vendor_invoice_no","code","vendor_name","products","j","product","quantity","toFixed","unit","purchasereturn_unit_price","discount","vat_price","total","makePurchaseReturnReportFilename","searchParams","getAllPurchaseReturns","requestOptions","method","headers","Authorization","get","Select","store_id","d","diff","getTimezoneOffset","parseFloat","setSearchParams","queryParams","ObjectToSearchQueryParams","size","purchaseReturns","pageNo","fetch","sortOrder","sortField","then","response","isJson","includes","json","ok","error","errors","Promise","reject","result","catch","res","concat","setSortField","setSortOrder","object","Object","keys","map","key","join","suggestVendors","searchTerm","params","queryString","suggestUsers","searchByFieldValue","field","searchByDateField","toUTCString","selectedPaymentMethodList","setSelectedPaymentMethodList","selectedPaymentStatusList","setSelectedPaymentStatusList","searchByMultipleValuesField","values","model","totalPaidPurchaseReturn","setTotalPaidPurchaseReturn","totalUnPaidPurchaseReturn","setTotalUnPaidPurchaseReturn","totalCashPurchaseReturn","setTotalCashPurchaseReturn","totalBankAccountPurchaseReturn","setTotalBankAccountPurchaseReturn","purchase","purchase_id","pageCount","parseInt","total_count","meta","total_purchase_return","totalCashDiscount","cash_discount","setTotalCashDiscount","paid_purchase_return","unpaid_purchase_return","cash_purchase_return","bank_account_purchase_return","sort","changePageSize","changePage","newPage","DetailsViewRef","openDetailsView","current","open","CreateFormRef","openUpdateForm","PurchaseReturnPaymentCreateRef","openPurchaseReturnPaymentCreateForm","undefined","PurchaseReturnPaymentDetailsViewRef","openPurchaseReturnPaymentDetailsView","openPurchaseReturnPaymentUpdateForm","selectedPurchaseReturn","setSelectedPurchaseReturn","showPurchaseReturnPaymentHistory","setShowPurchaseReturnPaymentHistory","openPaymentsDialogue","handlePaymentHistoryClose","PurchaseReturnPaymentListRef","paymentStatusOptions","paymentMethodOptions","openCreateForm","refreshPurchaseList","showToastMessage","toString","border","e","target","borderColor","event","selected","overflowX","textDecoration","cursor","selectedItems","color","purchasereturn","purchase_code","net_total","total_payment_paid","balance_amount","payments_count","payment_status","payment_methods","created_by_name","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport PurchaseReturnCreate from \"./create.js\";\nimport PurchaseReturnView from \"./view.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport { format } from \"date-fns\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Button, Spinner, Badge,Modal } from \"react-bootstrap\";\nimport ReactPaginate from \"react-paginate\";\nimport NumberFormat from \"react-number-format\";\n\nimport PurchaseReturnPaymentCreate from \"./../purchase_return_payment/create.js\";\nimport PurchaseReturnPaymentDetailsView from \"./../purchase_return_payment/view.js\";\nimport PurchaseReturnPaymentIndex from \"./../purchase_return_payment/index.js\";\n\nimport ReactExport from 'react-data-export';\nconst ExcelFile = ReactExport.ExcelFile;\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n\n\nfunction PurchaseReturnIndex(props) {\n    const cookies = new Cookies();\n\n    let [totalPurchaseReturn, setTotalPurchaseReturn] = useState(0.00);\n    let [vatPrice, setVatPrice] = useState(0.00);\n    let [totalDiscount, setTotalDiscount] = useState(0.00);\n\n    //list\n    const [purchasereturnList, setPurchaseReturnList] = useState([]);\n\n    //pagination\n    let [pageSize, setPageSize] = useState(5);\n    let [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(0);\n    const [totalItems, setTotalItems] = useState(1);\n    const [currentPageItemsCount, setCurrentPageItemsCount] = useState(0);\n    const [offset, setOffset] = useState(0);\n\n    //Date filter\n    const [showDateRange, setShowDateRange] = useState(false);\n    const selectedDate = new Date();\n    let [dateValue, setDateValue] = useState(\"\");\n    const [fromDateValue, setFromDateValue] = useState(\"\");\n    const [toDateValue, setToDateValue] = useState(\"\");\n\n    //Created At filter\n    const [showCreatedAtDateRange, setShowCreatedAtDateRange] = useState(false);\n    const [createdAtValue, setCreatedAtValue] = useState(\"\");\n    const [createdAtFromValue, setCreatedAtFromValue] = useState(\"\");\n    const [createdAtToValue, setCreatedAtToValue] = useState(\"\");\n\n    //loader flag\n    const [isListLoading, setIsListLoading] = useState(false);\n    const [isRefreshInProcess, setIsRefreshInProcess] = useState(false);\n\n    //Vendor Auto Suggestion\n    const [vendorOptions, setVendorOptions] = useState([]);\n    const [selectedVendors, setSelectedVendors] = useState([]);\n\n    //Created By User Auto Suggestion\n    const [userOptions, setUserOptions] = useState([]);\n    const [selectedCreatedByUsers, setSelectedCreatedByUsers] = useState([]);\n\n    //Status Auto Suggestion\n    const statusOptions = [\n        {\n            id: \"sent\",\n            name: \"Sent\",\n        },\n        {\n            id: \"pending\",\n            name: \"Pending\",\n        },\n        {\n            id: \"accepted\",\n            name: \"Accepted\",\n        },\n        {\n            id: \"rejected\",\n            name: \"Rejected\",\n        },\n        {\n            id: \"cancelled\",\n            name: \"Cancelled\",\n        },\n        {\n            id: \"deleted\",\n            name: \"Deleted\",\n        },\n    ];\n\n    const [selectedStatusList, setSelectedStatusList] = useState([]);\n\n    useEffect(() => {\n        list();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n\n    let [allPurchaseReturns, setAllPurchaseReturns] = useState([]);\n    let [excelData, setExcelData] = useState([]);\n    let [purchaseReturnReportFileName, setPurchaseReturnReportFileName] = useState(\"Purchase Return Report\");\n    let [fettingAllRecordsInProgress, setFettingAllRecordsInProgress] = useState(false);\n\n    function prepareExcelData() {\n        console.log(\"Inside prepareExcelData()\");\n        var groupedByDate = [];\n        for (var i = 0; i < allPurchaseReturns.length; i++) {\n            let date = format(\n                new Date(allPurchaseReturns[i].date),\n                \"dd-MMM-yyyy\"\n            );\n            if (!groupedByDate[date]) {\n                groupedByDate[date] = [];\n            }\n\n            groupedByDate[date].push(allPurchaseReturns[i]);\n\n        }\n\n        console.log(\"groupedByDate:\", groupedByDate);\n\n        excelData = [{\n            columns: [\n                { title: \"Description\", width: { wch: 50 } },//pixels width \n                { title: \"Quantity\", width: { wpx: 90 } },//char width \n                { title: \"Unit\", width: { wpx: 90 } },\n                { title: \"Rate\", width: { wpx: 90 } },\n                { title: \"Gross\", width: { wpx: 90 } },\n                { title: \"Disc %\", width: { wpx: 90 } },\n                { title: \"Disc\", width: { wpx: 90 } },\n                { title: \"Tax %\", width: { wpx: 90 } },\n                { title: \"Tax Amount\", width: { wpx: 90 } },\n                { title: \"Net Amount\", width: { wpx: 90 } },\n            ],\n            data: [],\n        }];\n\n\n        let totalAmount = 0;\n        let totalTax = 0;\n\n        let invoiceCount = 0;\n        for (let purchaseReturnDate in groupedByDate) {\n\n            console.log(\"purchaseReturnDate:\", purchaseReturnDate);\n            excelData[0].data.push([{ value: \"Inv Date: \" + purchaseReturnDate }]);\n            let dayTotal = 0.00;\n            let dayTax = 0.00;\n\n            for (var i = 0; i < groupedByDate[purchaseReturnDate].length > 0; i++) {\n                invoiceCount++;\n                let purchaseReturn = groupedByDate[purchaseReturnDate][i];\n                let invoiceNo = purchaseReturn.vendor_invoice_no ? purchaseReturn.vendor_invoice_no + \" / \" + purchaseReturn.code : purchaseReturn.code;\n                excelData[0].data.push([{ value: \"Inv No (\" + invoiceNo + \") - \" + invoiceCount + \" [\" + purchaseReturn.vendor_name + \"]\" }]);\n\n                if (!purchaseReturn.products) {\n                    continue;\n                }\n\n                for (var j = 0; j < purchaseReturn.products.length; j++) {\n\n                    let product = purchaseReturn.products[j];\n\n                    excelData[0].data.push([\n                        {\n                            value: product.name\n                        },\n                        {\n                            value: product.quantity.toFixed(2),\n                        },\n                        {\n                            value: product.unit ? product.unit : \"PCs\",\n                        },\n                        {\n                            value: product.purchasereturn_unit_price ? product.purchasereturn_unit_price.toFixed(2) : 0.00,\n                        },\n                        {\n                            value: (product.purchasereturn_unit_price * product.quantity).toFixed(2)\n                        },\n                        {\n                            value: \"0.00\",\n                        },\n                        {\n                            value: \"0.00\",\n                        },\n                        {\n                            value: \"15.00\",\n                        },\n                        {\n                            value: ((product.purchasereturn_unit_price * product.quantity).toFixed(2) * 0.15).toFixed(2),\n                        },\n                        {\n                            value: (product.purchasereturn_unit_price * product.quantity).toFixed(2),\n                        },\n                    ]);\n                }\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Discount\",\n                    }, {\n                        value: purchaseReturn.discount.toFixed(2),\n                    },\n                ]);\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Tax\",\n                    }, {\n                        value: purchaseReturn.vat_price.toFixed(2),\n                    },\n                ]);\n\n\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Total\",\n                    }, {\n                        value: (purchaseReturn.total - purchaseReturn.discount).toFixed(2),\n                    },\n                ]);\n\n                dayTotal += (purchaseReturn.total - purchaseReturn.discount);\n                dayTax += purchaseReturn.vat_price;\n\n            }\n\n            excelData[0].data.push([\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                {\n                    value: \"Day Tax\",\n                }, {\n                    value: dayTax.toFixed(2),\n                },\n            ]);\n\n\n            excelData[0].data.push([\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                {\n                    value: \"Day Total\",\n                }, {\n                    value: dayTotal.toFixed(2),\n                },\n            ]);\n\n\n            totalAmount += dayTotal;\n            totalTax += dayTax;\n\n        }//end for1\n\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"\",\n            }, {\n                value: \"\",\n            },\n        ]);\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"Total Tax\",\n            }, {\n                value: totalTax.toFixed(2),\n            },\n        ]);\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"Total Amount\",\n            }, {\n                value: totalAmount.toFixed(2),\n            },\n        ]);\n\n        setExcelData(excelData);\n\n        console.log(\"excelData:\", excelData);\n    }\n\n    function makePurchaseReturnReportFilename() {\n        purchaseReturnReportFileName = \"Purchase Return Report\";\n        if (searchParams[\"from_date\"] && searchParams[\"to_date\"]) {\n            purchaseReturnReportFileName += \" - From \" + searchParams[\"from_date\"] + \" to \" + searchParams[\"to_date\"];\n        } else if (searchParams[\"from_date\"]) {\n            purchaseReturnReportFileName += \" - From \" + searchParams[\"from_date\"] + \" to \" + format(\n                new Date(),\n                \"dd-MMM-yyyy\"\n            );\n        } else if (searchParams[\"to_date\"]) {\n            purchaseReturnReportFileName += \" - Upto \" + searchParams[\"to_date\"];\n        } else if (searchParams[\"date_str\"]) {\n            purchaseReturnReportFileName += \" of \" + searchParams[\"date_str\"];\n        }\n\n        setPurchaseReturnReportFileName(purchaseReturnReportFileName);\n    }\n    async function getAllPurchaseReturns() {\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,code,vendor_invoice_no,date,total,net_total,discount_percent,discount,products,vendor_name,created_at,vat_price\";\n\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n\n        const d = new Date();\n        let diff = d.getTimezoneOffset();\n        console.log(\"Timezone:\", parseFloat(diff / 60));\n        searchParams[\"timezone_offset\"] = parseFloat(diff / 60);\n        searchParams[\"stats\"] = \"1\";\n\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        let size = 500;\n\n        let purchaseReturns = [];\n        var pageNo = 1;\n\n        makePurchaseReturnReportFilename();\n\n        for (; true;) {\n\n            fettingAllRecordsInProgress = true;\n            setFettingAllRecordsInProgress(true);\n            let res = await fetch(\n                \"/v1/purchase-return?\" +\n                Select +\n                queryParams +\n                \"&sort=\" +\n                sortOrder +\n                sortField +\n                \"&page=\" +\n                pageNo +\n                \"&limit=\" +\n                size,\n                requestOptions\n            )\n                .then(async (response) => {\n                    const isJson = response.headers\n                        .get(\"content-type\")\n                        ?.includes(\"application/json\");\n                    const data = isJson && (await response.json());\n\n                    // check for error response\n                    if (!response.ok) {\n                        const error = data && data.errors;\n                        return Promise.reject(error);\n                    }\n\n                    setIsListLoading(false);\n                    if (!data.result || data.result.length === 0) {\n                        return [];\n                    }\n\n\n                    // console.log(\"Orders:\", orders);\n\n                    return data.result;\n\n\n                })\n                .catch((error) => {\n                    console.log(error);\n                    return [];\n                    //break;\n\n                });\n            if (res.length === 0) {\n                break;\n            }\n            purchaseReturns = purchaseReturns.concat(res);\n            pageNo++;\n        }\n\n        allPurchaseReturns = purchaseReturns;\n        setAllPurchaseReturns(purchaseReturns);\n\n        console.log(\"allPurchaseReturns:\", allPurchaseReturns);\n        prepareExcelData();\n        fettingAllRecordsInProgress = false;\n        setFettingAllRecordsInProgress(false);\n\n    }\n\n\n\n    //Search params\n    const [searchParams, setSearchParams] = useState({});\n    let [sortField, setSortField] = useState(\"created_at\");\n    let [sortOrder, setSortOrder] = useState(\"-\");\n\n    function ObjectToSearchQueryParams(object) {\n        return Object.keys(object)\n            .map(function (key) {\n                return `search[${key}]=${object[key]}`;\n            })\n            .join(\"&\");\n    }\n\n    async function suggestVendors(searchTerm) {\n        console.log(\"Inside handle suggestVendors\");\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = `&${queryString}`;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n        let result = await fetch(`/v1/vendor?${Select}${queryString}`, requestOptions);\n        let data = await result.json();\n\n        setVendorOptions(data.result);\n    }\n\n    async function suggestUsers(searchTerm) {\n        console.log(\"Inside handle suggestUsers\");\n        setVendorOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        let result = await fetch(\n            \"/v1/user?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setUserOptions(data.result);\n    }\n\n    function searchByFieldValue(field, value) {\n        searchParams[field] = value;\n\n        page = 1;\n        setPage(page);\n        list();\n    }\n\n    function searchByDateField(field, value) {\n        if (!value) {\n            page = 1;\n            searchParams[field] = \"\";\n            setPage(page);\n            list();\n            return;\n        }\n\n        let d = new Date(value);\n        d = new Date(d.toUTCString());\n\n        value = format(d, \"MMM dd yyyy\");\n        if (field === \"date_str\") {\n            setDateValue(value);\n            setFromDateValue(\"\");\n            setToDateValue(\"\");\n            searchParams[\"from_date\"] = \"\";\n            searchParams[\"to_date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"from_date\") {\n            setFromDateValue(value);\n            setDateValue(\"\");\n            searchParams[\"date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"to_date\") {\n            setToDateValue(value);\n            setDateValue(\"\");\n            searchParams[\"date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"created_at\") {\n            setCreatedAtValue(value);\n            setCreatedAtFromValue(\"\");\n            setCreatedAtToValue(\"\");\n            searchParams[\"created_at_from\"] = \"\";\n            searchParams[\"created_at_to\"] = \"\";\n            searchParams[field] = value;\n        }\n        if (field === \"created_at_from\") {\n            setCreatedAtFromValue(value);\n            setCreatedAtValue(\"\");\n            searchParams[\"created_at\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"created_at_to\") {\n            setCreatedAtToValue(value);\n            setCreatedAtValue(\"\");\n            searchParams[\"created_at\"] = \"\";\n            searchParams[field] = value;\n        }\n\n        page = 1;\n        setPage(page);\n\n        list();\n    }\n\n    const [selectedPaymentMethodList, setSelectedPaymentMethodList] = useState([]);\n    const [selectedPaymentStatusList, setSelectedPaymentStatusList] = useState([]);\n\n    function searchByMultipleValuesField(field, values) {\n        if (field === \"created_by\") {\n            setSelectedCreatedByUsers(values);\n        } else if (field === \"vendor_id\") {\n            setSelectedVendors(values);\n        } else if (field === \"status\") {\n            setSelectedStatusList(values);\n        } else if (field === \"payment_status\") {\n            setSelectedPaymentStatusList(values);\n        } else if (field === \"payment_methods\") {\n            setSelectedPaymentMethodList(values);\n        }\n\n        searchParams[field] = Object.values(values)\n            .map(function (model) {\n                return model.id;\n            })\n            .join(\",\");\n\n        page = 1;\n        setPage(page);\n\n        list();\n    }\n\n    let [totalPaidPurchaseReturn, setTotalPaidPurchaseReturn] = useState(0.00);\n    let [totalUnPaidPurchaseReturn, setTotalUnPaidPurchaseReturn] = useState(0.00);\n    let [totalCashPurchaseReturn, setTotalCashPurchaseReturn] = useState(0.00);\n    let [totalBankAccountPurchaseReturn, setTotalBankAccountPurchaseReturn] = useState(0.00);\n\n    function list() {\n        excelData = [];\n        setExcelData(excelData);\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,code,purchase_code,cash_discount,purchase_id,date,net_total,created_by_name,vendor_name,vendor_invoice_no,status,created_at,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount,store_id\";\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n\n        if (props.purchase) {\n            searchParams.purchase_id = props.purchase.id;\n        }\n\n        const d = new Date();\n        let diff = d.getTimezoneOffset();\n        searchParams[\"timezone_offset\"] = parseFloat(diff / 60);\n        searchParams[\"stats\"] = \"1\";\n\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        setIsListLoading(true);\n        fetch(\n            \"/v1/purchase-return?\" +\n            Select +\n            queryParams +\n            \"&sort=\" +\n            sortOrder +\n            sortField +\n            \"&page=\" +\n            page +\n            \"&limit=\" +\n            pageSize,\n            requestOptions\n        )\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    const error = data && data.errors;\n                    return Promise.reject(error);\n                }\n\n                setIsListLoading(false);\n                setIsRefreshInProcess(false);\n                setPurchaseReturnList(data.result);\n\n                let pageCount = parseInt((data.total_count + pageSize - 1) / pageSize);\n\n                setTotalPages(pageCount);\n                setTotalItems(data.total_count);\n                setOffset((page - 1) * pageSize);\n                setCurrentPageItemsCount(data.result.length);\n\n                totalPurchaseReturn = data.meta.total_purchase_return;\n                setTotalPurchaseReturn(totalPurchaseReturn);\n\n                vatPrice = data.meta.vat_price;\n                setVatPrice(vatPrice);\n\n                totalDiscount = data.meta.discount;\n                setTotalDiscount(totalDiscount);\n\n                totalCashDiscount = data.meta.cash_discount;\n                setTotalCashDiscount(totalCashDiscount);\n\n                totalPaidPurchaseReturn = data.meta.paid_purchase_return;\n                setTotalPaidPurchaseReturn(totalPaidPurchaseReturn);\n\n                totalUnPaidPurchaseReturn = data.meta.unpaid_purchase_return;\n                setTotalUnPaidPurchaseReturn(totalUnPaidPurchaseReturn);\n\n                totalCashPurchaseReturn = data.meta.cash_purchase_return;\n                setTotalCashPurchaseReturn(totalCashPurchaseReturn);\n\n                totalBankAccountPurchaseReturn = data.meta.bank_account_purchase_return\n                setTotalBankAccountPurchaseReturn(totalBankAccountPurchaseReturn);\n\n            })\n            .catch((error) => {\n                setIsListLoading(false);\n                setIsRefreshInProcess(false);\n                console.log(error);\n            });\n    }\n\n    function sort(field) {\n        sortField = field;\n        setSortField(sortField);\n        sortOrder = sortOrder === \"-\" ? \"\" : \"-\";\n        setSortOrder(sortOrder);\n        list();\n    }\n\n    function changePageSize(size) {\n        pageSize = parseInt(size);\n        setPageSize(pageSize);\n        list();\n    }\n\n    function changePage(newPage) {\n        page = parseInt(newPage);\n        setPage(page);\n        list();\n    }\n\n\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        DetailsViewRef.current.open(id);\n    }\n\n    const CreateFormRef = useRef();\n    function openUpdateForm(id) {\n        CreateFormRef.current.open(id);\n    }\n\n\n    //Purchase Return Payments\n    const PurchaseReturnPaymentCreateRef = useRef();\n    function openPurchaseReturnPaymentCreateForm(purchaseReturn) {\n        PurchaseReturnPaymentCreateRef.current.open(undefined, purchaseReturn);\n    }\n\n    const PurchaseReturnPaymentDetailsViewRef = useRef();\n    function openPurchaseReturnPaymentDetailsView(id) {\n        PurchaseReturnPaymentDetailsViewRef.current.open(id);\n    }\n\n    function openPurchaseReturnPaymentUpdateForm(id) {\n        PurchaseReturnPaymentCreateRef.current.open(id);\n    }\n\n    const [selectedPurchaseReturn, setSelectedPurchaseReturn] = useState({});\n    let [showPurchaseReturnPaymentHistory, setShowPurchaseReturnPaymentHistory] = useState(false);\n\n    function openPaymentsDialogue(purchaseReturn) {\n        setSelectedPurchaseReturn(purchaseReturn);\n        showPurchaseReturnPaymentHistory = true;\n        setShowPurchaseReturnPaymentHistory(true);\n    }\n\n    function handlePaymentHistoryClose() {\n        showPurchaseReturnPaymentHistory = false;\n        setShowPurchaseReturnPaymentHistory(false);\n        //list();\n    }\n\n\n    const PurchaseReturnPaymentListRef = useRef();\n\n    const paymentStatusOptions = [\n        {\n            id: \"paid\",\n            name: \"Paid\",\n        },\n        {\n            id: \"not_paid\",\n            name: \"Not Paid\",\n        },\n        {\n            id: \"paid_partially\",\n            name: \"Paid partially\",\n        },\n    ];\n    const paymentMethodOptions = [\n        {\n            id: \"cash\",\n            name: \"cash\",\n        },\n        {\n            id: \"bank_account\",\n            name: \"Bank Account / Debit / Credit card\",\n        },\n    ];\n\n    let [totalCashDiscount, setTotalCashDiscount] = useState(0.00);\n\n    function openCreateForm() {\n        CreateFormRef.current.open(undefined, props.purchase.id);\n    }\n\n\n    return (\n        <>\n            <PurchaseReturnCreate ref={CreateFormRef} refreshList={list} refreshPurchaseList={props.refreshPurchaseList}  showToastMessage={props.showToastMessage} />\n            <PurchaseReturnView ref={DetailsViewRef} />\n\n            <PurchaseReturnPaymentCreate ref={PurchaseReturnPaymentCreateRef} showToastMessage={props.showToastMessage} openDetailsView={openPurchaseReturnPaymentDetailsView} />\n            <PurchaseReturnPaymentDetailsView ref={PurchaseReturnPaymentDetailsViewRef} openUpdateForm={openPurchaseReturnPaymentUpdateForm} showToastMessage={props.showToastMessage} />\n\n            <div className=\"container-fluid p-0\">\n                <div className=\"row\">\n\n                    <div className=\"col\">\n                        <h1 className=\"text-end\">\n                            Purchase Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalPurchaseReturn}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            Paid Purchase Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalPaidPurchaseReturn?.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h4 className=\"text-end\">\n                            Cash Purchase Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalCashPurchaseReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h4>\n                        <h4 className=\"text-end\">\n                            Bank Account Purchase Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalBankAccountPurchaseReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h4>\n                        <h1 className=\"text-end\">\n                            Credit Purchase Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalUnPaidPurchaseReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            Cash Discounts: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalCashDiscount.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            Purchase return Discounts: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalDiscount.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            VAT Collected: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={vatPrice.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" \"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                    </div>\n\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col\">\n                        <h1 className=\"h3\">Purchase Returns</h1>\n                    </div>\n\n                    <div className=\"col text-end\">\n                        <ExcelFile filename={purchaseReturnReportFileName} element={excelData.length > 0 ? <Button variant=\"success\" className=\"btn btn-primary mb-3 success\" >Download Purchase Return Report</Button> : \"\"}>\n                            <ExcelSheet dataSet={excelData} name={purchaseReturnReportFileName} />\n                        </ExcelFile>\n\n                        {excelData.length == 0 ? <Button variant=\"primary\" className=\"btn btn-primary mb-3\" onClick={getAllPurchaseReturns} >{fettingAllRecordsInProgress ? \"Preparing..\" : \"Purchase Return Report\"}</Button> : \"\"}\n                        &nbsp;&nbsp;\n\n                        <div className=\"col text-end\">\n                            {props.purchase ? <Button\n                                hide={true.toString()}\n                                variant=\"primary\"\n                                className=\"btn btn-primary mb-3\"\n                                onClick={openCreateForm}\n                            >\n                                <i className=\"bi bi-plus-lg\"></i> Create\n                            </Button> : \"\"}\n                        </div>\n\n                        {/*\n                        <Button\n                            hide={true}\n                            variant=\"primary\"\n                            className=\"btn btn-primary mb-3\"\n                            onClick={openCreateForm}\n                        >\n                            <i className=\"bi bi-plus-lg\"></i> Create\n                        </Button>\n                        */}\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <div className=\"card\">\n                            {/*\n  <div   className=\"card-header\">\n                        <h5   className=\"card-title mb-0\"></h5>\n                    </div>\n                    */}\n                            <div className=\"card-body\">\n                                <div className=\"row\">\n                                    {totalItems === 0 && (\n                                        <div className=\"col\">\n                                            <p className=\"text-start\">No Purchase Returns to display</p>\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"row\" style={{ border: \"solid 0px\" }}>\n                                    <div className=\"col text-start\" style={{ border: \"solid 0px\" }}>\n                                        <Button\n                                            onClick={() => {\n                                                setIsRefreshInProcess(true);\n                                                list();\n                                            }}\n                                            variant=\"primary\"\n                                            disabled={isRefreshInProcess}\n                                        >\n                                            {isRefreshInProcess ? (\n                                                <Spinner\n                                                    as=\"span\"\n                                                    animation=\"border\"\n                                                    size=\"sm\"\n                                                    role=\"status\"\n                                                    aria-hidden={true}\n                                                />\n                                            ) : (\n                                                <i className=\"fa fa-refresh\"></i>\n                                            )}\n                                            <span className=\"visually-hidden\">Loading...</span>\n                                        </Button>\n                                    </div>\n                                    <div className=\"col text-center\">\n                                        {isListLoading && (\n                                            <Spinner animation=\"grow\" variant=\"primary\" />\n                                        )}\n                                    </div>\n                                    <div className=\"col text-end\">\n                                        {totalItems > 0 && (\n                                            <>\n                                                <label className=\"form-label\">Size:&nbsp;</label>\n                                                <select\n                                                    value={pageSize}\n                                                    onChange={(e) => {\n                                                        changePageSize(e.target.value);\n                                                    }}\n                                                    className=\"form-control pull-right\"\n                                                    style={{\n                                                        border: \"solid 1px\",\n                                                        borderColor: \"silver\",\n                                                        width: \"55px\",\n                                                    }}\n                                                >\n                                                    <option value=\"5\">\n                                                        5\n                                                    </option>\n                                                    <option value=\"10\">\n                                                        10\n                                                    </option>\n                                                    <option value=\"20\">20</option>\n                                                    <option value=\"40\">40</option>\n                                                    <option value=\"50\">50</option>\n                                                    <option value=\"100\">100</option>\n                                                </select>\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n\n                                <br />\n                                <div className=\"row\">\n                                    <div className=\"col\" style={{ border: \"solid 0px\" }}>\n                                        {totalPages ? <ReactPaginate\n                                            breakLabel=\"...\"\n                                            nextLabel=\"next >\"\n                                            onPageChange={(event) => {\n                                                changePage(event.selected + 1);\n                                            }}\n                                            pageRangeDisplayed={5}\n                                            pageCount={totalPages}\n                                            previousLabel=\"< previous\"\n                                            renderOnZeroPageCount={null}\n                                            className=\"pagination  flex-wrap\"\n                                            pageClassName=\"page-item\"\n                                            pageLinkClassName=\"page-link\"\n                                            activeClassName=\"active\"\n                                            previousClassName=\"page-item\"\n                                            nextClassName=\"page-item\"\n                                            previousLinkClassName=\"page-link\"\n                                            nextLinkClassName=\"page-link\"\n                                            forcePage={page - 1}\n                                        /> : \"\"}\n                                    </div>\n                                </div>\n                                <div className=\"row\">\n                                    {totalItems > 0 && (\n                                        <>\n                                            <div className=\"col text-start\">\n                                                <p className=\"text-start\">\n                                                    showing {offset + 1}-{offset + currentPageItemsCount} of{\" \"}\n                                                    {totalItems}\n                                                </p>\n                                            </div>\n\n                                            <div className=\"col text-end\">\n                                                <p className=\"text-end\">\n                                                    page {page} of {totalPages}\n                                                </p>\n                                            </div>\n                                        </>\n                                    )}\n                                </div>\n                                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                                    <table className=\"table table-striped table-sm table-bordered\">\n                                        <thead>\n                                            <tr className=\"text-center\">\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"code\");\n                                                        }}\n                                                    >\n                                                        ID\n                                                        {sortField === \"code\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"code\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"vendor_invoice_no\");\n                                                        }}\n                                                    >\n                                                        Vendor Invoice No.\n                                                        {sortField === \"vendor_invoice_no\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"vendor_invoice_no\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"vendor_name\");\n                                                        }}\n                                                    >\n                                                        Vendor\n                                                        {sortField === \"vendor_name\" &&\n                                                            sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"vendor_name\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"purchase_code\");\n                                                        }}\n                                                    >\n                                                        Purchase ID\n                                                        {sortField === \"code\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"code\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"date\");\n                                                        }}\n                                                    >\n                                                        Date\n                                                        {sortField === \"date\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"date\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"net_total\");\n                                                        }}\n                                                    >\n                                                        Net Total\n                                                        {sortField === \"net_total\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"net_total\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"cash_discount\");\n                                                        }}\n                                                    >\n                                                        Cash Discount\n                                                        {sortField === \"cash_discount\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"cash_discount\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"total_payment_paid\");\n                                                        }}\n                                                    >\n                                                        Amount Paid\n                                                        {sortField === \"total_payment_paid\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"total_payment_paid\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"balance_amount\");\n                                                        }}\n                                                    >\n                                                        Balance\n                                                        {sortField === \"balance_amount\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"balance_amount\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payments_count\");\n                                                        }}\n                                                    >\n                                                        No.of Payments\n                                                        {sortField === \"payments_count\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payments_count\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payment_status\");\n                                                        }}\n                                                    >\n                                                        Payment Status\n                                                        {sortField === \"payment_status\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payment_status\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payment_methods\");\n                                                        }}\n                                                    >\n                                                        Payment Methods\n                                                        {sortField === \"payment_methods\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payment_methods\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"created_by\");\n                                                        }}\n                                                    >\n                                                        Created By\n                                                        {sortField === \"created_by\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"created_by\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"created_at\");\n                                                        }}\n                                                    >\n                                                        Created At\n                                                        {sortField === \"created_at\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"created_at\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>Actions</th>\n                                            </tr>\n                                        </thead>\n\n                                        <thead>\n                                            <tr className=\"text-center\">\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"code\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"code\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"vendor_invoice_no\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"vendor_invoice_no\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"vendor_id\"\n                                                        labelKey=\"search_label\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"vendor_id\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={vendorOptions}\n                                                        placeholder=\"name or mob\"\n                                                        selected={selectedVendors}\n                                                        highlightOnlyResult={true}\n                                                        onInputChange={(searchTerm, e) => {\n                                                            suggestVendors(searchTerm);\n                                                        }}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"purchase_code\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"purchase_code\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <DatePicker\n                                                        id=\"date_str\"\n                                                        value={dateValue}\n                                                        selected={selectedDate}\n                                                        className=\"form-control\"\n                                                        dateFormat=\"MMM dd yyyy\"\n                                                        onChange={(date) => {\n                                                            if (!date) {\n                                                                setDateValue(\"\");\n                                                                searchByDateField(\"date_str\", \"\");\n                                                                return;\n                                                            }\n                                                            searchByDateField(\"date_str\", date);\n                                                        }}\n                                                    />\n                                                    <small\n                                                        style={{\n                                                            color: \"blue\",\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={(e) => setShowDateRange(!showDateRange)}\n                                                    >\n                                                        {showDateRange ? \"Less..\" : \"More..\"}\n                                                    </small>\n                                                    <br />\n\n                                                    {showDateRange ? (\n                                                        <span className=\"text-left\">\n                                                            From:{\" \"}\n                                                            <DatePicker\n                                                                id=\"from_date\"\n                                                                value={fromDateValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setFromDateValue(\"\");\n                                                                        searchByDateField(\"from_date\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"from_date\", date);\n                                                                }}\n                                                            />\n                                                            To:{\" \"}\n                                                            <DatePicker\n                                                                id=\"to_date\"\n                                                                value={toDateValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setToDateValue(\"\");\n                                                                        searchByDateField(\"to_date\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"to_date\", date);\n                                                                }}\n                                                            />\n                                                        </span>\n                                                    ) : null}\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"net_total\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"net_total\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"cash_discount\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"cash_discount\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"total_payment_paid\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"total_payment_paid\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"balance_amount\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"balance_amount\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"payments_count\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"payments_count\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"payment_status\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"payment_status\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={paymentStatusOptions}\n                                                        placeholder=\"Select Payment Status\"\n                                                        selected={selectedPaymentStatusList}\n                                                        highlightOnlyResult={true}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"payment_methods\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"payment_methods\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={paymentMethodOptions}\n                                                        placeholder=\"Select payment methods\"\n                                                        selected={selectedPaymentMethodList}\n                                                        highlightOnlyResult={true}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"created_by\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"created_by\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={userOptions}\n                                                        placeholder=\"Select Users\"\n                                                        selected={selectedCreatedByUsers}\n                                                        highlightOnlyResult={true}\n                                                        onInputChange={(searchTerm, e) => {\n                                                            suggestUsers(searchTerm);\n                                                        }}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <DatePicker\n                                                        id=\"created_at\"\n                                                        value={createdAtValue}\n                                                        selected={selectedDate}\n                                                        className=\"form-control\"\n                                                        dateFormat=\"MMM dd yyyy\"\n                                                        onChange={(date) => {\n                                                            if (!date) {\n                                                                setCreatedAtValue(\"\");\n                                                                searchByDateField(\"created_at\", \"\");\n                                                                return;\n                                                            }\n                                                            searchByDateField(\"created_at\", date);\n                                                        }}\n                                                    />\n                                                    <small\n                                                        style={{\n                                                            color: \"blue\",\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={(e) =>\n                                                            setShowCreatedAtDateRange(!showCreatedAtDateRange)\n                                                        }\n                                                    >\n                                                        {showCreatedAtDateRange ? \"Less..\" : \"More..\"}\n                                                    </small>\n                                                    <br />\n\n                                                    {showCreatedAtDateRange ? (\n                                                        <span className=\"text-left\">\n                                                            From:{\" \"}\n                                                            <DatePicker\n                                                                id=\"created_at_from\"\n                                                                value={createdAtFromValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setCreatedAtFromValue(\"\");\n                                                                        searchByDateField(\"created_at_from\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"created_at_from\", date);\n                                                                }}\n                                                            />\n                                                            To:{\" \"}\n                                                            <DatePicker\n                                                                id=\"created_at_to\"\n                                                                value={createdAtToValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setCreatedAtToValue(\"\");\n                                                                        searchByDateField(\"created_at_to\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"created_at_to\", date);\n                                                                }}\n                                                            />\n                                                        </span>\n                                                    ) : null}\n                                                </th>\n                                                <th></th>\n                                            </tr>\n                                        </thead>\n\n                                        <tbody className=\"text-center\">\n                                            {purchasereturnList &&\n                                                purchasereturnList.map((purchasereturn) => (\n                                                    <tr key={purchasereturn.code} >\n                                                        <td>{purchasereturn.code}</td>\n                                                        <td>{purchasereturn.vendor_invoice_no}</td>\n                                                        <td>{purchasereturn.vendor_name}</td>\n                                                        <td>{purchasereturn.purchase_code}</td>\n                                                        <td>\n                                                            {format(\n                                                                new Date(purchasereturn.date),\n                                                                \"MMM dd yyyy h:mma\"\n                                                            )}\n                                                        </td>\n                                                        <td>{purchasereturn.net_total}</td>\n                                                        <td>{purchasereturn.cash_discount?.toFixed(2)}</td>\n                                                        <td>\n                                                            <Button variant=\"link\" onClick={() => {\n                                                                openPaymentsDialogue(purchasereturn);\n                                                            }}>\n                                                                {purchasereturn.total_payment_paid?.toFixed(2)}\n                                                            </Button>\n                                                        </td>\n                                                        <td>{purchasereturn.balance_amount?.toFixed(2)}</td>\n                                                        <td>\n                                                            <Button variant=\"link\" onClick={() => {\n                                                                openPaymentsDialogue(purchasereturn);\n                                                            }}>\n                                                                {purchasereturn.payments_count}\n                                                            </Button>\n                                                        </td>\n                                                        <td>\n                                                            {purchasereturn.payment_status == \"paid\" ?\n                                                                <span className=\"badge bg-success\">\n                                                                    Paid\n                                                                </span> : \"\"}\n                                                            {purchasereturn.payment_status == \"paid_partially\" ?\n                                                                <span className=\"badge bg-warning\">\n                                                                    Paid Partially\n                                                                </span> : \"\"}\n                                                            {purchasereturn.payment_status == \"not_paid\" ?\n                                                                <span className=\"badge bg-danger\">\n                                                                    Not Paid\n                                                                </span> : \"\"}\n                                                        </td>\n                                                        <td>\n                                                            {purchasereturn.payment_methods &&\n                                                                purchasereturn.payment_methods.map((name) => (\n                                                                    <span className=\"badge bg-info\">{name}</span>\n                                                                ))}\n                                                        </td>\n                                                        <td>{purchasereturn.created_by_name}</td>\n                                                        <td>\n                                                            {format(\n                                                                new Date(purchasereturn.created_at),\n                                                                \"MMM dd yyyy h:mma\"\n                                                            )}\n                                                        </td>\n                                                        <td>\n\n                                                            <Button className=\"btn btn-light btn-sm\" onClick={() => {\n                                                                openUpdateForm(purchasereturn.id);\n                                                            }}>\n                                                                <i className=\"bi bi-pencil\"></i>\n                                                            </Button>\n\n\n                                                            <Button className=\"btn btn-primary btn-sm\" onClick={() => {\n                                                                openDetailsView(purchasereturn.id);\n                                                            }}>\n                                                                <i className=\"bi bi-eye\"></i>\n                                                            </Button>\n\n\n\n\n                                                            <button\n                                                                className=\"btn btn-outline-secondary dropdown-toggle\"\n                                                                type=\"button\"\n                                                                data-bs-toggle=\"dropdown\"\n                                                                aria-expanded=\"false\"\n                                                            ></button>\n                                                            <ul className=\"dropdown-menu\">\n                                                                <li>\n                                                                    <button className=\"dropdown-item\" onClick={() => {\n                                                                        openPurchaseReturnPaymentCreateForm(purchasereturn);\n                                                                    }}>\n                                                                        <i className=\"bi bi-plus\"></i>\n                                                                        &nbsp;\n                                                                        Add Payment\n                                                                    </button>\n                                                                </li>\n\n                                                            </ul>\n\n                                                        </td>\n                                                    </tr>\n                                                ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n\n                                {totalPages ? <ReactPaginate\n                                    breakLabel=\"...\"\n                                    nextLabel=\"next >\"\n                                    onPageChange={(event) => {\n                                        changePage(event.selected + 1);\n                                    }}\n                                    pageRangeDisplayed={5}\n                                    pageCount={totalPages}\n                                    previousLabel=\"< previous\"\n                                    renderOnZeroPageCount={null}\n                                    className=\"pagination  flex-wrap\"\n                                    pageClassName=\"page-item\"\n                                    pageLinkClassName=\"page-link\"\n                                    activeClassName=\"active\"\n                                    previousClassName=\"page-item\"\n                                    nextClassName=\"page-item\"\n                                    previousLinkClassName=\"page-link\"\n                                    nextLinkClassName=\"page-link\"\n                                    forcePage={page - 1}\n                                /> : \"\"}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <Modal show={showPurchaseReturnPaymentHistory} size=\"lg\" onHide={handlePaymentHistoryClose} animation={false} scrollable={true}>\n                <Modal.Header>\n                    <Modal.Title>Payment history of Purchase return #{selectedPurchaseReturn.code}</Modal.Title>\n\n                    <div className=\"col align-self-end text-end\">\n                        <button\n                            type=\"button\"\n                            className=\"btn-close\"\n                            onClick={handlePaymentHistoryClose}\n                            aria-label=\"Close\"\n                        ></button>\n\n                    </div>\n                </Modal.Header>\n                <Modal.Body>\n                    <PurchaseReturnPaymentIndex ref={PurchaseReturnPaymentListRef} showToastMessage={props.showToastMessage} purchaseReturn={selectedPurchaseReturn} refreshPurchaseReturnList={list} />\n                </Modal.Body>\n            </Modal>\n        </>\n    );\n}\n\nexport default PurchaseReturnIndex;\n"]},"metadata":{},"sourceType":"module"}