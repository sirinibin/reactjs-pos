{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import SalesReturnCreate from\"./create.js\";import SalesReturnView from\"./view.js\";import Cookies from\"universal-cookie\";import{Typeahead}from\"react-bootstrap-typeahead\";import{format}from\"date-fns\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{Button,Spinner,Badge,Modal}from\"react-bootstrap\";import ReactPaginate from\"react-paginate\";import NumberFormat from\"react-number-format\";import SalesReturnPaymentCreate from\"./../sales_return_payment/create.js\";import SalesReturnPaymentDetailsView from\"./../sales_return_payment/view.js\";import SalesReturnPaymentIndex from\"./../sales_return_payment/index.js\";import ReactExport from'react-data-export';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;function SalesReturnIndex(props){var cookies=new Cookies();var _useState=useState(0.00),_useState2=_slicedToArray(_useState,2),totalSalesReturn=_useState2[0],setTotalSalesReturn=_useState2[1];var _useState3=useState(0.00),_useState4=_slicedToArray(_useState3,2),vatPrice=_useState4[0],setVatPrice=_useState4[1];var _useState5=useState(0.00),_useState6=_slicedToArray(_useState5,2),totalDiscount=_useState6[0],setTotalDiscount=_useState6[1];var _useState7=useState(0.00),_useState8=_slicedToArray(_useState7,2),totalPaidSalesReturn=_useState8[0],setTotalPaidSalesReturn=_useState8[1];var _useState9=useState(0.00),_useState10=_slicedToArray(_useState9,2),totalUnPaidSalesReturn=_useState10[0],setTotalUnPaidSalesReturn=_useState10[1];var _useState11=useState(0.00),_useState12=_slicedToArray(_useState11,2),totalCashSalesReturn=_useState12[0],setTotalCashSalesReturn=_useState12[1];var _useState13=useState(0.00),_useState14=_slicedToArray(_useState13,2),totalBankAccountSalesReturn=_useState14[0],setTotalBankAccountSalesReturn=_useState14[1];//list\nvar _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),salesreturnList=_useState16[0],setSalesReturnList=_useState16[1];//pagination\nvar _useState17=useState(5),_useState18=_slicedToArray(_useState17,2),pageSize=_useState18[0],setPageSize=_useState18[1];var _useState19=useState(1),_useState20=_slicedToArray(_useState19,2),page=_useState20[0],setPage=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),totalPages=_useState22[0],setTotalPages=_useState22[1];var _useState23=useState(1),_useState24=_slicedToArray(_useState23,2),totalItems=_useState24[0],setTotalItems=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),currentPageItemsCount=_useState26[0],setCurrentPageItemsCount=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),offset=_useState28[0],setOffset=_useState28[1];//Date filter\nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),showDateRange=_useState30[0],setShowDateRange=_useState30[1];var selectedDate=new Date();var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),dateValue=_useState32[0],setDateValue=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),fromDateValue=_useState34[0],setFromDateValue=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),toDateValue=_useState36[0],setToDateValue=_useState36[1];//Created At filter\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),showCreatedAtDateRange=_useState38[0],setShowCreatedAtDateRange=_useState38[1];var _useState39=useState(\"\"),_useState40=_slicedToArray(_useState39,2),createdAtValue=_useState40[0],setCreatedAtValue=_useState40[1];var _useState41=useState(\"\"),_useState42=_slicedToArray(_useState41,2),createdAtFromValue=_useState42[0],setCreatedAtFromValue=_useState42[1];var _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),createdAtToValue=_useState44[0],setCreatedAtToValue=_useState44[1];//loader flag\nvar _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),isListLoading=_useState46[0],setIsListLoading=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),isRefreshInProcess=_useState48[0],setIsRefreshInProcess=_useState48[1];//Customer Auto Suggestion\nvar _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),customerOptions=_useState50[0],setCustomerOptions=_useState50[1];var _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),selectedCustomers=_useState52[0],setSelectedCustomers=_useState52[1];//Created By User Auto Suggestion\nvar _useState53=useState([]),_useState54=_slicedToArray(_useState53,2),userOptions=_useState54[0],setUserOptions=_useState54[1];var _useState55=useState([]),_useState56=_slicedToArray(_useState55,2),selectedCreatedByUsers=_useState56[0],setSelectedCreatedByUsers=_useState56[1];//Status Auto Suggestion\nvar statusOptions=[{id:\"sent\",name:\"Sent\"},{id:\"pending\",name:\"Pending\"},{id:\"accepted\",name:\"Accepted\"},{id:\"rejected\",name:\"Rejected\"},{id:\"cancelled\",name:\"Cancelled\"},{id:\"deleted\",name:\"Deleted\"}];var _useState57=useState([]),_useState58=_slicedToArray(_useState57,2),selectedStatusList=_useState58[0],setSelectedStatusList=_useState58[1];useEffect(function(){list();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var _useState59=useState([]),_useState60=_slicedToArray(_useState59,2),allSalesReturns=_useState60[0],setAllSalesReturns=_useState60[1];var _useState61=useState([]),_useState62=_slicedToArray(_useState61,2),excelData=_useState62[0],setExcelData=_useState62[1];var _useState63=useState(\"Sales Return Report\"),_useState64=_slicedToArray(_useState63,2),salesReturnReportFileName=_useState64[0],setSalesReturnReportFileName=_useState64[1];var _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),fettingAllRecordsInProgress=_useState66[0],setFettingAllRecordsInProgress=_useState66[1];function prepareExcelData(){console.log(\"Inside prepareExcelData()\");var groupedByDate=[];for(var i=0;i<allSalesReturns.length;i++){var date=format(new Date(allSalesReturns[i].date),\"dd-MMM-yyyy\");if(!groupedByDate[date]){groupedByDate[date]=[];}groupedByDate[date].push(allSalesReturns[i]);}console.log(\"groupedByDate:\",groupedByDate);excelData=[{columns:[{title:\"Description\",width:{wch:50}},//pixels width \n{title:\"Quantity\",width:{wpx:90}},//char width \n{title:\"Unit\",width:{wpx:90}},{title:\"Rate\",width:{wpx:90}},{title:\"Gross\",width:{wpx:90}},{title:\"Disc %\",width:{wpx:90}},{title:\"Disc\",width:{wpx:90}},{title:\"Tax %\",width:{wpx:90}},{title:\"Tax Amount\",width:{wpx:90}},{title:\"Net Amount\",width:{wpx:90}}],data:[]}];var totalAmount=0;var totalTax=0;var invoiceCount=0;for(var returnDate in groupedByDate){console.log(\"returnDate:\",returnDate);excelData[0].data.push([{value:\"Inv Date: \"+returnDate}]);var dayTotal=0.00;var dayTax=0.00;for(var i=0;i<groupedByDate[returnDate].length>0;i++){invoiceCount++;var salesReturn=groupedByDate[returnDate][i];excelData[0].data.push([{value:\"Inv No (\"+salesReturn.code+\") - \"+invoiceCount+\" [\"+salesReturn.customer_name+\"]\"}]);if(!salesReturn.products){continue;}for(var j=0;j<salesReturn.products.length;j++){var product=salesReturn.products[j];excelData[0].data.push([{value:product.name},{value:product.quantity.toFixed(2)},{value:product.unit?product.unit:\"PCs\"},{value:product.unit_price?product.unit_price.toFixed(2):0.00},{value:(product.unit_price*product.quantity).toFixed(2)},{value:\"0.00\"},{value:\"0.00\"},{value:\"15.00\"},{value:((product.unit_price*product.quantity).toFixed(2)*0.15).toFixed(2)},{value:(product.unit_price*product.quantity).toFixed(2)}]);}excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Discount\"},{value:salesReturn.discount.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Tax\"},{value:salesReturn.vat_price.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total\"},{value:(salesReturn.total-salesReturn.discount).toFixed(2)}]);dayTotal+=salesReturn.total-salesReturn.discount;dayTax+=salesReturn.vat_price;}excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Day Tax\"},{value:dayTax.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Day Total\"},{value:dayTotal.toFixed(2)}]);totalAmount+=dayTotal;totalTax+=dayTax;}//end for\nexcelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total Tax\"},{value:totalTax.toFixed(2)}]);excelData[0].data.push([{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"\"},{value:\"Total Amount\"},{value:totalAmount.toFixed(2)}]);setExcelData(excelData);console.log(\"excelData:\",excelData);}function makeSalesReturnReportFilename(){salesReturnReportFileName=\"Sales Return Report\";if(searchParams[\"from_date\"]&&searchParams[\"to_date\"]){salesReturnReportFileName+=\" - From \"+searchParams[\"from_date\"]+\" to \"+searchParams[\"to_date\"];}else if(searchParams[\"from_date\"]){salesReturnReportFileName+=\" - From \"+searchParams[\"from_date\"]+\" to \"+format(new Date(),\"dd-MMM-yyyy\");}else if(searchParams[\"to_date\"]){salesReturnReportFileName+=\" - Upto \"+searchParams[\"to_date\"];}else if(searchParams[\"date_str\"]){salesReturnReportFileName+=\" of \"+searchParams[\"date_str\"];}setSalesReturnReportFileName(salesReturnReportFileName);}function getAllSalesReturns(){return _getAllSalesReturns.apply(this,arguments);}//Search params\nfunction _getAllSalesReturns(){_getAllSalesReturns=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var requestOptions,Select,d,diff,queryParams,size,salesReturns,pageNo,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,code,date,total,net_total,discount_percent,discount,products,customer_name,created_at,vat_price,loss,net_profit\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}d=new Date();diff=d.getTimezoneOffset();console.log(\"Timezone:\",parseFloat(diff/60));searchParams[\"timezone_offset\"]=parseFloat(diff/60);searchParams[\"stats\"]=\"1\";setSearchParams(searchParams);queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}size=500;salesReturns=[];pageNo=1;makeSalesReturnReportFilename();case 15:if(!true){_context3.next=27;break;}fettingAllRecordsInProgress=true;setFettingAllRecordsInProgress(true);_context3.next=20;return fetch(\"/v1/sales-return?\"+Select+queryParams+\"&sort=\"+sortSalesReturn+sortField+\"&page=\"+pageNo+\"&limit=\"+size,requestOptions).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var _response$headers$get2;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isJson=(_response$headers$get2=response.headers.get(\"content-type\"))===null||_response$headers$get2===void 0?void 0:_response$headers$get2.includes(\"application/json\");_context2.t0=isJson;if(!_context2.t0){_context2.next=6;break;}_context2.next=5;return response.json();case 5:_context2.t0=_context2.sent;case 6:data=_context2.t0;if(response.ok){_context2.next=10;break;}error=data&&data.errors;return _context2.abrupt(\"return\",Promise.reject(error));case 10:setIsListLoading(false);if(!(!data.result||data.result.length===0)){_context2.next=13;break;}return _context2.abrupt(\"return\",[]);case 13:return _context2.abrupt(\"return\",data.result);case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x4){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log(error);return[];//break;\n});case 20:res=_context3.sent;if(!(res.length===0)){_context3.next=23;break;}return _context3.abrupt(\"break\",27);case 23:salesReturns=salesReturns.concat(res);pageNo++;case 25:_context3.next=15;break;case 27:allSalesReturns=salesReturns;setAllSalesReturns(salesReturns);console.log(\"allSalesReturns:\",allSalesReturns);prepareExcelData();fettingAllRecordsInProgress=false;setFettingAllRecordsInProgress(false);case 33:case\"end\":return _context3.stop();}}},_callee3);}));return _getAllSalesReturns.apply(this,arguments);}var _useState67=useState({}),_useState68=_slicedToArray(_useState67,2),searchParams=_useState68[0],setSearchParams=_useState68[1];var _useState69=useState(\"created_at\"),_useState70=_slicedToArray(_useState69,2),sortField=_useState70[0],setSortField=_useState70[1];var _useState71=useState(\"-\"),_useState72=_slicedToArray(_useState71,2),sortSalesReturn=_useState72[0],setSortSalesReturn=_useState72[1];function ObjectToSearchQueryParams(object){return Object.keys(object).map(function(key){return\"search[\".concat(key,\"]=\").concat(object[key]);}).join(\"&\");}function suggestCustomers(_x){return _suggestCustomers.apply(this,arguments);}function _suggestCustomers(){_suggestCustomers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"Inside handle suggestCustomers\");params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\".concat(queryString);}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";_context4.next=8;return fetch(\"/v1/customer?\".concat(Select).concat(queryString),requestOptions);case 8:result=_context4.sent;_context4.next=11;return result.json();case 11:data=_context4.sent;setCustomerOptions(data.result);case 13:case\"end\":return _context4.stop();}}},_callee4);}));return _suggestCustomers.apply(this,arguments);}function suggestUsers(_x2){return _suggestUsers.apply(this,arguments);}function _suggestUsers(){_suggestUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"Inside handle suggestUsers\");setCustomerOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context5.next=5;break;}return _context5.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";_context5.next=12;return fetch(\"/v1/user?\"+Select+queryString,requestOptions);case 12:result=_context5.sent;_context5.next=15;return result.json();case 15:data=_context5.sent;setUserOptions(data.result);case 17:case\"end\":return _context5.stop();}}},_callee5);}));return _suggestUsers.apply(this,arguments);}function searchByFieldValue(field,value){searchParams[field]=value;page=1;setPage(page);list();}function searchByDateField(field,value){if(!value){page=1;searchParams[field]=\"\";setPage(page);list();return;}var d=new Date(value);d=new Date(d.toUTCString());value=format(d,\"MMM dd yyyy\");if(field===\"date_str\"){setDateValue(value);setFromDateValue(\"\");setToDateValue(\"\");searchParams[\"from_date\"]=\"\";searchParams[\"to_date\"]=\"\";searchParams[field]=value;}else if(field===\"from_date\"){setFromDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"to_date\"){setToDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"created_at\"){setCreatedAtValue(value);setCreatedAtFromValue(\"\");setCreatedAtToValue(\"\");searchParams[\"created_at_from\"]=\"\";searchParams[\"created_at_to\"]=\"\";searchParams[field]=value;}if(field===\"created_at_from\"){setCreatedAtFromValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}else if(field===\"created_at_to\"){setCreatedAtToValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}page=1;setPage(page);list();}function searchByMultipleValuesField(field,values){if(field===\"created_by\"){setSelectedCreatedByUsers(values);}else if(field===\"customer_id\"){setSelectedCustomers(values);}else if(field===\"status\"){setSelectedStatusList(values);}else if(field===\"payment_status\"){setSelectedPaymentStatusList(values);}else if(field===\"payment_methods\"){setSelectedPaymentMethodList(values);}searchParams[field]=Object.values(values).map(function(model){return model.id;}).join(\",\");page=1;setPage(page);list();}function list(){excelData=[];setExcelData(excelData);var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};var Select=\"select=id,code,date,net_total,created_by_name,customer_name,status,created_at,net_profit,loss,order_code,order_id,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}var d=new Date();var diff=d.getTimezoneOffset();searchParams[\"timezone_offset\"]=parseFloat(diff/60);searchParams[\"stats\"]=\"1\";setSearchParams(searchParams);var queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}setIsListLoading(true);fetch(\"/v1/sales-return?\"+Select+queryParams+\"&sort=\"+sortSalesReturn+sortField+\"&page=\"+page+\"&limit=\"+pageSize,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error,pageCount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get(\"content-type\"))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes(\"application/json\");_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:setIsListLoading(false);setIsRefreshInProcess(false);setSalesReturnList(data.result);pageCount=parseInt((data.total_count+pageSize-1)/pageSize);setTotalPages(pageCount);setTotalItems(data.total_count);setOffset((page-1)*pageSize);setCurrentPageItemsCount(data.result.length);totalSalesReturn=data.meta.total_sales_return;setTotalSalesReturn(totalSalesReturn);netProfit=data.meta.net_profit;setNetProfit(netProfit);loss=data.meta.loss;setLoss(loss);vatPrice=data.meta.vat_price;setVatPrice(vatPrice);totalDiscount=data.meta.discount;setTotalDiscount(totalDiscount);totalPaidSalesReturn=data.meta.paid_sales_return;setTotalPaidSalesReturn(totalPaidSalesReturn);totalUnPaidSalesReturn=data.meta.unpaid_sales_return;setTotalUnPaidSalesReturn(totalUnPaidSalesReturn);totalCashSalesReturn=data.meta.cash_sales_return;setTotalCashSalesReturn(totalCashSalesReturn);totalBankAccountSalesReturn=data.meta.bank_account_sales_return;setTotalBankAccountSalesReturn(totalBankAccountSalesReturn);case 36:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref.apply(this,arguments);};}()).catch(function(error){setIsListLoading(false);setIsRefreshInProcess(false);console.log(error);});}function sort(field){sortField=field;setSortField(sortField);sortSalesReturn=sortSalesReturn===\"-\"?\"\":\"-\";setSortSalesReturn(sortSalesReturn);list();}function changePageSize(size){pageSize=parseInt(size);setPageSize(pageSize);list();}function changePage(newPage){page=parseInt(newPage);setPage(page);list();}var DetailsViewRef=useRef();function openDetailsView(id){DetailsViewRef.current.open(id);}var CreateFormRef=useRef();//Sales Return Payments\nvar SalesReturnPaymentCreateRef=useRef();function openSalesReturnPaymentCreateForm(order){SalesReturnPaymentCreateRef.current.open(undefined,order);}var SalesReturnPaymentDetailsViewRef=useRef();function openSalesReturnPaymentDetailsView(id){SalesReturnPaymentDetailsViewRef.current.open(id);}function openSalesReturnPaymentUpdateForm(id){SalesReturnPaymentCreateRef.current.open(id);}var _useState73=useState(0.00),_useState74=_slicedToArray(_useState73,2),netProfit=_useState74[0],setNetProfit=_useState74[1];var _useState75=useState(0.00),_useState76=_slicedToArray(_useState75,2),loss=_useState76[0],setLoss=_useState76[1];var _useState77=useState(\"-\"),_useState78=_slicedToArray(_useState77,2),sortOrder=_useState78[0],setSortOrder=_useState78[1];var paymentStatusOptions=[{id:\"paid\",name:\"Paid\"},{id:\"not_paid\",name:\"Not Paid\"},{id:\"paid_partially\",name:\"Paid partially\"}];var paymentMethodOptions=[{id:\"cash\",name:\"cash\"},{id:\"bank_account\",name:\"Bank Account / Debit / Credit card\"}];var _useState79=useState([]),_useState80=_slicedToArray(_useState79,2),selectedPaymentMethodList=_useState80[0],setSelectedPaymentMethodList=_useState80[1];var _useState81=useState([]),_useState82=_slicedToArray(_useState81,2),selectedPaymentStatusList=_useState82[0],setSelectedPaymentStatusList=_useState82[1];var _useState83=useState({}),_useState84=_slicedToArray(_useState83,2),selectedSalesReturn=_useState84[0],setSelectedSalesReturn=_useState84[1];var _useState85=useState(false),_useState86=_slicedToArray(_useState85,2),showSalesReturnPaymentHistory=_useState86[0],setShowSalesReturnPaymentHistory=_useState86[1];function openPaymentsDialogue(salesReturn){setSelectedSalesReturn(salesReturn);showSalesReturnPaymentHistory=true;setShowSalesReturnPaymentHistory(true);}function handlePaymentHistoryClose(){showSalesReturnPaymentHistory=false;setShowSalesReturnPaymentHistory(false);//list();\n}var SalesReturnPaymentListRef=useRef();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SalesReturnCreate,{ref:CreateFormRef,refreshList:list,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(SalesReturnView,{ref:DetailsViewRef}),/*#__PURE__*/_jsx(SalesReturnPaymentCreate,{ref:SalesReturnPaymentCreateRef,showToastMessage:props.showToastMessage,openDetailsView:openSalesReturnPaymentDetailsView}),/*#__PURE__*/_jsx(SalesReturnPaymentDetailsView,{ref:SalesReturnPaymentDetailsViewRef,openUpdateForm:openSalesReturnPaymentUpdateForm,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Sales Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalSalesReturn,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Paid Sales Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalPaidSalesReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-end\",children:[\"Cash Sales Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalCashSalesReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-end\",children:[\"Bank Account Sales Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalBankAccountSalesReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Credit Sales Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalUnPaidSalesReturn.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Net Profit Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:netProfit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Loss Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}):\"\",/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Discount Retun: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalDiscount.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"VAT Return: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:vatPrice.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h3\",children:\"Sales Returns\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-end\",children:[/*#__PURE__*/_jsx(ExcelFile,{filename:salesReturnReportFileName,element:excelData.length>0?/*#__PURE__*/_jsx(Button,{variant:\"success\",className:\"btn btn-primary mb-3 success\",children:\"Download Sales Return Report\"}):\"\",children:/*#__PURE__*/_jsx(ExcelSheet,{dataSet:excelData,name:salesReturnReportFileName})}),excelData.length==0?/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"btn btn-primary mb-3\",onClick:getAllSalesReturns,children:fettingAllRecordsInProgress?\"Preparing..\":\"Sales Return Report\"}):\"\",\"\\xA0\\xA0\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-start\",children:\"No SalesReturns to display\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{bsalesreturn:\"solid 0px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",style:{bsalesreturn:\"solid 0px\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){setIsRefreshInProcess(true);list();},variant:\"primary\",disabled:isRefreshInProcess,children:[isRefreshInProcess?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"bsalesreturn\",size:\"sm\",role:\"status\",\"aria-hidden\":true}):/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-refresh\"}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:isListLoading&&/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"primary\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Size:\\xA0\"}),/*#__PURE__*/_jsxs(\"select\",{value:pageSize,onChange:function onChange(e){changePageSize(e.target.value);},className:\"form-control pull-right\",style:{bsalesreturn:\"solid 1px\",bsalesreturnColor:\"silver\",width:\"55px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20\",children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:\"40\",children:\"40\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100\"})]})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{bsalesreturn:\"solid 0px\"},children:totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-start\",children:[\"showing \",offset+1,\"-\",offset+currentPageItemsCount,\" of\",\" \",totalItems]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-end\",children:[\"page \",page,\" of \",totalPages]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"code\");},children:[\"ID\",sortField===\"code\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"code\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"order_code\");},children:[\"Order ID\",sortField===\"order_code\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"order_code\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"date\");},children:[\"Date\",sortField===\"date\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"date\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"net_total\");},children:[\"Net Total\",sortField===\"net_total\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"net_total\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"total_payment_paid\");},children:[\"Payment Paid\",sortField===\"total_payment_paid\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"total_payment_paid\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"balance_amount\");},children:[\"Balance\",sortField===\"balance_amount\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"balance_amount\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payments_count\");},children:[\"No.of Payments\",sortField===\"payments_count\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"payments_count\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"net_profit\");},children:[\"Net Profit\",sortField===\"net_profit\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"net_profit\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"loss\");},children:[\"Loss\",sortField===\"loss\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"loss\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}):\"\",/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_by\");},children:[\"Created By\",sortField===\"created_by\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"created_by\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"customer_name\");},children:[\"Customer\",sortField===\"customer_name\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"customer_name\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payment_status\");},children:[\"Payment Status\",sortField===\"payment_status\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"payment_status\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"payment_methods\");},children:[\"Payment Methods\",sortField===\"payment_methods\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"payment_methods\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_at\");},children:[\"Created At\",sortField===\"created_at\"&&sortSalesReturn===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"created_at\"&&sortSalesReturn===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"code\",onChange:function onChange(e){return searchByFieldValue(\"code\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"order_code\",onChange:function onChange(e){return searchByFieldValue(\"order_code\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"date_str\",value:dateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setDateValue(\"\");searchByDateField(\"date_str\",\"\");return;}searchByDateField(\"date_str\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowDateRange(!showDateRange);},children:showDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"from_date\",value:fromDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setFromDateValue(\"\");searchByDateField(\"from_date\",\"\");return;}searchByDateField(\"from_date\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"to_date\",value:toDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setToDateValue(\"\");searchByDateField(\"to_date\",\"\");return;}searchByDateField(\"to_date\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"net_total\",onChange:function onChange(e){return searchByFieldValue(\"net_total\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"total_payment_paid\",onChange:function onChange(e){return searchByFieldValue(\"total_payment_paid\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"balance_amount\",onChange:function onChange(e){return searchByFieldValue(\"balance_amount\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"payments_count\",onChange:function onChange(e){return searchByFieldValue(\"payments_count\",e.target.value);},className:\"form-control\"})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"net_profit\",onChange:function onChange(e){return searchByFieldValue(\"net_profit\",e.target.value);},className:\"form-control\"})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"loss\",onChange:function onChange(e){return searchByFieldValue(\"loss\",e.target.value);},className:\"form-control\"})}):\"\",/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"created_by\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"created_by\",selectedItems);},options:userOptions,placeholder:\"Select Users\",selected:selectedCreatedByUsers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestUsers(searchTerm);},multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"customer_id\",labelKey:\"search_label\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"customer_id\",selectedItems);},options:customerOptions,placeholder:\"name or mob\",selected:selectedCustomers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestCustomers(searchTerm);},multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"payment_status\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"payment_status\",selectedItems);},options:paymentStatusOptions,placeholder:\"Select Payment Status\",selected:selectedPaymentStatusList,highlightOnlyResult:true,multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"payment_methods\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"payment_methods\",selectedItems);},options:paymentMethodOptions,placeholder:\"Select payment methods\",selected:selectedPaymentMethodList,highlightOnlyResult:true,multiple:true})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"created_at\",value:createdAtValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtValue(\"\");searchByDateField(\"created_at\",\"\");return;}searchByDateField(\"created_at\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowCreatedAtDateRange(!showCreatedAtDateRange);},children:showCreatedAtDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showCreatedAtDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_from\",value:createdAtFromValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtFromValue(\"\");searchByDateField(\"created_at_from\",\"\");return;}searchByDateField(\"created_at_from\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_to\",value:createdAtToValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtToValue(\"\");searchByDateField(\"created_at_to\",\"\");return;}searchByDateField(\"created_at_to\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:salesreturnList&&salesreturnList.map(function(salesreturn){var _salesreturn$total_pa,_salesreturn$balance_;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:salesreturn.code}),/*#__PURE__*/_jsx(\"td\",{children:salesreturn.order_code}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(salesreturn.date),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsxs(\"td\",{children:[salesreturn.net_total,\" SAR\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){openPaymentsDialogue(salesreturn);},children:(_salesreturn$total_pa=salesreturn.total_payment_paid)===null||_salesreturn$total_pa===void 0?void 0:_salesreturn$total_pa.toFixed(2)})}),/*#__PURE__*/_jsx(\"td\",{children:(_salesreturn$balance_=salesreturn.balance_amount)===null||_salesreturn$balance_===void 0?void 0:_salesreturn$balance_.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){openPaymentsDialogue(salesreturn);},children:salesreturn.payments_count})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"td\",{children:[salesreturn.net_profit.toFixed(2),\" SAR\"]}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"td\",{children:[salesreturn.loss?salesreturn.loss.toFixed(2):0.00,\" SAR\"]}):\"\",/*#__PURE__*/_jsx(\"td\",{children:salesreturn.created_by_name}),/*#__PURE__*/_jsx(\"td\",{children:salesreturn.customer_name}),/*#__PURE__*/_jsxs(\"td\",{children:[salesreturn.payment_status==\"paid\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success\",children:\"Paid\"}):\"\",salesreturn.payment_status==\"paid_partially\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-warning\",children:\"Paid Partially\"}):\"\",salesreturn.payment_status==\"not_paid\"?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:\"Not Paid\"}):\"\"]}),/*#__PURE__*/_jsx(\"td\",{children:salesreturn.payment_methods&&salesreturn.payment_methods.map(function(name){return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info\",children:name});})}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(salesreturn.created_at),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary btn-sm\",onClick:function onClick(){openDetailsView(salesreturn.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item\",onClick:function onClick(){openSalesReturnPaymentCreateForm(salesreturn);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\"\\xA0 Add Payment\"]})})})]})]},salesreturn.code);})})]})}),totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"]})})})})]}),/*#__PURE__*/_jsxs(Modal,{show:showSalesReturnPaymentHistory,size:\"lg\",onHide:handlePaymentHistoryClose,animation:false,scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Payment history of Sales Return #\",selectedSalesReturn.code]}),/*#__PURE__*/_jsx(\"div\",{className:\"col align-self-end text-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handlePaymentHistoryClose,\"aria-label\":\"Close\"})})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(SalesReturnPaymentIndex,{ref:SalesReturnPaymentListRef,showToastMessage:props.showToastMessage,salesReturn:selectedSalesReturn,refreshSalesReturnList:list})})]})]});}export default SalesReturnIndex;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/sales_return/index.js"],"names":["React","useState","useEffect","useRef","SalesReturnCreate","SalesReturnView","Cookies","Typeahead","format","DatePicker","Button","Spinner","Badge","Modal","ReactPaginate","NumberFormat","SalesReturnPaymentCreate","SalesReturnPaymentDetailsView","SalesReturnPaymentIndex","ReactExport","ExcelFile","ExcelSheet","SalesReturnIndex","props","cookies","totalSalesReturn","setTotalSalesReturn","vatPrice","setVatPrice","totalDiscount","setTotalDiscount","totalPaidSalesReturn","setTotalPaidSalesReturn","totalUnPaidSalesReturn","setTotalUnPaidSalesReturn","totalCashSalesReturn","setTotalCashSalesReturn","totalBankAccountSalesReturn","setTotalBankAccountSalesReturn","salesreturnList","setSalesReturnList","pageSize","setPageSize","page","setPage","totalPages","setTotalPages","totalItems","setTotalItems","currentPageItemsCount","setCurrentPageItemsCount","offset","setOffset","showDateRange","setShowDateRange","selectedDate","Date","dateValue","setDateValue","fromDateValue","setFromDateValue","toDateValue","setToDateValue","showCreatedAtDateRange","setShowCreatedAtDateRange","createdAtValue","setCreatedAtValue","createdAtFromValue","setCreatedAtFromValue","createdAtToValue","setCreatedAtToValue","isListLoading","setIsListLoading","isRefreshInProcess","setIsRefreshInProcess","customerOptions","setCustomerOptions","selectedCustomers","setSelectedCustomers","userOptions","setUserOptions","selectedCreatedByUsers","setSelectedCreatedByUsers","statusOptions","id","name","selectedStatusList","setSelectedStatusList","list","allSalesReturns","setAllSalesReturns","excelData","setExcelData","salesReturnReportFileName","setSalesReturnReportFileName","fettingAllRecordsInProgress","setFettingAllRecordsInProgress","prepareExcelData","console","log","groupedByDate","i","length","date","push","columns","title","width","wch","wpx","data","totalAmount","totalTax","invoiceCount","returnDate","value","dayTotal","dayTax","salesReturn","code","customer_name","products","j","product","quantity","toFixed","unit","unit_price","discount","vat_price","total","makeSalesReturnReportFilename","searchParams","getAllSalesReturns","requestOptions","method","headers","Authorization","get","Select","store_id","d","diff","getTimezoneOffset","parseFloat","setSearchParams","queryParams","ObjectToSearchQueryParams","size","salesReturns","pageNo","fetch","sortSalesReturn","sortField","then","response","isJson","includes","json","ok","error","errors","Promise","reject","result","catch","res","concat","setSortField","setSortSalesReturn","object","Object","keys","map","key","join","suggestCustomers","searchTerm","params","queryString","suggestUsers","searchByFieldValue","field","searchByDateField","toUTCString","searchByMultipleValuesField","values","setSelectedPaymentStatusList","setSelectedPaymentMethodList","model","pageCount","parseInt","total_count","meta","total_sales_return","netProfit","net_profit","setNetProfit","loss","setLoss","paid_sales_return","unpaid_sales_return","cash_sales_return","bank_account_sales_return","sort","changePageSize","changePage","newPage","DetailsViewRef","openDetailsView","current","open","CreateFormRef","SalesReturnPaymentCreateRef","openSalesReturnPaymentCreateForm","order","undefined","SalesReturnPaymentDetailsViewRef","openSalesReturnPaymentDetailsView","openSalesReturnPaymentUpdateForm","sortOrder","setSortOrder","paymentStatusOptions","paymentMethodOptions","selectedPaymentMethodList","selectedPaymentStatusList","selectedSalesReturn","setSelectedSalesReturn","showSalesReturnPaymentHistory","setShowSalesReturnPaymentHistory","openPaymentsDialogue","handlePaymentHistoryClose","SalesReturnPaymentListRef","showToastMessage","bsalesreturn","e","target","bsalesreturnColor","event","selected","overflowX","textDecoration","cursor","color","selectedItems","salesreturn","order_code","net_total","total_payment_paid","balance_amount","payments_count","created_by_name","payment_status","payment_methods","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport SalesReturnCreate from \"./create.js\";\nimport SalesReturnView from \"./view.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport { format } from \"date-fns\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Button, Spinner, Badge,Modal } from \"react-bootstrap\";\nimport ReactPaginate from \"react-paginate\";\nimport NumberFormat from \"react-number-format\";\n\nimport SalesReturnPaymentCreate from \"./../sales_return_payment/create.js\";\nimport SalesReturnPaymentDetailsView from \"./../sales_return_payment/view.js\";\nimport SalesReturnPaymentIndex from \"./../sales_return_payment/index.js\";\n\n\nimport ReactExport from 'react-data-export';\nconst ExcelFile = ReactExport.ExcelFile;\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n\n\nfunction SalesReturnIndex(props) {\n    const cookies = new Cookies();\n\n    let [totalSalesReturn, setTotalSalesReturn] = useState(0.00);\n    let [vatPrice, setVatPrice] = useState(0.00);\n    let [totalDiscount, setTotalDiscount] = useState(0.00);\n    let [totalPaidSalesReturn, setTotalPaidSalesReturn] = useState(0.00);\n    let [totalUnPaidSalesReturn, setTotalUnPaidSalesReturn] = useState(0.00);\n    let [totalCashSalesReturn, setTotalCashSalesReturn] = useState(0.00);\n    let [totalBankAccountSalesReturn, setTotalBankAccountSalesReturn] = useState(0.00);\n\n    //list\n    const [salesreturnList, setSalesReturnList] = useState([]);\n\n    //pagination\n    let [pageSize, setPageSize] = useState(5);\n    let [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(0);\n    const [totalItems, setTotalItems] = useState(1);\n    const [currentPageItemsCount, setCurrentPageItemsCount] = useState(0);\n    const [offset, setOffset] = useState(0);\n\n    //Date filter\n    const [showDateRange, setShowDateRange] = useState(false);\n    const selectedDate = new Date();\n    const [dateValue, setDateValue] = useState(\"\");\n    const [fromDateValue, setFromDateValue] = useState(\"\");\n    const [toDateValue, setToDateValue] = useState(\"\");\n\n    //Created At filter\n    const [showCreatedAtDateRange, setShowCreatedAtDateRange] = useState(false);\n    const [createdAtValue, setCreatedAtValue] = useState(\"\");\n    const [createdAtFromValue, setCreatedAtFromValue] = useState(\"\");\n    const [createdAtToValue, setCreatedAtToValue] = useState(\"\");\n\n    //loader flag\n    const [isListLoading, setIsListLoading] = useState(false);\n    const [isRefreshInProcess, setIsRefreshInProcess] = useState(false);\n\n    //Customer Auto Suggestion\n    const [customerOptions, setCustomerOptions] = useState([]);\n    const [selectedCustomers, setSelectedCustomers] = useState([]);\n\n    //Created By User Auto Suggestion\n    const [userOptions, setUserOptions] = useState([]);\n    const [selectedCreatedByUsers, setSelectedCreatedByUsers] = useState([]);\n\n    //Status Auto Suggestion\n    const statusOptions = [\n        {\n            id: \"sent\",\n            name: \"Sent\",\n        },\n        {\n            id: \"pending\",\n            name: \"Pending\",\n        },\n        {\n            id: \"accepted\",\n            name: \"Accepted\",\n        },\n        {\n            id: \"rejected\",\n            name: \"Rejected\",\n        },\n        {\n            id: \"cancelled\",\n            name: \"Cancelled\",\n        },\n        {\n            id: \"deleted\",\n            name: \"Deleted\",\n        },\n    ];\n\n    const [selectedStatusList, setSelectedStatusList] = useState([]);\n\n    useEffect(() => {\n        list();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n\n    let [allSalesReturns, setAllSalesReturns] = useState([]);\n    let [excelData, setExcelData] = useState([]);\n    let [salesReturnReportFileName, setSalesReturnReportFileName] = useState(\"Sales Return Report\");\n    let [fettingAllRecordsInProgress, setFettingAllRecordsInProgress] = useState(false);\n\n    function prepareExcelData() {\n        console.log(\"Inside prepareExcelData()\");\n        var groupedByDate = [];\n        for (var i = 0; i < allSalesReturns.length; i++) {\n            let date = format(\n                new Date(allSalesReturns[i].date),\n                \"dd-MMM-yyyy\"\n            );\n            if (!groupedByDate[date]) {\n                groupedByDate[date] = [];\n            }\n\n            groupedByDate[date].push(allSalesReturns[i]);\n\n        }\n\n        console.log(\"groupedByDate:\", groupedByDate);\n\n        excelData = [{\n            columns: [\n                { title: \"Description\", width: { wch: 50 } },//pixels width \n                { title: \"Quantity\", width: { wpx: 90 } },//char width \n                { title: \"Unit\", width: { wpx: 90 } },\n                { title: \"Rate\", width: { wpx: 90 } },\n                { title: \"Gross\", width: { wpx: 90 } },\n                { title: \"Disc %\", width: { wpx: 90 } },\n                { title: \"Disc\", width: { wpx: 90 } },\n                { title: \"Tax %\", width: { wpx: 90 } },\n                { title: \"Tax Amount\", width: { wpx: 90 } },\n                { title: \"Net Amount\", width: { wpx: 90 } },\n            ],\n            data: [],\n        }];\n\n\n        let totalAmount = 0;\n        let totalTax = 0;\n\n        let invoiceCount = 0;\n        for (let returnDate in groupedByDate) {\n\n            console.log(\"returnDate:\", returnDate);\n            excelData[0].data.push([{ value: \"Inv Date: \" + returnDate }]);\n            let dayTotal = 0.00;\n            let dayTax = 0.00;\n\n            for (var i = 0; i < groupedByDate[returnDate].length > 0; i++) {\n                invoiceCount++;\n                let salesReturn = groupedByDate[returnDate][i];\n                excelData[0].data.push([{ value: \"Inv No (\" + salesReturn.code + \") - \" + invoiceCount + \" [\" + salesReturn.customer_name + \"]\" }]);\n\n                if (!salesReturn.products) {\n                    continue;\n                }\n\n                for (var j = 0; j < salesReturn.products.length; j++) {\n\n                    let product = salesReturn.products[j];\n\n                    excelData[0].data.push([\n                        {\n                            value: product.name\n                        },\n                        {\n                            value: product.quantity.toFixed(2),\n                        },\n                        {\n                            value: product.unit ? product.unit : \"PCs\",\n                        },\n                        {\n                            value: product.unit_price ? product.unit_price.toFixed(2) : 0.00,\n                        },\n                        {\n                            value: (product.unit_price * product.quantity).toFixed(2)\n                        },\n                        {\n                            value: \"0.00\",\n                        },\n                        {\n                            value: \"0.00\",\n                        },\n                        {\n                            value: \"15.00\",\n                        },\n                        {\n                            value: ((product.unit_price * product.quantity).toFixed(2) * 0.15).toFixed(2),\n                        },\n                        {\n                            value: (product.unit_price * product.quantity).toFixed(2),\n                        },\n                    ]);\n                }\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Discount\",\n                    }, {\n                        value: salesReturn.discount.toFixed(2),\n                    },\n                ]);\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Tax\",\n                    }, {\n                        value: salesReturn.vat_price.toFixed(2),\n                    },\n                ]);\n\n\n\n                excelData[0].data.push([\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    { value: \"\", },\n                    {\n                        value: \"Total\",\n                    }, {\n                        value: (salesReturn.total - salesReturn.discount).toFixed(2),\n                    },\n                ]);\n\n                dayTotal += salesReturn.total - salesReturn.discount;\n                dayTax += salesReturn.vat_price;\n\n            }\n\n            excelData[0].data.push([\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                {\n                    value: \"Day Tax\",\n                }, {\n                    value: dayTax.toFixed(2),\n                },\n            ]);\n\n            excelData[0].data.push([\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                { value: \"\", },\n                {\n                    value: \"Day Total\",\n                }, {\n                    value: dayTotal.toFixed(2),\n                },\n            ]);\n\n            totalAmount += dayTotal;\n            totalTax += dayTax;\n\n\n        }//end for\n\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"\",\n            }, {\n                value: \"\",\n            },\n        ]);\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"Total Tax\",\n            }, {\n                value: totalTax.toFixed(2),\n            },\n        ]);\n\n        excelData[0].data.push([\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            { value: \"\", },\n            {\n                value: \"Total Amount\",\n            }, {\n                value: totalAmount.toFixed(2),\n            },\n        ]);\n\n\n\n        setExcelData(excelData);\n\n        console.log(\"excelData:\", excelData);\n    }\n\n    function makeSalesReturnReportFilename() {\n        salesReturnReportFileName = \"Sales Return Report\";\n        if (searchParams[\"from_date\"] && searchParams[\"to_date\"]) {\n            salesReturnReportFileName += \" - From \" + searchParams[\"from_date\"] + \" to \" + searchParams[\"to_date\"];\n        } else if (searchParams[\"from_date\"]) {\n            salesReturnReportFileName += \" - From \" + searchParams[\"from_date\"] + \" to \" + format(\n                new Date(),\n                \"dd-MMM-yyyy\"\n            );\n        } else if (searchParams[\"to_date\"]) {\n            salesReturnReportFileName += \" - Upto \" + searchParams[\"to_date\"];\n        } else if (searchParams[\"date_str\"]) {\n            salesReturnReportFileName += \" of \" + searchParams[\"date_str\"];\n        }\n\n        setSalesReturnReportFileName(salesReturnReportFileName);\n    }\n    async function getAllSalesReturns() {\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,code,date,total,net_total,discount_percent,discount,products,customer_name,created_at,vat_price,loss,net_profit\";\n\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n\n        const d = new Date();\n        let diff = d.getTimezoneOffset();\n        console.log(\"Timezone:\", parseFloat(diff / 60));\n        searchParams[\"timezone_offset\"] = parseFloat(diff / 60);\n        searchParams[\"stats\"] = \"1\";\n\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        let size = 500;\n\n        let salesReturns = [];\n        var pageNo = 1;\n\n        makeSalesReturnReportFilename();\n\n        for (; true;) {\n\n            fettingAllRecordsInProgress = true;\n            setFettingAllRecordsInProgress(true);\n            let res = await fetch(\n                \"/v1/sales-return?\" +\n                Select +\n                queryParams +\n                \"&sort=\" +\n                sortSalesReturn +\n                sortField +\n                \"&page=\" +\n                pageNo +\n                \"&limit=\" +\n                size,\n                requestOptions\n            )\n                .then(async (response) => {\n                    const isJson = response.headers\n                        .get(\"content-type\")\n                        ?.includes(\"application/json\");\n                    const data = isJson && (await response.json());\n\n                    // check for error response\n                    if (!response.ok) {\n                        const error = data && data.errors;\n                        return Promise.reject(error);\n                    }\n\n                    setIsListLoading(false);\n                    if (!data.result || data.result.length === 0) {\n                        return [];\n                    }\n\n\n\n\n                    return data.result;\n\n\n                })\n                .catch((error) => {\n                    console.log(error);\n                    return [];\n                    //break;\n\n                });\n            if (res.length === 0) {\n                break;\n            }\n            salesReturns = salesReturns.concat(res);\n            pageNo++;\n        }\n\n        allSalesReturns = salesReturns;\n        setAllSalesReturns(salesReturns);\n\n        console.log(\"allSalesReturns:\", allSalesReturns);\n        prepareExcelData();\n        fettingAllRecordsInProgress = false;\n        setFettingAllRecordsInProgress(false);\n\n    }\n\n\n    //Search params\n    const [searchParams, setSearchParams] = useState({});\n    let [sortField, setSortField] = useState(\"created_at\");\n    let [sortSalesReturn, setSortSalesReturn] = useState(\"-\");\n\n    function ObjectToSearchQueryParams(object) {\n        return Object.keys(object)\n            .map(function (key) {\n                return `search[${key}]=${object[key]}`;\n            })\n            .join(\"&\");\n    }\n\n    async function suggestCustomers(searchTerm) {\n        console.log(\"Inside handle suggestCustomers\");\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = `&${queryString}`;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n        let result = await fetch(\n            `/v1/customer?${Select}${queryString}`,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setCustomerOptions(data.result);\n    }\n\n    async function suggestUsers(searchTerm) {\n        console.log(\"Inside handle suggestUsers\");\n        setCustomerOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        let result = await fetch(\n            \"/v1/user?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setUserOptions(data.result);\n    }\n\n    function searchByFieldValue(field, value) {\n        searchParams[field] = value;\n\n        page = 1;\n        setPage(page);\n        list();\n    }\n\n    function searchByDateField(field, value) {\n        if (!value) {\n            page = 1;\n            searchParams[field] = \"\";\n            setPage(page);\n            list();\n            return;\n        }\n\n        let d = new Date(value);\n        d = new Date(d.toUTCString());\n\n        value = format(d, \"MMM dd yyyy\");\n\n        if (field === \"date_str\") {\n            setDateValue(value);\n            setFromDateValue(\"\");\n            setToDateValue(\"\");\n            searchParams[\"from_date\"] = \"\";\n            searchParams[\"to_date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"from_date\") {\n            setFromDateValue(value);\n            setDateValue(\"\");\n            searchParams[\"date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"to_date\") {\n            setToDateValue(value);\n            setDateValue(\"\");\n            searchParams[\"date\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"created_at\") {\n            setCreatedAtValue(value);\n            setCreatedAtFromValue(\"\");\n            setCreatedAtToValue(\"\");\n            searchParams[\"created_at_from\"] = \"\";\n            searchParams[\"created_at_to\"] = \"\";\n            searchParams[field] = value;\n        }\n        if (field === \"created_at_from\") {\n            setCreatedAtFromValue(value);\n            setCreatedAtValue(\"\");\n            searchParams[\"created_at\"] = \"\";\n            searchParams[field] = value;\n        } else if (field === \"created_at_to\") {\n            setCreatedAtToValue(value);\n            setCreatedAtValue(\"\");\n            searchParams[\"created_at\"] = \"\";\n            searchParams[field] = value;\n        }\n\n        page = 1;\n        setPage(page);\n\n        list();\n    }\n\n    function searchByMultipleValuesField(field, values) {\n        if (field === \"created_by\") {\n            setSelectedCreatedByUsers(values);\n        } else if (field === \"customer_id\") {\n            setSelectedCustomers(values);\n        } else if (field === \"status\") {\n            setSelectedStatusList(values);\n        } else if (field === \"payment_status\") {\n            setSelectedPaymentStatusList(values);\n        } else if (field === \"payment_methods\") {\n            setSelectedPaymentMethodList(values);\n        }\n\n        searchParams[field] = Object.values(values)\n            .map(function (model) {\n                return model.id;\n            })\n            .join(\",\");\n\n        page = 1;\n        setPage(page);\n\n        list();\n    }\n\n    function list() {\n        excelData = [];\n        setExcelData(excelData);\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,code,date,net_total,created_by_name,customer_name,status,created_at,net_profit,loss,order_code,order_id,total_payment_paid,payments_count,payment_methods,payment_status,balance_amount\";\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n\n        const d = new Date();\n        let diff = d.getTimezoneOffset();\n        searchParams[\"timezone_offset\"] = parseFloat(diff / 60);\n        searchParams[\"stats\"] = \"1\"\n\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        setIsListLoading(true);\n        fetch(\n            \"/v1/sales-return?\" +\n            Select +\n            queryParams +\n            \"&sort=\" +\n            sortSalesReturn +\n            sortField +\n            \"&page=\" +\n            page +\n            \"&limit=\" +\n            pageSize,\n            requestOptions\n        )\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    const error = data && data.errors;\n                    return Promise.reject(error);\n                }\n\n                setIsListLoading(false);\n                setIsRefreshInProcess(false);\n                setSalesReturnList(data.result);\n\n                let pageCount = parseInt((data.total_count + pageSize - 1) / pageSize);\n\n                setTotalPages(pageCount);\n                setTotalItems(data.total_count);\n                setOffset((page - 1) * pageSize);\n                setCurrentPageItemsCount(data.result.length);\n\n                totalSalesReturn = data.meta.total_sales_return;\n                setTotalSalesReturn(totalSalesReturn);\n\n                netProfit = data.meta.net_profit;\n                setNetProfit(netProfit);\n\n                loss = data.meta.loss;\n                setLoss(loss);\n\n                vatPrice = data.meta.vat_price;\n                setVatPrice(vatPrice);\n\n                totalDiscount = data.meta.discount;\n                setTotalDiscount(totalDiscount);\n\n                totalPaidSalesReturn = data.meta.paid_sales_return;\n                setTotalPaidSalesReturn(totalPaidSalesReturn);\n\n                totalUnPaidSalesReturn = data.meta.unpaid_sales_return;\n                setTotalUnPaidSalesReturn(totalUnPaidSalesReturn);\n\n                totalCashSalesReturn = data.meta.cash_sales_return;\n                setTotalCashSalesReturn(totalCashSalesReturn);\n\n                totalBankAccountSalesReturn = data.meta.bank_account_sales_return;\n                setTotalBankAccountSalesReturn(totalBankAccountSalesReturn);\n\n            })\n            .catch((error) => {\n                setIsListLoading(false);\n                setIsRefreshInProcess(false);\n                console.log(error);\n            });\n    }\n\n    function sort(field) {\n        sortField = field;\n        setSortField(sortField);\n        sortSalesReturn = sortSalesReturn === \"-\" ? \"\" : \"-\";\n        setSortSalesReturn(sortSalesReturn);\n        list();\n    }\n\n    function changePageSize(size) {\n        pageSize = parseInt(size);\n        setPageSize(pageSize);\n        list();\n    }\n\n    function changePage(newPage) {\n        page = parseInt(newPage);\n        setPage(page);\n        list();\n    }\n\n\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        DetailsViewRef.current.open(id);\n    }\n\n    const CreateFormRef = useRef();\n\n    //Sales Return Payments\n    const SalesReturnPaymentCreateRef = useRef();\n    function openSalesReturnPaymentCreateForm(order) {\n        SalesReturnPaymentCreateRef.current.open(undefined, order);\n    }\n\n    const SalesReturnPaymentDetailsViewRef = useRef();\n    function openSalesReturnPaymentDetailsView(id) {\n        SalesReturnPaymentDetailsViewRef.current.open(id);\n    }\n\n    function openSalesReturnPaymentUpdateForm(id) {\n        SalesReturnPaymentCreateRef.current.open(id);\n    }\n\n    let [netProfit, setNetProfit] = useState(0.00);\n    let [loss, setLoss] = useState(0.00);\n\n\n    let [sortOrder, setSortOrder] = useState(\"-\");\n    const paymentStatusOptions = [\n        {\n            id: \"paid\",\n            name: \"Paid\",\n        },\n        {\n            id: \"not_paid\",\n            name: \"Not Paid\",\n        },\n        {\n            id: \"paid_partially\",\n            name: \"Paid partially\",\n        },\n    ];\n    const paymentMethodOptions = [\n        {\n            id: \"cash\",\n            name: \"cash\",\n        },\n        {\n            id: \"bank_account\",\n            name: \"Bank Account / Debit / Credit card\",\n        },\n    ];\n    const [selectedPaymentMethodList, setSelectedPaymentMethodList] = useState([]);\n    const [selectedPaymentStatusList, setSelectedPaymentStatusList] = useState([]);\n\n    const [selectedSalesReturn, setSelectedSalesReturn] = useState({});\n    let [showSalesReturnPaymentHistory, setShowSalesReturnPaymentHistory] = useState(false);\n\n    function openPaymentsDialogue(salesReturn) {\n        setSelectedSalesReturn(salesReturn);\n        showSalesReturnPaymentHistory = true;\n        setShowSalesReturnPaymentHistory(true);\n    }\n\n    function handlePaymentHistoryClose() {\n        showSalesReturnPaymentHistory = false;\n        setShowSalesReturnPaymentHistory(false);\n        //list();\n    }\n\n    const SalesReturnPaymentListRef = useRef();\n\n    return (\n        <>\n            <SalesReturnCreate ref={CreateFormRef} refreshList={list} showToastMessage={props.showToastMessage} />\n            <SalesReturnView ref={DetailsViewRef} />\n\n            <SalesReturnPaymentCreate ref={SalesReturnPaymentCreateRef} showToastMessage={props.showToastMessage} openDetailsView={openSalesReturnPaymentDetailsView} />\n            <SalesReturnPaymentDetailsView ref={SalesReturnPaymentDetailsViewRef} openUpdateForm={openSalesReturnPaymentUpdateForm} showToastMessage={props.showToastMessage} />\n\n            <div className=\"container-fluid p-0\">\n                <div className=\"row\">\n\n                    <div className=\"col\">\n                        <h1 className=\"text-end\">\n                            Sales Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalSalesReturn}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            Paid Sales Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalPaidSalesReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h4 className=\"text-end\">\n                            Cash Sales Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalCashSalesReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h4>\n                        <h4 className=\"text-end\">\n                            Bank Account Sales Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalBankAccountSalesReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h4>\n                        <h1 className=\"text-end\">\n                            Credit Sales Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalUnPaidSalesReturn.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        {cookies.get('admin') === \"true\" ? <h1 className=\"text-end\">\n                            Net Profit Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={netProfit}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1> : \"\"}\n                        {cookies.get('admin') === \"true\" ? <h1 className=\"text-end\">\n                            Loss Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={loss}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1> : \"\"}\n                        <h1 className=\"text-end\">\n                            Discount Retun: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={totalDiscount.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                        <h1 className=\"text-end\">\n                            VAT Return: <Badge bg=\"secondary\">\n                                <NumberFormat\n                                    value={vatPrice.toFixed(2)}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    suffix={\" SAR\"}\n                                    renderText={(value, props) => value}\n                                />\n                            </Badge>\n                        </h1>\n                    </div>\n\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col\">\n                        <h1 className=\"h3\">Sales Returns</h1>\n                    </div>\n\n                    <div className=\"col text-end\">\n                        <ExcelFile filename={salesReturnReportFileName} element={excelData.length > 0 ? <Button variant=\"success\" className=\"btn btn-primary mb-3 success\" >Download Sales Return Report</Button> : \"\"}>\n                            <ExcelSheet dataSet={excelData} name={salesReturnReportFileName} />\n                        </ExcelFile>\n\n                        {excelData.length == 0 ? <Button variant=\"primary\" className=\"btn btn-primary mb-3\" onClick={getAllSalesReturns} >{fettingAllRecordsInProgress ? \"Preparing..\" : \"Sales Return Report\"}</Button> : \"\"}\n                        &nbsp;&nbsp;\n\n\n                        {/*\n                        <Button\n                            hide={true}\n                            variant=\"primary\"\n                            className=\"btn btn-primary mb-3\"\n                            onClick={openCreateForm}\n                        >\n                            <i className=\"bi bi-plus-lg\"></i> Create\n                        </Button>\n                        */}\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <div className=\"card\">\n                            {/*\n  <div   className=\"card-header\">\n                        <h5   className=\"card-title mb-0\"></h5>\n                    </div>\n                    */}\n                            <div className=\"card-body\">\n                                <div className=\"row\">\n                                    {totalItems === 0 && (\n                                        <div className=\"col\">\n                                            <p className=\"text-start\">No SalesReturns to display</p>\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"row\" style={{ bsalesreturn: \"solid 0px\" }}>\n                                    <div className=\"col text-start\" style={{ bsalesreturn: \"solid 0px\" }}>\n                                        <Button\n                                            onClick={() => {\n                                                setIsRefreshInProcess(true);\n                                                list();\n                                            }}\n                                            variant=\"primary\"\n                                            disabled={isRefreshInProcess}\n                                        >\n                                            {isRefreshInProcess ? (\n                                                <Spinner\n                                                    as=\"span\"\n                                                    animation=\"bsalesreturn\"\n                                                    size=\"sm\"\n                                                    role=\"status\"\n                                                    aria-hidden={true}\n                                                />\n                                            ) : (\n                                                <i className=\"fa fa-refresh\"></i>\n                                            )}\n                                            <span className=\"visually-hidden\">Loading...</span>\n                                        </Button>\n                                    </div>\n                                    <div className=\"col text-center\">\n                                        {isListLoading && (\n                                            <Spinner animation=\"grow\" variant=\"primary\" />\n                                        )}\n                                    </div>\n                                    <div className=\"col text-end\">\n                                        {totalItems > 0 && (\n                                            <>\n                                                <label className=\"form-label\">Size:&nbsp;</label>\n                                                <select\n                                                    value={pageSize}\n                                                    onChange={(e) => {\n                                                        changePageSize(e.target.value);\n                                                    }}\n                                                    className=\"form-control pull-right\"\n                                                    style={{\n                                                        bsalesreturn: \"solid 1px\",\n                                                        bsalesreturnColor: \"silver\",\n                                                        width: \"55px\",\n                                                    }}\n                                                >\n                                                    <option value=\"5\">\n                                                        5\n                                                    </option>\n                                                    <option value=\"10\">\n                                                        10\n                                                    </option>\n                                                    <option value=\"20\">20</option>\n                                                    <option value=\"40\">40</option>\n                                                    <option value=\"50\">50</option>\n                                                    <option value=\"100\">100</option>\n                                                </select>\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n\n                                <br />\n                                <div className=\"row\">\n                                    <div className=\"col\" style={{ bsalesreturn: \"solid 0px\" }}>\n\n                                        {totalPages ? < ReactPaginate\n                                            breakLabel=\"...\"\n                                            nextLabel=\"next >\"\n                                            onPageChange={(event) => {\n                                                changePage(event.selected + 1);\n                                            }}\n                                            pageRangeDisplayed={5}\n                                            pageCount={totalPages}\n                                            previousLabel=\"< previous\"\n                                            renderOnZeroPageCount={null}\n                                            className=\"pagination  flex-wrap\"\n                                            pageClassName=\"page-item\"\n                                            pageLinkClassName=\"page-link\"\n                                            activeClassName=\"active\"\n                                            previousClassName=\"page-item\"\n                                            nextClassName=\"page-item\"\n                                            previousLinkClassName=\"page-link\"\n                                            nextLinkClassName=\"page-link\"\n                                            forcePage={page - 1}\n                                        /> : \"\"}\n                                    </div>\n                                </div>\n                                <div className=\"row\">\n                                    {totalItems > 0 && (\n                                        <>\n                                            <div className=\"col text-start\">\n                                                <p className=\"text-start\">\n                                                    showing {offset + 1}-{offset + currentPageItemsCount} of{\" \"}\n                                                    {totalItems}\n                                                </p>\n                                            </div>\n\n                                            <div className=\"col text-end\">\n                                                <p className=\"text-end\">\n                                                    page {page} of {totalPages}\n                                                </p>\n                                            </div>\n                                        </>\n                                    )}\n                                </div>\n                                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                                    <table className=\"table table-striped table-sm table-bordered\">\n                                        <thead>\n                                            <tr className=\"text-center\">\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"code\");\n                                                        }}\n                                                    >\n                                                        ID\n                                                        {sortField === \"code\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"code\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"order_code\");\n                                                        }}\n                                                    >\n                                                        Order ID\n                                                        {sortField === \"order_code\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"order_code\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"date\");\n                                                        }}\n                                                    >\n                                                        Date\n                                                        {sortField === \"date\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"date\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"net_total\");\n                                                        }}\n                                                    >\n                                                        Net Total\n                                                        {sortField === \"net_total\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"net_total\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"total_payment_paid\");\n                                                        }}\n                                                    >\n                                                        Payment Paid\n                                                        {sortField === \"total_payment_paid\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"total_payment_paid\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"balance_amount\");\n                                                        }}\n                                                    >\n                                                        Balance\n                                                        {sortField === \"balance_amount\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"balance_amount\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payments_count\");\n                                                        }}\n                                                    >\n                                                        No.of Payments\n                                                        {sortField === \"payments_count\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payments_count\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n\n\n                                                {cookies.get('admin') === \"true\" ? <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"net_profit\");\n                                                        }}\n                                                    >\n                                                        Net Profit\n                                                        {sortField === \"net_profit\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"net_profit\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th> : \"\"}\n                                                {cookies.get('admin') === \"true\" ? <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"loss\");\n                                                        }}\n                                                    >\n                                                        Loss\n                                                        {sortField === \"loss\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-numeric-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"loss\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-numeric-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th> : \"\"}\n\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"created_by\");\n                                                        }}\n                                                    >\n                                                        Created By\n                                                        {sortField === \"created_by\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"created_by\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"customer_name\");\n                                                        }}\n                                                    >\n                                                        Customer\n                                                        {sortField === \"customer_name\" &&\n                                                            sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"customer_name\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n\n\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payment_status\");\n                                                        }}\n                                                    >\n                                                        Payment Status\n                                                        {sortField === \"payment_status\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payment_status\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"payment_methods\");\n                                                        }}\n                                                    >\n                                                        Payment Methods\n                                                        {sortField === \"payment_methods\" && sortOrder === \"-\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                                                        ) : null}\n                                                        {sortField === \"payment_methods\" && sortOrder === \"\" ? (\n                                                            <i className=\"bi bi-sort-alpha-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>\n                                                    <b\n                                                        style={{\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={() => {\n                                                            sort(\"created_at\");\n                                                        }}\n                                                    >\n                                                        Created At\n                                                        {sortField === \"created_at\" && sortSalesReturn === \"-\" ? (\n                                                            <i className=\"bi bi-sort-down\"></i>\n                                                        ) : null}\n                                                        {sortField === \"created_at\" && sortSalesReturn === \"\" ? (\n                                                            <i className=\"bi bi-sort-up\"></i>\n                                                        ) : null}\n                                                    </b>\n                                                </th>\n                                                <th>Actions</th>\n                                            </tr>\n                                        </thead>\n\n                                        <thead>\n                                            <tr className=\"text-center\">\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"code\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"code\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"order_code\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"order_code\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <DatePicker\n                                                        id=\"date_str\"\n                                                        value={dateValue}\n                                                        selected={selectedDate}\n                                                        className=\"form-control\"\n                                                        dateFormat=\"MMM dd yyyy\"\n                                                        onChange={(date) => {\n                                                            if (!date) {\n                                                                setDateValue(\"\");\n                                                                searchByDateField(\"date_str\", \"\");\n                                                                return;\n                                                            }\n                                                            searchByDateField(\"date_str\", date);\n                                                        }}\n                                                    />\n                                                    <small\n                                                        style={{\n                                                            color: \"blue\",\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={(e) => setShowDateRange(!showDateRange)}\n                                                    >\n                                                        {showDateRange ? \"Less..\" : \"More..\"}\n                                                    </small>\n                                                    <br />\n\n                                                    {showDateRange ? (\n                                                        <span className=\"text-left\">\n                                                            From:{\" \"}\n                                                            <DatePicker\n                                                                id=\"from_date\"\n                                                                value={fromDateValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setFromDateValue(\"\");\n                                                                        searchByDateField(\"from_date\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"from_date\", date);\n                                                                }}\n                                                            />\n                                                            To:{\" \"}\n                                                            <DatePicker\n                                                                id=\"to_date\"\n                                                                value={toDateValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setToDateValue(\"\");\n                                                                        searchByDateField(\"to_date\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"to_date\", date);\n                                                                }}\n                                                            />\n                                                        </span>\n                                                    ) : null}\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"net_total\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"net_total\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"total_payment_paid\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"total_payment_paid\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"balance_amount\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"balance_amount\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"payments_count\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"payments_count\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th>\n                                                {cookies.get('admin') === \"true\" ? <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"net_profit\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"net_profit\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th> : \"\"}\n                                                {cookies.get('admin') === \"true\" ? <th>\n                                                    <input\n                                                        type=\"text\"\n                                                        id=\"loss\"\n                                                        onChange={(e) =>\n                                                            searchByFieldValue(\"loss\", e.target.value)\n                                                        }\n                                                        className=\"form-control\"\n                                                    />\n                                                </th> : \"\"}\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"created_by\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"created_by\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={userOptions}\n                                                        placeholder=\"Select Users\"\n                                                        selected={selectedCreatedByUsers}\n                                                        highlightOnlyResult={true}\n                                                        onInputChange={(searchTerm, e) => {\n                                                            suggestUsers(searchTerm);\n                                                        }}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"customer_id\"\n                                                        labelKey=\"search_label\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"customer_id\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={customerOptions}\n                                                        placeholder=\"name or mob\"\n                                                        selected={selectedCustomers}\n                                                        highlightOnlyResult={true}\n                                                        onInputChange={(searchTerm, e) => {\n                                                            suggestCustomers(searchTerm);\n                                                        }}\n                                                        multiple\n                                                    />\n                                                </th>\n\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"payment_status\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"payment_status\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={paymentStatusOptions}\n                                                        placeholder=\"Select Payment Status\"\n                                                        selected={selectedPaymentStatusList}\n                                                        highlightOnlyResult={true}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <Typeahead\n                                                        id=\"payment_methods\"\n                                                        labelKey=\"name\"\n                                                        onChange={(selectedItems) => {\n                                                            searchByMultipleValuesField(\n                                                                \"payment_methods\",\n                                                                selectedItems\n                                                            );\n                                                        }}\n                                                        options={paymentMethodOptions}\n                                                        placeholder=\"Select payment methods\"\n                                                        selected={selectedPaymentMethodList}\n                                                        highlightOnlyResult={true}\n                                                        multiple\n                                                    />\n                                                </th>\n                                                <th>\n                                                    <DatePicker\n                                                        id=\"created_at\"\n                                                        value={createdAtValue}\n                                                        selected={selectedDate}\n                                                        className=\"form-control\"\n                                                        dateFormat=\"MMM dd yyyy\"\n                                                        onChange={(date) => {\n                                                            if (!date) {\n                                                                setCreatedAtValue(\"\");\n                                                                searchByDateField(\"created_at\", \"\");\n                                                                return;\n                                                            }\n                                                            searchByDateField(\"created_at\", date);\n                                                        }}\n                                                    />\n                                                    <small\n                                                        style={{\n                                                            color: \"blue\",\n                                                            textDecoration: \"underline\",\n                                                            cursor: \"pointer\",\n                                                        }}\n                                                        onClick={(e) =>\n                                                            setShowCreatedAtDateRange(!showCreatedAtDateRange)\n                                                        }\n                                                    >\n                                                        {showCreatedAtDateRange ? \"Less..\" : \"More..\"}\n                                                    </small>\n                                                    <br />\n\n                                                    {showCreatedAtDateRange ? (\n                                                        <span className=\"text-left\">\n                                                            From:{\" \"}\n                                                            <DatePicker\n                                                                id=\"created_at_from\"\n                                                                value={createdAtFromValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setCreatedAtFromValue(\"\");\n                                                                        searchByDateField(\"created_at_from\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"created_at_from\", date);\n                                                                }}\n                                                            />\n                                                            To:{\" \"}\n                                                            <DatePicker\n                                                                id=\"created_at_to\"\n                                                                value={createdAtToValue}\n                                                                selected={selectedDate}\n                                                                className=\"form-control\"\n                                                                dateFormat=\"MMM dd yyyy\"\n                                                                onChange={(date) => {\n                                                                    if (!date) {\n                                                                        setCreatedAtToValue(\"\");\n                                                                        searchByDateField(\"created_at_to\", \"\");\n                                                                        return;\n                                                                    }\n                                                                    searchByDateField(\"created_at_to\", date);\n                                                                }}\n                                                            />\n                                                        </span>\n                                                    ) : null}\n                                                </th>\n                                                <th></th>\n                                            </tr>\n                                        </thead>\n\n                                        <tbody className=\"text-center\">\n                                            {salesreturnList &&\n                                                salesreturnList.map((salesreturn) => (\n                                                    <tr key={salesreturn.code}>\n                                                        <td>{salesreturn.code}</td>\n                                                        <td>{salesreturn.order_code}</td>\n                                                        <td>\n                                                            {format(\n                                                                new Date(salesreturn.date),\n                                                                \"MMM dd yyyy h:mma\"\n                                                            )}\n                                                        </td>\n                                                        <td>{salesreturn.net_total} SAR</td>\n                                                        <td>\n                                                            <Button variant=\"link\" onClick={() => {\n                                                                openPaymentsDialogue(salesreturn);\n                                                            }}>\n                                                                {salesreturn.total_payment_paid?.toFixed(2)}\n                                                            </Button>\n                                                        </td>\n                                                        <td>{salesreturn.balance_amount?.toFixed(2)}</td>\n                                                        <td>\n                                                            <Button variant=\"link\" onClick={() => {\n                                                                openPaymentsDialogue(salesreturn);\n                                                            }}>\n                                                                {salesreturn.payments_count}\n                                                            </Button>\n                                                        </td>\n                                                        {cookies.get('admin') === \"true\" ? <td>{salesreturn.net_profit.toFixed(2)} SAR</td> : \"\"}\n                                                        {cookies.get('admin') === \"true\" ? <td>{salesreturn.loss ? salesreturn.loss.toFixed(2) : 0.00} SAR</td> : \"\"}\n                                                        <td>{salesreturn.created_by_name}</td>\n                                                        <td>{salesreturn.customer_name}</td>\n\n                                                        <td>\n                                                            {salesreturn.payment_status == \"paid\" ?\n                                                                <span className=\"badge bg-success\">\n                                                                    Paid\n                                                                </span> : \"\"}\n                                                            {salesreturn.payment_status == \"paid_partially\" ?\n                                                                <span className=\"badge bg-warning\">\n                                                                    Paid Partially\n                                                                </span> : \"\"}\n                                                            {salesreturn.payment_status == \"not_paid\" ?\n                                                                <span className=\"badge bg-danger\">\n                                                                    Not Paid\n                                                                </span> : \"\"}\n                                                        </td>\n                                                        <td>\n\n                                                            {salesreturn.payment_methods &&\n                                                                salesreturn.payment_methods.map((name) => (\n                                                                    <span className=\"badge bg-info\">{name}</span>\n                                                                ))}\n\n                                                        </td>\n                                                        <td>\n                                                            {format(\n                                                                new Date(salesreturn.created_at),\n                                                                \"MMM dd yyyy h:mma\"\n                                                            )}\n                                                        </td>\n                                                        <td>\n                                                            {/*\n                                                        <SalesReturnUpdate id={salesreturn.id} showUpdateButton={{true}} refreshList={list} showToastMessage={props.showToastMessage} />\n                                                          <SalesReturnView id={salesreturn.id} showViewButton={{true}} show={false} />\n                                                        */}\n\n                                                            <Button className=\"btn btn-primary btn-sm\" onClick={() => {\n                                                                openDetailsView(salesreturn.id);\n                                                            }}>\n                                                                <i className=\"bi bi-eye\"></i>\n                                                            </Button>\n\n                                                            <button\n                                                                className=\"btn btn-outline-secondary dropdown-toggle\"\n                                                                type=\"button\"\n                                                                data-bs-toggle=\"dropdown\"\n                                                                aria-expanded=\"false\"\n                                                            ></button>\n                                                            <ul className=\"dropdown-menu\">\n                                                                <li>\n                                                                    <button className=\"dropdown-item\" onClick={() => {\n                                                                        openSalesReturnPaymentCreateForm(salesreturn);\n                                                                    }}>\n                                                                        <i className=\"bi bi-plus\"></i>\n                                                                        &nbsp;\n                                                                        Add Payment\n                                                                    </button>\n                                                                </li>\n                                                            </ul>\n                                                        </td>\n                                                    </tr>\n                                                ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n\n                                {totalPages ? <ReactPaginate\n                                    breakLabel=\"...\"\n                                    nextLabel=\"next >\"\n                                    onPageChange={(event) => {\n                                        changePage(event.selected + 1);\n                                    }}\n                                    pageRangeDisplayed={5}\n                                    pageCount={totalPages}\n                                    previousLabel=\"< previous\"\n                                    renderOnZeroPageCount={null}\n                                    className=\"pagination  flex-wrap\"\n                                    pageClassName=\"page-item\"\n                                    pageLinkClassName=\"page-link\"\n                                    activeClassName=\"active\"\n                                    previousClassName=\"page-item\"\n                                    nextClassName=\"page-item\"\n                                    previousLinkClassName=\"page-link\"\n                                    nextLinkClassName=\"page-link\"\n                                    forcePage={page - 1}\n                                /> : \"\"}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <Modal show={showSalesReturnPaymentHistory} size=\"lg\" onHide={handlePaymentHistoryClose} animation={false} scrollable={true}>\n                <Modal.Header>\n                    <Modal.Title>Payment history of Sales Return #{selectedSalesReturn.code}</Modal.Title>\n\n                    <div className=\"col align-self-end text-end\">\n                        <button\n                            type=\"button\"\n                            className=\"btn-close\"\n                            onClick={handlePaymentHistoryClose}\n                            aria-label=\"Close\"\n                        ></button>\n\n                    </div>\n                </Modal.Header>\n                <Modal.Body>\n                    <SalesReturnPaymentIndex ref={SalesReturnPaymentListRef} showToastMessage={props.showToastMessage} salesReturn={selectedSalesReturn} refreshSalesReturnList={list} />\n                </Modal.Body>\n            </Modal>\n        </>\n    );\n}\n\nexport default SalesReturnIndex;\n"]},"metadata":{},"sourceType":"module"}