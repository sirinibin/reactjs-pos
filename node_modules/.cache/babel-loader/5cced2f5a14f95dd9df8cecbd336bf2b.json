{"ast":null,"code":"import _objectSpread from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,forwardRef,useImperativeHandle}from\"react\";import PurchasePreview from'./preview.js';import{Modal,Button,Table}from'react-bootstrap';import Cookies from\"universal-cookie\";import NumberFormat from\"react-number-format\";import PurchasePrint from'./print.js';import{format}from\"date-fns\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PurchaseView=/*#__PURE__*/forwardRef(function(props,ref){useImperativeHandle(ref,function(){return{open:function open(id){if(id){getPurchase(id);getCashDiscounts(id);getPayments(id);setShow(true);}}};});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),model=_useState2[0],setModel=_useState2[1];var cookies=new Cookies();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];function handleClose(){setShow(false);};function ObjectToSearchQueryParams(object){return Object.keys(object).map(function(key){return\"search[\".concat(key,\"]=\").concat(object[key]);}).join(\"&\");}var _useState5=useState(0.0),_useState6=_slicedToArray(_useState5,2),totalPrice=_useState6[0],setTotalPrice=_useState6[1];var _useState7=useState(0.00),_useState8=_slicedToArray(_useState7,2),netTotal=_useState8[0],setNetTotal=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),totalQuantity=_useState10[0],setTotalQuantity=_useState10[1];var _useState11=useState(0.00),_useState12=_slicedToArray(_useState11,2),vatPrice=_useState12[0],setVatPrice=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),searchParams=_useState14[0],setSearchParams=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),purchaseCashDiscountList=_useState16[0],setPurchaseCashDiscountList=_useState16[1];var _useState17=useState(0.00),_useState18=_slicedToArray(_useState17,2),totalCashDiscounts=_useState18[0],setTotalCashDiscounts=_useState18[1];function getCashDiscounts(purchase_id){var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};var Select=\"select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}searchParams[\"purchase_id\"]=purchase_id;setSearchParams(searchParams);var queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}fetch(\"/v1/purchase-cash-discount?\"+Select+queryParams,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get(\"content-type\"))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes(\"application/json\");_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:setPurchaseCashDiscountList(data.result);totalCashDiscounts=data.meta.total_cash_discount;setTotalCashDiscounts(totalCashDiscounts);case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){console.log(error);});}var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),purchasePaymentList=_useState20[0],setPurchasePaymentList=_useState20[1];var _useState21=useState(0.00),_useState22=_slicedToArray(_useState21,2),totalPayments=_useState22[0],setTotalPayments=_useState22[1];function getPayments(purchase_id){var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};var Select=\"select=id,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}searchParams[\"purchase_id\"]=purchase_id;setSearchParams(searchParams);var queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}fetch(\"/v1/purchase-payment?\"+Select+queryParams,requestOptions).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var _response$headers$get2;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isJson=(_response$headers$get2=response.headers.get(\"content-type\"))===null||_response$headers$get2===void 0?void 0:_response$headers$get2.includes(\"application/json\");_context2.t0=isJson;if(!_context2.t0){_context2.next=6;break;}_context2.next=5;return response.json();case 5:_context2.t0=_context2.sent;case 6:data=_context2.t0;if(response.ok){_context2.next=10;break;}error=data&&data.errors;return _context2.abrupt(\"return\",Promise.reject(error));case 10:setPurchasePaymentList(data.result);totalPayments=data.meta.total_payment;setTotalPayments(totalPayments);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log(error);});}function getPurchase(id){console.log(\"inside get Purchase\");var requestOptions={method:'GET',headers:{'Content-Type':'application/json','Authorization':cookies.get('access_token')}};fetch('/v1/purchase/'+id,requestOptions).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response){var _response$headers$get3;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:isJson=(_response$headers$get3=response.headers.get('content-type'))===null||_response$headers$get3===void 0?void 0:_response$headers$get3.includes('application/json');_context3.t0=isJson;if(!_context3.t0){_context3.next=6;break;}_context3.next=5;return response.json();case 5:_context3.t0=_context3.sent;case 6:data=_context3.t0;if(response.ok){_context3.next=10;break;}error=data&&data.errors;return _context3.abrupt(\"return\",Promise.reject(error));case 10:// setErrors({});\nconsole.log(\"Response:\");console.log(data);model=data.result;setModel(_objectSpread({},model));case 14:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}()).catch(function(error){// setErrors(error);\n});}var PreviewRef=useRef();function openPreview(){PreviewRef.current.open(model);}var PrintRef=useRef();function openPrint(){PrintRef.current.open(model);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PurchasePreview,{ref:PreviewRef}),/*#__PURE__*/_jsx(PurchasePrint,{ref:PrintRef}),/*#__PURE__*/_jsxs(Modal,{show:show,size:\"xl\",onHide:handleClose,animation:false,scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Details of Purchase #\",model.code,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col align-self-end text-end\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:openPrint,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-printer\"}),\" Print\"]}),\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:openPreview,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-display\"}),\" E-Purchase Invoice\"]}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",props.openCreateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openCreateForm();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\" Create\"]}):\"\",\"\\xA0\\xA0\",props.openUpdateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openUpdateForm(model.id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"}),\" Edit\"]}):\"\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose,\"aria-label\":\"Close\"})]})]}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,responsive:\"lg\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Store:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.store_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Vendor:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.vendor_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Vendor Invoice No.:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.vendor_invoice_no]}),/*#__PURE__*/_jsx(\"th\",{children:\"Order Placed by:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.order_placed_by_name]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.date?format(new Date(model.date),\"MMMM d, yyyy h:mm aa\"):\"\"]}),/*#__PURE__*/_jsx(\"th\",{children:\"VAT %:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.vat_percent,\"%\"]}),/*#__PURE__*/_jsx(\"th\",{children:\"Discount :\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.discount,\" SAR\"]}),/*#__PURE__*/_jsx(\"th\",{children:\"Discount %:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.discount_percent,\" SAR\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Payment Status:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.payment_status]}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Method:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.payment_method]}),/*#__PURE__*/_jsx(\"th\",{children:\"Partial Payment Amount:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.partial_payment_amount]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Status:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.status]}),/*#__PURE__*/_jsx(\"th\",{children:\"Signature Date:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.signature_date_str]}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_at]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_at]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Created By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_by_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_by_name]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[purchaseCashDiscountList.length>0?/*#__PURE__*/_jsx(\"th\",{children:\"Cash Discounts\"}):\"\",purchaseCashDiscountList.length>0?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:purchaseCashDiscountList&&purchaseCashDiscountList.map(function(discount){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:discount.amount.toFixed(2)+\" SAR\"}),/*#__PURE__*/_jsx(\"td\",{children:discount.created_by_name}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(discount.created_at),\"MMM dd yyyy H:mma\")})]},discount.id);})})]})})}):\"\",purchasePaymentList.length>0?/*#__PURE__*/_jsx(\"th\",{children:\"Payments\"}):\"\",purchasePaymentList.length>0?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:purchasePaymentList&&purchasePaymentList.map(function(payment){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:payment.amount.toFixed(2)+\" SAR\"}),/*#__PURE__*/_jsx(\"td\",{children:payment.method}),/*#__PURE__*/_jsx(\"td\",{children:payment.created_by_name}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(payment.created_at),\"MMM dd yyyy H:mma\")})]},payment.id);})})]})})}):\"\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"SI No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Part No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Purchase Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Purchase Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty Returned\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wholesale Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Retail Unit Price\"}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:\"Wholesale Profit\"}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:\"Retail Profit\"}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:\"Wholesale Loss\"}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:\"Retail Loss\"}):\"\"]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[model.products&&model.products.map(function(product,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:product.part_number}),/*#__PURE__*/_jsxs(\"td\",{children:[product.name,product.name_in_arabic?\" / \"+product.name_in_arabic:\"\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[product.quantity,\"  \",product.unit?product.unit:\"\",\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.purchase_unit_price,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:(product.purchase_unit_price*product.quantity).toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),/*#__PURE__*/_jsxs(\"td\",{children:[product.quantity_returned,\"  \",product.unit?product.unit:\"\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.wholesale_unit_price,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.retail_unit_price,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.wholesale_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.retail_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.wholesale_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:product.retail_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\"]},index);}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"5\",className:\"text-end\",children:\"Total\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.total,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",className:\"text-end\",children:\"Total Profit/Loss\"}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.wholesale_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.retail_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.wholesale_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.retail_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\"]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"5\",className:\"text-end\",children:\"Shipping / Handling Fees\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:model.shipping_handling_fees?/*#__PURE__*/_jsx(NumberFormat,{value:model.shipping_handling_fees.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}}):\"0.00 SAR\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"5\",className:\"text-end\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.discount,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",className:\"text-end\"}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.discount-model.return_discount,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.discount-model.return_discount,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\"]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"4\",className:\"text-end\",children:\"VAT\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:model.vat_percent+\"%\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.vat_price,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",className:\"text-end\"}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:0,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\"]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:\"Net Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.net_total,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",className:\"text-end\",children:\"Net Profit/Loss\"}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.net_wholesale_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.net_retail_profit,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.wholesale_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NumberFormat,{value:model.retail_loss,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})}):\"\"]})]})]})})]})]})]});});export default PurchaseView;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/purchase/view.js"],"names":["React","useState","useRef","forwardRef","useImperativeHandle","PurchasePreview","Modal","Button","Table","Cookies","NumberFormat","PurchasePrint","format","PurchaseView","props","ref","open","id","getPurchase","getCashDiscounts","getPayments","setShow","model","setModel","cookies","show","handleClose","ObjectToSearchQueryParams","object","Object","keys","map","key","join","totalPrice","setTotalPrice","netTotal","setNetTotal","totalQuantity","setTotalQuantity","vatPrice","setVatPrice","searchParams","setSearchParams","purchaseCashDiscountList","setPurchaseCashDiscountList","totalCashDiscounts","setTotalCashDiscounts","purchase_id","requestOptions","method","headers","Authorization","get","Select","store_id","queryParams","fetch","then","response","isJson","includes","json","data","ok","error","errors","Promise","reject","result","meta","total_cash_discount","catch","console","log","purchasePaymentList","setPurchasePaymentList","totalPayments","setTotalPayments","total_payment","PreviewRef","openPreview","current","PrintRef","openPrint","code","openCreateForm","openUpdateForm","store_name","vendor_name","vendor_invoice_no","order_placed_by_name","date","Date","vat_percent","discount","discount_percent","payment_status","payment_method","partial_payment_amount","status","signature_date_str","created_at","updated_at","created_by_name","updated_by_name","length","overflowX","amount","toFixed","payment","products","product","index","part_number","name","name_in_arabic","quantity","unit","purchase_unit_price","value","quantity_returned","wholesale_unit_price","retail_unit_price","wholesale_profit","retail_profit","wholesale_loss","retail_loss","total","shipping_handling_fees","return_discount","vat_price","net_total","net_wholesale_profit","net_retail_profit"],"mappings":"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","sourcesContent":["import React, { useState, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport PurchasePreview from './preview.js';\nimport { Modal, Button, Table } from 'react-bootstrap';\nimport Cookies from \"universal-cookie\";\nimport NumberFormat from \"react-number-format\";\nimport PurchasePrint from './print.js';\nimport { format } from \"date-fns\";\n\n\nconst PurchaseView = forwardRef((props, ref) => {\n\n    useImperativeHandle(ref, () => ({\n        open(id) {\n            if (id) {\n                getPurchase(id);\n                getCashDiscounts(id);\n                getPayments(id);\n                setShow(true);\n            }\n\n        },\n\n    }));\n\n    let [model, setModel] = useState({});\n    const cookies = new Cookies();\n\n    const [show, setShow] = useState(false);\n\n    function handleClose() {\n        setShow(false);\n    };\n\n    function ObjectToSearchQueryParams(object) {\n        return Object.keys(object)\n            .map(function (key) {\n                return `search[${key}]=${object[key]}`;\n            })\n            .join(\"&\");\n    }\n\n    let [totalPrice, setTotalPrice] = useState(0.0);\n    let [netTotal, setNetTotal] = useState(0.00);\n    let [totalQuantity, setTotalQuantity] = useState(0);\n    let [vatPrice, setVatPrice] = useState(0.00);\n\n    const [searchParams, setSearchParams] = useState({});\n\n    let [purchaseCashDiscountList, setPurchaseCashDiscountList] = useState([]);\n    let [totalCashDiscounts, setTotalCashDiscounts] = useState(0.00);\n\n    function getCashDiscounts(purchase_id) {\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,amount,store_name,purchase_code,purchase_id,created_by_name,created_at\";\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n        searchParams[\"purchase_id\"] = purchase_id;\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        fetch(\n            \"/v1/purchase-cash-discount?\" +\n            Select +\n            queryParams,\n            requestOptions\n        )\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    const error = data && data.errors;\n                    return Promise.reject(error);\n                }\n\n                setPurchaseCashDiscountList(data.result);\n                totalCashDiscounts = data.meta.total_cash_discount;\n                setTotalCashDiscounts(totalCashDiscounts);\n\n\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n\n    let [purchasePaymentList, setPurchasePaymentList] = useState([]);\n    let [totalPayments, setTotalPayments] = useState(0.00);\n\n    function getPayments(purchase_id) {\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n        let Select =\n            \"select=id,amount,method,store_name,purchase_code,purchase_id,created_by_name,created_at\";\n        if (cookies.get(\"store_id\")) {\n            searchParams.store_id = cookies.get(\"store_id\");\n        }\n        searchParams[\"purchase_id\"] = purchase_id;\n        setSearchParams(searchParams);\n        let queryParams = ObjectToSearchQueryParams(searchParams);\n        if (queryParams !== \"\") {\n            queryParams = \"&\" + queryParams;\n        }\n\n        fetch(\n            \"/v1/purchase-payment?\" +\n            Select +\n            queryParams,\n            requestOptions\n        )\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    const error = data && data.errors;\n                    return Promise.reject(error);\n                }\n\n                setPurchasePaymentList(data.result);\n                totalPayments = data.meta.total_payment;\n                setTotalPayments(totalPayments);\n\n\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    function getPurchase(id) {\n        console.log(\"inside get Purchase\");\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        fetch('/v1/purchase/' + id, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                // setErrors({});\n\n                console.log(\"Response:\");\n                console.log(data);\n\n\n                model = data.result;\n\n                setModel({ ...model });\n            })\n            .catch(error => {\n                // setErrors(error);\n            });\n    }\n\n\n    const PreviewRef = useRef();\n    function openPreview() {\n        PreviewRef.current.open(model);\n    }\n\n    const PrintRef = useRef();\n    function openPrint() {\n        PrintRef.current.open(model);\n    }\n\n    return (<>\n        <PurchasePreview ref={PreviewRef} />\n        <PurchasePrint ref={PrintRef} />\n        <Modal show={show} size=\"xl\" onHide={handleClose} animation={false} scrollable={true}>\n            <Modal.Header>\n                <Modal.Title>Details of Purchase #{model.code} </Modal.Title>\n\n\n                <div className=\"col align-self-end text-end\">\n                    <Button variant=\"primary\" onClick={openPrint}>\n                        <i className=\"bi bi-printer\"></i> Print\n                    </Button>\n                    &nbsp;&nbsp;\n                    <Button variant=\"primary\" onClick={openPreview}>\n                        <i className=\"bi bi-display\"></i> E-Purchase Invoice\n                    </Button>\n                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                    {props.openCreateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openCreateForm();\n                    }}>\n                        <i className=\"bi bi-plus\"></i> Create\n                    </Button> : \"\"}\n                    &nbsp;&nbsp;\n                    {props.openUpdateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openUpdateForm(model.id);\n                    }}>\n                        <i className=\"bi bi-pencil\"></i> Edit\n                    </Button> : \"\"}\n\n                    <button\n                        type=\"button\"\n                        className=\"btn-close\"\n                        onClick={handleClose}\n                        aria-label=\"Close\"\n                    ></button>\n\n                </div>\n            </Modal.Header>\n            <Modal.Body>\n                <Table striped bordered hover responsive=\"lg\">\n                    <tbody>\n                        <tr>\n                            <th>Store:</th><td> {model.store_name}</td>\n                            <th>Vendor:</th><td> {model.vendor_name}</td>\n                            <th>Vendor Invoice No.:</th><td> {model.vendor_invoice_no}</td>\n                            <th>Order Placed by:</th><td> {model.order_placed_by_name}</td>\n                        </tr>\n                        <tr>\n                            <th>Date:</th><td> {model.date ? format(\n                                new Date(model.date),\n                                \"MMMM d, yyyy h:mm aa\"\n                            ) : \"\"}</td>\n                            <th>VAT %:</th><td> {model.vat_percent}%</td>\n                            <th>Discount :</th><td> {model.discount} SAR</td>\n                            <th>Discount %:</th><td> {model.discount_percent} SAR</td>\n                        </tr>\n                        <tr>\n                            <th>Payment Status:</th><td> {model.payment_status}</td>\n                            <th>Payment Method:</th><td> {model.payment_method}</td>\n                            <th>Partial Payment Amount:</th><td> {model.partial_payment_amount}</td>\n                        </tr>\n                        <tr>\n                            <th>Status:</th><td> {model.status}</td>\n                            <th>Signature Date:</th><td> {model.signature_date_str}</td>\n                            <th>Created At:</th><td> {model.created_at}</td>\n                            <th>Updated At:</th><td> {model.updated_at}</td>\n                        </tr>\n                        <tr>\n                            <th>Created By:</th><td> {model.created_by_name}</td>\n                            <th>Updated By:</th><td> {model.updated_by_name}</td>\n                        </tr>\n                        <tr>\n                            {purchaseCashDiscountList.length > 0 ?\n                                <th>Cash Discounts</th> : \"\"}\n                            {purchaseCashDiscountList.length > 0 ?\n                                <td>\n                                    <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                                        <table className=\"table table-striped table-sm table-bordered\">\n                                            <thead>\n                                                <tr className=\"text-center\">\n                                                    <th>\n                                                        Amount\n                                                    </th>\n\n                                                    <th>\n                                                        Created By\n                                                    </th>\n                                                    <th>\n                                                        Created At\n                                                    </th>\n                                                </tr>\n                                            </thead>\n                                            <tbody className=\"text-center\">\n                                                {purchaseCashDiscountList &&\n                                                    purchaseCashDiscountList.map((discount) => (\n                                                        <tr key={discount.id}>\n                                                            <td>{discount.amount.toFixed(2) + \" SAR\"}</td>\n                                                            <td>{discount.created_by_name}</td>\n                                                            <td>\n                                                                {format(\n                                                                    new Date(discount.created_at),\n                                                                    \"MMM dd yyyy H:mma\"\n                                                                )}\n                                                            </td>\n                                                        </tr>\n                                                    ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </td> : \"\"}\n                            {purchasePaymentList.length > 0 ?\n                                <th>Payments</th> : \"\"}\n                            {purchasePaymentList.length > 0 ?\n                                <td>\n                                    <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                                        <table className=\"table table-striped table-sm table-bordered\">\n                                            <thead>\n                                                <tr className=\"text-center\">\n                                                    <th>\n                                                        Amount\n                                                    </th>\n                                                    <th>\n                                                        Payment Method\n                                                    </th>\n\n                                                    <th>\n                                                        Created By\n                                                    </th>\n                                                    <th>\n                                                        Created At\n                                                    </th>\n                                                </tr>\n                                            </thead>\n                                            <tbody className=\"text-center\">\n                                                {purchasePaymentList &&\n                                                    purchasePaymentList.map((payment) => (\n                                                        <tr key={payment.id}>\n                                                            <td>{payment.amount.toFixed(2) + \" SAR\"}</td>\n                                                            <td>{payment.method}</td>\n                                                            <td>{payment.created_by_name}</td>\n                                                            <td>\n                                                                {format(\n                                                                    new Date(payment.created_at),\n                                                                    \"MMM dd yyyy H:mma\"\n                                                                )}\n                                                            </td>\n                                                        </tr>\n                                                    ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </td> : \"\"}\n                        </tr>\n                    </tbody>\n                </Table>\n\n                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                    <table className=\"table table-striped table-sm table-bordered\">\n                        <thead>\n                            <tr className=\"text-center\">\n                                <th>SI No.</th>\n                                <th>Part No.</th>\n                                <th>Name</th>\n                                <th>Qty</th>\n                                <th>Purchase Unit Price</th>\n                                <th>Purchase Price</th>\n                                <th>Qty Returned</th>\n                                <th>Wholesale Unit Price</th>\n                                <th>Retail Unit Price</th>\n\n                                {cookies.get('admin') === \"true\" ? <th>Wholesale Profit</th> : \"\"}\n                                {cookies.get('admin') === \"true\" ? <th>Retail Profit</th> : \"\"}\n                                {cookies.get('admin') === \"true\" ? <th>Wholesale Loss</th> : \"\"}\n                                {cookies.get('admin') === \"true\" ? <th>Retail Loss</th> : \"\"}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {model.products && model.products.map((product, index) => (\n                                <tr key={index} className=\"text-center\">\n                                    <td>{index + 1}</td>\n                                    <td>{product.part_number}</td>\n                                    <td>{product.name}{product.name_in_arabic ? \" / \" + product.name_in_arabic : \"\"}</td>\n                                    <td>{product.quantity}  {product.unit ? product.unit : \"\"} </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={product.purchase_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={(product.purchase_unit_price * product.quantity).toFixed(2)}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td>\n                                    <td>\n                                        {product.quantity_returned}  {product.unit ? product.unit : \"\"}\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={product.wholesale_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td>\n\n                                    <td>\n                                        <NumberFormat\n                                            value={product.retail_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td>\n                                    {cookies.get('admin') === \"true\" ?\n                                        <td>\n                                            <NumberFormat\n                                                value={product.wholesale_profit}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                        : \"\"}\n                                    {cookies.get('admin') === \"true\" ?\n                                        <td>\n                                            <NumberFormat\n                                                value={product.retail_profit}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                        : \"\"}\n                                    {cookies.get('admin') === \"true\" ?\n                                        <td>\n                                            <NumberFormat\n                                                value={product.wholesale_loss}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                        : \"\"}\n                                    {cookies.get('admin') === \"true\" ?\n                                        <td>\n                                            <NumberFormat\n                                                value={product.retail_loss}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\" SAR\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                        : \"\"}\n                                </tr>\n\n                            ))}\n                            <tr>\n                                <th colSpan=\"5\" className=\"text-end\">Total</th>\n                                <td className=\"text-center\">\n                                    <NumberFormat\n                                        value={model.total}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        suffix={\" SAR\"}\n                                        renderText={(value, props) => value}\n                                    />\n                                </td>\n                                {cookies.get('admin') === \"true\" ?\n                                    <th colSpan=\"3\" className=\"text-end\">Total Profit/Loss</th>\n                                    : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.wholesale_profit}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.retail_profit}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.wholesale_loss}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.retail_loss}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                            </tr>\n                            <tr>\n                                <th colSpan=\"5\" className=\"text-end\">\n                                    Shipping / Handling Fees\n                                </th>\n                                <td className=\"text-end\">\n                                    {model.shipping_handling_fees ? <NumberFormat\n                                        value={model.shipping_handling_fees.toFixed(2)}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        suffix={\" SAR\"}\n                                        renderText={(value, props) => value}\n                                    /> : \"0.00 SAR\"}\n                                </td>\n                                <td colSpan=\"3\"></td>\n                            </tr>\n                            <tr>\n                                <th colSpan=\"5\" className=\"text-end\">\n                                    Discount\n                                </th>\n\n                                <td className=\"text-center\">\n                                    <NumberFormat\n                                        value={model.discount}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        suffix={\" SAR\"}\n                                        renderText={(value, props) => value}\n                                    />\n                                </td>\n                                <th colSpan=\"3\" className=\"text-end\">\n\n                                </th>\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.discount - model.return_discount}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.discount - model.return_discount}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                            </tr>\n                            <tr>\n                                <th colSpan=\"4\" className=\"text-end\">\n                                    VAT\n                                </th>\n                                <td className=\"text-center\">{model.vat_percent + \"%\"}</td>\n                                <td className=\"text-center\">\n                                    <NumberFormat\n                                        value={model.vat_price}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        suffix={\" SAR\"}\n                                        renderText={(value, props) => value}\n                                    />\n                                </td>\n                                <th colSpan=\"3\" className=\"text-end\">\n\n                                </th>\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td>\n                                    : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <td className=\"text-center\">\n                                        <NumberFormat\n                                            value={0}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </td> : \"\"}\n                            </tr>\n\n                            <tr>\n                                <td colSpan=\"4\"></td>\n                                <th className=\"text-end\">Net Total</th>\n                                <th className=\"text-center\">\n                                    <NumberFormat\n                                        value={model.net_total}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        suffix={\" SAR\"}\n                                        renderText={(value, props) => value}\n                                    />\n                                </th>\n                                {cookies.get('admin') === \"true\" ?\n                                    <th colSpan=\"3\" className=\"text-end\" >Net Profit/Loss</th>\n                                    : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <th className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.net_wholesale_profit}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </th>\n                                    : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <th className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.net_retail_profit}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n\n                                    </th> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <th className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.wholesale_loss}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </th> : \"\"}\n                                {cookies.get('admin') === \"true\" ?\n                                    <th className=\"text-center\">\n                                        <NumberFormat\n                                            value={model.retail_loss}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            suffix={\" SAR\"}\n                                            renderText={(value, props) => value}\n                                        />\n                                    </th>\n                                    : \"\"}\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n\n                {/*\n                    <form className=\"row g-3 needs-validation\" >\n                        \n                  \n                        <div className=\"col-md-6\">\n                            <label className=\"form-label\"\n                            >Delivered By*</label\n                            >\n\n                            <div className=\"input-group mb-3\">\n                                <input type=\"text\" className=\"form-control\" id=\"validationCustom06\" placeholder=\"Select User\" aria-label=\"Select User\" aria-describedby=\"button-addon4\" />\n                                <UserCreate showCreateButton={true} />\n                                <div className=\"valid-feedback\">Looks good!</div>\n                                <div className=\"invalid-feedback\">\n                                    Please provide a valid User.\n                  </div>\n                            </div>\n                        </div>\n                       \n\n                    </form>\n                    */}\n            </Modal.Body>\n            {/*\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\n                        Close\n                </Button>\n                    <Button variant=\"primary\" onClick={this.handleClose}>\n                        Save Changes\n                </Button>\n                </Modal.Footer>\n                */}\n        </Modal>\n    </>);\n\n});\n\nexport default PurchaseView;"]},"metadata":{},"sourceType":"module"}