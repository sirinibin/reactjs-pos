{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _Barcode2 = require('../Barcode.js');\n\nvar _Barcode3 = _interopRequireDefault(_Barcode2);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // This is the master class,\n// it does require the start code to be included in the string\n\n\nvar CODE128 = function (_Barcode) {\n  _inherits(CODE128, _Barcode);\n\n  function CODE128(data, options) {\n    _classCallCheck(this, CODE128); // Get array of ascii codes from data\n\n\n    var _this = _possibleConstructorReturn(this, (CODE128.__proto__ || Object.getPrototypeOf(CODE128)).call(this, data.substring(1), options));\n\n    _this.bytes = data.split('').map(function (char) {\n      return char.charCodeAt(0);\n    });\n    return _this;\n  }\n\n  _createClass(CODE128, [{\n    key: 'valid',\n    value: function valid() {\n      // ASCII value ranges 0-127, 200-211\n      return /^[\\x00-\\x7F\\xC8-\\xD3]+$/.test(this.data);\n    } // The public encoding function\n\n  }, {\n    key: 'encode',\n    value: function encode() {\n      var bytes = this.bytes; // Remove the start code from the bytes and set its index\n\n      var startIndex = bytes.shift() - 105; // Get start set by index\n\n      var startSet = _constants.SET_BY_CODE[startIndex];\n\n      if (startSet === undefined) {\n        throw new RangeError('The encoding does not start with a start character.');\n      }\n\n      if (this.shouldEncodeAsEan128() === true) {\n        bytes.unshift(_constants.FNC1);\n      } // Start encode with the right type\n\n\n      var encodingResult = CODE128.next(bytes, 1, startSet);\n      return {\n        text: this.text === this.data ? this.text.replace(/[^\\x20-\\x7E]/g, '') : this.text,\n        data: // Add the start bits\n        CODE128.getBar(startIndex) + // Add the encoded bits\n        encodingResult.result + // Add the checksum\n        CODE128.getBar((encodingResult.checksum + startIndex) % _constants.MODULO) + // Add the end bits\n        CODE128.getBar(_constants.STOP)\n      };\n    } // GS1-128/EAN-128\n\n  }, {\n    key: 'shouldEncodeAsEan128',\n    value: function shouldEncodeAsEan128() {\n      var isEAN128 = this.options.ean128 || false;\n\n      if (typeof isEAN128 === 'string') {\n        isEAN128 = isEAN128.toLowerCase() === 'true';\n      }\n\n      return isEAN128;\n    } // Get a bar symbol by index\n\n  }], [{\n    key: 'getBar',\n    value: function getBar(index) {\n      return _constants.BARS[index] ? _constants.BARS[index].toString() : '';\n    } // Correct an index by a set and shift it from the bytes array\n\n  }, {\n    key: 'correctIndex',\n    value: function correctIndex(bytes, set) {\n      if (set === _constants.SET_A) {\n        var charCode = bytes.shift();\n        return charCode < 32 ? charCode + 64 : charCode - 32;\n      } else if (set === _constants.SET_B) {\n        return bytes.shift() - 32;\n      } else {\n        return (bytes.shift() - 48) * 10 + bytes.shift() - 48;\n      }\n    }\n  }, {\n    key: 'next',\n    value: function next(bytes, pos, set) {\n      if (!bytes.length) {\n        return {\n          result: '',\n          checksum: 0\n        };\n      }\n\n      var nextCode = void 0,\n          index = void 0; // Special characters\n\n      if (bytes[0] >= 200) {\n        index = bytes.shift() - 105;\n        var nextSet = _constants.SWAP[index]; // Swap to other set\n\n        if (nextSet !== undefined) {\n          nextCode = CODE128.next(bytes, pos + 1, nextSet);\n        } // Continue on current set but encode a special character\n        else {\n          // Shift\n          if ((set === _constants.SET_A || set === _constants.SET_B) && index === _constants.SHIFT) {\n            // Convert the next character so that is encoded correctly\n            bytes[0] = set === _constants.SET_A ? bytes[0] > 95 ? bytes[0] - 96 : bytes[0] : bytes[0] < 32 ? bytes[0] + 96 : bytes[0];\n          }\n\n          nextCode = CODE128.next(bytes, pos + 1, set);\n        }\n      } // Continue encoding\n      else {\n        index = CODE128.correctIndex(bytes, set);\n        nextCode = CODE128.next(bytes, pos + 1, set);\n      } // Get the correct binary encoding and calculate the weight\n\n\n      var enc = CODE128.getBar(index);\n      var weight = index * pos;\n      return {\n        result: enc + nextCode.result,\n        checksum: weight + nextCode.checksum\n      };\n    }\n  }]);\n\n  return CODE128;\n}(_Barcode3.default);\n\nexports.default = CODE128;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/jsbarcode/bin/barcodes/CODE128/CODE128.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_Barcode2","require","_Barcode3","_interopRequireDefault","_constants","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","CODE128","_Barcode","data","options","_this","getPrototypeOf","substring","bytes","split","map","char","charCodeAt","valid","test","encode","startIndex","shift","startSet","SET_BY_CODE","undefined","RangeError","shouldEncodeAsEan128","unshift","FNC1","encodingResult","next","text","replace","getBar","result","checksum","MODULO","STOP","isEAN128","ean128","toLowerCase","index","BARS","toString","correctIndex","set","SET_A","charCode","SET_B","pos","nextCode","nextSet","SWAP","SHIFT","enc","weight"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Barcode2 = require('../Barcode.js');\n\nvar _Barcode3 = _interopRequireDefault(_Barcode2);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// This is the master class,\n// it does require the start code to be included in the string\nvar CODE128 = function (_Barcode) {\n\t_inherits(CODE128, _Barcode);\n\n\tfunction CODE128(data, options) {\n\t\t_classCallCheck(this, CODE128);\n\n\t\t// Get array of ascii codes from data\n\t\tvar _this = _possibleConstructorReturn(this, (CODE128.__proto__ || Object.getPrototypeOf(CODE128)).call(this, data.substring(1), options));\n\n\t\t_this.bytes = data.split('').map(function (char) {\n\t\t\treturn char.charCodeAt(0);\n\t\t});\n\t\treturn _this;\n\t}\n\n\t_createClass(CODE128, [{\n\t\tkey: 'valid',\n\t\tvalue: function valid() {\n\t\t\t// ASCII value ranges 0-127, 200-211\n\t\t\treturn (/^[\\x00-\\x7F\\xC8-\\xD3]+$/.test(this.data)\n\t\t\t);\n\t\t}\n\n\t\t// The public encoding function\n\n\t}, {\n\t\tkey: 'encode',\n\t\tvalue: function encode() {\n\t\t\tvar bytes = this.bytes;\n\t\t\t// Remove the start code from the bytes and set its index\n\t\t\tvar startIndex = bytes.shift() - 105;\n\t\t\t// Get start set by index\n\t\t\tvar startSet = _constants.SET_BY_CODE[startIndex];\n\n\t\t\tif (startSet === undefined) {\n\t\t\t\tthrow new RangeError('The encoding does not start with a start character.');\n\t\t\t}\n\n\t\t\tif (this.shouldEncodeAsEan128() === true) {\n\t\t\t\tbytes.unshift(_constants.FNC1);\n\t\t\t}\n\n\t\t\t// Start encode with the right type\n\t\t\tvar encodingResult = CODE128.next(bytes, 1, startSet);\n\n\t\t\treturn {\n\t\t\t\ttext: this.text === this.data ? this.text.replace(/[^\\x20-\\x7E]/g, '') : this.text,\n\t\t\t\tdata:\n\t\t\t\t// Add the start bits\n\t\t\t\tCODE128.getBar(startIndex) +\n\t\t\t\t// Add the encoded bits\n\t\t\t\tencodingResult.result +\n\t\t\t\t// Add the checksum\n\t\t\t\tCODE128.getBar((encodingResult.checksum + startIndex) % _constants.MODULO) +\n\t\t\t\t// Add the end bits\n\t\t\t\tCODE128.getBar(_constants.STOP)\n\t\t\t};\n\t\t}\n\n\t\t// GS1-128/EAN-128\n\n\t}, {\n\t\tkey: 'shouldEncodeAsEan128',\n\t\tvalue: function shouldEncodeAsEan128() {\n\t\t\tvar isEAN128 = this.options.ean128 || false;\n\t\t\tif (typeof isEAN128 === 'string') {\n\t\t\t\tisEAN128 = isEAN128.toLowerCase() === 'true';\n\t\t\t}\n\t\t\treturn isEAN128;\n\t\t}\n\n\t\t// Get a bar symbol by index\n\n\t}], [{\n\t\tkey: 'getBar',\n\t\tvalue: function getBar(index) {\n\t\t\treturn _constants.BARS[index] ? _constants.BARS[index].toString() : '';\n\t\t}\n\n\t\t// Correct an index by a set and shift it from the bytes array\n\n\t}, {\n\t\tkey: 'correctIndex',\n\t\tvalue: function correctIndex(bytes, set) {\n\t\t\tif (set === _constants.SET_A) {\n\t\t\t\tvar charCode = bytes.shift();\n\t\t\t\treturn charCode < 32 ? charCode + 64 : charCode - 32;\n\t\t\t} else if (set === _constants.SET_B) {\n\t\t\t\treturn bytes.shift() - 32;\n\t\t\t} else {\n\t\t\t\treturn (bytes.shift() - 48) * 10 + bytes.shift() - 48;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'next',\n\t\tvalue: function next(bytes, pos, set) {\n\t\t\tif (!bytes.length) {\n\t\t\t\treturn { result: '', checksum: 0 };\n\t\t\t}\n\n\t\t\tvar nextCode = void 0,\n\t\t\t    index = void 0;\n\n\t\t\t// Special characters\n\t\t\tif (bytes[0] >= 200) {\n\t\t\t\tindex = bytes.shift() - 105;\n\t\t\t\tvar nextSet = _constants.SWAP[index];\n\n\t\t\t\t// Swap to other set\n\t\t\t\tif (nextSet !== undefined) {\n\t\t\t\t\tnextCode = CODE128.next(bytes, pos + 1, nextSet);\n\t\t\t\t}\n\t\t\t\t// Continue on current set but encode a special character\n\t\t\t\telse {\n\t\t\t\t\t\t// Shift\n\t\t\t\t\t\tif ((set === _constants.SET_A || set === _constants.SET_B) && index === _constants.SHIFT) {\n\t\t\t\t\t\t\t// Convert the next character so that is encoded correctly\n\t\t\t\t\t\t\tbytes[0] = set === _constants.SET_A ? bytes[0] > 95 ? bytes[0] - 96 : bytes[0] : bytes[0] < 32 ? bytes[0] + 96 : bytes[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextCode = CODE128.next(bytes, pos + 1, set);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t// Continue encoding\n\t\t\telse {\n\t\t\t\t\tindex = CODE128.correctIndex(bytes, set);\n\t\t\t\t\tnextCode = CODE128.next(bytes, pos + 1, set);\n\t\t\t\t}\n\n\t\t\t// Get the correct binary encoding and calculate the weight\n\t\t\tvar enc = CODE128.getBar(index);\n\t\t\tvar weight = index * pos;\n\n\t\t\treturn {\n\t\t\t\tresult: enc + nextCode.result,\n\t\t\t\tchecksum: weight + nextCode.checksum\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn CODE128;\n}(_Barcode3.default);\n\nexports.default = CODE128;"]},"metadata":{},"sourceType":"script"}