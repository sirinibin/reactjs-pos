{"ast":null,"code":"var _jsxFileName = \"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/purchase_return/create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport PurchaseReturnedPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport VendorCreate from \"../vendor/create.js\";\nimport ProductCreate from \"../product/create.js\";\nimport UserCreate from \"../user/create.js\";\nimport SignatureCreate from \"../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport PurchaseReturnedView from \"./view.js\";\nimport ProductView from \"../product/view.js\";\nimport PurchaseView from \"./../purchase/view.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PurchaseReturnedCreate = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  var _totalPaymentAmount, _balanceAmount;\n\n  _s();\n\n  useImperativeHandle(ref, () => ({\n    open(id, purchaseId) {\n      selectedProducts = [];\n      setSelectedProducts([]);\n      selectedPurchaseReturnedByUsers = [];\n      setSelectedPurchaseReturnedByUsers([]);\n      selectedPurchaseReturnedBySignatures = [];\n      setSelectedPurchaseReturnedBySignatures([]);\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        is_discount_percent: false,\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        payment_status: \"paid\",\n        payment_method: \"\"\n      };\n      setFormData({ ...formData\n      });\n\n      if (cookies.get(\"user_id\")) {\n        selectedPurchaseReturnedByUsers = [{\n          id: cookies.get(\"user_id\"),\n          name: cookies.get(\"user_name\")\n        }];\n        formData.purchase_returned_by = cookies.get(\"user_id\");\n        setFormData({ ...formData\n        });\n        setSelectedPurchaseReturnedByUsers([...selectedPurchaseReturnedByUsers]);\n      }\n\n      setFormData({ ...formData\n      });\n\n      if (id) {\n        getPurchaseReturn(id);\n      }\n\n      if (purchaseId) {\n        getPurchase(purchaseId);\n      }\n\n      setShow(true);\n    }\n\n  }));\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-purchase return.\"); // event.preventDefault();\n\n        var form = event.target.form;\n\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n\n            event.preventDefault();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n  const selectedDate = new Date(); //const history = useHistory();\n\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies(); //fields\n\n  let [formData, setFormData] = useState({\n    vat_percent: 10.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    is_discount_percent: false,\n    //   date_str: format(new Date(), \"MMM dd yyyy\"),\n    date_str: new Date(),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    payment_status: \"paid\",\n    payment_method: \"\"\n  });\n  let [selectedProducts, setSelectedProducts] = useState([]); //Purchase Returned By Auto Suggestion\n\n  const [purchaseReturnedByUserOptions, setPurchaseReturnedByUserOptions] = useState([]);\n  let [selectedPurchaseReturnedByUsers, setSelectedPurchaseReturnedByUsers] = useState([]);\n  const [isPurchaseReturnedByUsersLoading, setIsPurchaseReturnedByUsersLoading] = useState(false); //Purchase Returned By Signature Auto Suggestion\n\n  const [purchaseReturnedBySignatureOptions, setPurchaseReturnedBySignatureOptions] = useState([]);\n  let [selectedPurchaseReturnedBySignatures, setSelectedPurchaseReturnedBySignatures] = useState([]);\n  const [isPurchaseReturnedBySignaturesLoading, setIsPurchaseReturnedBySignaturesLoading] = useState(false);\n  const [show, setShow] = useState(false);\n\n  function handleClose() {\n    setShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n\n    if (!at) {\n      // history.push(\"/dashboard/purchasereturneds\");\n      window.location = \"/\";\n    }\n  });\n\n  function getPurchaseReturn(id) {\n    console.log(\"inside get PurchaseReturned id:\", id);\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': cookies.get('access_token')\n      }\n    };\n    fetch('/v1/purchase-return/' + id, requestOptions).then(async response => {\n      var _response$headers$get;\n\n      const isJson = (_response$headers$get = response.headers.get('content-type')) === null || _response$headers$get === void 0 ? void 0 : _response$headers$get.includes('application/json');\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let purchaseReturn = data.result; // formData = purchaseReturn;\n\n      formData = {\n        id: purchaseReturn.id,\n        code: purchaseReturn.code,\n        store_id: purchaseReturn.store_id,\n        vendor_id: purchaseReturn.vendor_id,\n        date_str: purchaseReturn.date,\n        // date: purchase.date,\n        vat_percent: purchaseReturn.vat_percent,\n        discount: purchaseReturn.discount,\n        discount_percent: purchaseReturn.discount_percent,\n        status: purchaseReturn.status,\n        order_placed_by: purchaseReturn.order_placed_by,\n        order_placed_by_signature_id: purchaseReturn.order_placed_by_signature_id,\n        is_discount_percent: purchaseReturn.is_discount_percent,\n        partial_payment_amount: purchaseReturn.partial_payment_amount,\n        payment_method: purchaseReturn.payment_method,\n        payment_status: purchaseReturn.payment_status,\n        shipping_handling_fees: purchaseReturn.shipping_handling_fees\n      };\n      /*\n      formData = {\n          date_str: format(new Date(), \"MMM dd yyyy\"),\n          signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n          purchase_id: purchase.id,\n          purchase_code: purchase.code,\n          vendor_invoice_no: purchase.vendor_invoice_no,\n          store_id: purchase.store_id,\n          vendor_id: purchase.vendor_id,\n          vat_percent: purchase.vat_percent,\n          status: purchase.status,\n          purchase_returned_by: purchase.order_placed_by,\n          purchase_returned_by_signature_id: purchase.order_placed_by_signature_id,\n          is_discount_percent: purchase.is_discount_percent,\n          discount_percent: purchase.discount_percent,\n      };\n      */\n      //formData.discount = (purchase.discount - purchase.return_discount);\n      // formData.discount = 0;\n\n      /*\n      if (formData.is_discount_percent) {\n          formData.discountValue = formData.discount_percent;\n      } else {\n          formData.discountValue = formData.discount;\n      }\n      */\n\n      setFormData({ ...formData\n      });\n      console.log(\"formData1.status:\", formData.status);\n      console.log(\"purchaseReturn.products:\", purchaseReturn.products);\n      let selectedProductsTemp = purchaseReturn.products;\n      selectedProducts = [];\n\n      for (let i = 0; i < selectedProductsTemp.length; i++) {\n        if (selectedProductsTemp[i].quantity > 0) {\n          selectedProductsTemp[i].selected = true;\n        } else {\n          selectedProductsTemp[i].selected = false;\n        }\n\n        selectedProducts.push(selectedProductsTemp[i]);\n        selectedProductsTemp[i].purchase_unit_price = selectedProductsTemp[i].purchasereturn_unit_price;\n      }\n\n      setSelectedProducts([...selectedProducts]);\n      setFormData({ ...formData\n      });\n      reCalculate();\n      setFormData({ ...formData\n      });\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n\n  function getPurchase(id) {\n    console.log(\"inside get Purchase\");\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': cookies.get('access_token')\n      }\n    };\n    fetch('/v1/purchase/' + id, requestOptions).then(async response => {\n      var _response$headers$get2;\n\n      const isJson = (_response$headers$get2 = response.headers.get('content-type')) === null || _response$headers$get2 === void 0 ? void 0 : _response$headers$get2.includes('application/json');\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let purchase = data.result;\n      formData = {\n        // date_str: format(new Date(), \"MMM dd yyyy\"),\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        purchase_id: purchase.id,\n        purchase_code: purchase.code,\n        //   vendor_invoice_no: purchase.vendor_invoice_no,\n        store_id: purchase.store_id,\n        vendor_id: purchase.vendor_id,\n        vat_percent: purchase.vat_percent,\n        status: purchase.status,\n        purchase_returned_by: purchase.order_placed_by,\n        purchase_returned_by_signature_id: purchase.order_placed_by_signature_id,\n        is_discount_percent: purchase.is_discount_percent,\n        discount_percent: purchase.discount_percent,\n        payment_status: \"paid\",\n        payment_method: \"\"\n      }; //formData.discount = (purchase.discount - purchase.return_discount);\n\n      formData.discount = 0;\n\n      if (formData.is_discount_percent) {\n        formData.discountValue = formData.discount_percent;\n      } else {\n        formData.discountValue = formData.discount;\n      }\n\n      formData.discountValue = 0; //formData.status = \"purchase_returned\";\n\n      setFormData({ ...formData\n      });\n      console.log(\"formData1.status:\", formData.status);\n      let selectedProductsTemp = purchase.products;\n      selectedProducts = [];\n\n      for (let i = 0; i < selectedProductsTemp.length; i++) {\n        selectedProductsTemp[i].selected = false;\n        let purchasedQty = selectedProductsTemp[i].quantity - selectedProductsTemp[i].quantity_returned;\n        selectedProductsTemp[i].quantity = purchasedQty;\n\n        if (purchasedQty > 0) {\n          selectedProducts.push(selectedProductsTemp[i]);\n        }\n      }\n\n      setSelectedProducts([...selectedProducts]);\n      setFormData({ ...formData\n      });\n      reCalculate();\n      setFormData({ ...formData\n      });\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object).map(function (key) {\n      return `search[${key}]=${object[key]}`;\n    }).join(\"&\");\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setPurchaseReturnedByUserOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsPurchaseReturnedByUsersLoading(true);\n    let result = await fetch(\"/v1/user?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setPurchaseReturnedByUserOptions(data.result);\n    setIsPurchaseReturnedByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setPurchaseReturnedBySignatureOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsPurchaseReturnedBySignaturesLoading(true);\n    let result = await fetch(\"/v1/signature?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setPurchaseReturnedBySignatureOptions(data.result);\n    setIsPurchaseReturnedBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    console.log(\"formData:\", formData);\n    console.log(\"formData.payment_status:\" + formData.payment_status);\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n    let haveErrors = false;\n    formData.products = [];\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (!selectedProducts[i].selected) {\n        continue; // selectedProducts[i].quantity = 0;\n      }\n\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit: selectedProducts[i].unit,\n        purchasereturn_unit_price: parseFloat(selectedProducts[i].purchase_unit_price)\n      });\n    }\n\n    if (!formData.cash_discount) {\n      formData.cash_discount = 0.00;\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n    console.log(\"formData.discount:\", formData.discount);\n\n    if (!formData.discount && formData.discount !== 0) {\n      errors[\"discount\"] = \"Invalid discount\";\n      setErrors({ ...errors\n      });\n      haveErrors = true;\n    }\n\n    if (!formData.discount_percent && formData.discount_percent !== 0) {\n      errors[\"discount_percent\"] = \"Invalid discount percent\";\n      setErrors({ ...errors\n      });\n      haveErrors = true;\n    }\n\n    if (parseFloat(formData.discount_percent) > 100) {\n      errors[\"discount_percent\"] = \"Discount percent cannot be > 100\";\n      setErrors({ ...errors\n      });\n      haveErrors = true;\n    }\n\n    errors[\"payment_method\"] = \"\";\n    setErrors({ ...errors\n    });\n\n    if (haveErrors) {\n      console.log(\"Errors: \", errors);\n      return;\n    }\n\n    let endPoint = \"/v1/purchase-return\";\n    let method = \"POST\";\n\n    if (formData.id) {\n      endPoint = \"/v1/purchase-return/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        'Accept': 'application/json',\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      },\n      body: JSON.stringify(formData)\n    };\n    setProcessing(true);\n    fetch(endPoint, requestOptions).then(async response => {\n      var _response$headers$get3;\n\n      const isJson = (_response$headers$get3 = response.headers.get(\"content-type\")) === null || _response$headers$get3 === void 0 ? void 0 : _response$headers$get3.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.errors; //const error = data.errors\n\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      setProcessing(false);\n      console.log(\"Response:\");\n      console.log(data);\n      props.showToastMessage(\"Purchase Return Created Successfully!\", \"success\");\n\n      if (props.refreshList) {\n        props.refreshList();\n      }\n\n      handleClose();\n      openDetailsView(data.result.id);\n    }).catch(error => {\n      setProcessing(false);\n      console.log(\"Inside catch\");\n      console.log(error);\n      setErrors({ ...error\n      });\n      console.error(\"There was an error!\", error);\n      props.showToastMessage(\"Error Creating PurchaseReturned!\", \"danger\");\n    });\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.00;\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (!selectedProducts[i].selected) {\n        continue;\n      }\n\n      totalPrice += parseFloat(selectedProducts[i].purchase_unit_price) * parseFloat(selectedProducts[i].quantity);\n    }\n\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [vatPrice, setVatPrice] = useState(0.00);\n\n  function findVatPrice() {\n    if (totalPrice > 0) {\n      vatPrice = (parseFloat(formData.vat_percent) / 100 * parseFloat(totalPrice - formData.discount)).toFixed(2);\n      ;\n      console.log(\"vatPrice:\", vatPrice);\n      setVatPrice(vatPrice);\n    }\n  }\n\n  let [netTotal, setNetTotal] = useState(0.00);\n\n  function findNetTotal() {\n    if (totalPrice > 0) {\n      netTotal = (parseFloat(totalPrice) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n      setNetTotal(netTotal);\n    }\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.00);\n\n  function findDiscountPercent() {\n    if (!formData.discountValue) {\n      formData.discount = 0.00;\n      formData.discount_percent = 0.00;\n      setFormData({ ...formData\n      });\n      return;\n    }\n\n    formData.discount = formData.discountValue;\n\n    if (formData.discount > 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)); //formData.discount = Math.round(formData.discount * 100) / 100;\n\n      formData.discount = parseFloat(formData.discount.toFixed(2));\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent; //formData.discount_percent = Math.round(formData.discount_percent * 100) / 100;\n\n      setFormData({ ...formData\n      });\n    }\n  }\n  /*\n   function findDiscount() {\n      if (!formData.discountValue) {\n          formData.discount = 0.00;\n          formData.discount_percent = 0.00;\n          setFormData({ ...formData });\n          return;\n      }\n       formData.discount_percent = formData.discountValue;\n       if (formData.discount_percent > 0 && totalPrice > 0) {\n          formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n      }\n      setFormData({ ...formData });\n  }\n  */\n\n\n  function reCalculate() {\n    findTotalPrice();\n\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const DetailsViewRef = useRef();\n\n  function openDetailsView(id) {\n    DetailsViewRef.current.open(id);\n  }\n\n  const StoreCreateFormRef = useRef();\n  const ProductCreateFormRef = useRef();\n\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const VendorCreateFormRef = useRef();\n  const UserCreateFormRef = useRef();\n\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PurchaseDetailsViewRef = useRef();\n\n  function openPurchaseDetailsView(id) {\n    PurchaseDetailsViewRef.current.open(id);\n  }\n\n  let [paymentStatus, setPaymentStatus] = useState(\"\");\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductView, {\n      ref: ProductDetailsViewRef,\n      openUpdateForm: openProductUpdateForm,\n      openCreateForm: openProductCreateForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProductCreate, {\n      ref: ProductCreateFormRef,\n      showToastMessage: props.showToastMessage,\n      openDetailsView: openProductDetailsView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PurchaseReturnedView, {\n      ref: DetailsViewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 720,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StoreCreate, {\n      ref: StoreCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 721,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserCreate, {\n      ref: UserCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SignatureCreate, {\n      ref: SignatureCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(VendorCreate, {\n      ref: VendorCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PurchaseView, {\n      ref: PurchaseDetailsViewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      size: \"xl\",\n      fullscreen: true,\n      onHide: handleClose,\n      animation: false,\n      backdrop: \"static\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: formData.id ? \"Update Purchase Return #\" + formData.code + \" for purchase #\" + formData.purchase_code : \"Create Purchase Return\" + \" for purchase #\" + formData.purchase_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col align-self-end text-end\",\n          children: [/*#__PURE__*/_jsxDEV(PurchaseReturnedPreview, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            className: \"mb-3\",\n            onClick: handleCreate,\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 33\n            }, this) + \" Creating...\" : \"\", formData.id ? \"Update\" : \"Create\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: handleClose,\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 759,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [Object.keys(errors).length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: errors && Object.keys(errors).map((key, index) => {\n              return errors[key] ? /*#__PURE__*/_jsxDEV(\"li\", {\n                style: {\n                  color: \"red\"\n                },\n                children: errors[key]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 59\n              }, this) : \"\";\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 770,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 25\n        }, this) : \"\", selectedProducts.length === 0 && \"Already Returned All purchased products\", selectedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-3 needs-validation\",\n          onSubmit: handleCreate,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Vendor Invoice No. (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 782,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.vendor_invoice_no ? formData.vendor_invoice_no : \"\",\n                type: \"string\",\n                onChange: e => {\n                  errors[\"vendor_invoice_no\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.vendor_invoice_no = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"vendor_invoice_no\",\n                placeholder: \"Vendor Invoice No.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 33\n              }, this), errors.vendor_invoice_no && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 801,\n                  columnNumber: 41\n                }, this), errors.vendor_invoice_no]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 37\n              }, this), formData.vendor_invoice_no && !errors.rack && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 807,\n                  columnNumber: 41\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Date*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: \"date_str\",\n                selected: formData.date_str ? new Date(formData.date_str) : null,\n                value: formData.date_str ? format(new Date(formData.date_str), \"MMMM d, yyyy h:mm aa\") : null,\n                className: \"form-control\",\n                dateFormat: \"MMMM d, yyyy h:mm aa\",\n                showTimeSelect: true,\n                timeIntervals: \"1\",\n                onChange: value => {\n                  console.log(\"Value\", value);\n                  formData.date_str = value; // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n\n                  setFormData({ ...formData\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 33\n              }, this), errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 840,\n                  columnNumber: 41\n                }, this), errors.date_str]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 37\n              }, this), formData.date_str && !errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 846,\n                  columnNumber: 41\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 845,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 815,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Select Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 25\n          }, this), errors[\"product_id\"] && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"red\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-x-lg\",\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 33\n            }, this), errors[\"product_id\"]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\",\n              overflowY: \"scroll\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 865,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"SI No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 866,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Part No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 867,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 869,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 870,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Purchase Return Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 871,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 864,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: selectedProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: selectedProducts[index].selected,\n                      onChange: e => {\n                        console.log(\"e.target.value:\", e.target.value);\n                        selectedProducts[index].selected = !selectedProducts[index].selected;\n\n                        if (selectedProducts[index].selected === true) {\n                          if (selectedProducts[index].quantity === 0) {\n                            selectedProducts[index].quantity = 1;\n                          }\n                        } else {\n                          selectedProducts[index].quantity = 0;\n                        }\n\n                        setSelectedProducts([...selectedProducts]);\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 878,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 877,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 892,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.part_number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 893,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textDecoration: \"underline\",\n                      color: \"blue\",\n                      cursor: \"pointer\"\n                    },\n                    onClick: () => {\n                      openProductDetailsView(product.product_id);\n                    },\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 894,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"155px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.quantity,\n                        className: \"form-control\",\n                        placeholder: \"Quantity\",\n                        onChange: e => {\n                          errors[\"quantity_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"quantity_\" + index] = \"Quantity should be >0\";\n                            selectedProducts[index].quantity = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          product.quantity = parseFloat(e.target.value);\n                          reCalculate();\n                          selectedProducts[index].quantity = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].quantity:\", selectedProducts[index].quantity);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 906,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 938,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 905,\n                      columnNumber: 49\n                    }, this), errors[\"quantity_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 942,\n                        columnNumber: 57\n                      }, this), errors[\"quantity_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 941,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 903,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"180px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.purchase_unit_price,\n                        className: \"form-control\",\n                        placeholder: \"Purchase Return Unit Price\",\n                        onChange: e => {\n                          errors[\"purchasereturned_unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"purchasereturned_unit_price_\" + index] = \"Invalid Purchase Return Unit Price\";\n                            selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            return;\n                          }\n\n                          if (e.target.value === 0) {\n                            errors[\"purchasereturned_unit_price_\" + index] = \"Purchase Return Unit Price should be >0\";\n                            selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            return;\n                          }\n\n                          selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].purchase_unit_price:\", selectedProducts[index].purchase_unit_price);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 951,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 949,\n                      columnNumber: 49\n                    }, this), errors[\"purchasereturned_unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 983,\n                        columnNumber: 57\n                      }, this), errors[\"purchasereturned_unit_price_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 982,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 948,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: (product.purchase_unit_price * product.quantity).toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \"\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 990,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 989,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 876,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 874,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1007,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1008,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    style: {\n                      width: \"180px\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: totalPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \"\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1010,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1009,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1006,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"6\",\n                    className: \"text-end\",\n                    children: [\"Discount  \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"50px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.discount_percent,\n                      onChange: e => {\n                        formData.is_discount_percent = true;\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          formData.discount = 0.00;\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"Discount percent should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount_percent = \"\";\n                          formData.discount = 0.00;\n                          errors[\"discount_percent\"] = \"Invalid Discount Percent\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"discount_percent\"] = \"\";\n                        errors[\"discount\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.discount_percent = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1023,\n                      columnNumber: 55\n                    }, this), \"%\", errors.discount_percent && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.discount_percent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1062,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1021,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: formData.discount,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \"\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1069,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1068,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1020,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"5\",\n                    className: \"text-end\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1079,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: [\"VAT: \", formData.vat_percent + \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1082,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: vatPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \"\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1084,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1083,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1078,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1094,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: \"Net Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1095,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: netTotal,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \"\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1097,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1096,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1093,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1005,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1004,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1003,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Cash discount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1111,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: formData.cash_discount,\n              className: \"form-control \",\n              onChange: e => {\n                errors[\"cash_discount\"] = \"\";\n                setErrors({ ...errors\n                });\n\n                if (!e.target.value) {\n                  formData.cash_discount = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  validatePaymentAmounts();\n                  return;\n                }\n\n                formData.cash_discount = parseFloat(e.target.value);\n\n                if (formData.cash_discount > 0 && formData.cash_discount >= netTotal) {\n                  errors[\"cash_discount\"] = \"Cash discount should not be >= \" + netTotal.toString();\n                  setErrors({ ...errors\n                  });\n                  return;\n                }\n\n                setFormData({ ...formData\n                });\n                validatePaymentAmounts();\n                console.log(formData);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1112,\n              columnNumber: 29\n            }, this), errors.cash_discount && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"red\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1136,\n                columnNumber: 37\n              }, this), errors.cash_discount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1135,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Payments given\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"table-responsive\",\n              style: {\n                maxWidth: \"900px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                style: {\n                  alignContent: \"right\"\n                },\n                onClick: addNewPayment,\n                children: \"Create new payment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1146,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                class: \"table table-striped table-sm table-bordered\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1151,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1154,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Payment method\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1157,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1160,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1150,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [formData.payments_input && formData.payments_input.filter(payment => !payment.deleted).map((payment, key) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        minWidth: \"220px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                        id: \"date_str\",\n                        selected: formData.payments_input[key].date_str ? new Date(formData.payments_input[key].date_str) : null,\n                        value: formData.payments_input[key].date_str ? format(new Date(formData.payments_input[key].date_str), \"MMMM d, yyyy h:mm aa\") : null,\n                        className: \"form-control\",\n                        dateFormat: \"MMMM d, yyyy h:mm aa\",\n                        showTimeSelect: true,\n                        timeIntervals: \"1\",\n                        onChange: value => {\n                          console.log(\"Value\", value);\n                          formData.payments_input[key].date_str = value;\n                          setFormData({ ...formData\n                          });\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1170,\n                        columnNumber: 57\n                      }, this), errors[\"payment_date_\" + key] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1189,\n                          columnNumber: 65\n                        }, this), errors[\"payment_date_\" + key]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1188,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1168,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"300px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: formData.payments_input[key].amount,\n                        className: \"form-control \",\n                        onChange: e => {\n                          errors[\"payment_amount_\" + key] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            formData.payments_input[key].amount = e.target.value;\n                            setFormData({ ...formData\n                            });\n                            validatePaymentAmounts();\n                            return;\n                          }\n\n                          formData.payments_input[key].amount = parseFloat(e.target.value);\n                          validatePaymentAmounts();\n                          setFormData({ ...formData\n                          });\n                          console.log(formData);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1195,\n                        columnNumber: 57\n                      }, this), errors[\"payment_amount_\" + key] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1216,\n                          columnNumber: 65\n                        }, this), errors[\"payment_amount_\" + key]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1215,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1194,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"200px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        value: formData.payments_input[key].method,\n                        className: \"form-control \",\n                        onChange: e => {\n                          // errors[\"payment_method\"] = [];\n                          errors[\"payment_method_\" + key] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"payment_method_\" + key] = \"Payment method is required\";\n                            setErrors({ ...errors\n                            });\n                            formData.payments_input[key].method = \"\";\n                            setFormData({ ...formData\n                            });\n                            return;\n                          } // errors[\"payment_method\"] = \"\";\n                          //setErrors({ ...errors });\n\n\n                          formData.payments_input[key].method = e.target.value;\n                          setFormData({ ...formData\n                          });\n                          console.log(formData);\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1245,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"cash\",\n                          children: \"Cash\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1246,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"bank_account\",\n                          children: \"Bank Account / Debit / Credit Card\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1247,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"customer_account\",\n                          children: \"Customer Account\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1248,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1222,\n                        columnNumber: 57\n                      }, this), errors[\"payment_method_\" + key] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1252,\n                          columnNumber: 65\n                        }, this), errors[\"payment_method_\" + key]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1251,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1221,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"200px\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"danger\",\n                        onClick: event => {\n                          removePayment(key);\n                        },\n                        children: \"Remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1258,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1257,\n                      columnNumber: 53\n                    }, this)]\n                  }, key, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1167,\n                    columnNumber: 49\n                  }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      class: \"text-end\",\n                      children: /*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1269,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1268,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"b\", {\n                        style: {\n                          marginLeft: \"14px\"\n                        },\n                        children: (_totalPaymentAmount = totalPaymentAmount) === null || _totalPaymentAmount === void 0 ? void 0 : _totalPaymentAmount.toFixed(2)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1271,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1271,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"b\", {\n                        style: {\n                          marginLeft: \"12px\",\n                          alignSelf: \"end\"\n                        },\n                        children: [\"Balance: \", (_balanceAmount = balanceAmount) === null || _balanceAmount === void 0 ? void 0 : _balanceAmount.toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1275,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1274,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: 1,\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Payment status: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1278,\n                        columnNumber: 49\n                      }, this), paymentStatus == \"paid\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"badge bg-success\",\n                        children: \"Paid\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1280,\n                        columnNumber: 65\n                      }, this) : \"\", paymentStatus == \"paid_partially\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"badge bg-warning\",\n                        children: \"Paid Partially\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1284,\n                        columnNumber: 65\n                      }, this) : \"\", paymentStatus == \"not_paid\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"badge bg-danger\",\n                        children: \"Not Paid\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1288,\n                        columnNumber: 65\n                      }, this) : \"\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1277,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1267,\n                    columnNumber: 40\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1164,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1149,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1145,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1303,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleCreate,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n                as: \"span\",\n                animation: \"border\",\n                size: \"sm\",\n                role: \"status\",\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1308,\n                columnNumber: 37\n              }, this) + \" Creating...\" : formData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1306,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1302,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}, \"9fOewvq3mMv7RSo2jA6R8RHYLzU=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = PurchaseReturnedCreate;\nexport default PurchaseReturnedCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PurchaseReturnedCreate$forwardRef\");\n$RefreshReg$(_c2, \"PurchaseReturnedCreate\");","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/purchase_return/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","PurchaseReturnedPreview","Modal","Button","Form","StoreCreate","VendorCreate","ProductCreate","UserCreate","SignatureCreate","Cookies","Typeahead","NumberFormat","DatePicker","format","Spinner","PurchaseReturnedView","ProductView","PurchaseView","PurchaseReturnedCreate","props","ref","open","id","purchaseId","selectedProducts","setSelectedProducts","selectedPurchaseReturnedByUsers","setSelectedPurchaseReturnedByUsers","selectedPurchaseReturnedBySignatures","setSelectedPurchaseReturnedBySignatures","formData","vat_percent","discount","discountValue","discount_percent","is_discount_percent","date_str","Date","signature_date_str","payment_status","payment_method","setFormData","cookies","get","name","purchase_returned_by","getPurchaseReturn","getPurchase","setShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","selectedDate","errors","setErrors","isProcessing","setProcessing","purchaseReturnedByUserOptions","setPurchaseReturnedByUserOptions","isPurchaseReturnedByUsersLoading","setIsPurchaseReturnedByUsersLoading","purchaseReturnedBySignatureOptions","setPurchaseReturnedBySignatureOptions","isPurchaseReturnedBySignaturesLoading","setIsPurchaseReturnedBySignaturesLoading","show","handleClose","at","window","location","requestOptions","method","headers","fetch","then","response","isJson","data","json","ok","error","Promise","reject","purchaseReturn","result","store_id","vendor_id","date","status","order_placed_by","order_placed_by_signature_id","partial_payment_amount","shipping_handling_fees","products","selectedProductsTemp","i","length","quantity","selected","push","purchase_unit_price","purchasereturn_unit_price","reCalculate","catch","purchase","purchase_id","purchase_code","purchase_returned_by_signature_id","purchasedQty","quantity_returned","ObjectToSearchQueryParams","object","Object","keys","map","key","join","suggestUsers","searchTerm","params","queryString","Authorization","Select","suggestSignatures","handleCreate","haveErrors","product_id","parseFloat","unit","cash_discount","endPoint","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","totalPrice","setTotalPrice","findTotalPrice","toFixed","vatPrice","setVatPrice","findVatPrice","netTotal","setNetTotal","findNetTotal","discountPercent","setDiscountPercent","findDiscountPercent","findDiscount","DetailsViewRef","current","StoreCreateFormRef","ProductCreateFormRef","openProductCreateForm","openProductUpdateForm","VendorCreateFormRef","UserCreateFormRef","openUserCreateForm","SignatureCreateFormRef","openSignatureCreateForm","ProductDetailsViewRef","openProductDetailsView","PurchaseDetailsViewRef","openPurchaseDetailsView","paymentStatus","setPaymentStatus","color","vendor_invoice_no","e","value","rack","overflowX","overflowY","product","part_number","textDecoration","cursor","width","validatePaymentAmounts","toString","maxWidth","alignContent","addNewPayment","payments_input","filter","payment","deleted","minWidth","amount","removePayment","marginLeft","totalPaymentAmount","alignSelf","balanceAmount"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport PurchaseReturnedPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport VendorCreate from \"../vendor/create.js\";\nimport ProductCreate from \"../product/create.js\";\nimport UserCreate from \"../user/create.js\";\nimport SignatureCreate from \"../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport PurchaseReturnedView from \"./view.js\";\nimport ProductView from \"../product/view.js\";\nimport PurchaseView from \"./../purchase/view.js\";\n\n\nconst PurchaseReturnedCreate = forwardRef((props, ref) => {\n\n    useImperativeHandle(ref, () => ({\n        open(id, purchaseId) {\n\n            selectedProducts = [];\n            setSelectedProducts([]);\n\n            selectedPurchaseReturnedByUsers = [];\n            setSelectedPurchaseReturnedByUsers([]);\n\n            selectedPurchaseReturnedBySignatures = [];\n            setSelectedPurchaseReturnedBySignatures([]);\n\n\n            formData = {\n                vat_percent: 15.0,\n                discount: 0.0,\n                discountValue: 0.0,\n                discount_percent: 0.0,\n                is_discount_percent: false,\n                date_str: new Date(),\n                signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n                payment_status: \"paid\",\n                payment_method: \"\",\n            };\n\n            setFormData({ ...formData });\n\n            if (cookies.get(\"user_id\")) {\n                selectedPurchaseReturnedByUsers = [{\n                    id: cookies.get(\"user_id\"),\n                    name: cookies.get(\"user_name\"),\n                }];\n                formData.purchase_returned_by = cookies.get(\"user_id\");\n                setFormData({ ...formData });\n                setSelectedPurchaseReturnedByUsers([...selectedPurchaseReturnedByUsers]);\n            }\n\n            setFormData({ ...formData });\n\n\n            if (id) {\n                getPurchaseReturn(id);\n            }\n\n            if (purchaseId) {\n                getPurchase(purchaseId);\n            }\n            setShow(true);\n        },\n\n    }));\n\n\n    useEffect(() => {\n        const listener = event => {\n            if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n                console.log(\"Enter key was pressed. Run your function-purchase return.\");\n                // event.preventDefault();\n\n                var form = event.target.form;\n                if (form && event.target) {\n                    var index = Array.prototype.indexOf.call(form, event.target);\n                    if (form && form.elements[index + 1]) {\n                        if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n                            form.elements[index].focus();\n                        } else {\n                            form.elements[index + 1].focus();\n                        }\n                        event.preventDefault();\n                    }\n                }\n            }\n        };\n        document.addEventListener(\"keydown\", listener);\n        return () => {\n            document.removeEventListener(\"keydown\", listener);\n        };\n    }, []);\n\n    const selectedDate = new Date();\n\n    //const history = useHistory();\n    let [errors, setErrors] = useState({});\n    const [isProcessing, setProcessing] = useState(false);\n    const cookies = new Cookies();\n\n    //fields\n    let [formData, setFormData] = useState({\n        vat_percent: 10.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        is_discount_percent: false,\n        //   date_str: format(new Date(), \"MMM dd yyyy\"),\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        payment_status: \"paid\",\n        payment_method: \"\",\n    });\n\n\n    let [selectedProducts, setSelectedProducts] = useState([]);\n\n    //Purchase Returned By Auto Suggestion\n    const [purchaseReturnedByUserOptions, setPurchaseReturnedByUserOptions] = useState([]);\n    let [selectedPurchaseReturnedByUsers, setSelectedPurchaseReturnedByUsers] = useState([]);\n    const [isPurchaseReturnedByUsersLoading, setIsPurchaseReturnedByUsersLoading] = useState(false);\n\n    //Purchase Returned By Signature Auto Suggestion\n    const [purchaseReturnedBySignatureOptions, setPurchaseReturnedBySignatureOptions] =\n        useState([]);\n    let [selectedPurchaseReturnedBySignatures, setSelectedPurchaseReturnedBySignatures] =\n        useState([]);\n    const [isPurchaseReturnedBySignaturesLoading, setIsPurchaseReturnedBySignaturesLoading] =\n        useState(false);\n\n    const [show, setShow] = useState(false);\n\n    function handleClose() {\n        setShow(false);\n    }\n\n    useEffect(() => {\n        let at = cookies.get(\"access_token\");\n        if (!at) {\n            // history.push(\"/dashboard/purchasereturneds\");\n            window.location = \"/\";\n        }\n    });\n\n\n\n    function getPurchaseReturn(id) {\n        console.log(\"inside get PurchaseReturned id:\", id);\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        fetch('/v1/purchase-return/' + id, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                setErrors({});\n\n                console.log(\"Response:\");\n                console.log(data);\n\n                let purchaseReturn = data.result;\n                // formData = purchaseReturn;\n\n                formData = {\n                    id: purchaseReturn.id,\n                    code: purchaseReturn.code,\n                    store_id: purchaseReturn.store_id,\n                    vendor_id: purchaseReturn.vendor_id,\n                    date_str: purchaseReturn.date,\n                    // date: purchase.date,\n                    vat_percent: purchaseReturn.vat_percent,\n                    discount: purchaseReturn.discount,\n                    discount_percent: purchaseReturn.discount_percent,\n                    status: purchaseReturn.status,\n                    order_placed_by: purchaseReturn.order_placed_by,\n                    order_placed_by_signature_id: purchaseReturn.order_placed_by_signature_id,\n                    is_discount_percent: purchaseReturn.is_discount_percent,\n                    partial_payment_amount: purchaseReturn.partial_payment_amount,\n                    payment_method: purchaseReturn.payment_method,\n                    payment_status: purchaseReturn.payment_status,\n                    shipping_handling_fees: purchaseReturn.shipping_handling_fees,\n                };\n\n                /*\n                formData = {\n                    date_str: format(new Date(), \"MMM dd yyyy\"),\n                    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n                    purchase_id: purchase.id,\n                    purchase_code: purchase.code,\n                    vendor_invoice_no: purchase.vendor_invoice_no,\n                    store_id: purchase.store_id,\n                    vendor_id: purchase.vendor_id,\n                    vat_percent: purchase.vat_percent,\n                    status: purchase.status,\n                    purchase_returned_by: purchase.order_placed_by,\n                    purchase_returned_by_signature_id: purchase.order_placed_by_signature_id,\n                    is_discount_percent: purchase.is_discount_percent,\n                    discount_percent: purchase.discount_percent,\n                };\n                */\n\n                //formData.discount = (purchase.discount - purchase.return_discount);\n                // formData.discount = 0;\n\n                /*\n                if (formData.is_discount_percent) {\n                    formData.discountValue = formData.discount_percent;\n                } else {\n                    formData.discountValue = formData.discount;\n                }\n                */\n\n\n\n                setFormData({ ...formData });\n\n                console.log(\"formData1.status:\", formData.status);\n\n\n                console.log(\"purchaseReturn.products:\", purchaseReturn.products);\n\n                let selectedProductsTemp = purchaseReturn.products;\n\n                selectedProducts = [];\n                for (let i = 0; i < selectedProductsTemp.length; i++) {\n                    if (selectedProductsTemp[i].quantity > 0) {\n                        selectedProductsTemp[i].selected = true;\n                    } else {\n                        selectedProductsTemp[i].selected = false;\n                    }\n                    selectedProducts.push(selectedProductsTemp[i]);\n\n                    selectedProductsTemp[i].purchase_unit_price = selectedProductsTemp[i].purchasereturn_unit_price;\n                }\n\n\n                setSelectedProducts([...selectedProducts]);\n\n                setFormData({ ...formData });\n                reCalculate();\n                setFormData({ ...formData });\n\n\n            })\n            .catch(error => {\n                setProcessing(false);\n                setErrors(error);\n            });\n    }\n\n\n    function getPurchase(id) {\n        console.log(\"inside get Purchase\");\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        fetch('/v1/purchase/' + id, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                setErrors({});\n\n                console.log(\"Response:\");\n                console.log(data);\n\n                let purchase = data.result;\n                formData = {\n                    // date_str: format(new Date(), \"MMM dd yyyy\"),\n                    date_str: new Date(),\n                    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n                    purchase_id: purchase.id,\n                    purchase_code: purchase.code,\n                    //   vendor_invoice_no: purchase.vendor_invoice_no,\n                    store_id: purchase.store_id,\n                    vendor_id: purchase.vendor_id,\n                    vat_percent: purchase.vat_percent,\n                    status: purchase.status,\n                    purchase_returned_by: purchase.order_placed_by,\n                    purchase_returned_by_signature_id: purchase.order_placed_by_signature_id,\n                    is_discount_percent: purchase.is_discount_percent,\n                    discount_percent: purchase.discount_percent,\n                    payment_status: \"paid\",\n                    payment_method: \"\",\n                };\n\n                //formData.discount = (purchase.discount - purchase.return_discount);\n                formData.discount = 0;\n\n                if (formData.is_discount_percent) {\n                    formData.discountValue = formData.discount_percent;\n                } else {\n                    formData.discountValue = formData.discount;\n                }\n\n                formData.discountValue = 0;\n\n                //formData.status = \"purchase_returned\";\n\n                setFormData({ ...formData });\n                console.log(\"formData1.status:\", formData.status);\n\n\n                let selectedProductsTemp = purchase.products;\n\n                selectedProducts = [];\n                for (let i = 0; i < selectedProductsTemp.length; i++) {\n                    selectedProductsTemp[i].selected = false;\n                    let purchasedQty = selectedProductsTemp[i].quantity - selectedProductsTemp[i].quantity_returned;\n                    selectedProductsTemp[i].quantity = purchasedQty;\n\n                    if (purchasedQty > 0) {\n                        selectedProducts.push(selectedProductsTemp[i]);\n                    }\n                }\n\n\n                setSelectedProducts([...selectedProducts]);\n\n                setFormData({ ...formData });\n                reCalculate();\n                setFormData({ ...formData });\n\n\n            })\n            .catch(error => {\n                setProcessing(false);\n                setErrors(error);\n            });\n    }\n\n    function ObjectToSearchQueryParams(object) {\n        return Object.keys(object)\n            .map(function (key) {\n                return `search[${key}]=${object[key]}`;\n            })\n            .join(\"&\");\n    }\n\n    async function suggestUsers(searchTerm) {\n        console.log(\"Inside handle suggestUsers\");\n        setPurchaseReturnedByUserOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        setIsPurchaseReturnedByUsersLoading(true);\n        let result = await fetch(\n            \"/v1/user?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setPurchaseReturnedByUserOptions(data.result);\n        setIsPurchaseReturnedByUsersLoading(false);\n    }\n\n    async function suggestSignatures(searchTerm) {\n        console.log(\"Inside handle suggestSignatures\");\n        setPurchaseReturnedBySignatureOptions([]);\n\n        console.log(\"searchTerm:\" + searchTerm);\n        if (!searchTerm) {\n            return;\n        }\n\n        var params = {\n            name: searchTerm,\n        };\n        var queryString = ObjectToSearchQueryParams(params);\n        if (queryString !== \"\") {\n            queryString = \"&\" + queryString;\n        }\n\n        const requestOptions = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n        };\n\n        let Select = \"select=id,name\";\n        setIsPurchaseReturnedBySignaturesLoading(true);\n        let result = await fetch(\n            \"/v1/signature?\" + Select + queryString,\n            requestOptions\n        );\n        let data = await result.json();\n\n        setPurchaseReturnedBySignatureOptions(data.result);\n        setIsPurchaseReturnedBySignaturesLoading(false);\n    }\n\n    function handleCreate(event) {\n        console.log(\"formData:\", formData);\n        console.log(\"formData.payment_status:\" + formData.payment_status);\n        event.preventDefault();\n        console.log(\"Inside handle Create\");\n        console.log(\"selectedProducts:\", selectedProducts);\n        let haveErrors = false;\n\n\n        formData.products = [];\n        for (var i = 0; i < selectedProducts.length; i++) {\n            if (!selectedProducts[i].selected) {\n                continue;\n                // selectedProducts[i].quantity = 0;\n            }\n\n            formData.products.push({\n                product_id: selectedProducts[i].product_id,\n                quantity: parseFloat(selectedProducts[i].quantity),\n                unit: selectedProducts[i].unit,\n                purchasereturn_unit_price: parseFloat(selectedProducts[i].purchase_unit_price),\n            });\n        }\n\n        if (!formData.cash_discount) {\n            formData.cash_discount = 0.00;\n        }\n\n        formData.discount = parseFloat(formData.discount);\n        formData.discount_percent = parseFloat(formData.discount_percent);\n\n        formData.vat_percent = parseFloat(formData.vat_percent);\n        console.log(\"formData.discount:\", formData.discount);\n\n       \n        if (!formData.discount && formData.discount !== 0) {\n            errors[\"discount\"] = \"Invalid discount\";\n            setErrors({ ...errors });\n            haveErrors = true;\n        }\n\n        if (!formData.discount_percent && formData.discount_percent !== 0) {\n            errors[\"discount_percent\"] = \"Invalid discount percent\";\n            setErrors({ ...errors });\n            haveErrors = true;\n        }\n\n        if (parseFloat(formData.discount_percent) > 100) {\n            errors[\"discount_percent\"] = \"Discount percent cannot be > 100\";\n            setErrors({ ...errors });\n            haveErrors = true;\n        }\n\n        errors[\"payment_method\"] = \"\";\n        setErrors({ ...errors });\n\n        if (haveErrors) {\n            console.log(\"Errors: \", errors);\n            return;\n        }\n\n\n        let endPoint = \"/v1/purchase-return\";\n        let method = \"POST\";\n        if (formData.id) {\n            endPoint = \"/v1/purchase-return/\" + formData.id;\n            method = \"PUT\";\n        }\n\n\n        const requestOptions = {\n            method: method,\n            headers: {\n                'Accept': 'application/json',\n                \"Content-Type\": \"application/json\",\n                Authorization: cookies.get(\"access_token\"),\n            },\n            body: JSON.stringify(formData),\n        };\n\n        setProcessing(true);\n        fetch(endPoint, requestOptions)\n            .then(async (response) => {\n                const isJson = response.headers\n                    .get(\"content-type\")\n                    ?.includes(\"application/json\");\n                const data = isJson && (await response.json());\n\n                // check for error response\n                if (!response.ok) {\n                    // get error message from body or default to response status\n                    const error = data && data.errors;\n                    //const error = data.errors\n                    return Promise.reject(error);\n                }\n\n                setErrors({});\n                setProcessing(false);\n\n                console.log(\"Response:\");\n                console.log(data);\n                props.showToastMessage(\"Purchase Return Created Successfully!\", \"success\");\n                if (props.refreshList) {\n                    props.refreshList();\n                }\n                handleClose();\n                openDetailsView(data.result.id);\n            })\n            .catch((error) => {\n                setProcessing(false);\n                console.log(\"Inside catch\");\n                console.log(error);\n                setErrors({ ...error });\n                console.error(\"There was an error!\", error);\n                props.showToastMessage(\"Error Creating PurchaseReturned!\", \"danger\");\n            });\n    }\n\n\n    let [totalPrice, setTotalPrice] = useState(0.0);\n\n    function findTotalPrice() {\n        totalPrice = 0.00;\n        for (var i = 0; i < selectedProducts.length; i++) {\n            if (!selectedProducts[i].selected) {\n                continue;\n            }\n            totalPrice +=\n                parseFloat(selectedProducts[i].purchase_unit_price) *\n                parseFloat(selectedProducts[i].quantity);\n        }\n        totalPrice = totalPrice.toFixed(2);\n        setTotalPrice(totalPrice);\n    }\n\n    let [vatPrice, setVatPrice] = useState(0.00);\n\n    function findVatPrice() {\n        if (totalPrice > 0) {\n            vatPrice = ((parseFloat(formData.vat_percent) / 100) * parseFloat(totalPrice - formData.discount)).toFixed(2);;\n            console.log(\"vatPrice:\", vatPrice);\n            setVatPrice(vatPrice);\n        }\n\n    }\n\n\n    let [netTotal, setNetTotal] = useState(0.00);\n\n    function findNetTotal() {\n        if (totalPrice > 0) {\n            netTotal = (parseFloat(totalPrice) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n            setNetTotal(netTotal);\n        }\n\n    }\n\n    let [discountPercent, setDiscountPercent] = useState(0.00);\n\n    function findDiscountPercent() {\n        if (!formData.discountValue) {\n            formData.discount = 0.00;\n            formData.discount_percent = 0.00;\n            setFormData({ ...formData });\n            return;\n        }\n\n        formData.discount = formData.discountValue;\n\n        if (formData.discount > 0 && totalPrice > 0) {\n            discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n            setDiscountPercent(discountPercent);\n            formData.discount_percent = discountPercent;\n            setFormData({ ...formData });\n        }\n\n    }\n\n    function findDiscount() {\n        if (formData.discount_percent >= 0 && totalPrice > 0) {\n            formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100));\n            //formData.discount = Math.round(formData.discount * 100) / 100;\n            formData.discount = parseFloat(formData.discount.toFixed(2));\n            setFormData({ ...formData });\n        }\n    }\n\n    function findDiscountPercent() {\n        if (formData.discount >= 0 && totalPrice > 0) {\n            discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100);\n            setDiscountPercent(discountPercent);\n            formData.discount_percent = discountPercent;\n            //formData.discount_percent = Math.round(formData.discount_percent * 100) / 100;\n            setFormData({ ...formData });\n        }\n    }\n    /*\n\n    function findDiscount() {\n        if (!formData.discountValue) {\n            formData.discount = 0.00;\n            formData.discount_percent = 0.00;\n            setFormData({ ...formData });\n            return;\n        }\n\n        formData.discount_percent = formData.discountValue;\n\n        if (formData.discount_percent > 0 && totalPrice > 0) {\n            formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n        }\n        setFormData({ ...formData });\n    }\n    */\n\n\n    function reCalculate() {\n        findTotalPrice();\n        if (formData.is_discount_percent) {\n            findDiscount();\n        } else {\n            findDiscountPercent();\n        }\n        findVatPrice();\n        findNetTotal();\n    }\n\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        DetailsViewRef.current.open(id);\n    }\n\n    const StoreCreateFormRef = useRef();\n\n    const ProductCreateFormRef = useRef();\n    function openProductCreateForm() {\n        ProductCreateFormRef.current.open();\n    }\n\n    function openProductUpdateForm(id) {\n        ProductCreateFormRef.current.open(id);\n    }\n\n    const VendorCreateFormRef = useRef();\n\n    const UserCreateFormRef = useRef();\n    function openUserCreateForm() {\n        UserCreateFormRef.current.open();\n    }\n\n\n    const SignatureCreateFormRef = useRef();\n    function openSignatureCreateForm() {\n        SignatureCreateFormRef.current.open();\n    }\n\n    const ProductDetailsViewRef = useRef();\n    function openProductDetailsView(id) {\n        ProductDetailsViewRef.current.open(id);\n    }\n\n    const PurchaseDetailsViewRef = useRef();\n    function openPurchaseDetailsView(id) {\n        PurchaseDetailsViewRef.current.open(id);\n    }\n\n    let [paymentStatus, setPaymentStatus] = useState(\"\");\n\n\n    return (\n        <>\n            <ProductView ref={ProductDetailsViewRef} openUpdateForm={openProductUpdateForm} openCreateForm={openProductCreateForm} />\n            <ProductCreate ref={ProductCreateFormRef} showToastMessage={props.showToastMessage} openDetailsView={openProductDetailsView} />\n\n\n\n            <PurchaseReturnedView ref={DetailsViewRef} />\n            <StoreCreate ref={StoreCreateFormRef} showToastMessage={props.showToastMessage} />\n            <UserCreate ref={UserCreateFormRef} showToastMessage={props.showToastMessage} />\n            <SignatureCreate ref={SignatureCreateFormRef} showToastMessage={props.showToastMessage} />\n            <VendorCreate ref={VendorCreateFormRef} showToastMessage={props.showToastMessage} />\n            <PurchaseView ref={PurchaseDetailsViewRef} />\n            <Modal show={show} size=\"xl\" fullscreen onHide={handleClose} animation={false} backdrop=\"static\" scrollable={true}>\n                <Modal.Header>\n                    <Modal.Title>\n                        {formData.id ? \"Update Purchase Return #\" + formData.code + \" for purchase #\" + formData.purchase_code : \"Create Purchase Return\" + \" for purchase #\" + formData.purchase_code}\n                        {/*\n                        {formData.purchase_id ? \" for Purchase #\" + <span style={{\n                            textDecoration: \"underline\",\n                            color: \"blue\",\n                            cursor: \"pointer\",\n                        }}\n                            onClick={() => {\n                                openPurchaseDetailsView(formData.purchase_id);\n                            }}> formData.purchase_code : \"\"} </span> : \"\"}\n                        */}\n                    </Modal.Title>\n\n                    <div className=\"col align-self-end text-end\">\n                        <PurchaseReturnedPreview />\n                        <Button variant=\"primary\" className=\"mb-3\" onClick={handleCreate} >\n                            {isProcessing ?\n                                <Spinner\n                                    as=\"span\"\n                                    animation=\"border\"\n                                    size=\"sm\"\n                                    role=\"status\"\n                                    aria-hidden={true}\n                                /> + \" Creating...\"\n\n                                : \"\"\n                            }\n                            {formData.id ? \"Update\" : \"Create\"}\n\n                        </Button>\n                        <button\n                            type=\"button\"\n                            className=\"btn-close\"\n                            onClick={handleClose}\n                            aria-label=\"Close\"\n                        ></button>\n                    </div>\n                </Modal.Header>\n                <Modal.Body>\n                    {Object.keys(errors).length > 0 ?\n                        <div>\n                            <ul>\n\n                                {errors && Object.keys(errors).map((key, index) => {\n                                    return (errors[key] ? <li style={{ color: \"red\" }}>{errors[key]}</li> : \"\");\n                                })}\n                            </ul></div> : \"\"}\n                    {selectedProducts.length === 0 && \"Already Returned All purchased products\"}\n\n\n                    {selectedProducts.length > 0 && <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n\n                        <div className=\"col-md-3\">\n                            <label className=\"form-label\">Vendor Invoice No. (Optional)</label>\n\n                            <div className=\"input-group mb-3\">\n                                <input\n                                    value={formData.vendor_invoice_no ? formData.vendor_invoice_no : \"\"}\n                                    type='string'\n                                    onChange={(e) => {\n                                        errors[\"vendor_invoice_no\"] = \"\";\n                                        setErrors({ ...errors });\n                                        formData.vendor_invoice_no = e.target.value;\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                    id=\"vendor_invoice_no\"\n                                    placeholder=\"Vendor Invoice No.\"\n                                />\n                                {errors.vendor_invoice_no && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.vendor_invoice_no}\n                                    </div>\n                                )}\n                                {formData.vendor_invoice_no && !errors.rack && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n\n                        <div className=\"col-md-3\">\n                            <label className=\"form-label\">Date*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <DatePicker\n                                    id=\"date_str\"\n                                    selected={formData.date_str ? new Date(formData.date_str) : null}\n                                    value={formData.date_str ? format(\n                                        new Date(formData.date_str),\n                                        \"MMMM d, yyyy h:mm aa\"\n                                    ) : null}\n                                    className=\"form-control\"\n                                    dateFormat=\"MMMM d, yyyy h:mm aa\"\n                                    showTimeSelect\n                                    timeIntervals=\"1\"\n                                    onChange={(value) => {\n                                        console.log(\"Value\", value);\n                                        formData.date_str = value;\n                                        // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n                                        setFormData({ ...formData });\n                                    }}\n                                />\n\n                                {errors.date_str && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.date_str}\n                                    </div>\n                                )}\n                                {formData.date_str && !errors.date_str && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n\n                        <h2>Select Products</h2>\n                        {errors[\"product_id\"] && (\n                            <div style={{ color: \"red\" }}>\n                                <i className=\"bi bi-x-lg\"> </i>\n                                {errors[\"product_id\"]}\n                            </div>\n                        )}\n                        <div className=\"table-responsive\" style={{ overflowX: \"auto\", overflowY: \"scroll\" }}>\n                            <table className=\"table table-striped table-sm table-bordered\">\n                                <thead>\n                                    <tr className=\"text-center\">\n                                        <th>Select</th>\n                                        <th>SI No.</th>\n                                        <th>Part No.</th>\n                                        <th>Name</th>\n                                        <th>Qty</th>\n                                        <th>Unit Price</th>\n                                        <th>Purchase Return Price</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {selectedProducts.map((product, index) => (\n                                        <tr className=\"text-center\">\n                                            <td>\n                                                <input type=\"checkbox\" checked={selectedProducts[index].selected} onChange={(e) => {\n                                                    console.log(\"e.target.value:\", e.target.value)\n                                                    selectedProducts[index].selected = !selectedProducts[index].selected;\n                                                    if (selectedProducts[index].selected === true) {\n                                                        if (selectedProducts[index].quantity === 0) {\n                                                            selectedProducts[index].quantity = 1;\n                                                        }\n                                                    } else {\n                                                        selectedProducts[index].quantity = 0;\n                                                    }\n                                                    setSelectedProducts([...selectedProducts]);\n                                                    reCalculate();\n                                                }} />\n                                            </td>\n                                            <td>{index + 1}</td>\n                                            <td>{product.part_number}</td>\n                                            <td style={{\n                                                textDecoration: \"underline\",\n                                                color: \"blue\",\n                                                cursor: \"pointer\",\n                                            }}\n                                                onClick={() => {\n                                                    openProductDetailsView(product.product_id);\n                                                }}>{product.name}\n                                            </td>\n                                            <td style={{ width: \"155px\" }}>\n\n                                                <div className=\"input-group mb-3\">\n                                                    <input type=\"number\" value={product.quantity} className=\"form-control\"\n\n                                                        placeholder=\"Quantity\" onChange={(e) => {\n                                                            errors[\"quantity_\" + index] = \"\";\n                                                            setErrors({ ...errors });\n                                                            if (!e.target.value) {\n                                                                errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                                                                selectedProducts[index].quantity = e.target.value;\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n                                                            if (parseFloat(e.target.value) === 0) {\n                                                                errors[\"quantity_\" + index] = \"Quantity should be >0\";\n                                                                selectedProducts[index].quantity = parseFloat(e.target.value);\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                console.log(\"errors:\", errors);\n                                                                return;\n                                                            }\n\n                                                            product.quantity = parseFloat(e.target.value);\n                                                            reCalculate();\n\n                                                            selectedProducts[index].quantity = parseFloat(e.target.value);\n                                                            console.log(\"selectedProducts[index].quantity:\", selectedProducts[index].quantity);\n                                                            setSelectedProducts([...selectedProducts]);\n                                                            reCalculate();\n\n                                                        }} />\n                                                    <span className=\"input-group-text\" id=\"basic-addon2\">{selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"}</span>\n                                                </div>\n                                                {errors[\"quantity_\" + index] && (\n                                                    <div style={{ color: \"red\" }}>\n                                                        <i className=\"bi bi-x-lg\"> </i>\n                                                        {errors[\"quantity_\" + index]}\n                                                    </div>\n                                                )}\n\n                                            </td>\n                                            <td style={{ width: \"180px\" }}>\n                                                <div className=\"input-group mb-3\">\n\n                                                    <input type=\"number\" value={product.purchase_unit_price} className=\"form-control\"\n\n                                                        placeholder=\"Purchase Return Unit Price\" onChange={(e) => {\n                                                            errors[\"purchasereturned_unit_price_\" + index] = \"\";\n                                                            setErrors({ ...errors });\n\n                                                            if (!e.target.value) {\n                                                                errors[\"purchasereturned_unit_price_\" + index] = \"Invalid Purchase Return Unit Price\";\n                                                                selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                return;\n                                                            }\n\n                                                            if (e.target.value === 0) {\n                                                                errors[\"purchasereturned_unit_price_\" + index] = \"Purchase Return Unit Price should be >0\";\n                                                                selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                                                                setSelectedProducts([...selectedProducts]);\n                                                                setErrors({ ...errors });\n                                                                return;\n                                                            }\n\n                                                            selectedProducts[index].purchase_unit_price = parseFloat(e.target.value);\n                                                            console.log(\"selectedProducts[index].purchase_unit_price:\", selectedProducts[index].purchase_unit_price);\n                                                            setSelectedProducts([...selectedProducts]);\n                                                            reCalculate();\n\n                                                        }} />\n\n                                                </div>\n                                                {errors[\"purchasereturned_unit_price_\" + index] && (\n                                                    <div style={{ color: \"red\" }}>\n                                                        <i className=\"bi bi-x-lg\"> </i>\n                                                        {errors[\"purchasereturned_unit_price_\" + index]}\n                                                    </div>\n                                                )}\n\n                                            </td>\n                                            <td className=\"text-end\">\n                                                <NumberFormat\n                                                    value={(product.purchase_unit_price * product.quantity).toFixed(2)}\n                                                    displayType={\"text\"}\n                                                    thousandSeparator={true}\n                                                    suffix={\"\"}\n                                                    renderText={(value, props) => value}\n                                                />\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                        <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                            <table className=\"table table-striped table-sm table-bordered\">\n                                <tbody>\n                                    <tr>\n                                        <td colSpan=\"5\"></td>\n                                        <th className=\"text-end\">Total</th>\n                                        <td className=\"text-end\" style={{ width: \"180px\" }}>\n                                            <NumberFormat\n                                                value={totalPrice}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\"\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n\n                                    <tr>\n                                        <th colSpan=\"6\" className=\"text-end\">\n\n                                            Discount  <input type=\"number\" style={{ width: \"50px\" }} className=\"text-start\" value={formData.discount_percent} onChange={(e) => {\n                                                formData.is_discount_percent = true;\n                                                if (parseFloat(e.target.value) === 0) {\n                                                    formData.discount_percent = parseFloat(e.target.value);\n                                                    setFormData({ ...formData });\n                                                    errors[\"discount_percent\"] = \"\";\n                                                    setErrors({ ...errors });\n                                                    reCalculate();\n                                                    return;\n                                                }\n\n                                                if (parseFloat(e.target.value) < 0) {\n                                                    formData.discount_percent = parseFloat(e.target.value);\n                                                    formData.discount = 0.00;\n                                                    setFormData({ ...formData });\n                                                    errors[\"discount_percent\"] = \"Discount percent should be >= 0\";\n                                                    setErrors({ ...errors });\n                                                    reCalculate();\n                                                    return;\n                                                }\n\n                                                if (!e.target.value) {\n                                                    formData.discount_percent = \"\";\n                                                    formData.discount = 0.00;\n                                                    errors[\"discount_percent\"] = \"Invalid Discount Percent\";\n                                                    setFormData({ ...formData });\n                                                    setErrors({ ...errors });\n                                                    return;\n                                                }\n\n                                                errors[\"discount_percent\"] = \"\";\n                                                errors[\"discount\"] = \"\";\n                                                setErrors({ ...errors });\n\n                                                formData.discount_percent = parseFloat(e.target.value);\n                                                setFormData({ ...formData });\n                                                reCalculate();\n                                            }} />{\"%\"}\n                                            {errors.discount_percent && (\n                                                <div style={{ color: \"red\" }}>\n                                                    {errors.discount_percent}\n                                                </div>\n                                            )}\n\n                                        </th>\n                                        <td className=\"text-end\">\n                                            <NumberFormat\n                                                value={formData.discount}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\"\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <th colSpan=\"5\" className=\"text-end\">\n\n                                        </th>\n                                        <th className=\"text-end\">VAT: {formData.vat_percent + \"%\"}</th>\n                                        <td className=\"text-end\">\n                                            <NumberFormat\n                                                value={vatPrice}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\"\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td colSpan=\"5\"></td>\n                                        <th className=\"text-end\">Net Total</th>\n                                        <th className=\"text-end\">\n                                            <NumberFormat\n                                                value={netTotal}\n                                                displayType={\"text\"}\n                                                thousandSeparator={true}\n                                                suffix={\"\"}\n                                                renderText={(value, props) => value}\n                                            />\n                                        </th>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n\n                        <div className=\"col-md-2\">\n                            <label className=\"form-label\">Cash discount</label>\n                            <input type='number' value={formData.cash_discount} className=\"form-control \"\n                                onChange={(e) => {\n                                    errors[\"cash_discount\"] = \"\";\n                                    setErrors({ ...errors });\n                                    if (!e.target.value) {\n                                        formData.cash_discount = e.target.value;\n                                        setFormData({ ...formData });\n                                        validatePaymentAmounts();\n                                        return;\n                                    }\n                                    formData.cash_discount = parseFloat(e.target.value);\n                                    if (formData.cash_discount > 0 && formData.cash_discount >= netTotal) {\n                                        errors[\"cash_discount\"] = \"Cash discount should not be >= \" + netTotal.toString();\n                                        setErrors({ ...errors });\n                                        return;\n                                    }\n\n                                    setFormData({ ...formData });\n                                    validatePaymentAmounts();\n                                    console.log(formData);\n                                }}\n                            />\n                            {errors.cash_discount && (\n                                <div style={{ color: \"red\" }}>\n                                    <i className=\"bi bi-x-lg\"> </i>\n                                    {errors.cash_discount}\n                                </div>\n                            )}\n                        </div>\n\n                        <div className=\"col-md-8\">\n                            <label className=\"form-label\">Payments given</label>\n\n                            <div class=\"table-responsive\" style={{ maxWidth: \"900px\" }}>\n                                <Button variant=\"secondary\" style={{ alignContent: \"right\" }} onClick={addNewPayment}>\n                                    Create new payment\n                                </Button>\n                                <table class=\"table table-striped table-sm table-bordered\">\n                                    <thead>\n                                        <th>\n                                            Date\n                                        </th>\n                                        <th>\n                                            Amount\n                                        </th>\n                                        <th>\n                                            Payment method\n                                        </th>\n                                        <th>\n                                            Action\n                                        </th>\n                                    </thead>\n                                    <tbody>\n                                        {formData.payments_input &&\n                                            formData.payments_input.filter(payment => !payment.deleted).map((payment, key) => (\n                                                <tr key={key}>\n                                                    <td style={{ minWidth: \"220px\" }}>\n\n                                                        <DatePicker\n                                                            id=\"date_str\"\n                                                            selected={formData.payments_input[key].date_str ? new Date(formData.payments_input[key].date_str) : null}\n                                                            value={formData.payments_input[key].date_str ? format(\n                                                                new Date(formData.payments_input[key].date_str),\n                                                                \"MMMM d, yyyy h:mm aa\"\n                                                            ) : null}\n                                                            className=\"form-control\"\n                                                            dateFormat=\"MMMM d, yyyy h:mm aa\"\n                                                            showTimeSelect\n                                                            timeIntervals=\"1\"\n                                                            onChange={(value) => {\n                                                                console.log(\"Value\", value);\n                                                                formData.payments_input[key].date_str = value;\n                                                                setFormData({ ...formData });\n                                                            }}\n                                                        />\n                                                        {errors[\"payment_date_\" + key] && (\n                                                            <div style={{ color: \"red\" }}>\n                                                                <i className=\"bi bi-x-lg\"> </i>\n                                                                {errors[\"payment_date_\" + key]}\n                                                            </div>\n                                                        )}\n                                                    </td>\n                                                    <td style={{ width: \"300px\" }}>\n                                                        <input type='number' value={formData.payments_input[key].amount} className=\"form-control \"\n                                                            onChange={(e) => {\n                                                                errors[\"payment_amount_\" + key] = \"\";\n                                                                setErrors({ ...errors });\n\n                                                                if (!e.target.value) {\n                                                                    formData.payments_input[key].amount = e.target.value;\n                                                                    setFormData({ ...formData });\n                                                                    validatePaymentAmounts();\n                                                                    return;\n                                                                }\n\n                                                                formData.payments_input[key].amount = parseFloat(e.target.value);\n\n                                                                validatePaymentAmounts();\n                                                                setFormData({ ...formData });\n                                                                console.log(formData);\n                                                            }}\n                                                        />\n                                                        {errors[\"payment_amount_\" + key] && (\n                                                            <div style={{ color: \"red\" }}>\n                                                                <i className=\"bi bi-x-lg\"> </i>\n                                                                {errors[\"payment_amount_\" + key]}\n                                                            </div>\n                                                        )}\n                                                    </td>\n                                                    <td style={{ width: \"200px\" }}>\n                                                        <select value={formData.payments_input[key].method} className=\"form-control \"\n                                                            onChange={(e) => {\n                                                                // errors[\"payment_method\"] = [];\n                                                                errors[\"payment_method_\" + key] = \"\";\n                                                                setErrors({ ...errors });\n\n                                                                if (!e.target.value) {\n                                                                    errors[\"payment_method_\" + key] = \"Payment method is required\";\n                                                                    setErrors({ ...errors });\n\n                                                                    formData.payments_input[key].method = \"\";\n                                                                    setFormData({ ...formData });\n                                                                    return;\n                                                                }\n\n                                                                // errors[\"payment_method\"] = \"\";\n                                                                //setErrors({ ...errors });\n\n                                                                formData.payments_input[key].method = e.target.value;\n                                                                setFormData({ ...formData });\n                                                                console.log(formData);\n                                                            }}\n                                                        >\n                                                            <option value=\"\">Select</option>\n                                                            <option value=\"cash\">Cash</option>\n                                                            <option value=\"bank_account\">Bank Account / Debit / Credit Card</option>\n                                                            <option value=\"customer_account\">Customer Account</option>\n                                                        </select>\n                                                        {errors[\"payment_method_\" + key] && (\n                                                            <div style={{ color: \"red\" }}>\n                                                                <i className=\"bi bi-x-lg\"> </i>\n                                                                {errors[\"payment_method_\" + key]}\n                                                            </div>\n                                                        )}\n                                                    </td>\n                                                    <td style={{ width: \"200px\" }}>\n                                                        <Button variant=\"danger\" onClick={(event) => {\n                                                            removePayment(key);\n                                                        }}>\n                                                            Remove\n                                                        </Button>\n\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                       <tr>\n                                            <td class=\"text-end\">\n                                                <b>Total</b>\n                                            </td>\n                                            <td><b style={{ marginLeft: \"14px\" }}>{totalPaymentAmount?.toFixed(2)}</b>\n\n                                            </td>\n                                            <td>\n                                                <b style={{ marginLeft: \"12px\", alignSelf: \"end\" }}>Balance: {balanceAmount?.toFixed(2)}</b>\n                                            </td>\n                                            <td colSpan={1}>\n                                                <b>Payment status: </b> \n                                                {paymentStatus == \"paid\" ?\n                                                                <span className=\"badge bg-success\">\n                                                                    Paid\n                                                                </span> : \"\"}\n                                                            {paymentStatus == \"paid_partially\" ?\n                                                                <span className=\"badge bg-warning\">\n                                                                    Paid Partially\n                                                                </span> : \"\"}\n                                                            {paymentStatus == \"not_paid\" ?\n                                                                <span className=\"badge bg-danger\">\n                                                                    Not Paid\n                                                                </span> : \"\"}\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n\n\n\n\n\n                        <Modal.Footer>\n                            <Button variant=\"secondary\" onClick={handleClose}>\n                                Close\n                            </Button>\n                            <Button variant=\"primary\" onClick={handleCreate} >\n                                {isProcessing ?\n                                    <Spinner\n                                        as=\"span\"\n                                        animation=\"border\"\n                                        size=\"sm\"\n                                        role=\"status\"\n                                        aria-hidden={true}\n                                    /> + \" Creating...\"\n\n                                    : formData.id ? \"Update\" : \"Create\"\n                                }\n                            </Button>\n                        </Modal.Footer>\n                    </form>}\n                </Modal.Body>\n\n            </Modal>\n\n\n        </>\n    );\n});\n\nexport default PurchaseReturnedCreate;\n"]},"metadata":{},"sourceType":"module"}