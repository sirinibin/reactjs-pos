{"ast":null,"code":"var _jsxFileName = \"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport QuotationPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport QuotationView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { DebounceInput } from 'react-debounce-input';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QuotationCreate = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        shipping_handling_fees: 0.00,\n        is_discount_percent: false,\n        date_str: format(new Date(), \"MMM dd yyyy\"),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"delivered\",\n        price_type: \"retail\"\n      };\n      selectedProducts = [];\n      setSelectedProducts([]);\n      selectedStores = [];\n      setSelectedStores([]);\n      selectedCustomers = [];\n      setSelectedCustomers([]);\n      selectedDeliveredByUsers = [];\n      setSelectedDeliveredByUsers([]);\n      selectedDeliveredBySignatures = [];\n      setSelectedDeliveredBySignatures([]);\n      reCalculate();\n\n      if (cookies.get(\"user_id\")) {\n        selectedDeliveredByUsers = [{\n          id: cookies.get(\"user_id\"),\n          name: cookies.get(\"user_name\")\n        }];\n        formData.delivered_by = cookies.get(\"user_id\");\n        setFormData({ ...formData\n        });\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      }\n\n      if (cookies.get('store_id')) {\n        formData.store_id = cookies.get('store_id');\n        formData.store_name = cookies.get('store_name');\n      }\n\n      setFormData({ ...formData\n      });\n\n      if (id) {\n        getQuotation(id);\n      }\n\n      SetShow(true);\n    }\n\n  }));\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-order.123\"); // event.preventDefault();\n\n        var form = event.target.form;\n\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n\n            event.preventDefault();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n  const selectedDate = new Date(); //const history = useHistory();\n\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies(); //fields\n\n  let [formData, setFormData] = useState({\n    vat_percent: 15.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    date_str: format(new Date(), \"MMM dd yyyy\"),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"created\",\n    price_type: \"retail\",\n    is_discount_percent: false\n  }); //Store Auto Suggestion\n\n  const [storeOptions, setStoreOptions] = useState([]);\n  let [selectedStores, setSelectedStores] = useState([]);\n  const [isStoresLoading, setIsStoresLoading] = useState(false); //Customer Auto Suggestion\n\n  const [customerOptions, setCustomerOptions] = useState([]);\n  let [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isCustomersLoading, setIsCustomersLoading] = useState(false); //Product Auto Suggestion\n\n  let [productOptions, setProductOptions] = useState([]);\n  let [selectedProduct, setSelectedProduct] = useState([]);\n  let [selectedProducts, setSelectedProducts] = useState([]);\n  const [isProductsLoading, setIsProductsLoading] = useState(false); //Delivered By Auto Suggestion\n\n  const [deliveredByUserOptions, setDeliveredByUserOptions] = useState([]);\n  let [selectedDeliveredByUsers, setSelectedDeliveredByUsers] = useState([]);\n  const [isDeliveredByUsersLoading, setIsDeliveredByUsersLoading] = useState(false); //Delivered By Signature Auto Suggestion\n\n  const [deliveredBySignatureOptions, setDeliveredBySignatureOptions] = useState([]);\n  let [selectedDeliveredBySignatures, setSelectedDeliveredBySignatures] = useState([]);\n  const [isDeliveredBySignaturesLoading, setIsDeliveredBySignaturesLoading] = useState(false);\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n\n    if (!at) {\n      // history.push(\"/dashboard/quotations\");\n      window.location = \"/\";\n    }\n  });\n\n  function getQuotation(id) {\n    console.log(\"inside get Quotation\");\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': cookies.get('access_token')\n      }\n    };\n    fetch('/v1/quotation/' + id, requestOptions).then(async response => {\n      var _response$headers$get;\n\n      const isJson = (_response$headers$get = response.headers.get('content-type')) === null || _response$headers$get === void 0 ? void 0 : _response$headers$get.includes('application/json');\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let quotation = data.result;\n      formData = {\n        id: quotation.id,\n        code: quotation.code,\n        store_id: quotation.store_id,\n        customer_id: quotation.customer_id,\n        // date_str: quotation.date_str,\n        date: quotation.date,\n        vat_percent: quotation.vat_percent,\n        discount: quotation.discount,\n        discount_percent: quotation.discount_percent,\n        status: quotation.status,\n        delivered_by: quotation.delivered_by,\n        delivered_by_signature_id: quotation.delivered_by_signature_id,\n        is_discount_percent: quotation.is_discount_percent,\n        shipping_handling_fees: quotation.shipping_handling_fees\n      };\n      formData.date_str = data.result.date;\n\n      if (formData.is_discount_percent) {\n        formData.discountValue = formData.discount_percent;\n      } else {\n        formData.discountValue = formData.discount;\n      }\n\n      selectedProducts = quotation.products;\n      setSelectedProducts([...selectedProducts]);\n      let selectedStores = [{\n        id: quotation.store_id,\n        name: quotation.store_name\n      }];\n      let selectedCustomers = [{\n        id: quotation.customer_id,\n        name: quotation.customer_name,\n        search_label: quotation.customer_name\n      }];\n      let selectedDeliveredByUsers = [{\n        id: quotation.delivered_by,\n        name: quotation.delivered_by_name\n      }];\n\n      if (quotation.delivered_by_signature_id) {\n        let selectedDeliveredBySignatures = [{\n          id: quotation.delivered_by_signature_id,\n          name: quotation.delivered_by_signature_name\n        }];\n        setSelectedDeliveredBySignatures([...selectedDeliveredBySignatures]);\n      }\n\n      setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      setSelectedStores([...selectedStores]);\n      setSelectedCustomers([...selectedCustomers]);\n      setFormData({ ...formData\n      });\n      reCalculate();\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object).map(function (key) {\n      return `search[${key}]=` + encodeURIComponent(object[key]);\n    }).join(\"&\");\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggestStores\");\n    setStoreOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsStoresLoading(true);\n    let result = await fetch(\"/v1/store?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setStoreOptions(data.result);\n    setIsStoresLoading(false);\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n    setCustomerOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    setIsCustomersLoading(true);\n    let result = await fetch(\"/v1/customer?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setCustomerOptions(data.result);\n    setIsCustomersLoading(false);\n  }\n\n  function GetProductUnitPriceInStore(storeId, productStores) {\n    if (!productStores) {\n      return \"\";\n    }\n\n    for (var i = 0; i < productStores.length; i++) {\n      console.log(\"productStores[i]:\", productStores[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (productStores[i].store_id === storeId) {\n        console.log(\"macthed\");\n        console.log(\"productStores[i].retail_unit_price:\", productStores[i].retail_unit_price);\n        return productStores[i];\n      }\n    }\n\n    console.log(\"not matched\");\n    return \"\";\n  }\n\n  function GetProductPurchaseUnitPriceInStore(storeId, unitPriceListArray) {\n    if (!unitPriceListArray) {\n      return \"\";\n    }\n\n    for (var i = 0; i < unitPriceListArray.length; i++) {\n      console.log(\"unitPriceListArray[i]:\", unitPriceListArray[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (unitPriceListArray[i].store_id === storeId) {\n        return unitPriceListArray[i].purchase_unit_price;\n      } else {\n        console.log(\"not matched\");\n      }\n    }\n\n    return \"\";\n  }\n\n  let [openProductSearchResult, setOpenProductSearchResult] = useState(false);\n\n  async function suggestProducts(searchTerm) {\n    console.log(\"Inside handle suggestProducts\");\n    setProductOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n\n    if (cookies.get(\"store_id\")) {\n      params.store_id = cookies.get(\"store_id\");\n    }\n\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic\";\n    setIsProductsLoading(true);\n    let result = await fetch(\"/v1/product?\" + Select + queryString + \"&limit=200\", requestOptions);\n    let data = await result.json();\n    let products = data.result;\n\n    if (!products || products.length === 0) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    openProductSearchResult = true;\n    setOpenProductSearchResult(true);\n    setProductOptions(products);\n    setIsProductsLoading(false);\n  }\n\n  async function getProductByBarCode(barcode) {\n    formData.barcode = barcode;\n    setFormData({ ...formData\n    });\n    console.log(\"Inside getProductByBarCode\");\n    errors[\"bar_code\"] = \"\";\n    setErrors({ ...errors\n    });\n    console.log(\"barcode:\" + formData.barcode);\n\n    if (!formData.barcode) {\n      return;\n    }\n\n    if (formData.barcode.length === 13) {\n      formData.barcode = formData.barcode.slice(0, -1);\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";\n    let result = await fetch(\"/v1/product/barcode/\" + formData.barcode + \"?\" + Select, requestOptions);\n    let data = await result.json();\n    let product = data.result;\n\n    if (product) {\n      addProduct(product);\n    } else {\n      errors[\"bar_code\"] = \"Invalid Barcode:\" + formData.barcode;\n      setErrors({ ...errors\n      });\n    }\n\n    formData.barcode = \"\";\n    setFormData({ ...formData\n    });\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setDeliveredByUserOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsDeliveredByUsersLoading(true);\n    let result = await fetch(\"/v1/user?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setDeliveredByUserOptions(data.result);\n    setIsDeliveredByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setDeliveredBySignatureOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsDeliveredBySignaturesLoading(true);\n    let result = await fetch(\"/v1/signature?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setDeliveredBySignatureOptions(data.result);\n    setIsDeliveredBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n    formData.products = [];\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        name: selectedProducts[i].name,\n        name_in_arabic: selectedProducts[i].name_in_arabic,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        purchase_unit_price: parseFloat(selectedProducts[i].purchase_unit_price),\n        unit: selectedProducts[i].unit,\n        part_number: selectedProducts[i].part_number\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n\n    if (cookies.get('store_id')) {\n      formData.store_id = cookies.get('store_id');\n    }\n\n    console.log(\"formData.discount:\", formData.discount);\n    let endPoint = \"/v1/quotation\";\n    let method = \"POST\";\n\n    if (formData.id) {\n      endPoint = \"/v1/quotation/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        'Accept': 'application/json',\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      },\n      body: JSON.stringify(formData)\n    };\n    console.log(\"formData:\", formData);\n    setProcessing(true);\n    fetch(endPoint, requestOptions).then(async response => {\n      var _response$headers$get2;\n\n      const isJson = (_response$headers$get2 = response.headers.get(\"content-type\")) === null || _response$headers$get2 === void 0 ? void 0 : _response$headers$get2.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.errors; //const error = data.errors\n\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      setProcessing(false);\n      console.log(\"Response:\");\n      console.log(data);\n      props.showToastMessage(\"Quotation Created Successfully!\", \"success\");\n\n      if (props.refreshList) {\n        props.refreshList();\n      }\n\n      handleClose();\n      props.openDetailsView(data.result.id);\n    }).catch(error => {\n      setProcessing(false);\n      console.log(\"Inside catch\");\n      console.log(error);\n      setErrors({ ...error\n      });\n      console.error(\"There was an error!\", error);\n      props.showToastMessage(\"Error Creating Quotation!\", \"danger\");\n    });\n  }\n\n  function isProductAdded(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function addProduct(product) {\n    console.log(\"Inside Add product\");\n\n    if (!formData.store_id) {\n      errors.product_id = \"Please Select a Store and try again\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    errors.product_id = \"\";\n\n    if (!product) {\n      errors.product_id = \"Invalid Product\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    let unitPrice = GetProductUnitPriceInStore(formData.store_id, product.stores);\n    product.unit_price = unitPrice.retail_unit_price;\n    product.purchase_unit_price = unitPrice.purchase_unit_price;\n    let alreadyAdded = false;\n    let index = -1;\n    let quantity = 0.00;\n    product.quantity = 1.00;\n\n    if (isProductAdded(product.id)) {\n      alreadyAdded = true;\n      index = getProductIndex(product.id);\n      quantity = parseFloat(selectedProducts[index].quantity + product.quantity);\n    } else {\n      quantity = parseFloat(product.quantity);\n    }\n\n    console.log(\"quantity:\", quantity);\n    errors.quantity = \"\";\n\n    if (alreadyAdded) {\n      selectedProducts[index].quantity = parseFloat(quantity);\n    }\n\n    if (!alreadyAdded) {\n      let item = {\n        product_id: product.id,\n        code: product.item_code,\n        part_number: product.part_number,\n        name: product.name,\n        quantity: product.quantity,\n        stores: product.stores,\n        unit: product.unit\n      };\n\n      if (product.unit_price) {\n        item.unit_price = parseFloat(product.unit_price);\n        console.log(\"item.unit_price:\", item.unit_price);\n      }\n\n      if (product.purchase_unit_price) {\n        item.purchase_unit_price = parseFloat(product.purchase_unit_price);\n        console.log(\"item.purchase_unit_price\", item.purchase_unit_price);\n      }\n\n      selectedProducts.push(item);\n    }\n\n    console.log(\"selectedProducts:\", selectedProducts);\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  function getProductIndex(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return i;\n      }\n    }\n\n    return false;\n  }\n\n  function removeProduct(product) {\n    const index = selectedProducts.indexOf(product);\n\n    if (index > -1) {\n      selectedProducts.splice(index, 1);\n    }\n\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.00;\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      totalPrice += parseFloat(selectedProducts[i].unit_price) * parseFloat(selectedProducts[i].quantity);\n    }\n\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [vatPrice, setVatPrice] = useState(0.00);\n\n  function findVatPrice() {\n    vatPrice = 0.00;\n\n    if (totalPrice > 0) {\n      vatPrice = (parseFloat(parseFloat(formData.vat_percent) / 100) * (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount))).toFixed(2);\n      ;\n      console.log(\"vatPrice:\", vatPrice);\n    }\n\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.00);\n\n  function findNetTotal() {\n    netTotal = 0.00;\n\n    if (totalPrice > 0) {\n      netTotal = (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n    }\n\n    setNetTotal(netTotal);\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.00);\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function reCalculate() {\n    findTotalPrice();\n\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const StoreCreateFormRef = useRef();\n\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const CustomerCreateFormRef = useRef();\n\n  function openCustomerCreateForm() {\n    CustomerCreateFormRef.current.open();\n  }\n\n  const ProductCreateFormRef = useRef();\n\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const UserCreateFormRef = useRef();\n\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PreviewRef = useRef();\n\n  function openPreview() {\n    let model = {};\n    model = JSON.parse(JSON.stringify(formData));\n    model.products = selectedProducts;\n    model.net_total = netTotal;\n    model.vat_price = vatPrice;\n    model.total = totalPrice; //setFormData({ ...formData });\n\n    PreviewRef.current.open(model);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductView, {\n      ref: ProductDetailsViewRef,\n      openUpdateForm: openProductUpdateForm,\n      openCreateForm: openProductCreateForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 883,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductCreate, {\n      ref: ProductCreateFormRef,\n      showToastMessage: props.showToastMessage,\n      openDetailsView: openProductDetailsView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 884,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(QuotationPreview, {\n      ref: PreviewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoreCreate, {\n      ref: StoreCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomerCreate, {\n      ref: CustomerCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserCreate, {\n      ref: UserCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 890,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SignatureCreate, {\n      ref: SignatureCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 891,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      size: \"xl\",\n      fullscreen: true,\n      onHide: handleClose,\n      animation: false,\n      backdrop: \"static\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: formData.id ? \"Update Quotation #\" + formData.code : \"Create New Quotation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col align-self-end text-end\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: openPreview,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-display\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 15\n            }, this), \" Preview\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 13\n          }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: openPreview,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-display\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 15\n            }, this), \" Preview\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 13\n          }, this), \"\\xA0\\xA0 \\xA0\\xA0 \\xA0\\xA0\", formData.id ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => {\n              handleClose();\n              props.openDetailsView(formData.id);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 912,\n              columnNumber: 15\n            }, this), \" View Detail\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 908,\n            columnNumber: 28\n          }, this) : \"\", \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleCreate,\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 917,\n              columnNumber: 17\n            }, this) + \" Creating...\" : \"\", formData.id ? \"Update\" : \"Create\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: handleClose,\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 893,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-3 needs-validation\",\n          onSubmit: handleCreate,\n          children: [!cookies.get('store_name') ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Store*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 941,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n                id: \"store_id\",\n                labelKey: \"name\",\n                isLoading: isStoresLoading,\n                isInvalid: errors.store_id ? true : false,\n                onChange: selectedItems => {\n                  errors.store_id = \"\";\n                  setErrors(errors);\n\n                  if (selectedItems.length === 0) {\n                    errors.store_id = \"Invalid Store selected\";\n                    setErrors(errors);\n                    formData.store_id = \"\";\n                    setFormData({ ...formData\n                    });\n                    setSelectedStores([]);\n                    return;\n                  }\n\n                  formData.store_id = selectedItems[0].id;\n                  setFormData({ ...formData\n                  });\n                  setSelectedStores(selectedItems); //SetPriceOfAllProducts(selectedItems[0].id);\n                },\n                options: storeOptions,\n                placeholder: \"Select Store\",\n                selected: selectedStores,\n                highlightOnlyResult: true,\n                onInputChange: (searchTerm, e) => {\n                  suggestStores(searchTerm);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 944,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                hide: true.toString(),\n                onClick: openStoreCreateForm,\n                className: \"btn btn-outline-secondary btn-primary btn-sm\",\n                type: \"button\",\n                id: \"button-addon1\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-plus-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 974,\n                  columnNumber: 169\n                }, this), \" New\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 976,\n                  columnNumber: 19\n                }, this), errors.store_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 975,\n                columnNumber: 17\n              }, this), formData.store_id && !errors.store_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 981,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 943,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 43\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Customer*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 988,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n                id: \"customer_id\",\n                labelKey: \"search_label\",\n                isLoading: isCustomersLoading,\n                isInvalid: errors.customer_id ? true : false,\n                onChange: selectedItems => {\n                  errors.customer_id = \"\";\n                  setErrors(errors);\n\n                  if (selectedItems.length === 0) {\n                    errors.customer_id = \"Invalid Customer selected\";\n                    setErrors(errors);\n                    formData.customer_id = \"\";\n                    setFormData({ ...formData\n                    });\n                    setSelectedCustomers([]);\n                    return;\n                  }\n\n                  formData.customer_id = selectedItems[0].id;\n                  setFormData({ ...formData\n                  });\n                  setSelectedCustomers(selectedItems);\n                },\n                options: customerOptions,\n                placeholder: \"Type name or mob\",\n                selected: selectedCustomers,\n                highlightOnlyResult: true,\n                onInputChange: (searchTerm, e) => {\n                  suggestCustomers(searchTerm);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 991,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                hide: true.toString(),\n                onClick: openCustomerCreateForm,\n                className: \"btn btn-outline-secondary btn-primary btn-sm\",\n                type: \"button\",\n                id: \"button-addon1\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-plus-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1019,\n                  columnNumber: 172\n                }, this), \" New\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1019,\n                columnNumber: 17\n              }, this), errors.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1022,\n                  columnNumber: 21\n                }, this), errors.customer_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1021,\n                columnNumber: 19\n              }, this), formData.customer_id && !errors.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1028,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1027,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 990,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 987,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Product Barcode Scan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                minLength: 3,\n                debounceTimeout: 500,\n                placeholder: \"Scan Barcode\",\n                className: \"form-control barcode\",\n                value: formData.barcode,\n                onChange: event => getProductByBarCode(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1039,\n                columnNumber: 17\n              }, this), errors.bar_code && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1048,\n                  columnNumber: 21\n                }, this), errors.bar_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1047,\n                columnNumber: 19\n              }, this), formData.bar_code && !errors.bar_code && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1054,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1053,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1038,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1035,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Product*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typeahead, {\n              id: \"product_id\",\n              size: \"lg\",\n              labelKey: \"search_label\",\n              emptyLabel: \"\",\n              clearButton: true,\n              open: openProductSearchResult,\n              isLoading: isProductsLoading,\n              isInvalid: errors.product_id ? true : false,\n              onChange: selectedItems => {\n                if (selectedItems.length === 0) {\n                  errors[\"product_id\"] = \"Invalid Product selected\";\n                  setErrors(errors);\n                  return;\n                }\n\n                errors[\"product_id\"] = \"\";\n                setErrors({ ...errors\n                });\n\n                if (formData.store_id) {\n                  addProduct(selectedItems[0]);\n                }\n\n                setOpenProductSearchResult(false);\n              },\n              options: productOptions,\n              selected: selectedProduct,\n              placeholder: \"Search By Part No. / Name / Name in Arabic\",\n              highlightOnlyResult: true,\n              onInputChange: (searchTerm, e) => {\n                suggestProducts(searchTerm);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1063,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              hide: true.toString(),\n              onClick: openProductCreateForm,\n              className: \"btn btn-outline-secondary btn-primary btn-sm\",\n              type: \"button\",\n              id: \"button-addon1\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1095,\n                columnNumber: 169\n              }, this), \" New\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1095,\n              columnNumber: 15\n            }, this), errors.product_id ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"red\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1098,\n                columnNumber: 19\n              }, this), errors.product_id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1097,\n              columnNumber: 17\n            }, this) : null, selectedProduct[0] && selectedProduct[0].id && !errors.product_id && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"green\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-check-lg\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1106,\n                columnNumber: 21\n              }, this), \"Looks good!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1105,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1061,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\",\n              maxHeight: \"400px\",\n              overflowY: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"3%\"\n                    },\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1116,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"5%\"\n                    },\n                    children: \"SI No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1117,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"10%\"\n                    },\n                    children: \"Part No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1118,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"34%\"\n                    },\n                    className: \"text-start\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1119,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1120,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Purchase Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1121,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"15%\"\n                    },\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1123,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1115,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1114,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: selectedProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\",\n                        cursor: \"pointer\"\n                      },\n                      onClick: () => {\n                        removeProduct(product);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1137,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1131,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1130,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1140,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.part_number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1141,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textDecoration: \"underline\",\n                      color: \"blue\",\n                      cursor: \"pointer\"\n                    },\n                    className: \"text-start\",\n                    onClick: () => {\n                      openProductDetailsView(product.product_id);\n                      console.log(\"okk,id:\", product.product_id);\n                    },\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1142,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"155px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.quantity,\n                        className: \"form-control\",\n                        placeholder: \"Quantity\",\n                        onChange: e => {\n                          errors[\"quantity_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"quantity_\" + index] = \"Quantity should be > 0\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          product.quantity = parseFloat(e.target.value);\n                          reCalculate();\n                          selectedProducts[index].quantity = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].quantity:\", selectedProducts[index].quantity);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1156,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: [\" \", selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1188,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1155,\n                      columnNumber: 25\n                    }, this), errors[\"quantity_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1192,\n                        columnNumber: 29\n                      }, this), errors[\"quantity_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1191,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1153,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"150px\"\n                    },\n                    children: product.purchase_unit_price ? /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: product.purchase_unit_price.toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1199,\n                      columnNumber: 56\n                    }, this) : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1198,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"180px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.unit_price,\n                        className: \"form-control\",\n                        placeholder: \"Unit Price\",\n                        onChange: e => {\n                          errors[\"unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"unit_price_\" + index] = \"Invalid Unit Price\";\n                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"unit_price_\" + index] = \"Unit Price shoudl be > 0\";\n                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          selectedProducts[index].unit_price = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].unit_price:\", selectedProducts[index].unit_price);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1210,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: \"SAR\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1239,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1209,\n                      columnNumber: 25\n                    }, this), errors[\"unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1243,\n                        columnNumber: 29\n                      }, this), errors[\"unit_price_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1242,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1207,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: (product.unit_price * product.quantity).toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1250,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1249,\n                    columnNumber: 23\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1129,\n                  columnNumber: 21\n                }, this)).reverse()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1127,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1113,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1270,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    style: {\n                      width: \"200px\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: totalPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1272,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1271,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1267,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Shipping & Handling Fees\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1282,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"150px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.shipping_handling_fees,\n                      onChange: e => {\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"shipping_handling_fees\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"shipping_handling_fees\"] = \"Shipping / Handling Fees should be > 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.shipping_handling_fees = \"\";\n                          errors[\"shipping_handling_fees\"] = \"Invalid Shipping / Handling Fees\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"shipping_handling_fees\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.shipping_handling_fees = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1286,\n                      columnNumber: 23\n                    }, this), \" SAR\", errors.shipping_handling_fees && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.shipping_handling_fees\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1323,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1285,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1281,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: [\"Discount  \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"50px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.discount_percent,\n                      onChange: e => {\n                        formData.is_discount_percent = true;\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          formData.discount = 0.00;\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"Discount percent should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount_percent = \"\";\n                          formData.discount = 0.00;\n                          errors[\"discount_percent\"] = \"Invalid Discount Percent\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"discount_percent\"] = \"\";\n                        errors[\"discount\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.discount_percent = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1331,\n                      columnNumber: 33\n                    }, this), \"%\", errors.discount_percent && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.discount_percent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1370,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1330,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"150px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.discount,\n                      onChange: e => {\n                        formData.is_discount_percent = false;\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          formData.discount_percent = 0.00;\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount\"] = \"Discount should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount = \"\";\n                          formData.discount_percent = 0.00;\n                          errors[\"discount\"] = \"Invalid Discount\";\n                          setFormData({ ...formData\n                          });\n                          reCalculate();\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"discount\"] = \"\";\n                        errors[\"discount_percent\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.discount = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1376,\n                      columnNumber: 23\n                    }, this), \" SAR\", errors.discount && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.discount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1417,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1375,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1329,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: [\" VAT  \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      className: \"text-center\",\n                      style: {\n                        width: \"50px\"\n                      },\n                      value: formData.vat_percent,\n                      onChange: e => {\n                        console.log(\"Inside onchange vat percent\");\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.vat_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"vat_percent\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.vat_percent = parseFloat(e.target.value);\n                          vatPrice = 0.00;\n                          setVatPrice(vatPrice);\n                          setFormData({ ...formData\n                          });\n                          errors[\"vat_percent\"] = \"Vat percent should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.vat_percent = \"\";\n                          vatPrice = 0.00;\n                          setVatPrice(vatPrice); //formData.discount_percent = 0.00;\n\n                          errors[\"vat_percent\"] = \"Invalid vat percent\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"vat_percent\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.vat_percent = e.target.value;\n                        reCalculate();\n                        setFormData({ ...formData\n                        });\n                        console.log(formData);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1425,\n                      columnNumber: 64\n                    }, this), \"%\", errors.vat_percent && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.vat_percent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1466,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1425,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: vatPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1472,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1471,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1423,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Net Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1483,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: netTotal,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1485,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1484,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1481,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1266,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1265,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Status*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.status,\n                onChange: e => {\n                  console.log(\"Inside onchange status\");\n\n                  if (!e.target.value) {\n                    formData.status = \"\";\n                    setFormData({ ...formData\n                    });\n                    errors[\"status\"] = \"Invalid Status\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"status\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.status = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"created\",\n                  children: \"Created\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1524,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"delivered\",\n                  children: \"Delivered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1525,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pending\",\n                  children: \"Pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1526,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"accepted\",\n                  children: \"Accepted\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1527,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"rejected\",\n                  children: \"Rejected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1528,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cancelled\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1529,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1503,\n                columnNumber: 17\n              }, this), errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1533,\n                  columnNumber: 21\n                }, this), errors.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1532,\n                columnNumber: 19\n              }, this), formData.status && !errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1539,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1538,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1502,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1499,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Date*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1547,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: \"date_str\",\n                selected: formData.date_str ? new Date(formData.date_str) : null,\n                value: formData.date_str ? format(new Date(formData.date_str), \"MMMM d, yyyy h:mm aa\") : null,\n                className: \"form-control\",\n                dateFormat: \"MMMM d, yyyy h:mm aa\",\n                showTimeSelect: true,\n                timeIntervals: \"1\",\n                onChange: value => {\n                  console.log(\"Value\", value);\n                  formData.date_str = value; // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n\n                  setFormData({ ...formData\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1550,\n                columnNumber: 33\n              }, this), errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1571,\n                  columnNumber: 41\n                }, this), errors.date_str]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1570,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1549,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1579,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleCreate,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n                as: \"span\",\n                animation: \"border\",\n                size: \"sm\",\n                role: \"status\",\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1584,\n                columnNumber: 19\n              }, this) + \" Processing...\" : formData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1582,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1578,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 939,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 938,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 892,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}, \"tKYKlAjd+a8TLMa4VvbPb1M7p7k=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = QuotationCreate;\nexport default QuotationCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"QuotationCreate$forwardRef\");\n$RefreshReg$(_c2, \"QuotationCreate\");","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","QuotationPreview","Modal","Button","Form","StoreCreate","CustomerCreate","ProductCreate","UserCreate","SignatureCreate","Cookies","Typeahead","NumberFormat","DatePicker","format","Spinner","QuotationView","ProductView","DebounceInput","QuotationCreate","props","ref","open","id","formData","vat_percent","discount","discountValue","discount_percent","shipping_handling_fees","is_discount_percent","date_str","Date","signature_date_str","status","price_type","selectedProducts","setSelectedProducts","selectedStores","setSelectedStores","selectedCustomers","setSelectedCustomers","selectedDeliveredByUsers","setSelectedDeliveredByUsers","selectedDeliveredBySignatures","setSelectedDeliveredBySignatures","reCalculate","cookies","get","name","delivered_by","setFormData","store_id","store_name","getQuotation","SetShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","selectedDate","errors","setErrors","isProcessing","setProcessing","storeOptions","setStoreOptions","isStoresLoading","setIsStoresLoading","customerOptions","setCustomerOptions","isCustomersLoading","setIsCustomersLoading","productOptions","setProductOptions","selectedProduct","setSelectedProduct","isProductsLoading","setIsProductsLoading","deliveredByUserOptions","setDeliveredByUserOptions","isDeliveredByUsersLoading","setIsDeliveredByUsersLoading","deliveredBySignatureOptions","setDeliveredBySignatureOptions","isDeliveredBySignaturesLoading","setIsDeliveredBySignaturesLoading","show","handleClose","at","window","location","requestOptions","method","headers","fetch","then","response","isJson","data","json","ok","error","Promise","reject","quotation","result","customer_id","date","delivered_by_signature_id","products","customer_name","search_label","delivered_by_name","delivered_by_signature_name","catch","ObjectToSearchQueryParams","object","Object","keys","map","key","encodeURIComponent","join","suggestStores","searchTerm","params","queryString","Authorization","Select","suggestCustomers","GetProductUnitPriceInStore","storeId","productStores","i","length","retail_unit_price","GetProductPurchaseUnitPriceInStore","unitPriceListArray","purchase_unit_price","openProductSearchResult","setOpenProductSearchResult","suggestProducts","getProductByBarCode","barcode","slice","product","addProduct","suggestUsers","suggestSignatures","handleCreate","push","product_id","name_in_arabic","quantity","parseFloat","unit_price","unit","part_number","endPoint","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","isProductAdded","productID","unitPrice","stores","alreadyAdded","getProductIndex","item","item_code","removeProduct","splice","totalPrice","setTotalPrice","findTotalPrice","toFixed","vatPrice","setVatPrice","findVatPrice","netTotal","setNetTotal","findNetTotal","discountPercent","setDiscountPercent","findDiscountPercent","findDiscount","StoreCreateFormRef","openStoreCreateForm","current","CustomerCreateFormRef","openCustomerCreateForm","ProductCreateFormRef","openProductCreateForm","openProductUpdateForm","UserCreateFormRef","openUserCreateForm","SignatureCreateFormRef","openSignatureCreateForm","ProductDetailsViewRef","openProductDetailsView","PreviewRef","openPreview","model","parse","net_total","vat_price","total","selectedItems","e","toString","color","value","bar_code","overflowX","maxHeight","overflowY","width","cursor","textDecoration","reverse"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport QuotationPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport QuotationView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { DebounceInput } from 'react-debounce-input';\n\nconst QuotationCreate = forwardRef((props, ref) => {\n\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        shipping_handling_fees: 0.00,\n        is_discount_percent: false,\n        date_str: format(new Date(), \"MMM dd yyyy\"),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"delivered\",\n        price_type: \"retail\",\n      };\n\n      selectedProducts = [];\n      setSelectedProducts([]);\n\n      selectedStores = [];\n      setSelectedStores([]);\n\n      selectedCustomers = [];\n      setSelectedCustomers([]);\n\n      selectedDeliveredByUsers = [];\n      setSelectedDeliveredByUsers([]);\n\n      selectedDeliveredBySignatures = [];\n      setSelectedDeliveredBySignatures([]);\n\n      reCalculate();\n\n      if (cookies.get(\"user_id\")) {\n        selectedDeliveredByUsers = [{\n          id: cookies.get(\"user_id\"),\n          name: cookies.get(\"user_name\"),\n        }];\n        formData.delivered_by = cookies.get(\"user_id\");\n        setFormData({ ...formData });\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      }\n      if (cookies.get('store_id')) {\n        formData.store_id = cookies.get('store_id');\n        formData.store_name = cookies.get('store_name');\n      }\n\n      setFormData({ ...formData });\n      if (id) {\n        getQuotation(id);\n      }\n      SetShow(true);\n    },\n\n\n  }));\n\n\n  useEffect(() => {\n    const listener = event => {\n        if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n            console.log(\"Enter key was pressed. Run your function-order.123\");\n            // event.preventDefault();\n\n\n\n            var form = event.target.form;\n            if (form && event.target) {\n                var index = Array.prototype.indexOf.call(form, event.target);\n                if (form && form.elements[index + 1]) {\n                    if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n                        form.elements[index].focus();\n                    } else {\n                        form.elements[index + 1].focus();\n                    }\n                    event.preventDefault();\n                }\n            }\n        }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n        document.removeEventListener(\"keydown\", listener);\n    };\n}, []);\n\n\n  const selectedDate = new Date();\n\n  //const history = useHistory();\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies();\n\n  //fields\n  let [formData, setFormData] = useState({\n    vat_percent: 15.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    date_str: format(new Date(), \"MMM dd yyyy\"),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"created\",\n    price_type: \"retail\",\n    is_discount_percent: false,\n  });\n\n\n  //Store Auto Suggestion\n  const [storeOptions, setStoreOptions] = useState([]);\n  let [selectedStores, setSelectedStores] = useState([]);\n  const [isStoresLoading, setIsStoresLoading] = useState(false);\n\n  //Customer Auto Suggestion\n  const [customerOptions, setCustomerOptions] = useState([]);\n  let [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isCustomersLoading, setIsCustomersLoading] = useState(false);\n\n  //Product Auto Suggestion\n  let [productOptions, setProductOptions] = useState([]);\n  let [selectedProduct, setSelectedProduct] = useState([]);\n  let [selectedProducts, setSelectedProducts] = useState([]);\n  const [isProductsLoading, setIsProductsLoading] = useState(false);\n\n  //Delivered By Auto Suggestion\n  const [deliveredByUserOptions, setDeliveredByUserOptions] = useState([]);\n  let [selectedDeliveredByUsers, setSelectedDeliveredByUsers] = useState([]);\n  const [isDeliveredByUsersLoading, setIsDeliveredByUsersLoading] =\n    useState(false);\n\n  //Delivered By Signature Auto Suggestion\n  const [deliveredBySignatureOptions, setDeliveredBySignatureOptions] =\n    useState([]);\n  let [selectedDeliveredBySignatures, setSelectedDeliveredBySignatures] =\n    useState([]);\n  const [isDeliveredBySignaturesLoading, setIsDeliveredBySignaturesLoading] =\n    useState(false);\n\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n    if (!at) {\n      // history.push(\"/dashboard/quotations\");\n      window.location = \"/\";\n    }\n  });\n\n\n  function getQuotation(id) {\n    console.log(\"inside get Quotation\");\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': cookies.get('access_token'),\n      },\n    };\n\n    fetch('/v1/quotation/' + id, requestOptions)\n      .then(async response => {\n        const isJson = response.headers.get('content-type')?.includes('application/json');\n        const data = isJson && await response.json();\n\n        // check for error response\n        if (!response.ok) {\n          const error = (data && data.errors);\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n\n        console.log(\"Response:\");\n        console.log(data);\n\n        let quotation = data.result;\n        formData = {\n          id: quotation.id,\n          code: quotation.code,\n          store_id: quotation.store_id,\n          customer_id: quotation.customer_id,\n         // date_str: quotation.date_str,\n          date: quotation.date,\n          vat_percent: quotation.vat_percent,\n          discount: quotation.discount,\n          discount_percent: quotation.discount_percent,\n          status: quotation.status,\n          delivered_by: quotation.delivered_by,\n          delivered_by_signature_id: quotation.delivered_by_signature_id,\n          is_discount_percent: quotation.is_discount_percent,\n          shipping_handling_fees: quotation.shipping_handling_fees,\n        };\n        formData.date_str = data.result.date;\n\n        if (formData.is_discount_percent) {\n          formData.discountValue = formData.discount_percent;\n        } else {\n          formData.discountValue = formData.discount;\n        }\n\n        selectedProducts = quotation.products;\n        setSelectedProducts([...selectedProducts]);\n\n\n        let selectedStores = [\n          {\n            id: quotation.store_id,\n            name: quotation.store_name,\n          }\n        ];\n\n        let selectedCustomers = [\n          {\n            id: quotation.customer_id,\n            name: quotation.customer_name,\n            search_label: quotation.customer_name,\n          }\n        ];\n\n        let selectedDeliveredByUsers = [\n          {\n            id: quotation.delivered_by,\n            name: quotation.delivered_by_name\n          }\n        ];\n\n        if (quotation.delivered_by_signature_id) {\n          let selectedDeliveredBySignatures = [\n            {\n              id: quotation.delivered_by_signature_id,\n              name: quotation.delivered_by_signature_name,\n            }\n          ];\n          setSelectedDeliveredBySignatures([...selectedDeliveredBySignatures]);\n        }\n\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n\n        setSelectedStores([...selectedStores]);\n        setSelectedCustomers([...selectedCustomers]);\n\n\n        setFormData({ ...formData });\n\n        reCalculate();\n      })\n      .catch(error => {\n        setProcessing(false);\n        setErrors(error);\n      });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object)\n      .map(function (key) {\n        return `search[${key}]=` + encodeURIComponent(object[key]);\n      })\n      .join(\"&\");\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggestStores\");\n    setStoreOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsStoresLoading(true);\n    let result = await fetch(\n      \"/v1/store?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setStoreOptions(data.result);\n    setIsStoresLoading(false);\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n    setCustomerOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    setIsCustomersLoading(true);\n    let result = await fetch(\n      \"/v1/customer?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setCustomerOptions(data.result);\n    setIsCustomersLoading(false);\n  }\n\n  function GetProductUnitPriceInStore(storeId, productStores) {\n    if (!productStores) {\n      return \"\";\n    }\n\n    for (var i = 0; i < productStores.length; i++) {\n      console.log(\"productStores[i]:\", productStores[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (productStores[i].store_id === storeId) {\n        console.log(\"macthed\");\n        console.log(\n          \"productStores[i].retail_unit_price:\",\n          productStores[i].retail_unit_price\n        );\n        return productStores[i];\n      }\n    }\n    console.log(\"not matched\");\n    return \"\";\n  }\n\n  function GetProductPurchaseUnitPriceInStore(storeId, unitPriceListArray) {\n    if (!unitPriceListArray) {\n      return \"\";\n    }\n\n    for (var i = 0; i < unitPriceListArray.length; i++) {\n      console.log(\"unitPriceListArray[i]:\", unitPriceListArray[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (unitPriceListArray[i].store_id === storeId) {\n        return unitPriceListArray[i].purchase_unit_price;\n      } else {\n        console.log(\"not matched\");\n      }\n    }\n    return \"\";\n  }\n\n\n\n\n  let [openProductSearchResult, setOpenProductSearchResult] = useState(false);\n\n  async function suggestProducts(searchTerm) {\n    console.log(\"Inside handle suggestProducts\");\n    setProductOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n\n    if (cookies.get(\"store_id\")) {\n      params.store_id = cookies.get(\"store_id\");\n    }\n\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic\";\n    setIsProductsLoading(true);\n    let result = await fetch(\n      \"/v1/product?\" + Select + queryString + \"&limit=200\",\n      requestOptions\n    );\n    let data = await result.json();\n\n    let products = data.result;\n    if (!products || products.length === 0) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    openProductSearchResult = true;\n    setOpenProductSearchResult(true);\n    setProductOptions(products);\n    setIsProductsLoading(false);\n  }\n\n  async function getProductByBarCode(barcode) {\n    formData.barcode = barcode;\n    setFormData({ ...formData });\n    console.log(\"Inside getProductByBarCode\");\n    errors[\"bar_code\"] = \"\";\n    setErrors({ ...errors });\n\n    console.log(\"barcode:\" + formData.barcode);\n    if (!formData.barcode) {\n      return;\n    }\n\n    if (formData.barcode.length === 13) {\n      formData.barcode = formData.barcode.slice(0, -1);\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n\n    let Select = \"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";\n    let result = await fetch(\n      \"/v1/product/barcode/\" + formData.barcode + \"?\" + Select,\n      requestOptions\n    );\n    let data = await result.json();\n\n\n    let product = data.result;\n    if (product) {\n      addProduct(product);\n    } else {\n      errors[\"bar_code\"] = \"Invalid Barcode:\" + formData.barcode\n      setErrors({ ...errors });\n    }\n\n    formData.barcode = \"\";\n    setFormData({ ...formData });\n\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setDeliveredByUserOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredByUsersLoading(true);\n    let result = await fetch(\n      \"/v1/user?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredByUserOptions(data.result);\n    setIsDeliveredByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setDeliveredBySignatureOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredBySignaturesLoading(true);\n    let result = await fetch(\n      \"/v1/signature?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredBySignatureOptions(data.result);\n    setIsDeliveredBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n\n    formData.products = [];\n    for (var i = 0; i < selectedProducts.length; i++) {\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        name: selectedProducts[i].name,\n        name_in_arabic: selectedProducts[i].name_in_arabic,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        purchase_unit_price: parseFloat(selectedProducts[i].purchase_unit_price),\n        unit: selectedProducts[i].unit,\n        part_number: selectedProducts[i].part_number,\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n\n    if (cookies.get('store_id')) {\n      formData.store_id = cookies.get('store_id');\n    }\n\n    console.log(\"formData.discount:\", formData.discount);\n\n    let endPoint = \"/v1/quotation\";\n    let method = \"POST\";\n    if (formData.id) {\n      endPoint = \"/v1/quotation/\" + formData.id;\n      method = \"PUT\";\n    }\n\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        'Accept': 'application/json',\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n      body: JSON.stringify(formData),\n    };\n\n    console.log(\"formData:\", formData);\n\n    setProcessing(true);\n    fetch(endPoint, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = data && data.errors;\n          //const error = data.errors\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n        setProcessing(false);\n\n        console.log(\"Response:\");\n        console.log(data);\n        props.showToastMessage(\"Quotation Created Successfully!\", \"success\");\n        if (props.refreshList) {\n          props.refreshList();\n        }\n        handleClose();\n        props.openDetailsView(data.result.id);\n      })\n      .catch((error) => {\n        setProcessing(false);\n        console.log(\"Inside catch\");\n        console.log(error);\n        setErrors({ ...error });\n        console.error(\"There was an error!\", error);\n        props.showToastMessage(\"Error Creating Quotation!\", \"danger\");\n      });\n  }\n\n  function isProductAdded(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function addProduct(product) {\n    console.log(\"Inside Add product\");\n    if (!formData.store_id) {\n      errors.product_id = \"Please Select a Store and try again\";\n      setErrors({ ...errors });\n      return;\n    }\n\n\n    errors.product_id = \"\";\n    if (!product) {\n      errors.product_id = \"Invalid Product\";\n      setErrors({ ...errors });\n      return;\n    }\n\n    let unitPrice = GetProductUnitPriceInStore(\n      formData.store_id,\n      product.stores\n    );\n    product.unit_price = unitPrice.retail_unit_price;\n    product.purchase_unit_price = unitPrice.purchase_unit_price;\n\n    let alreadyAdded = false;\n    let index = -1;\n    let quantity = 0.00;\n    product.quantity = 1.00;\n\n    if (isProductAdded(product.id)) {\n      alreadyAdded = true;\n      index = getProductIndex(product.id);\n      quantity = parseFloat(selectedProducts[index].quantity + product.quantity);\n    } else {\n      quantity = parseFloat(product.quantity);\n    }\n\n    console.log(\"quantity:\", quantity);\n\n    errors.quantity = \"\";\n\n    if (alreadyAdded) {\n      selectedProducts[index].quantity = parseFloat(quantity);\n    }\n\n    if (!alreadyAdded) {\n      let item = {\n        product_id: product.id,\n        code: product.item_code,\n        part_number: product.part_number,\n        name: product.name,\n        quantity: product.quantity,\n        stores: product.stores,\n        unit: product.unit,\n      };\n\n      if (product.unit_price) {\n        item.unit_price = parseFloat(product.unit_price);\n        console.log(\"item.unit_price:\", item.unit_price);\n      }\n\n      if (product.purchase_unit_price) {\n        item.purchase_unit_price = parseFloat(product.purchase_unit_price);\n        console.log(\"item.purchase_unit_price\", item.purchase_unit_price);\n      }\n\n      selectedProducts.push(item);\n\n    }\n    console.log(\"selectedProducts:\", selectedProducts);\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  function getProductIndex(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return i;\n      }\n    }\n    return false;\n  }\n\n  function removeProduct(product) {\n    const index = selectedProducts.indexOf(product);\n    if (index > -1) {\n      selectedProducts.splice(index, 1);\n    }\n    setSelectedProducts([...selectedProducts]);\n\n    reCalculate();\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.00;\n    for (var i = 0; i < selectedProducts.length; i++) {\n      totalPrice +=\n        parseFloat(selectedProducts[i].unit_price) *\n        parseFloat(selectedProducts[i].quantity);\n    }\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [vatPrice, setVatPrice] = useState(0.00);\n\n  function findVatPrice() {\n    vatPrice = 0.00;\n    if (totalPrice > 0) {\n      vatPrice = (parseFloat((parseFloat(formData.vat_percent) / 100)) * (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount))).toFixed(2);;\n      console.log(\"vatPrice:\", vatPrice);\n    }\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.00);\n\n  function findNetTotal() {\n    netTotal = 0.00;\n    if (totalPrice > 0) {\n      netTotal = (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n    }\n    setNetTotal(netTotal);\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.00);\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n      setFormData({ ...formData });\n    }\n  }\n\n\n  function reCalculate() {\n    findTotalPrice();\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const StoreCreateFormRef = useRef();\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const CustomerCreateFormRef = useRef();\n  function openCustomerCreateForm() {\n    CustomerCreateFormRef.current.open();\n  }\n\n\n  const ProductCreateFormRef = useRef();\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const UserCreateFormRef = useRef();\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n\n  const SignatureCreateFormRef = useRef();\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n\n  const ProductDetailsViewRef = useRef();\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PreviewRef = useRef();\n  function openPreview() {\n    let model = {};\n    model = JSON.parse(JSON.stringify(formData));\n    model.products = selectedProducts;\n    model.net_total = netTotal;\n    model.vat_price = vatPrice;\n    model.total = totalPrice;\n\n    //setFormData({ ...formData });\n    PreviewRef.current.open(model);\n  }\n\n  return (\n    <>\n      <ProductView ref={ProductDetailsViewRef} openUpdateForm={openProductUpdateForm} openCreateForm={openProductCreateForm} />\n      <ProductCreate ref={ProductCreateFormRef} showToastMessage={props.showToastMessage} openDetailsView={openProductDetailsView} />\n\n      <QuotationPreview ref={PreviewRef} />\n\n      <StoreCreate ref={StoreCreateFormRef} showToastMessage={props.showToastMessage} />\n      <CustomerCreate ref={CustomerCreateFormRef} showToastMessage={props.showToastMessage} />\n      <UserCreate ref={UserCreateFormRef} showToastMessage={props.showToastMessage} />\n      <SignatureCreate ref={SignatureCreateFormRef} showToastMessage={props.showToastMessage} />\n      <Modal show={show} size=\"xl\" fullscreen onHide={handleClose} animation={false} backdrop=\"static\" scrollable={true}>\n        <Modal.Header>\n          <Modal.Title>\n            {formData.id ? \"Update Quotation #\" + formData.code : \"Create New Quotation\"}\n          </Modal.Title>\n\n\n          <div className=\"col align-self-end text-end\">\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;\n            {formData.id ? <Button variant=\"primary\" onClick={() => {\n              handleClose();\n              props.openDetailsView(formData.id);\n            }}>\n              <i className=\"bi bi-eye\"></i> View Detail\n            </Button> : \"\"}\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={handleCreate} >\n              {isProcessing ?\n                <Spinner\n                  as=\"span\"\n                  animation=\"border\"\n                  size=\"sm\"\n                  role=\"status\"\n                  aria-hidden={true}\n                /> + \" Creating...\"\n\n                : \"\"\n              }\n              {formData.id ? \"Update\" : \"Create\"}\n\n            </Button>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={handleClose}\n              aria-label=\"Close\"\n            ></button>\n          </div>\n        </Modal.Header>\n        <Modal.Body>\n          <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n            {!cookies.get('store_name') ? <div className=\"col-md-6\">\n              <label className=\"form-label\">Store*</label>\n\n              <div className=\"input-group mb-3\">\n                <Typeahead\n                  id=\"store_id\"\n                  labelKey=\"name\"\n                  isLoading={isStoresLoading}\n                  isInvalid={errors.store_id ? true : false}\n                  onChange={(selectedItems) => {\n                    errors.store_id = \"\";\n                    setErrors(errors);\n                    if (selectedItems.length === 0) {\n                      errors.store_id = \"Invalid Store selected\";\n                      setErrors(errors);\n                      formData.store_id = \"\";\n                      setFormData({ ...formData });\n                      setSelectedStores([]);\n                      return;\n                    }\n                    formData.store_id = selectedItems[0].id;\n                    setFormData({ ...formData });\n                    setSelectedStores(selectedItems);\n                    //SetPriceOfAllProducts(selectedItems[0].id);\n                  }}\n                  options={storeOptions}\n                  placeholder=\"Select Store\"\n                  selected={selectedStores}\n                  highlightOnlyResult={true}\n                  onInputChange={(searchTerm, e) => {\n                    suggestStores(searchTerm);\n                  }}\n                />\n\n                <Button hide={true.toString()} onClick={openStoreCreateForm} className=\"btn btn-outline-secondary btn-primary btn-sm\" type=\"button\" id=\"button-addon1\"> <i className=\"bi bi-plus-lg\"></i> New</Button>\n                <div style={{ color: \"red\" }}>\n                  <i className=\"bi x-lg\"> </i>\n                  {errors.store_id}\n                </div>\n                {formData.store_id && !errors.store_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div> : \"\"}\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Customer*</label>\n\n              <div className=\"input-group mb-3\">\n                <Typeahead\n                  id=\"customer_id\"\n                  labelKey=\"search_label\"\n                  isLoading={isCustomersLoading}\n                  isInvalid={errors.customer_id ? true : false}\n                  onChange={(selectedItems) => {\n                    errors.customer_id = \"\";\n                    setErrors(errors);\n                    if (selectedItems.length === 0) {\n                      errors.customer_id = \"Invalid Customer selected\";\n                      setErrors(errors);\n                      formData.customer_id = \"\";\n                      setFormData({ ...formData });\n                      setSelectedCustomers([]);\n                      return;\n                    }\n                    formData.customer_id = selectedItems[0].id;\n                    setFormData({ ...formData });\n                    setSelectedCustomers(selectedItems);\n                  }}\n                  options={customerOptions}\n                  placeholder=\"Type name or mob\"\n                  selected={selectedCustomers}\n                  highlightOnlyResult={true}\n                  onInputChange={(searchTerm, e) => {\n                    suggestCustomers(searchTerm);\n                  }}\n                />\n                <Button hide={true.toString()} onClick={openCustomerCreateForm} className=\"btn btn-outline-secondary btn-primary btn-sm\" type=\"button\" id=\"button-addon1\"> <i className=\"bi bi-plus-lg\"></i> New</Button>\n                {errors.customer_id && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.customer_id}\n                  </div>\n                )}\n                {formData.customer_id && !errors.customer_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Product Barcode Scan</label>\n\n              <div className=\"input-group mb-3\">\n                <DebounceInput\n                  minLength={3}\n                  debounceTimeout={500}\n                  placeholder=\"Scan Barcode\"\n                  className=\"form-control barcode\"\n                  value={formData.barcode}\n                  onChange={event => getProductByBarCode(event.target.value)} />\n                {errors.bar_code && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.bar_code}\n                  </div>\n                )}\n                {formData.bar_code && !errors.bar_code && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Product*</label>\n              <Typeahead\n                id=\"product_id\"\n                size=\"lg\"\n                labelKey=\"search_label\"\n                emptyLabel=\"\"\n                clearButton={true}\n                open={openProductSearchResult}\n                isLoading={isProductsLoading}\n                isInvalid={errors.product_id ? true : false}\n                onChange={(selectedItems) => {\n                  if (selectedItems.length === 0) {\n                    errors[\"product_id\"] = \"Invalid Product selected\";\n                    setErrors(errors);\n                    return;\n                  }\n                  errors[\"product_id\"] = \"\";\n                  setErrors({ ...errors });\n\n                  if (formData.store_id) {\n                    addProduct(selectedItems[0]);\n\n                  }\n                  setOpenProductSearchResult(false);\n                }}\n                options={productOptions}\n                selected={selectedProduct}\n                placeholder=\"Search By Part No. / Name / Name in Arabic\"\n                highlightOnlyResult={true}\n                onInputChange={(searchTerm, e) => {\n                  suggestProducts(searchTerm);\n                }}\n              />\n              <Button hide={true.toString()} onClick={openProductCreateForm} className=\"btn btn-outline-secondary btn-primary btn-sm\" type=\"button\" id=\"button-addon1\"> <i className=\"bi bi-plus-lg\"></i> New</Button>\n              {errors.product_id ? (\n                <div style={{ color: \"red\" }}>\n                  <i className=\"bi bi-x-lg\"> </i>\n                  {errors.product_id}\n                </div>\n              ) : null}\n              {selectedProduct[0] &&\n                selectedProduct[0].id &&\n                !errors.product_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n            </div>\n\n            <div className=\"table-responsive\" style={{ overflowX: \"auto\", maxHeight: \"400px\", overflowY: \"auto\" }}>\n              <table className=\"table table-striped table-sm table-bordered\">\n                <thead>\n                  <tr className=\"text-center\">\n                    <th style={{ width: \"3%\" }}>Remove</th>\n                    <th style={{ width: \"5%\" }}>SI No.</th>\n                    <th style={{ width: \"10%\" }}>Part No.</th>\n                    <th style={{ width: \"34%\" }} className=\"text-start\">Name</th>\n                    <th style={{ width: \"11%\" }}>Qty</th>\n                    <th style={{ width: \"11%\" }} >Purchase Unit Price</th>\n                    <th style={{ width: \"11%\" }}>Unit Price</th>\n                    <th style={{ width: \"15%\" }}>Price</th>\n\n                  </tr>\n                </thead>\n                <tbody>\n                  {selectedProducts.map((product, index) => (\n                    <tr key={index} className=\"text-center\">\n                      <td>\n                        <div\n                          style={{ color: \"red\", cursor: \"pointer\" }}\n                          onClick={() => {\n                            removeProduct(product);\n                          }}\n                        >\n                          <i className=\"bi bi-x-lg\"> </i>\n                        </div>\n                      </td>\n                      <td>{index + 1}</td>\n                      <td>{product.part_number}</td>\n                      <td style={{\n                        textDecoration: \"underline\",\n                        color: \"blue\",\n                        cursor: \"pointer\",\n                      }}\n                        className=\"text-start\"\n                        onClick={() => {\n                          openProductDetailsView(product.product_id);\n                          console.log(\"okk,id:\", product.product_id);\n                        }}>{product.name}\n                      </td>\n                      <td style={{ width: \"155px\" }}>\n\n                        <div className=\"input-group mb-3\">\n                          <input type=\"number\" value={product.quantity} className=\"form-control\"\n\n                            placeholder=\"Quantity\" onChange={(e) => {\n                              errors[\"quantity_\" + index] = \"\";\n                              setErrors({ ...errors });\n                              if (!e.target.value) {\n                                errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                                selectedProducts[index].quantity = e.target.value;\n                                setSelectedProducts([...selectedProducts]);\n                                setErrors({ ...errors });\n                                console.log(\"errors:\", errors);\n                                return;\n                              }\n\n                              if (parseFloat(e.target.value) === 0) {\n                                errors[\"quantity_\" + index] = \"Quantity should be > 0\";\n                                selectedProducts[index].quantity = e.target.value;\n                                setSelectedProducts([...selectedProducts]);\n                                setErrors({ ...errors });\n                                console.log(\"errors:\", errors);\n                                return;\n                              }\n\n                              product.quantity = parseFloat(e.target.value);\n                              reCalculate();\n\n                              selectedProducts[index].quantity = parseFloat(e.target.value);\n                              console.log(\"selectedProducts[index].quantity:\", selectedProducts[index].quantity);\n                              setSelectedProducts([...selectedProducts]);\n                              reCalculate();\n\n                            }} />\n                          <span className=\"input-group-text\" id=\"basic-addon2\"> {selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"}</span>\n                        </div>\n                        {errors[\"quantity_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"quantity_\" + index]}\n                          </div>\n                        )}\n\n                      </td>\n                      <td style={{ width: \"150px\" }}>\n                        {product.purchase_unit_price ? <NumberFormat\n                          value={(product.purchase_unit_price).toFixed(2)}\n                          displayType={\"text\"}\n                          thousandSeparator={true}\n                          suffix={\" SAR\"}\n                          renderText={(value, props) => value}\n                        /> : \"\"}\n                      </td>\n                      <td style={{ width: \"180px\" }}>\n\n                        <div className=\"input-group mb-3\">\n                          <input type=\"number\" value={product.unit_price} className=\"form-control\"\n\n                            placeholder=\"Unit Price\" onChange={(e) => {\n                              errors[\"unit_price_\" + index] = \"\";\n                              setErrors({ ...errors });\n                              if (!e.target.value) {\n                                errors[\"unit_price_\" + index] = \"Invalid Unit Price\";\n                                selectedProducts[index].unit_price = parseFloat(e.target.value);\n                                setSelectedProducts([...selectedProducts]);\n                                setErrors({ ...errors });\n                                console.log(\"errors:\", errors);\n                                return;\n                              }\n\n                              if (parseFloat(e.target.value) === 0) {\n                                errors[\"unit_price_\" + index] = \"Unit Price shoudl be > 0\";\n                                selectedProducts[index].unit_price = parseFloat(e.target.value);\n                                setSelectedProducts([...selectedProducts]);\n                                setErrors({ ...errors });\n                                console.log(\"errors:\", errors);\n                                return;\n                              }\n\n                              selectedProducts[index].unit_price = parseFloat(e.target.value);\n                              console.log(\"selectedProducts[index].unit_price:\", selectedProducts[index].unit_price);\n                              setSelectedProducts([...selectedProducts]);\n                              reCalculate();\n\n                            }} />\n                          <span className=\"input-group-text\" id=\"basic-addon2\">SAR</span>\n                        </div>\n                        {errors[\"unit_price_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"unit_price_\" + index]}\n\n                          </div>\n                        )}\n                      </td>\n                      <td className=\"text-end\">\n                        <NumberFormat\n                          value={(product.unit_price * product.quantity).toFixed(2)}\n                          displayType={\"text\"}\n                          thousandSeparator={true}\n                          suffix={\" SAR\"}\n                          renderText={(value, props) => value}\n                        />\n                      </td>\n\n                    </tr>\n                  )).reverse()}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"table-responsive\">\n              <table className=\"table table-striped table-sm table-bordered\">\n                <tbody>\n                  <tr>\n\n\n                    <th colSpan=\"8\" className=\"text-end\">Total</th>\n                    <td className=\"text-end\" style={{ width: \"200px\" }} >\n                      <NumberFormat\n                        value={totalPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Shipping & Handling Fees\n                    </th>\n                    <td className=\"text-end\">\n                      <input type=\"number\" style={{ width: \"150px\" }} className=\"text-start\" value={formData.shipping_handling_fees} onChange={(e) => {\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          errors[\"shipping_handling_fees\"] = \"\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          errors[\"shipping_handling_fees\"] = \"Shipping / Handling Fees should be > 0\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.shipping_handling_fees = \"\";\n                          errors[\"shipping_handling_fees\"] = \"Invalid Shipping / Handling Fees\";\n                          setFormData({ ...formData });\n                          setErrors({ ...errors });\n                          return;\n                        }\n\n                        errors[\"shipping_handling_fees\"] = \"\";\n                        setErrors({ ...errors });\n\n                        formData.shipping_handling_fees = parseFloat(e.target.value);\n                        setFormData({ ...formData });\n                        reCalculate();\n                      }} />\n                      {\" SAR\"}\n                      {errors.shipping_handling_fees && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.shipping_handling_fees}\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Discount  <input type=\"number\" style={{ width: \"50px\" }} className=\"text-start\" value={formData.discount_percent} onChange={(e) => {\n                        formData.is_discount_percent = true;\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          formData.discount = 0.00;\n                          setFormData({ ...formData });\n                          errors[\"discount_percent\"] = \"Discount percent should be >= 0\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount_percent = \"\";\n                          formData.discount = 0.00;\n                          errors[\"discount_percent\"] = \"Invalid Discount Percent\";\n                          setFormData({ ...formData });\n                          setErrors({ ...errors });\n                          return;\n                        }\n\n                        errors[\"discount_percent\"] = \"\";\n                        errors[\"discount\"] = \"\";\n                        setErrors({ ...errors });\n\n                        formData.discount_percent = parseFloat(e.target.value);\n                        setFormData({ ...formData });\n                        reCalculate();\n                      }} />{\"%\"}\n                      {errors.discount_percent && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.discount_percent}\n                        </div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <input type=\"number\" style={{ width: \"150px\" }} className=\"text-start\" value={formData.discount} onChange={(e) => {\n                        formData.is_discount_percent = false;\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          errors[\"discount\"] = \"\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          formData.discount_percent = 0.00;\n                          setFormData({ ...formData });\n                          errors[\"discount\"] = \"Discount should be >= 0\";\n                          setErrors({ ...errors });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount = \"\";\n                          formData.discount_percent = 0.00;\n                          errors[\"discount\"] = \"Invalid Discount\";\n                          setFormData({ ...formData });\n                          reCalculate();\n                          setErrors({ ...errors });\n                          return;\n                        }\n\n                        errors[\"discount\"] = \"\";\n                        errors[\"discount_percent\"] = \"\";\n                        setErrors({ ...errors });\n\n                        formData.discount = parseFloat(e.target.value);\n                        setFormData({ ...formData });\n                        reCalculate();\n                      }} />\n                      {\" SAR\"}\n                      {errors.discount && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.discount}\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n\n                    <th colSpan=\"8\" className=\"text-end\"> VAT  <input type=\"number\" className=\"text-center\" style={{ width: \"50px\" }} value={formData.vat_percent} onChange={(e) => {\n                      console.log(\"Inside onchange vat percent\");\n                      if (parseFloat(e.target.value) === 0) {\n                        formData.vat_percent = parseFloat(e.target.value);\n                        setFormData({ ...formData });\n                        errors[\"vat_percent\"] = \"\";\n                        setErrors({ ...errors });\n                        reCalculate();\n                        return;\n                      }\n                      if (parseFloat(e.target.value) < 0) {\n                        formData.vat_percent = parseFloat(e.target.value);\n                        vatPrice = 0.00;\n                        setVatPrice(vatPrice);\n                        setFormData({ ...formData });\n                        errors[\"vat_percent\"] = \"Vat percent should be >= 0\";\n                        setErrors({ ...errors });\n                        reCalculate();\n                        return;\n                      }\n\n\n                      if (!e.target.value) {\n                        formData.vat_percent = \"\";\n                        vatPrice = 0.00;\n                        setVatPrice(vatPrice);\n                        //formData.discount_percent = 0.00;\n                        errors[\"vat_percent\"] = \"Invalid vat percent\";\n                        setFormData({ ...formData });\n                        setErrors({ ...errors });\n                        return;\n                      }\n                      errors[\"vat_percent\"] = \"\";\n                      setErrors({ ...errors });\n\n                      formData.vat_percent = e.target.value;\n                      reCalculate();\n                      setFormData({ ...formData });\n                      console.log(formData);\n                    }} />{\"%\"}\n                      {errors.vat_percent && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.vat_percent}\n                        </div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <NumberFormat\n                        value={vatPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n\n                    <th colSpan=\"8\" className=\"text-end\">Net Total</th>\n                    <th className=\"text-end\">\n                      <NumberFormat\n                        value={netTotal}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </th>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Status*</label>\n\n              <div className=\"input-group mb-3\">\n                <select\n                  value={formData.status}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange status\");\n                    if (!e.target.value) {\n                      formData.status = \"\";\n                      setFormData({ ...formData });\n                      errors[\"status\"] = \"Invalid Status\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"status\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.status = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                >\n                  <option value=\"created\">Created</option>\n                  <option value=\"delivered\">Delivered</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"accepted\">Accepted</option>\n                  <option value=\"rejected\">Rejected</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                </select>\n                {errors.status && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.status}\n                  </div>\n                )}\n                {formData.status && !errors.status && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n                            <label className=\"form-label\">Date*</label>\n\n                            <div className=\"input-group mb-3\">\n                                <DatePicker\n                                    id=\"date_str\"\n                                    selected={formData.date_str ? new Date(formData.date_str) : null}\n                                    value={formData.date_str ? format(\n                                        new Date(formData.date_str),\n                                        \"MMMM d, yyyy h:mm aa\"\n                                    ) : null}\n                                    className=\"form-control\"\n                                    dateFormat=\"MMMM d, yyyy h:mm aa\"\n                                    showTimeSelect\n                                    timeIntervals=\"1\"\n                                    onChange={(value) => {\n                                        console.log(\"Value\", value);\n                                        formData.date_str = value;\n                                        // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n                                        setFormData({ ...formData });\n                                    }}\n                                />\n\n                                {errors.date_str && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.date_str}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={handleClose}>\n                Close\n              </Button>\n              <Button variant=\"primary\" onClick={handleCreate} >\n                {isProcessing ?\n                  <Spinner\n                    as=\"span\"\n                    animation=\"border\"\n                    size=\"sm\"\n                    role=\"status\"\n                    aria-hidden={true}\n                  /> + \" Processing...\"\n\n                  : formData.id ? \"Update\" : \"Create\"\n                }\n              </Button>\n            </Modal.Footer>\n          </form>\n        </Modal.Body>\n\n      </Modal>\n\n\n    </>\n  );\n});\n\nexport default QuotationCreate;\n"]},"metadata":{},"sourceType":"module"}