{"ast":null,"code":"var _jsxFileName = \"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/product/create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport Cookies from \"universal-cookie\";\nimport { Spinner } from \"react-bootstrap\";\nimport ProductView from \"./view.js\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport StoreCreate from \"../store/create.js\";\nimport ProductCategoryCreate from \"../product_category/create.js\";\nimport Resizer from \"react-image-file-resizer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductCreate = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      selectedCategories = [];\n      setSelectedCategories(selectedCategories);\n      formData = {\n        images_content: [],\n        unit: \"\",\n        item_code: \"\"\n      };\n      setFormData({\n        formData\n      });\n      getAllStores();\n\n      if (id) {\n        getProduct(id);\n      } else {//getAllStores();\n      }\n\n      SetShow(true);\n    }\n\n  }));\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-product.\"); // event.preventDefault();\n\n        var form = event.target.form;\n\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n\n            event.preventDefault();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  function resizeFIle(file, w, h, cb) {\n    Resizer.imageFileResizer(file, w, h, \"JPEG\", 100, 0, uri => {\n      cb(uri);\n    }, \"base64\");\n  }\n\n  let [selectedImage, setSelectedImage] = useState(\"\");\n  let [productStores, setProductStores] = useState([]);\n  let [storeOptions, setStoreOptions] = useState([]);\n  let [selectedCategories, setSelectedCategories] = useState([]);\n  let [categoryOptions, setCategoryOptions] = useState([]);\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies(); //fields\n\n  let [formData, setFormData] = useState({\n    images_content: [],\n    unit: \"\",\n    item_code: \"\"\n  });\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  function getProduct(id) {\n    console.log(\"inside get Product\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    fetch(\"/v1/product/\" + id, requestOptions).then(async response => {\n      var _response$headers$get;\n\n      const isJson = (_response$headers$get = response.headers.get(\"content-type\")) === null || _response$headers$get === void 0 ? void 0 : _response$headers$get.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let categoryIds = data.result.category_id;\n      let categoryNames = data.result.category_name;\n      selectedCategories = [];\n\n      if (categoryIds && categoryNames) {\n        for (var i = 0; i < categoryIds.length; i++) {\n          selectedCategories.push({\n            id: categoryIds[i],\n            name: categoryNames[i]\n          });\n        }\n      }\n\n      if (data.result.stores) {\n        if (cookies.get('store_id')) {\n          let stores1 = data.result.stores.filter(store => store.store_id == cookies.get('store_id'));\n\n          if (stores1.length > 0) {\n            productStores = stores1;\n            setProductStores([...productStores]);\n          }\n        } else {\n          console.log(\"data.result.stores:\", data.result.stores); // productStores.push(data.result.stores);\n\n          let i = 0;\n\n          for (let store of data.result.stores) {\n            if (productStores[i].store_id == store.store_id) {\n              productStores[i].purchase_unit_price = store.purchase_unit_price;\n              productStores[i].wholesale_unit_price = store.wholesale_unit_price;\n              productStores[i].retail_unit_price = store.retail_unit_price;\n              productStores[i].stock = store.stock;\n            }\n          }\n\n          setProductStores([...productStores]);\n          console.log(\"productStores:\", productStores);\n          /*\n           store_id: stores[i].id,\n          store_name: stores[i].name,\n          purchase_unit_price: \"\",\n          retail_unit_price: \"\",\n          wholesale_unit_price: \"\",\n          stock: \"\",\n           */\n        }\n      }\n\n      setSelectedCategories(selectedCategories);\n      formData = data.result;\n      formData.name = data.result.name;\n\n      if (!formData.unit) {\n        formData.unit = \"\";\n      }\n\n      formData.images_content = [];\n      formData.useLaserScanner = false;\n      setFormData({ ...formData\n      });\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n\n  async function suggestCategories(searchTerm) {\n    console.log(\"Inside handle suggest Categories\");\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    let result = await fetch(\"/v1/product-category?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setCategoryOptions(data.result);\n  }\n\n  let [stores, setStores] = useState([]);\n\n  async function getAllStores() {\n    console.log(\"fetching all stores\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    let result = await fetch(\"/v1/store?\" + Select, requestOptions);\n    let data = await result.json();\n    stores = data.result;\n    setStores(data.result);\n    productStores = [];\n\n    for (let i = 0; i < stores.length; i++) {\n      if (cookies.get(\"store_id\") && cookies.get(\"store_id\") == stores[i].id) {\n        productStores.push({\n          store_id: stores[i].id,\n          store_name: stores[i].name,\n          purchase_unit_price: \"\",\n          retail_unit_price: \"\",\n          wholesale_unit_price: \"\",\n          stock: \"\"\n        });\n      } else if (!cookies.get(\"store_id\")) {\n        productStores.push({\n          store_id: stores[i].id,\n          store_name: stores[i].name,\n          purchase_unit_price: \"\",\n          retail_unit_price: \"\",\n          wholesale_unit_price: \"\",\n          stock: \"\"\n        });\n      }\n    }\n\n    setProductStores([...productStores]);\n    console.log(\"productStores:\", productStores);\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggest Stores\");\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    let result = await fetch(\"/v1/store?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setStoreOptions(data.result);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n\n    if (!at) {\n      window.location = \"/\";\n    }\n  });\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object).map(function (key) {\n      return `search[${key}]=${object[key]}`;\n    }).join(\"&\");\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    formData.category_id = [];\n\n    for (var i = 0; i < selectedCategories.length; i++) {\n      formData.category_id.push(selectedCategories[i].id);\n    }\n\n    console.log(\"productStores:\", productStores);\n    let storesData = [];\n\n    for (let i = 0; i < productStores.length; i++) {\n      storesData.push({\n        \"store_id\": productStores[i].store_id,\n        \"store_name\": productStores[i].store_name,\n        \"retail_unit_price\": productStores[i].retail_unit_price ? productStores[i].retail_unit_price : 0,\n        \"wholesale_unit_price\": productStores[i].wholesale_unit_price ? productStores[i].wholesale_unit_price : 0,\n        \"purchase_unit_price\": productStores[i].purchase_unit_price ? productStores[i].purchase_unit_price : 0,\n        \"stock\": productStores[i].stock ? productStores[i].stock : 0\n      });\n    }\n\n    formData.stores = storesData;\n\n    if (cookies.get(\"store_id\")) {\n      formData.store_id = cookies.get(\"store_id\");\n    }\n\n    console.log(\"Formdata:\", formData);\n    let endPoint = \"/v1/product\";\n    let method = \"POST\";\n\n    if (formData.id) {\n      endPoint = \"/v1/product/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      },\n      body: JSON.stringify(formData)\n    };\n    setProcessing(true);\n    fetch(endPoint, requestOptions).then(async response => {\n      var _response$headers$get2;\n\n      const isJson = (_response$headers$get2 = response.headers.get(\"content-type\")) === null || _response$headers$get2 === void 0 ? void 0 : _response$headers$get2.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.errors; //const error = data.errors\n\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      setProcessing(false);\n      console.log(\"Response:\");\n      console.log(data);\n      props.showToastMessage(\"Product Created Successfully!\", \"success\");\n\n      if (props.refreshList) {\n        props.refreshList();\n      }\n\n      handleClose();\n      props.openDetailsView(data.result.id);\n    }).catch(error => {\n      setProcessing(false);\n      console.log(\"Inside catch\");\n      console.log(error);\n      setErrors({ ...error\n      });\n      console.error(\"There was an error!\", error);\n      props.showToastMessage(\"Error Creating Product!\", \"danger\");\n    });\n  }\n\n  function isStockAddedToStore(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function findStockIndexByStoreID(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function isUnitPriceAddedToStore(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function removeStock(productStore) {\n    const index = productStores.indexOf(productStore);\n\n    if (index > -1) {\n      productStores.splice(index, 1);\n    }\n\n    setProductStores([...productStores]);\n  }\n\n  function getTargetDimension(originaleWidth, originalHeight, targetWidth, targetHeight) {\n    let ratio = parseFloat(originaleWidth / originalHeight);\n    targetWidth = parseInt(targetHeight * ratio);\n    targetHeight = parseInt(targetWidth * ratio);\n    return {\n      targetWidth: targetWidth,\n      targetHeight: targetHeight\n    };\n  }\n  /*\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        console.log(\"id:\", id);\n        DetailsViewRef.current.open(id);\n    }\n    */\n\n\n  const StoreCreateFormRef = useRef();\n\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const ProductCategoryCreateFormRef = useRef();\n\n  function openProductCategoryCreateForm() {\n    ProductCategoryCreateFormRef.current.open();\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(StoreCreate, {\n      ref: StoreCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductCategoryCreate, {\n      ref: ProductCategoryCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      size: \"xl\",\n      onHide: handleClose,\n      animation: false,\n      backdrop: \"static\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: formData.id ? \"Update Product #\" + formData.name : \"Create New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col align-self-end text-end\",\n          children: [formData.id ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => {\n              handleClose();\n              props.openDetailsView(formData.id);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 17\n            }, this), \" View Detail\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 15\n          }, this) : \"\", \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleCreate,\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 21\n            }, this) + \" Creating...\" : \"\", formData.id ? \"Update\" : \"Create\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: handleClose,\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-3 needs-validation\",\n          onSubmit: handleCreate,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Name*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.name ? formData.name : \"\",\n                type: \"string\",\n                onChange: e => {\n                  errors[\"name\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.name = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"name\",\n                placeholder: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 17\n              }, this), errors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 21\n                }, this), errors.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), formData.name && !errors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Name In Arabic (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.name_in_arabic ? formData.name_in_arabic : \"\",\n                type: \"string\",\n                onChange: e => {\n                  errors[\"v\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.name_in_arabic = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"name_in_arabic\",\n                placeholder: \"Name In Arabic\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 17\n              }, this), errors.name_in_arabic && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 21\n                }, this), errors.name_in_arabic]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 19\n              }, this), formData.name_in_arabic && !errors.name_in_arabic && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 648,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Part Number(Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.part_number ? formData.part_number : \"\",\n                type: \"string\",\n                onChange: e => {\n                  errors[\"part_number\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.part_number = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"part_number\",\n                placeholder: \"Part Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 17\n              }, this), errors.part_number && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 21\n                }, this), errors.part_number]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this), formData.part_number && !errors.part_number && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 680,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Rack / Location (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: formData.rack ? formData.rack : \"\",\n                type: \"string\",\n                onChange: e => {\n                  errors[\"rack\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.rack = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                id: \"rack\",\n                placeholder: \"Rack/Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this), errors.rack && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 21\n                }, this), errors.rack]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 706,\n                columnNumber: 19\n              }, this), formData.rack && !errors.rack && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Categories*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n                id: \"category_id\",\n                labelKey: \"name\",\n                isInvalid: errors.category_id ? true : false,\n                onChange: selectedItems => {\n                  errors.category_id = \"\";\n                  setErrors(errors);\n\n                  if (selectedItems.length === 0) {\n                    errors.category_id = \"Invalid Category selected\";\n                    setErrors(errors);\n                    setFormData({ ...formData\n                    });\n                    setSelectedCategories([]);\n                    return;\n                  }\n\n                  setFormData({ ...formData\n                  });\n                  setSelectedCategories(selectedItems);\n                },\n                options: categoryOptions,\n                placeholder: \"Select Categories\",\n                selected: selectedCategories,\n                highlightOnlyResult: true,\n                onInputChange: (searchTerm, e) => {\n                  suggestCategories(searchTerm);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                hide: true.toString(),\n                onClick: openProductCategoryCreateForm,\n                className: \"btn btn-outline-secondary btn-primary btn-sm\",\n                type: \"button\",\n                id: \"button-addon1\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-plus-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 19\n                }, this), \" New\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 17\n              }, this), errors.category_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 761,\n                  columnNumber: 21\n                }, this), errors.category_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 19\n              }, this), formData.category_id && !errors.category_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 767,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 766,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Unit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control\",\n              value: formData.unit,\n              onChange: e => {\n                formData.unit = e.target.value;\n                console.log(\"Inside onchange price type:\", formData.unit);\n                setFormData({ ...formData\n                });\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"PC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"drum\",\n                children: \"Drum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"set\",\n                children: \"Set\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 787,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Kg\",\n                children: \"Kg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Meter(s)\",\n                children: \"Meter(s)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 789,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Gm\",\n                children: \"Gm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"L\",\n                children: \"Liter (L)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Gm\",\n                children: \"Gm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Mg\",\n                children: \"Mg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Unit Price & Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [!cookies.get('store_id') ? /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Store Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 802,\n                    columnNumber: 47\n                  }, this) : \"\", /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Purchase Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Wholesale Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 804,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Retail Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 805,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 806,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 801,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: stores.map((store, index) => {\n                  var _productStores$index, _productStores$index2, _productStores$index3, _productStores$index4, _productStores$index5, _productStores$index6, _productStores$index7, _productStores$index8, _productStores$index9, _productStores$index10, _productStores$index11, _productStores$index12, _productStores$index13, _productStores$index14, _productStores$index15;\n\n                  return !cookies.get('store_id') || store.id == cookies.get('store_id') ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"text-center\",\n                    children: [!cookies.get('store_id') ? /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"150px\"\n                      },\n                      children: store.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 812,\n                      columnNumber: 49\n                    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"150px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: ((_productStores$index = productStores[index]) === null || _productStores$index === void 0 ? void 0 : _productStores$index.purchase_unit_price) || ((_productStores$index2 = productStores[index]) === null || _productStores$index2 === void 0 ? void 0 : _productStores$index2.purchase_unit_price) == 0 ? (_productStores$index3 = productStores[index]) === null || _productStores$index3 === void 0 ? void 0 : _productStores$index3.purchase_unit_price : \"\",\n                        className: \"form-control\",\n                        placeholder: \"Purchase Unit Price\",\n                        onChange: e => {\n                          errors[\"purchase_unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            productStores[index].purchase_unit_price = \"\";\n                            setProductStores([...productStores]); // setErrors({ ...errors });\n\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            productStores[index].purchase_unit_price = \"\";\n                            setProductStores([...productStores]);\n                            errors[\"purchase_unit_price_\" + index] = \"Purchase Unit Price should not be < 0\";\n                            setErrors({ ...errors\n                            });\n                            return;\n                          }\n\n                          productStores[index].purchase_unit_price = parseFloat(e.target.value);\n                          setProductStores([...productStores]);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 814,\n                        columnNumber: 25\n                      }, this), \" \", errors[\"purchase_unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 850,\n                          columnNumber: 29\n                        }, this), errors[\"purchase_unit_price_\" + index]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 849,\n                        columnNumber: 27\n                      }, this), ((_productStores$index4 = productStores[index]) === null || _productStores$index4 === void 0 ? void 0 : _productStores$index4.purchase_unit_price) && !errors[\"purchase_unit_price_\" + index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"green\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-check-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 857,\n                          columnNumber: 29\n                        }, this), \"Looks good!\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 856,\n                        columnNumber: 27\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 813,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"150px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: ((_productStores$index5 = productStores[index]) === null || _productStores$index5 === void 0 ? void 0 : _productStores$index5.wholesale_unit_price) || ((_productStores$index6 = productStores[index]) === null || _productStores$index6 === void 0 ? void 0 : _productStores$index6.wholesale_unit_price) === 0 ? (_productStores$index7 = productStores[index]) === null || _productStores$index7 === void 0 ? void 0 : _productStores$index7.wholesale_unit_price : \"\",\n                        className: \"form-control\",\n                        placeholder: \"Wholesale Unit Price\",\n                        onChange: e => {\n                          errors[\"wholesale_unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            productStores[index].wholesale_unit_price = \"\";\n                            setProductStores([...productStores]);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            productStores[index].wholesale_unit_price = \"\";\n                            setProductStores([...productStores]);\n                            errors[\"wholesale_unit_price_\" + index] = \"Wholesale unit price should not be < 0\";\n                            setErrors({ ...errors\n                            });\n                            return;\n                          }\n\n                          productStores[index].wholesale_unit_price = parseFloat(e.target.value);\n                          setProductStores([...productStores]);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 863,\n                        columnNumber: 25\n                      }, this), errors[\"wholesale_unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 899,\n                          columnNumber: 29\n                        }, this), errors[\"wholesale_unit_price_\" + index]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 898,\n                        columnNumber: 27\n                      }, this), ((_productStores$index8 = productStores[index]) === null || _productStores$index8 === void 0 ? void 0 : _productStores$index8.wholesale_unit_price) && !errors[\"wholesale_unit_price_\" + index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"green\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-check-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 906,\n                          columnNumber: 29\n                        }, this), \"Looks good!\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 905,\n                        columnNumber: 27\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 862,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"150px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: ((_productStores$index9 = productStores[index]) === null || _productStores$index9 === void 0 ? void 0 : _productStores$index9.retail_unit_price) || ((_productStores$index10 = productStores[index]) === null || _productStores$index10 === void 0 ? void 0 : _productStores$index10.retail_unit_price) === 0 ? (_productStores$index11 = productStores[index]) === null || _productStores$index11 === void 0 ? void 0 : _productStores$index11.retail_unit_price : \"\",\n                        className: \"form-control\",\n                        placeholder: \"Retail Unit Price\",\n                        onChange: e => {\n                          errors[\"retail_unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            productStores[index].retail_unit_price = \"\";\n                            setProductStores([...productStores]);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            errors[\"retail_unit_price_\" + index] = \"Retail Unit Price should not be < 0\";\n                            productStores[index].retail_unit_price = \"\";\n                            setProductStores([...productStores]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          console.log(\"e.target.value:\", e.target.value);\n                          productStores[index].retail_unit_price = parseFloat(e.target.value);\n                          console.log(\"productStores[index].retail_unit_price:\", productStores[index].retail_unit_price);\n                          setProductStores([...productStores]);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 912,\n                        columnNumber: 25\n                      }, this), \" \", errors[\"retail_unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 952,\n                          columnNumber: 29\n                        }, this), errors[\"retail_unit_price_\" + index]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 951,\n                        columnNumber: 27\n                      }, this), ((_productStores$index12 = productStores[index]) === null || _productStores$index12 === void 0 ? void 0 : _productStores$index12.retail_unit_price) && !errors[\"retail_unit_price_\" + index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"green\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-check-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 959,\n                          columnNumber: 29\n                        }, this), \"Looks good!\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 958,\n                        columnNumber: 27\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 911,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        width: \"150px\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        value: ((_productStores$index13 = productStores[index]) === null || _productStores$index13 === void 0 ? void 0 : _productStores$index13.stock) || ((_productStores$index14 = productStores[index]) === null || _productStores$index14 === void 0 ? void 0 : _productStores$index14.stock) === 0 ? productStores[index].stock : \"\",\n                        type: \"number\",\n                        onChange: e => {\n                          errors[\"stock_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            productStores[index].stock = \"\";\n                            setProductStores([...productStores]); //errors[\"stock_\" + index] = \"Invalid Stock value\";\n                            //setErrors({ ...errors });\n\n                            return;\n                          }\n\n                          productStores[index].stock = parseFloat(e.target.value);\n                        },\n                        className: \"form-control\",\n                        id: \"stock\",\n                        placeholder: \"Stock\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 966,\n                        columnNumber: 25\n                      }, this), errors[\"stock_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"red\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-x-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 992,\n                          columnNumber: 29\n                        }, this), errors[\"stock_\" + index]]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 991,\n                        columnNumber: 27\n                      }, this), ((_productStores$index15 = productStores[index]) === null || _productStores$index15 === void 0 ? void 0 : _productStores$index15.stock) && !errors[\"stock_\" + index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: \"green\"\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bi bi-check-lg\",\n                          children: \" \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 999,\n                          columnNumber: 29\n                        }, this), \"Looks good!\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 998,\n                        columnNumber: 27\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 965,\n                      columnNumber: 23\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 811,\n                    columnNumber: 83\n                  }, this) : '';\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 799,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 798,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Image(Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: selectedImage ? selectedImage : \"\",\n                type: \"file\",\n                onChange: e => {\n                  errors[\"image\"] = \"\";\n                  setErrors({ ...errors\n                  });\n\n                  if (!e.target.value) {\n                    errors[\"image\"] = \"Invalid Image File\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  selectedImage = e.target.value;\n                  setSelectedImage(selectedImage);\n                  let file = document.querySelector(\"#image\").files[0];\n                  let targetHeight = 400;\n                  let targetWidth = 400;\n                  let url = URL.createObjectURL(file);\n                  let img = new Image();\n\n                  img.onload = function () {\n                    let originaleWidth = img.width;\n                    let originalHeight = img.height;\n                    let targetDimensions = getTargetDimension(originaleWidth, originalHeight, targetWidth, targetHeight);\n                    targetWidth = targetDimensions.targetWidth;\n                    targetHeight = targetDimensions.targetHeight;\n                    resizeFIle(file, targetWidth, targetHeight, result => {\n                      formData.images_content[0] = result;\n                      setFormData({ ...formData\n                      });\n                      console.log(\"formData.images_content[0]:\", formData.images_content[0]);\n                    });\n                  };\n\n                  img.src = url;\n                  /*\n                                      resizeFIle(file, (result) => {\n                                          if (!formData.images_content) {\n                                              formData.images_content = [];\n                                          }\n                                          formData.images_content[0] = result;\n                                          setFormData({ ...formData });\n                                                console.log(\"formData.images_content[0]:\", formData.images_content[0]);\n                                      });\n                                      */\n                },\n                className: \"form-control\",\n                id: \"image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1014,\n                columnNumber: 17\n              }, this), errors.image && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1080,\n                  columnNumber: 21\n                }, this), errors.image]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1079,\n                columnNumber: 19\n              }, this), formData.image && !errors.image && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1086,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1085,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1013,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1010,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleCreate,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n                as: \"span\",\n                animation: \"bproduct\",\n                size: \"sm\",\n                role: \"status\",\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1100,\n                columnNumber: 23\n              }, this) + \" Processing...\" : formData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1097,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1093,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}, \"DimK990AH4QnmfyWzNBXPOU6fQ0=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = ProductCreate;\nexport default ProductCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductCreate$forwardRef\");\n$RefreshReg$(_c2, \"ProductCreate\");","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/product/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","Modal","Button","Cookies","Spinner","ProductView","Typeahead","StoreCreate","ProductCategoryCreate","Resizer","ProductCreate","props","ref","open","id","selectedCategories","setSelectedCategories","formData","images_content","unit","item_code","setFormData","getAllStores","getProduct","SetShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","resizeFIle","file","w","h","cb","imageFileResizer","uri","selectedImage","setSelectedImage","productStores","setProductStores","storeOptions","setStoreOptions","categoryOptions","setCategoryOptions","errors","setErrors","isProcessing","setProcessing","cookies","show","handleClose","requestOptions","method","headers","Authorization","get","fetch","then","response","isJson","data","json","ok","error","Promise","reject","categoryIds","result","category_id","categoryNames","category_name","i","length","push","name","stores","stores1","filter","store","store_id","purchase_unit_price","wholesale_unit_price","retail_unit_price","stock","useLaserScanner","catch","suggestCategories","searchTerm","params","queryString","ObjectToSearchQueryParams","Select","setStores","store_name","suggestStores","at","window","location","object","Object","keys","map","key","join","handleCreate","storesData","endPoint","Accept","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","isStockAddedToStore","storeID","findStockIndexByStoreID","isUnitPriceAddedToStore","removeStock","productStore","splice","getTargetDimension","originaleWidth","originalHeight","targetWidth","targetHeight","ratio","parseFloat","parseInt","StoreCreateFormRef","openStoreCreateForm","current","ProductCategoryCreateFormRef","openProductCategoryCreateForm","e","value","color","name_in_arabic","part_number","rack","selectedItems","toString","overflowX","width","querySelector","files","url","URL","createObjectURL","img","Image","onload","height","targetDimensions","src","image"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport Cookies from \"universal-cookie\";\nimport { Spinner } from \"react-bootstrap\";\nimport ProductView from \"./view.js\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport StoreCreate from \"../store/create.js\";\nimport ProductCategoryCreate from \"../product_category/create.js\";\nimport Resizer from \"react-image-file-resizer\";\n\nconst ProductCreate = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      selectedCategories = [];\n      setSelectedCategories(selectedCategories);\n     \n\n\n      formData = {\n        images_content: [],\n        unit: \"\",\n        item_code: \"\",\n      };\n      setFormData({ formData });\n      getAllStores();\n\n      if (id) {\n        getProduct(id);\n      }else {\n        //getAllStores();\n      }\n\n      SetShow(true);\n    },\n  }));\n\n  useEffect(() => {\n    const listener = (event) => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-product.\");\n        // event.preventDefault();\n\n        var form = event.target.form;\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n            event.preventDefault();\n          }\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  function resizeFIle(file, w, h, cb) {\n    Resizer.imageFileResizer(\n      file,\n      w,\n      h,\n      \"JPEG\",\n      100,\n      0,\n      (uri) => {\n        cb(uri);\n      },\n      \"base64\"\n    );\n  }\n\n  let [selectedImage, setSelectedImage] = useState(\"\");\n  let [productStores, setProductStores] = useState([]);\n\n  let [storeOptions, setStoreOptions] = useState([]);\n\n  let [selectedCategories, setSelectedCategories] = useState([]);\n  let [categoryOptions, setCategoryOptions] = useState([]);\n\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies();\n\n  //fields\n  let [formData, setFormData] = useState({\n    images_content: [],\n    unit: \"\",\n    item_code: \"\",\n  });\n\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  function getProduct(id) {\n    console.log(\"inside get Product\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    fetch(\"/v1/product/\" + id, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          const error = data && data.errors;\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n\n        console.log(\"Response:\");\n        console.log(data);\n        let categoryIds = data.result.category_id;\n        let categoryNames = data.result.category_name;\n\n        selectedCategories = [];\n        if (categoryIds && categoryNames) {\n          for (var i = 0; i < categoryIds.length; i++) {\n            selectedCategories.push({\n              id: categoryIds[i],\n              name: categoryNames[i],\n            });\n          }\n        }\n\n        if (data.result.stores) {\n            if(cookies.get('store_id')){\n                 let stores1 = data.result.stores.filter((store)=>store.store_id==cookies.get('store_id'));\n                if(stores1.length>0){\n                    productStores= stores1;\n                    setProductStores([...productStores]);\n                }\n            }else {\n                console.log(\"data.result.stores:\",data.result.stores);\n               // productStores.push(data.result.stores);\n\n                let i=0;\n                for(let store of data.result.stores){\n                    if(productStores[i].store_id==store.store_id){\n                        productStores[i].purchase_unit_price= store.purchase_unit_price;\n                        productStores[i].wholesale_unit_price= store.wholesale_unit_price;\n                        productStores[i].retail_unit_price= store.retail_unit_price;\n                        productStores[i].stock= store.stock;\n                    }\n                }\n                setProductStores([...productStores]);\n                console.log(\"productStores:\",productStores);\n\n                /*\n                 store_id: stores[i].id,\n                store_name: stores[i].name,\n                purchase_unit_price: \"\",\n                retail_unit_price: \"\",\n                wholesale_unit_price: \"\",\n                stock: \"\",\n                 */\n            }\n        } \n\n        setSelectedCategories(selectedCategories);\n\n        formData = data.result;\n        formData.name = data.result.name;\n        if (!formData.unit) {\n          formData.unit = \"\";\n        }\n        formData.images_content = [];\n        formData.useLaserScanner = false;\n        setFormData({ ...formData });\n      })\n      .catch((error) => {\n        setProcessing(false);\n        setErrors(error);\n      });\n  }\n\n  async function suggestCategories(searchTerm) {\n    console.log(\"Inside handle suggest Categories\");\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    let result = await fetch(\n      \"/v1/product-category?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setCategoryOptions(data.result);\n  }\n\n  let [stores, setStores] = useState([]);\n\n  async function getAllStores() {\n    console.log(\"fetching all stores\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    let result = await fetch(\"/v1/store?\" + Select, requestOptions);\n    let data = await result.json();\n\n    stores = data.result;\n    setStores(data.result);\n    productStores = [];\n    for(let i=0; i<stores.length ;i++){\n        if(cookies.get(\"store_id\")&&cookies.get(\"store_id\")==stores[i].id){\n            productStores.push({\n                store_id: stores[i].id,\n                store_name: stores[i].name,\n                purchase_unit_price: \"\",\n                retail_unit_price: \"\",\n                wholesale_unit_price: \"\",\n                stock: \"\",\n              });\n\n        }else if(!cookies.get(\"store_id\")){\n            productStores.push({\n                store_id: stores[i].id,\n                store_name: stores[i].name,\n                purchase_unit_price: \"\",\n                retail_unit_price: \"\",\n                wholesale_unit_price: \"\",\n                stock: \"\",\n              });\n        }\n       \n    }\n\n    setProductStores([...productStores]);\n    console.log(\"productStores:\",productStores);\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggest Stores\");\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    let result = await fetch(\n      \"/v1/store?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setStoreOptions(data.result);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n    if (!at) {\n      window.location = \"/\";\n    }\n  });\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object)\n      .map(function (key) {\n        return `search[${key}]=${object[key]}`;\n      })\n      .join(\"&\");\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n\n    formData.category_id = [];\n    for (var i = 0; i < selectedCategories.length; i++) {\n      formData.category_id.push(selectedCategories[i].id);\n    }\n\n    console.log(\"productStores:\",productStores);\n\n   \n    let storesData =[];\n    for(let i=0;i<productStores.length;i++){\n        storesData.push({\n            \"store_id\": productStores[i].store_id,\n            \"store_name\": productStores[i].store_name,\n            \"retail_unit_price\": productStores[i].retail_unit_price?productStores[i].retail_unit_price:0,\n            \"wholesale_unit_price\": productStores[i].wholesale_unit_price?productStores[i].wholesale_unit_price:0,\n            \"purchase_unit_price\": productStores[i].purchase_unit_price?productStores[i].purchase_unit_price:0,\n            \"stock\": productStores[i].stock?productStores[i].stock:0,\n        });\n    }\n\n    formData.stores = storesData;\n\n    if (cookies.get(\"store_id\")) {\n      formData.store_id = cookies.get(\"store_id\");\n    }\n\n    console.log(\"Formdata:\",formData);\n\n    let endPoint = \"/v1/product\";\n    let method = \"POST\";\n    if (formData.id) {\n      endPoint = \"/v1/product/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n      body: JSON.stringify(formData),\n    };\n\n    setProcessing(true);\n    fetch(endPoint, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = data && data.errors;\n          //const error = data.errors\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n        setProcessing(false);\n\n        console.log(\"Response:\");\n        console.log(data);\n        props.showToastMessage(\"Product Created Successfully!\", \"success\");\n        if (props.refreshList) {\n          props.refreshList();\n        }\n\n        handleClose();\n        props.openDetailsView(data.result.id);\n      })\n      .catch((error) => {\n        setProcessing(false);\n        console.log(\"Inside catch\");\n        console.log(error);\n        setErrors({ ...error });\n        console.error(\"There was an error!\", error);\n        props.showToastMessage(\"Error Creating Product!\", \"danger\");\n      });\n  }\n\n  function isStockAddedToStore(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function findStockIndexByStoreID(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  function isUnitPriceAddedToStore(storeID) {\n    for (var i = 0; i < productStores.length; i++) {\n      if (productStores[i].store_id === storeID) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function removeStock(productStore) {\n    const index = productStores.indexOf(productStore);\n    if (index > -1) {\n      productStores.splice(index, 1);\n    }\n    setProductStores([...productStores]);\n  }\n\n\n  function getTargetDimension(\n    originaleWidth,\n    originalHeight,\n    targetWidth,\n    targetHeight\n  ) {\n    let ratio = parseFloat(originaleWidth / originalHeight);\n\n    targetWidth = parseInt(targetHeight * ratio);\n    targetHeight = parseInt(targetWidth * ratio);\n\n    return { targetWidth: targetWidth, targetHeight: targetHeight };\n  }\n\n  /*\n    const DetailsViewRef = useRef();\n    function openDetailsView(id) {\n        console.log(\"id:\", id);\n        DetailsViewRef.current.open(id);\n    }\n    */\n\n  const StoreCreateFormRef = useRef();\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const ProductCategoryCreateFormRef = useRef();\n  function openProductCategoryCreateForm() {\n    ProductCategoryCreateFormRef.current.open();\n  }\n\n  return (\n    <>\n      <StoreCreate\n        ref={StoreCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      {/*\n            <ProductView ref={DetailsViewRef} />\n            */}\n      <ProductCategoryCreate\n        ref={ProductCategoryCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n\n      <Modal\n        show={show}\n        size=\"xl\"\n        onHide={handleClose}\n        animation={false}\n        backdrop=\"static\"\n        scrollable={true}\n      >\n        <Modal.Header>\n          <Modal.Title>\n            {formData.id\n              ? \"Update Product #\" + formData.name\n              : \"Create New Product\"}\n          </Modal.Title>\n\n          <div className=\"col align-self-end text-end\">\n            {formData.id ? (\n              <Button\n                variant=\"primary\"\n                onClick={() => {\n                  handleClose();\n                  props.openDetailsView(formData.id);\n                }}\n              >\n                <i className=\"bi bi-eye\"></i> View Detail\n              </Button>\n            ) : (\n              \"\"\n            )}\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={handleCreate}>\n              {isProcessing\n                ? (\n                    <Spinner\n                      as=\"span\"\n                      animation=\"border\"\n                      size=\"sm\"\n                      role=\"status\"\n                      aria-hidden={true}\n                    />\n                  ) + \" Creating...\"\n                : \"\"}\n              {formData.id ? \"Update\" : \"Create\"}\n            </Button>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={handleClose}\n              aria-label=\"Close\"\n            ></button>\n          </div>\n        </Modal.Header>\n        <Modal.Body>\n          <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Name*</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  value={formData.name ? formData.name : \"\"}\n                  type=\"string\"\n                  onChange={(e) => {\n                    errors[\"name\"] = \"\";\n                    setErrors({ ...errors });\n                    formData.name = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                  id=\"name\"\n                  placeholder=\"Name\"\n                />\n                {errors.name && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.name}\n                  </div>\n                )}\n                {formData.name && !errors.name && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/*\n                        <div className=\"col-md-6\">\n                            <label className=\"form-label\">ean_12</label>\n\n                            <div className=\"input-group mb-3\">\n                                <input\n                                    value={formData.ean_12 ? formData.ean_12 : \"\"}\n                                    type='string'\n                                    onChange={(e) => {\n                                        errors[\"name\"] = \"\";\n                                        setErrors({ ...errors });\n                                        formData.ean_12 = e.target.value;\n                                        setFormData({ ...formData });\n                                        console.log(formData);\n                                    }}\n                                    className=\"form-control\"\n                                    id=\"ean_12\"\n                                    placeholder=\"ean_12\"\n                                />\n                                {errors.ean_12 && (\n                                    <div style={{ color: \"red\" }}>\n                                        <i className=\"bi bi-x-lg\"> </i>\n                                        {errors.ean_12}\n                                    </div>\n                                )}\n                                {formData.ean_12 && !errors.ean_12 && (\n                                    <div style={{ color: \"green\" }}>\n                                        <i className=\"bi bi-check-lg\"> </i>\n                                        Looks good!\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                                */}\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Name In Arabic (Optional)</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  value={formData.name_in_arabic ? formData.name_in_arabic : \"\"}\n                  type=\"string\"\n                  onChange={(e) => {\n                    errors[\"v\"] = \"\";\n                    setErrors({ ...errors });\n                    formData.name_in_arabic = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                  id=\"name_in_arabic\"\n                  placeholder=\"Name In Arabic\"\n                />\n                {errors.name_in_arabic && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.name_in_arabic}\n                  </div>\n                )}\n                {formData.name_in_arabic && !errors.name_in_arabic && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Part Number(Optional)</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  value={formData.part_number ? formData.part_number : \"\"}\n                  type=\"string\"\n                  onChange={(e) => {\n                    errors[\"part_number\"] = \"\";\n                    setErrors({ ...errors });\n                    formData.part_number = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                  id=\"part_number\"\n                  placeholder=\"Part Number\"\n                />\n                {errors.part_number && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.part_number}\n                  </div>\n                )}\n                {formData.part_number && !errors.part_number && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Rack / Location (Optional)</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  value={formData.rack ? formData.rack : \"\"}\n                  type=\"string\"\n                  onChange={(e) => {\n                    errors[\"rack\"] = \"\";\n                    setErrors({ ...errors });\n                    formData.rack = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                  id=\"rack\"\n                  placeholder=\"Rack/Location\"\n                />\n                {errors.rack && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.rack}\n                  </div>\n                )}\n                {formData.rack && !errors.rack && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Categories*</label>\n\n              <div className=\"input-group mb-3\">\n                <Typeahead\n                  id=\"category_id\"\n                  labelKey=\"name\"\n                  isInvalid={errors.category_id ? true : false}\n                  onChange={(selectedItems) => {\n                    errors.category_id = \"\";\n                    setErrors(errors);\n                    if (selectedItems.length === 0) {\n                      errors.category_id = \"Invalid Category selected\";\n                      setErrors(errors);\n                      setFormData({ ...formData });\n                      setSelectedCategories([]);\n                      return;\n                    }\n                    setFormData({ ...formData });\n                    setSelectedCategories(selectedItems);\n                  }}\n                  options={categoryOptions}\n                  placeholder=\"Select Categories\"\n                  selected={selectedCategories}\n                  highlightOnlyResult={true}\n                  onInputChange={(searchTerm, e) => {\n                    suggestCategories(searchTerm);\n                  }}\n                />\n                <Button\n                  hide={true.toString()}\n                  onClick={openProductCategoryCreateForm}\n                  className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                  type=\"button\"\n                  id=\"button-addon1\"\n                >\n                  {\" \"}\n                  <i className=\"bi bi-plus-lg\"></i> New\n                </Button>\n                {errors.category_id && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.category_id}\n                  </div>\n                )}\n                {formData.category_id && !errors.category_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-2\">\n              <label className=\"form-label\">Unit</label>\n              <select\n                className=\"form-control\"\n                value={formData.unit}\n                onChange={(e) => {\n                  formData.unit = e.target.value;\n                  console.log(\"Inside onchange price type:\", formData.unit);\n                  setFormData({ ...formData });\n                }}\n              >\n                <option value=\"\">PC</option>\n                <option value=\"drum\">Drum</option>\n                <option value=\"set\">Set</option>\n                <option value=\"Kg\">Kg</option>\n                <option value=\"Meter(s)\">Meter(s)</option>\n                <option value=\"Gm\">Gm</option>\n                <option value=\"L\">Liter (L)</option>\n                <option value=\"Gm\">Gm</option>\n                <option value=\"Mg\">Mg</option>\n              </select>\n            </div>\n\n            <h4>Unit Price & Stock</h4>\n            <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n              <table className=\"table table-striped table-sm table-bordered\">\n                <thead>\n                  <tr className=\"text-center\">\n                    {!cookies.get('store_id')?<th>Store Name</th>:\"\"}\n                    <th>Purchase Unit Price</th>\n                    <th>Wholesale Unit Price</th>\n                    <th>Retail Unit Price</th>\n                    <th>Stock</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {stores.map((store, index) => (\n                    !cookies.get('store_id') || store.id==cookies.get('store_id')?<tr key={index} className=\"text-center\">\n                      {!cookies.get('store_id')?<td style={{ width: \"150px\" }}>{store.name}</td>:\"\"}\n                      <td style={{ width: \"150px\" }}>\n                        <input\n                          type=\"number\"\n                          value={\n                            productStores[index]?.purchase_unit_price||productStores[index]?.purchase_unit_price==0\n                              ? productStores[index]?.purchase_unit_price\n                              : \"\"  \n                          }\n                          className=\"form-control\"\n                          placeholder=\"Purchase Unit Price\"\n                          onChange={(e) => {\n                            errors[\"purchase_unit_price_\" + index] = \"\";\n                            setErrors({ ...errors });\n\n                            if (!e.target.value) {\n                              productStores[index].purchase_unit_price = \"\";\n                              setProductStores([...productStores]);\n                             // setErrors({ ...errors });\n                              console.log(\"errors:\", errors);\n                              return;\n                            }\n                            if (parseFloat(e.target.value) < 0) {\n                                productStores[index].purchase_unit_price = \"\";\n                                setProductStores([...productStores]);\n\n                              errors[\"purchase_unit_price_\" + index] =\n                                \"Purchase Unit Price should not be < 0\";\n                                setErrors({ ...errors });\n                              return;\n                            }\n\n                            productStores[index].purchase_unit_price = parseFloat(e.target.value);\n                            setProductStores([...productStores]);\n                          }}\n                        />{\" \"}\n                        {errors[\"purchase_unit_price_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"purchase_unit_price_\" + index]}\n                          </div>\n                        )}\n                        {productStores[index]?.purchase_unit_price &&\n                        !errors[\"purchase_unit_price_\" + index] ? (\n                          <div style={{ color: \"green\" }}>\n                            <i className=\"bi bi-check-lg\"> </i>\n                            Looks good!\n                          </div>\n                        ) : null}\n                      </td>\n                      <td style={{ width: \"150px\" }}>\n                        <input\n                          type=\"number\"\n                          value={\n                            productStores[index]?.wholesale_unit_price||productStores[index]?.wholesale_unit_price === 0\n                              ? productStores[index]?.wholesale_unit_price\n                              : \"\"\n                          }\n                          className=\"form-control\"\n                          placeholder=\"Wholesale Unit Price\"\n                          onChange={(e) => {\n                            errors[\"wholesale_unit_price_\" + index] = \"\";\n                            setErrors({ ...errors });\n\n                            if (!e.target.value) {\n                              productStores[index].wholesale_unit_price = \"\";\n                              setProductStores([...productStores]);\n                              return;\n                            }\n\n                            if (parseFloat(e.target.value) < 0) {\n                                productStores[index].wholesale_unit_price = \"\";\n                                setProductStores([...productStores]);\n\n                              errors[\"wholesale_unit_price_\" + index] =\n                                \"Wholesale unit price should not be < 0\";\n                              setErrors({ ...errors });\n                              return;\n                            }\n\n                            productStores[index].wholesale_unit_price = parseFloat(e.target.value);\n                             \n                            setProductStores([...productStores]);\n                          }}\n                        />\n                        {errors[\"wholesale_unit_price_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"wholesale_unit_price_\" + index]}\n                          </div>\n                        )}\n                        {productStores[index]?.wholesale_unit_price &&\n                        !errors[\"wholesale_unit_price_\" + index] ? (\n                          <div style={{ color: \"green\" }}>\n                            <i className=\"bi bi-check-lg\"> </i>\n                            Looks good!\n                          </div>\n                        ) : null}\n                      </td>\n                      <td style={{ width: \"150px\" }}>\n                        <input\n                          type=\"number\"\n                          value={\n                            productStores[index]?.retail_unit_price||productStores[index]?.retail_unit_price===0\n                              ? productStores[index]?.retail_unit_price\n                              : \"\"\n                          }\n                          className=\"form-control\"\n                          placeholder=\"Retail Unit Price\"\n                          onChange={(e) => {\n                            errors[\"retail_unit_price_\" + index] = \"\";\n                            setErrors({ ...errors });\n                            if (!e.target.value) {\n                              productStores[index].retail_unit_price = \"\";\n                              setProductStores([...productStores]);\n                              return;\n                            }\n\n                            if (parseFloat(e.target.value) < 0) {\n                              errors[\"retail_unit_price_\" + index] =\n                                \"Retail Unit Price should not be < 0\";\n                              productStores[index].retail_unit_price = \"\";\n                    \n                              setProductStores([...productStores]);\n                              setErrors({ ...errors });\n                              console.log(\"errors:\", errors);\n                              return;\n                            }\n\n                            console.log(\"e.target.value:\",e.target.value);\n\n                            productStores[index].retail_unit_price = parseFloat(\n                              e.target.value\n                            );\n                            console.log(\"productStores[index].retail_unit_price:\",productStores[index].retail_unit_price);\n                            setProductStores([...productStores]);\n                          }}\n                        />{\" \"}\n                        {errors[\"retail_unit_price_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"retail_unit_price_\" + index]}\n                          </div>\n                        )}\n                        {productStores[index]?.retail_unit_price &&\n                        !errors[\"retail_unit_price_\" + index] ? (\n                          <div style={{ color: \"green\" }}>\n                            <i className=\"bi bi-check-lg\"> </i>\n                            Looks good!\n                          </div>\n                        ) : null}\n                      </td>\n\n                      <td style={{ width: \"150px\" }}>\n                        <input\n                          value={productStores[index]?.stock || productStores[index]?.stock===0\n                              ? productStores[index].stock\n                              : \"\"\n                          }\n                          type=\"number\"\n                          onChange={(e) => {\n                            errors[\"stock_\" + index] = \"\";\n                            setErrors({ ...errors });\n\n                            if (!e.target.value) {\n                                productStores[index].stock = \"\";\n                                setProductStores([...productStores]);\n                                //errors[\"stock_\" + index] = \"Invalid Stock value\";\n                                //setErrors({ ...errors });\n                                return;\n                            }\n\n                            productStores[index].stock = parseFloat(e.target.value);\n                          }}\n                          className=\"form-control\"\n                          id=\"stock\"\n                          placeholder=\"Stock\"\n                        />\n                        {errors[\"stock_\" + index] && (\n                          <div style={{ color: \"red\" }}>\n                            <i className=\"bi bi-x-lg\"> </i>\n                            {errors[\"stock_\" + index]}\n                          </div>\n                        )}\n                        {productStores[index]?.stock &&\n                        !errors[\"stock_\" + index] ? (\n                          <div style={{ color: \"green\" }}>\n                            <i className=\"bi bi-check-lg\"> </i>\n                            Looks good!\n                          </div>\n                        ) : null}\n                      </td>\n                    </tr>:''\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          \n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Image(Optional)</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  value={selectedImage ? selectedImage : \"\"}\n                  type=\"file\"\n                  onChange={(e) => {\n                    errors[\"image\"] = \"\";\n                    setErrors({ ...errors });\n\n                    if (!e.target.value) {\n                      errors[\"image\"] = \"Invalid Image File\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    selectedImage = e.target.value;\n                    setSelectedImage(selectedImage);\n\n                    let file = document.querySelector(\"#image\").files[0];\n\n                    let targetHeight = 400;\n                    let targetWidth = 400;\n\n                    let url = URL.createObjectURL(file);\n                    let img = new Image();\n\n                    img.onload = function () {\n                      let originaleWidth = img.width;\n                      let originalHeight = img.height;\n\n                      let targetDimensions = getTargetDimension(\n                        originaleWidth,\n                        originalHeight,\n                        targetWidth,\n                        targetHeight\n                      );\n                      targetWidth = targetDimensions.targetWidth;\n                      targetHeight = targetDimensions.targetHeight;\n\n                      resizeFIle(file, targetWidth, targetHeight, (result) => {\n                        formData.images_content[0] = result;\n                        setFormData({ ...formData });\n\n                        console.log(\n                          \"formData.images_content[0]:\",\n                          formData.images_content[0]\n                        );\n                      });\n                    };\n                    img.src = url;\n\n                    /*\n                                        resizeFIle(file, (result) => {\n                                            if (!formData.images_content) {\n                                                formData.images_content = [];\n                                            }\n                                            formData.images_content[0] = result;\n                                            setFormData({ ...formData });\n     \n                                            console.log(\"formData.images_content[0]:\", formData.images_content[0]);\n                                        });\n                                        */\n                  }}\n                  className=\"form-control\"\n                  id=\"image\"\n                />\n                {errors.image && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.image}\n                  </div>\n                )}\n                {formData.image && !errors.image && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={handleClose}>\n                Close\n              </Button>\n              <Button variant=\"primary\" onClick={handleCreate}>\n                {isProcessing\n                  ? (\n                      <Spinner\n                        as=\"span\"\n                        animation=\"bproduct\"\n                        size=\"sm\"\n                        role=\"status\"\n                        aria-hidden={true}\n                      />\n                    ) + \" Processing...\"\n                  : formData.id\n                  ? \"Update\"\n                  : \"Create\"}\n              </Button>\n            </Modal.Footer>\n          </form>\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n});\n\nexport default ProductCreate;\n"]},"metadata":{},"sourceType":"module"}