{"ast":null,"code":"var _jsxFileName = \"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport QuotationPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport QuotationView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { DebounceInput } from \"react-debounce-input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QuotationCreate = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        shipping_handling_fees: 0.0,\n        is_discount_percent: false,\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"delivered\",\n        price_type: \"retail\",\n        delivery_days: 7,\n        validity_days: 2\n      };\n      selectedProducts = [];\n      setSelectedProducts([]);\n      selectedStores = [];\n      setSelectedStores([]);\n      selectedCustomers = [];\n      setSelectedCustomers([]);\n      selectedDeliveredByUsers = [];\n      setSelectedDeliveredByUsers([]);\n      selectedDeliveredBySignatures = [];\n      setSelectedDeliveredBySignatures([]);\n      reCalculate();\n\n      if (cookies.get(\"user_id\")) {\n        selectedDeliveredByUsers = [{\n          id: cookies.get(\"user_id\"),\n          name: cookies.get(\"user_name\")\n        }];\n        formData.delivered_by = cookies.get(\"user_id\");\n        setFormData({ ...formData\n        });\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      }\n\n      if (cookies.get(\"store_id\")) {\n        formData.store_id = cookies.get(\"store_id\");\n        formData.store_name = cookies.get(\"store_name\");\n      }\n\n      setFormData({ ...formData\n      });\n\n      if (id) {\n        getQuotation(id);\n      }\n\n      SetShow(true);\n    }\n\n  }));\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-order.123\"); // event.preventDefault();\n\n        var form = event.target.form;\n\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n\n            event.preventDefault();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n  const selectedDate = new Date(); //const history = useHistory();\n\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies(); //fields\n\n  let [formData, setFormData] = useState({\n    vat_percent: 15.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    //date_str: format(new Date(), \"MMM dd yyyy\"),\n    date_str: new Date(),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"created\",\n    price_type: \"retail\",\n    is_discount_percent: false,\n    validity_days: 2,\n    delivery_days: 7\n  }); //Store Auto Suggestion\n\n  const [storeOptions, setStoreOptions] = useState([]);\n  let [selectedStores, setSelectedStores] = useState([]);\n  const [isStoresLoading, setIsStoresLoading] = useState(false); //Customer Auto Suggestion\n\n  const [customerOptions, setCustomerOptions] = useState([]);\n  let [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isCustomersLoading, setIsCustomersLoading] = useState(false); //Product Auto Suggestion\n\n  let [productOptions, setProductOptions] = useState([]);\n  let [selectedProduct, setSelectedProduct] = useState([]);\n  let [selectedProducts, setSelectedProducts] = useState([]);\n  const [isProductsLoading, setIsProductsLoading] = useState(false); //Delivered By Auto Suggestion\n\n  const [deliveredByUserOptions, setDeliveredByUserOptions] = useState([]);\n  let [selectedDeliveredByUsers, setSelectedDeliveredByUsers] = useState([]);\n  const [isDeliveredByUsersLoading, setIsDeliveredByUsersLoading] = useState(false); //Delivered By Signature Auto Suggestion\n\n  const [deliveredBySignatureOptions, setDeliveredBySignatureOptions] = useState([]);\n  let [selectedDeliveredBySignatures, setSelectedDeliveredBySignatures] = useState([]);\n  const [isDeliveredBySignaturesLoading, setIsDeliveredBySignaturesLoading] = useState(false);\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n\n    if (!at) {\n      // history.push(\"/dashboard/quotations\");\n      window.location = \"/\";\n    }\n  });\n\n  function getQuotation(id) {\n    console.log(\"inside get Quotation\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    fetch(\"/v1/quotation/\" + id, requestOptions).then(async response => {\n      var _response$headers$get;\n\n      const isJson = (_response$headers$get = response.headers.get(\"content-type\")) === null || _response$headers$get === void 0 ? void 0 : _response$headers$get.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        const error = data && data.errors;\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      console.log(\"Response:\");\n      console.log(data);\n      let quotation = data.result;\n      formData = {\n        id: quotation.id,\n        code: quotation.code,\n        store_id: quotation.store_id,\n        customer_id: quotation.customer_id,\n        // date_str: quotation.date_str,\n        date: quotation.date,\n        vat_percent: quotation.vat_percent,\n        discount: quotation.discount,\n        discount_percent: quotation.discount_percent,\n        status: quotation.status,\n        delivered_by: quotation.delivered_by,\n        delivered_by_signature_id: quotation.delivered_by_signature_id,\n        is_discount_percent: quotation.is_discount_percent,\n        shipping_handling_fees: quotation.shipping_handling_fees,\n        delivery_days: quotation.delivery_days ? quotation.delivery_days : 7,\n        validity_days: quotation.validity_days ? quotation.validity_days : 2\n      };\n      formData.date_str = data.result.date;\n\n      if (formData.is_discount_percent) {\n        formData.discountValue = formData.discount_percent;\n      } else {\n        formData.discountValue = formData.discount;\n      }\n\n      selectedProducts = quotation.products;\n      setSelectedProducts([...selectedProducts]);\n      let selectedStores = [{\n        id: quotation.store_id,\n        name: quotation.store_name\n      }];\n      let selectedCustomers = [{\n        id: quotation.customer_id,\n        name: quotation.customer_name,\n        search_label: quotation.customer_name\n      }];\n      let selectedDeliveredByUsers = [{\n        id: quotation.delivered_by,\n        name: quotation.delivered_by_name\n      }];\n\n      if (quotation.delivered_by_signature_id) {\n        let selectedDeliveredBySignatures = [{\n          id: quotation.delivered_by_signature_id,\n          name: quotation.delivered_by_signature_name\n        }];\n        setSelectedDeliveredBySignatures([...selectedDeliveredBySignatures]);\n      }\n\n      setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      setSelectedStores([...selectedStores]);\n      setSelectedCustomers([...selectedCustomers]);\n      setFormData({ ...formData\n      });\n      reCalculate();\n    }).catch(error => {\n      setProcessing(false);\n      setErrors(error);\n    });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object).map(function (key) {\n      return `search[${key}]=` + encodeURIComponent(object[key]);\n    }).join(\"&\");\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggestStores\");\n    setStoreOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsStoresLoading(true);\n    let result = await fetch(\"/v1/store?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setStoreOptions(data.result);\n    setIsStoresLoading(false);\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n    setCustomerOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    setIsCustomersLoading(true);\n    let result = await fetch(\"/v1/customer?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setCustomerOptions(data.result);\n    setIsCustomersLoading(false);\n  }\n\n  function GetProductUnitPriceInStore(storeId, productStores) {\n    if (!productStores) {\n      return \"\";\n    }\n\n    for (var i = 0; i < productStores.length; i++) {\n      console.log(\"productStores[i]:\", productStores[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (productStores[i].store_id === storeId) {\n        console.log(\"macthed\");\n        console.log(\"productStores[i].retail_unit_price:\", productStores[i].retail_unit_price);\n        return productStores[i];\n      }\n    }\n\n    console.log(\"not matched\");\n    return \"\";\n  }\n\n  function GetProductPurchaseUnitPriceInStore(storeId, unitPriceListArray) {\n    if (!unitPriceListArray) {\n      return \"\";\n    }\n\n    for (var i = 0; i < unitPriceListArray.length; i++) {\n      console.log(\"unitPriceListArray[i]:\", unitPriceListArray[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (unitPriceListArray[i].store_id === storeId) {\n        return unitPriceListArray[i].purchase_unit_price;\n      } else {\n        console.log(\"not matched\");\n      }\n    }\n\n    return \"\";\n  }\n\n  let [openProductSearchResult, setOpenProductSearchResult] = useState(false);\n\n  async function suggestProducts(searchTerm) {\n    console.log(\"Inside handle suggestProducts\");\n    setProductOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n\n    if (cookies.get(\"store_id\")) {\n      params.store_id = cookies.get(\"store_id\");\n    }\n\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic\";\n    setIsProductsLoading(true);\n    let result = await fetch(\"/v1/product?\" + Select + queryString + \"&limit=200\", requestOptions);\n    let data = await result.json();\n    let products = data.result;\n\n    if (!products || products.length === 0) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    openProductSearchResult = true;\n    setOpenProductSearchResult(true);\n    setProductOptions(products);\n    setIsProductsLoading(false);\n  }\n\n  async function getProductByBarCode(barcode) {\n    formData.barcode = barcode;\n    setFormData({ ...formData\n    });\n    console.log(\"Inside getProductByBarCode\");\n    errors[\"bar_code\"] = \"\";\n    setErrors({ ...errors\n    });\n    console.log(\"barcode:\" + formData.barcode);\n\n    if (!formData.barcode) {\n      return;\n    }\n\n    if (formData.barcode.length === 13) {\n      formData.barcode = formData.barcode.slice(0, -1);\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";\n    let result = await fetch(\"/v1/product/barcode/\" + formData.barcode + \"?\" + Select, requestOptions);\n    let data = await result.json();\n    let product = data.result;\n\n    if (product) {\n      addProduct(product);\n    } else {\n      errors[\"bar_code\"] = \"Invalid Barcode:\" + formData.barcode;\n      setErrors({ ...errors\n      });\n    }\n\n    formData.barcode = \"\";\n    setFormData({ ...formData\n    });\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setDeliveredByUserOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsDeliveredByUsersLoading(true);\n    let result = await fetch(\"/v1/user?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setDeliveredByUserOptions(data.result);\n    setIsDeliveredByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setDeliveredBySignatureOptions([]);\n    console.log(\"searchTerm:\" + searchTerm);\n\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      }\n    };\n    let Select = \"select=id,name\";\n    setIsDeliveredBySignaturesLoading(true);\n    let result = await fetch(\"/v1/signature?\" + Select + queryString, requestOptions);\n    let data = await result.json();\n    setDeliveredBySignatureOptions(data.result);\n    setIsDeliveredBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n    formData.products = [];\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        name: selectedProducts[i].name,\n        name_in_arabic: selectedProducts[i].name_in_arabic,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        purchase_unit_price: parseFloat(selectedProducts[i].purchase_unit_price),\n        unit: selectedProducts[i].unit,\n        part_number: selectedProducts[i].part_number\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n\n    if (cookies.get(\"store_id\")) {\n      formData.store_id = cookies.get(\"store_id\");\n    }\n\n    console.log(\"formData.discount:\", formData.discount);\n    let endPoint = \"/v1/quotation\";\n    let method = \"POST\";\n\n    if (formData.id) {\n      endPoint = \"/v1/quotation/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\")\n      },\n      body: JSON.stringify(formData)\n    };\n    console.log(\"formData:\", formData);\n    setProcessing(true);\n    fetch(endPoint, requestOptions).then(async response => {\n      var _response$headers$get2;\n\n      const isJson = (_response$headers$get2 = response.headers.get(\"content-type\")) === null || _response$headers$get2 === void 0 ? void 0 : _response$headers$get2.includes(\"application/json\");\n      const data = isJson && (await response.json()); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.errors; //const error = data.errors\n\n        return Promise.reject(error);\n      }\n\n      setErrors({});\n      setProcessing(false);\n      console.log(\"Response:\");\n      console.log(data);\n      props.showToastMessage(\"Quotation Created Successfully!\", \"success\");\n\n      if (props.refreshList) {\n        props.refreshList();\n      }\n\n      handleClose();\n      props.openDetailsView(data.result.id);\n    }).catch(error => {\n      setProcessing(false);\n      console.log(\"Inside catch\");\n      console.log(error);\n      setErrors({ ...error\n      });\n      console.error(\"There was an error!\", error);\n      props.showToastMessage(\"Error Creating Quotation!\", \"danger\");\n    });\n  }\n\n  function isProductAdded(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function addProduct(product) {\n    console.log(\"Inside Add product\");\n\n    if (!formData.store_id) {\n      errors.product_id = \"Please Select a Store and try again\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    errors.product_id = \"\";\n\n    if (!product) {\n      errors.product_id = \"Invalid Product\";\n      setErrors({ ...errors\n      });\n      return;\n    }\n\n    let unitPrice = GetProductUnitPriceInStore(formData.store_id, product.stores);\n    product.unit_price = unitPrice.retail_unit_price;\n    product.purchase_unit_price = unitPrice.purchase_unit_price;\n    let alreadyAdded = false;\n    let index = -1;\n    let quantity = 0.0;\n    product.quantity = 1.0;\n\n    if (isProductAdded(product.id)) {\n      alreadyAdded = true;\n      index = getProductIndex(product.id);\n      quantity = parseFloat(selectedProducts[index].quantity + product.quantity);\n    } else {\n      quantity = parseFloat(product.quantity);\n    }\n\n    console.log(\"quantity:\", quantity);\n    errors.quantity = \"\";\n\n    if (alreadyAdded) {\n      selectedProducts[index].quantity = parseFloat(quantity);\n    }\n\n    if (!alreadyAdded) {\n      let item = {\n        product_id: product.id,\n        code: product.item_code,\n        part_number: product.part_number,\n        name: product.name,\n        quantity: product.quantity,\n        product_stores: product.product_stores,\n        unit: product.unit\n      };\n\n      if (product.unit_price) {\n        item.unit_price = parseFloat(product.unit_price);\n        console.log(\"item.unit_price:\", item.unit_price);\n      }\n\n      if (product.purchase_unit_price) {\n        item.purchase_unit_price = parseFloat(product.purchase_unit_price);\n        console.log(\"item.purchase_unit_price\", item.purchase_unit_price);\n      }\n\n      selectedProducts.push(item);\n    }\n\n    console.log(\"selectedProducts:\", selectedProducts);\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  function getProductIndex(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return i;\n      }\n    }\n\n    return false;\n  }\n\n  function removeProduct(product) {\n    const index = selectedProducts.indexOf(product);\n\n    if (index > -1) {\n      selectedProducts.splice(index, 1);\n    }\n\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.0;\n\n    for (var i = 0; i < selectedProducts.length; i++) {\n      totalPrice += parseFloat(selectedProducts[i].unit_price) * parseFloat(selectedProducts[i].quantity);\n    }\n\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [deliveryDays, setDeliveryDays] = useState(7);\n  let [validityDays, setValidityDays] = useState(2);\n  let [vatPrice, setVatPrice] = useState(0.0);\n\n  function findVatPrice() {\n    vatPrice = 0.0;\n\n    if (totalPrice > 0) {\n      vatPrice = (parseFloat(parseFloat(formData.vat_percent) / 100) * (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount))).toFixed(2);\n      console.log(\"vatPrice:\", vatPrice);\n    }\n\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.0);\n\n  function findNetTotal() {\n    netTotal = 0.0;\n\n    if (totalPrice > 0) {\n      netTotal = (parseFloat(totalPrice) + parseFloat(formData.shipping_handling_fees) - parseFloat(formData.discount) + parseFloat(vatPrice)).toFixed(2);\n    }\n\n    setNetTotal(netTotal);\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.0);\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(parseFloat(formData.discount / totalPrice) * 100).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(totalPrice * parseFloat(formData.discount_percent / 100)).toFixed(2);\n      setFormData({ ...formData\n      });\n    }\n  }\n\n  function reCalculate() {\n    findTotalPrice();\n\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const StoreCreateFormRef = useRef();\n\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const CustomerCreateFormRef = useRef();\n\n  function openCustomerCreateForm() {\n    CustomerCreateFormRef.current.open();\n  }\n\n  const ProductCreateFormRef = useRef();\n\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const UserCreateFormRef = useRef();\n\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PreviewRef = useRef();\n\n  function openPreview() {\n    let model = {};\n    model = JSON.parse(JSON.stringify(formData));\n    model.products = selectedProducts;\n    model.net_total = netTotal;\n    model.vat_price = vatPrice;\n    model.total = totalPrice; //setFormData({ ...formData });\n\n    PreviewRef.current.open(model);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductView, {\n      ref: ProductDetailsViewRef,\n      openUpdateForm: openProductUpdateForm,\n      openCreateForm: openProductCreateForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 900,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductCreate, {\n      ref: ProductCreateFormRef,\n      showToastMessage: props.showToastMessage,\n      openDetailsView: openProductDetailsView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 905,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(QuotationPreview, {\n      ref: PreviewRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoreCreate, {\n      ref: StoreCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 913,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomerCreate, {\n      ref: CustomerCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 917,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserCreate, {\n      ref: UserCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 921,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SignatureCreate, {\n      ref: SignatureCreateFormRef,\n      showToastMessage: props.showToastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 925,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      size: \"xl\",\n      fullscreen: true,\n      onHide: handleClose,\n      animation: false,\n      backdrop: \"static\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: formData.id ? \"Update Quotation #\" + formData.code : \"Create New Quotation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 939,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col align-self-end text-end\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: openPreview,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-display\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 947,\n              columnNumber: 15\n            }, this), \" Preview\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 946,\n            columnNumber: 13\n          }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: openPreview,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-display\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 951,\n              columnNumber: 15\n            }, this), \" Preview\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 13\n          }, this), \"\\xA0\\xA0 \\xA0\\xA0 \\xA0\\xA0\", formData.id ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => {\n              handleClose();\n              props.openDetailsView(formData.id);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 17\n            }, this), \" View Detail\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 15\n          }, this) : \"\", \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleCreate,\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 971,\n              columnNumber: 19\n            }, this) + \" Creating...\" : \"\", formData.id ? \"Update\" : \"Create\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 968,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: handleClose,\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 982,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 945,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 938,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-3 needs-validation\",\n          onSubmit: handleCreate,\n          children: [!cookies.get(\"store_name\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Store*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 994,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n                id: \"store_id\",\n                labelKey: \"name\",\n                isLoading: isStoresLoading,\n                isInvalid: errors.store_id ? true : false,\n                onChange: selectedItems => {\n                  errors.store_id = \"\";\n                  setErrors(errors);\n\n                  if (selectedItems.length === 0) {\n                    errors.store_id = \"Invalid Store selected\";\n                    setErrors(errors);\n                    formData.store_id = \"\";\n                    setFormData({ ...formData\n                    });\n                    setSelectedStores([]);\n                    return;\n                  }\n\n                  formData.store_id = selectedItems[0].id;\n                  setFormData({ ...formData\n                  });\n                  setSelectedStores(selectedItems); //SetPriceOfAllProducts(selectedItems[0].id);\n                },\n                options: storeOptions,\n                placeholder: \"Select Store\",\n                selected: selectedStores,\n                highlightOnlyResult: true,\n                onInputChange: (searchTerm, e) => {\n                  suggestStores(searchTerm);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 997,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                hide: true.toString(),\n                onClick: openStoreCreateForm,\n                className: \"btn btn-outline-secondary btn-primary btn-sm\",\n                type: \"button\",\n                id: \"button-addon1\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-plus-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1035,\n                  columnNumber: 21\n                }, this), \" New\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1027,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1038,\n                  columnNumber: 21\n                }, this), errors.store_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1037,\n                columnNumber: 19\n              }, this), formData.store_id && !errors.store_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1043,\n                  columnNumber: 23\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1042,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 996,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 15\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Customer*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1053,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n                id: \"customer_id\",\n                labelKey: \"search_label\",\n                isLoading: isCustomersLoading,\n                isInvalid: errors.customer_id ? true : false,\n                onChange: selectedItems => {\n                  errors.customer_id = \"\";\n                  setErrors(errors);\n\n                  if (selectedItems.length === 0) {\n                    errors.customer_id = \"Invalid Customer selected\";\n                    setErrors(errors);\n                    formData.customer_id = \"\";\n                    setFormData({ ...formData\n                    });\n                    setSelectedCustomers([]);\n                    return;\n                  }\n\n                  formData.customer_id = selectedItems[0].id;\n                  setFormData({ ...formData\n                  });\n                  setSelectedCustomers(selectedItems);\n                },\n                options: customerOptions,\n                placeholder: \"Type name or mob\",\n                selected: selectedCustomers,\n                highlightOnlyResult: true,\n                onInputChange: (searchTerm, e) => {\n                  suggestCustomers(searchTerm);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1056,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                hide: true.toString(),\n                onClick: openCustomerCreateForm,\n                className: \"btn btn-outline-secondary btn-primary btn-sm\",\n                type: \"button\",\n                id: \"button-addon1\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-plus-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1092,\n                  columnNumber: 19\n                }, this), \" New\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1084,\n                columnNumber: 17\n              }, this), errors.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1096,\n                  columnNumber: 21\n                }, this), errors.customer_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1095,\n                columnNumber: 19\n              }, this), formData.customer_id && !errors.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1102,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1101,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1055,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1052,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Product Barcode Scan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DebounceInput, {\n                minLength: 3,\n                debounceTimeout: 500,\n                placeholder: \"Scan Barcode\",\n                className: \"form-control barcode\",\n                value: formData.barcode,\n                onChange: event => getProductByBarCode(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1113,\n                columnNumber: 17\n              }, this), errors.bar_code && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1123,\n                  columnNumber: 21\n                }, this), errors.bar_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 19\n              }, this), formData.bar_code && !errors.bar_code && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1129,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1128,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Product*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typeahead, {\n              id: \"product_id\",\n              size: \"lg\",\n              labelKey: \"search_label\",\n              emptyLabel: \"\",\n              clearButton: true,\n              open: openProductSearchResult,\n              isLoading: isProductsLoading,\n              isInvalid: errors.product_id ? true : false,\n              onChange: selectedItems => {\n                if (selectedItems.length === 0) {\n                  errors[\"product_id\"] = \"Invalid Product selected\";\n                  setErrors(errors);\n                  return;\n                }\n\n                errors[\"product_id\"] = \"\";\n                setErrors({ ...errors\n                });\n\n                if (formData.store_id) {\n                  addProduct(selectedItems[0]);\n                }\n\n                setOpenProductSearchResult(false);\n              },\n              options: productOptions,\n              selected: selectedProduct,\n              placeholder: \"Search By Part No. / Name / Name in Arabic\",\n              highlightOnlyResult: true,\n              onInputChange: (searchTerm, e) => {\n                suggestProducts(searchTerm);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              hide: true.toString(),\n              onClick: openProductCreateForm,\n              className: \"btn btn-outline-secondary btn-primary btn-sm\",\n              type: \"button\",\n              id: \"button-addon1\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1177,\n                columnNumber: 17\n              }, this), \" New\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 15\n            }, this), errors.product_id ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"red\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1181,\n                columnNumber: 19\n              }, this), errors.product_id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1180,\n              columnNumber: 17\n            }, this) : null, selectedProduct[0] && selectedProduct[0].id && !errors.product_id && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"green\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-check-lg\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1189,\n                columnNumber: 21\n              }, this), \"Looks good!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1188,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            style: {\n              overflowX: \"auto\",\n              maxHeight: \"400px\",\n              overflowY: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"3%\"\n                    },\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1206,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"5%\"\n                    },\n                    children: \"SI No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1207,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"10%\"\n                    },\n                    children: \"Part No.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1208,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"34%\"\n                    },\n                    className: \"text-start\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1209,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1212,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Purchase Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1213,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"11%\"\n                    },\n                    children: \"Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1214,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: \"15%\"\n                    },\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1215,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1205,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1204,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: selectedProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\",\n                        cursor: \"pointer\"\n                      },\n                      onClick: () => {\n                        removeProduct(product);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1229,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1223,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1222,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1232,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: product.part_number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1233,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textDecoration: \"underline\",\n                      color: \"blue\",\n                      cursor: \"pointer\"\n                    },\n                    className: \"text-start\",\n                    onClick: () => {\n                      openProductDetailsView(product.product_id);\n                      console.log(\"okk,id:\", product.product_id);\n                    },\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1234,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"155px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.quantity,\n                        className: \"form-control\",\n                        placeholder: \"Quantity\",\n                        onChange: e => {\n                          errors[\"quantity_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"quantity_\" + index] = \"Invalid Quantity\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"quantity_\" + index] = \"Quantity should be > 0\";\n                            selectedProducts[index].quantity = e.target.value;\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          product.quantity = parseFloat(e.target.value);\n                          reCalculate();\n                          selectedProducts[index].quantity = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].quantity:\", selectedProducts[index].quantity);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1250,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: [\" \", selectedProducts[index].unit ? selectedProducts[index].unit : \"Units\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1294,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1249,\n                      columnNumber: 27\n                    }, this), errors[\"quantity_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1306,\n                        columnNumber: 31\n                      }, this), errors[\"quantity_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1305,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1248,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"150px\"\n                    },\n                    children: product.purchase_unit_price ? /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: product.purchase_unit_price.toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1313,\n                      columnNumber: 29\n                    }, this) : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1311,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      width: \"180px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: product.unit_price,\n                        className: \"form-control\",\n                        placeholder: \"Unit Price\",\n                        onChange: e => {\n                          errors[\"unit_price_\" + index] = \"\";\n                          setErrors({ ...errors\n                          });\n\n                          if (!e.target.value) {\n                            errors[\"unit_price_\" + index] = \"Invalid Unit Price\";\n                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) === 0) {\n                            errors[\"unit_price_\" + index] = \"Unit Price shoudl be > 0\";\n                            selectedProducts[index].unit_price = parseFloat(e.target.value);\n                            setSelectedProducts([...selectedProducts]);\n                            setErrors({ ...errors\n                            });\n                            console.log(\"errors:\", errors);\n                            return;\n                          }\n\n                          selectedProducts[index].unit_price = parseFloat(e.target.value);\n                          console.log(\"selectedProducts[index].unit_price:\", selectedProducts[index].unit_price);\n                          setSelectedProducts([...selectedProducts]);\n                          reCalculate();\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1326,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        id: \"basic-addon2\",\n                        children: \"SAR\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1367,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1325,\n                      columnNumber: 27\n                    }, this), errors[\"unit_price_\" + index] && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-x-lg\",\n                        children: \" \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1376,\n                        columnNumber: 31\n                      }, this), errors[\"unit_price_\" + index]]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1375,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1324,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: (product.unit_price * product.quantity).toFixed(2),\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1382,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1381,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1221,\n                  columnNumber: 23\n                }, this)).reverse()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1203,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-striped table-sm table-bordered\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1402,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    style: {\n                      width: \"200px\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: totalPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1406,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1405,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1401,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Shipping & Handling Fees\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1416,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"150px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.shipping_handling_fees,\n                      onChange: e => {\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"shipping_handling_fees\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.shipping_handling_fees = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"shipping_handling_fees\"] = \"Shipping / Handling Fees should be > 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.shipping_handling_fees = \"\";\n                          errors[\"shipping_handling_fees\"] = \"Invalid Shipping / Handling Fees\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"shipping_handling_fees\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.shipping_handling_fees = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1420,\n                      columnNumber: 23\n                    }, this), \" SAR\", errors.shipping_handling_fees && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.shipping_handling_fees\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1470,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1419,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1415,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: [\"Discount\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"50px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.discount_percent,\n                      onChange: e => {\n                        formData.is_discount_percent = true;\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount_percent = parseFloat(e.target.value);\n                          formData.discount = 0.0;\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount_percent\"] = \"Discount percent should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount_percent = \"\";\n                          formData.discount = 0.0;\n                          errors[\"discount_percent\"] = \"Invalid Discount Percent\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"discount_percent\"] = \"\";\n                        errors[\"discount\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.discount_percent = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1479,\n                      columnNumber: 23\n                    }, this), \"%\", errors.discount_percent && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.discount_percent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1533,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1477,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      style: {\n                        width: \"150px\"\n                      },\n                      className: \"text-start\",\n                      value: formData.discount,\n                      onChange: e => {\n                        formData.is_discount_percent = false;\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.discount = parseFloat(e.target.value);\n                          formData.discount_percent = 0.0;\n                          setFormData({ ...formData\n                          });\n                          errors[\"discount\"] = \"Discount should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.discount = \"\";\n                          formData.discount_percent = 0.0;\n                          errors[\"discount\"] = \"Invalid Discount\";\n                          setFormData({ ...formData\n                          });\n                          reCalculate();\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"discount\"] = \"\";\n                        errors[\"discount_percent\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.discount = parseFloat(e.target.value);\n                        setFormData({ ...formData\n                        });\n                        reCalculate();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1539,\n                      columnNumber: 23\n                    }, this), \" SAR\", errors.discount && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.discount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1586,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1538,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1476,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: [\" \", \"VAT\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      className: \"text-center\",\n                      style: {\n                        width: \"50px\"\n                      },\n                      value: formData.vat_percent,\n                      onChange: e => {\n                        console.log(\"Inside onchange vat percent\");\n\n                        if (parseFloat(e.target.value) === 0) {\n                          formData.vat_percent = parseFloat(e.target.value);\n                          setFormData({ ...formData\n                          });\n                          errors[\"vat_percent\"] = \"\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (parseFloat(e.target.value) < 0) {\n                          formData.vat_percent = parseFloat(e.target.value);\n                          vatPrice = 0.0;\n                          setVatPrice(vatPrice);\n                          setFormData({ ...formData\n                          });\n                          errors[\"vat_percent\"] = \"Vat percent should be >= 0\";\n                          setErrors({ ...errors\n                          });\n                          reCalculate();\n                          return;\n                        }\n\n                        if (!e.target.value) {\n                          formData.vat_percent = \"\";\n                          vatPrice = 0.0;\n                          setVatPrice(vatPrice); //formData.discount_percent = 0.00;\n\n                          errors[\"vat_percent\"] = \"Invalid vat percent\";\n                          setFormData({ ...formData\n                          });\n                          setErrors({ ...errors\n                          });\n                          return;\n                        }\n\n                        errors[\"vat_percent\"] = \"\";\n                        setErrors({ ...errors\n                        });\n                        formData.vat_percent = e.target.value;\n                        reCalculate();\n                        setFormData({ ...formData\n                        });\n                        console.log(formData);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1594,\n                      columnNumber: 23\n                    }, this), \"%\", errors.vat_percent && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        color: \"red\"\n                      },\n                      children: errors.vat_percent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1642,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1591,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: vatPrice,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1646,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1645,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1590,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"8\",\n                    className: \"text-end\",\n                    children: \"Net Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1656,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: netTotal,\n                      displayType: \"text\",\n                      thousandSeparator: true,\n                      suffix: \" SAR\",\n                      renderText: (value, props) => value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1660,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1659,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1655,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1400,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1399,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Status*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1674,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.status,\n                onChange: e => {\n                  console.log(\"Inside onchange status\");\n\n                  if (!e.target.value) {\n                    formData.status = \"\";\n                    setFormData({ ...formData\n                    });\n                    errors[\"status\"] = \"Invalid Status\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"status\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.status = e.target.value;\n                  setFormData({ ...formData\n                  });\n                  console.log(formData);\n                },\n                className: \"form-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"created\",\n                  children: \"Created\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1698,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"delivered\",\n                  children: \"Delivered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1699,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pending\",\n                  children: \"Pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1700,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"accepted\",\n                  children: \"Accepted\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1701,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"rejected\",\n                  children: \"Rejected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1702,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cancelled\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1703,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1677,\n                columnNumber: 17\n              }, this), errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1707,\n                  columnNumber: 21\n                }, this), errors.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1706,\n                columnNumber: 19\n              }, this), formData.status && !errors.status && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1713,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1712,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1676,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1673,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Date*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1721,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n                id: \"date_str\",\n                selected: formData.date_str ? new Date(formData.date_str) : null,\n                value: formData.date_str ? format(new Date(formData.date_str), \"MMMM d, yyyy h:mm aa\") : null,\n                className: \"form-control\",\n                dateFormat: \"MMMM d, yyyy h:mm aa\",\n                showTimeSelect: true,\n                timeIntervals: \"1\",\n                onChange: value => {\n                  console.log(\"Value\", value);\n                  formData.date_str = value; // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n\n                  setFormData({ ...formData\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1724,\n                columnNumber: 17\n              }, this), errors.date_str && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1751,\n                  columnNumber: 21\n                }, this), errors.date_str]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1750,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1723,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1720,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Validity (# of Days)*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1759,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"text-center\",\n                style: {\n                  width: \"50px\"\n                },\n                value: formData.validity_days,\n                onChange: e => {\n                  console.log(\"Inside onchange validity days\");\n\n                  if (!e.target.value) {\n                    formData.validity_days = null;\n                    errors[\"validity_days\"] = \"Validity days are required\";\n                    setFormData({ ...formData\n                    });\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  if (parseInt(e.target.value) <= 0) {\n                    formData.validity_days = parseInt(e.target.value);\n                    setValidityDays(validityDays);\n                    setFormData({ ...formData\n                    });\n                    errors[\"validity_days\"] = \"Validity days should be > 0\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"validity_days\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.validity_days = parseInt(e.target.value);\n                  setFormData({ ...formData\n                  });\n                  validityDays = formData.validity_days;\n                  setValidityDays(formData.validity_days);\n                  console.log(formData);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1762,\n                columnNumber: 17\n              }, this), errors.validity_days && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1801,\n                  columnNumber: 21\n                }, this), errors.validity_days]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1800,\n                columnNumber: 19\n              }, this), formData.validity_days > 0 && formData.validity_days && !errors.validity_days && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1808,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1807,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1761,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1758,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Delivery (# of Days)*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1816,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"text-center\",\n                style: {\n                  width: \"50px\"\n                },\n                value: formData.delivery_days,\n                onChange: e => {\n                  console.log(\"Inside onchange delivery days\");\n\n                  if (!e.target.value) {\n                    formData.delivery_days = null;\n                    errors[\"delivery_days\"] = \"Delivery days are required\";\n                    setFormData({ ...formData\n                    });\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  if (parseInt(e.target.value) <= 0) {\n                    formData.delivery_days = parseInt(e.target.value);\n                    setDeliveryDays(deliveryDays);\n                    setFormData({ ...formData\n                    });\n                    errors[\"delivery_days\"] = \"Delivery days should be > 0\";\n                    setErrors({ ...errors\n                    });\n                    return;\n                  }\n\n                  errors[\"delivery_days\"] = \"\";\n                  setErrors({ ...errors\n                  });\n                  formData.delivery_days = parseInt(e.target.value);\n                  setFormData({ ...formData\n                  });\n                  deliveryDays = formData.delivery_days;\n                  setDeliveryDays(formData.delivery_days);\n                  console.log(formData);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1819,\n                columnNumber: 17\n              }, this), errors.delivery_days && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"red\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-x-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1858,\n                  columnNumber: 21\n                }, this), errors.delivery_days]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1857,\n                columnNumber: 19\n              }, this), formData.delivery_days > 0 && formData.delivery_days && !errors.delivery_days && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"green\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-check-lg\",\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1864,\n                  columnNumber: 21\n                }, this), \"Looks good!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1863,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1818,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1815,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1872,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleCreate,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(Spinner, {\n                as: \"span\",\n                animation: \"border\",\n                size: \"sm\",\n                role: \"status\",\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1878,\n                columnNumber: 21\n              }, this) + \" Processing...\" : formData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1875,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1871,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 991,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 990,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 929,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}, \"BL6CIJHU2pv2ihoZ9UNtc6g7bxg=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = QuotationCreate;\nexport default QuotationCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"QuotationCreate$forwardRef\");\n$RefreshReg$(_c2, \"QuotationCreate\");","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","QuotationPreview","Modal","Button","Form","StoreCreate","CustomerCreate","ProductCreate","UserCreate","SignatureCreate","Cookies","Typeahead","NumberFormat","DatePicker","format","Spinner","QuotationView","ProductView","DebounceInput","QuotationCreate","props","ref","open","id","formData","vat_percent","discount","discountValue","discount_percent","shipping_handling_fees","is_discount_percent","date_str","Date","signature_date_str","status","price_type","delivery_days","validity_days","selectedProducts","setSelectedProducts","selectedStores","setSelectedStores","selectedCustomers","setSelectedCustomers","selectedDeliveredByUsers","setSelectedDeliveredByUsers","selectedDeliveredBySignatures","setSelectedDeliveredBySignatures","reCalculate","cookies","get","name","delivered_by","setFormData","store_id","store_name","getQuotation","SetShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","selectedDate","errors","setErrors","isProcessing","setProcessing","storeOptions","setStoreOptions","isStoresLoading","setIsStoresLoading","customerOptions","setCustomerOptions","isCustomersLoading","setIsCustomersLoading","productOptions","setProductOptions","selectedProduct","setSelectedProduct","isProductsLoading","setIsProductsLoading","deliveredByUserOptions","setDeliveredByUserOptions","isDeliveredByUsersLoading","setIsDeliveredByUsersLoading","deliveredBySignatureOptions","setDeliveredBySignatureOptions","isDeliveredBySignaturesLoading","setIsDeliveredBySignaturesLoading","show","handleClose","at","window","location","requestOptions","method","headers","Authorization","fetch","then","response","isJson","data","json","ok","error","Promise","reject","quotation","result","customer_id","date","delivered_by_signature_id","products","customer_name","search_label","delivered_by_name","delivered_by_signature_name","catch","ObjectToSearchQueryParams","object","Object","keys","map","key","encodeURIComponent","join","suggestStores","searchTerm","params","queryString","Select","suggestCustomers","GetProductUnitPriceInStore","storeId","productStores","i","length","retail_unit_price","GetProductPurchaseUnitPriceInStore","unitPriceListArray","purchase_unit_price","openProductSearchResult","setOpenProductSearchResult","suggestProducts","getProductByBarCode","barcode","slice","product","addProduct","suggestUsers","suggestSignatures","handleCreate","push","product_id","name_in_arabic","quantity","parseFloat","unit_price","unit","part_number","endPoint","Accept","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","isProductAdded","productID","unitPrice","stores","alreadyAdded","getProductIndex","item","item_code","product_stores","removeProduct","splice","totalPrice","setTotalPrice","findTotalPrice","toFixed","deliveryDays","setDeliveryDays","validityDays","setValidityDays","vatPrice","setVatPrice","findVatPrice","netTotal","setNetTotal","findNetTotal","discountPercent","setDiscountPercent","findDiscountPercent","findDiscount","StoreCreateFormRef","openStoreCreateForm","current","CustomerCreateFormRef","openCustomerCreateForm","ProductCreateFormRef","openProductCreateForm","openProductUpdateForm","UserCreateFormRef","openUserCreateForm","SignatureCreateFormRef","openSignatureCreateForm","ProductDetailsViewRef","openProductDetailsView","PreviewRef","openPreview","model","parse","net_total","vat_price","total","selectedItems","e","toString","color","value","bar_code","overflowX","maxHeight","overflowY","width","cursor","textDecoration","reverse","parseInt"],"mappings":";;;AAAA,OAAOA,KAAP,IACEC,QADF,EAEEC,SAFF,EAGEC,MAHF,EAIEC,UAJF,EAKEC,mBALF,QAMO,OANP;AAOA,OAAOC,gBAAP,MAA6B,cAA7B;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,IAAxB,QAAoC,iBAApC;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,aAAP,MAA0B,WAA1B;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,SAASC,aAAT,QAA8B,sBAA9B;;;AAEA,MAAMC,eAAe,gBAAGpB,UAAU,SAAC,CAACqB,KAAD,EAAQC,GAAR,KAAgB;AAAA;;AACjDrB,EAAAA,mBAAmB,CAACqB,GAAD,EAAM,OAAO;AAC9BC,IAAAA,IAAI,CAACC,EAAD,EAAK;AACPC,MAAAA,QAAQ,GAAG;AACTC,QAAAA,WAAW,EAAE,IADJ;AAETC,QAAAA,QAAQ,EAAE,GAFD;AAGTC,QAAAA,aAAa,EAAE,GAHN;AAITC,QAAAA,gBAAgB,EAAE,GAJT;AAKTC,QAAAA,sBAAsB,EAAE,GALf;AAMTC,QAAAA,mBAAmB,EAAE,KANZ;AAOTC,QAAAA,QAAQ,EAAE,IAAIC,IAAJ,EAPD;AAQTC,QAAAA,kBAAkB,EAAEnB,MAAM,CAAC,IAAIkB,IAAJ,EAAD,EAAa,aAAb,CARjB;AASTE,QAAAA,MAAM,EAAE,WATC;AAUTC,QAAAA,UAAU,EAAE,QAVH;AAWTC,QAAAA,aAAa,EAAE,CAXN;AAYTC,QAAAA,aAAa,EAAE;AAZN,OAAX;AAeAC,MAAAA,gBAAgB,GAAG,EAAnB;AACAC,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;AAEAC,MAAAA,cAAc,GAAG,EAAjB;AACAC,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AAEAC,MAAAA,iBAAiB,GAAG,EAApB;AACAC,MAAAA,oBAAoB,CAAC,EAAD,CAApB;AAEAC,MAAAA,wBAAwB,GAAG,EAA3B;AACAC,MAAAA,2BAA2B,CAAC,EAAD,CAA3B;AAEAC,MAAAA,6BAA6B,GAAG,EAAhC;AACAC,MAAAA,gCAAgC,CAAC,EAAD,CAAhC;AAEAC,MAAAA,WAAW;;AAEX,UAAIC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAJ,EAA4B;AAC1BN,QAAAA,wBAAwB,GAAG,CACzB;AACErB,UAAAA,EAAE,EAAE0B,OAAO,CAACC,GAAR,CAAY,SAAZ,CADN;AAEEC,UAAAA,IAAI,EAAEF,OAAO,CAACC,GAAR,CAAY,WAAZ;AAFR,SADyB,CAA3B;AAMA1B,QAAAA,QAAQ,CAAC4B,YAAT,GAAwBH,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAxB;AACAG,QAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,SAAD,CAAX;AACAqB,QAAAA,2BAA2B,CAAC,CAAC,GAAGD,wBAAJ,CAAD,CAA3B;AACD;;AACD,UAAIK,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAJ,EAA6B;AAC3B1B,QAAAA,QAAQ,CAAC8B,QAAT,GAAoBL,OAAO,CAACC,GAAR,CAAY,UAAZ,CAApB;AACA1B,QAAAA,QAAQ,CAAC+B,UAAT,GAAsBN,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAtB;AACD;;AAEDG,MAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,OAAD,CAAX;;AACA,UAAID,EAAJ,EAAQ;AACNiC,QAAAA,YAAY,CAACjC,EAAD,CAAZ;AACD;;AACDkC,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD;;AAvD6B,GAAP,CAAN,CAAnB;AA0DA5D,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM6D,QAAQ,GAAIC,KAAD,IAAW;AAC1B,UAAIA,KAAK,CAACC,IAAN,KAAe,OAAf,IAA0BD,KAAK,CAACC,IAAN,KAAe,aAA7C,EAA4D;AAC1DC,QAAAA,OAAO,CAACC,GAAR,CAAY,oDAAZ,EAD0D,CAE1D;;AAEA,YAAIC,IAAI,GAAGJ,KAAK,CAACK,MAAN,CAAaD,IAAxB;;AACA,YAAIA,IAAI,IAAIJ,KAAK,CAACK,MAAlB,EAA0B;AACxB,cAAIC,KAAK,GAAGC,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BN,IAA7B,EAAmCJ,KAAK,CAACK,MAAzC,CAAZ;;AACA,cAAID,IAAI,IAAIA,IAAI,CAACO,QAAL,CAAcL,KAAK,GAAG,CAAtB,CAAZ,EAAsC;AACpC,gBAAIN,KAAK,CAACK,MAAN,CAAaO,YAAb,CAA0B,OAA1B,EAAmCC,QAAnC,CAA4C,SAA5C,CAAJ,EAA4D;AAC1DT,cAAAA,IAAI,CAACO,QAAL,CAAcL,KAAd,EAAqBQ,KAArB;AACD,aAFD,MAEO;AACLV,cAAAA,IAAI,CAACO,QAAL,CAAcL,KAAK,GAAG,CAAtB,EAAyBQ,KAAzB;AACD;;AACDd,YAAAA,KAAK,CAACe,cAAN;AACD;AACF;AACF;AACF,KAlBD;;AAmBAC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqClB,QAArC;AACA,WAAO,MAAM;AACXiB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCnB,QAAxC;AACD,KAFD;AAGD,GAxBQ,EAwBN,EAxBM,CAAT;AA0BA,QAAMoB,YAAY,GAAG,IAAI9C,IAAJ,EAArB,CArFiD,CAuFjD;;AACA,MAAI,CAAC+C,MAAD,EAASC,SAAT,IAAsBpF,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACqF,YAAD,EAAeC,aAAf,IAAgCtF,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAMqD,OAAO,GAAG,IAAIvC,OAAJ,EAAhB,CA1FiD,CA4FjD;;AACA,MAAI,CAACc,QAAD,EAAW6B,WAAX,IAA0BzD,QAAQ,CAAC;AACrC6B,IAAAA,WAAW,EAAE,IADwB;AAErCC,IAAAA,QAAQ,EAAE,GAF2B;AAGrCC,IAAAA,aAAa,EAAE,GAHsB;AAIrCC,IAAAA,gBAAgB,EAAE,GAJmB;AAKrC;AACAG,IAAAA,QAAQ,EAAE,IAAIC,IAAJ,EAN2B;AAOrCC,IAAAA,kBAAkB,EAAEnB,MAAM,CAAC,IAAIkB,IAAJ,EAAD,EAAa,aAAb,CAPW;AAQrCE,IAAAA,MAAM,EAAE,SAR6B;AASrCC,IAAAA,UAAU,EAAE,QATyB;AAUrCL,IAAAA,mBAAmB,EAAE,KAVgB;AAWrCO,IAAAA,aAAa,EAAC,CAXuB;AAYrCD,IAAAA,aAAa,EAAC;AAZuB,GAAD,CAAtC,CA7FiD,CA4GjD;;AACA,QAAM,CAAC+C,YAAD,EAAeC,eAAf,IAAkCxF,QAAQ,CAAC,EAAD,CAAhD;AACA,MAAI,CAAC4C,cAAD,EAAiBC,iBAAjB,IAAsC7C,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACyF,eAAD,EAAkBC,kBAAlB,IAAwC1F,QAAQ,CAAC,KAAD,CAAtD,CA/GiD,CAiHjD;;AACA,QAAM,CAAC2F,eAAD,EAAkBC,kBAAlB,IAAwC5F,QAAQ,CAAC,EAAD,CAAtD;AACA,MAAI,CAAC8C,iBAAD,EAAoBC,oBAApB,IAA4C/C,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAAC6F,kBAAD,EAAqBC,qBAArB,IAA8C9F,QAAQ,CAAC,KAAD,CAA5D,CApHiD,CAsHjD;;AACA,MAAI,CAAC+F,cAAD,EAAiBC,iBAAjB,IAAsChG,QAAQ,CAAC,EAAD,CAAlD;AACA,MAAI,CAACiG,eAAD,EAAkBC,kBAAlB,IAAwClG,QAAQ,CAAC,EAAD,CAApD;AACA,MAAI,CAAC0C,gBAAD,EAAmBC,mBAAnB,IAA0C3C,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACmG,iBAAD,EAAoBC,oBAApB,IAA4CpG,QAAQ,CAAC,KAAD,CAA1D,CA1HiD,CA4HjD;;AACA,QAAM,CAACqG,sBAAD,EAAyBC,yBAAzB,IAAsDtG,QAAQ,CAAC,EAAD,CAApE;AACA,MAAI,CAACgD,wBAAD,EAA2BC,2BAA3B,IAA0DjD,QAAQ,CAAC,EAAD,CAAtE;AACA,QAAM,CAACuG,yBAAD,EAA4BC,4BAA5B,IACJxG,QAAQ,CAAC,KAAD,CADV,CA/HiD,CAkIjD;;AACA,QAAM,CAACyG,2BAAD,EAA8BC,8BAA9B,IACJ1G,QAAQ,CAAC,EAAD,CADV;AAEA,MAAI,CAACkD,6BAAD,EAAgCC,gCAAhC,IACFnD,QAAQ,CAAC,EAAD,CADV;AAEA,QAAM,CAAC2G,8BAAD,EAAiCC,iCAAjC,IACJ5G,QAAQ,CAAC,KAAD,CADV;AAGA,QAAM,CAAC6G,IAAD,EAAOhD,OAAP,IAAkB7D,QAAQ,CAAC,KAAD,CAAhC;;AAEA,WAAS8G,WAAT,GAAuB;AACrBjD,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD;;AAED5D,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI8G,EAAE,GAAG1D,OAAO,CAACC,GAAR,CAAY,cAAZ,CAAT;;AACA,QAAI,CAACyD,EAAL,EAAS;AACP;AACAC,MAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACD;AACF,GANQ,CAAT;;AAQA,WAASrD,YAAT,CAAsBjC,EAAtB,EAA0B;AACxBsC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,UAAMgD,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQAgE,IAAAA,KAAK,CAAC,mBAAmB3F,EAApB,EAAwBuF,cAAxB,CAAL,CACGK,IADH,CACQ,MAAOC,QAAP,IAAoB;AAAA;;AACxB,YAAMC,MAAM,4BAAGD,QAAQ,CAACJ,OAAT,CACZ9D,GADY,CACR,cADQ,CAAH,0DAAG,sBAEXsB,QAFW,CAEF,kBAFE,CAAf;AAGA,YAAM8C,IAAI,GAAGD,MAAM,KAAK,MAAMD,QAAQ,CAACG,IAAT,EAAX,CAAnB,CAJwB,CAMxB;;AACA,UAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;AAChB,cAAMC,KAAK,GAAGH,IAAI,IAAIA,IAAI,CAACvC,MAA3B;AACA,eAAO2C,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD;;AAEDzC,MAAAA,SAAS,CAAC,EAAD,CAAT;AAEAnB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYwD,IAAZ;AAEA,UAAIM,SAAS,GAAGN,IAAI,CAACO,MAArB;AACArG,MAAAA,QAAQ,GAAG;AACTD,QAAAA,EAAE,EAAEqG,SAAS,CAACrG,EADL;AAETqC,QAAAA,IAAI,EAAEgE,SAAS,CAAChE,IAFP;AAGTN,QAAAA,QAAQ,EAAEsE,SAAS,CAACtE,QAHX;AAITwE,QAAAA,WAAW,EAAEF,SAAS,CAACE,WAJd;AAKT;AACAC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IANP;AAOTtG,QAAAA,WAAW,EAAEmG,SAAS,CAACnG,WAPd;AAQTC,QAAAA,QAAQ,EAAEkG,SAAS,CAAClG,QARX;AASTE,QAAAA,gBAAgB,EAAEgG,SAAS,CAAChG,gBATnB;AAUTM,QAAAA,MAAM,EAAE0F,SAAS,CAAC1F,MAVT;AAWTkB,QAAAA,YAAY,EAAEwE,SAAS,CAACxE,YAXf;AAYT4E,QAAAA,yBAAyB,EAAEJ,SAAS,CAACI,yBAZ5B;AAaTlG,QAAAA,mBAAmB,EAAE8F,SAAS,CAAC9F,mBAbtB;AAcTD,QAAAA,sBAAsB,EAAE+F,SAAS,CAAC/F,sBAdzB;AAeTO,QAAAA,aAAa,EAAEwF,SAAS,CAACxF,aAAV,GAAwBwF,SAAS,CAACxF,aAAlC,GAAgD,CAftD;AAgBTC,QAAAA,aAAa,EAAEuF,SAAS,CAACvF,aAAV,GAAwBuF,SAAS,CAACvF,aAAlC,GAAgD;AAhBtD,OAAX;AAkBAb,MAAAA,QAAQ,CAACO,QAAT,GAAoBuF,IAAI,CAACO,MAAL,CAAYE,IAAhC;;AAEA,UAAIvG,QAAQ,CAACM,mBAAb,EAAkC;AAChCN,QAAAA,QAAQ,CAACG,aAAT,GAAyBH,QAAQ,CAACI,gBAAlC;AACD,OAFD,MAEO;AACLJ,QAAAA,QAAQ,CAACG,aAAT,GAAyBH,QAAQ,CAACE,QAAlC;AACD;;AAEDY,MAAAA,gBAAgB,GAAGsF,SAAS,CAACK,QAA7B;AACA1F,MAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AAEA,UAAIE,cAAc,GAAG,CACnB;AACEjB,QAAAA,EAAE,EAAEqG,SAAS,CAACtE,QADhB;AAEEH,QAAAA,IAAI,EAAEyE,SAAS,CAACrE;AAFlB,OADmB,CAArB;AAOA,UAAIb,iBAAiB,GAAG,CACtB;AACEnB,QAAAA,EAAE,EAAEqG,SAAS,CAACE,WADhB;AAEE3E,QAAAA,IAAI,EAAEyE,SAAS,CAACM,aAFlB;AAGEC,QAAAA,YAAY,EAAEP,SAAS,CAACM;AAH1B,OADsB,CAAxB;AAQA,UAAItF,wBAAwB,GAAG,CAC7B;AACErB,QAAAA,EAAE,EAAEqG,SAAS,CAACxE,YADhB;AAEED,QAAAA,IAAI,EAAEyE,SAAS,CAACQ;AAFlB,OAD6B,CAA/B;;AAOA,UAAIR,SAAS,CAACI,yBAAd,EAAyC;AACvC,YAAIlF,6BAA6B,GAAG,CAClC;AACEvB,UAAAA,EAAE,EAAEqG,SAAS,CAACI,yBADhB;AAEE7E,UAAAA,IAAI,EAAEyE,SAAS,CAACS;AAFlB,SADkC,CAApC;AAMAtF,QAAAA,gCAAgC,CAAC,CAAC,GAAGD,6BAAJ,CAAD,CAAhC;AACD;;AAEDD,MAAAA,2BAA2B,CAAC,CAAC,GAAGD,wBAAJ,CAAD,CAA3B;AAEAH,MAAAA,iBAAiB,CAAC,CAAC,GAAGD,cAAJ,CAAD,CAAjB;AACAG,MAAAA,oBAAoB,CAAC,CAAC,GAAGD,iBAAJ,CAAD,CAApB;AAEAW,MAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,OAAD,CAAX;AAEAwB,MAAAA,WAAW;AACZ,KAxFH,EAyFGsF,KAzFH,CAyFUb,KAAD,IAAW;AAChBvC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAF,MAAAA,SAAS,CAACyC,KAAD,CAAT;AACD,KA5FH;AA6FD;;AAED,WAASc,yBAAT,CAAmCC,MAAnC,EAA2C;AACzC,WAAOC,MAAM,CAACC,IAAP,CAAYF,MAAZ,EACJG,GADI,CACA,UAAUC,GAAV,EAAe;AAClB,aAAQ,UAASA,GAAI,IAAd,GAAoBC,kBAAkB,CAACL,MAAM,CAACI,GAAD,CAAP,CAA7C;AACD,KAHI,EAIJE,IAJI,CAIC,GAJD,CAAP;AAKD;;AAED,iBAAeC,aAAf,CAA6BC,UAA7B,EAAyC;AACvCnF,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAsB,IAAAA,eAAe,CAAC,EAAD,CAAf;AAEAvB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBkF,UAA5B;;AACA,QAAI,CAACA,UAAL,EAAiB;AACf;AACD;;AAED,QAAIC,MAAM,GAAG;AACX9F,MAAAA,IAAI,EAAE6F;AADK,KAAb;AAGA,QAAIE,WAAW,GAAGX,yBAAyB,CAACU,MAAD,CAA3C;;AACA,QAAIC,WAAW,KAAK,EAApB,EAAwB;AACtBA,MAAAA,WAAW,GAAG,MAAMA,WAApB;AACD;;AAED,UAAMpC,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GAAG,gBAAb;AACA7D,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,QAAIuC,MAAM,GAAG,MAAMX,KAAK,CACtB,eAAeiC,MAAf,GAAwBD,WADF,EAEtBpC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEAnC,IAAAA,eAAe,CAACkC,IAAI,CAACO,MAAN,CAAf;AACAvC,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;;AAED,iBAAe8D,gBAAf,CAAgCJ,UAAhC,EAA4C;AAC1CnF,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACA0B,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AAEA3B,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBkF,UAA5B;;AACA,QAAI,CAACA,UAAL,EAAiB;AACf;AACD;;AAED,QAAIC,MAAM,GAAG;AACX9F,MAAAA,IAAI,EAAE6F;AADK,KAAb;AAGA,QAAIE,WAAW,GAAGX,yBAAyB,CAACU,MAAD,CAA3C;;AACA,QAAIC,WAAW,KAAK,EAApB,EAAwB;AACtBA,MAAAA,WAAW,GAAG,MAAMA,WAApB;AACD;;AAED,UAAMpC,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GACR,kEADF;AAEAzD,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACA,QAAImC,MAAM,GAAG,MAAMX,KAAK,CACtB,kBAAkBiC,MAAlB,GAA2BD,WADL,EAEtBpC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEA/B,IAAAA,kBAAkB,CAAC8B,IAAI,CAACO,MAAN,CAAlB;AACAnC,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;;AAED,WAAS2D,0BAAT,CAAoCC,OAApC,EAA6CC,aAA7C,EAA4D;AAC1D,QAAI,CAACA,aAAL,EAAoB;AAClB,aAAO,EAAP;AACD;;AAED,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,aAAa,CAACE,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C3F,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCyF,aAAa,CAACC,CAAD,CAA9C;AACA3F,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBwF,OAAzB;;AAEA,UAAIC,aAAa,CAACC,CAAD,CAAb,CAAiBlG,QAAjB,KAA8BgG,OAAlC,EAA2C;AACzCzF,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CACE,qCADF,EAEEyF,aAAa,CAACC,CAAD,CAAb,CAAiBE,iBAFnB;AAIA,eAAOH,aAAa,CAACC,CAAD,CAApB;AACD;AACF;;AACD3F,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,WAAO,EAAP;AACD;;AAED,WAAS6F,kCAAT,CAA4CL,OAA5C,EAAqDM,kBAArD,EAAyE;AACvE,QAAI,CAACA,kBAAL,EAAyB;AACvB,aAAO,EAAP;AACD;;AAED,SAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,kBAAkB,CAACH,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAClD3F,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsC8F,kBAAkB,CAACJ,CAAD,CAAxD;AACA3F,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBwF,OAAzB;;AAEA,UAAIM,kBAAkB,CAACJ,CAAD,CAAlB,CAAsBlG,QAAtB,KAAmCgG,OAAvC,EAAgD;AAC9C,eAAOM,kBAAkB,CAACJ,CAAD,CAAlB,CAAsBK,mBAA7B;AACD,OAFD,MAEO;AACLhG,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;AACF;;AACD,WAAO,EAAP;AACD;;AAED,MAAI,CAACgG,uBAAD,EAA0BC,0BAA1B,IAAwDnK,QAAQ,CAAC,KAAD,CAApE;;AAEA,iBAAeoK,eAAf,CAA+BhB,UAA/B,EAA2C;AACzCnF,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA8B,IAAAA,iBAAiB,CAAC,EAAD,CAAjB;AAEA/B,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBkF,UAA5B;;AACA,QAAI,CAACA,UAAL,EAAiB;AACfc,MAAAA,uBAAuB,GAAG,KAA1B;AACAC,MAAAA,0BAA0B,CAAC,KAAD,CAA1B;AACA/D,MAAAA,oBAAoB,CAAC,KAAD,CAApB;AACA;AACD;;AAED,QAAIiD,MAAM,GAAG;AACX9F,MAAAA,IAAI,EAAE6F;AADK,KAAb;;AAIA,QAAI/F,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAJ,EAA6B;AAC3B+F,MAAAA,MAAM,CAAC3F,QAAP,GAAkBL,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAlB;AACD;;AAED,QAAIgG,WAAW,GAAGX,yBAAyB,CAACU,MAAD,CAA3C;;AACA,QAAIC,WAAW,KAAK,EAApB,EAAwB;AACtBA,MAAAA,WAAW,GAAG,MAAMA,WAApB;AACD;;AAED,UAAMpC,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GACR,kFADF;AAEAnD,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACA,QAAI6B,MAAM,GAAG,MAAMX,KAAK,CACtB,iBAAiBiC,MAAjB,GAA0BD,WAA1B,GAAwC,YADlB,EAEtBpC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEA,QAAIU,QAAQ,GAAGX,IAAI,CAACO,MAApB;;AACA,QAAI,CAACI,QAAD,IAAaA,QAAQ,CAACwB,MAAT,KAAoB,CAArC,EAAwC;AACtCK,MAAAA,uBAAuB,GAAG,KAA1B;AACAC,MAAAA,0BAA0B,CAAC,KAAD,CAA1B;AACA/D,MAAAA,oBAAoB,CAAC,KAAD,CAApB;AACA;AACD;;AAED8D,IAAAA,uBAAuB,GAAG,IAA1B;AACAC,IAAAA,0BAA0B,CAAC,IAAD,CAA1B;AACAnE,IAAAA,iBAAiB,CAACqC,QAAD,CAAjB;AACAjC,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD;;AAED,iBAAeiE,mBAAf,CAAmCC,OAAnC,EAA4C;AAC1C1I,IAAAA,QAAQ,CAAC0I,OAAT,GAAmBA,OAAnB;AACA7G,IAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,KAAD,CAAX;AACAqC,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACAiB,IAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,EAArB;AACAC,IAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,KAAD,CAAT;AAEAlB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAatC,QAAQ,CAAC0I,OAAlC;;AACA,QAAI,CAAC1I,QAAQ,CAAC0I,OAAd,EAAuB;AACrB;AACD;;AAED,QAAI1I,QAAQ,CAAC0I,OAAT,CAAiBT,MAAjB,KAA4B,EAAhC,EAAoC;AAClCjI,MAAAA,QAAQ,CAAC0I,OAAT,GAAmB1I,QAAQ,CAAC0I,OAAT,CAAiBC,KAAjB,CAAuB,CAAvB,EAA0B,CAAC,CAA3B,CAAnB;AACD;;AAED,UAAMrD,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GACR,6FADF;AAEA,QAAItB,MAAM,GAAG,MAAMX,KAAK,CACtB,yBAAyB1F,QAAQ,CAAC0I,OAAlC,GAA4C,GAA5C,GAAkDf,MAD5B,EAEtBrC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEA,QAAI6C,OAAO,GAAG9C,IAAI,CAACO,MAAnB;;AACA,QAAIuC,OAAJ,EAAa;AACXC,MAAAA,UAAU,CAACD,OAAD,CAAV;AACD,KAFD,MAEO;AACLrF,MAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,qBAAqBvD,QAAQ,CAAC0I,OAAnD;AACAlF,MAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,OAAD,CAAT;AACD;;AAEDvD,IAAAA,QAAQ,CAAC0I,OAAT,GAAmB,EAAnB;AACA7G,IAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,KAAD,CAAX;AACD;;AAED,iBAAe8I,YAAf,CAA4BtB,UAA5B,EAAwC;AACtCnF,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACAoC,IAAAA,yBAAyB,CAAC,EAAD,CAAzB;AAEArC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBkF,UAA5B;;AACA,QAAI,CAACA,UAAL,EAAiB;AACf;AACD;;AAED,QAAIC,MAAM,GAAG;AACX9F,MAAAA,IAAI,EAAE6F;AADK,KAAb;AAGA,QAAIE,WAAW,GAAGX,yBAAyB,CAACU,MAAD,CAA3C;;AACA,QAAIC,WAAW,KAAK,EAApB,EAAwB;AACtBA,MAAAA,WAAW,GAAG,MAAMA,WAApB;AACD;;AAED,UAAMpC,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GAAG,gBAAb;AACA/C,IAAAA,4BAA4B,CAAC,IAAD,CAA5B;AACA,QAAIyB,MAAM,GAAG,MAAMX,KAAK,CACtB,cAAciC,MAAd,GAAuBD,WADD,EAEtBpC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEArB,IAAAA,yBAAyB,CAACoB,IAAI,CAACO,MAAN,CAAzB;AACAzB,IAAAA,4BAA4B,CAAC,KAAD,CAA5B;AACD;;AAED,iBAAemE,iBAAf,CAAiCvB,UAAjC,EAA6C;AAC3CnF,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACAwC,IAAAA,8BAA8B,CAAC,EAAD,CAA9B;AAEAzC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBkF,UAA5B;;AACA,QAAI,CAACA,UAAL,EAAiB;AACf;AACD;;AAED,QAAIC,MAAM,GAAG;AACX9F,MAAAA,IAAI,EAAE6F;AADK,KAAb;AAGA,QAAIE,WAAW,GAAGX,yBAAyB,CAACU,MAAD,CAA3C;;AACA,QAAIC,WAAW,KAAK,EAApB,EAAwB;AACtBA,MAAAA,WAAW,GAAG,MAAMA,WAApB;AACD;;AAED,UAAMpC,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAFR;AAFY,KAAvB;AAQA,QAAIiG,MAAM,GAAG,gBAAb;AACA3C,IAAAA,iCAAiC,CAAC,IAAD,CAAjC;AACA,QAAIqB,MAAM,GAAG,MAAMX,KAAK,CACtB,mBAAmBiC,MAAnB,GAA4BD,WADN,EAEtBpC,cAFsB,CAAxB;AAIA,QAAIQ,IAAI,GAAG,MAAMO,MAAM,CAACN,IAAP,EAAjB;AAEAjB,IAAAA,8BAA8B,CAACgB,IAAI,CAACO,MAAN,CAA9B;AACArB,IAAAA,iCAAiC,CAAC,KAAD,CAAjC;AACD;;AAED,WAASgE,YAAT,CAAsB7G,KAAtB,EAA6B;AAC3BA,IAAAA,KAAK,CAACe,cAAN;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCxB,gBAAjC;AAEAd,IAAAA,QAAQ,CAACyG,QAAT,GAAoB,EAApB;;AACA,SAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlH,gBAAgB,CAACmH,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChDhI,MAAAA,QAAQ,CAACyG,QAAT,CAAkBwC,IAAlB,CAAuB;AACrBC,QAAAA,UAAU,EAAEpI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBkB,UADX;AAErBvH,QAAAA,IAAI,EAAEb,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBrG,IAFL;AAGrBwH,QAAAA,cAAc,EAAErI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBmB,cAHf;AAIrBC,QAAAA,QAAQ,EAAEC,UAAU,CAACvI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBoB,QAArB,CAJC;AAKrBE,QAAAA,UAAU,EAAED,UAAU,CAACvI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBsB,UAArB,CALD;AAMrBjB,QAAAA,mBAAmB,EAAEgB,UAAU,CAC7BvI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBK,mBADS,CANV;AASrBkB,QAAAA,IAAI,EAAEzI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBuB,IATL;AAUrBC,QAAAA,WAAW,EAAE1I,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBwB;AAVZ,OAAvB;AAYD;;AAEDxJ,IAAAA,QAAQ,CAACE,QAAT,GAAoBmJ,UAAU,CAACrJ,QAAQ,CAACE,QAAV,CAA9B;AACAF,IAAAA,QAAQ,CAACI,gBAAT,GAA4BiJ,UAAU,CAACrJ,QAAQ,CAACI,gBAAV,CAAtC;AACAJ,IAAAA,QAAQ,CAACC,WAAT,GAAuBoJ,UAAU,CAACrJ,QAAQ,CAACC,WAAV,CAAjC;;AAGA,QAAIwB,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAJ,EAA6B;AAC3B1B,MAAAA,QAAQ,CAAC8B,QAAT,GAAoBL,OAAO,CAACC,GAAR,CAAY,UAAZ,CAApB;AACD;;AAEDW,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCtC,QAAQ,CAACE,QAA3C;AAEA,QAAIuJ,QAAQ,GAAG,eAAf;AACA,QAAIlE,MAAM,GAAG,MAAb;;AACA,QAAIvF,QAAQ,CAACD,EAAb,EAAiB;AACf0J,MAAAA,QAAQ,GAAG,mBAAmBzJ,QAAQ,CAACD,EAAvC;AACAwF,MAAAA,MAAM,GAAG,KAAT;AACD;;AAED,UAAMD,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAEA,MADa;AAErBC,MAAAA,OAAO,EAAE;AACPkE,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB,kBAFT;AAGPjE,QAAAA,aAAa,EAAEhE,OAAO,CAACC,GAAR,CAAY,cAAZ;AAHR,OAFY;AAOrBiI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe7J,QAAf;AAPe,KAAvB;AAUAqC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBtC,QAAzB;AAEA0D,IAAAA,aAAa,CAAC,IAAD,CAAb;AACAgC,IAAAA,KAAK,CAAC+D,QAAD,EAAWnE,cAAX,CAAL,CACGK,IADH,CACQ,MAAOC,QAAP,IAAoB;AAAA;;AACxB,YAAMC,MAAM,6BAAGD,QAAQ,CAACJ,OAAT,CACZ9D,GADY,CACR,cADQ,CAAH,2DAAG,uBAEXsB,QAFW,CAEF,kBAFE,CAAf;AAGA,YAAM8C,IAAI,GAAGD,MAAM,KAAK,MAAMD,QAAQ,CAACG,IAAT,EAAX,CAAnB,CAJwB,CAMxB;;AACA,UAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;AAChB;AACA,cAAMC,KAAK,GAAGH,IAAI,IAAIA,IAAI,CAACvC,MAA3B,CAFgB,CAGhB;;AACA,eAAO2C,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD;;AAEDzC,MAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,MAAAA,aAAa,CAAC,KAAD,CAAb;AAEArB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYwD,IAAZ;AACAlG,MAAAA,KAAK,CAACkK,gBAAN,CAAuB,iCAAvB,EAA0D,SAA1D;;AACA,UAAIlK,KAAK,CAACmK,WAAV,EAAuB;AACrBnK,QAAAA,KAAK,CAACmK,WAAN;AACD;;AACD7E,MAAAA,WAAW;AACXtF,MAAAA,KAAK,CAACoK,eAAN,CAAsBlE,IAAI,CAACO,MAAL,CAAYtG,EAAlC;AACD,KA1BH,EA2BG+G,KA3BH,CA2BUb,KAAD,IAAW;AAChBvC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACArB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY2D,KAAZ;AACAzC,MAAAA,SAAS,CAAC,EAAE,GAAGyC;AAAL,OAAD,CAAT;AACA5D,MAAAA,OAAO,CAAC4D,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACArG,MAAAA,KAAK,CAACkK,gBAAN,CAAuB,2BAAvB,EAAoD,QAApD;AACD,KAlCH;AAmCD;;AAED,WAASG,cAAT,CAAwBC,SAAxB,EAAmC;AACjC,SAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlH,gBAAgB,CAACmH,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,UAAIlH,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBkB,UAApB,KAAmCgB,SAAvC,EAAkD;AAChD,eAAO,IAAP;AACD;AACF;;AACD,WAAO,KAAP;AACD;;AAED,WAASrB,UAAT,CAAoBD,OAApB,EAA6B;AAC3BvG,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;;AACA,QAAI,CAACtC,QAAQ,CAAC8B,QAAd,EAAwB;AACtByB,MAAAA,MAAM,CAAC2F,UAAP,GAAoB,qCAApB;AACA1F,MAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,OAAD,CAAT;AACA;AACD;;AAEDA,IAAAA,MAAM,CAAC2F,UAAP,GAAoB,EAApB;;AACA,QAAI,CAACN,OAAL,EAAc;AACZrF,MAAAA,MAAM,CAAC2F,UAAP,GAAoB,iBAApB;AACA1F,MAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,OAAD,CAAT;AACA;AACD;;AAED,QAAI4G,SAAS,GAAGtC,0BAA0B,CACxC7H,QAAQ,CAAC8B,QAD+B,EAExC8G,OAAO,CAACwB,MAFgC,CAA1C;AAKAxB,IAAAA,OAAO,CAACU,UAAR,GAAqBa,SAAS,CAACjC,iBAA/B;AACAU,IAAAA,OAAO,CAACP,mBAAR,GAA8B8B,SAAS,CAAC9B,mBAAxC;AAEA,QAAIgC,YAAY,GAAG,KAAnB;AACA,QAAI5H,KAAK,GAAG,CAAC,CAAb;AACA,QAAI2G,QAAQ,GAAG,GAAf;AACAR,IAAAA,OAAO,CAACQ,QAAR,GAAmB,GAAnB;;AAEA,QAAIa,cAAc,CAACrB,OAAO,CAAC7I,EAAT,CAAlB,EAAgC;AAC9BsK,MAAAA,YAAY,GAAG,IAAf;AACA5H,MAAAA,KAAK,GAAG6H,eAAe,CAAC1B,OAAO,CAAC7I,EAAT,CAAvB;AACAqJ,MAAAA,QAAQ,GAAGC,UAAU,CACnBvI,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAAxB,GAAmCR,OAAO,CAACQ,QADxB,CAArB;AAGD,KAND,MAMO;AACLA,MAAAA,QAAQ,GAAGC,UAAU,CAACT,OAAO,CAACQ,QAAT,CAArB;AACD;;AAED/G,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB8G,QAAzB;AAEA7F,IAAAA,MAAM,CAAC6F,QAAP,GAAkB,EAAlB;;AAEA,QAAIiB,YAAJ,EAAkB;AAChBvJ,MAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAAxB,GAAmCC,UAAU,CAACD,QAAD,CAA7C;AACD;;AAED,QAAI,CAACiB,YAAL,EAAmB;AACjB,UAAIE,IAAI,GAAG;AACTrB,QAAAA,UAAU,EAAEN,OAAO,CAAC7I,EADX;AAETqC,QAAAA,IAAI,EAAEwG,OAAO,CAAC4B,SAFL;AAGThB,QAAAA,WAAW,EAAEZ,OAAO,CAACY,WAHZ;AAIT7H,QAAAA,IAAI,EAAEiH,OAAO,CAACjH,IAJL;AAKTyH,QAAAA,QAAQ,EAAER,OAAO,CAACQ,QALT;AAMTqB,QAAAA,cAAc,EAAE7B,OAAO,CAAC6B,cANf;AAOTlB,QAAAA,IAAI,EAAEX,OAAO,CAACW;AAPL,OAAX;;AAUA,UAAIX,OAAO,CAACU,UAAZ,EAAwB;AACtBiB,QAAAA,IAAI,CAACjB,UAAL,GAAkBD,UAAU,CAACT,OAAO,CAACU,UAAT,CAA5B;AACAjH,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCiI,IAAI,CAACjB,UAArC;AACD;;AAED,UAAIV,OAAO,CAACP,mBAAZ,EAAiC;AAC/BkC,QAAAA,IAAI,CAAClC,mBAAL,GAA2BgB,UAAU,CAACT,OAAO,CAACP,mBAAT,CAArC;AACAhG,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCiI,IAAI,CAAClC,mBAA7C;AACD;;AAEDvH,MAAAA,gBAAgB,CAACmI,IAAjB,CAAsBsB,IAAtB;AACD;;AACDlI,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCxB,gBAAjC;AACAC,IAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACAU,IAAAA,WAAW;AACZ;;AAED,WAAS8I,eAAT,CAAyBJ,SAAzB,EAAoC;AAClC,SAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlH,gBAAgB,CAACmH,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,UAAIlH,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBkB,UAApB,KAAmCgB,SAAvC,EAAkD;AAChD,eAAOlC,CAAP;AACD;AACF;;AACD,WAAO,KAAP;AACD;;AAED,WAAS0C,aAAT,CAAuB9B,OAAvB,EAAgC;AAC9B,UAAMnG,KAAK,GAAG3B,gBAAgB,CAAC8B,OAAjB,CAAyBgG,OAAzB,CAAd;;AACA,QAAInG,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd3B,MAAAA,gBAAgB,CAAC6J,MAAjB,CAAwBlI,KAAxB,EAA+B,CAA/B;AACD;;AACD1B,IAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AAEAU,IAAAA,WAAW;AACZ;;AAED,MAAI,CAACoJ,UAAD,EAAaC,aAAb,IAA8BzM,QAAQ,CAAC,GAAD,CAA1C;;AAEA,WAAS0M,cAAT,GAA0B;AACxBF,IAAAA,UAAU,GAAG,GAAb;;AACA,SAAK,IAAI5C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlH,gBAAgB,CAACmH,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD4C,MAAAA,UAAU,IACRvB,UAAU,CAACvI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBsB,UAArB,CAAV,GACAD,UAAU,CAACvI,gBAAgB,CAACkH,CAAD,CAAhB,CAAoBoB,QAArB,CAFZ;AAGD;;AACDwB,IAAAA,UAAU,GAAGA,UAAU,CAACG,OAAX,CAAmB,CAAnB,CAAb;AACAF,IAAAA,aAAa,CAACD,UAAD,CAAb;AACD;;AAED,MAAI,CAACI,YAAD,EAAeC,eAAf,IAAkC7M,QAAQ,CAAC,CAAD,CAA9C;AACA,MAAI,CAAC8M,YAAD,EAAeC,eAAf,IAAkC/M,QAAQ,CAAC,CAAD,CAA9C;AACA,MAAI,CAACgN,QAAD,EAAWC,WAAX,IAA0BjN,QAAQ,CAAC,GAAD,CAAtC;;AAEA,WAASkN,YAAT,GAAwB;AACtBF,IAAAA,QAAQ,GAAG,GAAX;;AACA,QAAIR,UAAU,GAAG,CAAjB,EAAoB;AAClBQ,MAAAA,QAAQ,GAAG,CACT/B,UAAU,CAACA,UAAU,CAACrJ,QAAQ,CAACC,WAAV,CAAV,GAAmC,GAApC,CAAV,IACCoJ,UAAU,CAACuB,UAAD,CAAV,GACCvB,UAAU,CAACrJ,QAAQ,CAACK,sBAAV,CADX,GAECgJ,UAAU,CAACrJ,QAAQ,CAACE,QAAV,CAHZ,CADS,EAKT6K,OALS,CAKD,CALC,CAAX;AAMA1I,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB8I,QAAzB;AACD;;AACDC,IAAAA,WAAW,CAACD,QAAD,CAAX;AACD;;AAED,MAAI,CAACG,QAAD,EAAWC,WAAX,IAA0BpN,QAAQ,CAAC,GAAD,CAAtC;;AAEA,WAASqN,YAAT,GAAwB;AACtBF,IAAAA,QAAQ,GAAG,GAAX;;AACA,QAAIX,UAAU,GAAG,CAAjB,EAAoB;AAClBW,MAAAA,QAAQ,GAAG,CACTlC,UAAU,CAACuB,UAAD,CAAV,GACAvB,UAAU,CAACrJ,QAAQ,CAACK,sBAAV,CADV,GAEAgJ,UAAU,CAACrJ,QAAQ,CAACE,QAAV,CAFV,GAGAmJ,UAAU,CAAC+B,QAAD,CAJD,EAKTL,OALS,CAKD,CALC,CAAX;AAMD;;AACDS,IAAAA,WAAW,CAACD,QAAD,CAAX;AACD;;AAED,MAAI,CAACG,eAAD,EAAkBC,kBAAlB,IAAwCvN,QAAQ,CAAC,GAAD,CAApD;;AAEA,WAASwN,mBAAT,GAA+B;AAC7B,QAAI5L,QAAQ,CAACE,QAAT,IAAqB,CAArB,IAA0B0K,UAAU,GAAG,CAA3C,EAA8C;AAC5Cc,MAAAA,eAAe,GAAGrC,UAAU,CAC1BA,UAAU,CAACrJ,QAAQ,CAACE,QAAT,GAAoB0K,UAArB,CAAV,GAA6C,GADnB,CAAV,CAEhBG,OAFgB,CAER,CAFQ,CAAlB;AAGAY,MAAAA,kBAAkB,CAACD,eAAD,CAAlB;AACA1L,MAAAA,QAAQ,CAACI,gBAAT,GAA4BsL,eAA5B;AACA7J,MAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,OAAD,CAAX;AACD;AACF;;AAED,WAAS6L,YAAT,GAAwB;AACtB,QAAI7L,QAAQ,CAACI,gBAAT,IAA6B,CAA7B,IAAkCwK,UAAU,GAAG,CAAnD,EAAsD;AACpD5K,MAAAA,QAAQ,CAACE,QAAT,GAAoBmJ,UAAU,CAC5BuB,UAAU,GAAGvB,UAAU,CAACrJ,QAAQ,CAACI,gBAAT,GAA4B,GAA7B,CADK,CAAV,CAElB2K,OAFkB,CAEV,CAFU,CAApB;AAGAlJ,MAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,OAAD,CAAX;AACD;AACF;;AAED,WAASwB,WAAT,GAAuB;AACrBsJ,IAAAA,cAAc;;AACd,QAAI9K,QAAQ,CAACM,mBAAb,EAAkC;AAChCuL,MAAAA,YAAY;AACb,KAFD,MAEO;AACLD,MAAAA,mBAAmB;AACpB;;AACDN,IAAAA,YAAY;AACZG,IAAAA,YAAY;AACb;;AAED,QAAMK,kBAAkB,GAAGxN,MAAM,EAAjC;;AACA,WAASyN,mBAAT,GAA+B;AAC7BD,IAAAA,kBAAkB,CAACE,OAAnB,CAA2BlM,IAA3B;AACD;;AAED,QAAMmM,qBAAqB,GAAG3N,MAAM,EAApC;;AACA,WAAS4N,sBAAT,GAAkC;AAChCD,IAAAA,qBAAqB,CAACD,OAAtB,CAA8BlM,IAA9B;AACD;;AAED,QAAMqM,oBAAoB,GAAG7N,MAAM,EAAnC;;AACA,WAAS8N,qBAAT,GAAiC;AAC/BD,IAAAA,oBAAoB,CAACH,OAArB,CAA6BlM,IAA7B;AACD;;AAED,WAASuM,qBAAT,CAA+BtM,EAA/B,EAAmC;AACjCoM,IAAAA,oBAAoB,CAACH,OAArB,CAA6BlM,IAA7B,CAAkCC,EAAlC;AACD;;AAED,QAAMuM,iBAAiB,GAAGhO,MAAM,EAAhC;;AACA,WAASiO,kBAAT,GAA8B;AAC5BD,IAAAA,iBAAiB,CAACN,OAAlB,CAA0BlM,IAA1B;AACD;;AAED,QAAM0M,sBAAsB,GAAGlO,MAAM,EAArC;;AACA,WAASmO,uBAAT,GAAmC;AACjCD,IAAAA,sBAAsB,CAACR,OAAvB,CAA+BlM,IAA/B;AACD;;AAED,QAAM4M,qBAAqB,GAAGpO,MAAM,EAApC;;AACA,WAASqO,sBAAT,CAAgC5M,EAAhC,EAAoC;AAClC2M,IAAAA,qBAAqB,CAACV,OAAtB,CAA8BlM,IAA9B,CAAmCC,EAAnC;AACD;;AAED,QAAM6M,UAAU,GAAGtO,MAAM,EAAzB;;AACA,WAASuO,WAAT,GAAuB;AACrB,QAAIC,KAAK,GAAG,EAAZ;AACAA,IAAAA,KAAK,GAAGlD,IAAI,CAACmD,KAAL,CAAWnD,IAAI,CAACC,SAAL,CAAe7J,QAAf,CAAX,CAAR;AACA8M,IAAAA,KAAK,CAACrG,QAAN,GAAiB3F,gBAAjB;AACAgM,IAAAA,KAAK,CAACE,SAAN,GAAkBzB,QAAlB;AACAuB,IAAAA,KAAK,CAACG,SAAN,GAAkB7B,QAAlB;AACA0B,IAAAA,KAAK,CAACI,KAAN,GAActC,UAAd,CANqB,CAQrB;;AACAgC,IAAAA,UAAU,CAACZ,OAAX,CAAmBlM,IAAnB,CAAwBgN,KAAxB;AACD;;AAED,sBACE;AAAA,4BACE,QAAC,WAAD;AACE,MAAA,GAAG,EAAEJ,qBADP;AAEE,MAAA,cAAc,EAAEL,qBAFlB;AAGE,MAAA,cAAc,EAAED;AAHlB;AAAA;AAAA;AAAA;AAAA,YADF,eAME,QAAC,aAAD;AACE,MAAA,GAAG,EAAED,oBADP;AAEE,MAAA,gBAAgB,EAAEvM,KAAK,CAACkK,gBAF1B;AAGE,MAAA,eAAe,EAAE6C;AAHnB;AAAA;AAAA;AAAA;AAAA,YANF,eAYE,QAAC,gBAAD;AAAkB,MAAA,GAAG,EAAEC;AAAvB;AAAA;AAAA;AAAA;AAAA,YAZF,eAcE,QAAC,WAAD;AACE,MAAA,GAAG,EAAEd,kBADP;AAEE,MAAA,gBAAgB,EAAElM,KAAK,CAACkK;AAF1B;AAAA;AAAA;AAAA;AAAA,YAdF,eAkBE,QAAC,cAAD;AACE,MAAA,GAAG,EAAEmC,qBADP;AAEE,MAAA,gBAAgB,EAAErM,KAAK,CAACkK;AAF1B;AAAA;AAAA;AAAA;AAAA,YAlBF,eAsBE,QAAC,UAAD;AACE,MAAA,GAAG,EAAEwC,iBADP;AAEE,MAAA,gBAAgB,EAAE1M,KAAK,CAACkK;AAF1B;AAAA;AAAA;AAAA;AAAA,YAtBF,eA0BE,QAAC,eAAD;AACE,MAAA,GAAG,EAAE0C,sBADP;AAEE,MAAA,gBAAgB,EAAE5M,KAAK,CAACkK;AAF1B;AAAA;AAAA;AAAA;AAAA,YA1BF,eA8BE,QAAC,KAAD;AACE,MAAA,IAAI,EAAE7E,IADR;AAEE,MAAA,IAAI,EAAC,IAFP;AAGE,MAAA,UAAU,MAHZ;AAIE,MAAA,MAAM,EAAEC,WAJV;AAKE,MAAA,SAAS,EAAE,KALb;AAME,MAAA,QAAQ,EAAC,QANX;AAOE,MAAA,UAAU,EAAE,IAPd;AAAA,8BASE,QAAC,KAAD,CAAO,MAAP;AAAA,gCACE,QAAC,KAAD,CAAO,KAAP;AAAA,oBACGlF,QAAQ,CAACD,EAAT,GACG,uBAAuBC,QAAQ,CAACoC,IADnC,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA,gBADF,eAOE;AAAK,UAAA,SAAS,EAAC,6BAAf;AAAA,kCACE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,SAAhB;AAA0B,YAAA,OAAO,EAAEyK,WAAnC;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBADF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,2BAKE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,SAAhB;AAA0B,YAAA,OAAO,EAAEA,WAAnC;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBADF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,gCASG7M,QAAQ,CAACD,EAAT,gBACC,QAAC,MAAD;AACE,YAAA,OAAO,EAAC,SADV;AAEE,YAAA,OAAO,EAAE,MAAM;AACbmF,cAAAA,WAAW;AACXtF,cAAAA,KAAK,CAACoK,eAAN,CAAsBhK,QAAQ,CAACD,EAA/B;AACD,aALH;AAAA,oCAOE;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,GAWC,EApBJ,2BAuBE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,SAAhB;AAA0B,YAAA,OAAO,EAAEiJ,YAAnC;AAAA,uBACGvF,YAAY,GACT,aACA,QAAC,OAAD;AACE,cAAA,EAAE,EAAC,MADL;AAEE,cAAA,SAAS,EAAC,QAFZ;AAGE,cAAA,IAAI,EAAC,IAHP;AAIE,cAAA,IAAI,EAAC,QAJP;AAKE,6BAAa;AALf;AAAA;AAAA;AAAA;AAAA,oBADA,GAQE,cATO,GAUT,EAXN,EAYGzD,QAAQ,CAACD,EAAT,GAAc,QAAd,GAAyB,QAZ5B;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvBF,eAqCE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,WAFZ;AAGE,YAAA,OAAO,EAAEmF,WAHX;AAIE,0BAAW;AAJb;AAAA;AAAA;AAAA;AAAA,kBArCF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,cATF,eA6DE,QAAC,KAAD,CAAO,IAAP;AAAA,+BACE;AAAM,UAAA,SAAS,EAAC,0BAAhB;AAA2C,UAAA,QAAQ,EAAE8D,YAArD;AAAA,qBACG,CAACvH,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAD,gBACC;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE,QAAC,SAAD;AACE,gBAAA,EAAE,EAAC,UADL;AAEE,gBAAA,QAAQ,EAAC,MAFX;AAGE,gBAAA,SAAS,EAAEmC,eAHb;AAIE,gBAAA,SAAS,EAAEN,MAAM,CAACzB,QAAP,GAAkB,IAAlB,GAAyB,KAJtC;AAKE,gBAAA,QAAQ,EAAGqL,aAAD,IAAmB;AAC3B5J,kBAAAA,MAAM,CAACzB,QAAP,GAAkB,EAAlB;AACA0B,kBAAAA,SAAS,CAACD,MAAD,CAAT;;AACA,sBAAI4J,aAAa,CAAClF,MAAd,KAAyB,CAA7B,EAAgC;AAC9B1E,oBAAAA,MAAM,CAACzB,QAAP,GAAkB,wBAAlB;AACA0B,oBAAAA,SAAS,CAACD,MAAD,CAAT;AACAvD,oBAAAA,QAAQ,CAAC8B,QAAT,GAAoB,EAApB;AACAD,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAiB,oBAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACA;AACD;;AACDjB,kBAAAA,QAAQ,CAAC8B,QAAT,GAAoBqL,aAAa,CAAC,CAAD,CAAb,CAAiBpN,EAArC;AACA8B,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AACAiB,kBAAAA,iBAAiB,CAACkM,aAAD,CAAjB,CAb2B,CAc3B;AACD,iBApBH;AAqBE,gBAAA,OAAO,EAAExJ,YArBX;AAsBE,gBAAA,WAAW,EAAC,cAtBd;AAuBE,gBAAA,QAAQ,EAAE3C,cAvBZ;AAwBE,gBAAA,mBAAmB,EAAE,IAxBvB;AAyBE,gBAAA,aAAa,EAAE,CAACwG,UAAD,EAAa4F,CAAb,KAAmB;AAChC7F,kBAAAA,aAAa,CAACC,UAAD,CAAb;AACD;AA3BH;AAAA;AAAA;AAAA;AAAA,sBADF,eA+BE,QAAC,MAAD;AACE,gBAAA,IAAI,EAAE,KAAK6F,QAAL,EADR;AAEE,gBAAA,OAAO,EAAEtB,mBAFX;AAGE,gBAAA,SAAS,EAAC,8CAHZ;AAIE,gBAAA,IAAI,EAAC,QAJP;AAKE,gBAAA,EAAE,EAAC,eALL;AAAA,2BAOG,GAPH,eAQE;AAAG,kBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,wBARF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA/BF,eAyCE;AAAK,gBAAA,KAAK,EAAE;AAAEuB,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAACzB,QAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAzCF,EA6CG9B,QAAQ,CAAC8B,QAAT,IAAqB,CAACyB,MAAM,CAACzB,QAA7B,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEwL,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA9CJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,GA0DC,EA3DJ,eA6DE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE,QAAC,SAAD;AACE,gBAAA,EAAE,EAAC,aADL;AAEE,gBAAA,QAAQ,EAAC,cAFX;AAGE,gBAAA,SAAS,EAAErJ,kBAHb;AAIE,gBAAA,SAAS,EAAEV,MAAM,CAAC+C,WAAP,GAAqB,IAArB,GAA4B,KAJzC;AAKE,gBAAA,QAAQ,EAAG6G,aAAD,IAAmB;AAC3B5J,kBAAAA,MAAM,CAAC+C,WAAP,GAAqB,EAArB;AACA9C,kBAAAA,SAAS,CAACD,MAAD,CAAT;;AACA,sBAAI4J,aAAa,CAAClF,MAAd,KAAyB,CAA7B,EAAgC;AAC9B1E,oBAAAA,MAAM,CAAC+C,WAAP,GAAqB,2BAArB;AACA9C,oBAAAA,SAAS,CAACD,MAAD,CAAT;AACAvD,oBAAAA,QAAQ,CAACsG,WAAT,GAAuB,EAAvB;AACAzE,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAmB,oBAAAA,oBAAoB,CAAC,EAAD,CAApB;AACA;AACD;;AACDnB,kBAAAA,QAAQ,CAACsG,WAAT,GAAuB6G,aAAa,CAAC,CAAD,CAAb,CAAiBpN,EAAxC;AACA8B,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AACAmB,kBAAAA,oBAAoB,CAACgM,aAAD,CAApB;AACD,iBAnBH;AAoBE,gBAAA,OAAO,EAAEpJ,eApBX;AAqBE,gBAAA,WAAW,EAAC,kBArBd;AAsBE,gBAAA,QAAQ,EAAE7C,iBAtBZ;AAuBE,gBAAA,mBAAmB,EAAE,IAvBvB;AAwBE,gBAAA,aAAa,EAAE,CAACsG,UAAD,EAAa4F,CAAb,KAAmB;AAChCxF,kBAAAA,gBAAgB,CAACJ,UAAD,CAAhB;AACD;AA1BH;AAAA;AAAA;AAAA;AAAA,sBADF,eA6BE,QAAC,MAAD;AACE,gBAAA,IAAI,EAAE,KAAK6F,QAAL,EADR;AAEE,gBAAA,OAAO,EAAEnB,sBAFX;AAGE,gBAAA,SAAS,EAAC,8CAHZ;AAIE,gBAAA,IAAI,EAAC,QAJP;AAKE,gBAAA,EAAE,EAAC,eALL;AAAA,2BAOG,GAPH,eAQE;AAAG,kBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,wBARF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA7BF,EAuCG3I,MAAM,CAAC+C,WAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEgH,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAAC+C,WAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAxCJ,EA6CGtG,QAAQ,CAACsG,WAAT,IAAwB,CAAC/C,MAAM,CAAC+C,WAAhC,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEgH,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA9CJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7DF,eAsHE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE,QAAC,aAAD;AACE,gBAAA,SAAS,EAAE,CADb;AAEE,gBAAA,eAAe,EAAE,GAFnB;AAGE,gBAAA,WAAW,EAAC,cAHd;AAIE,gBAAA,SAAS,EAAC,sBAJZ;AAKE,gBAAA,KAAK,EAAEtN,QAAQ,CAAC0I,OALlB;AAME,gBAAA,QAAQ,EAAGvG,KAAD,IAAWsG,mBAAmB,CAACtG,KAAK,CAACK,MAAN,CAAa+K,KAAd;AAN1C;AAAA;AAAA;AAAA;AAAA,sBADF,EASGhK,MAAM,CAACiK,QAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEF,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAACiK,QAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAVJ,EAeGxN,QAAQ,CAACwN,QAAT,IAAqB,CAACjK,MAAM,CAACiK,QAA7B,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEF,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAtHF,eAiJE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,SAAD;AACE,cAAA,EAAE,EAAC,YADL;AAEE,cAAA,IAAI,EAAC,IAFP;AAGE,cAAA,QAAQ,EAAC,cAHX;AAIE,cAAA,UAAU,EAAC,EAJb;AAKE,cAAA,WAAW,EAAE,IALf;AAME,cAAA,IAAI,EAAEhF,uBANR;AAOE,cAAA,SAAS,EAAE/D,iBAPb;AAQE,cAAA,SAAS,EAAEhB,MAAM,CAAC2F,UAAP,GAAoB,IAApB,GAA2B,KARxC;AASE,cAAA,QAAQ,EAAGiE,aAAD,IAAmB;AAC3B,oBAAIA,aAAa,CAAClF,MAAd,KAAyB,CAA7B,EAAgC;AAC9B1E,kBAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB,0BAAvB;AACAC,kBAAAA,SAAS,CAACD,MAAD,CAAT;AACA;AACD;;AACDA,gBAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB,EAAvB;AACAC,gBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,iBAAD,CAAT;;AAEA,oBAAIvD,QAAQ,CAAC8B,QAAb,EAAuB;AACrB+G,kBAAAA,UAAU,CAACsE,aAAa,CAAC,CAAD,CAAd,CAAV;AACD;;AACD5E,gBAAAA,0BAA0B,CAAC,KAAD,CAA1B;AACD,eAtBH;AAuBE,cAAA,OAAO,EAAEpE,cAvBX;AAwBE,cAAA,QAAQ,EAAEE,eAxBZ;AAyBE,cAAA,WAAW,EAAC,4CAzBd;AA0BE,cAAA,mBAAmB,EAAE,IA1BvB;AA2BE,cAAA,aAAa,EAAE,CAACmD,UAAD,EAAa4F,CAAb,KAAmB;AAChC5E,gBAAAA,eAAe,CAAChB,UAAD,CAAf;AACD;AA7BH;AAAA;AAAA;AAAA;AAAA,oBAFF,eAiCE,QAAC,MAAD;AACE,cAAA,IAAI,EAAE,KAAK6F,QAAL,EADR;AAEE,cAAA,OAAO,EAAEjB,qBAFX;AAGE,cAAA,SAAS,EAAC,8CAHZ;AAIE,cAAA,IAAI,EAAC,QAJP;AAKE,cAAA,EAAE,EAAC,eALL;AAAA,yBAOG,GAPH,eAQE;AAAG,gBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,sBARF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAjCF,EA2CG7I,MAAM,CAAC2F,UAAP,gBACC;AAAK,cAAA,KAAK,EAAE;AAAEoE,gBAAAA,KAAK,EAAE;AAAT,eAAZ;AAAA,sCACE;AAAG,gBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEG/J,MAAM,CAAC2F,UAFV;AAAA;AAAA;AAAA;AAAA;AAAA,oBADD,GAKG,IAhDN,EAiDG7E,eAAe,CAAC,CAAD,CAAf,IACCA,eAAe,CAAC,CAAD,CAAf,CAAmBtE,EADpB,IAEC,CAACwD,MAAM,CAAC2F,UAFT,iBAGG;AAAK,cAAA,KAAK,EAAE;AAAEoE,gBAAAA,KAAK,EAAE;AAAT,eAAZ;AAAA,sCACE;AAAG,gBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF;AAAA;AAAA;AAAA;AAAA;AAAA,oBApDN;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjJF,eA4ME;AACE,YAAA,SAAS,EAAC,kBADZ;AAEE,YAAA,KAAK,EAAE;AACLG,cAAAA,SAAS,EAAE,MADN;AAELC,cAAAA,SAAS,EAAE,OAFN;AAGLC,cAAAA,SAAS,EAAE;AAHN,aAFT;AAAA,mCAQE;AAAO,cAAA,SAAS,EAAC,6CAAjB;AAAA,sCACE;AAAA,uCACE;AAAI,kBAAA,SAAS,EAAC,aAAd;AAAA,0CACE;AAAI,oBAAA,KAAK,EAAE;AAAEC,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,eAGE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHF,eAIE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAA6B,oBAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJF,eAOE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF,eAQE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BARF,eASE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BATF,eAUE;AAAI,oBAAA,KAAK,EAAE;AAAEA,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAeE;AAAA,0BACG9M,gBAAgB,CACdqG,GADF,CACM,CAACyB,OAAD,EAAUnG,KAAV,kBACH;AAAgB,kBAAA,SAAS,EAAC,aAA1B;AAAA,0CACE;AAAA,2CACE;AACE,sBAAA,KAAK,EAAE;AAAE6K,wBAAAA,KAAK,EAAE,KAAT;AAAgBO,wBAAAA,MAAM,EAAE;AAAxB,uBADT;AAEE,sBAAA,OAAO,EAAE,MAAM;AACbnD,wBAAAA,aAAa,CAAC9B,OAAD,CAAb;AACD,uBAJH;AAAA,6CAME;AAAG,wBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAWE;AAAA,8BAAKnG,KAAK,GAAG;AAAb;AAAA;AAAA;AAAA;AAAA,0BAXF,eAYE;AAAA,8BAAKmG,OAAO,CAACY;AAAb;AAAA;AAAA;AAAA;AAAA,0BAZF,eAaE;AACE,oBAAA,KAAK,EAAE;AACLsE,sBAAAA,cAAc,EAAE,WADX;AAELR,sBAAAA,KAAK,EAAE,MAFF;AAGLO,sBAAAA,MAAM,EAAE;AAHH,qBADT;AAME,oBAAA,SAAS,EAAC,YANZ;AAOE,oBAAA,OAAO,EAAE,MAAM;AACblB,sBAAAA,sBAAsB,CAAC/D,OAAO,CAACM,UAAT,CAAtB;AACA7G,sBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBsG,OAAO,CAACM,UAA/B;AACD,qBAVH;AAAA,8BAYGN,OAAO,CAACjH;AAZX;AAAA;AAAA;AAAA;AAAA,0BAbF,eA2BE;AAAI,oBAAA,KAAK,EAAE;AAAEiM,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA,4CACE;AAAK,sBAAA,SAAS,EAAC,kBAAf;AAAA,8CACE;AACE,wBAAA,IAAI,EAAC,QADP;AAEE,wBAAA,KAAK,EAAEhF,OAAO,CAACQ,QAFjB;AAGE,wBAAA,SAAS,EAAC,cAHZ;AAIE,wBAAA,WAAW,EAAC,UAJd;AAKE,wBAAA,QAAQ,EAAGgE,CAAD,IAAO;AACf7J,0BAAAA,MAAM,CAAC,cAAcd,KAAf,CAAN,GAA8B,EAA9B;AACAe,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;;AACA,8BAAI,CAAC6J,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBhK,4BAAAA,MAAM,CAAC,cAAcd,KAAf,CAAN,GACE,kBADF;AAEA3B,4BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAAxB,GACEgE,CAAC,CAAC5K,MAAF,CAAS+K,KADX;AAEAxM,4BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACA0C,4BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,6BAAD,CAAT;AACAlB,4BAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBiB,MAAvB;AACA;AACD;;AAED,8BAAI8F,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpChK,4BAAAA,MAAM,CAAC,cAAcd,KAAf,CAAN,GACE,wBADF;AAEA3B,4BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAAxB,GACEgE,CAAC,CAAC5K,MAAF,CAAS+K,KADX;AAEAxM,4BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACA0C,4BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,6BAAD,CAAT;AACAlB,4BAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBiB,MAAvB;AACA;AACD;;AAEDqF,0BAAAA,OAAO,CAACQ,QAAR,GAAmBC,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAA7B;AACA/L,0BAAAA,WAAW;AAEXV,0BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAAxB,GAAmCC,UAAU,CAC3C+D,CAAC,CAAC5K,MAAF,CAAS+K,KADkC,CAA7C;AAGAlL,0BAAAA,OAAO,CAACC,GAAR,CACE,mCADF,EAEExB,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB2G,QAF1B;AAIArI,0BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACAU,0BAAAA,WAAW;AACZ;AA1CH;AAAA;AAAA;AAAA;AAAA,8BADF,eA6CE;AACE,wBAAA,SAAS,EAAC,kBADZ;AAEE,wBAAA,EAAE,EAAC,cAFL;AAAA,mCAIG,GAJH,EAKGV,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB8G,IAAxB,GACGzI,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB8G,IAD3B,GAEG,OAPN;AAAA;AAAA;AAAA;AAAA;AAAA,8BA7CF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAwDGhG,MAAM,CAAC,cAAcd,KAAf,CAAN,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAE6K,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,8CACE;AAAG,wBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAEG/J,MAAM,CAAC,cAAcd,KAAf,CAFT;AAAA;AAAA;AAAA;AAAA;AAAA,4BAzDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BA3BF,eA0FE;AAAI,oBAAA,KAAK,EAAE;AAAEmL,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA,8BACGhF,OAAO,CAACP,mBAAR,gBACC,QAAC,YAAD;AACE,sBAAA,KAAK,EAAEO,OAAO,CAACP,mBAAR,CAA4B0C,OAA5B,CAAoC,CAApC,CADT;AAEE,sBAAA,WAAW,EAAE,MAFf;AAGE,sBAAA,iBAAiB,EAAE,IAHrB;AAIE,sBAAA,MAAM,EAAE,MAJV;AAKE,sBAAA,UAAU,EAAE,CAACwC,KAAD,EAAQ3N,KAAR,KAAkB2N;AALhC;AAAA;AAAA;AAAA;AAAA,4BADD,GASC;AAVJ;AAAA;AAAA;AAAA;AAAA,0BA1FF,eAuGE;AAAI,oBAAA,KAAK,EAAE;AAAEK,sBAAAA,KAAK,EAAE;AAAT,qBAAX;AAAA,4CACE;AAAK,sBAAA,SAAS,EAAC,kBAAf;AAAA,8CACE;AACE,wBAAA,IAAI,EAAC,QADP;AAEE,wBAAA,KAAK,EAAEhF,OAAO,CAACU,UAFjB;AAGE,wBAAA,SAAS,EAAC,cAHZ;AAIE,wBAAA,WAAW,EAAC,YAJd;AAKE,wBAAA,QAAQ,EAAG8D,CAAD,IAAO;AACf7J,0BAAAA,MAAM,CAAC,gBAAgBd,KAAjB,CAAN,GAAgC,EAAhC;AACAe,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;;AACA,8BAAI,CAAC6J,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBhK,4BAAAA,MAAM,CAAC,gBAAgBd,KAAjB,CAAN,GACE,oBADF;AAEA3B,4BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB6G,UAAxB,GACED,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CADZ;AAEAxM,4BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACA0C,4BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,6BAAD,CAAT;AACAlB,4BAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBiB,MAAvB;AACA;AACD;;AAED,8BAAI8F,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpChK,4BAAAA,MAAM,CAAC,gBAAgBd,KAAjB,CAAN,GACE,0BADF;AAEA3B,4BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB6G,UAAxB,GACED,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CADZ;AAEAxM,4BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACA0C,4BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,6BAAD,CAAT;AACAlB,4BAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBiB,MAAvB;AACA;AACD;;AAEDzC,0BAAAA,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB6G,UAAxB,GAAqCD,UAAU,CAC7C+D,CAAC,CAAC5K,MAAF,CAAS+K,KADoC,CAA/C;AAGAlL,0BAAAA,OAAO,CAACC,GAAR,CACE,qCADF,EAEExB,gBAAgB,CAAC2B,KAAD,CAAhB,CAAwB6G,UAF1B;AAIAvI,0BAAAA,mBAAmB,CAAC,CAAC,GAAGD,gBAAJ,CAAD,CAAnB;AACAU,0BAAAA,WAAW;AACZ;AAvCH;AAAA;AAAA;AAAA;AAAA,8BADF,eA0CE;AACE,wBAAA,SAAS,EAAC,kBADZ;AAEE,wBAAA,EAAE,EAAC,cAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BA1CF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAkDG+B,MAAM,CAAC,gBAAgBd,KAAjB,CAAN,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAE6K,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,8CACE;AAAG,wBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAEG/J,MAAM,CAAC,gBAAgBd,KAAjB,CAFT;AAAA;AAAA;AAAA;AAAA;AAAA,4BAnDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAvGF,eAgKE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAA,2CACE,QAAC,YAAD;AACE,sBAAA,KAAK,EAAE,CACLmG,OAAO,CAACU,UAAR,GAAqBV,OAAO,CAACQ,QADxB,EAEL2B,OAFK,CAEG,CAFH,CADT;AAIE,sBAAA,WAAW,EAAE,MAJf;AAKE,sBAAA,iBAAiB,EAAE,IALrB;AAME,sBAAA,MAAM,EAAE,MANV;AAOE,sBAAA,UAAU,EAAE,CAACwC,KAAD,EAAQ3N,KAAR,KAAkB2N;AAPhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAhKF;AAAA,mBAAS9K,KAAT;AAAA;AAAA;AAAA;AAAA,wBAFH,EA+KEsL,OA/KF;AADH;AAAA;AAAA;AAAA;AAAA,sBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,kBA5MF,eAuZE;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,mCACE;AAAO,cAAA,SAAS,EAAC,6CAAjB;AAAA,qCACE;AAAA,wCACE;AAAA,0CACE;AAAI,oBAAA,OAAO,EAAC,GAAZ;AAAgB,oBAAA,SAAS,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAyB,oBAAA,KAAK,EAAE;AAAEH,sBAAAA,KAAK,EAAE;AAAT,qBAAhC;AAAA,2CACE,QAAC,YAAD;AACE,sBAAA,KAAK,EAAEhD,UADT;AAEE,sBAAA,WAAW,EAAE,MAFf;AAGE,sBAAA,iBAAiB,EAAE,IAHrB;AAIE,sBAAA,MAAM,EAAE,MAJV;AAKE,sBAAA,UAAU,EAAE,CAAC2C,KAAD,EAAQ3N,KAAR,KAAkB2N;AALhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAeE;AAAA,0CACE;AAAI,oBAAA,OAAO,EAAC,GAAZ;AAAgB,oBAAA,SAAS,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAA,4CACE;AACE,sBAAA,IAAI,EAAC,QADP;AAEE,sBAAA,KAAK,EAAE;AAAEK,wBAAAA,KAAK,EAAE;AAAT,uBAFT;AAGE,sBAAA,SAAS,EAAC,YAHZ;AAIE,sBAAA,KAAK,EAAE5N,QAAQ,CAACK,sBAJlB;AAKE,sBAAA,QAAQ,EAAG+M,CAAD,IAAO;AACf,4BAAI/D,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpCvN,0BAAAA,QAAQ,CAACK,sBAAT,GAAkCgJ,UAAU,CAC1C+D,CAAC,CAAC5K,MAAF,CAAS+K,KADiC,CAA5C;AAGA1L,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,wBAAD,CAAN,GAAmC,EAAnC;AACAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI6H,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,GAA6B,CAAjC,EAAoC;AAClCvN,0BAAAA,QAAQ,CAACK,sBAAT,GAAkCgJ,UAAU,CAC1C+D,CAAC,CAAC5K,MAAF,CAAS+K,KADiC,CAA5C;AAGA1L,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,wBAAD,CAAN,GACE,wCADF;AAEAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI,CAAC4L,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,0BAAAA,QAAQ,CAACK,sBAAT,GAAkC,EAAlC;AACAkD,0BAAAA,MAAM,CAAC,wBAAD,CAAN,GACE,kCADF;AAEA1B,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAwD,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA;AACD;;AAEDA,wBAAAA,MAAM,CAAC,wBAAD,CAAN,GAAmC,EAAnC;AACAC,wBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,yBAAD,CAAT;AAEAvD,wBAAAA,QAAQ,CAACK,sBAAT,GAAkCgJ,UAAU,CAC1C+D,CAAC,CAAC5K,MAAF,CAAS+K,KADiC,CAA5C;AAGA1L,wBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,yBAAD,CAAX;AACAwB,wBAAAA,WAAW;AACZ;AA9CH;AAAA;AAAA;AAAA;AAAA,4BADF,EAiDG,MAjDH,EAkDG+B,MAAM,CAAClD,sBAAP,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAEiN,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,gCACG/J,MAAM,CAAClD;AADV;AAAA;AAAA;AAAA;AAAA,4BAnDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAfF,eA4EE;AAAA,0CACE;AAAI,oBAAA,OAAO,EAAC,GAAZ;AAAgB,oBAAA,SAAS,EAAC,UAA1B;AAAA,2CACW,GADX,eAEE;AACE,sBAAA,IAAI,EAAC,QADP;AAEE,sBAAA,KAAK,EAAE;AAAEuN,wBAAAA,KAAK,EAAE;AAAT,uBAFT;AAGE,sBAAA,SAAS,EAAC,YAHZ;AAIE,sBAAA,KAAK,EAAE5N,QAAQ,CAACI,gBAJlB;AAKE,sBAAA,QAAQ,EAAGgN,CAAD,IAAO;AACfpN,wBAAAA,QAAQ,CAACM,mBAAT,GAA+B,IAA/B;;AACA,4BAAI+I,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpCvN,0BAAAA,QAAQ,CAACI,gBAAT,GAA4BiJ,UAAU,CACpC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAD2B,CAAtC;AAGA1L,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,kBAAD,CAAN,GAA6B,EAA7B;AACAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI6H,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,GAA6B,CAAjC,EAAoC;AAClCvN,0BAAAA,QAAQ,CAACI,gBAAT,GAA4BiJ,UAAU,CACpC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAD2B,CAAtC;AAGAvN,0BAAAA,QAAQ,CAACE,QAAT,GAAoB,GAApB;AACA2B,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,kBAAD,CAAN,GACE,iCADF;AAEAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI,CAAC4L,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,0BAAAA,QAAQ,CAACI,gBAAT,GAA4B,EAA5B;AACAJ,0BAAAA,QAAQ,CAACE,QAAT,GAAoB,GAApB;AACAqD,0BAAAA,MAAM,CAAC,kBAAD,CAAN,GACE,0BADF;AAEA1B,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAwD,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA;AACD;;AAEDA,wBAAAA,MAAM,CAAC,kBAAD,CAAN,GAA6B,EAA7B;AACAA,wBAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,EAArB;AACAC,wBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,yBAAD,CAAT;AAEAvD,wBAAAA,QAAQ,CAACI,gBAAT,GAA4BiJ,UAAU,CACpC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAD2B,CAAtC;AAGA1L,wBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,yBAAD,CAAX;AACAwB,wBAAAA,WAAW;AACZ;AAlDH;AAAA;AAAA;AAAA;AAAA,4BAFF,EAsDG,GAtDH,EAuDG+B,MAAM,CAACnD,gBAAP,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAEkN,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,gCACG/J,MAAM,CAACnD;AADV;AAAA;AAAA;AAAA;AAAA,4BAxDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eA8DE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAA,4CACE;AACE,sBAAA,IAAI,EAAC,QADP;AAEE,sBAAA,KAAK,EAAE;AAAEwN,wBAAAA,KAAK,EAAE;AAAT,uBAFT;AAGE,sBAAA,SAAS,EAAC,YAHZ;AAIE,sBAAA,KAAK,EAAE5N,QAAQ,CAACE,QAJlB;AAKE,sBAAA,QAAQ,EAAGkN,CAAD,IAAO;AACfpN,wBAAAA,QAAQ,CAACM,mBAAT,GAA+B,KAA/B;;AACA,4BAAI+I,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpCvN,0BAAAA,QAAQ,CAACE,QAAT,GAAoBmJ,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAA9B;AACA1L,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,EAArB;AACAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI6H,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,GAA6B,CAAjC,EAAoC;AAClCvN,0BAAAA,QAAQ,CAACE,QAAT,GAAoBmJ,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAA9B;AACAvN,0BAAAA,QAAQ,CAACI,gBAAT,GAA4B,GAA5B;AACAyB,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,yBAArB;AACAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI,CAAC4L,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,0BAAAA,QAAQ,CAACE,QAAT,GAAoB,EAApB;AACAF,0BAAAA,QAAQ,CAACI,gBAAT,GAA4B,GAA5B;AACAmD,0BAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,kBAArB;AACA1B,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAwB,0BAAAA,WAAW;AACXgC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA;AACD;;AAEDA,wBAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,EAArB;AACAA,wBAAAA,MAAM,CAAC,kBAAD,CAAN,GAA6B,EAA7B;AACAC,wBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,yBAAD,CAAT;AAEAvD,wBAAAA,QAAQ,CAACE,QAAT,GAAoBmJ,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAA9B;AACA1L,wBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,yBAAD,CAAX;AACAwB,wBAAAA,WAAW;AACZ;AA3CH;AAAA;AAAA;AAAA;AAAA,4BADF,EA8CG,MA9CH,EA+CG+B,MAAM,CAACrD,QAAP,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAEoN,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,gCAA+B/J,MAAM,CAACrD;AAAtC;AAAA;AAAA;AAAA;AAAA,4BAhDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BA9DF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA5EF,eA8LE;AAAA,0CACE;AAAI,oBAAA,OAAO,EAAC,GAAZ;AAAgB,oBAAA,SAAS,EAAC,UAA1B;AAAA,+BACG,GADH,SAEM,GAFN,eAGE;AACE,sBAAA,IAAI,EAAC,QADP;AAEE,sBAAA,SAAS,EAAC,aAFZ;AAGE,sBAAA,KAAK,EAAE;AAAE0N,wBAAAA,KAAK,EAAE;AAAT,uBAHT;AAIE,sBAAA,KAAK,EAAE5N,QAAQ,CAACC,WAJlB;AAKE,sBAAA,QAAQ,EAAGmN,CAAD,IAAO;AACf/K,wBAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;;AACA,4BAAI+G,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,KAA+B,CAAnC,EAAsC;AACpCvN,0BAAAA,QAAQ,CAACC,WAAT,GAAuBoJ,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACA1L,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,EAAxB;AACAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AACD,4BAAI6H,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAV,GAA6B,CAAjC,EAAoC;AAClCvN,0BAAAA,QAAQ,CAACC,WAAT,GAAuBoJ,UAAU,CAAC+D,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACAnC,0BAAAA,QAAQ,GAAG,GAAX;AACAC,0BAAAA,WAAW,CAACD,QAAD,CAAX;AACAvJ,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAuD,0BAAAA,MAAM,CAAC,aAAD,CAAN,GACE,4BADF;AAEAC,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA/B,0BAAAA,WAAW;AACX;AACD;;AAED,4BAAI,CAAC4L,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,0BAAAA,QAAQ,CAACC,WAAT,GAAuB,EAAvB;AACAmL,0BAAAA,QAAQ,GAAG,GAAX;AACAC,0BAAAA,WAAW,CAACD,QAAD,CAAX,CAHmB,CAInB;;AACA7H,0BAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,qBAAxB;AACA1B,0BAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,2BAAD,CAAX;AACAwD,0BAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,2BAAD,CAAT;AACA;AACD;;AACDA,wBAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,EAAxB;AACAC,wBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,yBAAD,CAAT;AAEAvD,wBAAAA,QAAQ,CAACC,WAAT,GAAuBmN,CAAC,CAAC5K,MAAF,CAAS+K,KAAhC;AACA/L,wBAAAA,WAAW;AACXK,wBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,yBAAD,CAAX;AACAqC,wBAAAA,OAAO,CAACC,GAAR,CAAYtC,QAAZ;AACD;AA5CH;AAAA;AAAA;AAAA;AAAA,4BAHF,EAiDG,GAjDH,EAkDGuD,MAAM,CAACtD,WAAP,iBACC;AAAK,sBAAA,KAAK,EAAE;AAAEqN,wBAAAA,KAAK,EAAE;AAAT,uBAAZ;AAAA,gCAA+B/J,MAAM,CAACtD;AAAtC;AAAA;AAAA;AAAA;AAAA,4BAnDJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAuDE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAA,2CACE,QAAC,YAAD;AACE,sBAAA,KAAK,EAAEmL,QADT;AAEE,sBAAA,WAAW,EAAE,MAFf;AAGE,sBAAA,iBAAiB,EAAE,IAHrB;AAIE,sBAAA,MAAM,EAAE,MAJV;AAKE,sBAAA,UAAU,EAAE,CAACmC,KAAD,EAAQ3N,KAAR,KAAkB2N;AALhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAvDF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA9LF,eA+PE;AAAA,0CACE;AAAI,oBAAA,OAAO,EAAC,GAAZ;AAAgB,oBAAA,SAAS,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAI,oBAAA,SAAS,EAAC,UAAd;AAAA,2CACE,QAAC,YAAD;AACE,sBAAA,KAAK,EAAEhC,QADT;AAEE,sBAAA,WAAW,EAAE,MAFf;AAGE,sBAAA,iBAAiB,EAAE,IAHrB;AAIE,sBAAA,MAAM,EAAE,MAJV;AAKE,sBAAA,UAAU,EAAE,CAACgC,KAAD,EAAQ3N,KAAR,KAAkB2N;AALhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA/PF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAvZF,eA0qBE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE;AACE,gBAAA,KAAK,EAAEvN,QAAQ,CAACU,MADlB;AAEE,gBAAA,QAAQ,EAAG0M,CAAD,IAAO;AACf/K,kBAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;;AACA,sBAAI,CAAC8K,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,oBAAAA,QAAQ,CAACU,MAAT,GAAkB,EAAlB;AACAmB,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAuD,oBAAAA,MAAM,CAAC,QAAD,CAAN,GAAmB,gBAAnB;AACAC,oBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,qBAAD,CAAT;AACA;AACD;;AAEDA,kBAAAA,MAAM,CAAC,QAAD,CAAN,GAAmB,EAAnB;AACAC,kBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,mBAAD,CAAT;AAEAvD,kBAAAA,QAAQ,CAACU,MAAT,GAAkB0M,CAAC,CAAC5K,MAAF,CAAS+K,KAA3B;AACA1L,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AACAqC,kBAAAA,OAAO,CAACC,GAAR,CAAYtC,QAAZ;AACD,iBAlBH;AAmBE,gBAAA,SAAS,EAAC,cAnBZ;AAAA,wCAqBE;AAAQ,kBAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBArBF,eAsBE;AAAQ,kBAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAtBF,eAuBE;AAAQ,kBAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAvBF,eAwBE;AAAQ,kBAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAxBF,eAyBE;AAAQ,kBAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAzBF,eA0BE;AAAQ,kBAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA1BF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EA6BGuD,MAAM,CAAC7C,MAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAE4M,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAAC7C,MAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBA9BJ,EAmCGV,QAAQ,CAACU,MAAT,IAAmB,CAAC6C,MAAM,CAAC7C,MAA3B,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAE4M,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBApCJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBA1qBF,eAytBE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE,QAAC,UAAD;AACE,gBAAA,EAAE,EAAC,UADL;AAEE,gBAAA,QAAQ,EACNtN,QAAQ,CAACO,QAAT,GAAoB,IAAIC,IAAJ,CAASR,QAAQ,CAACO,QAAlB,CAApB,GAAkD,IAHtD;AAKE,gBAAA,KAAK,EACHP,QAAQ,CAACO,QAAT,GACIjB,MAAM,CACN,IAAIkB,IAAJ,CAASR,QAAQ,CAACO,QAAlB,CADM,EAEN,sBAFM,CADV,GAKI,IAXR;AAaE,gBAAA,SAAS,EAAC,cAbZ;AAcE,gBAAA,UAAU,EAAC,sBAdb;AAeE,gBAAA,cAAc,MAfhB;AAgBE,gBAAA,aAAa,EAAC,GAhBhB;AAiBE,gBAAA,QAAQ,EAAGgN,KAAD,IAAW;AACnBlL,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBiL,KAArB;AACAvN,kBAAAA,QAAQ,CAACO,QAAT,GAAoBgN,KAApB,CAFmB,CAGnB;;AACA1L,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AACD;AAtBH;AAAA;AAAA;AAAA;AAAA,sBADF,EA0BGuD,MAAM,CAAChD,QAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAE+M,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAAChD,QAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAztBF,eA+vBE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,SAAS,EAAC,aAFZ;AAGE,gBAAA,KAAK,EAAE;AAAEqN,kBAAAA,KAAK,EAAE;AAAT,iBAHT;AAIE,gBAAA,KAAK,EAAE5N,QAAQ,CAACa,aAJlB;AAKE,gBAAA,QAAQ,EAAGuM,CAAD,IAAO;AACf/K,kBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;;AACA,sBAAI,CAAC8K,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,oBAAAA,QAAQ,CAACa,aAAT,GAAyB,IAAzB;AACA0C,oBAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,4BAA1B;AACA1B,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAwD,oBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,qBAAD,CAAT;AACA;AACD;;AAED,sBAAIyK,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAR,IAA4B,CAAhC,EAAmC;AACjCvN,oBAAAA,QAAQ,CAACa,aAAT,GAAyBmN,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACApC,oBAAAA,eAAe,CAACD,YAAD,CAAf;AACArJ,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAuD,oBAAAA,MAAM,CAAC,eAAD,CAAN,GACE,6BADF;AAEAC,oBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,qBAAD,CAAT;AACA;AACD;;AAEDA,kBAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,EAA1B;AACAC,kBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,mBAAD,CAAT;AAEAvD,kBAAAA,QAAQ,CAACa,aAAT,GAAyBmN,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACA1L,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AAEAkL,kBAAAA,YAAY,GAAGlL,QAAQ,CAACa,aAAxB;AACAsK,kBAAAA,eAAe,CAACnL,QAAQ,CAACa,aAAV,CAAf;AACAwB,kBAAAA,OAAO,CAACC,GAAR,CAAYtC,QAAZ;AACD;AAlCH;AAAA;AAAA;AAAA;AAAA,sBADF,EAsCGuD,MAAM,CAAC1C,aAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAEyM,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAAC1C,aAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAvCJ,EA6CEb,QAAQ,CAACa,aAAT,GAAyB,CAAzB,IAA8Bb,QAAQ,CAACa,aAAvC,IAAwD,CAAC0C,MAAM,CAAC1C,aAAhE,iBACE;AAAK,gBAAA,KAAK,EAAE;AAAEyM,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA9CJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBA/vBF,eAwzBE;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAGE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,SAAS,EAAC,aAFZ;AAGE,gBAAA,KAAK,EAAE;AAAEM,kBAAAA,KAAK,EAAE;AAAT,iBAHT;AAIE,gBAAA,KAAK,EAAE5N,QAAQ,CAACY,aAJlB;AAKE,gBAAA,QAAQ,EAAGwM,CAAD,IAAO;AACf/K,kBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;;AACA,sBAAI,CAAC8K,CAAC,CAAC5K,MAAF,CAAS+K,KAAd,EAAqB;AACnBvN,oBAAAA,QAAQ,CAACY,aAAT,GAAyB,IAAzB;AACA2C,oBAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,4BAA1B;AACA1B,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAwD,oBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,qBAAD,CAAT;AACA;AACD;;AAED,sBAAIyK,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAR,IAA4B,CAAhC,EAAmC;AACjCvN,oBAAAA,QAAQ,CAACY,aAAT,GAAyBoN,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACAtC,oBAAAA,eAAe,CAACD,YAAD,CAAf;AACAnJ,oBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,qBAAD,CAAX;AACAuD,oBAAAA,MAAM,CAAC,eAAD,CAAN,GACE,6BADF;AAEAC,oBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,qBAAD,CAAT;AACA;AACD;;AAEDA,kBAAAA,MAAM,CAAC,eAAD,CAAN,GAA0B,EAA1B;AACAC,kBAAAA,SAAS,CAAC,EAAE,GAAGD;AAAL,mBAAD,CAAT;AAEAvD,kBAAAA,QAAQ,CAACY,aAAT,GAAyBoN,QAAQ,CAACZ,CAAC,CAAC5K,MAAF,CAAS+K,KAAV,CAAjC;AACA1L,kBAAAA,WAAW,CAAC,EAAE,GAAG7B;AAAL,mBAAD,CAAX;AAEAgL,kBAAAA,YAAY,GAAGhL,QAAQ,CAACY,aAAxB;AACAqK,kBAAAA,eAAe,CAACjL,QAAQ,CAACY,aAAV,CAAf;AACAyB,kBAAAA,OAAO,CAACC,GAAR,CAAYtC,QAAZ;AACD;AAlCH;AAAA;AAAA;AAAA;AAAA,sBADF,EAsCGuD,MAAM,CAAC3C,aAAP,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAE0M,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEG/J,MAAM,CAAC3C,aAFV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAvCJ,EA4CGZ,QAAQ,CAACY,aAAT,GAAyB,CAAzB,IAA8BZ,QAAQ,CAACY,aAAvC,IAAwD,CAAC2C,MAAM,CAAC3C,aAAhE,iBACC;AAAK,gBAAA,KAAK,EAAE;AAAE0M,kBAAAA,KAAK,EAAE;AAAT,iBAAZ;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBA7CJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxzBF,eAg3BE,QAAC,KAAD,CAAO,MAAP;AAAA,oCACE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,WAAhB;AAA4B,cAAA,OAAO,EAAEpI,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,SAAhB;AAA0B,cAAA,OAAO,EAAE8D,YAAnC;AAAA,wBACGvF,YAAY,GACT,aACA,QAAC,OAAD;AACE,gBAAA,EAAE,EAAC,MADL;AAEE,gBAAA,SAAS,EAAC,QAFZ;AAGE,gBAAA,IAAI,EAAC,IAHP;AAIE,gBAAA,IAAI,EAAC,QAJP;AAKE,+BAAa;AALf;AAAA;AAAA;AAAA;AAAA,sBADA,GAQE,gBATO,GAUTzD,QAAQ,CAACD,EAAT,GACE,QADF,GAEE;AAbR;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAh3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cA7DF;AAAA;AAAA;AAAA;AAAA;AAAA,YA9BF;AAAA,kBADF;AAs+BD,CA/0DiC;AAAA,UAChCvB,mBADgC;AAAA,GAAlC;MAAMmB,e;AAi1DN,eAAeA,eAAf","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from \"react\";\nimport QuotationPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport QuotationView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { DebounceInput } from \"react-debounce-input\";\n\nconst QuotationCreate = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        shipping_handling_fees: 0.0,\n        is_discount_percent: false,\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"delivered\",\n        price_type: \"retail\",\n        delivery_days: 7,\n        validity_days: 2,\n      };\n\n      selectedProducts = [];\n      setSelectedProducts([]);\n\n      selectedStores = [];\n      setSelectedStores([]);\n\n      selectedCustomers = [];\n      setSelectedCustomers([]);\n\n      selectedDeliveredByUsers = [];\n      setSelectedDeliveredByUsers([]);\n\n      selectedDeliveredBySignatures = [];\n      setSelectedDeliveredBySignatures([]);\n\n      reCalculate();\n\n      if (cookies.get(\"user_id\")) {\n        selectedDeliveredByUsers = [\n          {\n            id: cookies.get(\"user_id\"),\n            name: cookies.get(\"user_name\"),\n          },\n        ];\n        formData.delivered_by = cookies.get(\"user_id\");\n        setFormData({ ...formData });\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      }\n      if (cookies.get(\"store_id\")) {\n        formData.store_id = cookies.get(\"store_id\");\n        formData.store_name = cookies.get(\"store_name\");\n      }\n\n      setFormData({ ...formData });\n      if (id) {\n        getQuotation(id);\n      }\n      SetShow(true);\n    },\n  }));\n\n  useEffect(() => {\n    const listener = (event) => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-order.123\");\n        // event.preventDefault();\n\n        var form = event.target.form;\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n            event.preventDefault();\n          }\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  const selectedDate = new Date();\n\n  //const history = useHistory();\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies();\n\n  //fields\n  let [formData, setFormData] = useState({\n    vat_percent: 15.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    //date_str: format(new Date(), \"MMM dd yyyy\"),\n    date_str: new Date(),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"created\",\n    price_type: \"retail\",\n    is_discount_percent: false,\n    validity_days:2,\n    delivery_days:7,\n  });\n\n  //Store Auto Suggestion\n  const [storeOptions, setStoreOptions] = useState([]);\n  let [selectedStores, setSelectedStores] = useState([]);\n  const [isStoresLoading, setIsStoresLoading] = useState(false);\n\n  //Customer Auto Suggestion\n  const [customerOptions, setCustomerOptions] = useState([]);\n  let [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isCustomersLoading, setIsCustomersLoading] = useState(false);\n\n  //Product Auto Suggestion\n  let [productOptions, setProductOptions] = useState([]);\n  let [selectedProduct, setSelectedProduct] = useState([]);\n  let [selectedProducts, setSelectedProducts] = useState([]);\n  const [isProductsLoading, setIsProductsLoading] = useState(false);\n\n  //Delivered By Auto Suggestion\n  const [deliveredByUserOptions, setDeliveredByUserOptions] = useState([]);\n  let [selectedDeliveredByUsers, setSelectedDeliveredByUsers] = useState([]);\n  const [isDeliveredByUsersLoading, setIsDeliveredByUsersLoading] =\n    useState(false);\n\n  //Delivered By Signature Auto Suggestion\n  const [deliveredBySignatureOptions, setDeliveredBySignatureOptions] =\n    useState([]);\n  let [selectedDeliveredBySignatures, setSelectedDeliveredBySignatures] =\n    useState([]);\n  const [isDeliveredBySignaturesLoading, setIsDeliveredBySignaturesLoading] =\n    useState(false);\n\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n    if (!at) {\n      // history.push(\"/dashboard/quotations\");\n      window.location = \"/\";\n    }\n  });\n\n  function getQuotation(id) {\n    console.log(\"inside get Quotation\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    fetch(\"/v1/quotation/\" + id, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          const error = data && data.errors;\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n\n        console.log(\"Response:\");\n        console.log(data);\n\n        let quotation = data.result;\n        formData = {\n          id: quotation.id,\n          code: quotation.code,\n          store_id: quotation.store_id,\n          customer_id: quotation.customer_id,\n          // date_str: quotation.date_str,\n          date: quotation.date,\n          vat_percent: quotation.vat_percent,\n          discount: quotation.discount,\n          discount_percent: quotation.discount_percent,\n          status: quotation.status,\n          delivered_by: quotation.delivered_by,\n          delivered_by_signature_id: quotation.delivered_by_signature_id,\n          is_discount_percent: quotation.is_discount_percent,\n          shipping_handling_fees: quotation.shipping_handling_fees,\n          delivery_days: quotation.delivery_days?quotation.delivery_days:7,\n          validity_days: quotation.validity_days?quotation.validity_days:2,\n        };\n        formData.date_str = data.result.date;\n\n        if (formData.is_discount_percent) {\n          formData.discountValue = formData.discount_percent;\n        } else {\n          formData.discountValue = formData.discount;\n        }\n\n        selectedProducts = quotation.products;\n        setSelectedProducts([...selectedProducts]);\n\n        let selectedStores = [\n          {\n            id: quotation.store_id,\n            name: quotation.store_name,\n          },\n        ];\n\n        let selectedCustomers = [\n          {\n            id: quotation.customer_id,\n            name: quotation.customer_name,\n            search_label: quotation.customer_name,\n          },\n        ];\n\n        let selectedDeliveredByUsers = [\n          {\n            id: quotation.delivered_by,\n            name: quotation.delivered_by_name,\n          },\n        ];\n\n        if (quotation.delivered_by_signature_id) {\n          let selectedDeliveredBySignatures = [\n            {\n              id: quotation.delivered_by_signature_id,\n              name: quotation.delivered_by_signature_name,\n            },\n          ];\n          setSelectedDeliveredBySignatures([...selectedDeliveredBySignatures]);\n        }\n\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n\n        setSelectedStores([...selectedStores]);\n        setSelectedCustomers([...selectedCustomers]);\n\n        setFormData({ ...formData });\n\n        reCalculate();\n      })\n      .catch((error) => {\n        setProcessing(false);\n        setErrors(error);\n      });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object)\n      .map(function (key) {\n        return `search[${key}]=` + encodeURIComponent(object[key]);\n      })\n      .join(\"&\");\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggestStores\");\n    setStoreOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsStoresLoading(true);\n    let result = await fetch(\n      \"/v1/store?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setStoreOptions(data.result);\n    setIsStoresLoading(false);\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n    setCustomerOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    setIsCustomersLoading(true);\n    let result = await fetch(\n      \"/v1/customer?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setCustomerOptions(data.result);\n    setIsCustomersLoading(false);\n  }\n\n  function GetProductUnitPriceInStore(storeId, productStores) {\n    if (!productStores) {\n      return \"\";\n    }\n\n    for (var i = 0; i < productStores.length; i++) {\n      console.log(\"productStores[i]:\", productStores[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (productStores[i].store_id === storeId) {\n        console.log(\"macthed\");\n        console.log(\n          \"productStores[i].retail_unit_price:\",\n          productStores[i].retail_unit_price\n        );\n        return productStores[i];\n      }\n    }\n    console.log(\"not matched\");\n    return \"\";\n  }\n\n  function GetProductPurchaseUnitPriceInStore(storeId, unitPriceListArray) {\n    if (!unitPriceListArray) {\n      return \"\";\n    }\n\n    for (var i = 0; i < unitPriceListArray.length; i++) {\n      console.log(\"unitPriceListArray[i]:\", unitPriceListArray[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (unitPriceListArray[i].store_id === storeId) {\n        return unitPriceListArray[i].purchase_unit_price;\n      } else {\n        console.log(\"not matched\");\n      }\n    }\n    return \"\";\n  }\n\n  let [openProductSearchResult, setOpenProductSearchResult] = useState(false);\n\n  async function suggestProducts(searchTerm) {\n    console.log(\"Inside handle suggestProducts\");\n    setProductOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n\n    if (cookies.get(\"store_id\")) {\n      params.store_id = cookies.get(\"store_id\");\n    }\n\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,item_code,bar_code,name,product_stores,unit,part_number,name_in_arabic\";\n    setIsProductsLoading(true);\n    let result = await fetch(\n      \"/v1/product?\" + Select + queryString + \"&limit=200\",\n      requestOptions\n    );\n    let data = await result.json();\n\n    let products = data.result;\n    if (!products || products.length === 0) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    openProductSearchResult = true;\n    setOpenProductSearchResult(true);\n    setProductOptions(products);\n    setIsProductsLoading(false);\n  }\n\n  async function getProductByBarCode(barcode) {\n    formData.barcode = barcode;\n    setFormData({ ...formData });\n    console.log(\"Inside getProductByBarCode\");\n    errors[\"bar_code\"] = \"\";\n    setErrors({ ...errors });\n\n    console.log(\"barcode:\" + formData.barcode);\n    if (!formData.barcode) {\n      return;\n    }\n\n    if (formData.barcode.length === 13) {\n      formData.barcode = formData.barcode.slice(0, -1);\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";\n    let result = await fetch(\n      \"/v1/product/barcode/\" + formData.barcode + \"?\" + Select,\n      requestOptions\n    );\n    let data = await result.json();\n\n    let product = data.result;\n    if (product) {\n      addProduct(product);\n    } else {\n      errors[\"bar_code\"] = \"Invalid Barcode:\" + formData.barcode;\n      setErrors({ ...errors });\n    }\n\n    formData.barcode = \"\";\n    setFormData({ ...formData });\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setDeliveredByUserOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredByUsersLoading(true);\n    let result = await fetch(\n      \"/v1/user?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredByUserOptions(data.result);\n    setIsDeliveredByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setDeliveredBySignatureOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredBySignaturesLoading(true);\n    let result = await fetch(\n      \"/v1/signature?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredBySignatureOptions(data.result);\n    setIsDeliveredBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n\n    formData.products = [];\n    for (var i = 0; i < selectedProducts.length; i++) {\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        name: selectedProducts[i].name,\n        name_in_arabic: selectedProducts[i].name_in_arabic,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        purchase_unit_price: parseFloat(\n          selectedProducts[i].purchase_unit_price\n        ),\n        unit: selectedProducts[i].unit,\n        part_number: selectedProducts[i].part_number,\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n\n\n    if (cookies.get(\"store_id\")) {\n      formData.store_id = cookies.get(\"store_id\");\n    }\n\n    console.log(\"formData.discount:\", formData.discount);\n\n    let endPoint = \"/v1/quotation\";\n    let method = \"POST\";\n    if (formData.id) {\n      endPoint = \"/v1/quotation/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n      body: JSON.stringify(formData),\n    };\n\n    console.log(\"formData:\", formData);\n\n    setProcessing(true);\n    fetch(endPoint, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = data && data.errors;\n          //const error = data.errors\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n        setProcessing(false);\n\n        console.log(\"Response:\");\n        console.log(data);\n        props.showToastMessage(\"Quotation Created Successfully!\", \"success\");\n        if (props.refreshList) {\n          props.refreshList();\n        }\n        handleClose();\n        props.openDetailsView(data.result.id);\n      })\n      .catch((error) => {\n        setProcessing(false);\n        console.log(\"Inside catch\");\n        console.log(error);\n        setErrors({ ...error });\n        console.error(\"There was an error!\", error);\n        props.showToastMessage(\"Error Creating Quotation!\", \"danger\");\n      });\n  }\n\n  function isProductAdded(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function addProduct(product) {\n    console.log(\"Inside Add product\");\n    if (!formData.store_id) {\n      errors.product_id = \"Please Select a Store and try again\";\n      setErrors({ ...errors });\n      return;\n    }\n\n    errors.product_id = \"\";\n    if (!product) {\n      errors.product_id = \"Invalid Product\";\n      setErrors({ ...errors });\n      return;\n    }\n\n    let unitPrice = GetProductUnitPriceInStore(\n      formData.store_id,\n      product.stores\n    );\n    \n    product.unit_price = unitPrice.retail_unit_price;\n    product.purchase_unit_price = unitPrice.purchase_unit_price;\n\n    let alreadyAdded = false;\n    let index = -1;\n    let quantity = 0.0;\n    product.quantity = 1.0;\n\n    if (isProductAdded(product.id)) {\n      alreadyAdded = true;\n      index = getProductIndex(product.id);\n      quantity = parseFloat(\n        selectedProducts[index].quantity + product.quantity\n      );\n    } else {\n      quantity = parseFloat(product.quantity);\n    }\n\n    console.log(\"quantity:\", quantity);\n\n    errors.quantity = \"\";\n\n    if (alreadyAdded) {\n      selectedProducts[index].quantity = parseFloat(quantity);\n    }\n\n    if (!alreadyAdded) {\n      let item = {\n        product_id: product.id,\n        code: product.item_code,\n        part_number: product.part_number,\n        name: product.name,\n        quantity: product.quantity,\n        product_stores: product.product_stores,\n        unit: product.unit,\n      };\n\n      if (product.unit_price) {\n        item.unit_price = parseFloat(product.unit_price);\n        console.log(\"item.unit_price:\", item.unit_price);\n      }\n\n      if (product.purchase_unit_price) {\n        item.purchase_unit_price = parseFloat(product.purchase_unit_price);\n        console.log(\"item.purchase_unit_price\", item.purchase_unit_price);\n      }\n\n      selectedProducts.push(item);\n    }\n    console.log(\"selectedProducts:\", selectedProducts);\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  function getProductIndex(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return i;\n      }\n    }\n    return false;\n  }\n\n  function removeProduct(product) {\n    const index = selectedProducts.indexOf(product);\n    if (index > -1) {\n      selectedProducts.splice(index, 1);\n    }\n    setSelectedProducts([...selectedProducts]);\n\n    reCalculate();\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.0;\n    for (var i = 0; i < selectedProducts.length; i++) {\n      totalPrice +=\n        parseFloat(selectedProducts[i].unit_price) *\n        parseFloat(selectedProducts[i].quantity);\n    }\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [deliveryDays, setDeliveryDays] = useState(7);\n  let [validityDays, setValidityDays] = useState(2);\n  let [vatPrice, setVatPrice] = useState(0.0);\n\n  function findVatPrice() {\n    vatPrice = 0.0;\n    if (totalPrice > 0) {\n      vatPrice = (\n        parseFloat(parseFloat(formData.vat_percent) / 100) *\n        (parseFloat(totalPrice) +\n          parseFloat(formData.shipping_handling_fees) -\n          parseFloat(formData.discount))\n      ).toFixed(2);\n      console.log(\"vatPrice:\", vatPrice);\n    }\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.0);\n\n  function findNetTotal() {\n    netTotal = 0.0;\n    if (totalPrice > 0) {\n      netTotal = (\n        parseFloat(totalPrice) +\n        parseFloat(formData.shipping_handling_fees) -\n        parseFloat(formData.discount) +\n        parseFloat(vatPrice)\n      ).toFixed(2);\n    }\n    setNetTotal(netTotal);\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.0);\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(\n        parseFloat(formData.discount / totalPrice) * 100\n      ).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(\n        totalPrice * parseFloat(formData.discount_percent / 100)\n      ).toFixed(2);\n      setFormData({ ...formData });\n    }\n  }\n\n  function reCalculate() {\n    findTotalPrice();\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const StoreCreateFormRef = useRef();\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const CustomerCreateFormRef = useRef();\n  function openCustomerCreateForm() {\n    CustomerCreateFormRef.current.open();\n  }\n\n  const ProductCreateFormRef = useRef();\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const UserCreateFormRef = useRef();\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PreviewRef = useRef();\n  function openPreview() {\n    let model = {};\n    model = JSON.parse(JSON.stringify(formData));\n    model.products = selectedProducts;\n    model.net_total = netTotal;\n    model.vat_price = vatPrice;\n    model.total = totalPrice;\n\n    //setFormData({ ...formData });\n    PreviewRef.current.open(model);\n  }\n\n  return (\n    <>\n      <ProductView\n        ref={ProductDetailsViewRef}\n        openUpdateForm={openProductUpdateForm}\n        openCreateForm={openProductCreateForm}\n      />\n      <ProductCreate\n        ref={ProductCreateFormRef}\n        showToastMessage={props.showToastMessage}\n        openDetailsView={openProductDetailsView}\n      />\n\n      <QuotationPreview ref={PreviewRef} />\n\n      <StoreCreate\n        ref={StoreCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <CustomerCreate\n        ref={CustomerCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <UserCreate\n        ref={UserCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <SignatureCreate\n        ref={SignatureCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <Modal\n        show={show}\n        size=\"xl\"\n        fullscreen\n        onHide={handleClose}\n        animation={false}\n        backdrop=\"static\"\n        scrollable={true}\n      >\n        <Modal.Header>\n          <Modal.Title>\n            {formData.id\n              ? \"Update Quotation #\" + formData.code\n              : \"Create New Quotation\"}\n          </Modal.Title>\n\n          <div className=\"col align-self-end text-end\">\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;\n            {formData.id ? (\n              <Button\n                variant=\"primary\"\n                onClick={() => {\n                  handleClose();\n                  props.openDetailsView(formData.id);\n                }}\n              >\n                <i className=\"bi bi-eye\"></i> View Detail\n              </Button>\n            ) : (\n              \"\"\n            )}\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={handleCreate}>\n              {isProcessing\n                ? (\n                  <Spinner\n                    as=\"span\"\n                    animation=\"border\"\n                    size=\"sm\"\n                    role=\"status\"\n                    aria-hidden={true}\n                  />\n                ) + \" Creating...\"\n                : \"\"}\n              {formData.id ? \"Update\" : \"Create\"}\n            </Button>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={handleClose}\n              aria-label=\"Close\"\n            ></button>\n          </div>\n        </Modal.Header>\n        <Modal.Body>\n          <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n            {!cookies.get(\"store_name\") ? (\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Store*</label>\n\n                <div className=\"input-group mb-3\">\n                  <Typeahead\n                    id=\"store_id\"\n                    labelKey=\"name\"\n                    isLoading={isStoresLoading}\n                    isInvalid={errors.store_id ? true : false}\n                    onChange={(selectedItems) => {\n                      errors.store_id = \"\";\n                      setErrors(errors);\n                      if (selectedItems.length === 0) {\n                        errors.store_id = \"Invalid Store selected\";\n                        setErrors(errors);\n                        formData.store_id = \"\";\n                        setFormData({ ...formData });\n                        setSelectedStores([]);\n                        return;\n                      }\n                      formData.store_id = selectedItems[0].id;\n                      setFormData({ ...formData });\n                      setSelectedStores(selectedItems);\n                      //SetPriceOfAllProducts(selectedItems[0].id);\n                    }}\n                    options={storeOptions}\n                    placeholder=\"Select Store\"\n                    selected={selectedStores}\n                    highlightOnlyResult={true}\n                    onInputChange={(searchTerm, e) => {\n                      suggestStores(searchTerm);\n                    }}\n                  />\n\n                  <Button\n                    hide={true.toString()}\n                    onClick={openStoreCreateForm}\n                    className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                    type=\"button\"\n                    id=\"button-addon1\"\n                  >\n                    {\" \"}\n                    <i className=\"bi bi-plus-lg\"></i> New\n                  </Button>\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi x-lg\"> </i>\n                    {errors.store_id}\n                  </div>\n                  {formData.store_id && !errors.store_id && (\n                    <div style={{ color: \"green\" }}>\n                      <i className=\"bi bi-check-lg\"> </i>\n                      Looks good!\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Customer*</label>\n\n              <div className=\"input-group mb-3\">\n                <Typeahead\n                  id=\"customer_id\"\n                  labelKey=\"search_label\"\n                  isLoading={isCustomersLoading}\n                  isInvalid={errors.customer_id ? true : false}\n                  onChange={(selectedItems) => {\n                    errors.customer_id = \"\";\n                    setErrors(errors);\n                    if (selectedItems.length === 0) {\n                      errors.customer_id = \"Invalid Customer selected\";\n                      setErrors(errors);\n                      formData.customer_id = \"\";\n                      setFormData({ ...formData });\n                      setSelectedCustomers([]);\n                      return;\n                    }\n                    formData.customer_id = selectedItems[0].id;\n                    setFormData({ ...formData });\n                    setSelectedCustomers(selectedItems);\n                  }}\n                  options={customerOptions}\n                  placeholder=\"Type name or mob\"\n                  selected={selectedCustomers}\n                  highlightOnlyResult={true}\n                  onInputChange={(searchTerm, e) => {\n                    suggestCustomers(searchTerm);\n                  }}\n                />\n                <Button\n                  hide={true.toString()}\n                  onClick={openCustomerCreateForm}\n                  className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                  type=\"button\"\n                  id=\"button-addon1\"\n                >\n                  {\" \"}\n                  <i className=\"bi bi-plus-lg\"></i> New\n                </Button>\n                {errors.customer_id && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.customer_id}\n                  </div>\n                )}\n                {formData.customer_id && !errors.customer_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Product Barcode Scan</label>\n\n              <div className=\"input-group mb-3\">\n                <DebounceInput\n                  minLength={3}\n                  debounceTimeout={500}\n                  placeholder=\"Scan Barcode\"\n                  className=\"form-control barcode\"\n                  value={formData.barcode}\n                  onChange={(event) => getProductByBarCode(event.target.value)}\n                />\n                {errors.bar_code && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.bar_code}\n                  </div>\n                )}\n                {formData.bar_code && !errors.bar_code && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Product*</label>\n              <Typeahead\n                id=\"product_id\"\n                size=\"lg\"\n                labelKey=\"search_label\"\n                emptyLabel=\"\"\n                clearButton={true}\n                open={openProductSearchResult}\n                isLoading={isProductsLoading}\n                isInvalid={errors.product_id ? true : false}\n                onChange={(selectedItems) => {\n                  if (selectedItems.length === 0) {\n                    errors[\"product_id\"] = \"Invalid Product selected\";\n                    setErrors(errors);\n                    return;\n                  }\n                  errors[\"product_id\"] = \"\";\n                  setErrors({ ...errors });\n\n                  if (formData.store_id) {\n                    addProduct(selectedItems[0]);\n                  }\n                  setOpenProductSearchResult(false);\n                }}\n                options={productOptions}\n                selected={selectedProduct}\n                placeholder=\"Search By Part No. / Name / Name in Arabic\"\n                highlightOnlyResult={true}\n                onInputChange={(searchTerm, e) => {\n                  suggestProducts(searchTerm);\n                }}\n              />\n              <Button\n                hide={true.toString()}\n                onClick={openProductCreateForm}\n                className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                type=\"button\"\n                id=\"button-addon1\"\n              >\n                {\" \"}\n                <i className=\"bi bi-plus-lg\"></i> New\n              </Button>\n              {errors.product_id ? (\n                <div style={{ color: \"red\" }}>\n                  <i className=\"bi bi-x-lg\"> </i>\n                  {errors.product_id}\n                </div>\n              ) : null}\n              {selectedProduct[0] &&\n                selectedProduct[0].id &&\n                !errors.product_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n            </div>\n\n            <div\n              className=\"table-responsive\"\n              style={{\n                overflowX: \"auto\",\n                maxHeight: \"400px\",\n                overflowY: \"auto\",\n              }}\n            >\n              <table className=\"table table-striped table-sm table-bordered\">\n                <thead>\n                  <tr className=\"text-center\">\n                    <th style={{ width: \"3%\" }}>Remove</th>\n                    <th style={{ width: \"5%\" }}>SI No.</th>\n                    <th style={{ width: \"10%\" }}>Part No.</th>\n                    <th style={{ width: \"34%\" }} className=\"text-start\">\n                      Name\n                    </th>\n                    <th style={{ width: \"11%\" }}>Qty</th>\n                    <th style={{ width: \"11%\" }}>Purchase Unit Price</th>\n                    <th style={{ width: \"11%\" }}>Unit Price</th>\n                    <th style={{ width: \"15%\" }}>Price</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {selectedProducts\n                    .map((product, index) => (\n                      <tr key={index} className=\"text-center\">\n                        <td>\n                          <div\n                            style={{ color: \"red\", cursor: \"pointer\" }}\n                            onClick={() => {\n                              removeProduct(product);\n                            }}\n                          >\n                            <i className=\"bi bi-x-lg\"> </i>\n                          </div>\n                        </td>\n                        <td>{index + 1}</td>\n                        <td>{product.part_number}</td>\n                        <td\n                          style={{\n                            textDecoration: \"underline\",\n                            color: \"blue\",\n                            cursor: \"pointer\",\n                          }}\n                          className=\"text-start\"\n                          onClick={() => {\n                            openProductDetailsView(product.product_id);\n                            console.log(\"okk,id:\", product.product_id);\n                          }}\n                        >\n                          {product.name}\n                        </td>\n                        <td style={{ width: \"155px\" }}>\n                          <div className=\"input-group mb-3\">\n                            <input\n                              type=\"number\"\n                              value={product.quantity}\n                              className=\"form-control\"\n                              placeholder=\"Quantity\"\n                              onChange={(e) => {\n                                errors[\"quantity_\" + index] = \"\";\n                                setErrors({ ...errors });\n                                if (!e.target.value) {\n                                  errors[\"quantity_\" + index] =\n                                    \"Invalid Quantity\";\n                                  selectedProducts[index].quantity =\n                                    e.target.value;\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                if (parseFloat(e.target.value) === 0) {\n                                  errors[\"quantity_\" + index] =\n                                    \"Quantity should be > 0\";\n                                  selectedProducts[index].quantity =\n                                    e.target.value;\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                product.quantity = parseFloat(e.target.value);\n                                reCalculate();\n\n                                selectedProducts[index].quantity = parseFloat(\n                                  e.target.value\n                                );\n                                console.log(\n                                  \"selectedProducts[index].quantity:\",\n                                  selectedProducts[index].quantity\n                                );\n                                setSelectedProducts([...selectedProducts]);\n                                reCalculate();\n                              }}\n                            />\n                            <span\n                              className=\"input-group-text\"\n                              id=\"basic-addon2\"\n                            >\n                              {\" \"}\n                              {selectedProducts[index].unit\n                                ? selectedProducts[index].unit\n                                : \"Units\"}\n                            </span>\n                          </div>\n                          {errors[\"quantity_\" + index] && (\n                            <div style={{ color: \"red\" }}>\n                              <i className=\"bi bi-x-lg\"> </i>\n                              {errors[\"quantity_\" + index]}\n                            </div>\n                          )}\n                        </td>\n                        <td style={{ width: \"150px\" }}>\n                          {product.purchase_unit_price ? (\n                            <NumberFormat\n                              value={product.purchase_unit_price.toFixed(2)}\n                              displayType={\"text\"}\n                              thousandSeparator={true}\n                              suffix={\" SAR\"}\n                              renderText={(value, props) => value}\n                            />\n                          ) : (\n                            \"\"\n                          )}\n                        </td>\n                        <td style={{ width: \"180px\" }}>\n                          <div className=\"input-group mb-3\">\n                            <input\n                              type=\"number\"\n                              value={product.unit_price}\n                              className=\"form-control\"\n                              placeholder=\"Unit Price\"\n                              onChange={(e) => {\n                                errors[\"unit_price_\" + index] = \"\";\n                                setErrors({ ...errors });\n                                if (!e.target.value) {\n                                  errors[\"unit_price_\" + index] =\n                                    \"Invalid Unit Price\";\n                                  selectedProducts[index].unit_price =\n                                    parseFloat(e.target.value);\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                if (parseFloat(e.target.value) === 0) {\n                                  errors[\"unit_price_\" + index] =\n                                    \"Unit Price shoudl be > 0\";\n                                  selectedProducts[index].unit_price =\n                                    parseFloat(e.target.value);\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                selectedProducts[index].unit_price = parseFloat(\n                                  e.target.value\n                                );\n                                console.log(\n                                  \"selectedProducts[index].unit_price:\",\n                                  selectedProducts[index].unit_price\n                                );\n                                setSelectedProducts([...selectedProducts]);\n                                reCalculate();\n                              }}\n                            />\n                            <span\n                              className=\"input-group-text\"\n                              id=\"basic-addon2\"\n                            >\n                              SAR\n                            </span>\n                          </div>\n                          {errors[\"unit_price_\" + index] && (\n                            <div style={{ color: \"red\" }}>\n                              <i className=\"bi bi-x-lg\"> </i>\n                              {errors[\"unit_price_\" + index]}\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"text-end\">\n                          <NumberFormat\n                            value={(\n                              product.unit_price * product.quantity\n                            ).toFixed(2)}\n                            displayType={\"text\"}\n                            thousandSeparator={true}\n                            suffix={\" SAR\"}\n                            renderText={(value, props) => value}\n                          />\n                        </td>\n                      </tr>\n                    ))\n                    .reverse()}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"table-responsive\">\n              <table className=\"table table-striped table-sm table-bordered\">\n                <tbody>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Total\n                    </th>\n                    <td className=\"text-end\" style={{ width: \"200px\" }}>\n                      <NumberFormat\n                        value={totalPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Shipping & Handling Fees\n                    </th>\n                    <td className=\"text-end\">\n                      <input\n                        type=\"number\"\n                        style={{ width: \"150px\" }}\n                        className=\"text-start\"\n                        value={formData.shipping_handling_fees}\n                        onChange={(e) => {\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.shipping_handling_fees = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"shipping_handling_fees\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.shipping_handling_fees = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"shipping_handling_fees\"] =\n                              \"Shipping / Handling Fees should be > 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.shipping_handling_fees = \"\";\n                            errors[\"shipping_handling_fees\"] =\n                              \"Invalid Shipping / Handling Fees\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"shipping_handling_fees\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.shipping_handling_fees = parseFloat(\n                            e.target.value\n                          );\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\" SAR\"}\n                      {errors.shipping_handling_fees && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.shipping_handling_fees}\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Discount{\" \"}\n                      <input\n                        type=\"number\"\n                        style={{ width: \"50px\" }}\n                        className=\"text-start\"\n                        value={formData.discount_percent}\n                        onChange={(e) => {\n                          formData.is_discount_percent = true;\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.discount_percent = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"discount_percent\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.discount_percent = parseFloat(\n                              e.target.value\n                            );\n                            formData.discount = 0.0;\n                            setFormData({ ...formData });\n                            errors[\"discount_percent\"] =\n                              \"Discount percent should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.discount_percent = \"\";\n                            formData.discount = 0.0;\n                            errors[\"discount_percent\"] =\n                              \"Invalid Discount Percent\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"discount_percent\"] = \"\";\n                          errors[\"discount\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.discount_percent = parseFloat(\n                            e.target.value\n                          );\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\"%\"}\n                      {errors.discount_percent && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.discount_percent}\n                        </div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <input\n                        type=\"number\"\n                        style={{ width: \"150px\" }}\n                        className=\"text-start\"\n                        value={formData.discount}\n                        onChange={(e) => {\n                          formData.is_discount_percent = false;\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.discount = parseFloat(e.target.value);\n                            setFormData({ ...formData });\n                            errors[\"discount\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.discount = parseFloat(e.target.value);\n                            formData.discount_percent = 0.0;\n                            setFormData({ ...formData });\n                            errors[\"discount\"] = \"Discount should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.discount = \"\";\n                            formData.discount_percent = 0.0;\n                            errors[\"discount\"] = \"Invalid Discount\";\n                            setFormData({ ...formData });\n                            reCalculate();\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"discount\"] = \"\";\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.discount = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\" SAR\"}\n                      {errors.discount && (\n                        <div style={{ color: \"red\" }}>{errors.discount}</div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      {\" \"}\n                      VAT{\" \"}\n                      <input\n                        type=\"number\"\n                        className=\"text-center\"\n                        style={{ width: \"50px\" }}\n                        value={formData.vat_percent}\n                        onChange={(e) => {\n                          console.log(\"Inside onchange vat percent\");\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.vat_percent = parseFloat(e.target.value);\n                            setFormData({ ...formData });\n                            errors[\"vat_percent\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.vat_percent = parseFloat(e.target.value);\n                            vatPrice = 0.0;\n                            setVatPrice(vatPrice);\n                            setFormData({ ...formData });\n                            errors[\"vat_percent\"] =\n                              \"Vat percent should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.vat_percent = \"\";\n                            vatPrice = 0.0;\n                            setVatPrice(vatPrice);\n                            //formData.discount_percent = 0.00;\n                            errors[\"vat_percent\"] = \"Invalid vat percent\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n                          errors[\"vat_percent\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.vat_percent = e.target.value;\n                          reCalculate();\n                          setFormData({ ...formData });\n                          console.log(formData);\n                        }}\n                      />\n                      {\"%\"}\n                      {errors.vat_percent && (\n                        <div style={{ color: \"red\" }}>{errors.vat_percent}</div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <NumberFormat\n                        value={vatPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Net Total\n                    </th>\n                    <th className=\"text-end\">\n                      <NumberFormat\n                        value={netTotal}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </th>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Status*</label>\n\n              <div className=\"input-group mb-3\">\n                <select\n                  value={formData.status}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange status\");\n                    if (!e.target.value) {\n                      formData.status = \"\";\n                      setFormData({ ...formData });\n                      errors[\"status\"] = \"Invalid Status\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"status\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.status = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                >\n                  <option value=\"created\">Created</option>\n                  <option value=\"delivered\">Delivered</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"accepted\">Accepted</option>\n                  <option value=\"rejected\">Rejected</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                </select>\n                {errors.status && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.status}\n                  </div>\n                )}\n                {formData.status && !errors.status && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Date*</label>\n\n              <div className=\"input-group mb-3\">\n                <DatePicker\n                  id=\"date_str\"\n                  selected={\n                    formData.date_str ? new Date(formData.date_str) : null\n                  }\n                  value={\n                    formData.date_str\n                      ? format(\n                        new Date(formData.date_str),\n                        \"MMMM d, yyyy h:mm aa\"\n                      )\n                      : null\n                  }\n                  className=\"form-control\"\n                  dateFormat=\"MMMM d, yyyy h:mm aa\"\n                  showTimeSelect\n                  timeIntervals=\"1\"\n                  onChange={(value) => {\n                    console.log(\"Value\", value);\n                    formData.date_str = value;\n                    // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n                    setFormData({ ...formData });\n                  }}\n                />\n\n                {errors.date_str && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.date_str}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">Validity (# of Days)*</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  type=\"number\"\n                  className=\"text-center\"\n                  style={{ width: \"50px\" }}\n                  value={formData.validity_days}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange validity days\");\n                    if (!e.target.value) {\n                      formData.validity_days = null;\n                      errors[\"validity_days\"] = \"Validity days are required\";\n                      setFormData({ ...formData });\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    if (parseInt(e.target.value) <= 0) {\n                      formData.validity_days = parseInt(e.target.value);\n                      setValidityDays(validityDays);\n                      setFormData({ ...formData });\n                      errors[\"validity_days\"] =\n                        \"Validity days should be > 0\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"validity_days\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.validity_days = parseInt(e.target.value);\n                    setFormData({ ...formData });\n\n                    validityDays = formData.validity_days;\n                    setValidityDays(formData.validity_days);\n                    console.log(formData);\n                  }}\n                />\n\n                {errors.validity_days && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.validity_days}\n                  </div>\n                )}\n\n               {formData.validity_days > 0 && formData.validity_days && !errors.validity_days && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">Delivery (# of Days)*</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  type=\"number\"\n                  className=\"text-center\"\n                  style={{ width: \"50px\" }}\n                  value={formData.delivery_days}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange delivery days\");\n                    if (!e.target.value) {\n                      formData.delivery_days = null;\n                      errors[\"delivery_days\"] = \"Delivery days are required\";\n                      setFormData({ ...formData });\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    if (parseInt(e.target.value) <= 0) {\n                      formData.delivery_days = parseInt(e.target.value);\n                      setDeliveryDays(deliveryDays);\n                      setFormData({ ...formData });\n                      errors[\"delivery_days\"] =\n                        \"Delivery days should be > 0\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"delivery_days\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.delivery_days = parseInt(e.target.value);\n                    setFormData({ ...formData });\n\n                    deliveryDays = formData.delivery_days;\n                    setDeliveryDays(formData.delivery_days);\n                    console.log(formData);\n                  }}\n                />\n\n                {errors.delivery_days && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.delivery_days}\n                  </div>\n                )}\n                {formData.delivery_days > 0 && formData.delivery_days && !errors.delivery_days && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={handleClose}>\n                Close\n              </Button>\n              <Button variant=\"primary\" onClick={handleCreate}>\n                {isProcessing\n                  ? (\n                    <Spinner\n                      as=\"span\"\n                      animation=\"border\"\n                      size=\"sm\"\n                      role=\"status\"\n                      aria-hidden={true}\n                    />\n                  ) + \" Processing...\"\n                  : formData.id\n                    ? \"Update\"\n                    : \"Create\"}\n              </Button>\n            </Modal.Footer>\n          </form>\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n});\n\nexport default QuotationCreate;\n"]},"metadata":{},"sourceType":"module"}