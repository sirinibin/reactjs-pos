{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,forwardRef,useImperativeHandle,useRef}from\"react\";import{Modal,Table}from'react-bootstrap';import Cookies from\"universal-cookie\";import NumberFormat from\"react-number-format\";import Barcode from'react-barcode';import QRCode from\"react-qr-code\";import html2canvas from'html2canvas';//let ThermalPrinterEncoder = require('thermal-printer-encoder');\nimport ThermalPrinterEncoder from'thermal-printer-encoder';import CapitalCreate from\"./create.js\";import{Button}from\"react-bootstrap\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CapitalView=/*#__PURE__*/forwardRef(function(props,ref){useImperativeHandle(ref,function(){return{open:function open(id){if(id){getCapital(id);SetShow(true);}}};});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),model=_useState2[0],setModel=_useState2[1];var cookies=new Cookies();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],SetShow=_useState4[1];function handleClose(){SetShow(false);};function getCapital(id){console.log(\"inside get Capital\");var requestOptions={method:'GET',headers:{'Content-Type':'application/json','Authorization':cookies.get('access_token')}};var storeParam=\"\";var store_id=cookies.get(\"store_id\");if(store_id){storeParam=\"?store_id=\"+store_id;}fetch('/v1/capital/'+id+storeParam,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get('content-type'))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes('application/json');_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:console.log(\"Response:\");console.log(data);model=data.result;setModel(_objectSpread({},model));case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){// setErrors(error);\n});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:show,size:\"xl\",onHide:handleClose,animation:false,scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Details of Capital #\",model.description,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col align-self-end text-end\",children:[props.openCreateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openCreateForm();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\" Create\"]}):\"\",\"\\xA0\\xA0\",props.openUpdateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openUpdateForm(model.id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"}),\" Edit\"]}):\"\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose,\"aria-label\":\"Close\"})]})]}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,responsive:\"lg\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Code:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.code]}),/*#__PURE__*/_jsx(\"th\",{children:\"Date:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.date]}),/*#__PURE__*/_jsx(\"th\",{children:\"Description:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.description]}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.amount]}),/*#__PURE__*/_jsx(\"th\",{children:\"InvestedByUser\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.invested_by_user_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Method:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.payment_method]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Created At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_at]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_at]}),/*#__PURE__*/_jsx(\"th\",{children:\"Created By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_by_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_by_name]})]})]})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"SI No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:model.images&&model.images.map(function(image,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"Capital\",src:process.env.REACT_APP_API_URL+image+\"?\"+Date.now(),style:{width:300,height:300}},process.env.REACT_APP_API_URL+image)})]},index);})})]})})]})]})});});export default CapitalView;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/capital/view.js"],"names":["React","useState","forwardRef","useImperativeHandle","useRef","Modal","Table","Cookies","NumberFormat","Barcode","QRCode","html2canvas","ThermalPrinterEncoder","CapitalCreate","Button","CapitalView","props","ref","open","id","getCapital","SetShow","model","setModel","cookies","show","handleClose","console","log","requestOptions","method","headers","get","storeParam","store_id","fetch","then","response","isJson","includes","json","data","ok","error","errors","Promise","reject","result","catch","description","openCreateForm","openUpdateForm","code","date","amount","invested_by_user_name","payment_method","created_at","updated_at","created_by_name","updated_by_name","overflowX","images","map","image","index","process","env","REACT_APP_API_URL","Date","now","width","height"],"mappings":"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","sourcesContent":["import React, { useState, forwardRef, useImperativeHandle, useRef } from \"react\";\nimport { Modal, Table } from 'react-bootstrap';\nimport Cookies from \"universal-cookie\";\nimport NumberFormat from \"react-number-format\";\nimport Barcode from 'react-barcode';\nimport QRCode from \"react-qr-code\";\nimport html2canvas from 'html2canvas';\n//let ThermalPrinterEncoder = require('thermal-printer-encoder');\nimport ThermalPrinterEncoder from 'thermal-printer-encoder';\nimport CapitalCreate from \"./create.js\";\n\nimport { Button } from \"react-bootstrap\";\n\n\n\nconst CapitalView = forwardRef((props, ref) => {\n\n    useImperativeHandle(ref, () => ({\n        open(id) {\n            if (id) {\n                getCapital(id);\n                SetShow(true);\n            }\n\n        },\n\n    }));\n\n\n    let [model, setModel] = useState({});\n    const cookies = new Cookies();\n\n    const [show, SetShow] = useState(false);\n\n    function handleClose() {\n        SetShow(false);\n    };\n\n    function getCapital(id) {\n        console.log(\"inside get Capital\");\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        let storeParam = \"\";\n\n        let store_id = cookies.get(\"store_id\");\n        if (store_id) {\n            storeParam = \"?store_id=\" + store_id;\n        }\n\n\n        fetch('/v1/capital/' + id + storeParam, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                console.log(\"Response:\");\n                console.log(data);\n\n                model = data.result;\n\n                setModel({ ...model });\n            })\n            .catch(error => {\n                // setErrors(error);\n            });\n    }\n\n\n\n\n\n\n    return (<>\n        <Modal show={show} size=\"xl\" onHide={handleClose} animation={false} scrollable={true}>\n            <Modal.Header>\n                <Modal.Title>Details of Capital #{model.description} </Modal.Title>\n\n                <div className=\"col align-self-end text-end\">\n                    {props.openCreateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openCreateForm();\n                    }}>\n                        <i className=\"bi bi-plus\"></i> Create\n                    </Button> : \"\"}\n                    &nbsp;&nbsp;\n                    {props.openUpdateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openUpdateForm(model.id);\n                    }}>\n                        <i className=\"bi bi-pencil\"></i> Edit\n                    </Button> : \"\"}\n\n                    <button\n                        type=\"button\"\n                        className=\"btn-close\"\n                        onClick={handleClose}\n                        aria-label=\"Close\"\n                    ></button>\n\n                </div>\n            </Modal.Header>\n            <Modal.Body>\n                <Table striped bordered hover responsive=\"lg\">\n                    <tbody>\n                        <tr>\n                            <th>Code:</th><td> {model.code}</td>\n                            <th>Date:</th><td> {model.date}</td>\n                            <th>Description:</th><td> {model.description}</td>\n                            <th>Amount</th><td> {model.amount}</td>\n                            <th>InvestedByUser</th><td> {model.invested_by_user_name}</td>\n                            <th>Payment Method:</th><td> {model.payment_method}</td>\n                        </tr>\n                        <tr>\n                            <th>Created At:</th><td> {model.created_at}</td>\n                            <th>Updated At:</th><td> {model.updated_at}</td>\n                            <th>Created By:</th><td> {model.created_by_name}</td>\n                            <th>Updated By:</th><td> {model.updated_by_name}</td>\n                        </tr>\n                    </tbody>\n                </Table>\n                <h4>Images</h4>\n                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                    <table className=\"table table-striped table-sm table-bordered\">\n                        <thead>\n                            <tr className=\"text-center\">\n                                <th>SI No.</th>\n                                <th>Image</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {model.images && model.images.map((image, index) => (\n                                <tr key={index} className=\"text-center\">\n                                    <td>{index + 1}</td>\n                                    <td>\n                                        <img alt=\"Capital\" src={process.env.REACT_APP_API_URL + image + \"?\" + (Date.now())} key={process.env.REACT_APP_API_URL + image} style={{ width: 300, height: 300 }} />\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n                {/*\n                    <form className=\"row g-3 needs-validation\" >\n                        \n                  \n                        <div className=\"col-md-6\">\n                            <label className=\"form-label\"\n                            >Delivered By*</label\n                            >\n\n                            <div className=\"input-group mb-3\">\n                                <input type=\"text\" className=\"form-control\" id=\"validationCustom06\" placeholder=\"Select User\" aria-label=\"Select User\" aria-describedby=\"button-addon4\" />\n                                <UserCreate showCreateButton={true} />\n                                <div className=\"valid-feedback\">Looks good!</div>\n                                <div className=\"invalid-feedback\">\n                                    Please provide a valid User.\n                  </div>\n                            </div>\n                        </div>\n                       \n\n                    </form>\n                    */}\n            </Modal.Body>\n            {/*\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\n                        Close\n                </Button>\n                    <Button variant=\"primary\" onClick={this.handleClose}>\n                        Save Changes\n                </Button>\n                </Modal.Footer>\n                */}\n        </Modal>\n    </>);\n\n});\n\nexport default CapitalView;"]},"metadata":{},"sourceType":"module"}