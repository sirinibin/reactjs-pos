{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,forwardRef,useImperativeHandle}from\"react\";import Cookies from\"universal-cookie\";import{Chart}from\"react-google-charts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Calendar=/*#__PURE__*/forwardRef(function(props,ref){useImperativeHandle(ref,function(){return{init:function init(){if(props.allOrders.length>0){makeData();}}};});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),calendarAllSales=_useState2[0],setCalendarAllSales=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),calendarAllSalesProfit=_useState4[0],setCalendarAllSalesProfit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),calendarAllExpenses=_useState6[0],setCalendarAllExpenses=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),calendarAllPurchases=_useState8[0],setCalendarAllPurchases=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),calendarAllSalesReturns=_useState10[0],setCalendarAllSalesReturns=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),calendarAllPurchaseReturns=_useState12[0],setCalendarAllPurchaseReturns=_useState12[1];function makeData(){var calendarSalesData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Sales\"}]];var calendarSalesProfitData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Profit\"}]];var calendarExpenseData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Expense\"}]];var calendarPurchaseData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Purchase\"}]];var calendarSalesReturnData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Sales Return\"}]];var calendarPurchaseReturnData=[[{type:\"date\",id:\"Date\"},{type:\"number\",id:\"Purchase Return\"}]];var dailySales=[];var dailySalesProfit=[];var _iterator=_createForOfIteratorHelper(props.allOrders),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var sale=_step.value;var dt=new Date(sale.date);var dtStr=dt.getFullYear()+\"-\"+dt.getMonth()+\"-\"+dt.getDate();if(!dailySales[dtStr]){dailySales[dtStr]=0;}if(!dailySalesProfit[dtStr]){dailySalesProfit[dtStr]=0;}dailySales[dtStr]+=parseFloat(sale.net_total);dailySalesProfit[dtStr]+=parseFloat(sale.net_profit);}}catch(err){_iterator.e(err);}finally{_iterator.f();}for(var saleDate in dailySales){var parts=saleDate.split('-');calendarSalesData.push([new Date(parts[0],parts[1],parts[2]),parseFloat(dailySales[saleDate].toFixed(2))]);calendarSalesProfitData.push([new Date(parts[0],parts[1],parts[2]),parseFloat(dailySalesProfit[saleDate].toFixed(2))]);}calendarAllSales=calendarSalesData;setCalendarAllSales(calendarSalesData);console.log(\"calendarSalesProfitData:\",calendarSalesProfitData);calendarAllSalesProfit=calendarSalesProfitData;setCalendarAllSalesProfit(calendarSalesProfitData);var dailyExpenses=[];var _iterator2=_createForOfIteratorHelper(props.allExpenses),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var expense=_step2.value;var _dt=new Date(expense.date);var _dtStr=_dt.getFullYear()+\"-\"+_dt.getMonth()+\"-\"+_dt.getDate();if(!dailyExpenses[_dtStr]){dailyExpenses[_dtStr]=0;}dailyExpenses[_dtStr]+=parseFloat(expense.amount);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}for(var expenseDate in dailyExpenses){var _parts=expenseDate.split('-');calendarExpenseData.push([new Date(_parts[0],_parts[1],_parts[2]),parseFloat(dailyExpenses[expenseDate].toFixed(2))]);}calendarAllExpenses=calendarExpenseData;setCalendarAllExpenses(calendarExpenseData);var dailyPurchases=[];var _iterator3=_createForOfIteratorHelper(props.allPurchases),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var purchase=_step3.value;var _dt2=new Date(purchase.date);var _dtStr2=_dt2.getFullYear()+\"-\"+_dt2.getMonth()+\"-\"+_dt2.getDate();if(!dailyPurchases[_dtStr2]){dailyPurchases[_dtStr2]=0;}dailyPurchases[_dtStr2]+=parseFloat(purchase.net_total);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}for(var purchaseDate in dailyPurchases){var _parts2=purchaseDate.split('-');calendarPurchaseData.push([new Date(_parts2[0],_parts2[1],_parts2[2]),parseFloat(dailyPurchases[purchaseDate].toFixed(2))]);}calendarAllPurchases=calendarPurchaseData;setCalendarAllPurchases(calendarPurchaseData);//sales returns\nvar dailySalesReturns=[];var _iterator4=_createForOfIteratorHelper(props.allSalesReturns),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var salesReturn=_step4.value;var _dt3=new Date(salesReturn.date);var _dtStr3=_dt3.getFullYear()+\"-\"+_dt3.getMonth()+\"-\"+_dt3.getDate();if(!dailySalesReturns[_dtStr3]){dailySalesReturns[_dtStr3]=0;}dailySalesReturns[_dtStr3]+=parseFloat(salesReturn.net_total);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}for(var salesReturnDate in dailySalesReturns){var _parts3=salesReturnDate.split('-');calendarSalesReturnData.push([new Date(_parts3[0],_parts3[1],_parts3[2]),parseFloat(dailySalesReturns[salesReturnDate].toFixed(2))]);}calendarAllSalesReturns=calendarSalesReturnData;setCalendarAllSalesReturns(calendarSalesReturnData);//purchase returns\nvar dailyPurchaseReturns=[];var _iterator5=_createForOfIteratorHelper(props.allPurchaseReturns),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var purchaseReturn=_step5.value;var _dt4=new Date(purchaseReturn.date);var _dtStr4=_dt4.getFullYear()+\"-\"+_dt4.getMonth()+\"-\"+_dt4.getDate();if(!dailyPurchaseReturns[_dtStr4]){dailyPurchaseReturns[_dtStr4]=0;}dailyPurchaseReturns[_dtStr4]+=parseFloat(purchaseReturn.net_total);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}for(var purchaseReturnDate in dailyPurchaseReturns){var _parts4=purchaseReturnDate.split('-');calendarPurchaseReturnData.push([new Date(_parts4[0],_parts4[1],_parts4[2]),parseFloat(dailyPurchaseReturns[purchaseReturnDate].toFixed(2))]);}calendarAllPurchaseReturns=calendarPurchaseReturnData;setCalendarAllPurchaseReturns(calendarPurchaseReturnData);}var _useState13=useState({title:'Daily Sales'}),_useState14=_slicedToArray(_useState13,2),calendarSalesOptions=_useState14[0],setCalendarSalesOptions=_useState14[1];var _useState15=useState({title:'Daily Profit'}),_useState16=_slicedToArray(_useState15,2),calendarSalesProfitOptions=_useState16[0],setCalendarSalesProfitOptions=_useState16[1];var _useState17=useState({title:'Daily Expenses'}),_useState18=_slicedToArray(_useState17,2),calendarExpenseOptions=_useState18[0],setCalendarExpenseOptions=_useState18[1];var _useState19=useState({title:'Daily Purchases'}),_useState20=_slicedToArray(_useState19,2),calendarPurchaseOptions=_useState20[0],setCalendarPurchaseOptions=_useState20[1];var _useState21=useState({title:'Daily Sales Returns'}),_useState22=_slicedToArray(_useState21,2),calendarSalesReturnOptions=_useState22[0],setCalendarSalesReturnOptions=_useState22[1];var _useState23=useState({title:'Daily Purchase Returns'}),_useState24=_slicedToArray(_useState23,2),calendarPurchaseReturnOptions=_useState24[0],setCalendarPurchaseReturnOptions=_useState24[1];useEffect(function(){console.log(\"Inside useEffect\");// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:calendarAllSales&&calendarAllSales.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"400px\",data:calendarAllSales,options:calendarSalesOptions}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:calendarAllSalesProfit&&calendarAllSalesProfit.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"400px\",data:calendarAllSalesProfit,options:calendarSalesProfitOptions}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:calendarAllExpenses&&calendarAllExpenses.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"400px\",data:calendarAllExpenses,options:calendarExpenseOptions}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{overflowY:\"scroll\",height:\"700px\"},children:calendarAllPurchases&&calendarAllPurchases.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"700px\",data:calendarAllPurchases,options:calendarPurchaseOptions}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:calendarAllSalesReturns&&calendarAllSalesReturns.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"400px\",data:calendarAllSalesReturns,options:calendarSalesReturnOptions}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:calendarAllPurchaseReturns&&calendarAllPurchaseReturns.length>0?/*#__PURE__*/_jsx(Chart,{chartType:\"Calendar\",width:\"100%\",height:\"400px\",data:calendarAllPurchaseReturns,options:calendarPurchaseReturnOptions}):\"\"})]})});});export default Calendar;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/analytics/sales/calendar.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","Cookies","Chart","Calendar","props","ref","init","allOrders","length","makeData","calendarAllSales","setCalendarAllSales","calendarAllSalesProfit","setCalendarAllSalesProfit","calendarAllExpenses","setCalendarAllExpenses","calendarAllPurchases","setCalendarAllPurchases","calendarAllSalesReturns","setCalendarAllSalesReturns","calendarAllPurchaseReturns","setCalendarAllPurchaseReturns","calendarSalesData","type","id","calendarSalesProfitData","calendarExpenseData","calendarPurchaseData","calendarSalesReturnData","calendarPurchaseReturnData","dailySales","dailySalesProfit","sale","dt","Date","date","dtStr","getFullYear","getMonth","getDate","parseFloat","net_total","net_profit","saleDate","parts","split","push","toFixed","console","log","dailyExpenses","allExpenses","expense","amount","expenseDate","dailyPurchases","allPurchases","purchase","purchaseDate","dailySalesReturns","allSalesReturns","salesReturn","salesReturnDate","dailyPurchaseReturns","allPurchaseReturns","purchaseReturn","purchaseReturnDate","title","calendarSalesOptions","setCalendarSalesOptions","calendarSalesProfitOptions","setCalendarSalesProfitOptions","calendarExpenseOptions","setCalendarExpenseOptions","calendarPurchaseOptions","setCalendarPurchaseOptions","calendarSalesReturnOptions","setCalendarSalesReturnOptions","calendarPurchaseReturnOptions","setCalendarPurchaseReturnOptions","overflowY","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport Cookies from \"universal-cookie\";\nimport { Chart } from \"react-google-charts\";\n\n\n\nconst Calendar = forwardRef((props, ref) => {\n    useImperativeHandle(ref, () => ({\n        init() {\n            if (props.allOrders.length > 0) {\n                makeData();\n            }\n        }\n    }));\n\n\n\n    let [calendarAllSales, setCalendarAllSales] = useState([]);\n    let [calendarAllSalesProfit, setCalendarAllSalesProfit] = useState([]);\n    let [calendarAllExpenses, setCalendarAllExpenses] = useState([]);\n    let [calendarAllPurchases, setCalendarAllPurchases] = useState([]);\n    let [calendarAllSalesReturns, setCalendarAllSalesReturns] = useState([]);\n    let [calendarAllPurchaseReturns, setCalendarAllPurchaseReturns] = useState([]);\n\n\n\n    function makeData() {\n\n        let calendarSalesData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Sales\" },\n            ],\n        ];\n\n        let calendarSalesProfitData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Profit\" },\n            ],\n        ];\n\n        let calendarExpenseData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Expense\" },\n            ],\n        ];\n\n        let calendarPurchaseData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Purchase\" },\n            ],\n        ];\n\n        let calendarSalesReturnData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Sales Return\" },\n            ],\n        ];\n\n        let calendarPurchaseReturnData = [\n            [\n                { type: \"date\", id: \"Date\" },\n                { type: \"number\", id: \"Purchase Return\" },\n            ],\n        ];\n\n        let dailySales = [];\n        let dailySalesProfit = [];\n\n        for (const sale of props.allOrders) {\n            let dt = new Date(sale.date);\n            let dtStr = dt.getFullYear() + \"-\" + dt.getMonth() + \"-\" + dt.getDate();\n            if (!dailySales[dtStr]) {\n                dailySales[dtStr] = 0;\n            }\n\n            if (!dailySalesProfit[dtStr]) {\n                dailySalesProfit[dtStr] = 0;\n            }\n\n            dailySales[dtStr] += parseFloat(sale.net_total);\n            dailySalesProfit[dtStr] += parseFloat(sale.net_profit);\n        }\n\n\n        for (let saleDate in dailySales) {\n            let parts = saleDate.split('-');\n            calendarSalesData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailySales[saleDate].toFixed(2)),\n            ]);\n\n            calendarSalesProfitData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailySalesProfit[saleDate].toFixed(2)),\n            ]);\n        }\n\n\n        calendarAllSales = calendarSalesData\n        setCalendarAllSales(calendarSalesData);\n\n        console.log(\"calendarSalesProfitData:\", calendarSalesProfitData);\n        calendarAllSalesProfit = calendarSalesProfitData;\n        setCalendarAllSalesProfit(calendarSalesProfitData);\n\n        let dailyExpenses = [];\n        for (const expense of props.allExpenses) {\n            let dt = new Date(expense.date);\n            let dtStr = dt.getFullYear() + \"-\" + dt.getMonth() + \"-\" + dt.getDate();\n            if (!dailyExpenses[dtStr]) {\n                dailyExpenses[dtStr] = 0;\n            }\n            dailyExpenses[dtStr] += parseFloat(expense.amount);\n        }\n\n\n        for (let expenseDate in dailyExpenses) {\n            let parts = expenseDate.split('-');\n            calendarExpenseData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailyExpenses[expenseDate].toFixed(2)),\n            ]);\n        }\n\n        calendarAllExpenses = calendarExpenseData\n        setCalendarAllExpenses(calendarExpenseData);\n\n\n        let dailyPurchases = [];\n        for (const purchase of props.allPurchases) {\n            let dt = new Date(purchase.date);\n            let dtStr = dt.getFullYear() + \"-\" + dt.getMonth() + \"-\" + dt.getDate();\n            if (!dailyPurchases[dtStr]) {\n                dailyPurchases[dtStr] = 0;\n            }\n            dailyPurchases[dtStr] += parseFloat(purchase.net_total);\n        }\n\n\n        for (let purchaseDate in dailyPurchases) {\n            let parts = purchaseDate.split('-');\n            calendarPurchaseData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailyPurchases[purchaseDate].toFixed(2)),\n            ]);\n        }\n\n        calendarAllPurchases = calendarPurchaseData\n        setCalendarAllPurchases(calendarPurchaseData);\n\n\n        //sales returns\n        let dailySalesReturns = [];\n        for (const salesReturn of props.allSalesReturns) {\n            let dt = new Date(salesReturn.date);\n            let dtStr = dt.getFullYear() + \"-\" + dt.getMonth() + \"-\" + dt.getDate();\n            if (!dailySalesReturns[dtStr]) {\n                dailySalesReturns[dtStr] = 0;\n            }\n            dailySalesReturns[dtStr] += parseFloat(salesReturn.net_total);\n        }\n\n        for (let salesReturnDate in dailySalesReturns) {\n            let parts = salesReturnDate.split('-');\n            calendarSalesReturnData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailySalesReturns[salesReturnDate].toFixed(2)),\n            ]);\n        }\n\n        calendarAllSalesReturns = calendarSalesReturnData\n        setCalendarAllSalesReturns(calendarSalesReturnData);\n\n\n        //purchase returns\n        let dailyPurchaseReturns = [];\n        for (const purchaseReturn of props.allPurchaseReturns) {\n            let dt = new Date(purchaseReturn.date);\n            let dtStr = dt.getFullYear() + \"-\" + dt.getMonth() + \"-\" + dt.getDate();\n            if (!dailyPurchaseReturns[dtStr]) {\n                dailyPurchaseReturns[dtStr] = 0;\n            }\n            dailyPurchaseReturns[dtStr] += parseFloat(purchaseReturn.net_total);\n        }\n\n\n        for (let purchaseReturnDate in dailyPurchaseReturns) {\n            let parts = purchaseReturnDate.split('-');\n            calendarPurchaseReturnData.push([\n                new Date(parts[0], parts[1], parts[2]),\n                parseFloat(dailyPurchaseReturns[purchaseReturnDate].toFixed(2)),\n            ]);\n        }\n\n        calendarAllPurchaseReturns = calendarPurchaseReturnData\n        setCalendarAllPurchaseReturns(calendarPurchaseReturnData);\n    }\n\n\n    const [calendarSalesOptions, setCalendarSalesOptions] = useState({\n        title: 'Daily Sales',\n    });\n\n    const [calendarSalesProfitOptions, setCalendarSalesProfitOptions] = useState({\n        title: 'Daily Profit',\n    });\n    const [calendarExpenseOptions, setCalendarExpenseOptions] = useState({\n        title: 'Daily Expenses',\n    });\n    const [calendarPurchaseOptions, setCalendarPurchaseOptions] = useState({\n        title: 'Daily Purchases',\n    });\n\n    const [calendarSalesReturnOptions, setCalendarSalesReturnOptions] = useState({\n        title: 'Daily Sales Returns',\n    });\n\n    const [calendarPurchaseReturnOptions, setCalendarPurchaseReturnOptions] = useState({\n        title: 'Daily Purchase Returns',\n    });\n\n\n\n\n\n    useEffect(() => {\n        console.log(\"Inside useEffect\");\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n\n    return (\n        <>\n            <div className=\"container-fluid p-0\">\n                <div className=\"row\">\n                    {calendarAllSales && calendarAllSales.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"400px\"\n                        data={calendarAllSales}\n                        options={calendarSalesOptions}\n\n                    /> : \"\"}\n                </div>\n                <div className=\"row\">\n                    {calendarAllSalesProfit && calendarAllSalesProfit.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"400px\"\n                        data={calendarAllSalesProfit}\n                        options={calendarSalesProfitOptions}\n                    /> : \"\"}\n                </div>\n                <div className=\"row\">\n                    {calendarAllExpenses && calendarAllExpenses.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"400px\"\n                        data={calendarAllExpenses}\n                        options={calendarExpenseOptions}\n                    /> : \"\"}\n                </div>\n\n                <div className=\"row\" style={{ overflowY: \"scroll\", height: \"700px\" }} >\n                    {calendarAllPurchases && calendarAllPurchases.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"700px\"\n                        data={calendarAllPurchases}\n                        options={calendarPurchaseOptions}\n                    /> : \"\"}\n                </div>\n\n                <div className=\"row\"  >\n                    {calendarAllSalesReturns && calendarAllSalesReturns.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"400px\"\n                        data={calendarAllSalesReturns}\n                        options={calendarSalesReturnOptions}\n                    /> : \"\"}\n                </div>\n\n                <div className=\"row\"  >\n                    {calendarAllPurchaseReturns && calendarAllPurchaseReturns.length > 0 ? <Chart\n                        chartType=\"Calendar\"\n                        width=\"100%\"\n                        height=\"400px\"\n                        data={calendarAllPurchaseReturns}\n                        options={calendarPurchaseReturnOptions}\n                    /> : \"\"}\n                </div>\n            </div>\n        </>\n    );\n});\n\nexport default Calendar;\n"]},"metadata":{},"sourceType":"module"}