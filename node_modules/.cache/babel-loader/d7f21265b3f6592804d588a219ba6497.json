{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,forwardRef,useImperativeHandle,useRef}from\"react\";import{Modal,Table}from'react-bootstrap';import Cookies from\"universal-cookie\";import NumberFormat from\"react-number-format\";import Barcode from'react-barcode';import QRCode from\"react-qr-code\";import html2canvas from'html2canvas';//let ThermalPrinterEncoder = require('thermal-printer-encoder');\nimport ThermalPrinterEncoder from'thermal-printer-encoder';import ProductCreate from\"./create.js\";import{Button}from\"react-bootstrap\";import SalesHistory from\"./sales_history.js\";import SalesReturnHistory from\"./sales_return_history.js\";import PurchaseHistory from\"./purchase_history.js\";import PurchaseReturnHistory from\"./purchase_return_history.js\";import QuotationHistory from\"./quotation_history.js\";import DeliveryNoteHistory from\"./delivery_note_history.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductView=/*#__PURE__*/forwardRef(function(props,ref){useImperativeHandle(ref,function(){return{open:function open(id){if(id){getProduct(id);SetShow(true);}}};});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),model=_useState2[0],setModel=_useState2[1];var cookies=new Cookies();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],SetShow=_useState4[1];function handleClose(){SetShow(false);};function getProductRetailPrice(product){var store_id=cookies.get(\"store_id\");if(!store_id||!product.product_stores){return\"\";}// product.product_stores[store_id].\nif(product.product_stores[store_id]){return parseFloat(product.product_stores[store_id].retail_unit_price+parseFloat(product.product_stores[store_id].retail_unit_price*0.15)).toFixed(2);}/*\n        for (let i = 0; i < product.product_stores.length; i++) {\n            if (product.product_stores[i].store_id === store_id) {\n                return parseFloat(product.product_stores[i].retail_unit_price + parseFloat(product.product_stores[i].retail_unit_price * 0.15)).toFixed(2);\n            }\n        }\n        */return\"\";}function getProduct(id){console.log(\"inside get Product\");var requestOptions={method:'GET',headers:{'Content-Type':'application/json','Authorization':cookies.get('access_token')}};var storeParam=\"\";var store_id=cookies.get(\"store_id\");if(store_id){storeParam=\"?store_id=\"+store_id;}fetch('/v1/product/'+id+storeParam,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get('content-type'))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes('application/json');_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:console.log(\"Response:\");console.log(data);model=data.result;setModel(_objectSpread({},model));case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){// setErrors(error);\n});}var barcodeRef=useRef();var qrcodeRef=useRef();function printBarCode(event){console.log(\"Clicked:\");console.log(event.target.getAttribute(\"src\"));var encoder=new ThermalPrinterEncoder({language:'esc-pos'});var img=new Image();img.src=event.target.getAttribute(\"src\");img.onload=function(){console.log(\"Inside onload\");var result=encoder.image(img,320,320,'atkinson').encode();console.log(\"result:\",result);};/*\n        const opt = {\n            scale: 4\n        }\n        const elem = barcodeRef.current;\n        html2canvas(elem, opt).then(canvas => {\n            const iframe = document.createElement('iframe')\n            iframe.name = 'printf'\n            iframe.id = 'printf'\n            iframe.height = 0;\n            iframe.width = 0;\n            document.body.appendChild(iframe)\n\n            const imgUrl = canvas.toDataURL({\n                format: 'jpeg',\n                quality: '1.0'\n            })\n\n            const style = `\n                height:15vh;\n                width:35vw;\n                position:relative;\n                left:0:\n                top:0;\n                margin-left:250;\n                margin-top:3%;\n                margin-bottom:50%;\n            `;\n\n            const url = `<img style=\"${style}\" src=\"${imgUrl}\"/>`;\n            var newWin = window.frames[\"printf\"];\n            newWin.document.write(`<body onload=\"window.print()\" >${url}</body>`);\n            newWin.document.close();\n\n        });\n        */}function printQrCode(e){var opt={scale:4};var elem=qrcodeRef.current;html2canvas(elem,opt).then(function(canvas){var iframe=document.createElement('iframe');iframe.name='printf';iframe.id='printf';iframe.height=0;iframe.width=0;document.body.appendChild(iframe);var imgUrl=canvas.toDataURL({format:'jpeg',quality:'1.0'});var style=\"\\n                height:20vh;\\n                width:20vw;\\n                position:absolute;\\n                left:0:\\n                top:0;\\n            \";var url=\"<img style=\\\"\".concat(style,\"\\\" src=\\\"\").concat(imgUrl,\"\\\"/>\");var newWin=window.frames[\"printf\"];newWin.document.write(\"<body onload=\\\"window.print()\\\">\".concat(url,\"</body>\"));newWin.document.close();});}var SalesHistoryRef=useRef();function openSalesHistory(model){SalesHistoryRef.current.open(model);}var SalesReturnHistoryRef=useRef();function openSalesReturnHistory(model){SalesReturnHistoryRef.current.open(model);}var PurchaseHistoryRef=useRef();function openPurchaseHistory(model){PurchaseHistoryRef.current.open(model);}var PurchaseReturnHistoryRef=useRef();function openPurchaseReturnHistory(model){PurchaseReturnHistoryRef.current.open(model);}var QuotationHistoryRef=useRef();function openQuotationHistory(model){QuotationHistoryRef.current.open(model);}var DeliveryNoteHistoryRef=useRef();function openDeliveryNoteHistory(model){DeliveryNoteHistoryRef.current.open(model);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SalesHistory,{ref:SalesHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(SalesReturnHistory,{ref:SalesReturnHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(PurchaseHistory,{ref:PurchaseHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(PurchaseReturnHistory,{ref:PurchaseReturnHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(QuotationHistory,{ref:QuotationHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(DeliveryNoteHistory,{ref:DeliveryNoteHistoryRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsxs(Modal,{show:show,size:\"xl\",onHide:handleClose,animation:false,scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Details of Product #\",model.name,\" \",model.name_in_arabic?\" / \"+model.name_in_arabic:\"\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col align-self-end text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-success dropdown-toggle\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:\"History\"}),/*#__PURE__*/_jsxs(\"ul\",{class:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openSalesHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Sales History\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openPurchaseHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Purchase History\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openSalesReturnHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Sales Return History\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openPurchaseReturnHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Purchase Return History\"]})}),/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openQuotationHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Quotation History\"]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsxs(\"a\",{class:\"dropdown-item\",onClick:function onClick(){openDeliveryNoteHistory(model);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history\"}),\" Delivery Note History\"]})]})]})]}),\"\\xA0\\xA0\",props.openCreateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openCreateForm();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\" Create\"]}):\"\",\"\\xA0\\xA0\",props.openUpdateForm?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openUpdateForm(model.id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"}),\" Edit\"]}):\"\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose,\"aria-label\":\"Close\"})]})]}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,responsive:\"lg\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Barcode (Note:Save & Print):\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"Barcode\",src:model.barcode_base64,style:{width:\"400px\",height:\"300px\"},onClick:printBarCode})}),/*#__PURE__*/_jsx(\"th\",{children:\"Name:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Name(in Arabic):\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.name_in_arabic]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Store:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.store_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Store Code:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.store_code]}),/*#__PURE__*/_jsx(\"th\",{children:\"Item Code:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.item_code]}),/*#__PURE__*/_jsx(\"th\",{children:\"Bar Code:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.bar_code]}),/*#__PURE__*/_jsx(\"th\",{children:\"EAN 12:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.ean_12]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Part Number:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.part_number]}),/*#__PURE__*/_jsx(\"th\",{children:\"Rack / Location:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.rack]}),/*#__PURE__*/_jsx(\"th\",{children:\"Categories:\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"ul\",{children:model.category_name&&model.category_name.map(function(name){return/*#__PURE__*/_jsx(\"li\",{children:name},name);})})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Unit:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.unit?model.unit:\"Unit(s)\"]}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_at]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated At:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_at]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Created By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.created_by_name]}),/*#__PURE__*/_jsx(\"th\",{children:\"Updated By:\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",model.updated_by_name]})]})]})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Unit Prices & Stock\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[!cookies.get('store_id')?/*#__PURE__*/_jsx(\"th\",{children:\"Store Name\"}):\"\",/*#__PURE__*/_jsx(\"th\",{children:\"Purchase Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wholesale Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Retail Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Stock\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:model.product_stores&&Object.keys(model.product_stores).map(function(key,index){return!cookies.get('store_id')||cookies.get('store_id')==model.product_stores[key].store_id?/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[!cookies.get('store_id')?/*#__PURE__*/_jsx(\"td\",{children:model.product_stores[key].store_name}):\"\",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:model.product_stores[key].purchase_unit_price,displayType:\"text\",thousandSeparator:true,renderText:function renderText(value,props){return value;},suffix:\" SAR\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:model.product_stores[key].wholesale_unit_price,displayType:\"text\",thousandSeparator:true,renderText:function renderText(value,props){return value;},suffix:\" SAR\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NumberFormat,{value:model.product_stores[key].retail_unit_price,displayType:\"text\",thousandSeparator:true,renderText:function renderText(value,props){return value;},suffix:\" SAR\"})}),/*#__PURE__*/_jsx(\"td\",{children:model.product_stores[key].stock})]},index):\"\";})})]})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"SI No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:model.images&&model.images.map(function(image,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"Product\",src:process.env.REACT_APP_API_URL+image+\"?\"+Date.now(),style:{width:300,height:300}},process.env.REACT_APP_API_URL+image)})]},index);})})]})})]})]})]});});export default ProductView;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/product/view.js"],"names":["React","useState","forwardRef","useImperativeHandle","useRef","Modal","Table","Cookies","NumberFormat","Barcode","QRCode","html2canvas","ThermalPrinterEncoder","ProductCreate","Button","SalesHistory","SalesReturnHistory","PurchaseHistory","PurchaseReturnHistory","QuotationHistory","DeliveryNoteHistory","ProductView","props","ref","open","id","getProduct","SetShow","model","setModel","cookies","show","handleClose","getProductRetailPrice","product","store_id","get","product_stores","parseFloat","retail_unit_price","toFixed","console","log","requestOptions","method","headers","storeParam","fetch","then","response","isJson","includes","json","data","ok","error","errors","Promise","reject","result","catch","barcodeRef","qrcodeRef","printBarCode","event","target","getAttribute","encoder","language","img","Image","src","onload","image","encode","printQrCode","e","opt","scale","elem","current","canvas","iframe","document","createElement","name","height","width","body","appendChild","imgUrl","toDataURL","format","quality","style","url","newWin","window","frames","write","close","SalesHistoryRef","openSalesHistory","SalesReturnHistoryRef","openSalesReturnHistory","PurchaseHistoryRef","openPurchaseHistory","PurchaseReturnHistoryRef","openPurchaseReturnHistory","QuotationHistoryRef","openQuotationHistory","DeliveryNoteHistoryRef","openDeliveryNoteHistory","showToastMessage","name_in_arabic","openCreateForm","openUpdateForm","barcode_base64","store_name","store_code","item_code","bar_code","ean_12","part_number","rack","category_name","map","unit","created_at","updated_at","created_by_name","updated_by_name","overflowX","Object","keys","key","index","purchase_unit_price","value","wholesale_unit_price","stock","images","process","env","REACT_APP_API_URL","Date","now"],"mappings":"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","sourcesContent":["import React, { useState, forwardRef, useImperativeHandle, useRef } from \"react\";\nimport { Modal, Table } from 'react-bootstrap';\nimport Cookies from \"universal-cookie\";\nimport NumberFormat from \"react-number-format\";\nimport Barcode from 'react-barcode';\nimport QRCode from \"react-qr-code\";\nimport html2canvas from 'html2canvas';\n//let ThermalPrinterEncoder = require('thermal-printer-encoder');\nimport ThermalPrinterEncoder from 'thermal-printer-encoder';\nimport ProductCreate from \"./create.js\";\n\nimport { Button } from \"react-bootstrap\";\nimport SalesHistory from \"./sales_history.js\";\nimport SalesReturnHistory from \"./sales_return_history.js\";\n\nimport PurchaseHistory from \"./purchase_history.js\";\nimport PurchaseReturnHistory from \"./purchase_return_history.js\";\n\nimport QuotationHistory from \"./quotation_history.js\";\n\nimport DeliveryNoteHistory from \"./delivery_note_history.js\";\n\nconst ProductView = forwardRef((props, ref) => {\n\n    useImperativeHandle(ref, () => ({\n        open(id) {\n            if (id) {\n                getProduct(id);\n                SetShow(true);\n            }\n\n        },\n\n    }));\n\n\n    let [model, setModel] = useState({});\n    const cookies = new Cookies();\n\n    const [show, SetShow] = useState(false);\n\n    function handleClose() {\n        SetShow(false);\n    };\n\n    function getProductRetailPrice(product) {\n        let store_id = cookies.get(\"store_id\");\n        if (!store_id || !product.product_stores) {\n            return \"\";\n        }\n\n        // product.product_stores[store_id].\n\n        if (product.product_stores[store_id]) {\n            return parseFloat(product.product_stores[store_id].retail_unit_price + parseFloat(product.product_stores[store_id].retail_unit_price * 0.15)).toFixed(2);\n        }\n\n\n\n        /*\n        for (let i = 0; i < product.product_stores.length; i++) {\n            if (product.product_stores[i].store_id === store_id) {\n                return parseFloat(product.product_stores[i].retail_unit_price + parseFloat(product.product_stores[i].retail_unit_price * 0.15)).toFixed(2);\n            }\n        }\n        */\n        return \"\";\n    }\n\n    function getProduct(id) {\n        console.log(\"inside get Product\");\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': cookies.get('access_token'),\n            },\n        };\n\n        let storeParam = \"\";\n\n        let store_id = cookies.get(\"store_id\");\n        if (store_id) {\n            storeParam = \"?store_id=\" + store_id;\n        }\n\n\n        fetch('/v1/product/' + id + storeParam, requestOptions)\n            .then(async response => {\n                const isJson = response.headers.get('content-type')?.includes('application/json');\n                const data = isJson && await response.json();\n\n                // check for error response\n                if (!response.ok) {\n                    const error = (data && data.errors);\n                    return Promise.reject(error);\n                }\n\n                console.log(\"Response:\");\n                console.log(data);\n\n                model = data.result;\n\n                setModel({ ...model });\n            })\n            .catch(error => {\n                // setErrors(error);\n            });\n    }\n\n\n    const barcodeRef = useRef();\n    const qrcodeRef = useRef();\n\n\n    function printBarCode(event) {\n        console.log(\"Clicked:\");\n\n        console.log(event.target.getAttribute(\"src\"));\n\n        let encoder = new ThermalPrinterEncoder({\n            language: 'esc-pos'\n        });\n\n        let img = new Image();\n        img.src = event.target.getAttribute(\"src\");\n\n        img.onload = function () {\n            console.log(\"Inside onload\")\n            let result = encoder\n                .image(img, 320, 320, 'atkinson')\n                .encode();\n            console.log(\"result:\", result);\n\n        }\n\n\n        /*\n        const opt = {\n            scale: 4\n        }\n        const elem = barcodeRef.current;\n        html2canvas(elem, opt).then(canvas => {\n            const iframe = document.createElement('iframe')\n            iframe.name = 'printf'\n            iframe.id = 'printf'\n            iframe.height = 0;\n            iframe.width = 0;\n            document.body.appendChild(iframe)\n\n            const imgUrl = canvas.toDataURL({\n                format: 'jpeg',\n                quality: '1.0'\n            })\n\n            const style = `\n                height:15vh;\n                width:35vw;\n                position:relative;\n                left:0:\n                top:0;\n                margin-left:250;\n                margin-top:3%;\n                margin-bottom:50%;\n            `;\n\n            const url = `<img style=\"${style}\" src=\"${imgUrl}\"/>`;\n            var newWin = window.frames[\"printf\"];\n            newWin.document.write(`<body onload=\"window.print()\" >${url}</body>`);\n            newWin.document.close();\n\n        });\n        */\n\n    }\n\n    function printQrCode(e) {\n\n        const opt = {\n            scale: 4\n        }\n\n        const elem = qrcodeRef.current;\n\n        html2canvas(elem, opt).then(canvas => {\n            const iframe = document.createElement('iframe')\n            iframe.name = 'printf'\n            iframe.id = 'printf'\n            iframe.height = 0;\n            iframe.width = 0;\n            document.body.appendChild(iframe)\n\n            const imgUrl = canvas.toDataURL({\n                format: 'jpeg',\n                quality: '1.0'\n            })\n\n            const style = `\n                height:20vh;\n                width:20vw;\n                position:absolute;\n                left:0:\n                top:0;\n            `;\n\n            const url = `<img style=\"${style}\" src=\"${imgUrl}\"/>`;\n            var newWin = window.frames[\"printf\"];\n            newWin.document.write(`<body onload=\"window.print()\">${url}</body>`);\n            newWin.document.close();\n\n        });\n\n    }\n\n    const SalesHistoryRef = useRef();\n    function openSalesHistory(model) {\n        SalesHistoryRef.current.open(model);\n    }\n\n    const SalesReturnHistoryRef = useRef();\n    function openSalesReturnHistory(model) {\n        SalesReturnHistoryRef.current.open(model);\n    }\n\n\n    const PurchaseHistoryRef = useRef();\n    function openPurchaseHistory(model) {\n        PurchaseHistoryRef.current.open(model);\n    }\n\n    const PurchaseReturnHistoryRef = useRef();\n    function openPurchaseReturnHistory(model) {\n        PurchaseReturnHistoryRef.current.open(model);\n    }\n\n\n    const QuotationHistoryRef = useRef();\n    function openQuotationHistory(model) {\n        QuotationHistoryRef.current.open(model);\n    }\n\n    const DeliveryNoteHistoryRef = useRef();\n    function openDeliveryNoteHistory(model) {\n        DeliveryNoteHistoryRef.current.open(model);\n    }\n\n    return (<>\n        <SalesHistory ref={SalesHistoryRef} showToastMessage={props.showToastMessage} />\n        <SalesReturnHistory ref={SalesReturnHistoryRef} showToastMessage={props.showToastMessage} />\n\n        <PurchaseHistory ref={PurchaseHistoryRef} showToastMessage={props.showToastMessage} />\n        <PurchaseReturnHistory ref={PurchaseReturnHistoryRef} showToastMessage={props.showToastMessage} />\n\n        <QuotationHistory ref={QuotationHistoryRef} showToastMessage={props.showToastMessage} />\n\n        <DeliveryNoteHistory ref={DeliveryNoteHistoryRef} showToastMessage={props.showToastMessage} />\n\n        <Modal show={show} size=\"xl\" onHide={handleClose} animation={false} scrollable={true}>\n            <Modal.Header>\n                <Modal.Title>Details of Product #{model.name} {model.name_in_arabic ? \" / \" + model.name_in_arabic : \"\"} </Modal.Title>\n\n                <div className=\"col align-self-end text-end\">\n\n                    <div class=\"btn-group\">\n                        <button type=\"button\" class=\"btn btn-success dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                            History\n                        </button>\n                        <ul class=\"dropdown-menu\">\n                            <li>\n                                <a class=\"dropdown-item\" onClick={() => {\n                                    openSalesHistory(model);\n                                }}>\n                                    <i className=\"bi bi-clock-history\"></i> Sales History\n                                </a>\n                            </li>\n                            <li>\n                                <a class=\"dropdown-item\" onClick={() => {\n                                    openPurchaseHistory(model);\n                                }}>\n                                    <i className=\"bi bi-clock-history\"></i> Purchase History\n                                </a>\n                            </li>\n                            <li>\n                                <a class=\"dropdown-item\" onClick={() => {\n                                    openSalesReturnHistory(model);\n                                }}>\n                                    <i className=\"bi bi-clock-history\"></i> Sales Return History\n                                </a>\n                            </li>\n\n                            <li>\n                                <a class=\"dropdown-item\" onClick={() => {\n                                    openPurchaseReturnHistory(model);\n                                }}>\n                                    <i className=\"bi bi-clock-history\"></i> Purchase Return History\n                                </a>\n                            </li>\n                            <li> <a class=\"dropdown-item\" onClick={() => {\n                                openQuotationHistory(model);\n                            }}>\n                                <i className=\"bi bi-clock-history\"></i> Quotation History\n                            </a>\n                            </li>\n                            <li> <a class=\"dropdown-item\" onClick={() => {\n                                openDeliveryNoteHistory(model);\n                            }}>\n                                <i className=\"bi bi-clock-history\"></i> Delivery Note History\n                            </a>\n                            </li>\n                        </ul>\n                    </div>\n\n\n\n\n                    &nbsp;&nbsp;\n\n                    {props.openCreateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openCreateForm();\n                    }}>\n                        <i className=\"bi bi-plus\"></i> Create\n                    </Button> : \"\"}\n                    &nbsp;&nbsp;\n                    {props.openUpdateForm ? <Button variant=\"primary\" onClick={() => {\n                        handleClose();\n                        props.openUpdateForm(model.id);\n                    }}>\n                        <i className=\"bi bi-pencil\"></i> Edit\n                    </Button> : \"\"}\n\n                    <button\n                        type=\"button\"\n                        className=\"btn-close\"\n                        onClick={handleClose}\n                        aria-label=\"Close\"\n                    ></button>\n\n                </div>\n            </Modal.Header>\n            <Modal.Body>\n                <Table striped bordered hover responsive=\"lg\">\n                    <tbody>\n                        <tr>\n                            <th  >Barcode (Note:Save & Print):</th>\n                            <td>\n                                <img alt=\"Barcode\" src={model.barcode_base64} style={{\n                                    width: \"400px\",\n                                    height: \"300px\",\n                                }} onClick={printBarCode} />\n\n\n                            </td>\n                            <th>Name:</th><td> {model.name}</td>\n                            <th>Name(in Arabic):</th><td> {model.name_in_arabic}</td>\n                        </tr>\n                        <tr>\n                            <th>Store:</th><td> {model.store_name}</td>\n                            <th>Store Code:</th><td> {model.store_code}</td>\n                            <th>Item Code:</th><td> {model.item_code}</td>\n                            <th>Bar Code:</th><td> {model.bar_code}</td>\n                            <th>EAN 12:</th><td> {model.ean_12}</td>\n                        </tr>\n                        <tr>\n                            <th>Part Number:</th><td> {model.part_number}</td>\n                            <th>Rack / Location:</th><td> {model.rack}</td>\n                            <th>Categories:</th><td>\n                                <ul>\n                                    {model.category_name &&\n                                        model.category_name.map((name) => (\n                                            <li key={name}>{name}</li>\n                                        ))}\n                                </ul>\n                            </td>\n                        </tr>\n                        <tr>\n                            <th>Unit:</th><td> {model.unit ? model.unit : \"Unit(s)\"}</td>\n                            <th>Created At:</th><td> {model.created_at}</td>\n                            <th>Updated At:</th><td> {model.updated_at}</td>\n                        </tr>\n                        <tr>\n                            <th>Created By:</th><td> {model.created_by_name}</td>\n                            <th>Updated By:</th><td> {model.updated_by_name}</td>\n                        </tr>\n                    </tbody>\n                </Table>\n                <h4>Unit Prices & Stock</h4>\n                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                    <table className=\"table table-striped table-sm table-bordered\">\n                        <thead>\n                            <tr className=\"text-center\">\n                                {!cookies.get('store_id') ? <th>Store Name</th> : \"\"}\n                                <th>Purchase Unit Price</th>\n                                <th>Wholesale Unit Price</th>\n                                <th>Retail Unit Price</th>\n                                <th>Stock</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {model.product_stores && Object.keys(model.product_stores).map((key, index) => {\n                                return (!cookies.get('store_id') || cookies.get('store_id') == model.product_stores[key].store_id ? <tr key={index} className=\"text-center\">\n                                    {!cookies.get('store_id') ? <td>{model.product_stores[key].store_name}</td> : \"\"}\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].purchase_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].wholesale_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].retail_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>{model.product_stores[key].stock}</td>\n                                </tr> : \"\")\n                            })}\n                        </tbody>\n                        {/*\n                        <tbody>\n                            {model.product_stores && Object.keys(model.product_stores).map((key, index) => {\n                                !cookies.get('store_id') || model.product_stores[key].store_id == cookies.get('store_id') ? <tr key={index} className=\"text-center\">\n                                    {!cookies.get('store_id') ? <td>{model.product_stores[key].store_name}</td> : \"\"}\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].purchase_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].wholesale_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>\n                                        <NumberFormat\n                                            value={model.product_stores[key].retail_unit_price}\n                                            displayType={\"text\"}\n                                            thousandSeparator={true}\n                                            renderText={(value, props) => value}\n                                            suffix={\" SAR\"}\n                                        />\n                                    </td>\n                                    <td>{model.product_stores[key].stock}</td>\n                                </tr> : ''\n                            ))\n                        }\n                        </tbody>\n                    */}\n                    </table>\n                </div>\n                <h4>Images</h4>\n                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                    <table className=\"table table-striped table-sm table-bordered\">\n                        <thead>\n                            <tr className=\"text-center\">\n                                <th>SI No.</th>\n                                <th>Image</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {model.images && model.images.map((image, index) => (\n                                <tr key={index} className=\"text-center\">\n                                    <td>{index + 1}</td>\n                                    <td>\n                                        <img alt=\"Product\" src={process.env.REACT_APP_API_URL + image + \"?\" + (Date.now())} key={process.env.REACT_APP_API_URL + image} style={{ width: 300, height: 300 }} />\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n                {/*\n                    <form className=\"row g-3 needs-validation\" >\n                        \n                  \n                        <div className=\"col-md-6\">\n                            <label className=\"form-label\"\n                            >Delivered By*</label\n                            >\n\n                            <div className=\"input-group mb-3\">\n                                <input type=\"text\" className=\"form-control\" id=\"validationCustom06\" placeholder=\"Select User\" aria-label=\"Select User\" aria-describedby=\"button-addon4\" />\n                                <UserCreate showCreateButton={true} />\n                                <div className=\"valid-feedback\">Looks good!</div>\n                                <div className=\"invalid-feedback\">\n                                    Please provide a valid User.\n                  </div>\n                            </div>\n                        </div>\n                       \n\n                    </form>\n                    */}\n            </Modal.Body>\n            {/*\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\n                        Close\n                </Button>\n                    <Button variant=\"primary\" onClick={this.handleClose}>\n                        Save Changes\n                </Button>\n                </Modal.Footer>\n                */}\n        </Modal>\n    </>);\n\n});\n\nexport default ProductView;"]},"metadata":{},"sourceType":"module"}