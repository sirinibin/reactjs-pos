{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import QuotationCreate from\"./create.js\";import QuotationView from\"./view.js\";import Cookies from\"universal-cookie\";import{Typeahead}from\"react-bootstrap-typeahead\";import{format}from\"date-fns\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{Button,Spinner,Badge}from\"react-bootstrap\";import ReactPaginate from\"react-paginate\";import NumberFormat from\"react-number-format\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function QuotationIndex(props){var cookies=new Cookies();var _useState=useState(0.00),_useState2=_slicedToArray(_useState,2),totalQuotation=_useState2[0],setTotalQuotation=_useState2[1];var _useState3=useState(0.00),_useState4=_slicedToArray(_useState3,2),profit=_useState4[0],setProfit=_useState4[1];var _useState5=useState(0.00),_useState6=_slicedToArray(_useState5,2),loss=_useState6[0],setLoss=_useState6[1];//list\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),quotationList=_useState8[0],setQuotationList=_useState8[1];//pagination\nvar _useState9=useState(5),_useState10=_slicedToArray(_useState9,2),pageSize=_useState10[0],setPageSize=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),page=_useState12[0],setPage=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalPages=_useState14[0],setTotalPages=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),totalItems=_useState16[0],setTotalItems=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),currentPageItemsCount=_useState18[0],setCurrentPageItemsCount=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),offset=_useState20[0],setOffset=_useState20[1];//Date filter\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showDateRange=_useState22[0],setShowDateRange=_useState22[1];var selectedDate=new Date();var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),dateValue=_useState24[0],setDateValue=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),fromDateValue=_useState26[0],setFromDateValue=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),toDateValue=_useState28[0],setToDateValue=_useState28[1];//Created At filter\nvar _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),showCreatedAtDateRange=_useState30[0],setShowCreatedAtDateRange=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),createdAtValue=_useState32[0],setCreatedAtValue=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),createdAtFromValue=_useState34[0],setCreatedAtFromValue=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),createdAtToValue=_useState36[0],setCreatedAtToValue=_useState36[1];//loader flag\nvar _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),isListLoading=_useState38[0],setIsListLoading=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),isRefreshInProcess=_useState40[0],setIsRefreshInProcess=_useState40[1];//Customer Auto Suggestion\nvar _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),customerOptions=_useState42[0],setCustomerOptions=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),selectedCustomers=_useState44[0],setSelectedCustomers=_useState44[1];//Created By User Auto Suggestion\nvar _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),userOptions=_useState46[0],setUserOptions=_useState46[1];var _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),selectedCreatedByUsers=_useState48[0],setSelectedCreatedByUsers=_useState48[1];//Status Auto Suggestion\nvar statusOptions=[{id:\"sent\",name:\"Sent\"},{id:\"pending\",name:\"Pending\"},{id:\"accepted\",name:\"Accepted\"},{id:\"rejected\",name:\"Rejected\"},{id:\"cancelled\",name:\"Cancelled\"},{id:\"deleted\",name:\"Deleted\"}];var _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),selectedStatusList=_useState50[0],setSelectedStatusList=_useState50[1];useEffect(function(){list();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);//Search params\nvar _useState51=useState({}),_useState52=_slicedToArray(_useState51,2),searchParams=_useState52[0],setSearchParams=_useState52[1];var _useState53=useState(\"created_at\"),_useState54=_slicedToArray(_useState53,2),sortField=_useState54[0],setSortField=_useState54[1];var _useState55=useState(\"-\"),_useState56=_slicedToArray(_useState55,2),sortOrder=_useState56[0],setSortOrder=_useState56[1];function ObjectToSearchQueryParams(object){return Object.keys(object).map(function(key){return\"search[\".concat(key,\"]=\").concat(object[key]);}).join(\"&\");}function suggestCustomers(_x){return _suggestCustomers.apply(this,arguments);}function _suggestCustomers(){_suggestCustomers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"Inside handle suggestCustomers\");params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\".concat(queryString);}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";_context2.next=8;return fetch(\"/v1/customer?\".concat(Select).concat(queryString),requestOptions);case 8:result=_context2.sent;_context2.next=11;return result.json();case 11:data=_context2.sent;setCustomerOptions(data.result);case 13:case\"end\":return _context2.stop();}}},_callee2);}));return _suggestCustomers.apply(this,arguments);}function suggestUsers(_x2){return _suggestUsers.apply(this,arguments);}function _suggestUsers(){_suggestUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"Inside handle suggestUsers\");setCustomerOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context3.next=5;break;}return _context3.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";_context3.next=12;return fetch(\"/v1/user?\"+Select+queryString,requestOptions);case 12:result=_context3.sent;_context3.next=15;return result.json();case 15:data=_context3.sent;setUserOptions(data.result);case 17:case\"end\":return _context3.stop();}}},_callee3);}));return _suggestUsers.apply(this,arguments);}function searchByFieldValue(field,value){searchParams[field]=value;page=1;setPage(page);list();}function searchByDateField(field,value){if(!value){page=1;searchParams[field]=\"\";setPage(page);list();return;}var d=new Date(value);d=new Date(d.toUTCString());value=format(d,\"MMM dd yyyy\");if(field===\"date_str\"){setDateValue(value);setFromDateValue(\"\");setToDateValue(\"\");searchParams[\"from_date\"]=\"\";searchParams[\"to_date\"]=\"\";searchParams[field]=value;console.log(\"Value:\",value);}else if(field===\"from_date\"){setFromDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"to_date\"){setToDateValue(value);setDateValue(\"\");searchParams[\"date\"]=\"\";searchParams[field]=value;}else if(field===\"created_at\"){setCreatedAtValue(value);setCreatedAtFromValue(\"\");setCreatedAtToValue(\"\");searchParams[\"created_at_from\"]=\"\";searchParams[\"created_at_to\"]=\"\";searchParams[field]=value;}if(field===\"created_at_from\"){setCreatedAtFromValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}else if(field===\"created_at_to\"){setCreatedAtToValue(value);setCreatedAtValue(\"\");searchParams[\"created_at\"]=\"\";searchParams[field]=value;}page=1;setPage(page);list();}function searchByMultipleValuesField(field,values){if(field===\"created_by\"){setSelectedCreatedByUsers(values);}else if(field===\"customer_id\"){setSelectedCustomers(values);}else if(field===\"status\"){setSelectedStatusList(values);}searchParams[field]=Object.values(values).map(function(model){return model.id;}).join(\",\");page=1;setPage(page);list();}function list(){var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};var Select=\"select=id,code,date,net_total,created_by_name,customer_name,status,created_at,profit,loss\";if(cookies.get(\"store_id\")){searchParams.store_id=cookies.get(\"store_id\");}var d=new Date();var diff=d.getTimezoneOffset();searchParams[\"timezone_offset\"]=parseFloat(diff/60);setSearchParams(searchParams);var queryParams=ObjectToSearchQueryParams(searchParams);if(queryParams!==\"\"){queryParams=\"&\"+queryParams;}setIsListLoading(true);fetch(\"/v1/quotation?\"+Select+queryParams+\"&sort=\"+sortOrder+sortField+\"&page=\"+page+\"&limit=\"+pageSize,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error,pageCount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get(\"content-type\"))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes(\"application/json\");_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:setIsListLoading(false);setIsRefreshInProcess(false);setQuotationList(data.result);pageCount=parseInt((data.total_count+pageSize-1)/pageSize);setTotalPages(pageCount);setTotalItems(data.total_count);setOffset((page-1)*pageSize);setCurrentPageItemsCount(data.result.length);totalQuotation=data.meta.total_quotation;setTotalQuotation(totalQuotation);profit=data.meta.profit;setProfit(profit);loss=data.meta.loss;setLoss(loss);case 24:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref.apply(this,arguments);};}()).catch(function(error){setIsListLoading(false);setIsRefreshInProcess(false);console.log(error);});}function sort(field){sortField=field;setSortField(sortField);sortOrder=sortOrder===\"-\"?\"\":\"-\";setSortOrder(sortOrder);list();}function changePageSize(size){pageSize=parseInt(size);setPageSize(pageSize);list();}function changePage(newPage){page=parseInt(newPage);setPage(page);list();}function openUpdateForm(id){CreateFormRef.current.open(id);}var DetailsViewRef=useRef();function openDetailsView(id){DetailsViewRef.current.open(id);}var CreateFormRef=useRef();function openCreateForm(){CreateFormRef.current.open();}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(QuotationCreate,{ref:CreateFormRef,refreshList:list,showToastMessage:props.showToastMessage,openDetailsView:openDetailsView}),/*#__PURE__*/_jsx(QuotationView,{ref:DetailsViewRef,openUpdateForm:openUpdateForm,openCreateForm:openCreateForm}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Quotation: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalQuotation,displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Expected Profit: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:profit,displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"h1\",{className:\"text-end\",children:[\"Expected Loss: \",/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:/*#__PURE__*/_jsx(NumberFormat,{value:loss,displayType:\"text\",thousandSeparator:true,suffix:\" \",renderText:function renderText(value,props){return value;}})})]}):\"\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h3\",children:\"Quotations\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:/*#__PURE__*/_jsxs(Button,{hide:true.toString(),variant:\"primary\",className:\"btn btn-primary mb-3\",onClick:openCreateForm,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" Create\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-start\",children:\"No Quotations to display\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{border:\"solid 0px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",style:{border:\"solid 0px\"},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){setIsRefreshInProcess(true);list();},variant:\"primary\",disabled:isRefreshInProcess,children:[isRefreshInProcess?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-refresh\"}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center\",children:isListLoading&&/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"primary\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Size:\\xA0\"}),/*#__PURE__*/_jsxs(\"select\",{value:pageSize,onChange:function onChange(e){changePageSize(e.target.value);},className:\"form-control pull-right\",style:{border:\"solid 1px\",borderColor:\"silver\",width:\"55px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20\",children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:\"40\",children:\"40\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100\"})]})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{border:\"solid 0px\"},children:totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:totalItems>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-start\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-start\",children:[\"showing \",offset+1,\"-\",offset+currentPageItemsCount,\" of\",\" \",totalItems]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-end\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-end\",children:[\"page \",page,\" of \",totalPages]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"code\");},children:[\"ID\",sortField===\"code\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"code\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"date\");},children:[\"Date\",sortField===\"date\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"date\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"net_total\");},children:[\"Net Total\",sortField===\"net_total\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"net_total\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"profit\");},children:[\"Expected Profit\",sortField===\"profit\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"profit\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"loss\");},children:[\"Expected Loss\",sortField===\"loss\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-down\"}):null,sortField===\"loss\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-numeric-up\"}):null]})}):\"\",/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_by\");},children:[\"Created By\",sortField===\"created_by\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"created_by\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"customer_name\");},children:[\"Customer\",sortField===\"customer_name\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"customer_name\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"status\");},children:[\"Status\",sortField===\"status\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up-alt\"}):null,sortField===\"status\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-alpha-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){sort(\"created_at\");},children:[\"Created At\",sortField===\"created_at\"&&sortOrder===\"-\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-down\"}):null,sortField===\"created_at\"&&sortOrder===\"\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-sort-up\"}):null]})}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"code\",onChange:function onChange(e){return searchByFieldValue(\"code\",e.target.value);},className:\"form-control\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"date_str\",value:dateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setDateValue(\"\");searchByDateField(\"date_str\",\"\");return;}searchByDateField(\"date_str\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowDateRange(!showDateRange);},children:showDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"from_date\",value:fromDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setFromDateValue(\"\");searchByDateField(\"from_date\",\"\");return;}searchByDateField(\"from_date\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"to_date\",value:toDateValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setToDateValue(\"\");searchByDateField(\"to_date\",\"\");return;}searchByDateField(\"to_date\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"net_total\",onChange:function onChange(e){return searchByFieldValue(\"net_total\",e.target.value);},className:\"form-control\"})}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"profit\",onChange:function onChange(e){return searchByFieldValue(\"profit\",e.target.value);},className:\"form-control\"})}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"loss\",onChange:function onChange(e){return searchByFieldValue(\"loss\",e.target.value);},className:\"form-control\"})}):\"\",/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"created_by\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"created_by\",selectedItems);},options:userOptions,placeholder:\"Select Users\",selected:selectedCreatedByUsers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestUsers(searchTerm);},multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"customer_id\",labelKey:\"search_label\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"customer_id\",selectedItems);},options:customerOptions,placeholder:\"name or mob\",selected:selectedCustomers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestCustomers(searchTerm);},multiple:true})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Typeahead,{id:\"status\",labelKey:\"name\",onChange:function onChange(selectedItems){searchByMultipleValuesField(\"status\",selectedItems);},options:statusOptions,placeholder:\"Select Status\",selected:selectedStatusList,highlightOnlyResult:true,multiple:true})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(DatePicker,{id:\"created_at\",value:createdAtValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtValue(\"\");searchByDateField(\"created_at\",\"\");return;}searchByDateField(\"created_at\",date);}}),/*#__PURE__*/_jsx(\"small\",{style:{color:\"blue\",textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(e){return setShowCreatedAtDateRange(!showCreatedAtDateRange);},children:showCreatedAtDateRange?\"Less..\":\"More..\"}),/*#__PURE__*/_jsx(\"br\",{}),showCreatedAtDateRange?/*#__PURE__*/_jsxs(\"span\",{className:\"text-left\",children:[\"From:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_from\",value:createdAtFromValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtFromValue(\"\");searchByDateField(\"created_at_from\",\"\");return;}searchByDateField(\"created_at_from\",date);}}),\"To:\",\" \",/*#__PURE__*/_jsx(DatePicker,{id:\"created_at_to\",value:createdAtToValue,selected:selectedDate,className:\"form-control\",dateFormat:\"MMM dd yyyy\",onChange:function onChange(date){if(!date){setCreatedAtToValue(\"\");searchByDateField(\"created_at_to\",\"\");return;}searchByDateField(\"created_at_to\",date);}})]}):null]}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:quotationList&&quotationList.map(function(quotation){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:quotation.code}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(quotation.date),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsxs(\"td\",{children:[quotation.net_total,\" \"]}),cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"td\",{children:[quotation.profit?quotation.profit:0.00,\" \"]}):\"\",cookies.get('admin')===\"true\"?/*#__PURE__*/_jsxs(\"td\",{children:[quotation.loss?quotation.loss:0.00,\" \"]}):\"\",/*#__PURE__*/_jsx(\"td\",{children:quotation.created_by_name}),/*#__PURE__*/_jsx(\"td\",{children:quotation.customer_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success\",children:quotation.status})}),/*#__PURE__*/_jsx(\"td\",{children:format(new Date(quotation.created_at),\"MMM dd yyyy h:mma\")}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{className:\"btn btn-light btn-sm\",onClick:function onClick(){openUpdateForm(quotation.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary btn-sm\",onClick:function onClick(){openDetailsView(quotation.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-default btn-sm\",\"data-bs-toggle\":\"tooltip\",\"data-bs-placement\":\"top\",title:\"Download\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"/\",className:\"dropdown-item\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\"Download\"]})})})]})]},quotation.code);})})]})}),totalPages?/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"next >\",onPageChange:function onPageChange(event){changePage(event.selected+1);},pageRangeDisplayed:5,pageCount:totalPages,previousLabel:\"< previous\",renderOnZeroPageCount:null,className:\"pagination  flex-wrap\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",activeClassName:\"active\",previousClassName:\"page-item\",nextClassName:\"page-item\",previousLinkClassName:\"page-link\",nextLinkClassName:\"page-link\",forcePage:page-1}):\"\"]})})})})]})]});}export default QuotationIndex;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/index.js"],"names":["React","useState","useEffect","useRef","QuotationCreate","QuotationView","Cookies","Typeahead","format","DatePicker","Button","Spinner","Badge","ReactPaginate","NumberFormat","QuotationIndex","props","cookies","totalQuotation","setTotalQuotation","profit","setProfit","loss","setLoss","quotationList","setQuotationList","pageSize","setPageSize","page","setPage","totalPages","setTotalPages","totalItems","setTotalItems","currentPageItemsCount","setCurrentPageItemsCount","offset","setOffset","showDateRange","setShowDateRange","selectedDate","Date","dateValue","setDateValue","fromDateValue","setFromDateValue","toDateValue","setToDateValue","showCreatedAtDateRange","setShowCreatedAtDateRange","createdAtValue","setCreatedAtValue","createdAtFromValue","setCreatedAtFromValue","createdAtToValue","setCreatedAtToValue","isListLoading","setIsListLoading","isRefreshInProcess","setIsRefreshInProcess","customerOptions","setCustomerOptions","selectedCustomers","setSelectedCustomers","userOptions","setUserOptions","selectedCreatedByUsers","setSelectedCreatedByUsers","statusOptions","id","name","selectedStatusList","setSelectedStatusList","list","searchParams","setSearchParams","sortField","setSortField","sortOrder","setSortOrder","ObjectToSearchQueryParams","object","Object","keys","map","key","join","suggestCustomers","searchTerm","console","log","params","queryString","requestOptions","method","headers","Authorization","get","Select","fetch","result","json","data","suggestUsers","searchByFieldValue","field","value","searchByDateField","d","toUTCString","searchByMultipleValuesField","values","model","store_id","diff","getTimezoneOffset","parseFloat","queryParams","then","response","isJson","includes","ok","error","errors","Promise","reject","pageCount","parseInt","total_count","length","meta","total_quotation","catch","sort","changePageSize","size","changePage","newPage","openUpdateForm","CreateFormRef","current","open","DetailsViewRef","openDetailsView","openCreateForm","showToastMessage","toString","border","e","target","borderColor","width","event","selected","overflowX","textDecoration","cursor","date","color","selectedItems","quotation","code","net_total","created_by_name","customer_name","status","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport QuotationCreate from \"./create.js\";\nimport QuotationView from \"./view.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport { format } from \"date-fns\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Button, Spinner, Badge } from \"react-bootstrap\";\nimport ReactPaginate from \"react-paginate\";\nimport NumberFormat from \"react-number-format\";\n\nfunction QuotationIndex(props) {\n  const cookies = new Cookies();\n\n  let [totalQuotation, setTotalQuotation] = useState(0.00);\n  let [profit, setProfit] = useState(0.00);\n  let [loss, setLoss] = useState(0.00);\n\n  //list\n  const [quotationList, setQuotationList] = useState([]);\n\n  //pagination\n  let [pageSize, setPageSize] = useState(5);\n  let [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [totalItems, setTotalItems] = useState(1);\n  const [currentPageItemsCount, setCurrentPageItemsCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n\n  //Date filter\n  const [showDateRange, setShowDateRange] = useState(false);\n  const selectedDate = new Date();\n  let [dateValue, setDateValue] = useState(\"\");\n  let [fromDateValue, setFromDateValue] = useState(\"\");\n  let [toDateValue, setToDateValue] = useState(\"\");\n\n  //Created At filter\n  const [showCreatedAtDateRange, setShowCreatedAtDateRange] = useState(false);\n  const [createdAtValue, setCreatedAtValue] = useState(\"\");\n  const [createdAtFromValue, setCreatedAtFromValue] = useState(\"\");\n  const [createdAtToValue, setCreatedAtToValue] = useState(\"\");\n\n  //loader flag\n  const [isListLoading, setIsListLoading] = useState(false);\n  const [isRefreshInProcess, setIsRefreshInProcess] = useState(false);\n\n  //Customer Auto Suggestion\n  const [customerOptions, setCustomerOptions] = useState([]);\n  const [selectedCustomers, setSelectedCustomers] = useState([]);\n\n  //Created By User Auto Suggestion\n  const [userOptions, setUserOptions] = useState([]);\n  const [selectedCreatedByUsers, setSelectedCreatedByUsers] = useState([]);\n\n  //Status Auto Suggestion\n  const statusOptions = [\n    {\n      id: \"sent\",\n      name: \"Sent\",\n    },\n    {\n      id: \"pending\",\n      name: \"Pending\",\n    },\n    {\n      id: \"accepted\",\n      name: \"Accepted\",\n    },\n    {\n      id: \"rejected\",\n      name: \"Rejected\",\n    },\n    {\n      id: \"cancelled\",\n      name: \"Cancelled\",\n    },\n    {\n      id: \"deleted\",\n      name: \"Deleted\",\n    },\n  ];\n\n  const [selectedStatusList, setSelectedStatusList] = useState([]);\n\n  useEffect(() => {\n    list();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  //Search params\n  const [searchParams, setSearchParams] = useState({});\n  let [sortField, setSortField] = useState(\"created_at\");\n  let [sortOrder, setSortOrder] = useState(\"-\");\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object)\n      .map(function (key) {\n        return `search[${key}]=${object[key]}`;\n      })\n      .join(\"&\");\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = `&${queryString}`;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    let result = await fetch(\n      `/v1/customer?${Select}${queryString}`,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setCustomerOptions(data.result);\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setCustomerOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    let result = await fetch(\n      \"/v1/user?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setUserOptions(data.result);\n  }\n\n  function searchByFieldValue(field, value) {\n    searchParams[field] = value;\n\n    page = 1;\n    setPage(page);\n    list();\n  }\n\n  function searchByDateField(field, value) {\n    if (!value) {\n      page = 1;\n      searchParams[field] = \"\";\n      setPage(page);\n      list();\n      return;\n    }\n\n    let d = new Date(value);\n    d = new Date(d.toUTCString());\n\n    value = format(d, \"MMM dd yyyy\");\n\n    if (field === \"date_str\") {\n      setDateValue(value);\n      setFromDateValue(\"\");\n      setToDateValue(\"\");\n      searchParams[\"from_date\"] = \"\";\n      searchParams[\"to_date\"] = \"\";\n      searchParams[field] = value;\n      console.log(\"Value:\", value);\n    } else if (field === \"from_date\") {\n      setFromDateValue(value);\n      setDateValue(\"\");\n      searchParams[\"date\"] = \"\";\n      searchParams[field] = value;\n    } else if (field === \"to_date\") {\n      setToDateValue(value);\n      setDateValue(\"\");\n      searchParams[\"date\"] = \"\";\n      searchParams[field] = value;\n    } else if (field === \"created_at\") {\n      setCreatedAtValue(value);\n      setCreatedAtFromValue(\"\");\n      setCreatedAtToValue(\"\");\n      searchParams[\"created_at_from\"] = \"\";\n      searchParams[\"created_at_to\"] = \"\";\n      searchParams[field] = value;\n    }\n    if (field === \"created_at_from\") {\n      setCreatedAtFromValue(value);\n      setCreatedAtValue(\"\");\n      searchParams[\"created_at\"] = \"\";\n      searchParams[field] = value;\n    } else if (field === \"created_at_to\") {\n      setCreatedAtToValue(value);\n      setCreatedAtValue(\"\");\n      searchParams[\"created_at\"] = \"\";\n      searchParams[field] = value;\n    }\n\n    page = 1;\n    setPage(page);\n\n    list();\n  }\n\n  function searchByMultipleValuesField(field, values) {\n    if (field === \"created_by\") {\n      setSelectedCreatedByUsers(values);\n    } else if (field === \"customer_id\") {\n      setSelectedCustomers(values);\n    } else if (field === \"status\") {\n      setSelectedStatusList(values);\n    }\n\n    searchParams[field] = Object.values(values)\n      .map(function (model) {\n        return model.id;\n      })\n      .join(\",\");\n\n    page = 1;\n    setPage(page);\n\n    list();\n  }\n\n  function list() {\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n    let Select =\n      \"select=id,code,date,net_total,created_by_name,customer_name,status,created_at,profit,loss\";\n    if (cookies.get(\"store_id\")) {\n      searchParams.store_id = cookies.get(\"store_id\");\n    }\n\n    const d = new Date();\n    let diff = d.getTimezoneOffset();\n    searchParams[\"timezone_offset\"] = parseFloat(diff / 60);\n\n    setSearchParams(searchParams);\n    let queryParams = ObjectToSearchQueryParams(searchParams);\n    if (queryParams !== \"\") {\n      queryParams = \"&\" + queryParams;\n    }\n\n    setIsListLoading(true);\n    fetch(\n      \"/v1/quotation?\" +\n      Select +\n      queryParams +\n      \"&sort=\" +\n      sortOrder +\n      sortField +\n      \"&page=\" +\n      page +\n      \"&limit=\" +\n      pageSize,\n      requestOptions\n    )\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          const error = data && data.errors;\n          return Promise.reject(error);\n        }\n\n        setIsListLoading(false);\n        setIsRefreshInProcess(false);\n        setQuotationList(data.result);\n\n        let pageCount = parseInt((data.total_count + pageSize - 1) / pageSize);\n\n        setTotalPages(pageCount);\n        setTotalItems(data.total_count);\n        setOffset((page - 1) * pageSize);\n        setCurrentPageItemsCount(data.result.length);\n\n        totalQuotation = data.meta.total_quotation;\n        setTotalQuotation(totalQuotation);\n\n        profit = data.meta.profit;\n        setProfit(profit);\n\n        loss = data.meta.loss;\n        setLoss(loss);\n\n      })\n      .catch((error) => {\n        setIsListLoading(false);\n        setIsRefreshInProcess(false);\n        console.log(error);\n      });\n  }\n\n  function sort(field) {\n    sortField = field;\n    setSortField(sortField);\n    sortOrder = sortOrder === \"-\" ? \"\" : \"-\";\n    setSortOrder(sortOrder);\n    list();\n  }\n\n  function changePageSize(size) {\n    pageSize = parseInt(size);\n    setPageSize(pageSize);\n    list();\n  }\n\n  function changePage(newPage) {\n    page = parseInt(newPage);\n    setPage(page);\n    list();\n  }\n\n  function openUpdateForm(id) {\n    CreateFormRef.current.open(id);\n  }\n\n  const DetailsViewRef = useRef();\n  function openDetailsView(id) {\n    DetailsViewRef.current.open(id);\n  }\n\n  const CreateFormRef = useRef();\n  function openCreateForm() {\n    CreateFormRef.current.open();\n  }\n\n  return (\n    <>\n      <QuotationCreate ref={CreateFormRef} refreshList={list} showToastMessage={props.showToastMessage} openDetailsView={openDetailsView} />\n      <QuotationView ref={DetailsViewRef} openUpdateForm={openUpdateForm} openCreateForm={openCreateForm} />\n      <div className=\"container-fluid p-0\">\n        <div className=\"row\">\n\n          <div className=\"col\">\n            <h1 className=\"text-end\">\n              Quotation: <Badge bg=\"secondary\">\n                <NumberFormat\n                  value={totalQuotation}\n                  displayType={\"text\"}\n                  thousandSeparator={true}\n                  suffix={\" \"}\n                  renderText={(value, props) => value}\n                />\n              </Badge>\n            </h1>\n            {cookies.get('admin') === \"true\" ?\n              <h1 className=\"text-end\">\n                Expected Profit: <Badge bg=\"secondary\">\n                  <NumberFormat\n                    value={profit}\n                    displayType={\"text\"}\n                    thousandSeparator={true}\n                    suffix={\" \"}\n                    renderText={(value, props) => value}\n                  />\n                </Badge>\n              </h1> : \"\"}\n            {cookies.get('admin') === \"true\" ?\n              <h1 className=\"text-end\">\n                Expected Loss: <Badge bg=\"secondary\">\n                  <NumberFormat\n                    value={loss}\n                    displayType={\"text\"}\n                    thousandSeparator={true}\n                    suffix={\" \"}\n                    renderText={(value, props) => value}\n                  />\n                </Badge>\n              </h1> : \"\"}\n          </div>\n\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col\">\n            <h1 className=\"h3\">Quotations</h1>\n          </div>\n\n          <div className=\"col text-end\">\n            <Button\n              hide={true.toString()}\n              variant=\"primary\"\n              className=\"btn btn-primary mb-3\"\n              onClick={openCreateForm}\n            >\n              <i className=\"bi bi-plus-lg\"></i> Create\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"card\">\n              {/*\n  <div   className=\"card-header\">\n                        <h5   className=\"card-title mb-0\"></h5>\n                    </div>\n                    */}\n              <div className=\"card-body\">\n                <div className=\"row\">\n                  {totalItems === 0 && (\n                    <div className=\"col\">\n                      <p className=\"text-start\">No Quotations to display</p>\n                    </div>\n                  )}\n                </div>\n                <div className=\"row\" style={{ border: \"solid 0px\" }}>\n                  <div className=\"col text-start\" style={{ border: \"solid 0px\" }}>\n                    <Button\n                      onClick={() => {\n                        setIsRefreshInProcess(true);\n                        list();\n                      }}\n                      variant=\"primary\"\n                      disabled={isRefreshInProcess}\n                    >\n                      {isRefreshInProcess ? (\n                        <Spinner\n                          as=\"span\"\n                          animation=\"border\"\n                          size=\"sm\"\n                          role=\"status\"\n                          aria-hidden=\"true\"\n                        />\n                      ) : (\n                        <i className=\"fa fa-refresh\"></i>\n                      )}\n                      <span className=\"visually-hidden\">Loading...</span>\n                    </Button>\n                  </div>\n                  <div className=\"col text-center\">\n                    {isListLoading && (\n                      <Spinner animation=\"grow\" variant=\"primary\" />\n                    )}\n                  </div>\n                  <div className=\"col text-end\">\n                    {totalItems > 0 && (\n                      <>\n                        <label className=\"form-label\">Size:&nbsp;</label>\n                        <select\n                          value={pageSize}\n                          onChange={(e) => {\n                            changePageSize(e.target.value);\n                          }}\n                          className=\"form-control pull-right\"\n                          style={{\n                            border: \"solid 1px\",\n                            borderColor: \"silver\",\n                            width: \"55px\",\n                          }}\n                        >\n                          <option value=\"5\">\n                            5\n                          </option>\n                          <option value=\"10\">\n                            10\n                          </option>\n                          <option value=\"20\">20</option>\n                          <option value=\"40\">40</option>\n                          <option value=\"50\">50</option>\n                          <option value=\"100\">100</option>\n                        </select>\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <br />\n                <div className=\"row\">\n                  <div className=\"col\" style={{ border: \"solid 0px\" }}>\n                    {totalPages ? <ReactPaginate\n                      breakLabel=\"...\"\n                      nextLabel=\"next >\"\n                      onPageChange={(event) => {\n                        changePage(event.selected + 1);\n                      }}\n                      pageRangeDisplayed={5}\n                      pageCount={totalPages}\n                      previousLabel=\"< previous\"\n                      renderOnZeroPageCount={null}\n                      className=\"pagination  flex-wrap\"\n                      pageClassName=\"page-item\"\n                      pageLinkClassName=\"page-link\"\n                      activeClassName=\"active\"\n                      previousClassName=\"page-item\"\n                      nextClassName=\"page-item\"\n                      previousLinkClassName=\"page-link\"\n                      nextLinkClassName=\"page-link\"\n                      forcePage={page - 1}\n                    /> : \"\"}\n                  </div>\n                </div>\n                <div className=\"row\">\n                  {totalItems > 0 && (\n                    <>\n                      <div className=\"col text-start\">\n                        <p className=\"text-start\">\n                          showing {offset + 1}-{offset + currentPageItemsCount} of{\" \"}\n                          {totalItems}\n                        </p>\n                      </div>\n\n                      <div className=\"col text-end\">\n                        <p className=\"text-end\">\n                          page {page} of {totalPages}\n                        </p>\n                      </div>\n                    </>\n                  )}\n                </div>\n                <div className=\"table-responsive\" style={{ overflowX: \"auto\" }}>\n                  <table className=\"table table-striped table-sm table-bordered\">\n                    <thead>\n                      <tr className=\"text-center\">\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"code\");\n                            }}\n                          >\n                            ID\n                            {sortField === \"code\" && sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                            ) : null}\n                            {sortField === \"code\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-alpha-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        <th>\n                            <b\n                                style={{\n                                    textDecoration: \"underline\",\n                                    cursor: \"pointer\",\n                                }}\n                                onClick={() => {\n                                    sort(\"date\");\n                                }}\n                            >\n                                Date\n                                {sortField === \"date\" && sortOrder === \"-\" ? (\n                                    <i className=\"bi bi-sort-down\"></i>\n                                ) : null}\n                                {sortField === \"date\" && sortOrder === \"\" ? (\n                                    <i className=\"bi bi-sort-up\"></i>\n                                ) : null}\n                            </b>\n                        </th>\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"net_total\");\n                            }}\n                          >\n                            Net Total\n                            {sortField === \"net_total\" && sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-numeric-down\"></i>\n                            ) : null}\n                            {sortField === \"net_total\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-numeric-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        {cookies.get('admin') === \"true\" ?\n                          <th>\n                            <b\n                              style={{\n                                textDecoration: \"underline\",\n                                cursor: \"pointer\",\n                              }}\n                              onClick={() => {\n                                sort(\"profit\");\n                              }}\n                            >\n                              Expected Profit\n                              {sortField === \"profit\" && sortOrder === \"-\" ? (\n                                <i className=\"bi bi-sort-numeric-down\"></i>\n                              ) : null}\n                              {sortField === \"profit\" && sortOrder === \"\" ? (\n                                <i className=\"bi bi-sort-numeric-up\"></i>\n                              ) : null}\n                            </b>\n                          </th> : \"\"}\n                        {cookies.get('admin') === \"true\" ?\n                          <th>\n                            <b\n                              style={{\n                                textDecoration: \"underline\",\n                                cursor: \"pointer\",\n                              }}\n                              onClick={() => {\n                                sort(\"loss\");\n                              }}\n                            >\n                              Expected Loss\n                              {sortField === \"loss\" && sortOrder === \"-\" ? (\n                                <i className=\"bi bi-sort-numeric-down\"></i>\n                              ) : null}\n                              {sortField === \"loss\" && sortOrder === \"\" ? (\n                                <i className=\"bi bi-sort-numeric-up\"></i>\n                              ) : null}\n                            </b>\n                          </th> : \"\"}\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"created_by\");\n                            }}\n                          >\n                            Created By\n                            {sortField === \"created_by\" && sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                            ) : null}\n                            {sortField === \"created_by\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-alpha-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"customer_name\");\n                            }}\n                          >\n                            Customer\n                            {sortField === \"customer_name\" &&\n                              sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                            ) : null}\n                            {sortField === \"customer_name\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-alpha-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"status\");\n                            }}\n                          >\n                            Status\n                            {sortField === \"status\" && sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-alpha-up-alt\"></i>\n                            ) : null}\n                            {sortField === \"status\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-alpha-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        <th>\n                          <b\n                            style={{\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => {\n                              sort(\"created_at\");\n                            }}\n                          >\n                            Created At\n                            {sortField === \"created_at\" && sortOrder === \"-\" ? (\n                              <i className=\"bi bi-sort-down\"></i>\n                            ) : null}\n                            {sortField === \"created_at\" && sortOrder === \"\" ? (\n                              <i className=\"bi bi-sort-up\"></i>\n                            ) : null}\n                          </b>\n                        </th>\n                        <th>Actions</th>\n                      </tr>\n                    </thead>\n\n                    <thead>\n                      <tr className=\"text-center\">\n                        <th>\n                          <input\n                            type=\"text\"\n                            id=\"code\"\n                            onChange={(e) =>\n                              searchByFieldValue(\"code\", e.target.value)\n                            }\n                            className=\"form-control\"\n                          />\n                        </th>\n                        <th>\n                            <DatePicker\n                                id=\"date_str\"\n                                value={dateValue}\n                                selected={selectedDate}\n                                className=\"form-control\"\n                                dateFormat=\"MMM dd yyyy\"\n                                onChange={(date) => {\n                                    if (!date) {\n                                        setDateValue(\"\");\n                                        searchByDateField(\"date_str\", \"\");\n                                        return;\n                                    }\n                                    searchByDateField(\"date_str\", date);\n                                }}\n                            />\n                            <small\n                                style={{\n                                    color: \"blue\",\n                                    textDecoration: \"underline\",\n                                    cursor: \"pointer\",\n                                }}\n                                onClick={(e) => setShowDateRange(!showDateRange)}\n                            >\n                                {showDateRange ? \"Less..\" : \"More..\"}\n                            </small>\n                            <br />\n\n                            {showDateRange ? (\n                                <span className=\"text-left\">\n                                    From:{\" \"}\n                                    <DatePicker\n                                        id=\"from_date\"\n                                        value={fromDateValue}\n                                        selected={selectedDate}\n                                        className=\"form-control\"\n                                        dateFormat=\"MMM dd yyyy\"\n                                        onChange={(date) => {\n                                            if (!date) {\n                                                setFromDateValue(\"\");\n                                                searchByDateField(\"from_date\", \"\");\n                                                return;\n                                            }\n                                            searchByDateField(\"from_date\", date);\n                                        }}\n                                    />\n                                    To:{\" \"}\n                                    <DatePicker\n                                        id=\"to_date\"\n                                        value={toDateValue}\n                                        selected={selectedDate}\n                                        className=\"form-control\"\n                                        dateFormat=\"MMM dd yyyy\"\n                                        onChange={(date) => {\n                                            if (!date) {\n                                                setToDateValue(\"\");\n                                                searchByDateField(\"to_date\", \"\");\n                                                return;\n                                            }\n                                            searchByDateField(\"to_date\", date);\n                                        }}\n                                    />\n                                </span>\n                            ) : null}\n                        </th>\n                        <th>\n                          <input\n                            type=\"text\"\n                            id=\"net_total\"\n                            onChange={(e) =>\n                              searchByFieldValue(\"net_total\", e.target.value)\n                            }\n                            className=\"form-control\"\n                          />\n                        </th>\n                        {cookies.get('admin') === \"true\" ?\n                          <th>\n                            <input\n                              type=\"text\"\n                              id=\"profit\"\n                              onChange={(e) =>\n                                searchByFieldValue(\"profit\", e.target.value)\n                              }\n                              className=\"form-control\"\n                            />\n                          </th> : \"\"}\n                        {cookies.get('admin') === \"true\" ?\n                          <th>\n                            <input\n                              type=\"text\"\n                              id=\"loss\"\n                              onChange={(e) =>\n                                searchByFieldValue(\"loss\", e.target.value)\n                              }\n                              className=\"form-control\"\n                            />\n                          </th> : \"\"}\n                        <th>\n                          <Typeahead\n                            id=\"created_by\"\n                            labelKey=\"name\"\n                            onChange={(selectedItems) => {\n                              searchByMultipleValuesField(\n                                \"created_by\",\n                                selectedItems\n                              );\n                            }}\n                            options={userOptions}\n                            placeholder=\"Select Users\"\n                            selected={selectedCreatedByUsers}\n                            highlightOnlyResult={true}\n                            onInputChange={(searchTerm, e) => {\n                              suggestUsers(searchTerm);\n                            }}\n                            multiple\n                          />\n                        </th>\n                        <th>\n                          <Typeahead\n                            id=\"customer_id\"\n                            labelKey=\"search_label\"\n                            onChange={(selectedItems) => {\n                              searchByMultipleValuesField(\n                                \"customer_id\",\n                                selectedItems\n                              );\n                            }}\n                            options={customerOptions}\n                            placeholder=\"name or mob\"\n                            selected={selectedCustomers}\n                            highlightOnlyResult={true}\n                            onInputChange={(searchTerm, e) => {\n                              suggestCustomers(searchTerm);\n                            }}\n                            multiple\n                          />\n                        </th>\n                        <th>\n                          <Typeahead\n                            id=\"status\"\n                            labelKey=\"name\"\n                            onChange={(selectedItems) => {\n                              searchByMultipleValuesField(\n                                \"status\",\n                                selectedItems\n                              );\n                            }}\n                            options={statusOptions}\n                            placeholder=\"Select Status\"\n                            selected={selectedStatusList}\n                            highlightOnlyResult={true}\n                            multiple\n                          />\n                        </th>\n                        <th>\n                          <DatePicker\n                            id=\"created_at\"\n                            value={createdAtValue}\n                            selected={selectedDate}\n                            className=\"form-control\"\n                            dateFormat=\"MMM dd yyyy\"\n                            onChange={(date) => {\n                              if (!date) {\n                                setCreatedAtValue(\"\");\n                                searchByDateField(\"created_at\", \"\");\n                                return;\n                              }\n                              searchByDateField(\"created_at\", date);\n                            }}\n                          />\n                          <small\n                            style={{\n                              color: \"blue\",\n                              textDecoration: \"underline\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={(e) =>\n                              setShowCreatedAtDateRange(!showCreatedAtDateRange)\n                            }\n                          >\n                            {showCreatedAtDateRange ? \"Less..\" : \"More..\"}\n                          </small>\n                          <br />\n\n                          {showCreatedAtDateRange ? (\n                            <span className=\"text-left\">\n                              From:{\" \"}\n                              <DatePicker\n                                id=\"created_at_from\"\n                                value={createdAtFromValue}\n                                selected={selectedDate}\n                                className=\"form-control\"\n                                dateFormat=\"MMM dd yyyy\"\n                                onChange={(date) => {\n                                  if (!date) {\n                                    setCreatedAtFromValue(\"\");\n                                    searchByDateField(\"created_at_from\", \"\");\n                                    return;\n                                  }\n                                  searchByDateField(\"created_at_from\", date);\n                                }}\n                              />\n                              To:{\" \"}\n                              <DatePicker\n                                id=\"created_at_to\"\n                                value={createdAtToValue}\n                                selected={selectedDate}\n                                className=\"form-control\"\n                                dateFormat=\"MMM dd yyyy\"\n                                onChange={(date) => {\n                                  if (!date) {\n                                    setCreatedAtToValue(\"\");\n                                    searchByDateField(\"created_at_to\", \"\");\n                                    return;\n                                  }\n                                  searchByDateField(\"created_at_to\", date);\n                                }}\n                              />\n                            </span>\n                          ) : null}\n                        </th>\n                        <th></th>\n                      </tr>\n                    </thead>\n\n                    <tbody className=\"text-center\">\n                      {quotationList &&\n                        quotationList.map((quotation) => (\n                          <tr key={quotation.code}>\n                            <td>{quotation.code}</td>\n                            <td>\n                              {format(new Date(quotation.date), \"MMM dd yyyy h:mma\")}\n                            </td>\n                            <td>{quotation.net_total} </td>\n                            {cookies.get('admin') === \"true\" ?\n                              <td>{quotation.profit ? quotation.profit : 0.00} </td>\n                              : \"\"}\n                            {cookies.get('admin') === \"true\" ?\n                              <td>{quotation.loss ? quotation.loss : 0.00} </td>\n                              : \"\"}\n                            <td>{quotation.created_by_name}</td>\n                            <td>{quotation.customer_name}</td>\n                            <td>\n                              <span className=\"badge bg-success\">\n                                {quotation.status}\n                              </span>\n                            </td>\n                            <td>\n                              {format(\n                                new Date(quotation.created_at),\n                                \"MMM dd yyyy h:mma\"\n                              )}\n                            </td>\n                            <td>\n                              <Button className=\"btn btn-light btn-sm\" onClick={() => {\n                                openUpdateForm(quotation.id);\n                              }}>\n                                <i className=\"bi bi-pencil\"></i>\n                              </Button>\n\n                              <Button className=\"btn btn-primary btn-sm\" onClick={() => {\n                                openDetailsView(quotation.id);\n                              }}>\n                                <i className=\"bi bi-eye\"></i>\n                              </Button>\n\n                              <button\n                                className=\"btn btn-default btn-sm\"\n                                data-bs-toggle=\"tooltip\"\n                                data-bs-placement=\"top\"\n                                title=\"Download\"\n                              >\n                                <i className=\"bi bi-download\"></i>\n                              </button>\n\n                              <button\n                                className=\"btn btn-outline-secondary dropdown-toggle\"\n                                type=\"button\"\n                                data-bs-toggle=\"dropdown\"\n                                aria-expanded=\"false\"\n                              ></button>\n                              <ul className=\"dropdown-menu\">\n                                <li>\n                                  <a href=\"/\" className=\"dropdown-item\">\n                                    <i className=\"bi bi-download\"></i>\n                                    Download\n                                  </a>\n                                </li>\n                                {/*\n                              <li>\n                                <a href=\"/\" className=\"dropdown-item\">\n                                  <i className=\"bi bi-trash\"></i>\n                                  Delete\n                                </a>\n                              </li>\n                              */}\n                              </ul>\n                            </td>\n                          </tr>\n                        ))}\n                    </tbody>\n                  </table>\n                </div>\n\n                {totalPages ? <ReactPaginate\n                  breakLabel=\"...\"\n                  nextLabel=\"next >\"\n                  onPageChange={(event) => {\n                    changePage(event.selected + 1);\n                  }}\n                  pageRangeDisplayed={5}\n                  pageCount={totalPages}\n                  previousLabel=\"< previous\"\n                  renderOnZeroPageCount={null}\n                  className=\"pagination  flex-wrap\"\n                  pageClassName=\"page-item\"\n                  pageLinkClassName=\"page-link\"\n                  activeClassName=\"active\"\n                  previousClassName=\"page-item\"\n                  nextClassName=\"page-item\"\n                  previousLinkClassName=\"page-link\"\n                  nextLinkClassName=\"page-link\"\n                  forcePage={page - 1}\n                /> : \"\"}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default QuotationIndex;\n"]},"metadata":{},"sourceType":"module"}