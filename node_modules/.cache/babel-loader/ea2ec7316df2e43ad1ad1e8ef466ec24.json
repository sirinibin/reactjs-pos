{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect,useRef,forwardRef,useImperativeHandle}from\"react\";import QuotationPreview from\"./preview.js\";import{Modal,Button,Form}from\"react-bootstrap\";import StoreCreate from\"../store/create.js\";import CustomerCreate from\"./../customer/create.js\";import ProductCreate from\"./../product/create.js\";import UserCreate from\"./../user/create.js\";import SignatureCreate from\"./../signature/create.js\";import Cookies from\"universal-cookie\";import{Typeahead}from\"react-bootstrap-typeahead\";import NumberFormat from\"react-number-format\";import DatePicker from\"react-datepicker\";import{format}from\"date-fns\";import{Spinner}from\"react-bootstrap\";import QuotationView from\"./view.js\";import ProductView from\"./../product/view.js\";import{DebounceInput}from\"react-debounce-input\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QuotationCreate=/*#__PURE__*/forwardRef(function(props,ref){useImperativeHandle(ref,function(){return{open:function open(id){formData={vat_percent:15.0,discount:0.0,discountValue:0.0,discount_percent:0.0,shipping_handling_fees:0.0,is_discount_percent:false,date_str:new Date(),signature_date_str:format(new Date(),\"MMM dd yyyy\"),status:\"delivered\",price_type:\"retail\",delivery_days:7,validity_days:2};selectedProducts=[];setSelectedProducts([]);selectedStores=[];setSelectedStores([]);selectedCustomers=[];setSelectedCustomers([]);selectedDeliveredByUsers=[];setSelectedDeliveredByUsers([]);selectedDeliveredBySignatures=[];setSelectedDeliveredBySignatures([]);reCalculate();if(cookies.get(\"user_id\")){selectedDeliveredByUsers=[{id:cookies.get(\"user_id\"),name:cookies.get(\"user_name\")}];formData.delivered_by=cookies.get(\"user_id\");setFormData(_objectSpread({},formData));setSelectedDeliveredByUsers(_toConsumableArray(selectedDeliveredByUsers));}if(cookies.get(\"store_id\")){formData.store_id=cookies.get(\"store_id\");formData.store_name=cookies.get(\"store_name\");}setFormData(_objectSpread({},formData));if(id){getQuotation(id);}SetShow(true);}};});useEffect(function(){var listener=function listener(event){if(event.code===\"Enter\"||event.code===\"NumpadEnter\"){console.log(\"Enter key was pressed. Run your function-order.123\");// event.preventDefault();\nvar form=event.target.form;if(form&&event.target){var index=Array.prototype.indexOf.call(form,event.target);if(form&&form.elements[index+1]){if(event.target.getAttribute(\"class\").includes(\"barcode\")){form.elements[index].focus();}else{form.elements[index+1].focus();}event.preventDefault();}}}};document.addEventListener(\"keydown\",listener);return function(){document.removeEventListener(\"keydown\",listener);};},[]);var selectedDate=new Date();//const history = useHistory();\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isProcessing=_useState4[0],setProcessing=_useState4[1];var cookies=new Cookies();//fields\nvar _useState5=useState({vat_percent:15.0,discount:0.0,discountValue:0.0,discount_percent:0.0,//date_str: format(new Date(), \"MMM dd yyyy\"),\ndate_str:new Date(),signature_date_str:format(new Date(),\"MMM dd yyyy\"),status:\"created\",price_type:\"retail\",is_discount_percent:false,validity_days:2,delivery_days:7}),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];//Store Auto Suggestion\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),storeOptions=_useState8[0],setStoreOptions=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedStores=_useState10[0],setSelectedStores=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isStoresLoading=_useState12[0],setIsStoresLoading=_useState12[1];//Customer Auto Suggestion\nvar _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),customerOptions=_useState14[0],setCustomerOptions=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),selectedCustomers=_useState16[0],setSelectedCustomers=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isCustomersLoading=_useState18[0],setIsCustomersLoading=_useState18[1];//Product Auto Suggestion\nvar _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),productOptions=_useState20[0],setProductOptions=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),selectedProduct=_useState22[0],setSelectedProduct=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),selectedProducts=_useState24[0],setSelectedProducts=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isProductsLoading=_useState26[0],setIsProductsLoading=_useState26[1];//Delivered By Auto Suggestion\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),deliveredByUserOptions=_useState28[0],setDeliveredByUserOptions=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),selectedDeliveredByUsers=_useState30[0],setSelectedDeliveredByUsers=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),isDeliveredByUsersLoading=_useState32[0],setIsDeliveredByUsersLoading=_useState32[1];//Delivered By Signature Auto Suggestion\nvar _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),deliveredBySignatureOptions=_useState34[0],setDeliveredBySignatureOptions=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),selectedDeliveredBySignatures=_useState36[0],setSelectedDeliveredBySignatures=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),isDeliveredBySignaturesLoading=_useState38[0],setIsDeliveredBySignaturesLoading=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),show=_useState40[0],SetShow=_useState40[1];function handleClose(){SetShow(false);}useEffect(function(){var at=cookies.get(\"access_token\");if(!at){// history.push(\"/dashboard/quotations\");\nwindow.location=\"/\";}});function getQuotation(id){console.log(\"inside get Quotation\");var requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};fetch(\"/v1/quotation/\"+id,requestOptions).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var _response$headers$get;var isJson,data,error,quotation,selectedStores,selectedCustomers,selectedDeliveredByUsers,_selectedDeliveredBySignatures;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isJson=(_response$headers$get=response.headers.get(\"content-type\"))===null||_response$headers$get===void 0?void 0:_response$headers$get.includes(\"application/json\");_context.t0=isJson;if(!_context.t0){_context.next=6;break;}_context.next=5;return response.json();case 5:_context.t0=_context.sent;case 6:data=_context.t0;if(response.ok){_context.next=10;break;}error=data&&data.errors;return _context.abrupt(\"return\",Promise.reject(error));case 10:setErrors({});console.log(\"Response:\");console.log(data);quotation=data.result;formData={id:quotation.id,code:quotation.code,store_id:quotation.store_id,customer_id:quotation.customer_id,// date_str: quotation.date_str,\ndate:quotation.date,vat_percent:quotation.vat_percent,discount:quotation.discount,discount_percent:quotation.discount_percent,status:quotation.status,delivered_by:quotation.delivered_by,delivered_by_signature_id:quotation.delivered_by_signature_id,is_discount_percent:quotation.is_discount_percent,shipping_handling_fees:quotation.shipping_handling_fees,delivery_days:quotation.delivery_days?quotation.delivery_days:7,validity_days:quotation.validity_days?quotation.validity_days:2};formData.date_str=data.result.date;if(formData.is_discount_percent){formData.discountValue=formData.discount_percent;}else{formData.discountValue=formData.discount;}selectedProducts=quotation.products;setSelectedProducts(_toConsumableArray(selectedProducts));selectedStores=[{id:quotation.store_id,name:quotation.store_name}];selectedCustomers=[{id:quotation.customer_id,name:quotation.customer_name,search_label:quotation.customer_name}];selectedDeliveredByUsers=[{id:quotation.delivered_by,name:quotation.delivered_by_name}];if(quotation.delivered_by_signature_id){_selectedDeliveredBySignatures=[{id:quotation.delivered_by_signature_id,name:quotation.delivered_by_signature_name}];setSelectedDeliveredBySignatures([].concat(_selectedDeliveredBySignatures));}setSelectedDeliveredByUsers([].concat(selectedDeliveredByUsers));setSelectedStores([].concat(selectedStores));setSelectedCustomers([].concat(selectedCustomers));setFormData(_objectSpread({},formData));reCalculate();case 28:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){setProcessing(false);setErrors(error);});}function ObjectToSearchQueryParams(object){return Object.keys(object).map(function(key){return\"search[\".concat(key,\"]=\")+encodeURIComponent(object[key]);}).join(\"&\");}function suggestStores(_x2){return _suggestStores.apply(this,arguments);}function _suggestStores(){_suggestStores=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"Inside handle suggestStores\");setStoreOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context3.next=5;break;}return _context3.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";setIsStoresLoading(true);_context3.next=13;return fetch(\"/v1/store?\"+Select+queryString,requestOptions);case 13:result=_context3.sent;_context3.next=16;return result.json();case 16:data=_context3.sent;setStoreOptions(data.result);setIsStoresLoading(false);case 19:case\"end\":return _context3.stop();}}},_callee3);}));return _suggestStores.apply(this,arguments);}function suggestCustomers(_x3){return _suggestCustomers.apply(this,arguments);}function _suggestCustomers(){_suggestCustomers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"Inside handle suggestCustomers\");setCustomerOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context4.next=5;break;}return _context4.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";setIsCustomersLoading(true);_context4.next=13;return fetch(\"/v1/customer?\"+Select+queryString,requestOptions);case 13:result=_context4.sent;_context4.next=16;return result.json();case 16:data=_context4.sent;setCustomerOptions(data.result);setIsCustomersLoading(false);case 19:case\"end\":return _context4.stop();}}},_callee4);}));return _suggestCustomers.apply(this,arguments);}function GetProductUnitPriceInStore(storeId,productStores){if(!productStores){return\"\";}for(var i=0;i<productStores.length;i++){console.log(\"productStores[i]:\",productStores[i]);console.log(\"store_id:\",storeId);if(productStores[i].store_id===storeId){console.log(\"macthed\");console.log(\"productStores[i].retail_unit_price:\",productStores[i].retail_unit_price);return productStores[i];}}console.log(\"not matched\");return\"\";}function GetProductPurchaseUnitPriceInStore(storeId,unitPriceListArray){if(!unitPriceListArray){return\"\";}for(var i=0;i<unitPriceListArray.length;i++){console.log(\"unitPriceListArray[i]:\",unitPriceListArray[i]);console.log(\"store_id:\",storeId);if(unitPriceListArray[i].store_id===storeId){return unitPriceListArray[i].purchase_unit_price;}else{console.log(\"not matched\");}}return\"\";}var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),openProductSearchResult=_useState42[0],setOpenProductSearchResult=_useState42[1];function suggestProducts(_x4){return _suggestProducts.apply(this,arguments);}function _suggestProducts(){_suggestProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(searchTerm){var params,queryString,requestOptions,Select,result,data,products;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"Inside handle suggestProducts\");setProductOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context5.next=8;break;}openProductSearchResult=false;setOpenProductSearchResult(false);setIsProductsLoading(false);return _context5.abrupt(\"return\");case 8:params={name:searchTerm};if(cookies.get(\"store_id\")){params.store_id=cookies.get(\"store_id\");}queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic\";setIsProductsLoading(true);_context5.next=17;return fetch(\"/v1/product?\"+Select+queryString+\"&limit=200\",requestOptions);case 17:result=_context5.sent;_context5.next=20;return result.json();case 20:data=_context5.sent;products=data.result;if(!(!products||products.length===0)){_context5.next=27;break;}openProductSearchResult=false;setOpenProductSearchResult(false);setIsProductsLoading(false);return _context5.abrupt(\"return\");case 27:openProductSearchResult=true;setOpenProductSearchResult(true);setProductOptions(products);setIsProductsLoading(false);case 31:case\"end\":return _context5.stop();}}},_callee5);}));return _suggestProducts.apply(this,arguments);}function getProductByBarCode(_x5){return _getProductByBarCode.apply(this,arguments);}function _getProductByBarCode(){_getProductByBarCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(barcode){var requestOptions,Select,result,data,product;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:formData.barcode=barcode;setFormData(_objectSpread({},formData));console.log(\"Inside getProductByBarCode\");errors[\"bar_code\"]=\"\";setErrors(_objectSpread({},errors));console.log(\"barcode:\"+formData.barcode);if(formData.barcode){_context6.next=8;break;}return _context6.abrupt(\"return\");case 8:if(formData.barcode.length===13){formData.barcode=formData.barcode.slice(0,-1);}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";_context6.next=13;return fetch(\"/v1/product/barcode/\"+formData.barcode+\"?\"+Select,requestOptions);case 13:result=_context6.sent;_context6.next=16;return result.json();case 16:data=_context6.sent;product=data.result;if(product){addProduct(product);}else{errors[\"bar_code\"]=\"Invalid Barcode:\"+formData.barcode;setErrors(_objectSpread({},errors));}formData.barcode=\"\";setFormData(_objectSpread({},formData));case 21:case\"end\":return _context6.stop();}}},_callee6);}));return _getProductByBarCode.apply(this,arguments);}function suggestUsers(_x6){return _suggestUsers.apply(this,arguments);}function _suggestUsers(){_suggestUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log(\"Inside handle suggestUsers\");setDeliveredByUserOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context7.next=5;break;}return _context7.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";setIsDeliveredByUsersLoading(true);_context7.next=13;return fetch(\"/v1/user?\"+Select+queryString,requestOptions);case 13:result=_context7.sent;_context7.next=16;return result.json();case 16:data=_context7.sent;setDeliveredByUserOptions(data.result);setIsDeliveredByUsersLoading(false);case 19:case\"end\":return _context7.stop();}}},_callee7);}));return _suggestUsers.apply(this,arguments);}function suggestSignatures(_x7){return _suggestSignatures.apply(this,arguments);}function _suggestSignatures(){_suggestSignatures=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(searchTerm){var params,queryString,requestOptions,Select,result,data;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(\"Inside handle suggestSignatures\");setDeliveredBySignatureOptions([]);console.log(\"searchTerm:\"+searchTerm);if(searchTerm){_context8.next=5;break;}return _context8.abrupt(\"return\");case 5:params={name:searchTerm};queryString=ObjectToSearchQueryParams(params);if(queryString!==\"\"){queryString=\"&\"+queryString;}requestOptions={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")}};Select=\"select=id,name\";setIsDeliveredBySignaturesLoading(true);_context8.next=13;return fetch(\"/v1/signature?\"+Select+queryString,requestOptions);case 13:result=_context8.sent;_context8.next=16;return result.json();case 16:data=_context8.sent;setDeliveredBySignatureOptions(data.result);setIsDeliveredBySignaturesLoading(false);case 19:case\"end\":return _context8.stop();}}},_callee8);}));return _suggestSignatures.apply(this,arguments);}function handleCreate(event){event.preventDefault();console.log(\"Inside handle Create\");console.log(\"selectedProducts:\",selectedProducts);formData.products=[];for(var i=0;i<selectedProducts.length;i++){formData.products.push({product_id:selectedProducts[i].product_id,name:selectedProducts[i].name,name_in_arabic:selectedProducts[i].name_in_arabic,quantity:parseFloat(selectedProducts[i].quantity),unit_price:parseFloat(selectedProducts[i].unit_price),purchase_unit_price:parseFloat(selectedProducts[i].purchase_unit_price),unit:selectedProducts[i].unit,part_number:selectedProducts[i].part_number});}formData.discount=parseFloat(formData.discount);formData.discount_percent=parseFloat(formData.discount_percent);formData.vat_percent=parseFloat(formData.vat_percent);if(cookies.get(\"store_id\")){formData.store_id=cookies.get(\"store_id\");}console.log(\"formData.discount:\",formData.discount);var endPoint=\"/v1/quotation\";var method=\"POST\";if(formData.id){endPoint=\"/v1/quotation/\"+formData.id;method=\"PUT\";}var requestOptions={method:method,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:cookies.get(\"access_token\")},body:JSON.stringify(formData)};console.log(\"formData:\",formData);setProcessing(true);fetch(endPoint,requestOptions).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var _response$headers$get2;var isJson,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isJson=(_response$headers$get2=response.headers.get(\"content-type\"))===null||_response$headers$get2===void 0?void 0:_response$headers$get2.includes(\"application/json\");_context2.t0=isJson;if(!_context2.t0){_context2.next=6;break;}_context2.next=5;return response.json();case 5:_context2.t0=_context2.sent;case 6:data=_context2.t0;if(response.ok){_context2.next=10;break;}// get error message from body or default to response status\nerror=data&&data.errors;//const error = data.errors\nreturn _context2.abrupt(\"return\",Promise.reject(error));case 10:setErrors({});setProcessing(false);console.log(\"Response:\");console.log(data);props.showToastMessage(\"Quotation Created Successfully!\",\"success\");if(props.refreshList){props.refreshList();}handleClose();props.openDetailsView(data.result.id);case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x8){return _ref2.apply(this,arguments);};}()).catch(function(error){setProcessing(false);console.log(\"Inside catch\");console.log(error);setErrors(_objectSpread({},error));console.error(\"There was an error!\",error);props.showToastMessage(\"Error Creating Quotation!\",\"danger\");});}function isProductAdded(productID){for(var i=0;i<selectedProducts.length;i++){if(selectedProducts[i].product_id===productID){return true;}}return false;}function addProduct(product){console.log(\"Inside Add product\");if(!formData.store_id){errors.product_id=\"Please Select a Store and try again\";setErrors(_objectSpread({},errors));return;}errors.product_id=\"\";if(!product){errors.product_id=\"Invalid Product\";setErrors(_objectSpread({},errors));return;}var unitPrice=GetProductUnitPriceInStore(formData.store_id,product.stores);product.unit_price=unitPrice.retail_unit_price;product.purchase_unit_price=unitPrice.purchase_unit_price;var alreadyAdded=false;var index=-1;var quantity=0.0;product.quantity=1.0;if(isProductAdded(product.id)){alreadyAdded=true;index=getProductIndex(product.id);quantity=parseFloat(selectedProducts[index].quantity+product.quantity);}else{quantity=parseFloat(product.quantity);}console.log(\"quantity:\",quantity);errors.quantity=\"\";if(alreadyAdded){selectedProducts[index].quantity=parseFloat(quantity);}if(!alreadyAdded){var item={product_id:product.id,code:product.item_code,part_number:product.part_number,name:product.name,quantity:product.quantity,stores:product.stores,unit:product.unit};if(product.unit_price){item.unit_price=parseFloat(product.unit_price);console.log(\"item.unit_price:\",item.unit_price);}if(product.purchase_unit_price){item.purchase_unit_price=parseFloat(product.purchase_unit_price);console.log(\"item.purchase_unit_price\",item.purchase_unit_price);}selectedProducts.push(item);}console.log(\"selectedProducts:\",selectedProducts);setSelectedProducts(_toConsumableArray(selectedProducts));reCalculate();}function getProductIndex(productID){for(var i=0;i<selectedProducts.length;i++){if(selectedProducts[i].product_id===productID){return i;}}return false;}function removeProduct(product){var index=selectedProducts.indexOf(product);if(index>-1){selectedProducts.splice(index,1);}setSelectedProducts(_toConsumableArray(selectedProducts));reCalculate();}var _useState43=useState(0.0),_useState44=_slicedToArray(_useState43,2),totalPrice=_useState44[0],setTotalPrice=_useState44[1];function findTotalPrice(){totalPrice=0.0;for(var i=0;i<selectedProducts.length;i++){totalPrice+=parseFloat(selectedProducts[i].unit_price)*parseFloat(selectedProducts[i].quantity);}totalPrice=totalPrice.toFixed(2);setTotalPrice(totalPrice);}var _useState45=useState(7),_useState46=_slicedToArray(_useState45,2),deliveryDays=_useState46[0],setDeliveryDays=_useState46[1];var _useState47=useState(2),_useState48=_slicedToArray(_useState47,2),validityDays=_useState48[0],setValidityDays=_useState48[1];var _useState49=useState(0.0),_useState50=_slicedToArray(_useState49,2),vatPrice=_useState50[0],setVatPrice=_useState50[1];function findVatPrice(){vatPrice=0.0;if(totalPrice>0){vatPrice=(parseFloat(parseFloat(formData.vat_percent)/100)*(parseFloat(totalPrice)+parseFloat(formData.shipping_handling_fees)-parseFloat(formData.discount))).toFixed(2);console.log(\"vatPrice:\",vatPrice);}setVatPrice(vatPrice);}var _useState51=useState(0.0),_useState52=_slicedToArray(_useState51,2),netTotal=_useState52[0],setNetTotal=_useState52[1];function findNetTotal(){netTotal=0.0;if(totalPrice>0){netTotal=(parseFloat(totalPrice)+parseFloat(formData.shipping_handling_fees)-parseFloat(formData.discount)+parseFloat(vatPrice)).toFixed(2);}setNetTotal(netTotal);}var _useState53=useState(0.0),_useState54=_slicedToArray(_useState53,2),discountPercent=_useState54[0],setDiscountPercent=_useState54[1];function findDiscountPercent(){if(formData.discount>=0&&totalPrice>0){discountPercent=parseFloat(parseFloat(formData.discount/totalPrice)*100).toFixed(2);setDiscountPercent(discountPercent);formData.discount_percent=discountPercent;setFormData(_objectSpread({},formData));}}function findDiscount(){if(formData.discount_percent>=0&&totalPrice>0){formData.discount=parseFloat(totalPrice*parseFloat(formData.discount_percent/100)).toFixed(2);setFormData(_objectSpread({},formData));}}function reCalculate(){findTotalPrice();if(formData.is_discount_percent){findDiscount();}else{findDiscountPercent();}findVatPrice();findNetTotal();}var StoreCreateFormRef=useRef();function openStoreCreateForm(){StoreCreateFormRef.current.open();}var CustomerCreateFormRef=useRef();function openCustomerCreateForm(){CustomerCreateFormRef.current.open();}var ProductCreateFormRef=useRef();function openProductCreateForm(){ProductCreateFormRef.current.open();}function openProductUpdateForm(id){ProductCreateFormRef.current.open(id);}var UserCreateFormRef=useRef();function openUserCreateForm(){UserCreateFormRef.current.open();}var SignatureCreateFormRef=useRef();function openSignatureCreateForm(){SignatureCreateFormRef.current.open();}var ProductDetailsViewRef=useRef();function openProductDetailsView(id){ProductDetailsViewRef.current.open(id);}var PreviewRef=useRef();function openPreview(){var model={};model=JSON.parse(JSON.stringify(formData));model.products=selectedProducts;model.net_total=netTotal;model.vat_price=vatPrice;model.total=totalPrice;//setFormData({ ...formData });\nPreviewRef.current.open(model);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductView,{ref:ProductDetailsViewRef,openUpdateForm:openProductUpdateForm,openCreateForm:openProductCreateForm}),/*#__PURE__*/_jsx(ProductCreate,{ref:ProductCreateFormRef,showToastMessage:props.showToastMessage,openDetailsView:openProductDetailsView}),/*#__PURE__*/_jsx(QuotationPreview,{ref:PreviewRef}),/*#__PURE__*/_jsx(StoreCreate,{ref:StoreCreateFormRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(CustomerCreate,{ref:CustomerCreateFormRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(UserCreate,{ref:UserCreateFormRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsx(SignatureCreate,{ref:SignatureCreateFormRef,showToastMessage:props.showToastMessage}),/*#__PURE__*/_jsxs(Modal,{show:show,size:\"xl\",fullscreen:true,onHide:handleClose,animation:false,backdrop:\"static\",scrollable:true,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsx(Modal.Title,{children:formData.id?\"Update Quotation #\"+formData.code:\"Create New Quotation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col align-self-end text-end\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:openPreview,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-display\"}),\" Preview\"]}),\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:openPreview,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-display\"}),\" Preview\"]}),\"\\xA0\\xA0 \\xA0\\xA0 \\xA0\\xA0\",formData.id?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){handleClose();props.openDetailsView(formData.id);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"}),\" View Detail\"]}):\"\",\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:handleCreate,children:[isProcessing?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true})+\" Creating...\":\"\",formData.id?\"Update\":\"Create\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose,\"aria-label\":\"Close\"})]})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3 needs-validation\",onSubmit:handleCreate,children:[!cookies.get(\"store_name\")?/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Store*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(Typeahead,{id:\"store_id\",labelKey:\"name\",isLoading:isStoresLoading,isInvalid:errors.store_id?true:false,onChange:function onChange(selectedItems){errors.store_id=\"\";setErrors(errors);if(selectedItems.length===0){errors.store_id=\"Invalid Store selected\";setErrors(errors);formData.store_id=\"\";setFormData(_objectSpread({},formData));setSelectedStores([]);return;}formData.store_id=selectedItems[0].id;setFormData(_objectSpread({},formData));setSelectedStores(selectedItems);//SetPriceOfAllProducts(selectedItems[0].id);\n},options:storeOptions,placeholder:\"Select Store\",selected:selectedStores,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestStores(searchTerm);}}),/*#__PURE__*/_jsxs(Button,{hide:true.toString(),onClick:openStoreCreateForm,className:\"btn btn-outline-secondary btn-primary btn-sm\",type:\"button\",id:\"button-addon1\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" New\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi x-lg\",children:\" \"}),errors.store_id]}),formData.store_id&&!errors.store_id&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Customer*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(Typeahead,{id:\"customer_id\",labelKey:\"search_label\",isLoading:isCustomersLoading,isInvalid:errors.customer_id?true:false,onChange:function onChange(selectedItems){errors.customer_id=\"\";setErrors(errors);if(selectedItems.length===0){errors.customer_id=\"Invalid Customer selected\";setErrors(errors);formData.customer_id=\"\";setFormData(_objectSpread({},formData));setSelectedCustomers([]);return;}formData.customer_id=selectedItems[0].id;setFormData(_objectSpread({},formData));setSelectedCustomers(selectedItems);},options:customerOptions,placeholder:\"Type name or mob\",selected:selectedCustomers,highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestCustomers(searchTerm);}}),/*#__PURE__*/_jsxs(Button,{hide:true.toString(),onClick:openCustomerCreateForm,className:\"btn btn-outline-secondary btn-primary btn-sm\",type:\"button\",id:\"button-addon1\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" New\"]}),errors.customer_id&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.customer_id]}),formData.customer_id&&!errors.customer_id&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Product Barcode Scan\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(DebounceInput,{minLength:3,debounceTimeout:500,placeholder:\"Scan Barcode\",className:\"form-control barcode\",value:formData.barcode,onChange:function onChange(event){return getProductByBarCode(event.target.value);}}),errors.bar_code&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.bar_code]}),formData.bar_code&&!errors.bar_code&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Product*\"}),/*#__PURE__*/_jsx(Typeahead,{id:\"product_id\",size:\"lg\",labelKey:\"search_label\",emptyLabel:\"\",clearButton:true,open:openProductSearchResult,isLoading:isProductsLoading,isInvalid:errors.product_id?true:false,onChange:function onChange(selectedItems){if(selectedItems.length===0){errors[\"product_id\"]=\"Invalid Product selected\";setErrors(errors);return;}errors[\"product_id\"]=\"\";setErrors(_objectSpread({},errors));if(formData.store_id){addProduct(selectedItems[0]);}setOpenProductSearchResult(false);},options:productOptions,selected:selectedProduct,placeholder:\"Search By Part No. / Name / Name in Arabic\",highlightOnlyResult:true,onInputChange:function onInputChange(searchTerm,e){suggestProducts(searchTerm);}}),/*#__PURE__*/_jsxs(Button,{hide:true.toString(),onClick:openProductCreateForm,className:\"btn btn-outline-secondary btn-primary btn-sm\",type:\"button\",id:\"button-addon1\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg\"}),\" New\"]}),errors.product_id?/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.product_id]}):null,selectedProduct[0]&&selectedProduct[0].id&&!errors.product_id&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",style:{overflowX:\"auto\",maxHeight:\"400px\",overflowY:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-sm table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"3%\"},children:\"Remove\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"5%\"},children:\"SI No.\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"10%\"},children:\"Part No.\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"34%\"},className:\"text-start\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"11%\"},children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"11%\"},children:\"Purchase Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"11%\"},children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"15%\"},children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedProducts.map(function(product,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\",cursor:\"pointer\"},onClick:function onClick(){removeProduct(product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"})})}),/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:product.part_number}),/*#__PURE__*/_jsx(\"td\",{style:{textDecoration:\"underline\",color:\"blue\",cursor:\"pointer\"},className:\"text-start\",onClick:function onClick(){openProductDetailsView(product.product_id);console.log(\"okk,id:\",product.product_id);},children:product.name}),/*#__PURE__*/_jsxs(\"td\",{style:{width:\"155px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:product.quantity,className:\"form-control\",placeholder:\"Quantity\",onChange:function onChange(e){errors[\"quantity_\"+index]=\"\";setErrors(_objectSpread({},errors));if(!e.target.value){errors[\"quantity_\"+index]=\"Invalid Quantity\";selectedProducts[index].quantity=e.target.value;setSelectedProducts(_toConsumableArray(selectedProducts));setErrors(_objectSpread({},errors));console.log(\"errors:\",errors);return;}if(parseFloat(e.target.value)===0){errors[\"quantity_\"+index]=\"Quantity should be > 0\";selectedProducts[index].quantity=e.target.value;setSelectedProducts(_toConsumableArray(selectedProducts));setErrors(_objectSpread({},errors));console.log(\"errors:\",errors);return;}product.quantity=parseFloat(e.target.value);reCalculate();selectedProducts[index].quantity=parseFloat(e.target.value);console.log(\"selectedProducts[index].quantity:\",selectedProducts[index].quantity);setSelectedProducts(_toConsumableArray(selectedProducts));reCalculate();}}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",children:[\" \",selectedProducts[index].unit?selectedProducts[index].unit:\"Units\"]})]}),errors[\"quantity_\"+index]&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors[\"quantity_\"+index]]})]}),/*#__PURE__*/_jsx(\"td\",{style:{width:\"150px\"},children:product.purchase_unit_price?/*#__PURE__*/_jsx(NumberFormat,{value:product.purchase_unit_price.toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}}):\"\"}),/*#__PURE__*/_jsxs(\"td\",{style:{width:\"180px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:product.unit_price,className:\"form-control\",placeholder:\"Unit Price\",onChange:function onChange(e){errors[\"unit_price_\"+index]=\"\";setErrors(_objectSpread({},errors));if(!e.target.value){errors[\"unit_price_\"+index]=\"Invalid Unit Price\";selectedProducts[index].unit_price=parseFloat(e.target.value);setSelectedProducts(_toConsumableArray(selectedProducts));setErrors(_objectSpread({},errors));console.log(\"errors:\",errors);return;}if(parseFloat(e.target.value)===0){errors[\"unit_price_\"+index]=\"Unit Price shoudl be > 0\";selectedProducts[index].unit_price=parseFloat(e.target.value);setSelectedProducts(_toConsumableArray(selectedProducts));setErrors(_objectSpread({},errors));console.log(\"errors:\",errors);return;}selectedProducts[index].unit_price=parseFloat(e.target.value);console.log(\"selectedProducts[index].unit_price:\",selectedProducts[index].unit_price);setSelectedProducts(_toConsumableArray(selectedProducts));reCalculate();}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",children:\"SAR\"})]}),errors[\"unit_price_\"+index]&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors[\"unit_price_\"+index]]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(NumberFormat,{value:(product.unit_price*product.quantity).toFixed(2),displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]},index);}).reverse()})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped table-sm table-bordered\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"8\",className:\"text-end\",children:\"Total\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",style:{width:\"200px\"},children:/*#__PURE__*/_jsx(NumberFormat,{value:totalPrice,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"8\",className:\"text-end\",children:\"Shipping & Handling Fees\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:{width:\"150px\"},className:\"text-start\",value:formData.shipping_handling_fees,onChange:function onChange(e){if(parseFloat(e.target.value)===0){formData.shipping_handling_fees=parseFloat(e.target.value);setFormData(_objectSpread({},formData));errors[\"shipping_handling_fees\"]=\"\";setErrors(_objectSpread({},errors));reCalculate();return;}if(parseFloat(e.target.value)<0){formData.shipping_handling_fees=parseFloat(e.target.value);setFormData(_objectSpread({},formData));errors[\"shipping_handling_fees\"]=\"Shipping / Handling Fees should be > 0\";setErrors(_objectSpread({},errors));reCalculate();return;}if(!e.target.value){formData.shipping_handling_fees=\"\";errors[\"shipping_handling_fees\"]=\"Invalid Shipping / Handling Fees\";setFormData(_objectSpread({},formData));setErrors(_objectSpread({},errors));return;}errors[\"shipping_handling_fees\"]=\"\";setErrors(_objectSpread({},errors));formData.shipping_handling_fees=parseFloat(e.target.value);setFormData(_objectSpread({},formData));reCalculate();}}),\" SAR\",errors.shipping_handling_fees&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:errors.shipping_handling_fees})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{colSpan:\"8\",className:\"text-end\",children:[\"Discount\",\" \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:{width:\"50px\"},className:\"text-start\",value:formData.discount_percent,onChange:function onChange(e){formData.is_discount_percent=true;if(parseFloat(e.target.value)===0){formData.discount_percent=parseFloat(e.target.value);setFormData(_objectSpread({},formData));errors[\"discount_percent\"]=\"\";setErrors(_objectSpread({},errors));reCalculate();return;}if(parseFloat(e.target.value)<0){formData.discount_percent=parseFloat(e.target.value);formData.discount=0.0;setFormData(_objectSpread({},formData));errors[\"discount_percent\"]=\"Discount percent should be >= 0\";setErrors(_objectSpread({},errors));reCalculate();return;}if(!e.target.value){formData.discount_percent=\"\";formData.discount=0.0;errors[\"discount_percent\"]=\"Invalid Discount Percent\";setFormData(_objectSpread({},formData));setErrors(_objectSpread({},errors));return;}errors[\"discount_percent\"]=\"\";errors[\"discount\"]=\"\";setErrors(_objectSpread({},errors));formData.discount_percent=parseFloat(e.target.value);setFormData(_objectSpread({},formData));reCalculate();}}),\"%\",errors.discount_percent&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:errors.discount_percent})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:{width:\"150px\"},className:\"text-start\",value:formData.discount,onChange:function onChange(e){formData.is_discount_percent=false;if(parseFloat(e.target.value)===0){formData.discount=parseFloat(e.target.value);setFormData(_objectSpread({},formData));errors[\"discount\"]=\"\";setErrors(_objectSpread({},errors));reCalculate();return;}if(parseFloat(e.target.value)<0){formData.discount=parseFloat(e.target.value);formData.discount_percent=0.0;setFormData(_objectSpread({},formData));errors[\"discount\"]=\"Discount should be >= 0\";setErrors(_objectSpread({},errors));reCalculate();return;}if(!e.target.value){formData.discount=\"\";formData.discount_percent=0.0;errors[\"discount\"]=\"Invalid Discount\";setFormData(_objectSpread({},formData));reCalculate();setErrors(_objectSpread({},errors));return;}errors[\"discount\"]=\"\";errors[\"discount_percent\"]=\"\";setErrors(_objectSpread({},errors));formData.discount=parseFloat(e.target.value);setFormData(_objectSpread({},formData));reCalculate();}}),\" SAR\",errors.discount&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:errors.discount})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{colSpan:\"8\",className:\"text-end\",children:[\" \",\"VAT\",\" \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"text-center\",style:{width:\"50px\"},value:formData.vat_percent,onChange:function onChange(e){console.log(\"Inside onchange vat percent\");if(parseFloat(e.target.value)===0){formData.vat_percent=parseFloat(e.target.value);setFormData(_objectSpread({},formData));errors[\"vat_percent\"]=\"\";setErrors(_objectSpread({},errors));reCalculate();return;}if(parseFloat(e.target.value)<0){formData.vat_percent=parseFloat(e.target.value);vatPrice=0.0;setVatPrice(vatPrice);setFormData(_objectSpread({},formData));errors[\"vat_percent\"]=\"Vat percent should be >= 0\";setErrors(_objectSpread({},errors));reCalculate();return;}if(!e.target.value){formData.vat_percent=\"\";vatPrice=0.0;setVatPrice(vatPrice);//formData.discount_percent = 0.00;\nerrors[\"vat_percent\"]=\"Invalid vat percent\";setFormData(_objectSpread({},formData));setErrors(_objectSpread({},errors));return;}errors[\"vat_percent\"]=\"\";setErrors(_objectSpread({},errors));formData.vat_percent=e.target.value;reCalculate();setFormData(_objectSpread({},formData));console.log(formData);}}),\"%\",errors.vat_percent&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:errors.vat_percent})]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(NumberFormat,{value:vatPrice,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{colSpan:\"8\",className:\"text-end\",children:\"Net Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:/*#__PURE__*/_jsx(NumberFormat,{value:netTotal,displayType:\"text\",thousandSeparator:true,suffix:\" SAR\",renderText:function renderText(value,props){return value;}})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Status*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{value:formData.status,onChange:function onChange(e){console.log(\"Inside onchange status\");if(!e.target.value){formData.status=\"\";setFormData(_objectSpread({},formData));errors[\"status\"]=\"Invalid Status\";setErrors(_objectSpread({},errors));return;}errors[\"status\"]=\"\";setErrors(_objectSpread({},errors));formData.status=e.target.value;setFormData(_objectSpread({},formData));console.log(formData);},className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"created\",children:\"Created\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivered\",children:\"Delivered\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rejected\",children:\"Rejected\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]}),errors.status&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.status]}),formData.status&&!errors.status&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Date*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(DatePicker,{id:\"date_str\",selected:formData.date_str?new Date(formData.date_str):null,value:formData.date_str?format(new Date(formData.date_str),\"MMMM d, yyyy h:mm aa\"):null,className:\"form-control\",dateFormat:\"MMMM d, yyyy h:mm aa\",showTimeSelect:true,timeIntervals:\"1\",onChange:function onChange(value){console.log(\"Value\",value);formData.date_str=value;// formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\nsetFormData(_objectSpread({},formData));}}),errors.date_str&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.date_str]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Validity (# of Days)*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"text-center\",style:{width:\"50px\"},value:formData.validity_days,onChange:function onChange(e){console.log(\"Inside onchange validity days\");if(!e.target.value){formData.validity_days=null;errors[\"validity_days\"]=\"Validity days are required\";setFormData(_objectSpread({},formData));setErrors(_objectSpread({},errors));return;}if(parseInt(e.target.value)<=0){formData.validity_days=parseInt(e.target.value);setValidityDays(validityDays);setFormData(_objectSpread({},formData));errors[\"validity_days\"]=\"Validity days should be > 0\";setErrors(_objectSpread({},errors));return;}errors[\"validity_days\"]=\"\";setErrors(_objectSpread({},errors));formData.validity_days=parseInt(e.target.value);setFormData(_objectSpread({},formData));validityDays=formData.validity_days;setValidityDays(formData.validity_days);console.log(formData);}}),errors.validity_days&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.validity_days]}),formData.validity_days>0&&formData.validity_day&&!errors.validity_days&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Delivery (# of Days)*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"text-center\",style:{width:\"50px\"},value:formData.delivery_days,onChange:function onChange(e){console.log(\"Inside onchange delivery days\");if(!e.target.value){formData.delivery_days=null;errors[\"delivery_days\"]=\"Delivery days are required\";setFormData(_objectSpread({},formData));setErrors(_objectSpread({},errors));return;}if(parseInt(e.target.value)<=0){formData.delivery_days=parseInt(e.target.value);setDeliveryDays(deliveryDays);setFormData(_objectSpread({},formData));errors[\"delivery_days\"]=\"Delivery days should be > 0\";setErrors(_objectSpread({},errors));return;}errors[\"delivery_days\"]=\"\";setErrors(_objectSpread({},errors));formData.delivery_days=parseInt(e.target.value);setFormData(_objectSpread({},formData));deliveryDays=formData.delivery_days;setDeliveryDays(formData.delivery_days);console.log(formData);}}),errors.delivery_days&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\",children:\" \"}),errors.delivery_days]}),formData.delivery_days>0&&formData.delivery_days&&!errors.delivery_days&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"green\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-lg\",children:\" \"}),\"Looks good!\"]})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleCreate,children:isProcessing?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true})+\" Processing...\":formData.id?\"Update\":\"Create\"})]})]})})]})]});});export default QuotationCreate;","map":{"version":3,"sources":["/Users/sirin/go/src/github.com/sirinibin/reactjs-pos/src/quotation/create.js"],"names":["React","useState","useEffect","useRef","forwardRef","useImperativeHandle","QuotationPreview","Modal","Button","Form","StoreCreate","CustomerCreate","ProductCreate","UserCreate","SignatureCreate","Cookies","Typeahead","NumberFormat","DatePicker","format","Spinner","QuotationView","ProductView","DebounceInput","QuotationCreate","props","ref","open","id","formData","vat_percent","discount","discountValue","discount_percent","shipping_handling_fees","is_discount_percent","date_str","Date","signature_date_str","status","price_type","delivery_days","validity_days","selectedProducts","setSelectedProducts","selectedStores","setSelectedStores","selectedCustomers","setSelectedCustomers","selectedDeliveredByUsers","setSelectedDeliveredByUsers","selectedDeliveredBySignatures","setSelectedDeliveredBySignatures","reCalculate","cookies","get","name","delivered_by","setFormData","store_id","store_name","getQuotation","SetShow","listener","event","code","console","log","form","target","index","Array","prototype","indexOf","call","elements","getAttribute","includes","focus","preventDefault","document","addEventListener","removeEventListener","selectedDate","errors","setErrors","isProcessing","setProcessing","storeOptions","setStoreOptions","isStoresLoading","setIsStoresLoading","customerOptions","setCustomerOptions","isCustomersLoading","setIsCustomersLoading","productOptions","setProductOptions","selectedProduct","setSelectedProduct","isProductsLoading","setIsProductsLoading","deliveredByUserOptions","setDeliveredByUserOptions","isDeliveredByUsersLoading","setIsDeliveredByUsersLoading","deliveredBySignatureOptions","setDeliveredBySignatureOptions","isDeliveredBySignaturesLoading","setIsDeliveredBySignaturesLoading","show","handleClose","at","window","location","requestOptions","method","headers","Authorization","fetch","then","response","isJson","json","data","ok","error","Promise","reject","quotation","result","customer_id","date","delivered_by_signature_id","products","customer_name","search_label","delivered_by_name","delivered_by_signature_name","catch","ObjectToSearchQueryParams","object","Object","keys","map","key","encodeURIComponent","join","suggestStores","searchTerm","params","queryString","Select","suggestCustomers","GetProductUnitPriceInStore","storeId","productStores","i","length","retail_unit_price","GetProductPurchaseUnitPriceInStore","unitPriceListArray","purchase_unit_price","openProductSearchResult","setOpenProductSearchResult","suggestProducts","getProductByBarCode","barcode","slice","product","addProduct","suggestUsers","suggestSignatures","handleCreate","push","product_id","name_in_arabic","quantity","parseFloat","unit_price","unit","part_number","endPoint","Accept","body","JSON","stringify","showToastMessage","refreshList","openDetailsView","isProductAdded","productID","unitPrice","stores","alreadyAdded","getProductIndex","item","item_code","removeProduct","splice","totalPrice","setTotalPrice","findTotalPrice","toFixed","deliveryDays","setDeliveryDays","validityDays","setValidityDays","vatPrice","setVatPrice","findVatPrice","netTotal","setNetTotal","findNetTotal","discountPercent","setDiscountPercent","findDiscountPercent","findDiscount","StoreCreateFormRef","openStoreCreateForm","current","CustomerCreateFormRef","openCustomerCreateForm","ProductCreateFormRef","openProductCreateForm","openProductUpdateForm","UserCreateFormRef","openUserCreateForm","SignatureCreateFormRef","openSignatureCreateForm","ProductDetailsViewRef","openProductDetailsView","PreviewRef","openPreview","model","parse","net_total","vat_price","total","selectedItems","e","toString","color","value","bar_code","overflowX","maxHeight","overflowY","width","cursor","textDecoration","reverse","parseInt","validity_day"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from \"react\";\nimport QuotationPreview from \"./preview.js\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport StoreCreate from \"../store/create.js\";\nimport CustomerCreate from \"./../customer/create.js\";\nimport ProductCreate from \"./../product/create.js\";\nimport UserCreate from \"./../user/create.js\";\nimport SignatureCreate from \"./../signature/create.js\";\nimport Cookies from \"universal-cookie\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport NumberFormat from \"react-number-format\";\nimport DatePicker from \"react-datepicker\";\nimport { format } from \"date-fns\";\nimport { Spinner } from \"react-bootstrap\";\nimport QuotationView from \"./view.js\";\nimport ProductView from \"./../product/view.js\";\nimport { DebounceInput } from \"react-debounce-input\";\n\nconst QuotationCreate = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => ({\n    open(id) {\n      formData = {\n        vat_percent: 15.0,\n        discount: 0.0,\n        discountValue: 0.0,\n        discount_percent: 0.0,\n        shipping_handling_fees: 0.0,\n        is_discount_percent: false,\n        date_str: new Date(),\n        signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n        status: \"delivered\",\n        price_type: \"retail\",\n        delivery_days: 7,\n        validity_days: 2,\n      };\n\n      selectedProducts = [];\n      setSelectedProducts([]);\n\n      selectedStores = [];\n      setSelectedStores([]);\n\n      selectedCustomers = [];\n      setSelectedCustomers([]);\n\n      selectedDeliveredByUsers = [];\n      setSelectedDeliveredByUsers([]);\n\n      selectedDeliveredBySignatures = [];\n      setSelectedDeliveredBySignatures([]);\n\n      reCalculate();\n\n      if (cookies.get(\"user_id\")) {\n        selectedDeliveredByUsers = [\n          {\n            id: cookies.get(\"user_id\"),\n            name: cookies.get(\"user_name\"),\n          },\n        ];\n        formData.delivered_by = cookies.get(\"user_id\");\n        setFormData({ ...formData });\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n      }\n      if (cookies.get(\"store_id\")) {\n        formData.store_id = cookies.get(\"store_id\");\n        formData.store_name = cookies.get(\"store_name\");\n      }\n\n      setFormData({ ...formData });\n      if (id) {\n        getQuotation(id);\n      }\n      SetShow(true);\n    },\n  }));\n\n  useEffect(() => {\n    const listener = (event) => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        console.log(\"Enter key was pressed. Run your function-order.123\");\n        // event.preventDefault();\n\n        var form = event.target.form;\n        if (form && event.target) {\n          var index = Array.prototype.indexOf.call(form, event.target);\n          if (form && form.elements[index + 1]) {\n            if (event.target.getAttribute(\"class\").includes(\"barcode\")) {\n              form.elements[index].focus();\n            } else {\n              form.elements[index + 1].focus();\n            }\n            event.preventDefault();\n          }\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", listener);\n    return () => {\n      document.removeEventListener(\"keydown\", listener);\n    };\n  }, []);\n\n  const selectedDate = new Date();\n\n  //const history = useHistory();\n  let [errors, setErrors] = useState({});\n  const [isProcessing, setProcessing] = useState(false);\n  const cookies = new Cookies();\n\n  //fields\n  let [formData, setFormData] = useState({\n    vat_percent: 15.0,\n    discount: 0.0,\n    discountValue: 0.0,\n    discount_percent: 0.0,\n    //date_str: format(new Date(), \"MMM dd yyyy\"),\n    date_str: new Date(),\n    signature_date_str: format(new Date(), \"MMM dd yyyy\"),\n    status: \"created\",\n    price_type: \"retail\",\n    is_discount_percent: false,\n    validity_days:2,\n    delivery_days:7,\n  });\n\n  //Store Auto Suggestion\n  const [storeOptions, setStoreOptions] = useState([]);\n  let [selectedStores, setSelectedStores] = useState([]);\n  const [isStoresLoading, setIsStoresLoading] = useState(false);\n\n  //Customer Auto Suggestion\n  const [customerOptions, setCustomerOptions] = useState([]);\n  let [selectedCustomers, setSelectedCustomers] = useState([]);\n  const [isCustomersLoading, setIsCustomersLoading] = useState(false);\n\n  //Product Auto Suggestion\n  let [productOptions, setProductOptions] = useState([]);\n  let [selectedProduct, setSelectedProduct] = useState([]);\n  let [selectedProducts, setSelectedProducts] = useState([]);\n  const [isProductsLoading, setIsProductsLoading] = useState(false);\n\n  //Delivered By Auto Suggestion\n  const [deliveredByUserOptions, setDeliveredByUserOptions] = useState([]);\n  let [selectedDeliveredByUsers, setSelectedDeliveredByUsers] = useState([]);\n  const [isDeliveredByUsersLoading, setIsDeliveredByUsersLoading] =\n    useState(false);\n\n  //Delivered By Signature Auto Suggestion\n  const [deliveredBySignatureOptions, setDeliveredBySignatureOptions] =\n    useState([]);\n  let [selectedDeliveredBySignatures, setSelectedDeliveredBySignatures] =\n    useState([]);\n  const [isDeliveredBySignaturesLoading, setIsDeliveredBySignaturesLoading] =\n    useState(false);\n\n  const [show, SetShow] = useState(false);\n\n  function handleClose() {\n    SetShow(false);\n  }\n\n  useEffect(() => {\n    let at = cookies.get(\"access_token\");\n    if (!at) {\n      // history.push(\"/dashboard/quotations\");\n      window.location = \"/\";\n    }\n  });\n\n  function getQuotation(id) {\n    console.log(\"inside get Quotation\");\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    fetch(\"/v1/quotation/\" + id, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          const error = data && data.errors;\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n\n        console.log(\"Response:\");\n        console.log(data);\n\n        let quotation = data.result;\n        formData = {\n          id: quotation.id,\n          code: quotation.code,\n          store_id: quotation.store_id,\n          customer_id: quotation.customer_id,\n          // date_str: quotation.date_str,\n          date: quotation.date,\n          vat_percent: quotation.vat_percent,\n          discount: quotation.discount,\n          discount_percent: quotation.discount_percent,\n          status: quotation.status,\n          delivered_by: quotation.delivered_by,\n          delivered_by_signature_id: quotation.delivered_by_signature_id,\n          is_discount_percent: quotation.is_discount_percent,\n          shipping_handling_fees: quotation.shipping_handling_fees,\n          delivery_days: quotation.delivery_days?quotation.delivery_days:7,\n          validity_days: quotation.validity_days?quotation.validity_days:2,\n        };\n        formData.date_str = data.result.date;\n\n        if (formData.is_discount_percent) {\n          formData.discountValue = formData.discount_percent;\n        } else {\n          formData.discountValue = formData.discount;\n        }\n\n        selectedProducts = quotation.products;\n        setSelectedProducts([...selectedProducts]);\n\n        let selectedStores = [\n          {\n            id: quotation.store_id,\n            name: quotation.store_name,\n          },\n        ];\n\n        let selectedCustomers = [\n          {\n            id: quotation.customer_id,\n            name: quotation.customer_name,\n            search_label: quotation.customer_name,\n          },\n        ];\n\n        let selectedDeliveredByUsers = [\n          {\n            id: quotation.delivered_by,\n            name: quotation.delivered_by_name,\n          },\n        ];\n\n        if (quotation.delivered_by_signature_id) {\n          let selectedDeliveredBySignatures = [\n            {\n              id: quotation.delivered_by_signature_id,\n              name: quotation.delivered_by_signature_name,\n            },\n          ];\n          setSelectedDeliveredBySignatures([...selectedDeliveredBySignatures]);\n        }\n\n        setSelectedDeliveredByUsers([...selectedDeliveredByUsers]);\n\n        setSelectedStores([...selectedStores]);\n        setSelectedCustomers([...selectedCustomers]);\n\n        setFormData({ ...formData });\n\n        reCalculate();\n      })\n      .catch((error) => {\n        setProcessing(false);\n        setErrors(error);\n      });\n  }\n\n  function ObjectToSearchQueryParams(object) {\n    return Object.keys(object)\n      .map(function (key) {\n        return `search[${key}]=` + encodeURIComponent(object[key]);\n      })\n      .join(\"&\");\n  }\n\n  async function suggestStores(searchTerm) {\n    console.log(\"Inside handle suggestStores\");\n    setStoreOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsStoresLoading(true);\n    let result = await fetch(\n      \"/v1/store?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setStoreOptions(data.result);\n    setIsStoresLoading(false);\n  }\n\n  async function suggestCustomers(searchTerm) {\n    console.log(\"Inside handle suggestCustomers\");\n    setCustomerOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,name,phone,name_in_arabic,phone_in_arabic,search_label\";\n    setIsCustomersLoading(true);\n    let result = await fetch(\n      \"/v1/customer?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setCustomerOptions(data.result);\n    setIsCustomersLoading(false);\n  }\n\n  function GetProductUnitPriceInStore(storeId, productStores) {\n    if (!productStores) {\n      return \"\";\n    }\n\n    for (var i = 0; i < productStores.length; i++) {\n      console.log(\"productStores[i]:\", productStores[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (productStores[i].store_id === storeId) {\n        console.log(\"macthed\");\n        console.log(\n          \"productStores[i].retail_unit_price:\",\n          productStores[i].retail_unit_price\n        );\n        return productStores[i];\n      }\n    }\n    console.log(\"not matched\");\n    return \"\";\n  }\n\n  function GetProductPurchaseUnitPriceInStore(storeId, unitPriceListArray) {\n    if (!unitPriceListArray) {\n      return \"\";\n    }\n\n    for (var i = 0; i < unitPriceListArray.length; i++) {\n      console.log(\"unitPriceListArray[i]:\", unitPriceListArray[i]);\n      console.log(\"store_id:\", storeId);\n\n      if (unitPriceListArray[i].store_id === storeId) {\n        return unitPriceListArray[i].purchase_unit_price;\n      } else {\n        console.log(\"not matched\");\n      }\n    }\n    return \"\";\n  }\n\n  let [openProductSearchResult, setOpenProductSearchResult] = useState(false);\n\n  async function suggestProducts(searchTerm) {\n    console.log(\"Inside handle suggestProducts\");\n    setProductOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n\n    if (cookies.get(\"store_id\")) {\n      params.store_id = cookies.get(\"store_id\");\n    }\n\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,item_code,bar_code,name,stores,unit,part_number,name_in_arabic\";\n    setIsProductsLoading(true);\n    let result = await fetch(\n      \"/v1/product?\" + Select + queryString + \"&limit=200\",\n      requestOptions\n    );\n    let data = await result.json();\n\n    let products = data.result;\n    if (!products || products.length === 0) {\n      openProductSearchResult = false;\n      setOpenProductSearchResult(false);\n      setIsProductsLoading(false);\n      return;\n    }\n\n    openProductSearchResult = true;\n    setOpenProductSearchResult(true);\n    setProductOptions(products);\n    setIsProductsLoading(false);\n  }\n\n  async function getProductByBarCode(barcode) {\n    formData.barcode = barcode;\n    setFormData({ ...formData });\n    console.log(\"Inside getProductByBarCode\");\n    errors[\"bar_code\"] = \"\";\n    setErrors({ ...errors });\n\n    console.log(\"barcode:\" + formData.barcode);\n    if (!formData.barcode) {\n      return;\n    }\n\n    if (formData.barcode.length === 13) {\n      formData.barcode = formData.barcode.slice(0, -1);\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select =\n      \"select=id,item_code,bar_code,ean_12,part_number,name,stores,unit,part_number,name_in_arabic\";\n    let result = await fetch(\n      \"/v1/product/barcode/\" + formData.barcode + \"?\" + Select,\n      requestOptions\n    );\n    let data = await result.json();\n\n    let product = data.result;\n    if (product) {\n      addProduct(product);\n    } else {\n      errors[\"bar_code\"] = \"Invalid Barcode:\" + formData.barcode;\n      setErrors({ ...errors });\n    }\n\n    formData.barcode = \"\";\n    setFormData({ ...formData });\n  }\n\n  async function suggestUsers(searchTerm) {\n    console.log(\"Inside handle suggestUsers\");\n    setDeliveredByUserOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredByUsersLoading(true);\n    let result = await fetch(\n      \"/v1/user?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredByUserOptions(data.result);\n    setIsDeliveredByUsersLoading(false);\n  }\n\n  async function suggestSignatures(searchTerm) {\n    console.log(\"Inside handle suggestSignatures\");\n    setDeliveredBySignatureOptions([]);\n\n    console.log(\"searchTerm:\" + searchTerm);\n    if (!searchTerm) {\n      return;\n    }\n\n    var params = {\n      name: searchTerm,\n    };\n    var queryString = ObjectToSearchQueryParams(params);\n    if (queryString !== \"\") {\n      queryString = \"&\" + queryString;\n    }\n\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n    };\n\n    let Select = \"select=id,name\";\n    setIsDeliveredBySignaturesLoading(true);\n    let result = await fetch(\n      \"/v1/signature?\" + Select + queryString,\n      requestOptions\n    );\n    let data = await result.json();\n\n    setDeliveredBySignatureOptions(data.result);\n    setIsDeliveredBySignaturesLoading(false);\n  }\n\n  function handleCreate(event) {\n    event.preventDefault();\n    console.log(\"Inside handle Create\");\n    console.log(\"selectedProducts:\", selectedProducts);\n\n    formData.products = [];\n    for (var i = 0; i < selectedProducts.length; i++) {\n      formData.products.push({\n        product_id: selectedProducts[i].product_id,\n        name: selectedProducts[i].name,\n        name_in_arabic: selectedProducts[i].name_in_arabic,\n        quantity: parseFloat(selectedProducts[i].quantity),\n        unit_price: parseFloat(selectedProducts[i].unit_price),\n        purchase_unit_price: parseFloat(\n          selectedProducts[i].purchase_unit_price\n        ),\n        unit: selectedProducts[i].unit,\n        part_number: selectedProducts[i].part_number,\n      });\n    }\n\n    formData.discount = parseFloat(formData.discount);\n    formData.discount_percent = parseFloat(formData.discount_percent);\n    formData.vat_percent = parseFloat(formData.vat_percent);\n\n\n    if (cookies.get(\"store_id\")) {\n      formData.store_id = cookies.get(\"store_id\");\n    }\n\n    console.log(\"formData.discount:\", formData.discount);\n\n    let endPoint = \"/v1/quotation\";\n    let method = \"POST\";\n    if (formData.id) {\n      endPoint = \"/v1/quotation/\" + formData.id;\n      method = \"PUT\";\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: cookies.get(\"access_token\"),\n      },\n      body: JSON.stringify(formData),\n    };\n\n    console.log(\"formData:\", formData);\n\n    setProcessing(true);\n    fetch(endPoint, requestOptions)\n      .then(async (response) => {\n        const isJson = response.headers\n          .get(\"content-type\")\n          ?.includes(\"application/json\");\n        const data = isJson && (await response.json());\n\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = data && data.errors;\n          //const error = data.errors\n          return Promise.reject(error);\n        }\n\n        setErrors({});\n        setProcessing(false);\n\n        console.log(\"Response:\");\n        console.log(data);\n        props.showToastMessage(\"Quotation Created Successfully!\", \"success\");\n        if (props.refreshList) {\n          props.refreshList();\n        }\n        handleClose();\n        props.openDetailsView(data.result.id);\n      })\n      .catch((error) => {\n        setProcessing(false);\n        console.log(\"Inside catch\");\n        console.log(error);\n        setErrors({ ...error });\n        console.error(\"There was an error!\", error);\n        props.showToastMessage(\"Error Creating Quotation!\", \"danger\");\n      });\n  }\n\n  function isProductAdded(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function addProduct(product) {\n    console.log(\"Inside Add product\");\n    if (!formData.store_id) {\n      errors.product_id = \"Please Select a Store and try again\";\n      setErrors({ ...errors });\n      return;\n    }\n\n    errors.product_id = \"\";\n    if (!product) {\n      errors.product_id = \"Invalid Product\";\n      setErrors({ ...errors });\n      return;\n    }\n\n    let unitPrice = GetProductUnitPriceInStore(\n      formData.store_id,\n      product.stores\n    );\n    product.unit_price = unitPrice.retail_unit_price;\n    product.purchase_unit_price = unitPrice.purchase_unit_price;\n\n    let alreadyAdded = false;\n    let index = -1;\n    let quantity = 0.0;\n    product.quantity = 1.0;\n\n    if (isProductAdded(product.id)) {\n      alreadyAdded = true;\n      index = getProductIndex(product.id);\n      quantity = parseFloat(\n        selectedProducts[index].quantity + product.quantity\n      );\n    } else {\n      quantity = parseFloat(product.quantity);\n    }\n\n    console.log(\"quantity:\", quantity);\n\n    errors.quantity = \"\";\n\n    if (alreadyAdded) {\n      selectedProducts[index].quantity = parseFloat(quantity);\n    }\n\n    if (!alreadyAdded) {\n      let item = {\n        product_id: product.id,\n        code: product.item_code,\n        part_number: product.part_number,\n        name: product.name,\n        quantity: product.quantity,\n        stores: product.stores,\n        unit: product.unit,\n      };\n\n      if (product.unit_price) {\n        item.unit_price = parseFloat(product.unit_price);\n        console.log(\"item.unit_price:\", item.unit_price);\n      }\n\n      if (product.purchase_unit_price) {\n        item.purchase_unit_price = parseFloat(product.purchase_unit_price);\n        console.log(\"item.purchase_unit_price\", item.purchase_unit_price);\n      }\n\n      selectedProducts.push(item);\n    }\n    console.log(\"selectedProducts:\", selectedProducts);\n    setSelectedProducts([...selectedProducts]);\n    reCalculate();\n  }\n\n  function getProductIndex(productID) {\n    for (var i = 0; i < selectedProducts.length; i++) {\n      if (selectedProducts[i].product_id === productID) {\n        return i;\n      }\n    }\n    return false;\n  }\n\n  function removeProduct(product) {\n    const index = selectedProducts.indexOf(product);\n    if (index > -1) {\n      selectedProducts.splice(index, 1);\n    }\n    setSelectedProducts([...selectedProducts]);\n\n    reCalculate();\n  }\n\n  let [totalPrice, setTotalPrice] = useState(0.0);\n\n  function findTotalPrice() {\n    totalPrice = 0.0;\n    for (var i = 0; i < selectedProducts.length; i++) {\n      totalPrice +=\n        parseFloat(selectedProducts[i].unit_price) *\n        parseFloat(selectedProducts[i].quantity);\n    }\n    totalPrice = totalPrice.toFixed(2);\n    setTotalPrice(totalPrice);\n  }\n\n  let [deliveryDays, setDeliveryDays] = useState(7);\n  let [validityDays, setValidityDays] = useState(2);\n  let [vatPrice, setVatPrice] = useState(0.0);\n\n  function findVatPrice() {\n    vatPrice = 0.0;\n    if (totalPrice > 0) {\n      vatPrice = (\n        parseFloat(parseFloat(formData.vat_percent) / 100) *\n        (parseFloat(totalPrice) +\n          parseFloat(formData.shipping_handling_fees) -\n          parseFloat(formData.discount))\n      ).toFixed(2);\n      console.log(\"vatPrice:\", vatPrice);\n    }\n    setVatPrice(vatPrice);\n  }\n\n  let [netTotal, setNetTotal] = useState(0.0);\n\n  function findNetTotal() {\n    netTotal = 0.0;\n    if (totalPrice > 0) {\n      netTotal = (\n        parseFloat(totalPrice) +\n        parseFloat(formData.shipping_handling_fees) -\n        parseFloat(formData.discount) +\n        parseFloat(vatPrice)\n      ).toFixed(2);\n    }\n    setNetTotal(netTotal);\n  }\n\n  let [discountPercent, setDiscountPercent] = useState(0.0);\n\n  function findDiscountPercent() {\n    if (formData.discount >= 0 && totalPrice > 0) {\n      discountPercent = parseFloat(\n        parseFloat(formData.discount / totalPrice) * 100\n      ).toFixed(2);\n      setDiscountPercent(discountPercent);\n      formData.discount_percent = discountPercent;\n      setFormData({ ...formData });\n    }\n  }\n\n  function findDiscount() {\n    if (formData.discount_percent >= 0 && totalPrice > 0) {\n      formData.discount = parseFloat(\n        totalPrice * parseFloat(formData.discount_percent / 100)\n      ).toFixed(2);\n      setFormData({ ...formData });\n    }\n  }\n\n  function reCalculate() {\n    findTotalPrice();\n    if (formData.is_discount_percent) {\n      findDiscount();\n    } else {\n      findDiscountPercent();\n    }\n    findVatPrice();\n    findNetTotal();\n  }\n\n  const StoreCreateFormRef = useRef();\n  function openStoreCreateForm() {\n    StoreCreateFormRef.current.open();\n  }\n\n  const CustomerCreateFormRef = useRef();\n  function openCustomerCreateForm() {\n    CustomerCreateFormRef.current.open();\n  }\n\n  const ProductCreateFormRef = useRef();\n  function openProductCreateForm() {\n    ProductCreateFormRef.current.open();\n  }\n\n  function openProductUpdateForm(id) {\n    ProductCreateFormRef.current.open(id);\n  }\n\n  const UserCreateFormRef = useRef();\n  function openUserCreateForm() {\n    UserCreateFormRef.current.open();\n  }\n\n  const SignatureCreateFormRef = useRef();\n  function openSignatureCreateForm() {\n    SignatureCreateFormRef.current.open();\n  }\n\n  const ProductDetailsViewRef = useRef();\n  function openProductDetailsView(id) {\n    ProductDetailsViewRef.current.open(id);\n  }\n\n  const PreviewRef = useRef();\n  function openPreview() {\n    let model = {};\n    model = JSON.parse(JSON.stringify(formData));\n    model.products = selectedProducts;\n    model.net_total = netTotal;\n    model.vat_price = vatPrice;\n    model.total = totalPrice;\n\n    //setFormData({ ...formData });\n    PreviewRef.current.open(model);\n  }\n\n  return (\n    <>\n      <ProductView\n        ref={ProductDetailsViewRef}\n        openUpdateForm={openProductUpdateForm}\n        openCreateForm={openProductCreateForm}\n      />\n      <ProductCreate\n        ref={ProductCreateFormRef}\n        showToastMessage={props.showToastMessage}\n        openDetailsView={openProductDetailsView}\n      />\n\n      <QuotationPreview ref={PreviewRef} />\n\n      <StoreCreate\n        ref={StoreCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <CustomerCreate\n        ref={CustomerCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <UserCreate\n        ref={UserCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <SignatureCreate\n        ref={SignatureCreateFormRef}\n        showToastMessage={props.showToastMessage}\n      />\n      <Modal\n        show={show}\n        size=\"xl\"\n        fullscreen\n        onHide={handleClose}\n        animation={false}\n        backdrop=\"static\"\n        scrollable={true}\n      >\n        <Modal.Header>\n          <Modal.Title>\n            {formData.id\n              ? \"Update Quotation #\" + formData.code\n              : \"Create New Quotation\"}\n          </Modal.Title>\n\n          <div className=\"col align-self-end text-end\">\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={openPreview}>\n              <i className=\"bi bi-display\"></i> Preview\n            </Button>\n            &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;\n            {formData.id ? (\n              <Button\n                variant=\"primary\"\n                onClick={() => {\n                  handleClose();\n                  props.openDetailsView(formData.id);\n                }}\n              >\n                <i className=\"bi bi-eye\"></i> View Detail\n              </Button>\n            ) : (\n              \"\"\n            )}\n            &nbsp;&nbsp;\n            <Button variant=\"primary\" onClick={handleCreate}>\n              {isProcessing\n                ? (\n                  <Spinner\n                    as=\"span\"\n                    animation=\"border\"\n                    size=\"sm\"\n                    role=\"status\"\n                    aria-hidden={true}\n                  />\n                ) + \" Creating...\"\n                : \"\"}\n              {formData.id ? \"Update\" : \"Create\"}\n            </Button>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={handleClose}\n              aria-label=\"Close\"\n            ></button>\n          </div>\n        </Modal.Header>\n        <Modal.Body>\n          <form className=\"row g-3 needs-validation\" onSubmit={handleCreate}>\n            {!cookies.get(\"store_name\") ? (\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Store*</label>\n\n                <div className=\"input-group mb-3\">\n                  <Typeahead\n                    id=\"store_id\"\n                    labelKey=\"name\"\n                    isLoading={isStoresLoading}\n                    isInvalid={errors.store_id ? true : false}\n                    onChange={(selectedItems) => {\n                      errors.store_id = \"\";\n                      setErrors(errors);\n                      if (selectedItems.length === 0) {\n                        errors.store_id = \"Invalid Store selected\";\n                        setErrors(errors);\n                        formData.store_id = \"\";\n                        setFormData({ ...formData });\n                        setSelectedStores([]);\n                        return;\n                      }\n                      formData.store_id = selectedItems[0].id;\n                      setFormData({ ...formData });\n                      setSelectedStores(selectedItems);\n                      //SetPriceOfAllProducts(selectedItems[0].id);\n                    }}\n                    options={storeOptions}\n                    placeholder=\"Select Store\"\n                    selected={selectedStores}\n                    highlightOnlyResult={true}\n                    onInputChange={(searchTerm, e) => {\n                      suggestStores(searchTerm);\n                    }}\n                  />\n\n                  <Button\n                    hide={true.toString()}\n                    onClick={openStoreCreateForm}\n                    className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                    type=\"button\"\n                    id=\"button-addon1\"\n                  >\n                    {\" \"}\n                    <i className=\"bi bi-plus-lg\"></i> New\n                  </Button>\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi x-lg\"> </i>\n                    {errors.store_id}\n                  </div>\n                  {formData.store_id && !errors.store_id && (\n                    <div style={{ color: \"green\" }}>\n                      <i className=\"bi bi-check-lg\"> </i>\n                      Looks good!\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Customer*</label>\n\n              <div className=\"input-group mb-3\">\n                <Typeahead\n                  id=\"customer_id\"\n                  labelKey=\"search_label\"\n                  isLoading={isCustomersLoading}\n                  isInvalid={errors.customer_id ? true : false}\n                  onChange={(selectedItems) => {\n                    errors.customer_id = \"\";\n                    setErrors(errors);\n                    if (selectedItems.length === 0) {\n                      errors.customer_id = \"Invalid Customer selected\";\n                      setErrors(errors);\n                      formData.customer_id = \"\";\n                      setFormData({ ...formData });\n                      setSelectedCustomers([]);\n                      return;\n                    }\n                    formData.customer_id = selectedItems[0].id;\n                    setFormData({ ...formData });\n                    setSelectedCustomers(selectedItems);\n                  }}\n                  options={customerOptions}\n                  placeholder=\"Type name or mob\"\n                  selected={selectedCustomers}\n                  highlightOnlyResult={true}\n                  onInputChange={(searchTerm, e) => {\n                    suggestCustomers(searchTerm);\n                  }}\n                />\n                <Button\n                  hide={true.toString()}\n                  onClick={openCustomerCreateForm}\n                  className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                  type=\"button\"\n                  id=\"button-addon1\"\n                >\n                  {\" \"}\n                  <i className=\"bi bi-plus-lg\"></i> New\n                </Button>\n                {errors.customer_id && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.customer_id}\n                  </div>\n                )}\n                {formData.customer_id && !errors.customer_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Product Barcode Scan</label>\n\n              <div className=\"input-group mb-3\">\n                <DebounceInput\n                  minLength={3}\n                  debounceTimeout={500}\n                  placeholder=\"Scan Barcode\"\n                  className=\"form-control barcode\"\n                  value={formData.barcode}\n                  onChange={(event) => getProductByBarCode(event.target.value)}\n                />\n                {errors.bar_code && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.bar_code}\n                  </div>\n                )}\n                {formData.bar_code && !errors.bar_code && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-12\">\n              <label className=\"form-label\">Product*</label>\n              <Typeahead\n                id=\"product_id\"\n                size=\"lg\"\n                labelKey=\"search_label\"\n                emptyLabel=\"\"\n                clearButton={true}\n                open={openProductSearchResult}\n                isLoading={isProductsLoading}\n                isInvalid={errors.product_id ? true : false}\n                onChange={(selectedItems) => {\n                  if (selectedItems.length === 0) {\n                    errors[\"product_id\"] = \"Invalid Product selected\";\n                    setErrors(errors);\n                    return;\n                  }\n                  errors[\"product_id\"] = \"\";\n                  setErrors({ ...errors });\n\n                  if (formData.store_id) {\n                    addProduct(selectedItems[0]);\n                  }\n                  setOpenProductSearchResult(false);\n                }}\n                options={productOptions}\n                selected={selectedProduct}\n                placeholder=\"Search By Part No. / Name / Name in Arabic\"\n                highlightOnlyResult={true}\n                onInputChange={(searchTerm, e) => {\n                  suggestProducts(searchTerm);\n                }}\n              />\n              <Button\n                hide={true.toString()}\n                onClick={openProductCreateForm}\n                className=\"btn btn-outline-secondary btn-primary btn-sm\"\n                type=\"button\"\n                id=\"button-addon1\"\n              >\n                {\" \"}\n                <i className=\"bi bi-plus-lg\"></i> New\n              </Button>\n              {errors.product_id ? (\n                <div style={{ color: \"red\" }}>\n                  <i className=\"bi bi-x-lg\"> </i>\n                  {errors.product_id}\n                </div>\n              ) : null}\n              {selectedProduct[0] &&\n                selectedProduct[0].id &&\n                !errors.product_id && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n            </div>\n\n            <div\n              className=\"table-responsive\"\n              style={{\n                overflowX: \"auto\",\n                maxHeight: \"400px\",\n                overflowY: \"auto\",\n              }}\n            >\n              <table className=\"table table-striped table-sm table-bordered\">\n                <thead>\n                  <tr className=\"text-center\">\n                    <th style={{ width: \"3%\" }}>Remove</th>\n                    <th style={{ width: \"5%\" }}>SI No.</th>\n                    <th style={{ width: \"10%\" }}>Part No.</th>\n                    <th style={{ width: \"34%\" }} className=\"text-start\">\n                      Name\n                    </th>\n                    <th style={{ width: \"11%\" }}>Qty</th>\n                    <th style={{ width: \"11%\" }}>Purchase Unit Price</th>\n                    <th style={{ width: \"11%\" }}>Unit Price</th>\n                    <th style={{ width: \"15%\" }}>Price</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {selectedProducts\n                    .map((product, index) => (\n                      <tr key={index} className=\"text-center\">\n                        <td>\n                          <div\n                            style={{ color: \"red\", cursor: \"pointer\" }}\n                            onClick={() => {\n                              removeProduct(product);\n                            }}\n                          >\n                            <i className=\"bi bi-x-lg\"> </i>\n                          </div>\n                        </td>\n                        <td>{index + 1}</td>\n                        <td>{product.part_number}</td>\n                        <td\n                          style={{\n                            textDecoration: \"underline\",\n                            color: \"blue\",\n                            cursor: \"pointer\",\n                          }}\n                          className=\"text-start\"\n                          onClick={() => {\n                            openProductDetailsView(product.product_id);\n                            console.log(\"okk,id:\", product.product_id);\n                          }}\n                        >\n                          {product.name}\n                        </td>\n                        <td style={{ width: \"155px\" }}>\n                          <div className=\"input-group mb-3\">\n                            <input\n                              type=\"number\"\n                              value={product.quantity}\n                              className=\"form-control\"\n                              placeholder=\"Quantity\"\n                              onChange={(e) => {\n                                errors[\"quantity_\" + index] = \"\";\n                                setErrors({ ...errors });\n                                if (!e.target.value) {\n                                  errors[\"quantity_\" + index] =\n                                    \"Invalid Quantity\";\n                                  selectedProducts[index].quantity =\n                                    e.target.value;\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                if (parseFloat(e.target.value) === 0) {\n                                  errors[\"quantity_\" + index] =\n                                    \"Quantity should be > 0\";\n                                  selectedProducts[index].quantity =\n                                    e.target.value;\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                product.quantity = parseFloat(e.target.value);\n                                reCalculate();\n\n                                selectedProducts[index].quantity = parseFloat(\n                                  e.target.value\n                                );\n                                console.log(\n                                  \"selectedProducts[index].quantity:\",\n                                  selectedProducts[index].quantity\n                                );\n                                setSelectedProducts([...selectedProducts]);\n                                reCalculate();\n                              }}\n                            />\n                            <span\n                              className=\"input-group-text\"\n                              id=\"basic-addon2\"\n                            >\n                              {\" \"}\n                              {selectedProducts[index].unit\n                                ? selectedProducts[index].unit\n                                : \"Units\"}\n                            </span>\n                          </div>\n                          {errors[\"quantity_\" + index] && (\n                            <div style={{ color: \"red\" }}>\n                              <i className=\"bi bi-x-lg\"> </i>\n                              {errors[\"quantity_\" + index]}\n                            </div>\n                          )}\n                        </td>\n                        <td style={{ width: \"150px\" }}>\n                          {product.purchase_unit_price ? (\n                            <NumberFormat\n                              value={product.purchase_unit_price.toFixed(2)}\n                              displayType={\"text\"}\n                              thousandSeparator={true}\n                              suffix={\" SAR\"}\n                              renderText={(value, props) => value}\n                            />\n                          ) : (\n                            \"\"\n                          )}\n                        </td>\n                        <td style={{ width: \"180px\" }}>\n                          <div className=\"input-group mb-3\">\n                            <input\n                              type=\"number\"\n                              value={product.unit_price}\n                              className=\"form-control\"\n                              placeholder=\"Unit Price\"\n                              onChange={(e) => {\n                                errors[\"unit_price_\" + index] = \"\";\n                                setErrors({ ...errors });\n                                if (!e.target.value) {\n                                  errors[\"unit_price_\" + index] =\n                                    \"Invalid Unit Price\";\n                                  selectedProducts[index].unit_price =\n                                    parseFloat(e.target.value);\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                if (parseFloat(e.target.value) === 0) {\n                                  errors[\"unit_price_\" + index] =\n                                    \"Unit Price shoudl be > 0\";\n                                  selectedProducts[index].unit_price =\n                                    parseFloat(e.target.value);\n                                  setSelectedProducts([...selectedProducts]);\n                                  setErrors({ ...errors });\n                                  console.log(\"errors:\", errors);\n                                  return;\n                                }\n\n                                selectedProducts[index].unit_price = parseFloat(\n                                  e.target.value\n                                );\n                                console.log(\n                                  \"selectedProducts[index].unit_price:\",\n                                  selectedProducts[index].unit_price\n                                );\n                                setSelectedProducts([...selectedProducts]);\n                                reCalculate();\n                              }}\n                            />\n                            <span\n                              className=\"input-group-text\"\n                              id=\"basic-addon2\"\n                            >\n                              SAR\n                            </span>\n                          </div>\n                          {errors[\"unit_price_\" + index] && (\n                            <div style={{ color: \"red\" }}>\n                              <i className=\"bi bi-x-lg\"> </i>\n                              {errors[\"unit_price_\" + index]}\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"text-end\">\n                          <NumberFormat\n                            value={(\n                              product.unit_price * product.quantity\n                            ).toFixed(2)}\n                            displayType={\"text\"}\n                            thousandSeparator={true}\n                            suffix={\" SAR\"}\n                            renderText={(value, props) => value}\n                          />\n                        </td>\n                      </tr>\n                    ))\n                    .reverse()}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"table-responsive\">\n              <table className=\"table table-striped table-sm table-bordered\">\n                <tbody>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Total\n                    </th>\n                    <td className=\"text-end\" style={{ width: \"200px\" }}>\n                      <NumberFormat\n                        value={totalPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Shipping & Handling Fees\n                    </th>\n                    <td className=\"text-end\">\n                      <input\n                        type=\"number\"\n                        style={{ width: \"150px\" }}\n                        className=\"text-start\"\n                        value={formData.shipping_handling_fees}\n                        onChange={(e) => {\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.shipping_handling_fees = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"shipping_handling_fees\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.shipping_handling_fees = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"shipping_handling_fees\"] =\n                              \"Shipping / Handling Fees should be > 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.shipping_handling_fees = \"\";\n                            errors[\"shipping_handling_fees\"] =\n                              \"Invalid Shipping / Handling Fees\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"shipping_handling_fees\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.shipping_handling_fees = parseFloat(\n                            e.target.value\n                          );\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\" SAR\"}\n                      {errors.shipping_handling_fees && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.shipping_handling_fees}\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Discount{\" \"}\n                      <input\n                        type=\"number\"\n                        style={{ width: \"50px\" }}\n                        className=\"text-start\"\n                        value={formData.discount_percent}\n                        onChange={(e) => {\n                          formData.is_discount_percent = true;\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.discount_percent = parseFloat(\n                              e.target.value\n                            );\n                            setFormData({ ...formData });\n                            errors[\"discount_percent\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.discount_percent = parseFloat(\n                              e.target.value\n                            );\n                            formData.discount = 0.0;\n                            setFormData({ ...formData });\n                            errors[\"discount_percent\"] =\n                              \"Discount percent should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.discount_percent = \"\";\n                            formData.discount = 0.0;\n                            errors[\"discount_percent\"] =\n                              \"Invalid Discount Percent\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"discount_percent\"] = \"\";\n                          errors[\"discount\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.discount_percent = parseFloat(\n                            e.target.value\n                          );\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\"%\"}\n                      {errors.discount_percent && (\n                        <div style={{ color: \"red\" }}>\n                          {errors.discount_percent}\n                        </div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <input\n                        type=\"number\"\n                        style={{ width: \"150px\" }}\n                        className=\"text-start\"\n                        value={formData.discount}\n                        onChange={(e) => {\n                          formData.is_discount_percent = false;\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.discount = parseFloat(e.target.value);\n                            setFormData({ ...formData });\n                            errors[\"discount\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.discount = parseFloat(e.target.value);\n                            formData.discount_percent = 0.0;\n                            setFormData({ ...formData });\n                            errors[\"discount\"] = \"Discount should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.discount = \"\";\n                            formData.discount_percent = 0.0;\n                            errors[\"discount\"] = \"Invalid Discount\";\n                            setFormData({ ...formData });\n                            reCalculate();\n                            setErrors({ ...errors });\n                            return;\n                          }\n\n                          errors[\"discount\"] = \"\";\n                          errors[\"discount_percent\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.discount = parseFloat(e.target.value);\n                          setFormData({ ...formData });\n                          reCalculate();\n                        }}\n                      />\n                      {\" SAR\"}\n                      {errors.discount && (\n                        <div style={{ color: \"red\" }}>{errors.discount}</div>\n                      )}\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      {\" \"}\n                      VAT{\" \"}\n                      <input\n                        type=\"number\"\n                        className=\"text-center\"\n                        style={{ width: \"50px\" }}\n                        value={formData.vat_percent}\n                        onChange={(e) => {\n                          console.log(\"Inside onchange vat percent\");\n                          if (parseFloat(e.target.value) === 0) {\n                            formData.vat_percent = parseFloat(e.target.value);\n                            setFormData({ ...formData });\n                            errors[\"vat_percent\"] = \"\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n                          if (parseFloat(e.target.value) < 0) {\n                            formData.vat_percent = parseFloat(e.target.value);\n                            vatPrice = 0.0;\n                            setVatPrice(vatPrice);\n                            setFormData({ ...formData });\n                            errors[\"vat_percent\"] =\n                              \"Vat percent should be >= 0\";\n                            setErrors({ ...errors });\n                            reCalculate();\n                            return;\n                          }\n\n                          if (!e.target.value) {\n                            formData.vat_percent = \"\";\n                            vatPrice = 0.0;\n                            setVatPrice(vatPrice);\n                            //formData.discount_percent = 0.00;\n                            errors[\"vat_percent\"] = \"Invalid vat percent\";\n                            setFormData({ ...formData });\n                            setErrors({ ...errors });\n                            return;\n                          }\n                          errors[\"vat_percent\"] = \"\";\n                          setErrors({ ...errors });\n\n                          formData.vat_percent = e.target.value;\n                          reCalculate();\n                          setFormData({ ...formData });\n                          console.log(formData);\n                        }}\n                      />\n                      {\"%\"}\n                      {errors.vat_percent && (\n                        <div style={{ color: \"red\" }}>{errors.vat_percent}</div>\n                      )}\n                    </th>\n                    <td className=\"text-end\">\n                      <NumberFormat\n                        value={vatPrice}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </td>\n                  </tr>\n                  <tr>\n                    <th colSpan=\"8\" className=\"text-end\">\n                      Net Total\n                    </th>\n                    <th className=\"text-end\">\n                      <NumberFormat\n                        value={netTotal}\n                        displayType={\"text\"}\n                        thousandSeparator={true}\n                        suffix={\" SAR\"}\n                        renderText={(value, props) => value}\n                      />\n                    </th>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Status*</label>\n\n              <div className=\"input-group mb-3\">\n                <select\n                  value={formData.status}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange status\");\n                    if (!e.target.value) {\n                      formData.status = \"\";\n                      setFormData({ ...formData });\n                      errors[\"status\"] = \"Invalid Status\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"status\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.status = e.target.value;\n                    setFormData({ ...formData });\n                    console.log(formData);\n                  }}\n                  className=\"form-control\"\n                >\n                  <option value=\"created\">Created</option>\n                  <option value=\"delivered\">Delivered</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"accepted\">Accepted</option>\n                  <option value=\"rejected\">Rejected</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                </select>\n                {errors.status && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.status}\n                  </div>\n                )}\n                {formData.status && !errors.status && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-6\">\n              <label className=\"form-label\">Date*</label>\n\n              <div className=\"input-group mb-3\">\n                <DatePicker\n                  id=\"date_str\"\n                  selected={\n                    formData.date_str ? new Date(formData.date_str) : null\n                  }\n                  value={\n                    formData.date_str\n                      ? format(\n                        new Date(formData.date_str),\n                        \"MMMM d, yyyy h:mm aa\"\n                      )\n                      : null\n                  }\n                  className=\"form-control\"\n                  dateFormat=\"MMMM d, yyyy h:mm aa\"\n                  showTimeSelect\n                  timeIntervals=\"1\"\n                  onChange={(value) => {\n                    console.log(\"Value\", value);\n                    formData.date_str = value;\n                    // formData.date_str = format(new Date(value), \"MMMM d yyyy h:mm aa\");\n                    setFormData({ ...formData });\n                  }}\n                />\n\n                {errors.date_str && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.date_str}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">Validity (# of Days)*</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  type=\"number\"\n                  className=\"text-center\"\n                  style={{ width: \"50px\" }}\n                  value={formData.validity_days}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange validity days\");\n                    if (!e.target.value) {\n                      formData.validity_days = null;\n                      errors[\"validity_days\"] = \"Validity days are required\";\n                      setFormData({ ...formData });\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    if (parseInt(e.target.value) <= 0) {\n                      formData.validity_days = parseInt(e.target.value);\n                      setValidityDays(validityDays);\n                      setFormData({ ...formData });\n                      errors[\"validity_days\"] =\n                        \"Validity days should be > 0\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"validity_days\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.validity_days = parseInt(e.target.value);\n                    setFormData({ ...formData });\n\n                    validityDays = formData.validity_days;\n                    setValidityDays(formData.validity_days);\n                    console.log(formData);\n                  }}\n                />\n\n                {errors.validity_days && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.validity_days}\n                  </div>\n                )}\n\n                {formData.validity_days > 0 && formData.validity_day && !errors.validity_days && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"col-md-3\">\n              <label className=\"form-label\">Delivery (# of Days)*</label>\n\n              <div className=\"input-group mb-3\">\n                <input\n                  type=\"number\"\n                  className=\"text-center\"\n                  style={{ width: \"50px\" }}\n                  value={formData.delivery_days}\n                  onChange={(e) => {\n                    console.log(\"Inside onchange delivery days\");\n                    if (!e.target.value) {\n                      formData.delivery_days = null;\n                      errors[\"delivery_days\"] = \"Delivery days are required\";\n                      setFormData({ ...formData });\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    if (parseInt(e.target.value) <= 0) {\n                      formData.delivery_days = parseInt(e.target.value);\n                      setDeliveryDays(deliveryDays);\n                      setFormData({ ...formData });\n                      errors[\"delivery_days\"] =\n                        \"Delivery days should be > 0\";\n                      setErrors({ ...errors });\n                      return;\n                    }\n\n                    errors[\"delivery_days\"] = \"\";\n                    setErrors({ ...errors });\n\n                    formData.delivery_days = parseInt(e.target.value);\n                    setFormData({ ...formData });\n\n                    deliveryDays = formData.delivery_days;\n                    setDeliveryDays(formData.delivery_days);\n                    console.log(formData);\n                  }}\n                />\n\n                {errors.delivery_days && (\n                  <div style={{ color: \"red\" }}>\n                    <i className=\"bi bi-x-lg\"> </i>\n                    {errors.delivery_days}\n                  </div>\n                )}\n                {formData.delivery_days > 0 && formData.delivery_days && !errors.delivery_days && (\n                  <div style={{ color: \"green\" }}>\n                    <i className=\"bi bi-check-lg\"> </i>\n                    Looks good!\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={handleClose}>\n                Close\n              </Button>\n              <Button variant=\"primary\" onClick={handleCreate}>\n                {isProcessing\n                  ? (\n                    <Spinner\n                      as=\"span\"\n                      animation=\"border\"\n                      size=\"sm\"\n                      role=\"status\"\n                      aria-hidden={true}\n                    />\n                  ) + \" Processing...\"\n                  : formData.id\n                    ? \"Update\"\n                    : \"Create\"}\n              </Button>\n            </Modal.Footer>\n          </form>\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n});\n\nexport default QuotationCreate;\n"]},"metadata":{},"sourceType":"module"}