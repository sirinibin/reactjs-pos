"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTransport = void 0;
var types_1 = require("./types");
var createTransport = function () {
    var transport = new BroadcastChannel(types_1.tranportBroadcastName);
    return {
        emit: function (event, message) { return transport.postMessage({ event: event, message: message }); },
        on: function (event, handler) {
            return transport.addEventListener("message", function (newMessage) {
                var _a, _b;
                if (((_a = newMessage.data) === null || _a === void 0 ? void 0 : _a.event) === event) {
                    handler((_b = newMessage.data) === null || _b === void 0 ? void 0 : _b.message);
                }
            });
        },
    };
};
exports.createTransport = createTransport;
//# sourceMappingURL=Transport.js.map